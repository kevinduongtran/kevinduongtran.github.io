var RL=Object.defineProperty;var xL=(t,e,n)=>e in t?RL(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var xd=(t,e,n)=>(xL(t,typeof e!="symbol"?e+"":e,n),n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&i(l)}).observe(document,{childList:!0,subtree:!0});function n(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerpolicy&&(o.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?o.credentials="include":r.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(r){if(r.ep)return;r.ep=!0;const o=n(r);fetch(r.href,o)}})();function Ng(t,e){const n=Object.create(null),i=t.split(",");for(let r=0;r<i.length;r++)n[i[r]]=!0;return e?r=>!!n[r.toLowerCase()]:r=>!!n[r]}function Rg(t){if(fe(t)){const e={};for(let n=0;n<t.length;n++){const i=t[n],r=At(i)?kL(i):Rg(i);if(r)for(const o in r)e[o]=r[o]}return e}else{if(At(t))return t;if(tt(t))return t}}const DL=/;(?![^(]*\))/g,LL=/:([^]+)/,PL=/\/\*.*?\*\//gs;function kL(t){const e={};return t.replace(PL,"").split(DL).forEach(n=>{if(n){const i=n.split(LL);i.length>1&&(e[i[0].trim()]=i[1].trim())}}),e}function Rl(t){let e="";if(At(t))e=t;else if(fe(t))for(let n=0;n<t.length;n++){const i=Rl(t[n]);i&&(e+=i+" ")}else if(tt(t))for(const n in t)t[n]&&(e+=n+" ");return e.trim()}const ML="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",$L=Ng(ML);function jw(t){return!!t||t===""}function FL(t,e){if(t.length!==e.length)return!1;let n=!0;for(let i=0;n&&i<t.length;i++)n=ph(t[i],e[i]);return n}function ph(t,e){if(t===e)return!0;let n=rE(t),i=rE(e);if(n||i)return n&&i?t.getTime()===e.getTime():!1;if(n=sl(t),i=sl(e),n||i)return t===e;if(n=fe(t),i=fe(e),n||i)return n&&i?FL(t,e):!1;if(n=tt(t),i=tt(e),n||i){if(!n||!i)return!1;const r=Object.keys(t).length,o=Object.keys(e).length;if(r!==o)return!1;for(const l in t){const u=t.hasOwnProperty(l),h=e.hasOwnProperty(l);if(u&&!h||!u&&h||!ph(t[l],e[l]))return!1}}return String(t)===String(e)}function qw(t,e){return t.findIndex(n=>ph(n,e))}const er=t=>At(t)?t:t==null?"":fe(t)||tt(t)&&(t.toString===zw||!Ie(t.toString))?JSON.stringify(t,Kw,2):String(t),Kw=(t,e)=>e&&e.__v_isRef?Kw(t,e.value):So(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((n,[i,r])=>(n[`${i} =>`]=r,n),{})}:_h(e)?{[`Set(${e.size})`]:[...e.values()]}:tt(e)&&!fe(e)&&!Yw(e)?String(e):e,it={},Ao=[],ui=()=>{},UL=()=>!1,BL=/^on[^a-z]/,gh=t=>BL.test(t),xg=t=>t.startsWith("onUpdate:"),Zt=Object.assign,Dg=(t,e)=>{const n=t.indexOf(e);n>-1&&t.splice(n,1)},WL=Object.prototype.hasOwnProperty,$e=(t,e)=>WL.call(t,e),fe=Array.isArray,So=t=>xl(t)==="[object Map]",_h=t=>xl(t)==="[object Set]",rE=t=>xl(t)==="[object Date]",Ie=t=>typeof t=="function",At=t=>typeof t=="string",sl=t=>typeof t=="symbol",tt=t=>t!==null&&typeof t=="object",Gw=t=>tt(t)&&Ie(t.then)&&Ie(t.catch),zw=Object.prototype.toString,xl=t=>zw.call(t),HL=t=>xl(t).slice(8,-1),Yw=t=>xl(t)==="[object Object]",Lg=t=>At(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,gu=Ng(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),mh=t=>{const e=Object.create(null);return n=>e[n]||(e[n]=t(n))},VL=/-(\w)/g,Di=mh(t=>t.replace(VL,(e,n)=>n?n.toUpperCase():"")),jL=/\B([A-Z])/g,Qo=mh(t=>t.replace(jL,"-$1").toLowerCase()),vh=mh(t=>t.charAt(0).toUpperCase()+t.slice(1)),Dd=mh(t=>t?`on${vh(t)}`:""),ol=(t,e)=>!Object.is(t,e),_u=(t,e)=>{for(let n=0;n<t.length;n++)t[n](e)},Iu=(t,e,n)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,value:n})},Au=t=>{const e=parseFloat(t);return isNaN(e)?t:e};let sE;const qL=()=>sE||(sE=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});let wi;class KL{constructor(e=!1){this.detached=e,this.active=!0,this.effects=[],this.cleanups=[],this.parent=wi,!e&&wi&&(this.index=(wi.scopes||(wi.scopes=[])).push(this)-1)}run(e){if(this.active){const n=wi;try{return wi=this,e()}finally{wi=n}}}on(){wi=this}off(){wi=this.parent}stop(e){if(this.active){let n,i;for(n=0,i=this.effects.length;n<i;n++)this.effects[n].stop();for(n=0,i=this.cleanups.length;n<i;n++)this.cleanups[n]();if(this.scopes)for(n=0,i=this.scopes.length;n<i;n++)this.scopes[n].stop(!0);if(!this.detached&&this.parent&&!e){const r=this.parent.scopes.pop();r&&r!==this&&(this.parent.scopes[this.index]=r,r.index=this.index)}this.parent=void 0,this.active=!1}}}function GL(t,e=wi){e&&e.active&&e.effects.push(t)}const Pg=t=>{const e=new Set(t);return e.w=0,e.n=0,e},Xw=t=>(t.w&Br)>0,Qw=t=>(t.n&Br)>0,zL=({deps:t})=>{if(t.length)for(let e=0;e<t.length;e++)t[e].w|=Br},YL=t=>{const{deps:e}=t;if(e.length){let n=0;for(let i=0;i<e.length;i++){const r=e[i];Xw(r)&&!Qw(r)?r.delete(t):e[n++]=r,r.w&=~Br,r.n&=~Br}e.length=n}},Tp=new WeakMap;let Wa=0,Br=1;const Cp=30;let ri;const Ss=Symbol(""),Ip=Symbol("");class kg{constructor(e,n=null,i){this.fn=e,this.scheduler=n,this.active=!0,this.deps=[],this.parent=void 0,GL(this,i)}run(){if(!this.active)return this.fn();let e=ri,n=Lr;for(;e;){if(e===this)return;e=e.parent}try{return this.parent=ri,ri=this,Lr=!0,Br=1<<++Wa,Wa<=Cp?zL(this):oE(this),this.fn()}finally{Wa<=Cp&&YL(this),Br=1<<--Wa,ri=this.parent,Lr=n,this.parent=void 0,this.deferStop&&this.stop()}}stop(){ri===this?this.deferStop=!0:this.active&&(oE(this),this.onStop&&this.onStop(),this.active=!1)}}function oE(t){const{deps:e}=t;if(e.length){for(let n=0;n<e.length;n++)e[n].delete(t);e.length=0}}let Lr=!0;const Jw=[];function Jo(){Jw.push(Lr),Lr=!1}function Zo(){const t=Jw.pop();Lr=t===void 0?!0:t}function Rn(t,e,n){if(Lr&&ri){let i=Tp.get(t);i||Tp.set(t,i=new Map);let r=i.get(n);r||i.set(n,r=Pg()),Zw(r)}}function Zw(t,e){let n=!1;Wa<=Cp?Qw(t)||(t.n|=Br,n=!Xw(t)):n=!t.has(ri),n&&(t.add(ri),ri.deps.push(t))}function lr(t,e,n,i,r,o){const l=Tp.get(t);if(!l)return;let u=[];if(e==="clear")u=[...l.values()];else if(n==="length"&&fe(t)){const h=Au(i);l.forEach((d,p)=>{(p==="length"||p>=h)&&u.push(d)})}else switch(n!==void 0&&u.push(l.get(n)),e){case"add":fe(t)?Lg(n)&&u.push(l.get("length")):(u.push(l.get(Ss)),So(t)&&u.push(l.get(Ip)));break;case"delete":fe(t)||(u.push(l.get(Ss)),So(t)&&u.push(l.get(Ip)));break;case"set":So(t)&&u.push(l.get(Ss));break}if(u.length===1)u[0]&&Ap(u[0]);else{const h=[];for(const d of u)d&&h.push(...d);Ap(Pg(h))}}function Ap(t,e){const n=fe(t)?t:[...t];for(const i of n)i.computed&&aE(i);for(const i of n)i.computed||aE(i)}function aE(t,e){(t!==ri||t.allowRecurse)&&(t.scheduler?t.scheduler():t.run())}const XL=Ng("__proto__,__v_isRef,__isVue"),eT=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(sl)),QL=Mg(),JL=Mg(!1,!0),ZL=Mg(!0),lE=eP();function eP(){const t={};return["includes","indexOf","lastIndexOf"].forEach(e=>{t[e]=function(...n){const i=He(this);for(let o=0,l=this.length;o<l;o++)Rn(i,"get",o+"");const r=i[e](...n);return r===-1||r===!1?i[e](...n.map(He)):r}}),["push","pop","shift","unshift","splice"].forEach(e=>{t[e]=function(...n){Jo();const i=He(this)[e].apply(this,n);return Zo(),i}}),t}function Mg(t=!1,e=!1){return function(i,r,o){if(r==="__v_isReactive")return!t;if(r==="__v_isReadonly")return t;if(r==="__v_isShallow")return e;if(r==="__v_raw"&&o===(t?e?_P:sT:e?rT:iT).get(i))return i;const l=fe(i);if(!t&&l&&$e(lE,r))return Reflect.get(lE,r,o);const u=Reflect.get(i,r,o);return(sl(r)?eT.has(r):XL(r))||(t||Rn(i,"get",r),e)?u:Xt(u)?l&&Lg(r)?u:u.value:tt(u)?t?oT(u):Dl(u):u}}const tP=tT(),nP=tT(!0);function tT(t=!1){return function(n,i,r,o){let l=n[i];if(Mo(l)&&Xt(l)&&!Xt(r))return!1;if(!t&&(!Su(r)&&!Mo(r)&&(l=He(l),r=He(r)),!fe(n)&&Xt(l)&&!Xt(r)))return l.value=r,!0;const u=fe(n)&&Lg(i)?Number(i)<n.length:$e(n,i),h=Reflect.set(n,i,r,o);return n===He(o)&&(u?ol(r,l)&&lr(n,"set",i,r):lr(n,"add",i,r)),h}}function iP(t,e){const n=$e(t,e);t[e];const i=Reflect.deleteProperty(t,e);return i&&n&&lr(t,"delete",e,void 0),i}function rP(t,e){const n=Reflect.has(t,e);return(!sl(e)||!eT.has(e))&&Rn(t,"has",e),n}function sP(t){return Rn(t,"iterate",fe(t)?"length":Ss),Reflect.ownKeys(t)}const nT={get:QL,set:tP,deleteProperty:iP,has:rP,ownKeys:sP},oP={get:ZL,set(t,e){return!0},deleteProperty(t,e){return!0}},aP=Zt({},nT,{get:JL,set:nP}),$g=t=>t,yh=t=>Reflect.getPrototypeOf(t);function Kc(t,e,n=!1,i=!1){t=t.__v_raw;const r=He(t),o=He(e);n||(e!==o&&Rn(r,"get",e),Rn(r,"get",o));const{has:l}=yh(r),u=i?$g:n?Bg:al;if(l.call(r,e))return u(t.get(e));if(l.call(r,o))return u(t.get(o));t!==r&&t.get(e)}function Gc(t,e=!1){const n=this.__v_raw,i=He(n),r=He(t);return e||(t!==r&&Rn(i,"has",t),Rn(i,"has",r)),t===r?n.has(t):n.has(t)||n.has(r)}function zc(t,e=!1){return t=t.__v_raw,!e&&Rn(He(t),"iterate",Ss),Reflect.get(t,"size",t)}function cE(t){t=He(t);const e=He(this);return yh(e).has.call(e,t)||(e.add(t),lr(e,"add",t,t)),this}function uE(t,e){e=He(e);const n=He(this),{has:i,get:r}=yh(n);let o=i.call(n,t);o||(t=He(t),o=i.call(n,t));const l=r.call(n,t);return n.set(t,e),o?ol(e,l)&&lr(n,"set",t,e):lr(n,"add",t,e),this}function hE(t){const e=He(this),{has:n,get:i}=yh(e);let r=n.call(e,t);r||(t=He(t),r=n.call(e,t)),i&&i.call(e,t);const o=e.delete(t);return r&&lr(e,"delete",t,void 0),o}function fE(){const t=He(this),e=t.size!==0,n=t.clear();return e&&lr(t,"clear",void 0,void 0),n}function Yc(t,e){return function(i,r){const o=this,l=o.__v_raw,u=He(l),h=e?$g:t?Bg:al;return!t&&Rn(u,"iterate",Ss),l.forEach((d,p)=>i.call(r,h(d),h(p),o))}}function Xc(t,e,n){return function(...i){const r=this.__v_raw,o=He(r),l=So(o),u=t==="entries"||t===Symbol.iterator&&l,h=t==="keys"&&l,d=r[t](...i),p=n?$g:e?Bg:al;return!e&&Rn(o,"iterate",h?Ip:Ss),{next(){const{value:_,done:y}=d.next();return y?{value:_,done:y}:{value:u?[p(_[0]),p(_[1])]:p(_),done:y}},[Symbol.iterator](){return this}}}}function Ir(t){return function(...e){return t==="delete"?!1:this}}function lP(){const t={get(o){return Kc(this,o)},get size(){return zc(this)},has:Gc,add:cE,set:uE,delete:hE,clear:fE,forEach:Yc(!1,!1)},e={get(o){return Kc(this,o,!1,!0)},get size(){return zc(this)},has:Gc,add:cE,set:uE,delete:hE,clear:fE,forEach:Yc(!1,!0)},n={get(o){return Kc(this,o,!0)},get size(){return zc(this,!0)},has(o){return Gc.call(this,o,!0)},add:Ir("add"),set:Ir("set"),delete:Ir("delete"),clear:Ir("clear"),forEach:Yc(!0,!1)},i={get(o){return Kc(this,o,!0,!0)},get size(){return zc(this,!0)},has(o){return Gc.call(this,o,!0)},add:Ir("add"),set:Ir("set"),delete:Ir("delete"),clear:Ir("clear"),forEach:Yc(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(o=>{t[o]=Xc(o,!1,!1),n[o]=Xc(o,!0,!1),e[o]=Xc(o,!1,!0),i[o]=Xc(o,!0,!0)}),[t,n,e,i]}const[cP,uP,hP,fP]=lP();function Fg(t,e){const n=e?t?fP:hP:t?uP:cP;return(i,r,o)=>r==="__v_isReactive"?!t:r==="__v_isReadonly"?t:r==="__v_raw"?i:Reflect.get($e(n,r)&&r in i?n:i,r,o)}const dP={get:Fg(!1,!1)},pP={get:Fg(!1,!0)},gP={get:Fg(!0,!1)},iT=new WeakMap,rT=new WeakMap,sT=new WeakMap,_P=new WeakMap;function mP(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function vP(t){return t.__v_skip||!Object.isExtensible(t)?0:mP(HL(t))}function Dl(t){return Mo(t)?t:Ug(t,!1,nT,dP,iT)}function yP(t){return Ug(t,!1,aP,pP,rT)}function oT(t){return Ug(t,!0,oP,gP,sT)}function Ug(t,e,n,i,r){if(!tt(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const o=r.get(t);if(o)return o;const l=vP(t);if(l===0)return t;const u=new Proxy(t,l===2?i:n);return r.set(t,u),u}function Oo(t){return Mo(t)?Oo(t.__v_raw):!!(t&&t.__v_isReactive)}function Mo(t){return!!(t&&t.__v_isReadonly)}function Su(t){return!!(t&&t.__v_isShallow)}function aT(t){return Oo(t)||Mo(t)}function He(t){const e=t&&t.__v_raw;return e?He(e):t}function lT(t){return Iu(t,"__v_skip",!0),t}const al=t=>tt(t)?Dl(t):t,Bg=t=>tt(t)?oT(t):t;function cT(t){Lr&&ri&&(t=He(t),Zw(t.dep||(t.dep=Pg())))}function uT(t,e){t=He(t),t.dep&&Ap(t.dep)}function Xt(t){return!!(t&&t.__v_isRef===!0)}function Li(t){return EP(t,!1)}function EP(t,e){return Xt(t)?t:new bP(t,e)}class bP{constructor(e,n){this.__v_isShallow=n,this.dep=void 0,this.__v_isRef=!0,this._rawValue=n?e:He(e),this._value=n?e:al(e)}get value(){return cT(this),this._value}set value(e){const n=this.__v_isShallow||Su(e)||Mo(e);e=n?e:He(e),ol(e,this._rawValue)&&(this._rawValue=e,this._value=n?e:al(e),uT(this))}}function wP(t){return Xt(t)?t.value:t}const TP={get:(t,e,n)=>wP(Reflect.get(t,e,n)),set:(t,e,n,i)=>{const r=t[e];return Xt(r)&&!Xt(n)?(r.value=n,!0):Reflect.set(t,e,n,i)}};function hT(t){return Oo(t)?t:new Proxy(t,TP)}var fT;class CP{constructor(e,n,i,r){this._setter=n,this.dep=void 0,this.__v_isRef=!0,this[fT]=!1,this._dirty=!0,this.effect=new kg(e,()=>{this._dirty||(this._dirty=!0,uT(this))}),this.effect.computed=this,this.effect.active=this._cacheable=!r,this.__v_isReadonly=i}get value(){const e=He(this);return cT(e),(e._dirty||!e._cacheable)&&(e._dirty=!1,e._value=e.effect.run()),e._value}set value(e){this._setter(e)}}fT="__v_isReadonly";function IP(t,e,n=!1){let i,r;const o=Ie(t);return o?(i=t,r=ui):(i=t.get,r=t.set),new CP(i,r,o||!r,n)}function Pr(t,e,n,i){let r;try{r=i?t(...i):t()}catch(o){Eh(o,e,n)}return r}function qn(t,e,n,i){if(Ie(t)){const o=Pr(t,e,n,i);return o&&Gw(o)&&o.catch(l=>{Eh(l,e,n)}),o}const r=[];for(let o=0;o<t.length;o++)r.push(qn(t[o],e,n,i));return r}function Eh(t,e,n,i=!0){const r=e?e.vnode:null;if(e){let o=e.parent;const l=e.proxy,u=n;for(;o;){const d=o.ec;if(d){for(let p=0;p<d.length;p++)if(d[p](t,l,u)===!1)return}o=o.parent}const h=e.appContext.config.errorHandler;if(h){Pr(h,null,10,[t,l,u]);return}}AP(t,n,r,i)}function AP(t,e,n,i=!0){console.error(t)}let ll=!1,Sp=!1;const Yt=[];let Ci=0;const No=[];let Zi=null,_s=0;const dT=Promise.resolve();let Wg=null;function Wr(t){const e=Wg||dT;return t?e.then(this?t.bind(this):t):e}function SP(t){let e=Ci+1,n=Yt.length;for(;e<n;){const i=e+n>>>1;cl(Yt[i])<t?e=i+1:n=i}return e}function Hg(t){(!Yt.length||!Yt.includes(t,ll&&t.allowRecurse?Ci+1:Ci))&&(t.id==null?Yt.push(t):Yt.splice(SP(t.id),0,t),pT())}function pT(){!ll&&!Sp&&(Sp=!0,Wg=dT.then(_T))}function OP(t){const e=Yt.indexOf(t);e>Ci&&Yt.splice(e,1)}function NP(t){fe(t)?No.push(...t):(!Zi||!Zi.includes(t,t.allowRecurse?_s+1:_s))&&No.push(t),pT()}function dE(t,e=ll?Ci+1:0){for(;e<Yt.length;e++){const n=Yt[e];n&&n.pre&&(Yt.splice(e,1),e--,n())}}function gT(t){if(No.length){const e=[...new Set(No)];if(No.length=0,Zi){Zi.push(...e);return}for(Zi=e,Zi.sort((n,i)=>cl(n)-cl(i)),_s=0;_s<Zi.length;_s++)Zi[_s]();Zi=null,_s=0}}const cl=t=>t.id==null?1/0:t.id,RP=(t,e)=>{const n=cl(t)-cl(e);if(n===0){if(t.pre&&!e.pre)return-1;if(e.pre&&!t.pre)return 1}return n};function _T(t){Sp=!1,ll=!0,Yt.sort(RP);const e=ui;try{for(Ci=0;Ci<Yt.length;Ci++){const n=Yt[Ci];n&&n.active!==!1&&Pr(n,null,14)}}finally{Ci=0,Yt.length=0,gT(),ll=!1,Wg=null,(Yt.length||No.length)&&_T()}}function xP(t,e,...n){if(t.isUnmounted)return;const i=t.vnode.props||it;let r=n;const o=e.startsWith("update:"),l=o&&e.slice(7);if(l&&l in i){const p=`${l==="modelValue"?"model":l}Modifiers`,{number:_,trim:y}=i[p]||it;y&&(r=n.map(b=>At(b)?b.trim():b)),_&&(r=n.map(Au))}let u,h=i[u=Dd(e)]||i[u=Dd(Di(e))];!h&&o&&(h=i[u=Dd(Qo(e))]),h&&qn(h,t,6,r);const d=i[u+"Once"];if(d){if(!t.emitted)t.emitted={};else if(t.emitted[u])return;t.emitted[u]=!0,qn(d,t,6,r)}}function mT(t,e,n=!1){const i=e.emitsCache,r=i.get(t);if(r!==void 0)return r;const o=t.emits;let l={},u=!1;if(!Ie(t)){const h=d=>{const p=mT(d,e,!0);p&&(u=!0,Zt(l,p))};!n&&e.mixins.length&&e.mixins.forEach(h),t.extends&&h(t.extends),t.mixins&&t.mixins.forEach(h)}return!o&&!u?(tt(t)&&i.set(t,null),null):(fe(o)?o.forEach(h=>l[h]=null):Zt(l,o),tt(t)&&i.set(t,l),l)}function bh(t,e){return!t||!gh(e)?!1:(e=e.slice(2).replace(/Once$/,""),$e(t,e[0].toLowerCase()+e.slice(1))||$e(t,Qo(e))||$e(t,e))}let Bt=null,wh=null;function Ou(t){const e=Bt;return Bt=t,wh=t&&t.type.__scopeId||null,e}function Vg(t){wh=t}function jg(){wh=null}function yo(t,e=Bt,n){if(!e||t._n)return t;const i=(...r)=>{i._d&&CE(-1);const o=Ou(e);let l;try{l=t(...r)}finally{Ou(o),i._d&&CE(1)}return l};return i._n=!0,i._c=!0,i._d=!0,i}function Ld(t){const{type:e,vnode:n,proxy:i,withProxy:r,props:o,propsOptions:[l],slots:u,attrs:h,emit:d,render:p,renderCache:_,data:y,setupState:b,ctx:S,inheritAttrs:N}=t;let k,G;const oe=Ou(t);try{if(n.shapeFlag&4){const V=r||i;k=Ti(p.call(V,V,_,o,b,y,S)),G=h}else{const V=e;k=Ti(V.length>1?V(o,{attrs:h,slots:u,emit:d}):V(o,null)),G=e.props?h:DP(h)}}catch(V){za.length=0,Eh(V,t,1),k=ft(Kn)}let H=k;if(G&&N!==!1){const V=Object.keys(G),{shapeFlag:Q}=H;V.length&&Q&7&&(l&&V.some(xg)&&(G=LP(G,l)),H=Hr(H,G))}return n.dirs&&(H=Hr(H),H.dirs=H.dirs?H.dirs.concat(n.dirs):n.dirs),n.transition&&(H.transition=n.transition),k=H,Ou(oe),k}const DP=t=>{let e;for(const n in t)(n==="class"||n==="style"||gh(n))&&((e||(e={}))[n]=t[n]);return e},LP=(t,e)=>{const n={};for(const i in t)(!xg(i)||!(i.slice(9)in e))&&(n[i]=t[i]);return n};function PP(t,e,n){const{props:i,children:r,component:o}=t,{props:l,children:u,patchFlag:h}=e,d=o.emitsOptions;if(e.dirs||e.transition)return!0;if(n&&h>=0){if(h&1024)return!0;if(h&16)return i?pE(i,l,d):!!l;if(h&8){const p=e.dynamicProps;for(let _=0;_<p.length;_++){const y=p[_];if(l[y]!==i[y]&&!bh(d,y))return!0}}}else return(r||u)&&(!u||!u.$stable)?!0:i===l?!1:i?l?pE(i,l,d):!0:!!l;return!1}function pE(t,e,n){const i=Object.keys(e);if(i.length!==Object.keys(t).length)return!0;for(let r=0;r<i.length;r++){const o=i[r];if(e[o]!==t[o]&&!bh(n,o))return!0}return!1}function kP({vnode:t,parent:e},n){for(;e&&e.subTree===t;)(t=e.vnode).el=n,e=e.parent}const MP=t=>t.__isSuspense;function $P(t,e){e&&e.pendingBranch?fe(t)?e.effects.push(...t):e.effects.push(t):NP(t)}function Ai(t,e){if(Dt){let n=Dt.provides;const i=Dt.parent&&Dt.parent.provides;i===n&&(n=Dt.provides=Object.create(i)),n[t]=e}}function It(t,e,n=!1){const i=Dt||Bt;if(i){const r=i.parent==null?i.vnode.appContext&&i.vnode.appContext.provides:i.parent.provides;if(r&&t in r)return r[t];if(arguments.length>1)return n&&Ie(e)?e.call(i.proxy):e}}const Qc={};function Os(t,e,n){return vT(t,e,n)}function vT(t,e,{immediate:n,deep:i,flush:r,onTrack:o,onTrigger:l}=it){const u=Dt;let h,d=!1,p=!1;if(Xt(t)?(h=()=>t.value,d=Su(t)):Oo(t)?(h=()=>t,i=!0):fe(t)?(p=!0,d=t.some(H=>Oo(H)||Su(H)),h=()=>t.map(H=>{if(Xt(H))return H.value;if(Oo(H))return Es(H);if(Ie(H))return Pr(H,u,2)})):Ie(t)?e?h=()=>Pr(t,u,2):h=()=>{if(!(u&&u.isUnmounted))return _&&_(),qn(t,u,3,[y])}:h=ui,e&&i){const H=h;h=()=>Es(H())}let _,y=H=>{_=G.onStop=()=>{Pr(H,u,4)}},b;if(hl)if(y=ui,e?n&&qn(e,u,3,[h(),p?[]:void 0,y]):h(),r==="sync"){const H=Pk();b=H.__watcherHandles||(H.__watcherHandles=[])}else return ui;let S=p?new Array(t.length).fill(Qc):Qc;const N=()=>{if(G.active)if(e){const H=G.run();(i||d||(p?H.some((V,Q)=>ol(V,S[Q])):ol(H,S)))&&(_&&_(),qn(e,u,3,[H,S===Qc?void 0:p&&S[0]===Qc?[]:S,y]),S=H)}else G.run()};N.allowRecurse=!!e;let k;r==="sync"?k=N:r==="post"?k=()=>mn(N,u&&u.suspense):(N.pre=!0,u&&(N.id=u.uid),k=()=>Hg(N));const G=new kg(h,k);e?n?N():S=G.run():r==="post"?mn(G.run.bind(G),u&&u.suspense):G.run();const oe=()=>{G.stop(),u&&u.scope&&Dg(u.scope.effects,G)};return b&&b.push(oe),oe}function FP(t,e,n){const i=this.proxy,r=At(t)?t.includes(".")?yT(i,t):()=>i[t]:t.bind(i,i);let o;Ie(e)?o=e:(o=e.handler,n=e);const l=Dt;$o(this);const u=vT(r,o.bind(i),n);return l?$o(l):Ns(),u}function yT(t,e){const n=e.split(".");return()=>{let i=t;for(let r=0;r<n.length&&i;r++)i=i[n[r]];return i}}function Es(t,e){if(!tt(t)||t.__v_skip||(e=e||new Set,e.has(t)))return t;if(e.add(t),Xt(t))Es(t.value,e);else if(fe(t))for(let n=0;n<t.length;n++)Es(t[n],e);else if(_h(t)||So(t))t.forEach(n=>{Es(n,e)});else if(Yw(t))for(const n in t)Es(t[n],e);return t}function UP(){const t={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return Yr(()=>{t.isMounted=!0}),Ih(()=>{t.isUnmounting=!0}),t}const Vn=[Function,Array],BP={name:"BaseTransition",props:{mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:Vn,onEnter:Vn,onAfterEnter:Vn,onEnterCancelled:Vn,onBeforeLeave:Vn,onLeave:Vn,onAfterLeave:Vn,onLeaveCancelled:Vn,onBeforeAppear:Vn,onAppear:Vn,onAfterAppear:Vn,onAppearCancelled:Vn},setup(t,{slots:e}){const n=Ak(),i=UP();let r;return()=>{const o=e.default&&bT(e.default(),!0);if(!o||!o.length)return;let l=o[0];if(o.length>1){for(const N of o)if(N.type!==Kn){l=N;break}}const u=He(t),{mode:h}=u;if(i.isLeaving)return Pd(l);const d=gE(l);if(!d)return Pd(l);const p=Op(d,u,i,n);Np(d,p);const _=n.subTree,y=_&&gE(_);let b=!1;const{getTransitionKey:S}=d.type;if(S){const N=S();r===void 0?r=N:N!==r&&(r=N,b=!0)}if(y&&y.type!==Kn&&(!ms(d,y)||b)){const N=Op(y,u,i,n);if(Np(y,N),h==="out-in")return i.isLeaving=!0,N.afterLeave=()=>{i.isLeaving=!1,n.update.active!==!1&&n.update()},Pd(l);h==="in-out"&&d.type!==Kn&&(N.delayLeave=(k,G,oe)=>{const H=ET(i,y);H[String(y.key)]=y,k._leaveCb=()=>{G(),k._leaveCb=void 0,delete p.delayedLeave},p.delayedLeave=oe})}return l}}},WP=BP;function ET(t,e){const{leavingVNodes:n}=t;let i=n.get(e.type);return i||(i=Object.create(null),n.set(e.type,i)),i}function Op(t,e,n,i){const{appear:r,mode:o,persisted:l=!1,onBeforeEnter:u,onEnter:h,onAfterEnter:d,onEnterCancelled:p,onBeforeLeave:_,onLeave:y,onAfterLeave:b,onLeaveCancelled:S,onBeforeAppear:N,onAppear:k,onAfterAppear:G,onAppearCancelled:oe}=e,H=String(t.key),V=ET(n,t),Q=(X,de)=>{X&&qn(X,i,9,de)},B=(X,de)=>{const pe=de[1];Q(X,de),fe(X)?X.every(Fe=>Fe.length<=1)&&pe():X.length<=1&&pe()},Z={mode:o,persisted:l,beforeEnter(X){let de=u;if(!n.isMounted)if(r)de=N||u;else return;X._leaveCb&&X._leaveCb(!0);const pe=V[H];pe&&ms(t,pe)&&pe.el._leaveCb&&pe.el._leaveCb(),Q(de,[X])},enter(X){let de=h,pe=d,Fe=p;if(!n.isMounted)if(r)de=k||h,pe=G||d,Fe=oe||p;else return;let rt=!1;const Ye=X._enterCb=jt=>{rt||(rt=!0,jt?Q(Fe,[X]):Q(pe,[X]),Z.delayedLeave&&Z.delayedLeave(),X._enterCb=void 0)};de?B(de,[X,Ye]):Ye()},leave(X,de){const pe=String(t.key);if(X._enterCb&&X._enterCb(!0),n.isUnmounting)return de();Q(_,[X]);let Fe=!1;const rt=X._leaveCb=Ye=>{Fe||(Fe=!0,de(),Ye?Q(S,[X]):Q(b,[X]),X._leaveCb=void 0,V[pe]===t&&delete V[pe])};V[pe]=t,y?B(y,[X,rt]):rt()},clone(X){return Op(X,e,n,i)}};return Z}function Pd(t){if(Th(t))return t=Hr(t),t.children=null,t}function gE(t){return Th(t)?t.children?t.children[0]:void 0:t}function Np(t,e){t.shapeFlag&6&&t.component?Np(t.component.subTree,e):t.shapeFlag&128?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}function bT(t,e=!1,n){let i=[],r=0;for(let o=0;o<t.length;o++){let l=t[o];const u=n==null?l.key:String(n)+String(l.key!=null?l.key:o);l.type===xt?(l.patchFlag&128&&r++,i=i.concat(bT(l.children,e,u))):(e||l.type!==Kn)&&i.push(u!=null?Hr(l,{key:u}):l)}if(r>1)for(let o=0;o<i.length;o++)i[o].patchFlag=-2;return i}const qa=t=>!!t.type.__asyncLoader,Th=t=>t.type.__isKeepAlive;function HP(t,e){wT(t,"a",e)}function VP(t,e){wT(t,"da",e)}function wT(t,e,n=Dt){const i=t.__wdc||(t.__wdc=()=>{let r=n;for(;r;){if(r.isDeactivated)return;r=r.parent}return t()});if(Ch(e,i,n),n){let r=n.parent;for(;r&&r.parent;)Th(r.parent.vnode)&&jP(i,e,n,r),r=r.parent}}function jP(t,e,n,i){const r=Ch(e,t,i,!0);qg(()=>{Dg(i[e],r)},n)}function Ch(t,e,n=Dt,i=!1){if(n){const r=n[t]||(n[t]=[]),o=e.__weh||(e.__weh=(...l)=>{if(n.isUnmounted)return;Jo(),$o(n);const u=qn(e,n,t,l);return Ns(),Zo(),u});return i?r.unshift(o):r.push(o),o}}const dr=t=>(e,n=Dt)=>(!hl||t==="sp")&&Ch(t,(...i)=>e(...i),n),qP=dr("bm"),Yr=dr("m"),KP=dr("bu"),GP=dr("u"),Ih=dr("bum"),qg=dr("um"),zP=dr("sp"),YP=dr("rtg"),XP=dr("rtc");function QP(t,e=Dt){Ch("ec",t,e)}function _E(t,e){const n=Bt;if(n===null)return t;const i=Oh(n)||n.proxy,r=t.dirs||(t.dirs=[]);for(let o=0;o<e.length;o++){let[l,u,h,d=it]=e[o];l&&(Ie(l)&&(l={mounted:l,updated:l}),l.deep&&Es(u),r.push({dir:l,instance:i,value:u,oldValue:void 0,arg:h,modifiers:d}))}return t}function hs(t,e,n,i){const r=t.dirs,o=e&&e.dirs;for(let l=0;l<r.length;l++){const u=r[l];o&&(u.oldValue=o[l].value);let h=u.dir[i];h&&(Jo(),qn(h,n,8,[t.el,u,t,e]),Zo())}}const TT="components";function xr(t,e){return ZP(TT,t,!0,e)||t}const JP=Symbol();function ZP(t,e,n=!0,i=!1){const r=Bt||Dt;if(r){const o=r.type;if(t===TT){const u=xk(o,!1);if(u&&(u===e||u===Di(e)||u===vh(Di(e))))return o}const l=mE(r[t]||o[t],e)||mE(r.appContext[t],e);return!l&&i?o:l}}function mE(t,e){return t&&(t[e]||t[Di(e)]||t[vh(Di(e))])}function Ka(t,e,n,i){let r;const o=n&&n[i];if(fe(t)||At(t)){r=new Array(t.length);for(let l=0,u=t.length;l<u;l++)r[l]=e(t[l],l,void 0,o&&o[l])}else if(typeof t=="number"){r=new Array(t);for(let l=0;l<t;l++)r[l]=e(l+1,l,void 0,o&&o[l])}else if(tt(t))if(t[Symbol.iterator])r=Array.from(t,(l,u)=>e(l,u,void 0,o&&o[u]));else{const l=Object.keys(t);r=new Array(l.length);for(let u=0,h=l.length;u<h;u++){const d=l[u];r[u]=e(t[d],d,u,o&&o[u])}}else r=[];return n&&(n[i]=r),r}function ek(t,e,n={},i,r){if(Bt.isCE||Bt.parent&&qa(Bt.parent)&&Bt.parent.isCE)return e!=="default"&&(n.name=e),ft("slot",n,i&&i());let o=t[e];o&&o._c&&(o._d=!1),Le();const l=o&&CT(o(n)),u=Or(xt,{key:n.key||l&&l.key||`_${e}`},l||(i?i():[]),l&&t._===1?64:-2);return!r&&u.scopeId&&(u.slotScopeIds=[u.scopeId+"-s"]),o&&o._c&&(o._d=!0),u}function CT(t){return t.some(e=>Ru(e)?!(e.type===Kn||e.type===xt&&!CT(e.children)):!0)?t:null}const Rp=t=>t?kT(t)?Oh(t)||t.proxy:Rp(t.parent):null,Ga=Zt(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>Rp(t.parent),$root:t=>Rp(t.root),$emit:t=>t.emit,$options:t=>Kg(t),$forceUpdate:t=>t.f||(t.f=()=>Hg(t.update)),$nextTick:t=>t.n||(t.n=Wr.bind(t.proxy)),$watch:t=>FP.bind(t)}),kd=(t,e)=>t!==it&&!t.__isScriptSetup&&$e(t,e),tk={get({_:t},e){const{ctx:n,setupState:i,data:r,props:o,accessCache:l,type:u,appContext:h}=t;let d;if(e[0]!=="$"){const b=l[e];if(b!==void 0)switch(b){case 1:return i[e];case 2:return r[e];case 4:return n[e];case 3:return o[e]}else{if(kd(i,e))return l[e]=1,i[e];if(r!==it&&$e(r,e))return l[e]=2,r[e];if((d=t.propsOptions[0])&&$e(d,e))return l[e]=3,o[e];if(n!==it&&$e(n,e))return l[e]=4,n[e];xp&&(l[e]=0)}}const p=Ga[e];let _,y;if(p)return e==="$attrs"&&Rn(t,"get",e),p(t);if((_=u.__cssModules)&&(_=_[e]))return _;if(n!==it&&$e(n,e))return l[e]=4,n[e];if(y=h.config.globalProperties,$e(y,e))return y[e]},set({_:t},e,n){const{data:i,setupState:r,ctx:o}=t;return kd(r,e)?(r[e]=n,!0):i!==it&&$e(i,e)?(i[e]=n,!0):$e(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(o[e]=n,!0)},has({_:{data:t,setupState:e,accessCache:n,ctx:i,appContext:r,propsOptions:o}},l){let u;return!!n[l]||t!==it&&$e(t,l)||kd(e,l)||(u=o[0])&&$e(u,l)||$e(i,l)||$e(Ga,l)||$e(r.config.globalProperties,l)},defineProperty(t,e,n){return n.get!=null?t._.accessCache[e]=0:$e(n,"value")&&this.set(t,e,n.value,null),Reflect.defineProperty(t,e,n)}};let xp=!0;function nk(t){const e=Kg(t),n=t.proxy,i=t.ctx;xp=!1,e.beforeCreate&&vE(e.beforeCreate,t,"bc");const{data:r,computed:o,methods:l,watch:u,provide:h,inject:d,created:p,beforeMount:_,mounted:y,beforeUpdate:b,updated:S,activated:N,deactivated:k,beforeDestroy:G,beforeUnmount:oe,destroyed:H,unmounted:V,render:Q,renderTracked:B,renderTriggered:Z,errorCaptured:X,serverPrefetch:de,expose:pe,inheritAttrs:Fe,components:rt,directives:Ye,filters:jt}=e;if(d&&ik(d,i,null,t.appContext.config.unwrapInjectedRef),l)for(const ye in l){const we=l[ye];Ie(we)&&(i[ye]=we.bind(n))}if(r){const ye=r.call(n,n);tt(ye)&&(t.data=Dl(ye))}if(xp=!0,o)for(const ye in o){const we=o[ye],Pt=Ie(we)?we.bind(n,n):Ie(we.get)?we.get.bind(n,n):ui,hn=!Ie(we)&&Ie(we.set)?we.set.bind(n):ui,ct=Mp({get:Pt,set:hn});Object.defineProperty(i,ye,{enumerable:!0,configurable:!0,get:()=>ct.value,set:St=>ct.value=St})}if(u)for(const ye in u)IT(u[ye],i,n,ye);if(h){const ye=Ie(h)?h.call(n):h;Reflect.ownKeys(ye).forEach(we=>{Ai(we,ye[we])})}p&&vE(p,t,"c");function Be(ye,we){fe(we)?we.forEach(Pt=>ye(Pt.bind(n))):we&&ye(we.bind(n))}if(Be(qP,_),Be(Yr,y),Be(KP,b),Be(GP,S),Be(HP,N),Be(VP,k),Be(QP,X),Be(XP,B),Be(YP,Z),Be(Ih,oe),Be(qg,V),Be(zP,de),fe(pe))if(pe.length){const ye=t.exposed||(t.exposed={});pe.forEach(we=>{Object.defineProperty(ye,we,{get:()=>n[we],set:Pt=>n[we]=Pt})})}else t.exposed||(t.exposed={});Q&&t.render===ui&&(t.render=Q),Fe!=null&&(t.inheritAttrs=Fe),rt&&(t.components=rt),Ye&&(t.directives=Ye)}function ik(t,e,n=ui,i=!1){fe(t)&&(t=Dp(t));for(const r in t){const o=t[r];let l;tt(o)?"default"in o?l=It(o.from||r,o.default,!0):l=It(o.from||r):l=It(o),Xt(l)&&i?Object.defineProperty(e,r,{enumerable:!0,configurable:!0,get:()=>l.value,set:u=>l.value=u}):e[r]=l}}function vE(t,e,n){qn(fe(t)?t.map(i=>i.bind(e.proxy)):t.bind(e.proxy),e,n)}function IT(t,e,n,i){const r=i.includes(".")?yT(n,i):()=>n[i];if(At(t)){const o=e[t];Ie(o)&&Os(r,o)}else if(Ie(t))Os(r,t.bind(n));else if(tt(t))if(fe(t))t.forEach(o=>IT(o,e,n,i));else{const o=Ie(t.handler)?t.handler.bind(n):e[t.handler];Ie(o)&&Os(r,o,t)}}function Kg(t){const e=t.type,{mixins:n,extends:i}=e,{mixins:r,optionsCache:o,config:{optionMergeStrategies:l}}=t.appContext,u=o.get(e);let h;return u?h=u:!r.length&&!n&&!i?h=e:(h={},r.length&&r.forEach(d=>Nu(h,d,l,!0)),Nu(h,e,l)),tt(e)&&o.set(e,h),h}function Nu(t,e,n,i=!1){const{mixins:r,extends:o}=e;o&&Nu(t,o,n,!0),r&&r.forEach(l=>Nu(t,l,n,!0));for(const l in e)if(!(i&&l==="expose")){const u=rk[l]||n&&n[l];t[l]=u?u(t[l],e[l]):e[l]}return t}const rk={data:yE,props:ds,emits:ds,methods:ds,computed:ds,beforeCreate:sn,created:sn,beforeMount:sn,mounted:sn,beforeUpdate:sn,updated:sn,beforeDestroy:sn,beforeUnmount:sn,destroyed:sn,unmounted:sn,activated:sn,deactivated:sn,errorCaptured:sn,serverPrefetch:sn,components:ds,directives:ds,watch:ok,provide:yE,inject:sk};function yE(t,e){return e?t?function(){return Zt(Ie(t)?t.call(this,this):t,Ie(e)?e.call(this,this):e)}:e:t}function sk(t,e){return ds(Dp(t),Dp(e))}function Dp(t){if(fe(t)){const e={};for(let n=0;n<t.length;n++)e[t[n]]=t[n];return e}return t}function sn(t,e){return t?[...new Set([].concat(t,e))]:e}function ds(t,e){return t?Zt(Zt(Object.create(null),t),e):e}function ok(t,e){if(!t)return e;if(!e)return t;const n=Zt(Object.create(null),t);for(const i in e)n[i]=sn(t[i],e[i]);return n}function ak(t,e,n,i=!1){const r={},o={};Iu(o,Sh,1),t.propsDefaults=Object.create(null),AT(t,e,r,o);for(const l in t.propsOptions[0])l in r||(r[l]=void 0);n?t.props=i?r:yP(r):t.type.props?t.props=r:t.props=o,t.attrs=o}function lk(t,e,n,i){const{props:r,attrs:o,vnode:{patchFlag:l}}=t,u=He(r),[h]=t.propsOptions;let d=!1;if((i||l>0)&&!(l&16)){if(l&8){const p=t.vnode.dynamicProps;for(let _=0;_<p.length;_++){let y=p[_];if(bh(t.emitsOptions,y))continue;const b=e[y];if(h)if($e(o,y))b!==o[y]&&(o[y]=b,d=!0);else{const S=Di(y);r[S]=Lp(h,u,S,b,t,!1)}else b!==o[y]&&(o[y]=b,d=!0)}}}else{AT(t,e,r,o)&&(d=!0);let p;for(const _ in u)(!e||!$e(e,_)&&((p=Qo(_))===_||!$e(e,p)))&&(h?n&&(n[_]!==void 0||n[p]!==void 0)&&(r[_]=Lp(h,u,_,void 0,t,!0)):delete r[_]);if(o!==u)for(const _ in o)(!e||!$e(e,_))&&(delete o[_],d=!0)}d&&lr(t,"set","$attrs")}function AT(t,e,n,i){const[r,o]=t.propsOptions;let l=!1,u;if(e)for(let h in e){if(gu(h))continue;const d=e[h];let p;r&&$e(r,p=Di(h))?!o||!o.includes(p)?n[p]=d:(u||(u={}))[p]=d:bh(t.emitsOptions,h)||(!(h in i)||d!==i[h])&&(i[h]=d,l=!0)}if(o){const h=He(n),d=u||it;for(let p=0;p<o.length;p++){const _=o[p];n[_]=Lp(r,h,_,d[_],t,!$e(d,_))}}return l}function Lp(t,e,n,i,r,o){const l=t[n];if(l!=null){const u=$e(l,"default");if(u&&i===void 0){const h=l.default;if(l.type!==Function&&Ie(h)){const{propsDefaults:d}=r;n in d?i=d[n]:($o(r),i=d[n]=h.call(null,e),Ns())}else i=h}l[0]&&(o&&!u?i=!1:l[1]&&(i===""||i===Qo(n))&&(i=!0))}return i}function ST(t,e,n=!1){const i=e.propsCache,r=i.get(t);if(r)return r;const o=t.props,l={},u=[];let h=!1;if(!Ie(t)){const p=_=>{h=!0;const[y,b]=ST(_,e,!0);Zt(l,y),b&&u.push(...b)};!n&&e.mixins.length&&e.mixins.forEach(p),t.extends&&p(t.extends),t.mixins&&t.mixins.forEach(p)}if(!o&&!h)return tt(t)&&i.set(t,Ao),Ao;if(fe(o))for(let p=0;p<o.length;p++){const _=Di(o[p]);EE(_)&&(l[_]=it)}else if(o)for(const p in o){const _=Di(p);if(EE(_)){const y=o[p],b=l[_]=fe(y)||Ie(y)?{type:y}:Object.assign({},y);if(b){const S=TE(Boolean,b.type),N=TE(String,b.type);b[0]=S>-1,b[1]=N<0||S<N,(S>-1||$e(b,"default"))&&u.push(_)}}}const d=[l,u];return tt(t)&&i.set(t,d),d}function EE(t){return t[0]!=="$"}function bE(t){const e=t&&t.toString().match(/^\s*function (\w+)/);return e?e[1]:t===null?"null":""}function wE(t,e){return bE(t)===bE(e)}function TE(t,e){return fe(e)?e.findIndex(n=>wE(n,t)):Ie(e)&&wE(e,t)?0:-1}const OT=t=>t[0]==="_"||t==="$stable",Gg=t=>fe(t)?t.map(Ti):[Ti(t)],ck=(t,e,n)=>{if(e._n)return e;const i=yo((...r)=>Gg(e(...r)),n);return i._c=!1,i},NT=(t,e,n)=>{const i=t._ctx;for(const r in t){if(OT(r))continue;const o=t[r];if(Ie(o))e[r]=ck(r,o,i);else if(o!=null){const l=Gg(o);e[r]=()=>l}}},RT=(t,e)=>{const n=Gg(e);t.slots.default=()=>n},uk=(t,e)=>{if(t.vnode.shapeFlag&32){const n=e._;n?(t.slots=He(e),Iu(e,"_",n)):NT(e,t.slots={})}else t.slots={},e&&RT(t,e);Iu(t.slots,Sh,1)},hk=(t,e,n)=>{const{vnode:i,slots:r}=t;let o=!0,l=it;if(i.shapeFlag&32){const u=e._;u?n&&u===1?o=!1:(Zt(r,e),!n&&u===1&&delete r._):(o=!e.$stable,NT(e,r)),l=e}else e&&(RT(t,e),l={default:1});if(o)for(const u in r)!OT(u)&&!(u in l)&&delete r[u]};function xT(){return{app:null,config:{isNativeTag:UL,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let fk=0;function dk(t,e){return function(i,r=null){Ie(i)||(i=Object.assign({},i)),r!=null&&!tt(r)&&(r=null);const o=xT(),l=new Set;let u=!1;const h=o.app={_uid:fk++,_component:i,_props:r,_container:null,_context:o,_instance:null,version:kk,get config(){return o.config},set config(d){},use(d,...p){return l.has(d)||(d&&Ie(d.install)?(l.add(d),d.install(h,...p)):Ie(d)&&(l.add(d),d(h,...p))),h},mixin(d){return o.mixins.includes(d)||o.mixins.push(d),h},component(d,p){return p?(o.components[d]=p,h):o.components[d]},directive(d,p){return p?(o.directives[d]=p,h):o.directives[d]},mount(d,p,_){if(!u){const y=ft(i,r);return y.appContext=o,p&&e?e(y,d):t(y,d,_),u=!0,h._container=d,d.__vue_app__=h,Oh(y.component)||y.component.proxy}},unmount(){u&&(t(null,h._container),delete h._container.__vue_app__)},provide(d,p){return o.provides[d]=p,h}};return h}}function Pp(t,e,n,i,r=!1){if(fe(t)){t.forEach((y,b)=>Pp(y,e&&(fe(e)?e[b]:e),n,i,r));return}if(qa(i)&&!r)return;const o=i.shapeFlag&4?Oh(i.component)||i.component.proxy:i.el,l=r?null:o,{i:u,r:h}=t,d=e&&e.r,p=u.refs===it?u.refs={}:u.refs,_=u.setupState;if(d!=null&&d!==h&&(At(d)?(p[d]=null,$e(_,d)&&(_[d]=null)):Xt(d)&&(d.value=null)),Ie(h))Pr(h,u,12,[l,p]);else{const y=At(h),b=Xt(h);if(y||b){const S=()=>{if(t.f){const N=y?$e(_,h)?_[h]:p[h]:h.value;r?fe(N)&&Dg(N,o):fe(N)?N.includes(o)||N.push(o):y?(p[h]=[o],$e(_,h)&&(_[h]=p[h])):(h.value=[o],t.k&&(p[t.k]=h.value))}else y?(p[h]=l,$e(_,h)&&(_[h]=l)):b&&(h.value=l,t.k&&(p[t.k]=l))};l?(S.id=-1,mn(S,n)):S()}}}const mn=$P;function pk(t){return gk(t)}function gk(t,e){const n=qL();n.__VUE__=!0;const{insert:i,remove:r,patchProp:o,createElement:l,createText:u,createComment:h,setText:d,setElementText:p,parentNode:_,nextSibling:y,setScopeId:b=ui,insertStaticContent:S}=t,N=(w,C,R,M=null,$=null,W=null,z=!1,q=null,j=!!C.dynamicChildren)=>{if(w===C)return;w&&!ms(w,C)&&(M=Zn(w),St(w,$,W,!0),w=null),C.patchFlag===-2&&(j=!1,C.dynamicChildren=null);const{type:P,ref:te,shapeFlag:J}=C;switch(P){case Ah:k(w,C,R,M);break;case Kn:G(w,C,R,M);break;case mu:w==null&&oe(C,R,M,z);break;case xt:rt(w,C,R,M,$,W,z,q,j);break;default:J&1?Q(w,C,R,M,$,W,z,q,j):J&6?Ye(w,C,R,M,$,W,z,q,j):(J&64||J&128)&&P.process(w,C,R,M,$,W,z,q,j,Kt)}te!=null&&$&&Pp(te,w&&w.ref,W,C||w,!C)},k=(w,C,R,M)=>{if(w==null)i(C.el=u(C.children),R,M);else{const $=C.el=w.el;C.children!==w.children&&d($,C.children)}},G=(w,C,R,M)=>{w==null?i(C.el=h(C.children||""),R,M):C.el=w.el},oe=(w,C,R,M)=>{[w.el,w.anchor]=S(w.children,C,R,M,w.el,w.anchor)},H=({el:w,anchor:C},R,M)=>{let $;for(;w&&w!==C;)$=y(w),i(w,R,M),w=$;i(C,R,M)},V=({el:w,anchor:C})=>{let R;for(;w&&w!==C;)R=y(w),r(w),w=R;r(C)},Q=(w,C,R,M,$,W,z,q,j)=>{z=z||C.type==="svg",w==null?B(C,R,M,$,W,z,q,j):de(w,C,$,W,z,q,j)},B=(w,C,R,M,$,W,z,q)=>{let j,P;const{type:te,props:J,shapeFlag:se,transition:ae,dirs:Ee}=w;if(j=w.el=l(w.type,W,J&&J.is,J),se&8?p(j,w.children):se&16&&X(w.children,j,null,M,$,W&&te!=="foreignObject",z,q),Ee&&hs(w,null,M,"created"),J){for(const Se in J)Se!=="value"&&!gu(Se)&&o(j,Se,null,J[Se],W,w.children,M,$,mt);"value"in J&&o(j,"value",null,J.value),(P=J.onVnodeBeforeMount)&&bi(P,M,w)}Z(j,w,w.scopeId,z,M),Ee&&hs(w,null,M,"beforeMount");const Pe=(!$||$&&!$.pendingBranch)&&ae&&!ae.persisted;Pe&&ae.beforeEnter(j),i(j,C,R),((P=J&&J.onVnodeMounted)||Pe||Ee)&&mn(()=>{P&&bi(P,M,w),Pe&&ae.enter(j),Ee&&hs(w,null,M,"mounted")},$)},Z=(w,C,R,M,$)=>{if(R&&b(w,R),M)for(let W=0;W<M.length;W++)b(w,M[W]);if($){let W=$.subTree;if(C===W){const z=$.vnode;Z(w,z,z.scopeId,z.slotScopeIds,$.parent)}}},X=(w,C,R,M,$,W,z,q,j=0)=>{for(let P=j;P<w.length;P++){const te=w[P]=q?Nr(w[P]):Ti(w[P]);N(null,te,C,R,M,$,W,z,q)}},de=(w,C,R,M,$,W,z)=>{const q=C.el=w.el;let{patchFlag:j,dynamicChildren:P,dirs:te}=C;j|=w.patchFlag&16;const J=w.props||it,se=C.props||it;let ae;R&&fs(R,!1),(ae=se.onVnodeBeforeUpdate)&&bi(ae,R,C,w),te&&hs(C,w,R,"beforeUpdate"),R&&fs(R,!0);const Ee=$&&C.type!=="foreignObject";if(P?pe(w.dynamicChildren,P,q,R,M,Ee,W):z||we(w,C,q,null,R,M,Ee,W,!1),j>0){if(j&16)Fe(q,C,J,se,R,M,$);else if(j&2&&J.class!==se.class&&o(q,"class",null,se.class,$),j&4&&o(q,"style",J.style,se.style,$),j&8){const Pe=C.dynamicProps;for(let Se=0;Se<Pe.length;Se++){const st=Pe[Se],en=J[st],mi=se[st];(mi!==en||st==="value")&&o(q,st,en,mi,$,w.children,R,M,mt)}}j&1&&w.children!==C.children&&p(q,C.children)}else!z&&P==null&&Fe(q,C,J,se,R,M,$);((ae=se.onVnodeUpdated)||te)&&mn(()=>{ae&&bi(ae,R,C,w),te&&hs(C,w,R,"updated")},M)},pe=(w,C,R,M,$,W,z)=>{for(let q=0;q<C.length;q++){const j=w[q],P=C[q],te=j.el&&(j.type===xt||!ms(j,P)||j.shapeFlag&70)?_(j.el):R;N(j,P,te,null,M,$,W,z,!0)}},Fe=(w,C,R,M,$,W,z)=>{if(R!==M){if(R!==it)for(const q in R)!gu(q)&&!(q in M)&&o(w,q,R[q],null,z,C.children,$,W,mt);for(const q in M){if(gu(q))continue;const j=M[q],P=R[q];j!==P&&q!=="value"&&o(w,q,P,j,z,C.children,$,W,mt)}"value"in M&&o(w,"value",R.value,M.value)}},rt=(w,C,R,M,$,W,z,q,j)=>{const P=C.el=w?w.el:u(""),te=C.anchor=w?w.anchor:u("");let{patchFlag:J,dynamicChildren:se,slotScopeIds:ae}=C;ae&&(q=q?q.concat(ae):ae),w==null?(i(P,R,M),i(te,R,M),X(C.children,R,te,$,W,z,q,j)):J>0&&J&64&&se&&w.dynamicChildren?(pe(w.dynamicChildren,se,R,$,W,z,q),(C.key!=null||$&&C===$.subTree)&&DT(w,C,!0)):we(w,C,R,te,$,W,z,q,j)},Ye=(w,C,R,M,$,W,z,q,j)=>{C.slotScopeIds=q,w==null?C.shapeFlag&512?$.ctx.activate(C,R,M,z,j):jt(C,R,M,$,W,z,j):Ln(w,C,j)},jt=(w,C,R,M,$,W,z)=>{const q=w.component=Ik(w,M,$);if(Th(w)&&(q.ctx.renderer=Kt),Sk(q),q.asyncDep){if($&&$.registerDep(q,Be),!w.el){const j=q.subTree=ft(Kn);G(null,j,C,R)}return}Be(q,w,C,R,$,W,z)},Ln=(w,C,R)=>{const M=C.component=w.component;if(PP(w,C,R))if(M.asyncDep&&!M.asyncResolved){ye(M,C,R);return}else M.next=C,OP(M.update),M.update();else C.el=w.el,M.vnode=C},Be=(w,C,R,M,$,W,z)=>{const q=()=>{if(w.isMounted){let{next:te,bu:J,u:se,parent:ae,vnode:Ee}=w,Pe=te,Se;fs(w,!1),te?(te.el=Ee.el,ye(w,te,z)):te=Ee,J&&_u(J),(Se=te.props&&te.props.onVnodeBeforeUpdate)&&bi(Se,ae,te,Ee),fs(w,!0);const st=Ld(w),en=w.subTree;w.subTree=st,N(en,st,_(en.el),Zn(en),w,$,W),te.el=st.el,Pe===null&&kP(w,st.el),se&&mn(se,$),(Se=te.props&&te.props.onVnodeUpdated)&&mn(()=>bi(Se,ae,te,Ee),$)}else{let te;const{el:J,props:se}=C,{bm:ae,m:Ee,parent:Pe}=w,Se=qa(C);if(fs(w,!1),ae&&_u(ae),!Se&&(te=se&&se.onVnodeBeforeMount)&&bi(te,Pe,C),fs(w,!0),J&&Pn){const st=()=>{w.subTree=Ld(w),Pn(J,w.subTree,w,$,null)};Se?C.type.__asyncLoader().then(()=>!w.isUnmounted&&st()):st()}else{const st=w.subTree=Ld(w);N(null,st,R,M,w,$,W),C.el=st.el}if(Ee&&mn(Ee,$),!Se&&(te=se&&se.onVnodeMounted)){const st=C;mn(()=>bi(te,Pe,st),$)}(C.shapeFlag&256||Pe&&qa(Pe.vnode)&&Pe.vnode.shapeFlag&256)&&w.a&&mn(w.a,$),w.isMounted=!0,C=R=M=null}},j=w.effect=new kg(q,()=>Hg(P),w.scope),P=w.update=()=>j.run();P.id=w.uid,fs(w,!0),P()},ye=(w,C,R)=>{C.component=w;const M=w.vnode.props;w.vnode=C,w.next=null,lk(w,C.props,M,R),hk(w,C.children,R),Jo(),dE(),Zo()},we=(w,C,R,M,$,W,z,q,j=!1)=>{const P=w&&w.children,te=w?w.shapeFlag:0,J=C.children,{patchFlag:se,shapeFlag:ae}=C;if(se>0){if(se&128){hn(P,J,R,M,$,W,z,q,j);return}else if(se&256){Pt(P,J,R,M,$,W,z,q,j);return}}ae&8?(te&16&&mt(P,$,W),J!==P&&p(R,J)):te&16?ae&16?hn(P,J,R,M,$,W,z,q,j):mt(P,$,W,!0):(te&8&&p(R,""),ae&16&&X(J,R,M,$,W,z,q,j))},Pt=(w,C,R,M,$,W,z,q,j)=>{w=w||Ao,C=C||Ao;const P=w.length,te=C.length,J=Math.min(P,te);let se;for(se=0;se<J;se++){const ae=C[se]=j?Nr(C[se]):Ti(C[se]);N(w[se],ae,R,null,$,W,z,q,j)}P>te?mt(w,$,W,!0,!1,J):X(C,R,M,$,W,z,q,j,J)},hn=(w,C,R,M,$,W,z,q,j)=>{let P=0;const te=C.length;let J=w.length-1,se=te-1;for(;P<=J&&P<=se;){const ae=w[P],Ee=C[P]=j?Nr(C[P]):Ti(C[P]);if(ms(ae,Ee))N(ae,Ee,R,null,$,W,z,q,j);else break;P++}for(;P<=J&&P<=se;){const ae=w[J],Ee=C[se]=j?Nr(C[se]):Ti(C[se]);if(ms(ae,Ee))N(ae,Ee,R,null,$,W,z,q,j);else break;J--,se--}if(P>J){if(P<=se){const ae=se+1,Ee=ae<te?C[ae].el:M;for(;P<=se;)N(null,C[P]=j?Nr(C[P]):Ti(C[P]),R,Ee,$,W,z,q,j),P++}}else if(P>se)for(;P<=J;)St(w[P],$,W,!0),P++;else{const ae=P,Ee=P,Pe=new Map;for(P=Ee;P<=se;P++){const Mt=C[P]=j?Nr(C[P]):Ti(C[P]);Mt.key!=null&&Pe.set(Mt.key,P)}let Se,st=0;const en=se-Ee+1;let mi=!1,Ys=0;const Vi=new Array(en);for(P=0;P<en;P++)Vi[P]=0;for(P=ae;P<=J;P++){const Mt=w[P];if(st>=en){St(Mt,$,W,!0);continue}let fn;if(Mt.key!=null)fn=Pe.get(Mt.key);else for(Se=Ee;Se<=se;Se++)if(Vi[Se-Ee]===0&&ms(Mt,C[Se])){fn=Se;break}fn===void 0?St(Mt,$,W,!0):(Vi[fn-Ee]=P+1,fn>=Ys?Ys=fn:mi=!0,N(Mt,C[fn],R,null,$,W,z,q,j),st++)}const Xs=mi?_k(Vi):Ao;for(Se=Xs.length-1,P=en-1;P>=0;P--){const Mt=Ee+P,fn=C[Mt],Qs=Mt+1<te?C[Mt+1].el:M;Vi[P]===0?N(null,fn,R,Qs,$,W,z,q,j):mi&&(Se<0||P!==Xs[Se]?ct(fn,R,Qs,2):Se--)}}},ct=(w,C,R,M,$=null)=>{const{el:W,type:z,transition:q,children:j,shapeFlag:P}=w;if(P&6){ct(w.component.subTree,C,R,M);return}if(P&128){w.suspense.move(C,R,M);return}if(P&64){z.move(w,C,R,Kt);return}if(z===xt){i(W,C,R);for(let J=0;J<j.length;J++)ct(j[J],C,R,M);i(w.anchor,C,R);return}if(z===mu){H(w,C,R);return}if(M!==2&&P&1&&q)if(M===0)q.beforeEnter(W),i(W,C,R),mn(()=>q.enter(W),$);else{const{leave:J,delayLeave:se,afterLeave:ae}=q,Ee=()=>i(W,C,R),Pe=()=>{J(W,()=>{Ee(),ae&&ae()})};se?se(W,Ee,Pe):Pe()}else i(W,C,R)},St=(w,C,R,M=!1,$=!1)=>{const{type:W,props:z,ref:q,children:j,dynamicChildren:P,shapeFlag:te,patchFlag:J,dirs:se}=w;if(q!=null&&Pp(q,null,R,w,!0),te&256){C.ctx.deactivate(w);return}const ae=te&1&&se,Ee=!qa(w);let Pe;if(Ee&&(Pe=z&&z.onVnodeBeforeUnmount)&&bi(Pe,C,w),te&6)kt(w.component,R,M);else{if(te&128){w.suspense.unmount(R,M);return}ae&&hs(w,null,C,"beforeUnmount"),te&64?w.type.remove(w,C,R,$,Kt,M):P&&(W!==xt||J>0&&J&64)?mt(P,C,R,!1,!0):(W===xt&&J&384||!$&&te&16)&&mt(j,C,R),M&&Hi(w)}(Ee&&(Pe=z&&z.onVnodeUnmounted)||ae)&&mn(()=>{Pe&&bi(Pe,C,w),ae&&hs(w,null,C,"unmounted")},R)},Hi=w=>{const{type:C,el:R,anchor:M,transition:$}=w;if(C===xt){_i(R,M);return}if(C===mu){V(w);return}const W=()=>{r(R),$&&!$.persisted&&$.afterLeave&&$.afterLeave()};if(w.shapeFlag&1&&$&&!$.persisted){const{leave:z,delayLeave:q}=$,j=()=>z(R,W);q?q(w.el,W,j):j()}else W()},_i=(w,C)=>{let R;for(;w!==C;)R=y(w),r(w),w=R;r(C)},kt=(w,C,R)=>{const{bum:M,scope:$,update:W,subTree:z,um:q}=w;M&&_u(M),$.stop(),W&&(W.active=!1,St(z,w,C,R)),q&&mn(q,C),mn(()=>{w.isUnmounted=!0},C),C&&C.pendingBranch&&!C.isUnmounted&&w.asyncDep&&!w.asyncResolved&&w.suspenseId===C.pendingId&&(C.deps--,C.deps===0&&C.resolve())},mt=(w,C,R,M=!1,$=!1,W=0)=>{for(let z=W;z<w.length;z++)St(w[z],C,R,M,$)},Zn=w=>w.shapeFlag&6?Zn(w.component.subTree):w.shapeFlag&128?w.suspense.next():y(w.anchor||w.el),qt=(w,C,R)=>{w==null?C._vnode&&St(C._vnode,null,null,!0):N(C._vnode||null,w,C,null,null,null,R),dE(),gT(),C._vnode=w},Kt={p:N,um:St,m:ct,r:Hi,mt:jt,mc:X,pc:we,pbc:pe,n:Zn,o:t};let ts,Pn;return e&&([ts,Pn]=e(Kt)),{render:qt,hydrate:ts,createApp:dk(qt,ts)}}function fs({effect:t,update:e},n){t.allowRecurse=e.allowRecurse=n}function DT(t,e,n=!1){const i=t.children,r=e.children;if(fe(i)&&fe(r))for(let o=0;o<i.length;o++){const l=i[o];let u=r[o];u.shapeFlag&1&&!u.dynamicChildren&&((u.patchFlag<=0||u.patchFlag===32)&&(u=r[o]=Nr(r[o]),u.el=l.el),n||DT(l,u)),u.type===Ah&&(u.el=l.el)}}function _k(t){const e=t.slice(),n=[0];let i,r,o,l,u;const h=t.length;for(i=0;i<h;i++){const d=t[i];if(d!==0){if(r=n[n.length-1],t[r]<d){e[i]=r,n.push(i);continue}for(o=0,l=n.length-1;o<l;)u=o+l>>1,t[n[u]]<d?o=u+1:l=u;d<t[n[o]]&&(o>0&&(e[i]=n[o-1]),n[o]=i)}}for(o=n.length,l=n[o-1];o-- >0;)n[o]=l,l=e[l];return n}const mk=t=>t.__isTeleport,xt=Symbol(void 0),Ah=Symbol(void 0),Kn=Symbol(void 0),mu=Symbol(void 0),za=[];let ai=null;function Le(t=!1){za.push(ai=t?null:[])}function vk(){za.pop(),ai=za[za.length-1]||null}let ul=1;function CE(t){ul+=t}function LT(t){return t.dynamicChildren=ul>0?ai||Ao:null,vk(),ul>0&&ai&&ai.push(t),t}function Ge(t,e,n,i,r,o){return LT(ge(t,e,n,i,r,o,!0))}function Or(t,e,n,i,r){return LT(ft(t,e,n,i,r,!0))}function Ru(t){return t?t.__v_isVNode===!0:!1}function ms(t,e){return t.type===e.type&&t.key===e.key}const Sh="__vInternal",PT=({key:t})=>t??null,vu=({ref:t,ref_key:e,ref_for:n})=>t!=null?At(t)||Xt(t)||Ie(t)?{i:Bt,r:t,k:e,f:!!n}:t:null;function ge(t,e=null,n=null,i=0,r=null,o=t===xt?0:1,l=!1,u=!1){const h={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&PT(e),ref:e&&vu(e),scopeId:wh,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:o,patchFlag:i,dynamicProps:r,dynamicChildren:null,appContext:null,ctx:Bt};return u?(zg(h,n),o&128&&t.normalize(h)):n&&(h.shapeFlag|=At(n)?8:16),ul>0&&!l&&ai&&(h.patchFlag>0||o&6)&&h.patchFlag!==32&&ai.push(h),h}const ft=yk;function yk(t,e=null,n=null,i=0,r=null,o=!1){if((!t||t===JP)&&(t=Kn),Ru(t)){const u=Hr(t,e,!0);return n&&zg(u,n),ul>0&&!o&&ai&&(u.shapeFlag&6?ai[ai.indexOf(t)]=u:ai.push(u)),u.patchFlag|=-2,u}if(Dk(t)&&(t=t.__vccOpts),e){e=Ek(e);let{class:u,style:h}=e;u&&!At(u)&&(e.class=Rl(u)),tt(h)&&(aT(h)&&!fe(h)&&(h=Zt({},h)),e.style=Rg(h))}const l=At(t)?1:MP(t)?128:mk(t)?64:tt(t)?4:Ie(t)?2:0;return ge(t,e,n,i,r,l,o,!0)}function Ek(t){return t?aT(t)||Sh in t?Zt({},t):t:null}function Hr(t,e,n=!1){const{props:i,ref:r,patchFlag:o,children:l}=t,u=e?wk(i||{},e):i;return{__v_isVNode:!0,__v_skip:!0,type:t.type,props:u,key:u&&PT(u),ref:e&&e.ref?n&&r?fe(r)?r.concat(vu(e)):[r,vu(e)]:vu(e):r,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:l,target:t.target,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==xt?o===-1?16:o|16:o,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:t.transition,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&Hr(t.ssContent),ssFallback:t.ssFallback&&Hr(t.ssFallback),el:t.el,anchor:t.anchor,ctx:t.ctx}}function kp(t=" ",e=0){return ft(Ah,null,t,e)}function bk(t,e){const n=ft(mu,null,t);return n.staticCount=e,n}function bt(t="",e=!1){return e?(Le(),Or(Kn,null,t)):ft(Kn,null,t)}function Ti(t){return t==null||typeof t=="boolean"?ft(Kn):fe(t)?ft(xt,null,t.slice()):typeof t=="object"?Nr(t):ft(Ah,null,String(t))}function Nr(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:Hr(t)}function zg(t,e){let n=0;const{shapeFlag:i}=t;if(e==null)e=null;else if(fe(e))n=16;else if(typeof e=="object")if(i&65){const r=e.default;r&&(r._c&&(r._d=!1),zg(t,r()),r._c&&(r._d=!0));return}else{n=32;const r=e._;!r&&!(Sh in e)?e._ctx=Bt:r===3&&Bt&&(Bt.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else Ie(e)?(e={default:e,_ctx:Bt},n=32):(e=String(e),i&64?(n=16,e=[kp(e)]):n=8);t.children=e,t.shapeFlag|=n}function wk(...t){const e={};for(let n=0;n<t.length;n++){const i=t[n];for(const r in i)if(r==="class")e.class!==i.class&&(e.class=Rl([e.class,i.class]));else if(r==="style")e.style=Rg([e.style,i.style]);else if(gh(r)){const o=e[r],l=i[r];l&&o!==l&&!(fe(o)&&o.includes(l))&&(e[r]=o?[].concat(o,l):l)}else r!==""&&(e[r]=i[r])}return e}function bi(t,e,n,i=null){qn(t,e,7,[n,i])}const Tk=xT();let Ck=0;function Ik(t,e,n){const i=t.type,r=(e?e.appContext:t.appContext)||Tk,o={uid:Ck++,vnode:t,type:i,parent:e,appContext:r,root:null,next:null,subTree:null,effect:null,update:null,scope:new KL(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(r.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:ST(i,r),emitsOptions:mT(i,r),emit:null,emitted:null,propsDefaults:it,inheritAttrs:i.inheritAttrs,ctx:it,data:it,props:it,attrs:it,slots:it,refs:it,setupState:it,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return o.ctx={_:o},o.root=e?e.root:o,o.emit=xP.bind(null,o),t.ce&&t.ce(o),o}let Dt=null;const Ak=()=>Dt||Bt,$o=t=>{Dt=t,t.scope.on()},Ns=()=>{Dt&&Dt.scope.off(),Dt=null};function kT(t){return t.vnode.shapeFlag&4}let hl=!1;function Sk(t,e=!1){hl=e;const{props:n,children:i}=t.vnode,r=kT(t);ak(t,n,r,e),uk(t,i);const o=r?Ok(t,e):void 0;return hl=!1,o}function Ok(t,e){const n=t.type;t.accessCache=Object.create(null),t.proxy=lT(new Proxy(t.ctx,tk));const{setup:i}=n;if(i){const r=t.setupContext=i.length>1?Rk(t):null;$o(t),Jo();const o=Pr(i,t,0,[t.props,r]);if(Zo(),Ns(),Gw(o)){if(o.then(Ns,Ns),e)return o.then(l=>{IE(t,l,e)}).catch(l=>{Eh(l,t,0)});t.asyncDep=o}else IE(t,o,e)}else MT(t,e)}function IE(t,e,n){Ie(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:tt(e)&&(t.setupState=hT(e)),MT(t,n)}let AE;function MT(t,e,n){const i=t.type;if(!t.render){if(!e&&AE&&!i.render){const r=i.template||Kg(t).template;if(r){const{isCustomElement:o,compilerOptions:l}=t.appContext.config,{delimiters:u,compilerOptions:h}=i,d=Zt(Zt({isCustomElement:o,delimiters:u},l),h);i.render=AE(r,d)}}t.render=i.render||ui}$o(t),Jo(),nk(t),Zo(),Ns()}function Nk(t){return new Proxy(t.attrs,{get(e,n){return Rn(t,"get","$attrs"),e[n]}})}function Rk(t){const e=i=>{t.exposed=i||{}};let n;return{get attrs(){return n||(n=Nk(t))},slots:t.slots,emit:t.emit,expose:e}}function Oh(t){if(t.exposed)return t.exposeProxy||(t.exposeProxy=new Proxy(hT(lT(t.exposed)),{get(e,n){if(n in e)return e[n];if(n in Ga)return Ga[n](t)},has(e,n){return n in e||n in Ga}}))}function xk(t,e=!0){return Ie(t)?t.displayName||t.name:t.name||e&&t.__name}function Dk(t){return Ie(t)&&"__vccOpts"in t}const Mp=(t,e)=>IP(t,e,hl);function Yg(t,e,n){const i=arguments.length;return i===2?tt(e)&&!fe(e)?Ru(e)?ft(t,null,[e]):ft(t,e):ft(t,null,e):(i>3?n=Array.prototype.slice.call(arguments,2):i===3&&Ru(n)&&(n=[n]),ft(t,e,n))}const Lk=Symbol(""),Pk=()=>It(Lk),kk="3.2.45",Mk="http://www.w3.org/2000/svg",vs=typeof document<"u"?document:null,SE=vs&&vs.createElement("template"),$k={insert:(t,e,n)=>{e.insertBefore(t,n||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,n,i)=>{const r=e?vs.createElementNS(Mk,t):vs.createElement(t,n?{is:n}:void 0);return t==="select"&&i&&i.multiple!=null&&r.setAttribute("multiple",i.multiple),r},createText:t=>vs.createTextNode(t),createComment:t=>vs.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>vs.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,n,i,r,o){const l=n?n.previousSibling:e.lastChild;if(r&&(r===o||r.nextSibling))for(;e.insertBefore(r.cloneNode(!0),n),!(r===o||!(r=r.nextSibling)););else{SE.innerHTML=i?`<svg>${t}</svg>`:t;const u=SE.content;if(i){const h=u.firstChild;for(;h.firstChild;)u.appendChild(h.firstChild);u.removeChild(h)}e.insertBefore(u,n)}return[l?l.nextSibling:e.firstChild,n?n.previousSibling:e.lastChild]}};function Fk(t,e,n){const i=t._vtc;i&&(e=(e?[e,...i]:[...i]).join(" ")),e==null?t.removeAttribute("class"):n?t.setAttribute("class",e):t.className=e}function Uk(t,e,n){const i=t.style,r=At(n);if(n&&!r){for(const o in n)$p(i,o,n[o]);if(e&&!At(e))for(const o in e)n[o]==null&&$p(i,o,"")}else{const o=i.display;r?e!==n&&(i.cssText=n):e&&t.removeAttribute("style"),"_vod"in t&&(i.display=o)}}const OE=/\s*!important$/;function $p(t,e,n){if(fe(n))n.forEach(i=>$p(t,e,i));else if(n==null&&(n=""),e.startsWith("--"))t.setProperty(e,n);else{const i=Bk(t,e);OE.test(n)?t.setProperty(Qo(i),n.replace(OE,""),"important"):t[i]=n}}const NE=["Webkit","Moz","ms"],Md={};function Bk(t,e){const n=Md[e];if(n)return n;let i=Di(e);if(i!=="filter"&&i in t)return Md[e]=i;i=vh(i);for(let r=0;r<NE.length;r++){const o=NE[r]+i;if(o in t)return Md[e]=o}return e}const RE="http://www.w3.org/1999/xlink";function Wk(t,e,n,i,r){if(i&&e.startsWith("xlink:"))n==null?t.removeAttributeNS(RE,e.slice(6,e.length)):t.setAttributeNS(RE,e,n);else{const o=$L(e);n==null||o&&!jw(n)?t.removeAttribute(e):t.setAttribute(e,o?"":n)}}function Hk(t,e,n,i,r,o,l){if(e==="innerHTML"||e==="textContent"){i&&l(i,r,o),t[e]=n??"";return}if(e==="value"&&t.tagName!=="PROGRESS"&&!t.tagName.includes("-")){t._value=n;const h=n??"";(t.value!==h||t.tagName==="OPTION")&&(t.value=h),n==null&&t.removeAttribute(e);return}let u=!1;if(n===""||n==null){const h=typeof t[e];h==="boolean"?n=jw(n):n==null&&h==="string"?(n="",u=!0):h==="number"&&(n=0,u=!0)}try{t[e]=n}catch{}u&&t.removeAttribute(e)}function ys(t,e,n,i){t.addEventListener(e,n,i)}function Vk(t,e,n,i){t.removeEventListener(e,n,i)}function jk(t,e,n,i,r=null){const o=t._vei||(t._vei={}),l=o[e];if(i&&l)l.value=i;else{const[u,h]=qk(e);if(i){const d=o[e]=zk(i,r);ys(t,u,d,h)}else l&&(Vk(t,u,l,h),o[e]=void 0)}}const xE=/(?:Once|Passive|Capture)$/;function qk(t){let e;if(xE.test(t)){e={};let i;for(;i=t.match(xE);)t=t.slice(0,t.length-i[0].length),e[i[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):Qo(t.slice(2)),e]}let $d=0;const Kk=Promise.resolve(),Gk=()=>$d||(Kk.then(()=>$d=0),$d=Date.now());function zk(t,e){const n=i=>{if(!i._vts)i._vts=Date.now();else if(i._vts<=n.attached)return;qn(Yk(i,n.value),e,5,[i])};return n.value=t,n.attached=Gk(),n}function Yk(t,e){if(fe(e)){const n=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{n.call(t),t._stopped=!0},e.map(i=>r=>!r._stopped&&i&&i(r))}else return e}const DE=/^on[a-z]/,Xk=(t,e,n,i,r=!1,o,l,u,h)=>{e==="class"?Fk(t,i,r):e==="style"?Uk(t,n,i):gh(e)?xg(e)||jk(t,e,n,i,l):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):Qk(t,e,i,r))?Hk(t,e,i,o,l,u,h):(e==="true-value"?t._trueValue=i:e==="false-value"&&(t._falseValue=i),Wk(t,e,i,r))};function Qk(t,e,n,i){return i?!!(e==="innerHTML"||e==="textContent"||e in t&&DE.test(e)&&Ie(n)):e==="spellcheck"||e==="draggable"||e==="translate"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA"||DE.test(e)&&At(n)?!1:e in t}const Jk={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String};WP.props;const xu=t=>{const e=t.props["onUpdate:modelValue"]||!1;return fe(e)?n=>_u(e,n):e};function Zk(t){t.target.composing=!0}function LE(t){const e=t.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const eM={created(t,{modifiers:{lazy:e,trim:n,number:i}},r){t._assign=xu(r);const o=i||r.props&&r.props.type==="number";ys(t,e?"change":"input",l=>{if(l.target.composing)return;let u=t.value;n&&(u=u.trim()),o&&(u=Au(u)),t._assign(u)}),n&&ys(t,"change",()=>{t.value=t.value.trim()}),e||(ys(t,"compositionstart",Zk),ys(t,"compositionend",LE),ys(t,"change",LE))},mounted(t,{value:e}){t.value=e??""},beforeUpdate(t,{value:e,modifiers:{lazy:n,trim:i,number:r}},o){if(t._assign=xu(o),t.composing||document.activeElement===t&&t.type!=="range"&&(n||i&&t.value.trim()===e||(r||t.type==="number")&&Au(t.value)===e))return;const l=e??"";t.value!==l&&(t.value=l)}},tM={deep:!0,created(t,e,n){t._assign=xu(n),ys(t,"change",()=>{const i=t._modelValue,r=nM(t),o=t.checked,l=t._assign;if(fe(i)){const u=qw(i,r),h=u!==-1;if(o&&!h)l(i.concat(r));else if(!o&&h){const d=[...i];d.splice(u,1),l(d)}}else if(_h(i)){const u=new Set(i);o?u.add(r):u.delete(r),l(u)}else l($T(t,o))})},mounted:PE,beforeUpdate(t,e,n){t._assign=xu(n),PE(t,e,n)}};function PE(t,{value:e,oldValue:n},i){t._modelValue=e,fe(e)?t.checked=qw(e,i.props.value)>-1:_h(e)?t.checked=e.has(i.props.value):e!==n&&(t.checked=ph(e,$T(t,!0)))}function nM(t){return"_value"in t?t._value:t.value}function $T(t,e){const n=e?"_trueValue":"_falseValue";return n in t?t[n]:e}const iM=Zt({patchProp:Xk},$k);let kE;function rM(){return kE||(kE=pk(iM))}const sM=(...t)=>{const e=rM().createApp(...t),{mount:n}=e;return e.mount=i=>{const r=oM(i);if(!r)return;const o=e._component;!Ie(o)&&!o.render&&!o.template&&(o.template=r.innerHTML),r.innerHTML="";const l=n(r,!1,r instanceof SVGElement);return r instanceof Element&&(r.removeAttribute("v-cloak"),r.setAttribute("data-v-app","")),l},e};function oM(t){return At(t)?document.querySelector(t):t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FT={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K=function(t,e){if(!t)throw ea(e)},ea=function(t){return new Error("Firebase Database ("+FT.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UT=function(t){const e=[];let n=0;for(let i=0;i<t.length;i++){let r=t.charCodeAt(i);r<128?e[n++]=r:r<2048?(e[n++]=r>>6|192,e[n++]=r&63|128):(r&64512)===55296&&i+1<t.length&&(t.charCodeAt(i+1)&64512)===56320?(r=65536+((r&1023)<<10)+(t.charCodeAt(++i)&1023),e[n++]=r>>18|240,e[n++]=r>>12&63|128,e[n++]=r>>6&63|128,e[n++]=r&63|128):(e[n++]=r>>12|224,e[n++]=r>>6&63|128,e[n++]=r&63|128)}return e},aM=function(t){const e=[];let n=0,i=0;for(;n<t.length;){const r=t[n++];if(r<128)e[i++]=String.fromCharCode(r);else if(r>191&&r<224){const o=t[n++];e[i++]=String.fromCharCode((r&31)<<6|o&63)}else if(r>239&&r<365){const o=t[n++],l=t[n++],u=t[n++],h=((r&7)<<18|(o&63)<<12|(l&63)<<6|u&63)-65536;e[i++]=String.fromCharCode(55296+(h>>10)),e[i++]=String.fromCharCode(56320+(h&1023))}else{const o=t[n++],l=t[n++];e[i++]=String.fromCharCode((r&15)<<12|(o&63)<<6|l&63)}}return e.join("")},Nh={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let r=0;r<t.length;r+=3){const o=t[r],l=r+1<t.length,u=l?t[r+1]:0,h=r+2<t.length,d=h?t[r+2]:0,p=o>>2,_=(o&3)<<4|u>>4;let y=(u&15)<<2|d>>6,b=d&63;h||(b=64,l||(y=64)),i.push(n[p],n[_],n[y],n[b])}return i.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(UT(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):aM(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let r=0;r<t.length;){const o=n[t.charAt(r++)],u=r<t.length?n[t.charAt(r)]:0;++r;const d=r<t.length?n[t.charAt(r)]:64;++r;const _=r<t.length?n[t.charAt(r)]:64;if(++r,o==null||u==null||d==null||_==null)throw Error();const y=o<<2|u>>4;if(i.push(y),d!==64){const b=u<<4&240|d>>2;if(i.push(b),_!==64){const S=d<<6&192|_;i.push(S)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},BT=function(t){const e=UT(t);return Nh.encodeByteArray(e,!0)},Du=function(t){return BT(t).replace(/\./g,"")},Lu=function(t){try{return Nh.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lM(t){return WT(void 0,t)}function WT(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(const n in e)!e.hasOwnProperty(n)||!cM(n)||(t[n]=WT(t[n],e[n]));return t}function cM(t){return t!=="__proto__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pi(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Xg(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Pi())}function uM(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function HT(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function VT(){return FT.NODE_ADMIN===!0}function jT(){try{return typeof indexedDB=="object"}catch{return!1}}function hM(){return new Promise((t,e)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(i);r.onsuccess=()=>{r.result.close(),n||self.indexedDB.deleteDatabase(i),t(!0)},r.onupgradeneeded=()=>{n=!1},r.onerror=()=>{var o;e(((o=r.error)===null||o===void 0?void 0:o.message)||"")}}catch(n){e(n)}})}function fM(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dM=()=>fM().__FIREBASE_DEFAULTS__,pM=()=>{if(typeof process>"u"||typeof process.env>"u")return;const t={}.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},gM=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&Lu(t[1]);return e&&JSON.parse(e)},Qg=()=>{try{return dM()||pM()||gM()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},_M=t=>{var e,n;return(n=(e=Qg())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},mM=t=>{const e=_M(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),i]:[e.substring(0,n),i]},vM=()=>{var t;return(t=Qg())===null||t===void 0?void 0:t.config},yM=t=>{var e;return(e=Qg())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ks{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,i)=>{n?this.reject(n):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,i))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EM(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},i=e||"demo-project",r=t.iat||0,o=t.sub||t.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const l=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:r,exp:r+3600,auth_time:r,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},t),u="";return[Du(JSON.stringify(n)),Du(JSON.stringify(l)),u].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bM="FirebaseError";class pr extends Error{constructor(e,n,i){super(n),this.code=e,this.customData=i,this.name=bM,Object.setPrototypeOf(this,pr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ta.prototype.create)}}class ta{constructor(e,n,i){this.service=e,this.serviceName=n,this.errors=i}create(e,...n){const i=n[0]||{},r=`${this.service}/${e}`,o=this.errors[e],l=o?wM(o,i):"Error",u=`${this.serviceName}: ${l} (${r}).`;return new pr(r,u,i)}}function wM(t,e){return t.replace(TM,(n,i)=>{const r=e[i];return r!=null?String(r):`<${i}?>`})}const TM=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fl(t){return JSON.parse(t)}function Tt(t){return JSON.stringify(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qT=function(t){let e={},n={},i={},r="";try{const o=t.split(".");e=fl(Lu(o[0])||""),n=fl(Lu(o[1])||""),r=o[2],i=n.d||{},delete n.d}catch{}return{header:e,claims:n,data:i,signature:r}},CM=function(t){const e=qT(t),n=e.claims;return!!n&&typeof n=="object"&&n.hasOwnProperty("iat")},IM=function(t){const e=qT(t).claims;return typeof e=="object"&&e.admin===!0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fi(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function Fo(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]}function ME(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Pu(t,e,n){const i={};for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&(i[r]=e.call(n,t[r],r,t));return i}function Fp(t,e){if(t===e)return!0;const n=Object.keys(t),i=Object.keys(e);for(const r of n){if(!i.includes(r))return!1;const o=t[r],l=e[r];if($E(o)&&$E(l)){if(!Fp(o,l))return!1}else if(o!==l)return!1}for(const r of i)if(!n.includes(r))return!1;return!0}function $E(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jg(t){const e=[];for(const[n,i]of Object.entries(t))Array.isArray(i)?i.forEach(r=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(r))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AM{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,n){n||(n=0);const i=this.W_;if(typeof e=="string")for(let _=0;_<16;_++)i[_]=e.charCodeAt(n)<<24|e.charCodeAt(n+1)<<16|e.charCodeAt(n+2)<<8|e.charCodeAt(n+3),n+=4;else for(let _=0;_<16;_++)i[_]=e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3],n+=4;for(let _=16;_<80;_++){const y=i[_-3]^i[_-8]^i[_-14]^i[_-16];i[_]=(y<<1|y>>>31)&4294967295}let r=this.chain_[0],o=this.chain_[1],l=this.chain_[2],u=this.chain_[3],h=this.chain_[4],d,p;for(let _=0;_<80;_++){_<40?_<20?(d=u^o&(l^u),p=1518500249):(d=o^l^u,p=1859775393):_<60?(d=o&l|u&(o|l),p=2400959708):(d=o^l^u,p=3395469782);const y=(r<<5|r>>>27)+d+h+p+i[_]&4294967295;h=u,u=l,l=(o<<30|o>>>2)&4294967295,o=r,r=y}this.chain_[0]=this.chain_[0]+r&4294967295,this.chain_[1]=this.chain_[1]+o&4294967295,this.chain_[2]=this.chain_[2]+l&4294967295,this.chain_[3]=this.chain_[3]+u&4294967295,this.chain_[4]=this.chain_[4]+h&4294967295}update(e,n){if(e==null)return;n===void 0&&(n=e.length);const i=n-this.blockSize;let r=0;const o=this.buf_;let l=this.inbuf_;for(;r<n;){if(l===0)for(;r<=i;)this.compress_(e,r),r+=this.blockSize;if(typeof e=="string"){for(;r<n;)if(o[l]=e.charCodeAt(r),++l,++r,l===this.blockSize){this.compress_(o),l=0;break}}else for(;r<n;)if(o[l]=e[r],++l,++r,l===this.blockSize){this.compress_(o),l=0;break}}this.inbuf_=l,this.total_+=n}digest(){const e=[];let n=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let r=this.blockSize-1;r>=56;r--)this.buf_[r]=n&255,n/=256;this.compress_(this.buf_);let i=0;for(let r=0;r<5;r++)for(let o=24;o>=0;o-=8)e[i]=this.chain_[r]>>o&255,++i;return e}}function SM(t,e){const n=new OM(t,e);return n.subscribe.bind(n)}class OM{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,i){let r;if(e===void 0&&n===void 0&&i===void 0)throw new Error("Missing Observer.");NM(e,["next","error","complete"])?r=e:r={next:e,error:n,complete:i},r.next===void 0&&(r.next=Fd),r.error===void 0&&(r.error=Fd),r.complete===void 0&&(r.complete=Fd);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function NM(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Fd(){}function Rh(t,e){return`${t} failed: ${e} argument `}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RM=function(t){const e=[];let n=0;for(let i=0;i<t.length;i++){let r=t.charCodeAt(i);if(r>=55296&&r<=56319){const o=r-55296;i++,K(i<t.length,"Surrogate pair missing trail surrogate.");const l=t.charCodeAt(i)-56320;r=65536+(o<<10)+l}r<128?e[n++]=r:r<2048?(e[n++]=r>>6|192,e[n++]=r&63|128):r<65536?(e[n++]=r>>12|224,e[n++]=r>>6&63|128,e[n++]=r&63|128):(e[n++]=r>>18|240,e[n++]=r>>12&63|128,e[n++]=r>>6&63|128,e[n++]=r&63|128)}return e},xh=function(t){let e=0;for(let n=0;n<t.length;n++){const i=t.charCodeAt(n);i<128?e++:i<2048?e+=2:i>=55296&&i<=56319?(e+=4,n++):e+=3}return e};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ui(t){return t&&t._delegate?t._delegate:t}class fi{constructor(e,n,i){this.name=e,this.instanceFactory=n,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ps="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xM{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const i=new ks;if(this.instancesDeferred.set(n,i),this.isInitialized(n)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:n});r&&i.resolve(r)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const i=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(o){if(r)return null;throw o}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(LM(e))try{this.getOrInitializeService({instanceIdentifier:ps})}catch{}for(const[n,i]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(n);try{const o=this.getOrInitializeService({instanceIdentifier:r});i.resolve(o)}catch{}}}}clearInstance(e=ps){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ps){return this.instances.has(e)}getOptions(e=ps){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:i,options:n});for(const[o,l]of this.instancesDeferred.entries()){const u=this.normalizeInstanceIdentifier(o);i===u&&l.resolve(r)}return r}onInit(e,n){var i;const r=this.normalizeInstanceIdentifier(n),o=(i=this.onInitCallbacks.get(r))!==null&&i!==void 0?i:new Set;o.add(e),this.onInitCallbacks.set(r,o);const l=this.instances.get(r);return l&&e(l,r),()=>{o.delete(e)}}invokeOnInitCallbacks(e,n){const i=this.onInitCallbacks.get(n);if(i)for(const r of i)try{r(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:DM(e),options:n}),this.instances.set(e,i),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=ps){return this.component?this.component.multipleInstances?e:ps:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function DM(t){return t===ps?void 0:t}function LM(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PM{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new xM(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ke;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Ke||(Ke={}));const kM={debug:Ke.DEBUG,verbose:Ke.VERBOSE,info:Ke.INFO,warn:Ke.WARN,error:Ke.ERROR,silent:Ke.SILENT},MM=Ke.INFO,$M={[Ke.DEBUG]:"log",[Ke.VERBOSE]:"log",[Ke.INFO]:"info",[Ke.WARN]:"warn",[Ke.ERROR]:"error"},FM=(t,e,...n)=>{if(e<t.logLevel)return;const i=new Date().toISOString(),r=$M[e];if(r)console[r](`[${i}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Ll{constructor(e){this.name=e,this._logLevel=MM,this._logHandler=FM,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ke))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?kM[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ke.DEBUG,...e),this._logHandler(this,Ke.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ke.VERBOSE,...e),this._logHandler(this,Ke.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ke.INFO,...e),this._logHandler(this,Ke.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ke.WARN,...e),this._logHandler(this,Ke.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ke.ERROR,...e),this._logHandler(this,Ke.ERROR,...e)}}const UM=(t,e)=>e.some(n=>t instanceof n);let FE,UE;function BM(){return FE||(FE=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function WM(){return UE||(UE=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const KT=new WeakMap,Up=new WeakMap,GT=new WeakMap,Ud=new WeakMap,Zg=new WeakMap;function HM(t){const e=new Promise((n,i)=>{const r=()=>{t.removeEventListener("success",o),t.removeEventListener("error",l)},o=()=>{n(kr(t.result)),r()},l=()=>{i(t.error),r()};t.addEventListener("success",o),t.addEventListener("error",l)});return e.then(n=>{n instanceof IDBCursor&&KT.set(n,t)}).catch(()=>{}),Zg.set(e,t),e}function VM(t){if(Up.has(t))return;const e=new Promise((n,i)=>{const r=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",l),t.removeEventListener("abort",l)},o=()=>{n(),r()},l=()=>{i(t.error||new DOMException("AbortError","AbortError")),r()};t.addEventListener("complete",o),t.addEventListener("error",l),t.addEventListener("abort",l)});Up.set(t,e)}let Bp={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Up.get(t);if(e==="objectStoreNames")return t.objectStoreNames||GT.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return kr(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function jM(t){Bp=t(Bp)}function qM(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const i=t.call(Bd(this),e,...n);return GT.set(i,e.sort?e.sort():[e]),kr(i)}:WM().includes(t)?function(...e){return t.apply(Bd(this),e),kr(KT.get(this))}:function(...e){return kr(t.apply(Bd(this),e))}}function KM(t){return typeof t=="function"?qM(t):(t instanceof IDBTransaction&&VM(t),UM(t,BM())?new Proxy(t,Bp):t)}function kr(t){if(t instanceof IDBRequest)return HM(t);if(Ud.has(t))return Ud.get(t);const e=KM(t);return e!==t&&(Ud.set(t,e),Zg.set(e,t)),e}const Bd=t=>Zg.get(t);function GM(t,e,{blocked:n,upgrade:i,blocking:r,terminated:o}={}){const l=indexedDB.open(t,e),u=kr(l);return i&&l.addEventListener("upgradeneeded",h=>{i(kr(l.result),h.oldVersion,h.newVersion,kr(l.transaction))}),n&&l.addEventListener("blocked",()=>n()),u.then(h=>{o&&h.addEventListener("close",()=>o()),r&&h.addEventListener("versionchange",()=>r())}).catch(()=>{}),u}const zM=["get","getKey","getAll","getAllKeys","count"],YM=["put","add","delete","clear"],Wd=new Map;function BE(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Wd.get(e))return Wd.get(e);const n=e.replace(/FromIndex$/,""),i=e!==n,r=YM.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!(r||zM.includes(n)))return;const o=async function(l,...u){const h=this.transaction(l,r?"readwrite":"readonly");let d=h.store;return i&&(d=d.index(u.shift())),(await Promise.all([d[n](...u),r&&h.done]))[0]};return Wd.set(e,o),o}jM(t=>({...t,get:(e,n,i)=>BE(e,n)||t.get(e,n,i),has:(e,n)=>!!BE(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XM{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(QM(n)){const i=n.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(n=>n).join(" ")}}function QM(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Wp="@firebase/app",WE="0.9.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ms=new Ll("@firebase/app"),JM="@firebase/app-compat",ZM="@firebase/analytics-compat",e$="@firebase/analytics",t$="@firebase/app-check-compat",n$="@firebase/app-check",i$="@firebase/auth",r$="@firebase/auth-compat",s$="@firebase/database",o$="@firebase/database-compat",a$="@firebase/functions",l$="@firebase/functions-compat",c$="@firebase/installations",u$="@firebase/installations-compat",h$="@firebase/messaging",f$="@firebase/messaging-compat",d$="@firebase/performance",p$="@firebase/performance-compat",g$="@firebase/remote-config",_$="@firebase/remote-config-compat",m$="@firebase/storage",v$="@firebase/storage-compat",y$="@firebase/firestore",E$="@firebase/firestore-compat",b$="firebase",w$="9.15.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hp="[DEFAULT]",T$={[Wp]:"fire-core",[JM]:"fire-core-compat",[e$]:"fire-analytics",[ZM]:"fire-analytics-compat",[n$]:"fire-app-check",[t$]:"fire-app-check-compat",[i$]:"fire-auth",[r$]:"fire-auth-compat",[s$]:"fire-rtdb",[o$]:"fire-rtdb-compat",[a$]:"fire-fn",[l$]:"fire-fn-compat",[c$]:"fire-iid",[u$]:"fire-iid-compat",[h$]:"fire-fcm",[f$]:"fire-fcm-compat",[d$]:"fire-perf",[p$]:"fire-perf-compat",[g$]:"fire-rc",[_$]:"fire-rc-compat",[m$]:"fire-gcs",[v$]:"fire-gcs-compat",[y$]:"fire-fst",[E$]:"fire-fst-compat","fire-js":"fire-js",[b$]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ku=new Map,Vp=new Map;function C$(t,e){try{t.container.addComponent(e)}catch(n){Ms.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function ki(t){const e=t.name;if(Vp.has(e))return Ms.debug(`There were multiple attempts to register component ${e}.`),!1;Vp.set(e,t);for(const n of ku.values())C$(n,t);return!0}function I$(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A$={["no-app"]:"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",["bad-app-name"]:"Illegal App name: '{$appName}",["duplicate-app"]:"Firebase App named '{$appName}' already exists with different options or config",["app-deleted"]:"Firebase App named '{$appName}' already deleted",["no-options"]:"Need to provide options, when not being deployed to hosting via source.",["invalid-app-argument"]:"firebase.{$appName}() takes either no argument or a Firebase App instance.",["invalid-log-argument"]:"First argument to `onLog` must be null or a function.",["idb-open"]:"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.",["idb-get"]:"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.",["idb-set"]:"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.",["idb-delete"]:"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."},Mr=new ta("app","Firebase",A$);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S${constructor(e,n,i){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new fi("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Mr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pl=w$;function e_(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const i=Object.assign({name:Hp,automaticDataCollectionEnabled:!1},e),r=i.name;if(typeof r!="string"||!r)throw Mr.create("bad-app-name",{appName:String(r)});if(n||(n=vM()),!n)throw Mr.create("no-options");const o=ku.get(r);if(o){if(Fp(n,o.options)&&Fp(i,o.config))return o;throw Mr.create("duplicate-app",{appName:r})}const l=new PM(r);for(const h of Vp.values())l.addComponent(h);const u=new S$(n,i,l);return ku.set(r,u),u}function O$(t=Hp){const e=ku.get(t);if(!e&&t===Hp)return e_();if(!e)throw Mr.create("no-app",{appName:t});return e}function Nn(t,e,n){var i;let r=(i=T$[t])!==null&&i!==void 0?i:t;n&&(r+=`-${n}`);const o=r.match(/\s|\//),l=e.match(/\s|\//);if(o||l){const u=[`Unable to register library "${r}" with version "${e}":`];o&&u.push(`library name "${r}" contains illegal characters (whitespace or "/")`),o&&l&&u.push("and"),l&&u.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ms.warn(u.join(" "));return}ki(new fi(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N$="firebase-heartbeat-database",R$=1,dl="firebase-heartbeat-store";let Hd=null;function zT(){return Hd||(Hd=GM(N$,R$,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(dl)}}}).catch(t=>{throw Mr.create("idb-open",{originalErrorMessage:t.message})})),Hd}async function x$(t){try{return(await zT()).transaction(dl).objectStore(dl).get(YT(t))}catch(e){if(e instanceof pr)Ms.warn(e.message);else{const n=Mr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Ms.warn(n.message)}}}async function HE(t,e){try{const i=(await zT()).transaction(dl,"readwrite");return await i.objectStore(dl).put(e,YT(t)),i.done}catch(n){if(n instanceof pr)Ms.warn(n.message);else{const i=Mr.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Ms.warn(i.message)}}}function YT(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D$=1024,L$=30*24*60*60*1e3;class P${constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new M$(n),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=VE();if(this._heartbeatsCache===null&&(this._heartbeatsCache=await this._heartbeatsCachePromise),!(this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(r=>r.date===i)))return this._heartbeatsCache.heartbeats.push({date:i,agent:n}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(r=>{const o=new Date(r.date).valueOf();return Date.now()-o<=L$}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache===null||this._heartbeatsCache.heartbeats.length===0)return"";const e=VE(),{heartbeatsToSend:n,unsentEntries:i}=k$(this._heartbeatsCache.heartbeats),r=Du(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),r}}function VE(){return new Date().toISOString().substring(0,10)}function k$(t,e=D$){const n=[];let i=t.slice();for(const r of t){const o=n.find(l=>l.agent===r.agent);if(o){if(o.dates.push(r.date),jE(n)>e){o.dates.pop();break}}else if(n.push({agent:r.agent,dates:[r.date]}),jE(n)>e){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}class M${constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return jT()?hM().then(()=>!0).catch(()=>!1):!1}async read(){return await this._canUseIndexedDBPromise?await x$(this.app)||{heartbeats:[]}:{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const r=await this.read();return HE(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const r=await this.read();return HE(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function jE(t){return Du(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $$(t){ki(new fi("platform-logger",e=>new XM(e),"PRIVATE")),ki(new fi("heartbeat",e=>new P$(e),"PRIVATE")),Nn(Wp,WE,t),Nn(Wp,WE,"esm2017"),Nn("fire-js","")}$$("");function XT(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(t);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(n[i[r]]=t[i[r]]);return n}function QT(){return{["dependent-sdk-initialized-before-auth"]:"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const F$=QT,JT=new ta("auth","Firebase",QT());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qE=new Ll("@firebase/auth");function yu(t,...e){qE.logLevel<=Ke.ERROR&&qE.error(`Auth (${Pl}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KE(t,...e){throw t_(t,...e)}function ZT(t,...e){return t_(t,...e)}function U$(t,e,n){const i=Object.assign(Object.assign({},F$()),{[e]:n});return new ta("auth","Firebase",i).create(e,{appName:t.name})}function t_(t,...e){if(typeof t!="string"){const n=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=t.name),t._errorFactory.create(n,...i)}return JT.create(t,...e)}function je(t,e,...n){if(!t)throw t_(e,...n)}function Ya(t){const e="INTERNAL ASSERTION FAILED: "+t;throw yu(e),new Error(e)}function Mu(t,e){t||Ya(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GE=new Map;function bs(t){Mu(t instanceof Function,"Expected a class definition");let e=GE.get(t);return e?(Mu(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,GE.set(t,e),e)}function B$(t,e){const n=(e==null?void 0:e.persistence)||[],i=(Array.isArray(n)?n:[n]).map(bs);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(i,e==null?void 0:e.popupRedirectResolver)}function W$(){return zE()==="http:"||zE()==="https:"}function zE(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H$(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(W$()||uM()||"connection"in navigator)?navigator.onLine:!0}function V$(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kl{constructor(e,n){this.shortDelay=e,this.longDelay=n,Mu(n>e,"Short delay should be less than long delay!"),this.isMobile=Xg()||HT()}get(){return H$()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function j$(t,e){Mu(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e0{static initialize(e,n,i){this.fetchImpl=e,n&&(this.headersImpl=n),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;Ya("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;Ya("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;Ya("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q$={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K$=new kl(3e4,6e4);async function t0(t,e,n,i,r={}){return n0(t,r,async()=>{let o={},l={};i&&(e==="GET"?l=i:o={body:JSON.stringify(i)});const u=Jg(Object.assign({key:t.config.apiKey},l)).slice(1),h=await t._getAdditionalHeaders();return h["Content-Type"]="application/json",t.languageCode&&(h["X-Firebase-Locale"]=t.languageCode),e0.fetch()(i0(t,t.config.apiHost,n,u),Object.assign({method:e,headers:h,referrerPolicy:"no-referrer"},o))})}async function n0(t,e,n){t._canInitEmulator=!1;const i=Object.assign(Object.assign({},q$),e);try{const r=new G$(t),o=await Promise.race([n(),r.promise]);r.clearNetworkTimeout();const l=await o.json();if("needConfirmation"in l)throw Jc(t,"account-exists-with-different-credential",l);if(o.ok&&!("errorMessage"in l))return l;{const u=o.ok?l.errorMessage:l.error.message,[h,d]=u.split(" : ");if(h==="FEDERATED_USER_ID_ALREADY_LINKED")throw Jc(t,"credential-already-in-use",l);if(h==="EMAIL_EXISTS")throw Jc(t,"email-already-in-use",l);if(h==="USER_DISABLED")throw Jc(t,"user-disabled",l);const p=i[h]||h.toLowerCase().replace(/[_\s]+/g,"-");if(d)throw U$(t,p,d);KE(t,p)}}catch(r){if(r instanceof pr)throw r;KE(t,"network-request-failed")}}function i0(t,e,n,i){const r=`${e}${n}?${i}`;return t.config.emulator?j$(t.config,r):`${t.config.apiScheme}://${r}`}class G${constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,i)=>{this.timer=setTimeout(()=>i(ZT(this.auth,"network-request-failed")),K$.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Jc(t,e,n){const i={appName:t.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);const r=ZT(t,e,i);return r.customData._tokenResponse=n,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function z$(t,e){return t0(t,"POST","/v1/accounts:delete",e)}async function Y$(t,e){return t0(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xa(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function X$(t,e=!1){const n=Ui(t),i=await n.getIdToken(e),r=r0(i);je(r&&r.exp&&r.auth_time&&r.iat,n.auth,"internal-error");const o=typeof r.firebase=="object"?r.firebase:void 0,l=o==null?void 0:o.sign_in_provider;return{claims:r,token:i,authTime:Xa(Vd(r.auth_time)),issuedAtTime:Xa(Vd(r.iat)),expirationTime:Xa(Vd(r.exp)),signInProvider:l||null,signInSecondFactor:(o==null?void 0:o.sign_in_second_factor)||null}}function Vd(t){return Number(t)*1e3}function r0(t){const[e,n,i]=t.split(".");if(e===void 0||n===void 0||i===void 0)return yu("JWT malformed, contained fewer than 3 sections"),null;try{const r=Lu(n);return r?JSON.parse(r):(yu("Failed to decode base64 JWT payload"),null)}catch(r){return yu("Caught error parsing JWT payload as JSON",r==null?void 0:r.toString()),null}}function Q$(t){const e=r0(t);return je(e,"internal-error"),je(typeof e.exp<"u","internal-error"),je(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jp(t,e,n=!1){if(n)return e;try{return await e}catch(i){throw i instanceof pr&&J$(i)&&t.auth.currentUser===t&&await t.auth.signOut(),i}}function J$({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z${constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;const r=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s0{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Xa(this.lastLoginAt),this.creationTime=Xa(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $u(t){var e;const n=t.auth,i=await t.getIdToken(),r=await jp(t,Y$(n,{idToken:i}));je(r==null?void 0:r.users.length,n,"internal-error");const o=r.users[0];t._notifyReloadListener(o);const l=!((e=o.providerUserInfo)===null||e===void 0)&&e.length?nF(o.providerUserInfo):[],u=tF(t.providerData,l),h=t.isAnonymous,d=!(t.email&&o.passwordHash)&&!(u!=null&&u.length),p=h?d:!1,_={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:u,metadata:new s0(o.createdAt,o.lastLoginAt),isAnonymous:p};Object.assign(t,_)}async function eF(t){const e=Ui(t);await $u(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function tF(t,e){return[...t.filter(i=>!e.some(r=>r.providerId===i.providerId)),...e]}function nF(t){return t.map(e=>{var{providerId:n}=e,i=XT(e,["providerId"]);return{providerId:n,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function iF(t,e){const n=await n0(t,{},async()=>{const i=Jg({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:r,apiKey:o}=t.config,l=i0(t,r,"/v1/token",`key=${o}`),u=await t._getAdditionalHeaders();return u["Content-Type"]="application/x-www-form-urlencoded",e0.fetch()(l,{method:"POST",headers:u,body:i})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pl{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){je(e.idToken,"internal-error"),je(typeof e.idToken<"u","internal-error"),je(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Q$(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}async getToken(e,n=!1){return je(!this.accessToken||this.refreshToken,e,"user-token-expired"),!n&&this.accessToken&&!this.isExpired?this.accessToken:this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:i,refreshToken:r,expiresIn:o}=await iF(e,n);this.updateTokensAndExpiration(i,r,Number(o))}updateTokensAndExpiration(e,n,i){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,n){const{refreshToken:i,accessToken:r,expirationTime:o}=n,l=new pl;return i&&(je(typeof i=="string","internal-error",{appName:e}),l.refreshToken=i),r&&(je(typeof r=="string","internal-error",{appName:e}),l.accessToken=r),o&&(je(typeof o=="number","internal-error",{appName:e}),l.expirationTime=o),l}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new pl,this.toJSON())}_performRefresh(){return Ya("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ar(t,e){je(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Ro{constructor(e){var{uid:n,auth:i,stsTokenManager:r}=e,o=XT(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Z$(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=i,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new s0(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const n=await jp(this,this.stsTokenManager.getToken(this.auth,e));return je(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return X$(this,e)}reload(){return eF(this)}_assign(e){this!==e&&(je(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){return new Ro(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(e){je(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),n&&await $u(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){const e=await this.getIdToken();return await jp(this,z$(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var i,r,o,l,u,h,d,p;const _=(i=n.displayName)!==null&&i!==void 0?i:void 0,y=(r=n.email)!==null&&r!==void 0?r:void 0,b=(o=n.phoneNumber)!==null&&o!==void 0?o:void 0,S=(l=n.photoURL)!==null&&l!==void 0?l:void 0,N=(u=n.tenantId)!==null&&u!==void 0?u:void 0,k=(h=n._redirectEventId)!==null&&h!==void 0?h:void 0,G=(d=n.createdAt)!==null&&d!==void 0?d:void 0,oe=(p=n.lastLoginAt)!==null&&p!==void 0?p:void 0,{uid:H,emailVerified:V,isAnonymous:Q,providerData:B,stsTokenManager:Z}=n;je(H&&Z,e,"internal-error");const X=pl.fromJSON(this.name,Z);je(typeof H=="string",e,"internal-error"),Ar(_,e.name),Ar(y,e.name),je(typeof V=="boolean",e,"internal-error"),je(typeof Q=="boolean",e,"internal-error"),Ar(b,e.name),Ar(S,e.name),Ar(N,e.name),Ar(k,e.name),Ar(G,e.name),Ar(oe,e.name);const de=new Ro({uid:H,auth:e,email:y,emailVerified:V,displayName:_,isAnonymous:Q,photoURL:S,phoneNumber:b,tenantId:N,stsTokenManager:X,createdAt:G,lastLoginAt:oe});return B&&Array.isArray(B)&&(de.providerData=B.map(pe=>Object.assign({},pe))),k&&(de._redirectEventId=k),de}static async _fromIdTokenResponse(e,n,i=!1){const r=new pl;r.updateFromServerResponse(n);const o=new Ro({uid:n.localId,auth:e,stsTokenManager:r,isAnonymous:i});return await $u(o),o}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o0{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}o0.type="NONE";const YE=o0;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jd(t,e,n){return`firebase:${t}:${e}:${n}`}class xo{constructor(e,n,i){this.persistence=e,this.auth=n,this.userKey=i;const{config:r,name:o}=this.auth;this.fullUserKey=jd(this.userKey,r.apiKey,o),this.fullPersistenceKey=jd("persistence",r.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Ro._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,i="authUser"){if(!n.length)return new xo(bs(YE),e,i);const r=(await Promise.all(n.map(async d=>{if(await d._isAvailable())return d}))).filter(d=>d);let o=r[0]||bs(YE);const l=jd(i,e.config.apiKey,e.name);let u=null;for(const d of n)try{const p=await d._get(l);if(p){const _=Ro._fromJSON(e,p);d!==o&&(u=_),o=d;break}}catch{}const h=r.filter(d=>d._shouldAllowMigration);return!o._shouldAllowMigration||!h.length?new xo(o,e,i):(o=h[0],u&&await o._set(l,u.toJSON()),await Promise.all(n.map(async d=>{if(d!==o)try{await d._remove(l)}catch{}})),new xo(o,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XE(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(aF(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(rF(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(cF(e))return"Blackberry";if(uF(e))return"Webos";if(sF(e))return"Safari";if((e.includes("chrome/")||oF(e))&&!e.includes("edge/"))return"Chrome";if(lF(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=t.match(n);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function rF(t=Pi()){return/firefox\//i.test(t)}function sF(t=Pi()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function oF(t=Pi()){return/crios\//i.test(t)}function aF(t=Pi()){return/iemobile/i.test(t)}function lF(t=Pi()){return/android/i.test(t)}function cF(t=Pi()){return/blackberry/i.test(t)}function uF(t=Pi()){return/webos/i.test(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function a0(t,e=[]){let n;switch(t){case"Browser":n=XE(Pi());break;case"Worker":n=`${XE(Pi())}-${t}`;break;default:n=t}const i=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Pl}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hF{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const i=o=>new Promise((l,u)=>{try{const h=e(o);l(h)}catch(h){u(h)}});i.onAbort=n,this.queue.push(i);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const i of this.queue)await i(e),i.onAbort&&n.push(i.onAbort)}catch(i){n.reverse();for(const r of n)try{r()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fF{constructor(e,n,i){this.app=e,this.heartbeatServiceProvider=n,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new QE(this),this.idTokenSubscription=new QE(this),this.beforeStateQueue=new hF(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=JT,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=bs(n)),this._initializationPromise=this.queue(async()=>{var i,r;if(!this._deleted&&(this.persistenceManager=await xo.create(this,e),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((r=this.currentUser)===null||r===void 0?void 0:r.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUser(e){var n;const i=await this.assertedPersistence.getCurrentUser();let r=i,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const l=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,u=r==null?void 0:r._redirectEventId,h=await this.tryRedirectSignIn(e);(!l||l===u)&&(h!=null&&h.user)&&(r=h.user,o=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(r)}catch(l){r=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(l))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return je(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await $u(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=V$()}async _delete(){this._deleted=!0}async updateCurrentUser(e){const n=e?Ui(e):null;return n&&je(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&je(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0)}setPersistence(e){return this.queue(async()=>{await this.assertedPersistence.setPersistence(bs(e))})}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new ta("auth","Firebase",e())}onAuthStateChanged(e,n,i){return this.registerStateListener(this.authStateSubscription,e,n,i)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,i){return this.registerStateListener(this.idTokenSubscription,e,n,i)}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const i=await this.getOrInitRedirectPersistenceManager(n);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&bs(e)||this._popupRedirectResolver;je(n,this,"argument-error"),this.redirectPersistenceManager=await xo.create(this,[bs(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,i;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((i=this.redirectUser)===null||i===void 0?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const i=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==i&&(this.lastNotifiedUid=i,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,i,r){if(this._deleted)return()=>{};const o=typeof n=="function"?n:n.next.bind(n),l=this._isInitialized?Promise.resolve():this._initializationPromise;return je(l,this,"internal-error"),l.then(()=>o(this.currentUser)),typeof n=="function"?e.addObserver(n,i,r):e.addObserver(n)}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return je(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=a0(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={["X-Client-Version"]:this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const i=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());return i&&(n["X-Firebase-Client"]=i),n}}function dF(t){return Ui(t)}class QE{constructor(e){this.auth=e,this.observer=null,this.addObserver=SM(n=>this.observer=n)}get next(){return je(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}new kl(3e4,6e4);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */new kl(2e3,1e4);/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */new kl(3e4,6e4);/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */new kl(5e3,15e3);var JE="@firebase/auth",ZE="0.21.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pF{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(i=>{e((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){je(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gF(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}function _F(t){ki(new fi("auth",(e,{options:n})=>{const i=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),{apiKey:o,authDomain:l}=i.options;return((u,h)=>{je(o&&!o.includes(":"),"invalid-api-key",{appName:u.name}),je(!(l!=null&&l.includes(":")),"argument-error",{appName:u.name});const d={apiKey:o,authDomain:l,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:a0(t)},p=new fF(u,h,d);return B$(p,n),p})(i,r)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,i)=>{e.getProvider("auth-internal").initialize()})),ki(new fi("auth-internal",e=>{const n=dF(e.getProvider("auth").getImmediate());return(i=>new pF(i))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Nn(JE,ZE,gF(t)),Nn(JE,ZE,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mF=5*60;yM("authIdTokenMaxAge");_F("Browser");/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vF=new Map,yF={activated:!1,tokenObservers:[]};function Mi(t){return vF.get(t)||Object.assign({},yF)}const eb={OFFSET_DURATION:5*60*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:16*60*1e3};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EF{constructor(e,n,i,r,o){if(this.operation=e,this.retryPolicy=n,this.getWaitDuration=i,this.lowerBound=r,this.upperBound=o,this.pending=null,this.nextErrorWaitInterval=r,r>o)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}async process(e){this.stop();try{this.pending=new ks,await bF(this.getNextRun(e)),this.pending.resolve(),await this.pending.promise,this.pending=new ks,await this.operation(),this.pending.resolve(),await this.pending.promise,this.process(!0).catch(()=>{})}catch(n){this.retryPolicy(n)?this.process(!1).catch(()=>{}):this.stop()}}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const n=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),n}}}function bF(t){return new Promise(e=>{setTimeout(e,t)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wF={["already-initialized"]:"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.",["use-before-activation"]:"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.",["fetch-network-error"]:"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.",["fetch-parse-error"]:"Fetch client could not parse response. Original error: {$originalErrorMessage}.",["fetch-status-error"]:"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.",["storage-open"]:"Error thrown when opening storage. Original error: {$originalErrorMessage}.",["storage-get"]:"Error thrown when reading from storage. Original error: {$originalErrorMessage}.",["storage-set"]:"Error thrown when writing to storage. Original error: {$originalErrorMessage}.",["recaptcha-error"]:"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"},Fu=new ta("appCheck","AppCheck",wF);function TF(t){if(!Mi(t).activated)throw Fu.create("use-before-activation",{appName:t.name})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CF="firebase-app-check-database",IF=1,qp="firebase-app-check-store";let Zc=null;function AF(){return Zc||(Zc=new Promise((t,e)=>{try{const n=indexedDB.open(CF,IF);n.onsuccess=i=>{t(i.target.result)},n.onerror=i=>{var r;e(Fu.create("storage-open",{originalErrorMessage:(r=i.target.error)===null||r===void 0?void 0:r.message}))},n.onupgradeneeded=i=>{const r=i.target.result;switch(i.oldVersion){case 0:r.createObjectStore(qp,{keyPath:"compositeKey"})}}}catch(n){e(Fu.create("storage-open",{originalErrorMessage:n==null?void 0:n.message}))}}),Zc)}function SF(t,e){return OF(NF(t),e)}async function OF(t,e){const i=(await AF()).transaction(qp,"readwrite"),o=i.objectStore(qp).put({compositeKey:t,value:e});return new Promise((l,u)=>{o.onsuccess=h=>{l()},i.onerror=h=>{var d;u(Fu.create("storage-set",{originalErrorMessage:(d=h.target.error)===null||d===void 0?void 0:d.message}))}})}function NF(t){return`${t.options.appId}-${t.name}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kp=new Ll("@firebase/app-check");function tb(t,e){return jT()?SF(t,e).catch(n=>{Kp.warn(`Failed to write token to IndexedDB. Error: ${n}`)}):Promise.resolve()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RF={error:"UNKNOWN_ERROR"};function xF(t){return Nh.encodeString(JSON.stringify(t),!1)}async function Gp(t,e=!1){const n=t.app;TF(n);const i=Mi(n);let r=i.token,o;if(r&&!Ha(r)&&(i.token=void 0,r=void 0),!r){const h=await i.cachedTokenPromise;h&&(Ha(h)?r=h:await tb(n,void 0))}if(!e&&r&&Ha(r))return{token:r.token};let l=!1;try{i.exchangeTokenPromise||(i.exchangeTokenPromise=i.provider.getToken().finally(()=>{i.exchangeTokenPromise=void 0}),l=!0),r=await Mi(n).exchangeTokenPromise}catch(h){h.code==="appCheck/throttled"?Kp.warn(h.message):Kp.error(h),o=h}let u;return r?o?Ha(r)?u={token:r.token,internalError:o}:u=ib(o):(u={token:r.token},i.token=r,await tb(n,r)):u=ib(o),l&&PF(n,u),u}function DF(t,e,n,i){const{app:r}=t,o=Mi(r),l={next:n,error:i,type:e};if(o.tokenObservers=[...o.tokenObservers,l],o.token&&Ha(o.token)){const u=o.token;Promise.resolve().then(()=>{n({token:u.token}),nb(t)}).catch(()=>{})}o.cachedTokenPromise.then(()=>nb(t))}function l0(t,e){const n=Mi(t),i=n.tokenObservers.filter(r=>r.next!==e);i.length===0&&n.tokenRefresher&&n.tokenRefresher.isRunning()&&n.tokenRefresher.stop(),n.tokenObservers=i}function nb(t){const{app:e}=t,n=Mi(e);let i=n.tokenRefresher;i||(i=LF(t),n.tokenRefresher=i),!i.isRunning()&&n.isTokenAutoRefreshEnabled&&i.start()}function LF(t){const{app:e}=t;return new EF(async()=>{const n=Mi(e);let i;if(n.token?i=await Gp(t,!0):i=await Gp(t),i.error)throw i.error;if(i.internalError)throw i.internalError},()=>!0,()=>{const n=Mi(e);if(n.token){let i=n.token.issuedAtTimeMillis+(n.token.expireTimeMillis-n.token.issuedAtTimeMillis)*.5+3e5;const r=n.token.expireTimeMillis-5*60*1e3;return i=Math.min(i,r),Math.max(0,i-Date.now())}else return 0},eb.RETRIAL_MIN_WAIT,eb.RETRIAL_MAX_WAIT)}function PF(t,e){const n=Mi(t).tokenObservers;for(const i of n)try{i.type==="EXTERNAL"&&e.error!=null?i.error(e.error):i.next(e)}catch{}}function Ha(t){return t.expireTimeMillis-Date.now()>0}function ib(t){return{token:xF(RF),error:t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kF{constructor(e,n){this.app=e,this.heartbeatServiceProvider=n}_delete(){const{tokenObservers:e}=Mi(this.app);for(const n of e)l0(this.app,n.next);return Promise.resolve()}}function MF(t,e){return new kF(t,e)}function $F(t){return{getToken:e=>Gp(t,e),addTokenListener:e=>DF(t,"INTERNAL",e),removeTokenListener:e=>l0(t.app,e)}}const FF="@firebase/app-check",UF="0.6.0",BF="app-check",rb="app-check-internal";function WF(){ki(new fi(BF,t=>{const e=t.getProvider("app").getImmediate(),n=t.getProvider("heartbeat");return MF(e,n)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,e,n)=>{t.getProvider(rb).initialize()})),ki(new fi(rb,t=>{const e=t.getProvider("app-check").getImmediate();return $F(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),Nn(FF,UF)}WF();var HF="firebase",VF="9.15.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Nn(HF,VF,"app");const jF=Symbol("firebaseApp"),sb="@firebase/database",ob="0.14.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let c0="";function qF(t){c0=t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KF{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,n){n==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),Tt(n))}get(e){const n=this.domStorage_.getItem(this.prefixedName_(e));return n==null?null:fl(n)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GF{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,n){n==null?delete this.cache_[e]:this.cache_[e]=n}get(e){return Fi(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u0=function(t){try{if(typeof window<"u"&&typeof window[t]<"u"){const e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new KF(e)}}catch{}return new GF},ws=u0("localStorage"),zp=u0("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Do=new Ll("@firebase/database"),zF=function(){let t=1;return function(){return t++}}(),h0=function(t){const e=RM(t),n=new AM;n.update(e);const i=n.digest();return Nh.encodeByteArray(i)},Ml=function(...t){let e="";for(let n=0;n<t.length;n++){const i=t[n];Array.isArray(i)||i&&typeof i=="object"&&typeof i.length=="number"?e+=Ml.apply(null,i):typeof i=="object"?e+=Tt(i):e+=i,e+=" "}return e};let Rs=null,ab=!0;const YF=function(t,e){K(!e||t===!0||t===!1,"Can't turn on custom loggers persistently."),t===!0?(Do.logLevel=Ke.VERBOSE,Rs=Do.log.bind(Do),e&&zp.set("logging_enabled",!0)):typeof t=="function"?Rs=t:(Rs=null,zp.remove("logging_enabled"))},Ut=function(...t){if(ab===!0&&(ab=!1,Rs===null&&zp.get("logging_enabled")===!0&&YF(!0)),Rs){const e=Ml.apply(null,t);Rs(e)}},$l=function(t){return function(...e){Ut(t,...e)}},Yp=function(...t){const e="FIREBASE INTERNAL ERROR: "+Ml(...t);Do.error(e)},cr=function(...t){const e=`FIREBASE FATAL ERROR: ${Ml(...t)}`;throw Do.error(e),new Error(e)},ln=function(...t){const e="FIREBASE WARNING: "+Ml(...t);Do.warn(e)},XF=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&ln("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},n_=function(t){return typeof t=="number"&&(t!==t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},QF=function(t){if(document.readyState==="complete")t();else{let e=!1;const n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}e||(e=!0,t())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},Uo="[MIN_NAME]",$s="[MAX_NAME]",Vs=function(t,e){if(t===e)return 0;if(t===Uo||e===$s)return-1;if(e===Uo||t===$s)return 1;{const n=lb(t),i=lb(e);return n!==null?i!==null?n-i===0?t.length-e.length:n-i:-1:i!==null?1:t<e?-1:1}},JF=function(t,e){return t===e?0:t<e?-1:1},Da=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+Tt(e))},i_=function(t){if(typeof t!="object"||t===null)return Tt(t);const e=[];for(const i in t)e.push(i);e.sort();let n="{";for(let i=0;i<e.length;i++)i!==0&&(n+=","),n+=Tt(e[i]),n+=":",n+=i_(t[e[i]]);return n+="}",n},f0=function(t,e){const n=t.length;if(n<=e)return[t];const i=[];for(let r=0;r<n;r+=e)r+e>n?i.push(t.substring(r,n)):i.push(t.substring(r,r+e));return i};function Ht(t,e){for(const n in t)t.hasOwnProperty(n)&&e(n,t[n])}const d0=function(t){K(!n_(t),"Invalid JSON number");const e=11,n=52,i=(1<<e-1)-1;let r,o,l,u,h;t===0?(o=0,l=0,r=1/t===-1/0?1:0):(r=t<0,t=Math.abs(t),t>=Math.pow(2,1-i)?(u=Math.min(Math.floor(Math.log(t)/Math.LN2),i),o=u+i,l=Math.round(t*Math.pow(2,n-u)-Math.pow(2,n))):(o=0,l=Math.round(t/Math.pow(2,1-i-n))));const d=[];for(h=n;h;h-=1)d.push(l%2?1:0),l=Math.floor(l/2);for(h=e;h;h-=1)d.push(o%2?1:0),o=Math.floor(o/2);d.push(r?1:0),d.reverse();const p=d.join("");let _="";for(h=0;h<64;h+=8){let y=parseInt(p.substr(h,8),2).toString(16);y.length===1&&(y="0"+y),_=_+y}return _.toLowerCase()},ZF=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},eU=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function tU(t,e){let n="Unknown Error";t==="too_big"?n="The data requested exceeds the maximum size that can be accessed with a single request.":t==="permission_denied"?n="Client doesn't have permission to access the desired data.":t==="unavailable"&&(n="The service is unavailable");const i=new Error(t+" at "+e._path.toString()+": "+n);return i.code=t.toUpperCase(),i}const nU=new RegExp("^-?(0*)\\d{1,10}$"),iU=-2147483648,rU=2147483647,lb=function(t){if(nU.test(t)){const e=Number(t);if(e>=iU&&e<=rU)return e}return null},na=function(t){try{t()}catch(e){setTimeout(()=>{const n=e.stack||"";throw ln("Exception was thrown by user callback.",n),e},Math.floor(0))}},sU=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},Qa=function(t,e){const n=setTimeout(t,e);return typeof n=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):typeof n=="object"&&n.unref&&n.unref(),n};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oU{constructor(e,n){this.appName_=e,this.appCheckProvider=n,this.appCheck=n==null?void 0:n.getImmediate({optional:!0}),this.appCheck||n==null||n.get().then(i=>this.appCheck=i)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((n,i)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(n,i):n(null)},0)})}addTokenChangeListener(e){var n;(n=this.appCheckProvider)===null||n===void 0||n.get().then(i=>i.addTokenListener(e))}notifyForInvalidToken(){ln(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aU{constructor(e,n,i){this.appName_=e,this.firebaseOptions_=n,this.authProvider_=i,this.auth_=null,this.auth_=i.getImmediate({optional:!0}),this.auth_||i.onInit(r=>this.auth_=r)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(n=>n&&n.code==="auth/token-not-initialized"?(Ut("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,i)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(n,i):n(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(n=>n.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(n=>n.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',ln(e)}}class Lo{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}Lo.OWNER="owner";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r_="5",p0="v",g0="s",_0="r",m0="f",v0=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,y0="ls",E0="p",Xp="ac",b0="websocket",w0="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T0{constructor(e,n,i,r,o=!1,l="",u=!1){this.secure=n,this.namespace=i,this.webSocketOnly=r,this.nodeAdmin=o,this.persistenceKey=l,this.includeNamespaceInQueryParams=u,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=ws.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&ws.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${n}`}}function lU(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams}function C0(t,e,n){K(typeof e=="string","typeof type must == string"),K(typeof n=="object","typeof params must == object");let i;if(e===b0)i=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else if(e===w0)i=(t.secure?"https://":"http://")+t.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);lU(t)&&(n.ns=t.namespace);const r=[];return Ht(n,(o,l)=>{r.push(o+"="+l)}),i+r.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cU{constructor(){this.counters_={}}incrementCounter(e,n=1){Fi(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=n}get(){return lM(this.counters_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qd={},Kd={};function s_(t){const e=t.toString();return qd[e]||(qd[e]=new cU),qd[e]}function uU(t,e){const n=t.toString();return Kd[n]||(Kd[n]=e()),Kd[n]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hU{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,n){this.closeAfterResponse=e,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,n){for(this.pendingResponses[e]=n;this.pendingResponses[this.currentResponseNum];){const i=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let r=0;r<i.length;++r)i[r]&&na(()=>{this.onMessage_(i[r])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cb="start",fU="close",dU="pLPCommand",pU="pRTLPCB",I0="id",A0="pw",S0="ser",gU="cb",_U="seg",mU="ts",vU="d",yU="dframe",O0=1870,N0=30,EU=O0-N0,bU=25e3,wU=3e4;class To{constructor(e,n,i,r,o,l,u){this.connId=e,this.repoInfo=n,this.applicationId=i,this.appCheckToken=r,this.authToken=o,this.transportSessionId=l,this.lastSessionId=u,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=$l(e),this.stats_=s_(n),this.urlFn=h=>(this.appCheckToken&&(h[Xp]=this.appCheckToken),C0(n,w0,h))}open(e,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new hU(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(wU)),QF(()=>{if(this.isClosed_)return;this.scriptTagHolder=new o_((...o)=>{const[l,u,h,d,p]=o;if(this.incrementIncomingBytes_(o),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,l===cb)this.id=u,this.password=h;else if(l===fU)u?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(u,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+l)},(...o)=>{const[l,u]=o;this.incrementIncomingBytes_(o),this.myPacketOrderer.handleResponse(l,u)},()=>{this.onClosed_()},this.urlFn);const i={};i[cb]="t",i[S0]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(i[gU]=this.scriptTagHolder.uniqueCallbackIdentifier),i[p0]=r_,this.transportSessionId&&(i[g0]=this.transportSessionId),this.lastSessionId&&(i[y0]=this.lastSessionId),this.applicationId&&(i[E0]=this.applicationId),this.appCheckToken&&(i[Xp]=this.appCheckToken),typeof location<"u"&&location.hostname&&v0.test(location.hostname)&&(i[_0]=m0);const r=this.urlFn(i);this.log_("Connecting via long-poll to "+r),this.scriptTagHolder.addTag(r,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){To.forceAllow_=!0}static forceDisallow(){To.forceDisallow_=!0}static isAvailable(){return To.forceAllow_?!0:!To.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!ZF()&&!eU()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const n=Tt(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const i=BT(n),r=f0(i,EU);for(let o=0;o<r.length;o++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[o]),this.curSegmentNum++}addDisconnectPingFrame(e,n){this.myDisconnFrame=document.createElement("iframe");const i={};i[yU]="t",i[I0]=e,i[A0]=n,this.myDisconnFrame.src=this.urlFn(i),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const n=Tt(e).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}}class o_{constructor(e,n,i,r){this.onDisconnect=i,this.urlFn=r,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=zF(),window[dU+this.uniqueCallbackIdentifier]=e,window[pU+this.uniqueCallbackIdentifier]=n,this.myIFrame=o_.createIFrame_();let o="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(o='<script>document.domain="'+document.domain+'";<\/script>');const l="<html><body>"+o+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(l),this.myIFrame.doc.close()}catch(u){Ut("frame writing exception"),u.stack&&Ut(u.stack),Ut(u)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||Ut("No IE domain setting required")}catch{const i=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+i+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,n){for(this.myID=e,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e[I0]=this.myID,e[A0]=this.myPW,e[S0]=this.currentSerial;let n=this.urlFn(e),i="",r=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+N0+i.length<=O0;){const l=this.pendingSegs.shift();i=i+"&"+_U+r+"="+l.seg+"&"+mU+r+"="+l.ts+"&"+vU+r+"="+l.d,r++}return n=n+i,this.addLongPollTag_(n,this.currentSerial),!0}else return!1}enqueueSegment(e,n,i){this.pendingSegs.push({seg:e,ts:n,d:i}),this.alive&&this.newRequest_()}addLongPollTag_(e,n){this.outstandingRequests.add(n);const i=()=>{this.outstandingRequests.delete(n),this.newRequest_()},r=setTimeout(i,Math.floor(bU)),o=()=>{clearTimeout(r),i()};this.addTag(e,o)}addTag(e,n){setTimeout(()=>{try{if(!this.sendNewPolls)return;const i=this.myIFrame.doc.createElement("script");i.type="text/javascript",i.async=!0,i.src=e,i.onload=i.onreadystatechange=function(){const r=i.readyState;(!r||r==="loaded"||r==="complete")&&(i.onload=i.onreadystatechange=null,i.parentNode&&i.parentNode.removeChild(i),n())},i.onerror=()=>{Ut("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(i)}catch{}},Math.floor(1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TU=16384,CU=45e3;let Uu=null;typeof MozWebSocket<"u"?Uu=MozWebSocket:typeof WebSocket<"u"&&(Uu=WebSocket);class si{constructor(e,n,i,r,o,l,u){this.connId=e,this.applicationId=i,this.appCheckToken=r,this.authToken=o,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=$l(this.connId),this.stats_=s_(n),this.connURL=si.connectionURL_(n,l,u,r,i),this.nodeAdmin=n.nodeAdmin}static connectionURL_(e,n,i,r,o){const l={};return l[p0]=r_,typeof location<"u"&&location.hostname&&v0.test(location.hostname)&&(l[_0]=m0),n&&(l[g0]=n),i&&(l[y0]=i),r&&(l[Xp]=r),o&&(l[E0]=o),C0(e,b0,l)}open(e,n){this.onDisconnect=n,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,ws.set("previous_websocket_failure",!0);try{let i;VT(),this.mySock=new Uu(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");const r=i.message||i.data;r&&this.log_(r),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");const r=i.message||i.data;r&&this.log_(r),this.onClosed_()}}start(){}static forceDisallow(){si.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){const n=/Android ([0-9]{0,}\.[0-9]{0,})/,i=navigator.userAgent.match(n);i&&i.length>1&&parseFloat(i[1])<4.4&&(e=!0)}return!e&&Uu!==null&&!si.forceDisallow_}static previouslyFailed(){return ws.isInMemoryStorage||ws.get("previous_websocket_failure")===!0}markConnectionHealthy(){ws.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const n=this.frames.join("");this.frames=null;const i=fl(n);this.onMessage(i)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(K(this.frames===null,"We already have a frame buffer"),e.length<=6){const n=Number(e);if(!isNaN(n))return this.handleNewFrameCount_(n),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(this.mySock===null)return;const n=e.data;if(this.bytesReceived+=n.length,this.stats_.incrementCounter("bytes_received",n.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(n);else{const i=this.extractFrameCount_(n);i!==null&&this.appendFrame_(i)}}send(e){this.resetKeepAlive();const n=Tt(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const i=f0(n,TU);i.length>1&&this.sendString_(String(i.length));for(let r=0;r<i.length;r++)this.sendString_(i[r])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(CU))}sendString_(e){try{this.mySock.send(e)}catch(n){this.log_("Exception thrown from WebSocket.send():",n.message||n.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}si.responsesRequiredToBeHealthy=2;si.healthyTimeout=3e4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gl{constructor(e){this.initTransports_(e)}static get ALL_TRANSPORTS(){return[To,si]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(e){const n=si&&si.isAvailable();let i=n&&!si.previouslyFailed();if(e.webSocketOnly&&(n||ln("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[si];else{const r=this.transports_=[];for(const o of gl.ALL_TRANSPORTS)o&&o.isAvailable()&&r.push(o);gl.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}gl.globalTransportInitialized_=!1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IU=6e4,AU=5e3,SU=10*1024,OU=100*1024,Gd="t",ub="d",NU="s",hb="r",RU="e",fb="o",db="a",pb="n",gb="p",xU="h";class DU{constructor(e,n,i,r,o,l,u,h,d,p){this.id=e,this.repoInfo_=n,this.applicationId_=i,this.appCheckToken_=r,this.authToken_=o,this.onMessage_=l,this.onReady_=u,this.onDisconnect_=h,this.onKill_=d,this.lastSessionId=p,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=$l("c:"+this.id+":"),this.transportManager_=new gl(n),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.conn_),i=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,i)},Math.floor(0));const r=e.healthyTimeout||0;r>0&&(this.healthyTimeout_=Qa(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>OU?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>SU?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(r)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return n=>{e===this.conn_?this.onConnectionLost_(n):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return n=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(n):e===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(e){const n={t:"d",d:e};this.sendData_(n)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(Gd in e){const n=e[Gd];n===db?this.upgradeIfSecondaryHealthy_():n===hb?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===fb&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const n=Da("t",e),i=Da("d",e);if(n==="c")this.onSecondaryControl_(i);else if(n==="d")this.pendingDataMessages.push(i);else throw new Error("Unknown protocol layer: "+n)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:gb,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:db,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:pb,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const n=Da("t",e),i=Da("d",e);n==="c"?this.onControl_(i):n==="d"&&this.onDataMessage_(i)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const n=Da(Gd,e);if(ub in e){const i=e[ub];if(n===xU)this.onHandshake_(i);else if(n===pb){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let r=0;r<this.pendingDataMessages.length;++r)this.onDataMessage_(this.pendingDataMessages[r]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===NU?this.onConnectionShutdown_(i):n===hb?this.onReset_(i):n===RU?Yp("Server Error: "+i):n===fb?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Yp("Unknown control packet command: "+n)}}onHandshake_(e){const n=e.ts,i=e.v,r=e.h;this.sessionId=e.s,this.repoInfo_.host=r,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),r_!==i&&ln("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.secondaryConn_),i=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,i),Qa(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(IU))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,n){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Qa(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(AU))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:gb,d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(ws.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R0{put(e,n,i,r){}merge(e,n,i,r){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,n,i){}onDisconnectMerge(e,n,i){}onDisconnectCancel(e,n){}reportStats(e){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x0{constructor(e){this.allowedEvents_=e,this.listeners_={},K(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...n){if(Array.isArray(this.listeners_[e])){const i=[...this.listeners_[e]];for(let r=0;r<i.length;r++)i[r].callback.apply(i[r].context,n)}}on(e,n,i){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:n,context:i});const r=this.getInitialEvent(e);r&&n.apply(i,r)}off(e,n,i){this.validateEventType_(e);const r=this.listeners_[e]||[];for(let o=0;o<r.length;o++)if(r[o].callback===n&&(!i||i===r[o].context)){r.splice(o,1);return}}validateEventType_(e){K(this.allowedEvents_.find(n=>n===e),"Unknown event: "+e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bu extends x0{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!Xg()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new Bu}getInitialEvent(e){return K(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _b=32,mb=768;class ze{constructor(e,n){if(n===void 0){this.pieces_=e.split("/");let i=0;for(let r=0;r<this.pieces_.length;r++)this.pieces_[r].length>0&&(this.pieces_[i]=this.pieces_[r],i++);this.pieces_.length=i,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=n}toString(){let e="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(e+="/"+this.pieces_[n]);return e||"/"}}function Ue(){return new ze("")}function Oe(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function Vr(t){return t.pieces_.length-t.pieceNum_}function et(t){let e=t.pieceNum_;return e<t.pieces_.length&&e++,new ze(t.pieces_,e)}function a_(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function LU(t){let e="";for(let n=t.pieceNum_;n<t.pieces_.length;n++)t.pieces_[n]!==""&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}function _l(t,e=0){return t.pieces_.slice(t.pieceNum_+e)}function D0(t){if(t.pieceNum_>=t.pieces_.length)return null;const e=[];for(let n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new ze(e,0)}function ht(t,e){const n=[];for(let i=t.pieceNum_;i<t.pieces_.length;i++)n.push(t.pieces_[i]);if(e instanceof ze)for(let i=e.pieceNum_;i<e.pieces_.length;i++)n.push(e.pieces_[i]);else{const i=e.split("/");for(let r=0;r<i.length;r++)i[r].length>0&&n.push(i[r])}return new ze(n,0)}function xe(t){return t.pieceNum_>=t.pieces_.length}function on(t,e){const n=Oe(t),i=Oe(e);if(n===null)return e;if(n===i)return on(et(t),et(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function PU(t,e){const n=_l(t,0),i=_l(e,0);for(let r=0;r<n.length&&r<i.length;r++){const o=Vs(n[r],i[r]);if(o!==0)return o}return n.length===i.length?0:n.length<i.length?-1:1}function l_(t,e){if(Vr(t)!==Vr(e))return!1;for(let n=t.pieceNum_,i=e.pieceNum_;n<=t.pieces_.length;n++,i++)if(t.pieces_[n]!==e.pieces_[i])return!1;return!0}function jn(t,e){let n=t.pieceNum_,i=e.pieceNum_;if(Vr(t)>Vr(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[i])return!1;++n,++i}return!0}class kU{constructor(e,n){this.errorPrefix_=n,this.parts_=_l(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let i=0;i<this.parts_.length;i++)this.byteLength_+=xh(this.parts_[i]);L0(this)}}function MU(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=xh(e),L0(t)}function $U(t){const e=t.parts_.pop();t.byteLength_-=xh(e),t.parts_.length>0&&(t.byteLength_-=1)}function L0(t){if(t.byteLength_>mb)throw new Error(t.errorPrefix_+"has a key path longer than "+mb+" bytes ("+t.byteLength_+").");if(t.parts_.length>_b)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+_b+") or object contains a cycle "+gs(t))}function gs(t){return t.parts_.length===0?"":"in property '"+t.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c_ extends x0{constructor(){super(["visible"]);let e,n;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{const i=!document[e];i!==this.visible_&&(this.visible_=i,this.trigger("visible",i))},!1)}static getInstance(){return new c_}getInitialEvent(e){return K(e==="visible","Unknown event type: "+e),[this.visible_]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const La=1e3,FU=60*5*1e3,vb=30*1e3,UU=1.3,BU=3e4,WU="server_kill",yb=3;class rr extends R0{constructor(e,n,i,r,o,l,u,h){if(super(),this.repoInfo_=e,this.applicationId_=n,this.onDataUpdate_=i,this.onConnectStatus_=r,this.onServerInfoUpdate_=o,this.authTokenProvider_=l,this.appCheckTokenProvider_=u,this.authOverride_=h,this.id=rr.nextPersistentConnectionId_++,this.log_=$l("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=La,this.maxReconnectDelay_=FU,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,h&&!VT())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");c_.getInstance().on("visible",this.onVisible_,this),e.host.indexOf("fblocal")===-1&&Bu.getInstance().on("online",this.onOnline_,this)}sendRequest(e,n,i){const r=++this.requestNumber_,o={r,a:e,b:n};this.log_(Tt(o)),K(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(o),i&&(this.requestCBHash_[r]=i)}get(e){this.initConnection_();const n=new ks,r={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:l=>{const u=l.d;l.s==="ok"?n.resolve(u):n.reject(u)}};this.outstandingGets_.push(r),this.outstandingGetCount_++;const o=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(o),n.promise}listen(e,n,i,r){this.initConnection_();const o=e._queryIdentifier,l=e._path.toString();this.log_("Listen called for "+l+" "+o),this.listens.has(l)||this.listens.set(l,new Map),K(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),K(!this.listens.get(l).has(o),"listen() called twice for same path/queryId.");const u={onComplete:r,hashFn:n,query:e,tag:i};this.listens.get(l).set(o,u),this.connected_&&this.sendListen_(u)}sendGet_(e){const n=this.outstandingGets_[e];this.sendRequest("g",n.request,i=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),n.onComplete&&n.onComplete(i)})}sendListen_(e){const n=e.query,i=n._path.toString(),r=n._queryIdentifier;this.log_("Listen on "+i+" for "+r);const o={p:i},l="q";e.tag&&(o.q=n._queryObject,o.t=e.tag),o.h=e.hashFn(),this.sendRequest(l,o,u=>{const h=u.d,d=u.s;rr.warnOnListenWarnings_(h,n),(this.listens.get(i)&&this.listens.get(i).get(r))===e&&(this.log_("listen response",u),d!=="ok"&&this.removeListen_(i,r),e.onComplete&&e.onComplete(d,h))})}static warnOnListenWarnings_(e,n){if(e&&typeof e=="object"&&Fi(e,"w")){const i=Fo(e,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){const r='".indexOn": "'+n._queryParams.getIndex().toString()+'"',o=n._path.toString();ln(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${r} at ${o} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&e.length===40||IM(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=vb)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,n=CM(e)?"auth":"gauth",i={cred:e};this.authOverride_===null?i.noauth=!0:typeof this.authOverride_=="object"&&(i.authvar=this.authOverride_),this.sendRequest(n,i,r=>{const o=r.s,l=r.d||"error";this.authToken_===e&&(o==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(o,l))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const n=e.s,i=e.d||"error";n==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(n,i)})}unlisten(e,n){const i=e._path.toString(),r=e._queryIdentifier;this.log_("Unlisten called for "+i+" "+r),K(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,r)&&this.connected_&&this.sendUnlisten_(i,r,e._queryObject,n)}sendUnlisten_(e,n,i,r){this.log_("Unlisten on "+e+" for "+n);const o={p:e},l="n";r&&(o.q=i,o.t=r),this.sendRequest(l,o)}onDisconnectPut(e,n,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,n,i):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:n,onComplete:i})}onDisconnectMerge(e,n,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,n,i):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:n,onComplete:i})}onDisconnectCancel(e,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:n})}sendOnDisconnect_(e,n,i,r){const o={p:n,d:i};this.log_("onDisconnect "+e,o),this.sendRequest(e,o,l=>{r&&setTimeout(()=>{r(l.s,l.d)},Math.floor(0))})}put(e,n,i,r){this.putInternal("p",e,n,i,r)}merge(e,n,i,r){this.putInternal("m",e,n,i,r)}putInternal(e,n,i,r,o){this.initConnection_();const l={p:n,d:i};o!==void 0&&(l.h=o),this.outstandingPuts_.push({action:e,request:l,onComplete:r}),this.outstandingPutCount_++;const u=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(u):this.log_("Buffering put: "+n)}sendPut_(e){const n=this.outstandingPuts_[e].action,i=this.outstandingPuts_[e].request,r=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(n,i,o=>{this.log_(n+" response",o),delete this.outstandingPuts_[e],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),r&&r(o.s,o.d)})}reportStats(e){if(this.connected_){const n={c:e};this.log_("reportStats",n),this.sendRequest("s",n,i=>{if(i.s!=="ok"){const o=i.d;this.log_("reportStats","Error sending stats: "+o)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+Tt(e));const n=e.r,i=this.requestCBHash_[n];i&&(delete this.requestCBHash_[n],i(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,n){this.log_("handleServerMessage",e,n),e==="d"?this.onDataUpdate_(n.p,n.d,!1,n.t):e==="m"?this.onDataUpdate_(n.p,n.d,!0,n.t):e==="c"?this.onListenRevoked_(n.p,n.q):e==="ac"?this.onAuthRevoked_(n.s,n.d):e==="apc"?this.onAppCheckRevoked_(n.s,n.d):e==="sd"?this.onSecurityDebugPacket_(n):Yp("Unrecognized action received from server: "+Tt(e)+`
Are you using the latest client?`)}onReady_(e,n){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(e),this.lastSessionId=n,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){K(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=La,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=La,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>BU&&(this.reconnectDelay_=La),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const e=new Date().getTime()-this.lastConnectionAttemptTime_;let n=Math.max(0,this.reconnectDelay_-e);n=Math.random()*n,this.log_("Trying to reconnect in "+n+"ms"),this.scheduleConnect_(n),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*UU)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),i=this.onRealtimeDisconnect_.bind(this),r=this.id+":"+rr.nextConnectionId_++,o=this.lastSessionId;let l=!1,u=null;const h=function(){u?u.close():(l=!0,i())},d=function(_){K(u,"sendRequest call when we're not connected not allowed."),u.sendRequest(_)};this.realtime_={close:h,sendRequest:d};const p=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[_,y]=await Promise.all([this.authTokenProvider_.getToken(p),this.appCheckTokenProvider_.getToken(p)]);l?Ut("getToken() completed but was canceled"):(Ut("getToken() completed. Creating connection."),this.authToken_=_&&_.accessToken,this.appCheckToken_=y&&y.token,u=new DU(r,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,n,i,b=>{ln(b+" ("+this.repoInfo_.toString()+")"),this.interrupt(WU)},o))}catch(_){this.log_("Failed to get token: "+_),l||(this.repoInfo_.nodeAdmin&&ln(_),h())}}}interrupt(e){Ut("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){Ut("Resuming connection for reason: "+e),delete this.interruptReasons_[e],ME(this.interruptReasons_)&&(this.reconnectDelay_=La,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const n=e-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:n})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const n=this.outstandingPuts_[e];n&&"h"in n.request&&n.queued&&(n.onComplete&&n.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(e,n){let i;n?i=n.map(o=>i_(o)).join("$"):i="default";const r=this.removeListen_(e,i);r&&r.onComplete&&r.onComplete("permission_denied")}removeListen_(e,n){const i=new ze(e).toString();let r;if(this.listens.has(i)){const o=this.listens.get(i);r=o.get(n),o.delete(n),o.size===0&&this.listens.delete(i)}else r=void 0;return r}onAuthRevoked_(e,n){Ut("Auth token revoked: "+e+"/"+n),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(e==="invalid_token"||e==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=yb&&(this.reconnectDelay_=vb,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,n){Ut("App check token revoked: "+e+"/"+n),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(e==="invalid_token"||e==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=yb&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const n of e.values())this.sendListen_(n);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let n="js";e["sdk."+n+"."+c0.replace(/\./g,"-")]=1,Xg()?e["framework.cordova"]=1:HT()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=Bu.getInstance().currentlyOnline();return ME(this.interruptReasons_)&&e}}rr.nextPersistentConnectionId_=0;rr.nextConnectionId_=0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ne{constructor(e,n){this.name=e,this.node=n}static Wrap(e,n){return new Ne(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dh{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,n){const i=new Ne(Uo,e),r=new Ne(Uo,n);return this.compare(i,r)!==0}minPost(){return Ne.MIN}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let eu;class P0 extends Dh{static get __EMPTY_NODE(){return eu}static set __EMPTY_NODE(e){eu=e}compare(e,n){return Vs(e.name,n.name)}isDefinedOn(e){throw ea("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,n){return!1}minPost(){return Ne.MIN}maxPost(){return new Ne($s,eu)}makePost(e,n){return K(typeof e=="string","KeyIndex indexValue must always be a string."),new Ne(e,eu)}toString(){return".key"}}const Po=new P0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tu{constructor(e,n,i,r,o=null){this.isReverse_=r,this.resultGenerator_=o,this.nodeStack_=[];let l=1;for(;!e.isEmpty();)if(e=e,l=n?i(e.key,n):1,r&&(l*=-1),l<0)this.isReverse_?e=e.left:e=e.right;else if(l===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(e.key,e.value):n={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}class Rt{constructor(e,n,i,r,o){this.key=e,this.value=n,this.color=i??Rt.RED,this.left=r??En.EMPTY_NODE,this.right=o??En.EMPTY_NODE}copy(e,n,i,r,o){return new Rt(e??this.key,n??this.value,i??this.color,r??this.left,o??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,i){let r=this;const o=i(e,r.key);return o<0?r=r.copy(null,null,null,r.left.insert(e,n,i),null):o===0?r=r.copy(null,n,null,null,null):r=r.copy(null,null,null,null,r.right.insert(e,n,i)),r.fixUp_()}removeMin_(){if(this.left.isEmpty())return En.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,n){let i,r;if(i=this,n(e,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),n(e,i.key)===0){if(i.right.isEmpty())return En.EMPTY_NODE;r=i.right.min_(),i=i.copy(r.key,r.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,Rt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,Rt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}Rt.RED=!0;Rt.BLACK=!1;class HU{copy(e,n,i,r,o){return this}insert(e,n,i){return new Rt(e,n,null)}remove(e,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}class En{constructor(e,n=En.EMPTY_NODE){this.comparator_=e,this.root_=n}insert(e,n){return new En(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,Rt.BLACK,null,null))}remove(e){return new En(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Rt.BLACK,null,null))}get(e){let n,i=this.root_;for(;!i.isEmpty();){if(n=this.comparator_(e,i.key),n===0)return i.value;n<0?i=i.left:n>0&&(i=i.right)}return null}getPredecessorKey(e){let n,i=this.root_,r=null;for(;!i.isEmpty();)if(n=this.comparator_(e,i.key),n===0){if(i.left.isEmpty())return r?r.key:null;for(i=i.left;!i.right.isEmpty();)i=i.right;return i.key}else n<0?i=i.left:n>0&&(r=i,i=i.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new tu(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,n){return new tu(this.root_,e,this.comparator_,!1,n)}getReverseIteratorFrom(e,n){return new tu(this.root_,e,this.comparator_,!0,n)}getReverseIterator(e){return new tu(this.root_,null,this.comparator_,!0,e)}}En.EMPTY_NODE=new HU;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VU(t,e){return Vs(t.name,e.name)}function u_(t,e){return Vs(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Qp;function jU(t){Qp=t}const k0=function(t){return typeof t=="number"?"number:"+d0(t):"string:"+t},M0=function(t){if(t.isLeafNode()){const e=t.val();K(typeof e=="string"||typeof e=="number"||typeof e=="object"&&Fi(e,".sv"),"Priority must be a string or number.")}else K(t===Qp||t.isEmpty(),"priority of unexpected type.");K(t===Qp||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Eb;class Nt{constructor(e,n=Nt.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=n,this.lazyHash_=null,K(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),M0(this.priorityNode_)}static set __childrenNodeConstructor(e){Eb=e}static get __childrenNodeConstructor(){return Eb}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new Nt(this.value_,e)}getImmediateChild(e){return e===".priority"?this.priorityNode_:Nt.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return xe(e)?this:Oe(e)===".priority"?this.priorityNode_:Nt.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,n){return null}updateImmediateChild(e,n){return e===".priority"?this.updatePriority(n):n.isEmpty()&&e!==".priority"?this:Nt.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)}updateChild(e,n){const i=Oe(e);return i===null?n:n.isEmpty()&&i!==".priority"?this:(K(i!==".priority"||Vr(e)===1,".priority must be the last token in a path"),this.updateImmediateChild(i,Nt.__childrenNodeConstructor.EMPTY_NODE.updateChild(et(e),n)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,n){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+k0(this.priorityNode_.val())+":");const n=typeof this.value_;e+=n+":",n==="number"?e+=d0(this.value_):e+=this.value_,this.lazyHash_=h0(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===Nt.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof Nt.__childrenNodeConstructor?-1:(K(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const n=typeof e.value_,i=typeof this.value_,r=Nt.VALUE_TYPE_ORDER.indexOf(n),o=Nt.VALUE_TYPE_ORDER.indexOf(i);return K(r>=0,"Unknown leaf type: "+n),K(o>=0,"Unknown leaf type: "+i),r===o?i==="object"?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:o-r}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const n=e;return this.value_===n.value_&&this.priorityNode_.equals(n.priorityNode_)}else return!1}}Nt.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let $0,F0;function qU(t){$0=t}function KU(t){F0=t}class GU extends Dh{compare(e,n){const i=e.node.getPriority(),r=n.node.getPriority(),o=i.compareTo(r);return o===0?Vs(e.name,n.name):o}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,n){return!e.getPriority().equals(n.getPriority())}minPost(){return Ne.MIN}maxPost(){return new Ne($s,new Nt("[PRIORITY-POST]",F0))}makePost(e,n){const i=$0(e);return new Ne(n,new Nt("[PRIORITY-POST]",i))}toString(){return".priority"}}const dt=new GU;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zU=Math.log(2);class YU{constructor(e){const n=o=>parseInt(Math.log(o)/zU,10),i=o=>parseInt(Array(o+1).join("1"),2);this.count=n(e+1),this.current_=this.count-1;const r=i(this.count);this.bits_=e+1&r}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const Wu=function(t,e,n,i){t.sort(e);const r=function(h,d){const p=d-h;let _,y;if(p===0)return null;if(p===1)return _=t[h],y=n?n(_):_,new Rt(y,_.node,Rt.BLACK,null,null);{const b=parseInt(p/2,10)+h,S=r(h,b),N=r(b+1,d);return _=t[b],y=n?n(_):_,new Rt(y,_.node,Rt.BLACK,S,N)}},o=function(h){let d=null,p=null,_=t.length;const y=function(S,N){const k=_-S,G=_;_-=S;const oe=r(k+1,G),H=t[k],V=n?n(H):H;b(new Rt(V,H.node,N,null,oe))},b=function(S){d?(d.left=S,d=S):(p=S,d=S)};for(let S=0;S<h.count;++S){const N=h.nextBitIsOne(),k=Math.pow(2,h.count-(S+1));N?y(k,Rt.BLACK):(y(k,Rt.BLACK),y(k,Rt.RED))}return p},l=new YU(t.length),u=o(l);return new En(i||e,u)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let zd;const fo={};class nr{constructor(e,n){this.indexes_=e,this.indexSet_=n}static get Default(){return K(fo&&dt,"ChildrenNode.ts has not been loaded"),zd=zd||new nr({".priority":fo},{".priority":dt}),zd}get(e){const n=Fo(this.indexes_,e);if(!n)throw new Error("No index defined for "+e);return n instanceof En?n:null}hasIndex(e){return Fi(this.indexSet_,e.toString())}addIndex(e,n){K(e!==Po,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const i=[];let r=!1;const o=n.getIterator(Ne.Wrap);let l=o.getNext();for(;l;)r=r||e.isDefinedOn(l.node),i.push(l),l=o.getNext();let u;r?u=Wu(i,e.getCompare()):u=fo;const h=e.toString(),d=Object.assign({},this.indexSet_);d[h]=e;const p=Object.assign({},this.indexes_);return p[h]=u,new nr(p,d)}addToIndexes(e,n){const i=Pu(this.indexes_,(r,o)=>{const l=Fo(this.indexSet_,o);if(K(l,"Missing index implementation for "+o),r===fo)if(l.isDefinedOn(e.node)){const u=[],h=n.getIterator(Ne.Wrap);let d=h.getNext();for(;d;)d.name!==e.name&&u.push(d),d=h.getNext();return u.push(e),Wu(u,l.getCompare())}else return fo;else{const u=n.get(e.name);let h=r;return u&&(h=h.remove(new Ne(e.name,u))),h.insert(e,e.node)}});return new nr(i,this.indexSet_)}removeFromIndexes(e,n){const i=Pu(this.indexes_,r=>{if(r===fo)return r;{const o=n.get(e.name);return o?r.remove(new Ne(e.name,o)):r}});return new nr(i,this.indexSet_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Pa;class he{constructor(e,n,i){this.children_=e,this.priorityNode_=n,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&M0(this.priorityNode_),this.children_.isEmpty()&&K(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return Pa||(Pa=new he(new En(u_),null,nr.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Pa}updatePriority(e){return this.children_.isEmpty()?this:new he(this.children_,e,this.indexMap_)}getImmediateChild(e){if(e===".priority")return this.getPriority();{const n=this.children_.get(e);return n===null?Pa:n}}getChild(e){const n=Oe(e);return n===null?this:this.getImmediateChild(n).getChild(et(e))}hasChild(e){return this.children_.get(e)!==null}updateImmediateChild(e,n){if(K(n,"We should always be passing snapshot nodes"),e===".priority")return this.updatePriority(n);{const i=new Ne(e,n);let r,o;n.isEmpty()?(r=this.children_.remove(e),o=this.indexMap_.removeFromIndexes(i,this.children_)):(r=this.children_.insert(e,n),o=this.indexMap_.addToIndexes(i,this.children_));const l=r.isEmpty()?Pa:this.priorityNode_;return new he(r,l,o)}}updateChild(e,n){const i=Oe(e);if(i===null)return n;{K(Oe(e)!==".priority"||Vr(e)===1,".priority must be the last token in a path");const r=this.getImmediateChild(i).updateChild(et(e),n);return this.updateImmediateChild(i,r)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const n={};let i=0,r=0,o=!0;if(this.forEachChild(dt,(l,u)=>{n[l]=u.val(e),i++,o&&he.INTEGER_REGEXP_.test(l)?r=Math.max(r,Number(l)):o=!1}),!e&&o&&r<2*i){const l=[];for(const u in n)l[u]=n[u];return l}else return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}hash(){if(this.lazyHash_===null){let e="";this.getPriority().isEmpty()||(e+="priority:"+k0(this.getPriority().val())+":"),this.forEachChild(dt,(n,i)=>{const r=i.hash();r!==""&&(e+=":"+n+":"+r)}),this.lazyHash_=e===""?"":h0(e)}return this.lazyHash_}getPredecessorChildName(e,n,i){const r=this.resolveIndex_(i);if(r){const o=r.getPredecessorKey(new Ne(e,n));return o?o.name:null}else return this.children_.getPredecessorKey(e)}getFirstChildName(e){const n=this.resolveIndex_(e);if(n){const i=n.minKey();return i&&i.name}else return this.children_.minKey()}getFirstChild(e){const n=this.getFirstChildName(e);return n?new Ne(n,this.children_.get(n)):null}getLastChildName(e){const n=this.resolveIndex_(e);if(n){const i=n.maxKey();return i&&i.name}else return this.children_.maxKey()}getLastChild(e){const n=this.getLastChildName(e);return n?new Ne(n,this.children_.get(n)):null}forEachChild(e,n){const i=this.resolveIndex_(e);return i?i.inorderTraversal(r=>n(r.name,r.node)):this.children_.inorderTraversal(n)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,n){const i=this.resolveIndex_(n);if(i)return i.getIteratorFrom(e,r=>r);{const r=this.children_.getIteratorFrom(e.name,Ne.Wrap);let o=r.peek();for(;o!=null&&n.compare(o,e)<0;)r.getNext(),o=r.peek();return r}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,n){const i=this.resolveIndex_(n);if(i)return i.getReverseIteratorFrom(e,r=>r);{const r=this.children_.getReverseIteratorFrom(e.name,Ne.Wrap);let o=r.peek();for(;o!=null&&n.compare(o,e)>0;)r.getNext(),o=r.peek();return r}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===Fl?-1:0}withIndex(e){if(e===Po||this.indexMap_.hasIndex(e))return this;{const n=this.indexMap_.addIndex(e,this.children_);return new he(this.children_,this.priorityNode_,n)}}isIndexed(e){return e===Po||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const n=e;if(this.getPriority().equals(n.getPriority()))if(this.children_.count()===n.children_.count()){const i=this.getIterator(dt),r=n.getIterator(dt);let o=i.getNext(),l=r.getNext();for(;o&&l;){if(o.name!==l.name||!o.node.equals(l.node))return!1;o=i.getNext(),l=r.getNext()}return o===null&&l===null}else return!1;else return!1}}resolveIndex_(e){return e===Po?null:this.indexMap_.get(e.toString())}}he.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class XU extends he{constructor(){super(new En(u_),he.EMPTY_NODE,nr.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return he.EMPTY_NODE}isEmpty(){return!1}}const Fl=new XU;Object.defineProperties(Ne,{MIN:{value:new Ne(Uo,he.EMPTY_NODE)},MAX:{value:new Ne($s,Fl)}});P0.__EMPTY_NODE=he.EMPTY_NODE;Nt.__childrenNodeConstructor=he;jU(Fl);KU(Fl);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QU=!0;function wt(t,e=null){if(t===null)return he.EMPTY_NODE;if(typeof t=="object"&&".priority"in t&&(e=t[".priority"]),K(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof t=="object"&&".value"in t&&t[".value"]!==null&&(t=t[".value"]),typeof t!="object"||".sv"in t){const n=t;return new Nt(n,wt(e))}if(!(t instanceof Array)&&QU){const n=[];let i=!1;if(Ht(t,(l,u)=>{if(l.substring(0,1)!=="."){const h=wt(u);h.isEmpty()||(i=i||!h.getPriority().isEmpty(),n.push(new Ne(l,h)))}}),n.length===0)return he.EMPTY_NODE;const o=Wu(n,VU,l=>l.name,u_);if(i){const l=Wu(n,dt.getCompare());return new he(o,wt(e),new nr({".priority":l},{".priority":dt}))}else return new he(o,wt(e),nr.Default)}else{let n=he.EMPTY_NODE;return Ht(t,(i,r)=>{if(Fi(t,i)&&i.substring(0,1)!=="."){const o=wt(r);(o.isLeafNode()||!o.isEmpty())&&(n=n.updateImmediateChild(i,o))}}),n.updatePriority(wt(e))}}qU(wt);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JU extends Dh{constructor(e){super(),this.indexPath_=e,K(!xe(e)&&Oe(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,n){const i=this.extractChild(e.node),r=this.extractChild(n.node),o=i.compareTo(r);return o===0?Vs(e.name,n.name):o}makePost(e,n){const i=wt(e),r=he.EMPTY_NODE.updateChild(this.indexPath_,i);return new Ne(n,r)}maxPost(){const e=he.EMPTY_NODE.updateChild(this.indexPath_,Fl);return new Ne($s,e)}toString(){return _l(this.indexPath_,0).join("/")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZU extends Dh{compare(e,n){const i=e.node.compareTo(n.node);return i===0?Vs(e.name,n.name):i}isDefinedOn(e){return!0}indexedValueChanged(e,n){return!e.equals(n)}minPost(){return Ne.MIN}maxPost(){return Ne.MAX}makePost(e,n){const i=wt(e);return new Ne(n,i)}toString(){return".value"}}const eB=new ZU;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function U0(t){return{type:"value",snapshotNode:t}}function Bo(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function ml(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function vl(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}function tB(t,e){return{type:"child_moved",snapshotNode:e,childName:t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h_{constructor(e){this.index_=e}updateChild(e,n,i,r,o,l){K(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const u=e.getImmediateChild(n);return u.getChild(r).equals(i.getChild(r))&&u.isEmpty()===i.isEmpty()||(l!=null&&(i.isEmpty()?e.hasChild(n)?l.trackChildChange(ml(n,u)):K(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):u.isEmpty()?l.trackChildChange(Bo(n,i)):l.trackChildChange(vl(n,i,u))),e.isLeafNode()&&i.isEmpty())?e:e.updateImmediateChild(n,i).withIndex(this.index_)}updateFullNode(e,n,i){return i!=null&&(e.isLeafNode()||e.forEachChild(dt,(r,o)=>{n.hasChild(r)||i.trackChildChange(ml(r,o))}),n.isLeafNode()||n.forEachChild(dt,(r,o)=>{if(e.hasChild(r)){const l=e.getImmediateChild(r);l.equals(o)||i.trackChildChange(vl(r,o,l))}else i.trackChildChange(Bo(r,o))})),n.withIndex(this.index_)}updatePriority(e,n){return e.isEmpty()?he.EMPTY_NODE:e.updatePriority(n)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yl{constructor(e){this.indexedFilter_=new h_(e.getIndex()),this.index_=e.getIndex(),this.startPost_=yl.getStartPost_(e),this.endPost_=yl.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const n=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,i=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return n&&i}updateChild(e,n,i,r,o,l){return this.matches(new Ne(n,i))||(i=he.EMPTY_NODE),this.indexedFilter_.updateChild(e,n,i,r,o,l)}updateFullNode(e,n,i){n.isLeafNode()&&(n=he.EMPTY_NODE);let r=n.withIndex(this.index_);r=r.updatePriority(he.EMPTY_NODE);const o=this;return n.forEachChild(dt,(l,u)=>{o.matches(new Ne(l,u))||(r=r.updateImmediateChild(l,he.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,r,i)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const n=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),n)}else return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const n=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),n)}else return e.getIndex().maxPost()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nB{constructor(e){this.withinDirectionalStart=n=>this.reverse_?this.withinEndPost(n):this.withinStartPost(n),this.withinDirectionalEnd=n=>this.reverse_?this.withinStartPost(n):this.withinEndPost(n),this.withinStartPost=n=>{const i=this.index_.compare(this.rangedFilter_.getStartPost(),n);return this.startIsInclusive_?i<=0:i<0},this.withinEndPost=n=>{const i=this.index_.compare(n,this.rangedFilter_.getEndPost());return this.endIsInclusive_?i<=0:i<0},this.rangedFilter_=new yl(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,n,i,r,o,l){return this.rangedFilter_.matches(new Ne(n,i))||(i=he.EMPTY_NODE),e.getImmediateChild(n).equals(i)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,n,i,r,o,l):this.fullLimitUpdateChild_(e,n,i,o,l)}updateFullNode(e,n,i){let r;if(n.isLeafNode()||n.isEmpty())r=he.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<n.numChildren()&&n.isIndexed(this.index_)){r=he.EMPTY_NODE.withIndex(this.index_);let o;this.reverse_?o=n.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):o=n.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let l=0;for(;o.hasNext()&&l<this.limit_;){const u=o.getNext();if(this.withinDirectionalStart(u))if(this.withinDirectionalEnd(u))r=r.updateImmediateChild(u.name,u.node),l++;else break;else continue}}else{r=n.withIndex(this.index_),r=r.updatePriority(he.EMPTY_NODE);let o;this.reverse_?o=r.getReverseIterator(this.index_):o=r.getIterator(this.index_);let l=0;for(;o.hasNext();){const u=o.getNext();l<this.limit_&&this.withinDirectionalStart(u)&&this.withinDirectionalEnd(u)?l++:r=r.updateImmediateChild(u.name,he.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,r,i)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,n,i,r,o){let l;if(this.reverse_){const _=this.index_.getCompare();l=(y,b)=>_(b,y)}else l=this.index_.getCompare();const u=e;K(u.numChildren()===this.limit_,"");const h=new Ne(n,i),d=this.reverse_?u.getFirstChild(this.index_):u.getLastChild(this.index_),p=this.rangedFilter_.matches(h);if(u.hasChild(n)){const _=u.getImmediateChild(n);let y=r.getChildAfterChild(this.index_,d,this.reverse_);for(;y!=null&&(y.name===n||u.hasChild(y.name));)y=r.getChildAfterChild(this.index_,y,this.reverse_);const b=y==null?1:l(y,h);if(p&&!i.isEmpty()&&b>=0)return o!=null&&o.trackChildChange(vl(n,i,_)),u.updateImmediateChild(n,i);{o!=null&&o.trackChildChange(ml(n,_));const N=u.updateImmediateChild(n,he.EMPTY_NODE);return y!=null&&this.rangedFilter_.matches(y)?(o!=null&&o.trackChildChange(Bo(y.name,y.node)),N.updateImmediateChild(y.name,y.node)):N}}else return i.isEmpty()?e:p&&l(d,h)>=0?(o!=null&&(o.trackChildChange(ml(d.name,d.node)),o.trackChildChange(Bo(n,i))),u.updateImmediateChild(n,i).updateImmediateChild(d.name,he.EMPTY_NODE)):e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f_{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=dt}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return K(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return K(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Uo}hasEnd(){return this.endSet_}getIndexEndValue(){return K(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return K(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:$s}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return K(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===dt}copy(){const e=new f_;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function iB(t){return t.loadsAllData()?new h_(t.getIndex()):t.hasLimit()?new nB(t):new yl(t)}function bb(t){const e={};if(t.isDefault())return e;let n;if(t.index_===dt?n="$priority":t.index_===eB?n="$value":t.index_===Po?n="$key":(K(t.index_ instanceof JU,"Unrecognized index type!"),n=t.index_.toString()),e.orderBy=Tt(n),t.startSet_){const i=t.startAfterSet_?"startAfter":"startAt";e[i]=Tt(t.indexStartValue_),t.startNameSet_&&(e[i]+=","+Tt(t.indexStartName_))}if(t.endSet_){const i=t.endBeforeSet_?"endBefore":"endAt";e[i]=Tt(t.indexEndValue_),t.endNameSet_&&(e[i]+=","+Tt(t.indexEndName_))}return t.limitSet_&&(t.isViewFromLeft()?e.limitToFirst=t.limit_:e.limitToLast=t.limit_),e}function wb(t){const e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_),e.sin=!t.startAfterSet_),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_),e.ein=!t.endBeforeSet_),t.limitSet_){e.l=t.limit_;let n=t.viewFrom_;n===""&&(t.isViewFromLeft()?n="l":n="r"),e.vf=n}return t.index_!==dt&&(e.i=t.index_.toString()),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hu extends R0{constructor(e,n,i,r){super(),this.repoInfo_=e,this.onDataUpdate_=n,this.authTokenProvider_=i,this.appCheckTokenProvider_=r,this.log_=$l("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,n){return n!==void 0?"tag$"+n:(K(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,n,i,r){const o=e._path.toString();this.log_("Listen called for "+o+" "+e._queryIdentifier);const l=Hu.getListenId_(e,i),u={};this.listens_[l]=u;const h=bb(e._queryParams);this.restRequest_(o+".json",h,(d,p)=>{let _=p;if(d===404&&(_=null,d=null),d===null&&this.onDataUpdate_(o,_,!1,i),Fo(this.listens_,l)===u){let y;d?d===401?y="permission_denied":y="rest_error:"+d:y="ok",r(y,null)}})}unlisten(e,n){const i=Hu.getListenId_(e,n);delete this.listens_[i]}get(e){const n=bb(e._queryParams),i=e._path.toString(),r=new ks;return this.restRequest_(i+".json",n,(o,l)=>{let u=l;o===404&&(u=null,o=null),o===null?(this.onDataUpdate_(i,u,!1,null),r.resolve(u)):r.reject(new Error(u))}),r.promise}refreshAuthToken(e){}restRequest_(e,n={},i){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([r,o])=>{r&&r.accessToken&&(n.auth=r.accessToken),o&&o.token&&(n.ac=o.token);const l=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+Jg(n);this.log_("Sending REST request for "+l);const u=new XMLHttpRequest;u.onreadystatechange=()=>{if(i&&u.readyState===4){this.log_("REST Response for "+l+" received. status:",u.status,"response:",u.responseText);let h=null;if(u.status>=200&&u.status<300){try{h=fl(u.responseText)}catch{ln("Failed to parse JSON response for "+l+": "+u.responseText)}i(null,h)}else u.status!==401&&u.status!==404&&ln("Got unsuccessful REST response for "+l+" Status: "+u.status),i(u.status);i=null}},u.open("GET",l,!0),u.send()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rB{constructor(){this.rootNode_=he.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,n){this.rootNode_=this.rootNode_.updateChild(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vu(){return{value:null,children:new Map}}function B0(t,e,n){if(xe(e))t.value=n,t.children.clear();else if(t.value!==null)t.value=t.value.updateChild(e,n);else{const i=Oe(e);t.children.has(i)||t.children.set(i,Vu());const r=t.children.get(i);e=et(e),B0(r,e,n)}}function Jp(t,e,n){t.value!==null?n(e,t.value):sB(t,(i,r)=>{const o=new ze(e.toString()+"/"+i);Jp(r,o,n)})}function sB(t,e){t.children.forEach((n,i)=>{e(i,n)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oB{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),n=Object.assign({},e);return this.last_&&Ht(this.last_,(i,r)=>{n[i]=n[i]-r}),this.last_=e,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tb=10*1e3,aB=30*1e3,lB=5*60*1e3;class cB{constructor(e,n){this.server_=n,this.statsToReport_={},this.statsListener_=new oB(e);const i=Tb+(aB-Tb)*Math.random();Qa(this.reportStats_.bind(this),Math.floor(i))}reportStats_(){const e=this.statsListener_.get(),n={};let i=!1;Ht(e,(r,o)=>{o>0&&Fi(this.statsToReport_,r)&&(n[r]=o,i=!0)}),i&&this.server_.reportStats(n),Qa(this.reportStats_.bind(this),Math.floor(Math.random()*2*lB))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var li;(function(t){t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(li||(li={}));function d_(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function p_(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function g_(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ju{constructor(e,n,i){this.path=e,this.affectedTree=n,this.revert=i,this.type=li.ACK_USER_WRITE,this.source=d_()}operationForChild(e){if(xe(this.path)){if(this.affectedTree.value!=null)return K(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const n=this.affectedTree.subtree(new ze(e));return new ju(Ue(),n,this.revert)}}else return K(Oe(this.path)===e,"operationForChild called for unrelated child."),new ju(et(this.path),this.affectedTree,this.revert)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class El{constructor(e,n){this.source=e,this.path=n,this.type=li.LISTEN_COMPLETE}operationForChild(e){return xe(this.path)?new El(this.source,Ue()):new El(this.source,et(this.path))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fs{constructor(e,n,i){this.source=e,this.path=n,this.snap=i,this.type=li.OVERWRITE}operationForChild(e){return xe(this.path)?new Fs(this.source,Ue(),this.snap.getImmediateChild(e)):new Fs(this.source,et(this.path),this.snap)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wo{constructor(e,n,i){this.source=e,this.path=n,this.children=i,this.type=li.MERGE}operationForChild(e){if(xe(this.path)){const n=this.children.subtree(new ze(e));return n.isEmpty()?null:n.value?new Fs(this.source,Ue(),n.value):new Wo(this.source,Ue(),n)}else return K(Oe(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new Wo(this.source,et(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jr{constructor(e,n,i){this.node_=e,this.fullyInitialized_=n,this.filtered_=i}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(xe(e))return this.isFullyInitialized()&&!this.filtered_;const n=Oe(e);return this.isCompleteForChild(n)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uB{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function hB(t,e,n,i){const r=[],o=[];return e.forEach(l=>{l.type==="child_changed"&&t.index_.indexedValueChanged(l.oldSnap,l.snapshotNode)&&o.push(tB(l.childName,l.snapshotNode))}),ka(t,r,"child_removed",e,i,n),ka(t,r,"child_added",e,i,n),ka(t,r,"child_moved",o,i,n),ka(t,r,"child_changed",e,i,n),ka(t,r,"value",e,i,n),r}function ka(t,e,n,i,r,o){const l=i.filter(u=>u.type===n);l.sort((u,h)=>dB(t,u,h)),l.forEach(u=>{const h=fB(t,u,o);r.forEach(d=>{d.respondsTo(u.type)&&e.push(d.createEvent(h,t.query_))})})}function fB(t,e,n){return e.type==="value"||e.type==="child_removed"||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}function dB(t,e,n){if(e.childName==null||n.childName==null)throw ea("Should only compare child_ events.");const i=new Ne(e.childName,e.snapshotNode),r=new Ne(n.childName,n.snapshotNode);return t.index_.compare(i,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lh(t,e){return{eventCache:t,serverCache:e}}function Ja(t,e,n,i){return Lh(new jr(e,n,i),t.serverCache)}function W0(t,e,n,i){return Lh(t.eventCache,new jr(e,n,i))}function qu(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function Us(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Yd;const pB=()=>(Yd||(Yd=new En(JF)),Yd);class Je{constructor(e,n=pB()){this.value=e,this.children=n}static fromObject(e){let n=new Je(null);return Ht(e,(i,r)=>{n=n.set(new ze(i),r)}),n}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,n){if(this.value!=null&&n(this.value))return{path:Ue(),value:this.value};if(xe(e))return null;{const i=Oe(e),r=this.children.get(i);if(r!==null){const o=r.findRootMostMatchingPathAndValue(et(e),n);return o!=null?{path:ht(new ze(i),o.path),value:o.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(xe(e))return this;{const n=Oe(e),i=this.children.get(n);return i!==null?i.subtree(et(e)):new Je(null)}}set(e,n){if(xe(e))return new Je(n,this.children);{const i=Oe(e),o=(this.children.get(i)||new Je(null)).set(et(e),n),l=this.children.insert(i,o);return new Je(this.value,l)}}remove(e){if(xe(e))return this.children.isEmpty()?new Je(null):new Je(null,this.children);{const n=Oe(e),i=this.children.get(n);if(i){const r=i.remove(et(e));let o;return r.isEmpty()?o=this.children.remove(n):o=this.children.insert(n,r),this.value===null&&o.isEmpty()?new Je(null):new Je(this.value,o)}else return this}}get(e){if(xe(e))return this.value;{const n=Oe(e),i=this.children.get(n);return i?i.get(et(e)):null}}setTree(e,n){if(xe(e))return n;{const i=Oe(e),o=(this.children.get(i)||new Je(null)).setTree(et(e),n);let l;return o.isEmpty()?l=this.children.remove(i):l=this.children.insert(i,o),new Je(this.value,l)}}fold(e){return this.fold_(Ue(),e)}fold_(e,n){const i={};return this.children.inorderTraversal((r,o)=>{i[r]=o.fold_(ht(e,r),n)}),n(e,this.value,i)}findOnPath(e,n){return this.findOnPath_(e,Ue(),n)}findOnPath_(e,n,i){const r=this.value?i(n,this.value):!1;if(r)return r;if(xe(e))return null;{const o=Oe(e),l=this.children.get(o);return l?l.findOnPath_(et(e),ht(n,o),i):null}}foreachOnPath(e,n){return this.foreachOnPath_(e,Ue(),n)}foreachOnPath_(e,n,i){if(xe(e))return this;{this.value&&i(n,this.value);const r=Oe(e),o=this.children.get(r);return o?o.foreachOnPath_(et(e),ht(n,r),i):new Je(null)}}foreach(e){this.foreach_(Ue(),e)}foreach_(e,n){this.children.inorderTraversal((i,r)=>{r.foreach_(ht(e,i),n)}),this.value&&n(e,this.value)}foreachChild(e){this.children.inorderTraversal((n,i)=>{i.value&&e(n,i.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hi{constructor(e){this.writeTree_=e}static empty(){return new hi(new Je(null))}}function Za(t,e,n){if(xe(e))return new hi(new Je(n));{const i=t.writeTree_.findRootMostValueAndPath(e);if(i!=null){const r=i.path;let o=i.value;const l=on(r,e);return o=o.updateChild(l,n),new hi(t.writeTree_.set(r,o))}else{const r=new Je(n),o=t.writeTree_.setTree(e,r);return new hi(o)}}}function Zp(t,e,n){let i=t;return Ht(n,(r,o)=>{i=Za(i,ht(e,r),o)}),i}function Cb(t,e){if(xe(e))return hi.empty();{const n=t.writeTree_.setTree(e,new Je(null));return new hi(n)}}function eg(t,e){return js(t,e)!=null}function js(t,e){const n=t.writeTree_.findRootMostValueAndPath(e);return n!=null?t.writeTree_.get(n.path).getChild(on(n.path,e)):null}function Ib(t){const e=[],n=t.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild(dt,(i,r)=>{e.push(new Ne(i,r))}):t.writeTree_.children.inorderTraversal((i,r)=>{r.value!=null&&e.push(new Ne(i,r.value))}),e}function $r(t,e){if(xe(e))return t;{const n=js(t,e);return n!=null?new hi(new Je(n)):new hi(t.writeTree_.subtree(e))}}function tg(t){return t.writeTree_.isEmpty()}function Ho(t,e){return H0(Ue(),t.writeTree_,e)}function H0(t,e,n){if(e.value!=null)return n.updateChild(t,e.value);{let i=null;return e.children.inorderTraversal((r,o)=>{r===".priority"?(K(o.value!==null,"Priority writes must always be leaf nodes"),i=o.value):n=H0(ht(t,r),o,n)}),!n.getChild(t).isEmpty()&&i!==null&&(n=n.updateChild(ht(t,".priority"),i)),n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ph(t,e){return K0(e,t)}function gB(t,e,n,i,r){K(i>t.lastWriteId,"Stacking an older write on top of newer ones"),r===void 0&&(r=!0),t.allWrites.push({path:e,snap:n,writeId:i,visible:r}),r&&(t.visibleWrites=Za(t.visibleWrites,e,n)),t.lastWriteId=i}function _B(t,e,n,i){K(i>t.lastWriteId,"Stacking an older merge on top of newer ones"),t.allWrites.push({path:e,children:n,writeId:i,visible:!0}),t.visibleWrites=Zp(t.visibleWrites,e,n),t.lastWriteId=i}function mB(t,e){for(let n=0;n<t.allWrites.length;n++){const i=t.allWrites[n];if(i.writeId===e)return i}return null}function vB(t,e){const n=t.allWrites.findIndex(u=>u.writeId===e);K(n>=0,"removeWrite called with nonexistent writeId.");const i=t.allWrites[n];t.allWrites.splice(n,1);let r=i.visible,o=!1,l=t.allWrites.length-1;for(;r&&l>=0;){const u=t.allWrites[l];u.visible&&(l>=n&&yB(u,i.path)?r=!1:jn(i.path,u.path)&&(o=!0)),l--}if(r){if(o)return EB(t),!0;if(i.snap)t.visibleWrites=Cb(t.visibleWrites,i.path);else{const u=i.children;Ht(u,h=>{t.visibleWrites=Cb(t.visibleWrites,ht(i.path,h))})}return!0}else return!1}function yB(t,e){if(t.snap)return jn(t.path,e);for(const n in t.children)if(t.children.hasOwnProperty(n)&&jn(ht(t.path,n),e))return!0;return!1}function EB(t){t.visibleWrites=V0(t.allWrites,bB,Ue()),t.allWrites.length>0?t.lastWriteId=t.allWrites[t.allWrites.length-1].writeId:t.lastWriteId=-1}function bB(t){return t.visible}function V0(t,e,n){let i=hi.empty();for(let r=0;r<t.length;++r){const o=t[r];if(e(o)){const l=o.path;let u;if(o.snap)jn(n,l)?(u=on(n,l),i=Za(i,u,o.snap)):jn(l,n)&&(u=on(l,n),i=Za(i,Ue(),o.snap.getChild(u)));else if(o.children){if(jn(n,l))u=on(n,l),i=Zp(i,u,o.children);else if(jn(l,n))if(u=on(l,n),xe(u))i=Zp(i,Ue(),o.children);else{const h=Fo(o.children,Oe(u));if(h){const d=h.getChild(et(u));i=Za(i,Ue(),d)}}}else throw ea("WriteRecord should have .snap or .children")}}return i}function j0(t,e,n,i,r){if(!i&&!r){const o=js(t.visibleWrites,e);if(o!=null)return o;{const l=$r(t.visibleWrites,e);if(tg(l))return n;if(n==null&&!eg(l,Ue()))return null;{const u=n||he.EMPTY_NODE;return Ho(l,u)}}}else{const o=$r(t.visibleWrites,e);if(!r&&tg(o))return n;if(!r&&n==null&&!eg(o,Ue()))return null;{const l=function(d){return(d.visible||r)&&(!i||!~i.indexOf(d.writeId))&&(jn(d.path,e)||jn(e,d.path))},u=V0(t.allWrites,l,e),h=n||he.EMPTY_NODE;return Ho(u,h)}}}function wB(t,e,n){let i=he.EMPTY_NODE;const r=js(t.visibleWrites,e);if(r)return r.isLeafNode()||r.forEachChild(dt,(o,l)=>{i=i.updateImmediateChild(o,l)}),i;if(n){const o=$r(t.visibleWrites,e);return n.forEachChild(dt,(l,u)=>{const h=Ho($r(o,new ze(l)),u);i=i.updateImmediateChild(l,h)}),Ib(o).forEach(l=>{i=i.updateImmediateChild(l.name,l.node)}),i}else{const o=$r(t.visibleWrites,e);return Ib(o).forEach(l=>{i=i.updateImmediateChild(l.name,l.node)}),i}}function TB(t,e,n,i,r){K(i||r,"Either existingEventSnap or existingServerSnap must exist");const o=ht(e,n);if(eg(t.visibleWrites,o))return null;{const l=$r(t.visibleWrites,o);return tg(l)?r.getChild(n):Ho(l,r.getChild(n))}}function CB(t,e,n,i){const r=ht(e,n),o=js(t.visibleWrites,r);if(o!=null)return o;if(i.isCompleteForChild(n)){const l=$r(t.visibleWrites,r);return Ho(l,i.getNode().getImmediateChild(n))}else return null}function IB(t,e){return js(t.visibleWrites,e)}function AB(t,e,n,i,r,o,l){let u;const h=$r(t.visibleWrites,e),d=js(h,Ue());if(d!=null)u=d;else if(n!=null)u=Ho(h,n);else return[];if(u=u.withIndex(l),!u.isEmpty()&&!u.isLeafNode()){const p=[],_=l.getCompare(),y=o?u.getReverseIteratorFrom(i,l):u.getIteratorFrom(i,l);let b=y.getNext();for(;b&&p.length<r;)_(b,i)!==0&&p.push(b),b=y.getNext();return p}else return[]}function SB(){return{visibleWrites:hi.empty(),allWrites:[],lastWriteId:-1}}function Ku(t,e,n,i){return j0(t.writeTree,t.treePath,e,n,i)}function __(t,e){return wB(t.writeTree,t.treePath,e)}function Ab(t,e,n,i){return TB(t.writeTree,t.treePath,e,n,i)}function Gu(t,e){return IB(t.writeTree,ht(t.treePath,e))}function OB(t,e,n,i,r,o){return AB(t.writeTree,t.treePath,e,n,i,r,o)}function m_(t,e,n){return CB(t.writeTree,t.treePath,e,n)}function q0(t,e){return K0(ht(t.treePath,e),t.writeTree)}function K0(t,e){return{treePath:t,writeTree:e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NB{constructor(){this.changeMap=new Map}trackChildChange(e){const n=e.type,i=e.childName;K(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),K(i!==".priority","Only non-priority child changes can be tracked.");const r=this.changeMap.get(i);if(r){const o=r.type;if(n==="child_added"&&o==="child_removed")this.changeMap.set(i,vl(i,e.snapshotNode,r.snapshotNode));else if(n==="child_removed"&&o==="child_added")this.changeMap.delete(i);else if(n==="child_removed"&&o==="child_changed")this.changeMap.set(i,ml(i,r.oldSnap));else if(n==="child_changed"&&o==="child_added")this.changeMap.set(i,Bo(i,e.snapshotNode));else if(n==="child_changed"&&o==="child_changed")this.changeMap.set(i,vl(i,e.snapshotNode,r.oldSnap));else throw ea("Illegal combination of changes: "+e+" occurred after "+r)}else this.changeMap.set(i,e)}getChanges(){return Array.from(this.changeMap.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RB{getCompleteChild(e){return null}getChildAfterChild(e,n,i){return null}}const G0=new RB;class v_{constructor(e,n,i=null){this.writes_=e,this.viewCache_=n,this.optCompleteServerCache_=i}getCompleteChild(e){const n=this.viewCache_.eventCache;if(n.isCompleteForChild(e))return n.getNode().getImmediateChild(e);{const i=this.optCompleteServerCache_!=null?new jr(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return m_(this.writes_,e,i)}}getChildAfterChild(e,n,i){const r=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:Us(this.viewCache_),o=OB(this.writes_,r,n,1,i,e);return o.length===0?null:o[0]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xB(t){return{filter:t}}function DB(t,e){K(e.eventCache.getNode().isIndexed(t.filter.getIndex()),"Event snap not indexed"),K(e.serverCache.getNode().isIndexed(t.filter.getIndex()),"Server snap not indexed")}function LB(t,e,n,i,r){const o=new NB;let l,u;if(n.type===li.OVERWRITE){const d=n;d.source.fromUser?l=ng(t,e,d.path,d.snap,i,r,o):(K(d.source.fromServer,"Unknown source."),u=d.source.tagged||e.serverCache.isFiltered()&&!xe(d.path),l=zu(t,e,d.path,d.snap,i,r,u,o))}else if(n.type===li.MERGE){const d=n;d.source.fromUser?l=kB(t,e,d.path,d.children,i,r,o):(K(d.source.fromServer,"Unknown source."),u=d.source.tagged||e.serverCache.isFiltered(),l=ig(t,e,d.path,d.children,i,r,u,o))}else if(n.type===li.ACK_USER_WRITE){const d=n;d.revert?l=FB(t,e,d.path,i,r,o):l=MB(t,e,d.path,d.affectedTree,i,r,o)}else if(n.type===li.LISTEN_COMPLETE)l=$B(t,e,n.path,i,o);else throw ea("Unknown operation type: "+n.type);const h=o.getChanges();return PB(e,l,h),{viewCache:l,changes:h}}function PB(t,e,n){const i=e.eventCache;if(i.isFullyInitialized()){const r=i.getNode().isLeafNode()||i.getNode().isEmpty(),o=qu(t);(n.length>0||!t.eventCache.isFullyInitialized()||r&&!i.getNode().equals(o)||!i.getNode().getPriority().equals(o.getPriority()))&&n.push(U0(qu(e)))}}function z0(t,e,n,i,r,o){const l=e.eventCache;if(Gu(i,n)!=null)return e;{let u,h;if(xe(n))if(K(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const d=Us(e),p=d instanceof he?d:he.EMPTY_NODE,_=__(i,p);u=t.filter.updateFullNode(e.eventCache.getNode(),_,o)}else{const d=Ku(i,Us(e));u=t.filter.updateFullNode(e.eventCache.getNode(),d,o)}else{const d=Oe(n);if(d===".priority"){K(Vr(n)===1,"Can't have a priority with additional path components");const p=l.getNode();h=e.serverCache.getNode();const _=Ab(i,n,p,h);_!=null?u=t.filter.updatePriority(p,_):u=l.getNode()}else{const p=et(n);let _;if(l.isCompleteForChild(d)){h=e.serverCache.getNode();const y=Ab(i,n,l.getNode(),h);y!=null?_=l.getNode().getImmediateChild(d).updateChild(p,y):_=l.getNode().getImmediateChild(d)}else _=m_(i,d,e.serverCache);_!=null?u=t.filter.updateChild(l.getNode(),d,_,p,r,o):u=l.getNode()}}return Ja(e,u,l.isFullyInitialized()||xe(n),t.filter.filtersNodes())}}function zu(t,e,n,i,r,o,l,u){const h=e.serverCache;let d;const p=l?t.filter:t.filter.getIndexedFilter();if(xe(n))d=p.updateFullNode(h.getNode(),i,null);else if(p.filtersNodes()&&!h.isFiltered()){const b=h.getNode().updateChild(n,i);d=p.updateFullNode(h.getNode(),b,null)}else{const b=Oe(n);if(!h.isCompleteForPath(n)&&Vr(n)>1)return e;const S=et(n),k=h.getNode().getImmediateChild(b).updateChild(S,i);b===".priority"?d=p.updatePriority(h.getNode(),k):d=p.updateChild(h.getNode(),b,k,S,G0,null)}const _=W0(e,d,h.isFullyInitialized()||xe(n),p.filtersNodes()),y=new v_(r,_,o);return z0(t,_,n,r,y,u)}function ng(t,e,n,i,r,o,l){const u=e.eventCache;let h,d;const p=new v_(r,e,o);if(xe(n))d=t.filter.updateFullNode(e.eventCache.getNode(),i,l),h=Ja(e,d,!0,t.filter.filtersNodes());else{const _=Oe(n);if(_===".priority")d=t.filter.updatePriority(e.eventCache.getNode(),i),h=Ja(e,d,u.isFullyInitialized(),u.isFiltered());else{const y=et(n),b=u.getNode().getImmediateChild(_);let S;if(xe(y))S=i;else{const N=p.getCompleteChild(_);N!=null?a_(y)===".priority"&&N.getChild(D0(y)).isEmpty()?S=N:S=N.updateChild(y,i):S=he.EMPTY_NODE}if(b.equals(S))h=e;else{const N=t.filter.updateChild(u.getNode(),_,S,y,p,l);h=Ja(e,N,u.isFullyInitialized(),t.filter.filtersNodes())}}}return h}function Sb(t,e){return t.eventCache.isCompleteForChild(e)}function kB(t,e,n,i,r,o,l){let u=e;return i.foreach((h,d)=>{const p=ht(n,h);Sb(e,Oe(p))&&(u=ng(t,u,p,d,r,o,l))}),i.foreach((h,d)=>{const p=ht(n,h);Sb(e,Oe(p))||(u=ng(t,u,p,d,r,o,l))}),u}function Ob(t,e,n){return n.foreach((i,r)=>{e=e.updateChild(i,r)}),e}function ig(t,e,n,i,r,o,l,u){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let h=e,d;xe(n)?d=i:d=new Je(null).setTree(n,i);const p=e.serverCache.getNode();return d.children.inorderTraversal((_,y)=>{if(p.hasChild(_)){const b=e.serverCache.getNode().getImmediateChild(_),S=Ob(t,b,y);h=zu(t,h,new ze(_),S,r,o,l,u)}}),d.children.inorderTraversal((_,y)=>{const b=!e.serverCache.isCompleteForChild(_)&&y.value===null;if(!p.hasChild(_)&&!b){const S=e.serverCache.getNode().getImmediateChild(_),N=Ob(t,S,y);h=zu(t,h,new ze(_),N,r,o,l,u)}}),h}function MB(t,e,n,i,r,o,l){if(Gu(r,n)!=null)return e;const u=e.serverCache.isFiltered(),h=e.serverCache;if(i.value!=null){if(xe(n)&&h.isFullyInitialized()||h.isCompleteForPath(n))return zu(t,e,n,h.getNode().getChild(n),r,o,u,l);if(xe(n)){let d=new Je(null);return h.getNode().forEachChild(Po,(p,_)=>{d=d.set(new ze(p),_)}),ig(t,e,n,d,r,o,u,l)}else return e}else{let d=new Je(null);return i.foreach((p,_)=>{const y=ht(n,p);h.isCompleteForPath(y)&&(d=d.set(p,h.getNode().getChild(y)))}),ig(t,e,n,d,r,o,u,l)}}function $B(t,e,n,i,r){const o=e.serverCache,l=W0(e,o.getNode(),o.isFullyInitialized()||xe(n),o.isFiltered());return z0(t,l,n,i,G0,r)}function FB(t,e,n,i,r,o){let l;if(Gu(i,n)!=null)return e;{const u=new v_(i,e,r),h=e.eventCache.getNode();let d;if(xe(n)||Oe(n)===".priority"){let p;if(e.serverCache.isFullyInitialized())p=Ku(i,Us(e));else{const _=e.serverCache.getNode();K(_ instanceof he,"serverChildren would be complete if leaf node"),p=__(i,_)}p=p,d=t.filter.updateFullNode(h,p,o)}else{const p=Oe(n);let _=m_(i,p,e.serverCache);_==null&&e.serverCache.isCompleteForChild(p)&&(_=h.getImmediateChild(p)),_!=null?d=t.filter.updateChild(h,p,_,et(n),u,o):e.eventCache.getNode().hasChild(p)?d=t.filter.updateChild(h,p,he.EMPTY_NODE,et(n),u,o):d=h,d.isEmpty()&&e.serverCache.isFullyInitialized()&&(l=Ku(i,Us(e)),l.isLeafNode()&&(d=t.filter.updateFullNode(d,l,o)))}return l=e.serverCache.isFullyInitialized()||Gu(i,Ue())!=null,Ja(e,d,l,t.filter.filtersNodes())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UB{constructor(e,n){this.query_=e,this.eventRegistrations_=[];const i=this.query_._queryParams,r=new h_(i.getIndex()),o=iB(i);this.processor_=xB(o);const l=n.serverCache,u=n.eventCache,h=r.updateFullNode(he.EMPTY_NODE,l.getNode(),null),d=o.updateFullNode(he.EMPTY_NODE,u.getNode(),null),p=new jr(h,l.isFullyInitialized(),r.filtersNodes()),_=new jr(d,u.isFullyInitialized(),o.filtersNodes());this.viewCache_=Lh(_,p),this.eventGenerator_=new uB(this.query_)}get query(){return this.query_}}function BB(t){return t.viewCache_.serverCache.getNode()}function WB(t){return qu(t.viewCache_)}function HB(t,e){const n=Us(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!xe(e)&&!n.getImmediateChild(Oe(e)).isEmpty())?n.getChild(e):null}function Nb(t){return t.eventRegistrations_.length===0}function VB(t,e){t.eventRegistrations_.push(e)}function Rb(t,e,n){const i=[];if(n){K(e==null,"A cancel should cancel all event registrations.");const r=t.query._path;t.eventRegistrations_.forEach(o=>{const l=o.createCancelEvent(n,r);l&&i.push(l)})}if(e){let r=[];for(let o=0;o<t.eventRegistrations_.length;++o){const l=t.eventRegistrations_[o];if(!l.matches(e))r.push(l);else if(e.hasAnyCallback()){r=r.concat(t.eventRegistrations_.slice(o+1));break}}t.eventRegistrations_=r}else t.eventRegistrations_=[];return i}function xb(t,e,n,i){e.type===li.MERGE&&e.source.queryId!==null&&(K(Us(t.viewCache_),"We should always have a full cache before handling merges"),K(qu(t.viewCache_),"Missing event cache, even though we have a server cache"));const r=t.viewCache_,o=LB(t.processor_,r,e,n,i);return DB(t.processor_,o.viewCache),K(o.viewCache.serverCache.isFullyInitialized()||!r.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=o.viewCache,Y0(t,o.changes,o.viewCache.eventCache.getNode(),null)}function jB(t,e){const n=t.viewCache_.eventCache,i=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(dt,(o,l)=>{i.push(Bo(o,l))}),n.isFullyInitialized()&&i.push(U0(n.getNode())),Y0(t,i,n.getNode(),e)}function Y0(t,e,n,i){const r=i?[i]:t.eventRegistrations_;return hB(t.eventGenerator_,e,n,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Yu;class X0{constructor(){this.views=new Map}}function qB(t){K(!Yu,"__referenceConstructor has already been defined"),Yu=t}function KB(){return K(Yu,"Reference.ts has not been loaded"),Yu}function GB(t){return t.views.size===0}function y_(t,e,n,i){const r=e.source.queryId;if(r!==null){const o=t.views.get(r);return K(o!=null,"SyncTree gave us an op for an invalid query."),xb(o,e,n,i)}else{let o=[];for(const l of t.views.values())o=o.concat(xb(l,e,n,i));return o}}function Q0(t,e,n,i,r){const o=e._queryIdentifier,l=t.views.get(o);if(!l){let u=Ku(n,r?i:null),h=!1;u?h=!0:i instanceof he?(u=__(n,i),h=!1):(u=he.EMPTY_NODE,h=!1);const d=Lh(new jr(u,h,!1),new jr(i,r,!1));return new UB(e,d)}return l}function zB(t,e,n,i,r,o){const l=Q0(t,e,i,r,o);return t.views.has(e._queryIdentifier)||t.views.set(e._queryIdentifier,l),VB(l,n),jB(l,n)}function YB(t,e,n,i){const r=e._queryIdentifier,o=[];let l=[];const u=qr(t);if(r==="default")for(const[h,d]of t.views.entries())l=l.concat(Rb(d,n,i)),Nb(d)&&(t.views.delete(h),d.query._queryParams.loadsAllData()||o.push(d.query));else{const h=t.views.get(r);h&&(l=l.concat(Rb(h,n,i)),Nb(h)&&(t.views.delete(r),h.query._queryParams.loadsAllData()||o.push(h.query)))}return u&&!qr(t)&&o.push(new(KB())(e._repo,e._path)),{removed:o,events:l}}function J0(t){const e=[];for(const n of t.views.values())n.query._queryParams.loadsAllData()||e.push(n);return e}function Fr(t,e){let n=null;for(const i of t.views.values())n=n||HB(i,e);return n}function Z0(t,e){if(e._queryParams.loadsAllData())return kh(t);{const i=e._queryIdentifier;return t.views.get(i)}}function eC(t,e){return Z0(t,e)!=null}function qr(t){return kh(t)!=null}function kh(t){for(const e of t.views.values())if(e.query._queryParams.loadsAllData())return e;return null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Xu;function XB(t){K(!Xu,"__referenceConstructor has already been defined"),Xu=t}function QB(){return K(Xu,"Reference.ts has not been loaded"),Xu}let JB=1;class Db{constructor(e){this.listenProvider_=e,this.syncPointTree_=new Je(null),this.pendingWriteTree_=SB(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function tC(t,e,n,i,r){return gB(t.pendingWriteTree_,e,n,i,r),r?ia(t,new Fs(d_(),e,n)):[]}function ZB(t,e,n,i){_B(t.pendingWriteTree_,e,n,i);const r=Je.fromObject(n);return ia(t,new Wo(d_(),e,r))}function Dr(t,e,n=!1){const i=mB(t.pendingWriteTree_,e);if(vB(t.pendingWriteTree_,e)){let o=new Je(null);return i.snap!=null?o=o.set(Ue(),!0):Ht(i.children,l=>{o=o.set(new ze(l),!0)}),ia(t,new ju(i.path,o,n))}else return[]}function Ul(t,e,n){return ia(t,new Fs(p_(),e,n))}function eW(t,e,n){const i=Je.fromObject(n);return ia(t,new Wo(p_(),e,i))}function tW(t,e){return ia(t,new El(p_(),e))}function nW(t,e,n){const i=b_(t,n);if(i){const r=w_(i),o=r.path,l=r.queryId,u=on(o,e),h=new El(g_(l),u);return T_(t,o,h)}else return[]}function Qu(t,e,n,i,r=!1){const o=e._path,l=t.syncPointTree_.get(o);let u=[];if(l&&(e._queryIdentifier==="default"||eC(l,e))){const h=YB(l,e,n,i);GB(l)&&(t.syncPointTree_=t.syncPointTree_.remove(o));const d=h.removed;if(u=h.events,!r){const p=d.findIndex(y=>y._queryParams.loadsAllData())!==-1,_=t.syncPointTree_.findOnPath(o,(y,b)=>qr(b));if(p&&!_){const y=t.syncPointTree_.subtree(o);if(!y.isEmpty()){const b=sW(y);for(let S=0;S<b.length;++S){const N=b[S],k=N.query,G=sC(t,N);t.listenProvider_.startListening(el(k),bl(t,k),G.hashFn,G.onComplete)}}}!_&&d.length>0&&!i&&(p?t.listenProvider_.stopListening(el(e),null):d.forEach(y=>{const b=t.queryToTagMap.get(Mh(y));t.listenProvider_.stopListening(el(y),b)}))}oW(t,d)}return u}function nC(t,e,n,i){const r=b_(t,i);if(r!=null){const o=w_(r),l=o.path,u=o.queryId,h=on(l,e),d=new Fs(g_(u),h,n);return T_(t,l,d)}else return[]}function iW(t,e,n,i){const r=b_(t,i);if(r){const o=w_(r),l=o.path,u=o.queryId,h=on(l,e),d=Je.fromObject(n),p=new Wo(g_(u),h,d);return T_(t,l,p)}else return[]}function rg(t,e,n,i=!1){const r=e._path;let o=null,l=!1;t.syncPointTree_.foreachOnPath(r,(y,b)=>{const S=on(y,r);o=o||Fr(b,S),l=l||qr(b)});let u=t.syncPointTree_.get(r);u?(l=l||qr(u),o=o||Fr(u,Ue())):(u=new X0,t.syncPointTree_=t.syncPointTree_.set(r,u));let h;o!=null?h=!0:(h=!1,o=he.EMPTY_NODE,t.syncPointTree_.subtree(r).foreachChild((b,S)=>{const N=Fr(S,Ue());N&&(o=o.updateImmediateChild(b,N))}));const d=eC(u,e);if(!d&&!e._queryParams.loadsAllData()){const y=Mh(e);K(!t.queryToTagMap.has(y),"View does not exist, but we have a tag");const b=aW();t.queryToTagMap.set(y,b),t.tagToQueryMap.set(b,y)}const p=Ph(t.pendingWriteTree_,r);let _=zB(u,e,n,p,o,h);if(!d&&!l&&!i){const y=Z0(u,e);_=_.concat(lW(t,e,y))}return _}function E_(t,e,n){const r=t.pendingWriteTree_,o=t.syncPointTree_.findOnPath(e,(l,u)=>{const h=on(l,e),d=Fr(u,h);if(d)return d});return j0(r,e,o,n,!0)}function rW(t,e){const n=e._path;let i=null;t.syncPointTree_.foreachOnPath(n,(d,p)=>{const _=on(d,n);i=i||Fr(p,_)});let r=t.syncPointTree_.get(n);r?i=i||Fr(r,Ue()):(r=new X0,t.syncPointTree_=t.syncPointTree_.set(n,r));const o=i!=null,l=o?new jr(i,!0,!1):null,u=Ph(t.pendingWriteTree_,e._path),h=Q0(r,e,u,o?l.getNode():he.EMPTY_NODE,o);return WB(h)}function ia(t,e){return iC(e,t.syncPointTree_,null,Ph(t.pendingWriteTree_,Ue()))}function iC(t,e,n,i){if(xe(t.path))return rC(t,e,n,i);{const r=e.get(Ue());n==null&&r!=null&&(n=Fr(r,Ue()));let o=[];const l=Oe(t.path),u=t.operationForChild(l),h=e.children.get(l);if(h&&u){const d=n?n.getImmediateChild(l):null,p=q0(i,l);o=o.concat(iC(u,h,d,p))}return r&&(o=o.concat(y_(r,t,i,n))),o}}function rC(t,e,n,i){const r=e.get(Ue());n==null&&r!=null&&(n=Fr(r,Ue()));let o=[];return e.children.inorderTraversal((l,u)=>{const h=n?n.getImmediateChild(l):null,d=q0(i,l),p=t.operationForChild(l);p&&(o=o.concat(rC(p,u,h,d)))}),r&&(o=o.concat(y_(r,t,i,n))),o}function sC(t,e){const n=e.query,i=bl(t,n);return{hashFn:()=>(BB(e)||he.EMPTY_NODE).hash(),onComplete:r=>{if(r==="ok")return i?nW(t,n._path,i):tW(t,n._path);{const o=tU(r,n);return Qu(t,n,null,o)}}}}function bl(t,e){const n=Mh(e);return t.queryToTagMap.get(n)}function Mh(t){return t._path.toString()+"$"+t._queryIdentifier}function b_(t,e){return t.tagToQueryMap.get(e)}function w_(t){const e=t.indexOf("$");return K(e!==-1&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new ze(t.substr(0,e))}}function T_(t,e,n){const i=t.syncPointTree_.get(e);K(i,"Missing sync point for query tag that we're tracking");const r=Ph(t.pendingWriteTree_,e);return y_(i,n,r,null)}function sW(t){return t.fold((e,n,i)=>{if(n&&qr(n))return[kh(n)];{let r=[];return n&&(r=J0(n)),Ht(i,(o,l)=>{r=r.concat(l)}),r}})}function el(t){return t._queryParams.loadsAllData()&&!t._queryParams.isDefault()?new(QB())(t._repo,t._path):t}function oW(t,e){for(let n=0;n<e.length;++n){const i=e[n];if(!i._queryParams.loadsAllData()){const r=Mh(i),o=t.queryToTagMap.get(r);t.queryToTagMap.delete(r),t.tagToQueryMap.delete(o)}}}function aW(){return JB++}function lW(t,e,n){const i=e._path,r=bl(t,e),o=sC(t,n),l=t.listenProvider_.startListening(el(e),r,o.hashFn,o.onComplete),u=t.syncPointTree_.subtree(i);if(r)K(!qr(u.value),"If we're adding a query, it shouldn't be shadowed");else{const h=u.fold((d,p,_)=>{if(!xe(d)&&p&&qr(p))return[kh(p).query];{let y=[];return p&&(y=y.concat(J0(p).map(b=>b.query))),Ht(_,(b,S)=>{y=y.concat(S)}),y}});for(let d=0;d<h.length;++d){const p=h[d];t.listenProvider_.stopListening(el(p),bl(t,p))}}return l}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C_{constructor(e){this.node_=e}getImmediateChild(e){const n=this.node_.getImmediateChild(e);return new C_(n)}node(){return this.node_}}class I_{constructor(e,n){this.syncTree_=e,this.path_=n}getImmediateChild(e){const n=ht(this.path_,e);return new I_(this.syncTree_,n)}node(){return E_(this.syncTree_,this.path_)}}const cW=function(t){return t=t||{},t.timestamp=t.timestamp||new Date().getTime(),t},Lb=function(t,e,n){if(!t||typeof t!="object")return t;if(K(".sv"in t,"Unexpected leaf node or priority contents"),typeof t[".sv"]=="string")return uW(t[".sv"],e,n);if(typeof t[".sv"]=="object")return hW(t[".sv"],e);K(!1,"Unexpected server value: "+JSON.stringify(t,null,2))},uW=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:K(!1,"Unexpected server value: "+t)}},hW=function(t,e,n){t.hasOwnProperty("increment")||K(!1,"Unexpected server value: "+JSON.stringify(t,null,2));const i=t.increment;typeof i!="number"&&K(!1,"Unexpected increment value: "+i);const r=e.node();if(K(r!==null&&typeof r<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!r.isLeafNode())return i;const l=r.getValue();return typeof l!="number"?i:l+i},oC=function(t,e,n,i){return A_(e,new I_(n,t),i)},aC=function(t,e,n){return A_(t,new C_(e),n)};function A_(t,e,n){const i=t.getPriority().val(),r=Lb(i,e.getImmediateChild(".priority"),n);let o;if(t.isLeafNode()){const l=t,u=Lb(l.getValue(),e,n);return u!==l.getValue()||r!==l.getPriority().val()?new Nt(u,wt(r)):t}else{const l=t;return o=l,r!==l.getPriority().val()&&(o=o.updatePriority(new Nt(r))),l.forEachChild(dt,(u,h)=>{const d=A_(h,e.getImmediateChild(u),n);d!==h&&(o=o.updateImmediateChild(u,d))}),o}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S_{constructor(e="",n=null,i={children:{},childCount:0}){this.name=e,this.parent=n,this.node=i}}function O_(t,e){let n=e instanceof ze?e:new ze(e),i=t,r=Oe(n);for(;r!==null;){const o=Fo(i.node.children,r)||{children:{},childCount:0};i=new S_(r,i,o),n=et(n),r=Oe(n)}return i}function ra(t){return t.node.value}function lC(t,e){t.node.value=e,sg(t)}function cC(t){return t.node.childCount>0}function fW(t){return ra(t)===void 0&&!cC(t)}function $h(t,e){Ht(t.node.children,(n,i)=>{e(new S_(n,t,i))})}function uC(t,e,n,i){n&&!i&&e(t),$h(t,r=>{uC(r,e,!0,i)}),n&&i&&e(t)}function dW(t,e,n){let i=n?t:t.parent;for(;i!==null;){if(e(i))return!0;i=i.parent}return!1}function Bl(t){return new ze(t.parent===null?t.name:Bl(t.parent)+"/"+t.name)}function sg(t){t.parent!==null&&pW(t.parent,t.name,t)}function pW(t,e,n){const i=fW(n),r=Fi(t.node.children,e);i&&r?(delete t.node.children[e],t.node.childCount--,sg(t)):!i&&!r&&(t.node.children[e]=n.node,t.node.childCount++,sg(t))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gW=/[\[\].#$\/\u0000-\u001F\u007F]/,_W=/[\[\].#$\u0000-\u001F\u007F]/,Xd=10*1024*1024,N_=function(t){return typeof t=="string"&&t.length!==0&&!gW.test(t)},hC=function(t){return typeof t=="string"&&t.length!==0&&!_W.test(t)},mW=function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),hC(t)},vW=function(t){return t===null||typeof t=="string"||typeof t=="number"&&!n_(t)||t&&typeof t=="object"&&Fi(t,".sv")},yW=function(t,e,n,i){i&&e===void 0||Fh(Rh(t,"value"),e,n)},Fh=function(t,e,n){const i=n instanceof ze?new kU(n,t):n;if(e===void 0)throw new Error(t+"contains undefined "+gs(i));if(typeof e=="function")throw new Error(t+"contains a function "+gs(i)+" with contents = "+e.toString());if(n_(e))throw new Error(t+"contains "+e.toString()+" "+gs(i));if(typeof e=="string"&&e.length>Xd/3&&xh(e)>Xd)throw new Error(t+"contains a string greater than "+Xd+" utf8 bytes "+gs(i)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let r=!1,o=!1;if(Ht(e,(l,u)=>{if(l===".value")r=!0;else if(l!==".priority"&&l!==".sv"&&(o=!0,!N_(l)))throw new Error(t+" contains an invalid key ("+l+") "+gs(i)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);MU(i,l),Fh(t,u,i),$U(i)}),r&&o)throw new Error(t+' contains ".value" child '+gs(i)+" in addition to actual children.")}},EW=function(t,e){let n,i;for(n=0;n<e.length;n++){i=e[n];const o=_l(i);for(let l=0;l<o.length;l++)if(!(o[l]===".priority"&&l===o.length-1)){if(!N_(o[l]))throw new Error(t+"contains an invalid key ("+o[l]+") in path "+i.toString()+`. Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`)}}e.sort(PU);let r=null;for(n=0;n<e.length;n++){if(i=e[n],r!==null&&jn(r,i))throw new Error(t+"contains a path "+r.toString()+" that is ancestor of another path "+i.toString());r=i}},bW=function(t,e,n,i){if(i&&e===void 0)return;const r=Rh(t,"values");if(!(e&&typeof e=="object")||Array.isArray(e))throw new Error(r+" must be an object containing the children to replace.");const o=[];Ht(e,(l,u)=>{const h=new ze(l);if(Fh(r,u,ht(n,h)),a_(h)===".priority"&&!vW(u))throw new Error(r+"contains an invalid value for '"+h.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");o.push(h)}),EW(r,o)},fC=function(t,e,n,i){if(!(i&&n===void 0)&&!hC(n))throw new Error(Rh(t,e)+'was an invalid path = "'+n+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},wW=function(t,e,n,i){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),fC(t,e,n,i)},dC=function(t,e){if(Oe(e)===".info")throw new Error(t+" failed = Can't modify data under /.info/")},TW=function(t,e){const n=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!N_(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!mW(n))throw new Error(Rh(t,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CW{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function Uh(t,e){let n=null;for(let i=0;i<e.length;i++){const r=e[i],o=r.getPath();n!==null&&!l_(o,n.path)&&(t.eventLists_.push(n),n=null),n===null&&(n={events:[],path:o}),n.events.push(r)}n&&t.eventLists_.push(n)}function pC(t,e,n){Uh(t,n),gC(t,i=>l_(i,e))}function zn(t,e,n){Uh(t,n),gC(t,i=>jn(i,e)||jn(e,i))}function gC(t,e){t.recursionDepth_++;let n=!0;for(let i=0;i<t.eventLists_.length;i++){const r=t.eventLists_[i];if(r){const o=r.path;e(o)?(IW(t.eventLists_[i]),t.eventLists_[i]=null):n=!1}}n&&(t.eventLists_=[]),t.recursionDepth_--}function IW(t){for(let e=0;e<t.events.length;e++){const n=t.events[e];if(n!==null){t.events[e]=null;const i=n.getEventRunner();Rs&&Ut("event: "+n.toString()),na(i)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AW="repo_interrupt",SW=25;class OW{constructor(e,n,i,r){this.repoInfo_=e,this.forceRestClient_=n,this.authTokenProvider_=i,this.appCheckProvider_=r,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new CW,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Vu(),this.transactionQueueTree_=new S_,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function NW(t,e,n){if(t.stats_=s_(t.repoInfo_),t.forceRestClient_||sU())t.server_=new Hu(t.repoInfo_,(i,r,o,l)=>{Pb(t,i,r,o,l)},t.authTokenProvider_,t.appCheckProvider_),setTimeout(()=>kb(t,!0),0);else{if(typeof n<"u"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{Tt(n)}catch(i){throw new Error("Invalid authOverride provided: "+i)}}t.persistentConnection_=new rr(t.repoInfo_,e,(i,r,o,l)=>{Pb(t,i,r,o,l)},i=>{kb(t,i)},i=>{xW(t,i)},t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}t.authTokenProvider_.addTokenChangeListener(i=>{t.server_.refreshAuthToken(i)}),t.appCheckProvider_.addTokenChangeListener(i=>{t.server_.refreshAppCheckToken(i.token)}),t.statsReporter_=uU(t.repoInfo_,()=>new cB(t.stats_,t.server_)),t.infoData_=new rB,t.infoSyncTree_=new Db({startListening:(i,r,o,l)=>{let u=[];const h=t.infoData_.getNode(i._path);return h.isEmpty()||(u=Ul(t.infoSyncTree_,i._path,h),setTimeout(()=>{l("ok")},0)),u},stopListening:()=>{}}),R_(t,"connected",!1),t.serverSyncTree_=new Db({startListening:(i,r,o,l)=>(t.server_.listen(i,o,r,(u,h)=>{const d=l(u,h);zn(t.eventQueue_,i._path,d)}),[]),stopListening:(i,r)=>{t.server_.unlisten(i,r)}})}function RW(t){const n=t.infoData_.getNode(new ze(".info/serverTimeOffset")).val()||0;return new Date().getTime()+n}function Bh(t){return cW({timestamp:RW(t)})}function Pb(t,e,n,i,r){t.dataUpdateCount++;const o=new ze(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;let l=[];if(r)if(i){const h=Pu(n,d=>wt(d));l=iW(t.serverSyncTree_,o,h,r)}else{const h=wt(n);l=nC(t.serverSyncTree_,o,h,r)}else if(i){const h=Pu(n,d=>wt(d));l=eW(t.serverSyncTree_,o,h)}else{const h=wt(n);l=Ul(t.serverSyncTree_,o,h)}let u=o;l.length>0&&(u=Vo(t,o)),zn(t.eventQueue_,u,l)}function kb(t,e){R_(t,"connected",e),e===!1&&kW(t)}function xW(t,e){Ht(e,(n,i)=>{R_(t,n,i)})}function R_(t,e,n){const i=new ze("/.info/"+e),r=wt(n);t.infoData_.updateSnapshot(i,r);const o=Ul(t.infoSyncTree_,i,r);zn(t.eventQueue_,i,o)}function x_(t){return t.nextWriteId_++}function DW(t,e,n){const i=rW(t.serverSyncTree_,e);return i!=null?Promise.resolve(i):t.server_.get(e).then(r=>{const o=wt(r).withIndex(e._queryParams.getIndex());rg(t.serverSyncTree_,e,n,!0);let l;if(e._queryParams.loadsAllData())l=Ul(t.serverSyncTree_,e._path,o);else{const u=bl(t.serverSyncTree_,e);l=nC(t.serverSyncTree_,e._path,o,u)}return zn(t.eventQueue_,e._path,l),Qu(t.serverSyncTree_,e,n,null,!0),o},r=>(Wl(t,"get for query "+Tt(e)+" failed: "+r),Promise.reject(new Error(r))))}function LW(t,e,n,i,r){Wl(t,"set",{path:e.toString(),value:n,priority:i});const o=Bh(t),l=wt(n,i),u=E_(t.serverSyncTree_,e),h=aC(l,u,o),d=x_(t),p=tC(t.serverSyncTree_,e,h,d,!0);Uh(t.eventQueue_,p),t.server_.put(e.toString(),l.val(!0),(y,b)=>{const S=y==="ok";S||ln("set at "+e+" failed: "+y);const N=Dr(t.serverSyncTree_,d,!S);zn(t.eventQueue_,e,N),og(t,r,y,b)});const _=L_(t,e);Vo(t,_),zn(t.eventQueue_,_,[])}function PW(t,e,n,i){Wl(t,"update",{path:e.toString(),value:n});let r=!0;const o=Bh(t),l={};if(Ht(n,(u,h)=>{r=!1,l[u]=oC(ht(e,u),wt(h),t.serverSyncTree_,o)}),r)Ut("update() called with empty data.  Don't do anything."),og(t,i,"ok",void 0);else{const u=x_(t),h=ZB(t.serverSyncTree_,e,l,u);Uh(t.eventQueue_,h),t.server_.merge(e.toString(),n,(d,p)=>{const _=d==="ok";_||ln("update at "+e+" failed: "+d);const y=Dr(t.serverSyncTree_,u,!_),b=y.length>0?Vo(t,e):e;zn(t.eventQueue_,b,y),og(t,i,d,p)}),Ht(n,d=>{const p=L_(t,ht(e,d));Vo(t,p)}),zn(t.eventQueue_,e,[])}}function kW(t){Wl(t,"onDisconnectEvents");const e=Bh(t),n=Vu();Jp(t.onDisconnect_,Ue(),(r,o)=>{const l=oC(r,o,t.serverSyncTree_,e);B0(n,r,l)});let i=[];Jp(n,Ue(),(r,o)=>{i=i.concat(Ul(t.serverSyncTree_,r,o));const l=L_(t,r);Vo(t,l)}),t.onDisconnect_=Vu(),zn(t.eventQueue_,Ue(),i)}function MW(t,e,n){let i;Oe(e._path)===".info"?i=rg(t.infoSyncTree_,e,n):i=rg(t.serverSyncTree_,e,n),pC(t.eventQueue_,e._path,i)}function Mb(t,e,n){let i;Oe(e._path)===".info"?i=Qu(t.infoSyncTree_,e,n):i=Qu(t.serverSyncTree_,e,n),pC(t.eventQueue_,e._path,i)}function $W(t){t.persistentConnection_&&t.persistentConnection_.interrupt(AW)}function Wl(t,...e){let n="";t.persistentConnection_&&(n=t.persistentConnection_.id+":"),Ut(n,...e)}function og(t,e,n,i){e&&na(()=>{if(n==="ok")e(null);else{const r=(n||"error").toUpperCase();let o=r;i&&(o+=": "+i);const l=new Error(o);l.code=r,e(l)}})}function _C(t,e,n){return E_(t.serverSyncTree_,e,n)||he.EMPTY_NODE}function D_(t,e=t.transactionQueueTree_){if(e||Wh(t,e),ra(e)){const n=vC(t,e);K(n.length>0,"Sending zero length transaction queue"),n.every(r=>r.status===0)&&FW(t,Bl(e),n)}else cC(e)&&$h(e,n=>{D_(t,n)})}function FW(t,e,n){const i=n.map(d=>d.currentWriteId),r=_C(t,e,i);let o=r;const l=r.hash();for(let d=0;d<n.length;d++){const p=n[d];K(p.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),p.status=1,p.retryCount++;const _=on(e,p.path);o=o.updateChild(_,p.currentOutputSnapshotRaw)}const u=o.val(!0),h=e;t.server_.put(h.toString(),u,d=>{Wl(t,"transaction put response",{path:h.toString(),status:d});let p=[];if(d==="ok"){const _=[];for(let y=0;y<n.length;y++)n[y].status=2,p=p.concat(Dr(t.serverSyncTree_,n[y].currentWriteId)),n[y].onComplete&&_.push(()=>n[y].onComplete(null,!0,n[y].currentOutputSnapshotResolved)),n[y].unwatcher();Wh(t,O_(t.transactionQueueTree_,e)),D_(t,t.transactionQueueTree_),zn(t.eventQueue_,e,p);for(let y=0;y<_.length;y++)na(_[y])}else{if(d==="datastale")for(let _=0;_<n.length;_++)n[_].status===3?n[_].status=4:n[_].status=0;else{ln("transaction at "+h.toString()+" failed: "+d);for(let _=0;_<n.length;_++)n[_].status=4,n[_].abortReason=d}Vo(t,e)}},l)}function Vo(t,e){const n=mC(t,e),i=Bl(n),r=vC(t,n);return UW(t,r,i),i}function UW(t,e,n){if(e.length===0)return;const i=[];let r=[];const l=e.filter(u=>u.status===0).map(u=>u.currentWriteId);for(let u=0;u<e.length;u++){const h=e[u],d=on(n,h.path);let p=!1,_;if(K(d!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),h.status===4)p=!0,_=h.abortReason,r=r.concat(Dr(t.serverSyncTree_,h.currentWriteId,!0));else if(h.status===0)if(h.retryCount>=SW)p=!0,_="maxretry",r=r.concat(Dr(t.serverSyncTree_,h.currentWriteId,!0));else{const y=_C(t,h.path,l);h.currentInputSnapshot=y;const b=e[u].update(y.val());if(b!==void 0){Fh("transaction failed: Data returned ",b,h.path);let S=wt(b);typeof b=="object"&&b!=null&&Fi(b,".priority")||(S=S.updatePriority(y.getPriority()));const k=h.currentWriteId,G=Bh(t),oe=aC(S,y,G);h.currentOutputSnapshotRaw=S,h.currentOutputSnapshotResolved=oe,h.currentWriteId=x_(t),l.splice(l.indexOf(k),1),r=r.concat(tC(t.serverSyncTree_,h.path,oe,h.currentWriteId,h.applyLocally)),r=r.concat(Dr(t.serverSyncTree_,k,!0))}else p=!0,_="nodata",r=r.concat(Dr(t.serverSyncTree_,h.currentWriteId,!0))}zn(t.eventQueue_,n,r),r=[],p&&(e[u].status=2,function(y){setTimeout(y,Math.floor(0))}(e[u].unwatcher),e[u].onComplete&&(_==="nodata"?i.push(()=>e[u].onComplete(null,!1,e[u].currentInputSnapshot)):i.push(()=>e[u].onComplete(new Error(_),!1,null))))}Wh(t,t.transactionQueueTree_);for(let u=0;u<i.length;u++)na(i[u]);D_(t,t.transactionQueueTree_)}function mC(t,e){let n,i=t.transactionQueueTree_;for(n=Oe(e);n!==null&&ra(i)===void 0;)i=O_(i,n),e=et(e),n=Oe(e);return i}function vC(t,e){const n=[];return yC(t,e,n),n.sort((i,r)=>i.order-r.order),n}function yC(t,e,n){const i=ra(e);if(i)for(let r=0;r<i.length;r++)n.push(i[r]);$h(e,r=>{yC(t,r,n)})}function Wh(t,e){const n=ra(e);if(n){let i=0;for(let r=0;r<n.length;r++)n[r].status!==2&&(n[i]=n[r],i++);n.length=i,lC(e,n.length>0?n:void 0)}$h(e,i=>{Wh(t,i)})}function L_(t,e){const n=Bl(mC(t,e)),i=O_(t.transactionQueueTree_,e);return dW(i,r=>{Qd(t,r)}),Qd(t,i),uC(i,r=>{Qd(t,r)}),n}function Qd(t,e){const n=ra(e);if(n){const i=[];let r=[],o=-1;for(let l=0;l<n.length;l++)n[l].status===3||(n[l].status===1?(K(o===l-1,"All SENT items should be at beginning of queue."),o=l,n[l].status=3,n[l].abortReason="set"):(K(n[l].status===0,"Unexpected transaction status in abort"),n[l].unwatcher(),r=r.concat(Dr(t.serverSyncTree_,n[l].currentWriteId,!0)),n[l].onComplete&&i.push(n[l].onComplete.bind(null,new Error("set"),!1,null))));o===-1?lC(e,void 0):n.length=o+1,zn(t.eventQueue_,Bl(e),r);for(let l=0;l<i.length;l++)na(i[l])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BW(t){let e="";const n=t.split("/");for(let i=0;i<n.length;i++)if(n[i].length>0){let r=n[i];try{r=decodeURIComponent(r.replace(/\+/g," "))}catch{}e+="/"+r}return e}function WW(t){const e={};t.charAt(0)==="?"&&(t=t.substring(1));for(const n of t.split("&")){if(n.length===0)continue;const i=n.split("=");i.length===2?e[decodeURIComponent(i[0])]=decodeURIComponent(i[1]):ln(`Invalid query segment '${n}' in query '${t}'`)}return e}const $b=function(t,e){const n=HW(t),i=n.namespace;n.domain==="firebase.com"&&cr(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!i||i==="undefined")&&n.domain!=="localhost"&&cr("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||XF();const r=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new T0(n.host,n.secure,i,r,e,"",i!==n.subdomain),path:new ze(n.pathString)}},HW=function(t){let e="",n="",i="",r="",o="",l=!0,u="https",h=443;if(typeof t=="string"){let d=t.indexOf("//");d>=0&&(u=t.substring(0,d-1),t=t.substring(d+2));let p=t.indexOf("/");p===-1&&(p=t.length);let _=t.indexOf("?");_===-1&&(_=t.length),e=t.substring(0,Math.min(p,_)),p<_&&(r=BW(t.substring(p,_)));const y=WW(t.substring(Math.min(t.length,_)));d=e.indexOf(":"),d>=0?(l=u==="https"||u==="wss",h=parseInt(e.substring(d+1),10)):d=e.length;const b=e.slice(0,d);if(b.toLowerCase()==="localhost")n="localhost";else if(b.split(".").length<=2)n=b;else{const S=e.indexOf(".");i=e.substring(0,S).toLowerCase(),n=e.substring(S+1),o=i}"ns"in y&&(o=y.ns)}return{host:e,port:h,domain:n,subdomain:i,secure:l,scheme:u,pathString:r,namespace:o}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EC{constructor(e,n,i,r){this.eventType=e,this.eventRegistration=n,this.snapshot=i,this.prevName=r}getPath(){const e=this.snapshot.ref;return this.eventType==="value"?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+Tt(this.snapshot.exportVal())}}class bC{constructor(e,n,i){this.eventRegistration=e,this.error=n,this.path=i}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wC{constructor(e,n){this.snapshotCallback=e,this.cancelCallback=n}onValue(e,n){this.snapshotCallback.call(null,e,n)}onCancel(e){return K(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P_{constructor(e,n,i,r){this._repo=e,this._path=n,this._queryParams=i,this._orderByCalled=r}get key(){return xe(this._path)?null:a_(this._path)}get ref(){return new Bi(this._repo,this._path)}get _queryIdentifier(){const e=wb(this._queryParams),n=i_(e);return n==="{}"?"default":n}get _queryObject(){return wb(this._queryParams)}isEqual(e){if(e=Ui(e),!(e instanceof P_))return!1;const n=this._repo===e._repo,i=l_(this._path,e._path),r=this._queryIdentifier===e._queryIdentifier;return n&&i&&r}toJSON(){return this.toString()}toString(){return this._repo.toString()+LU(this._path)}}class Bi extends P_{constructor(e,n){super(e,n,new f_,!1)}get parent(){const e=D0(this._path);return e===null?null:new Bi(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}}class jo{constructor(e,n,i){this._node=e,this.ref=n,this._index=i}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const n=new ze(e),i=Ct(this.ref,e);return new jo(this._node.getChild(n),i,dt)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(i,r)=>e(new jo(r,Ct(this.ref,i),dt)))}hasChild(e){const n=new ze(e);return!this._node.getChild(n).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function oi(t,e){return t=Ui(t),t._checkNotDeleted("ref"),e!==void 0?Ct(t._root,e):t._root}function Ct(t,e){return t=Ui(t),Oe(t._path)===null?wW("child","path",e,!1):fC("child","path",e,!1),new Bi(t._repo,ht(t._path,e))}function xs(t){return dC("remove",t._path),Kr(t,null)}function Kr(t,e){t=Ui(t),dC("set",t._path),yW("set",e,t._path,!1);const n=new ks;return LW(t._repo,t._path,e,null,n.wrapCallback(()=>{})),n.promise}function Eu(t,e){bW("update",e,t._path,!1);const n=new ks;return PW(t._repo,t._path,e,n.wrapCallback(()=>{})),n.promise}function TC(t){t=Ui(t);const e=new wC(()=>{}),n=new Hh(e);return DW(t._repo,t,n).then(i=>new jo(i,new Bi(t._repo,t._path),t._queryParams.getIndex()))}class Hh{constructor(e){this.callbackContext=e}respondsTo(e){return e==="value"}createEvent(e,n){const i=n._queryParams.getIndex();return new EC("value",this,new jo(e.snapshotNode,new Bi(n._repo,n._path),i))}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,n){return this.callbackContext.hasCancelCallback?new bC(this,e,n):null}matches(e){return e instanceof Hh?!e.callbackContext||!this.callbackContext?!0:e.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}}class k_{constructor(e,n){this.eventType=e,this.callbackContext=n}respondsTo(e){let n=e==="children_added"?"child_added":e;return n=n==="children_removed"?"child_removed":n,this.eventType===n}createCancelEvent(e,n){return this.callbackContext.hasCancelCallback?new bC(this,e,n):null}createEvent(e,n){K(e.childName!=null,"Child events should have a childName.");const i=Ct(new Bi(n._repo,n._path),e.childName),r=n._queryParams.getIndex();return new EC(e.type,this,new jo(e.snapshotNode,i,r),e.prevName)}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof k_?this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext)):!1}hasAnyCallback(){return!!this.callbackContext}}function VW(t,e,n,i,r){let o;if(typeof i=="object"&&(o=void 0,r=i),typeof i=="function"&&(o=i),r&&r.onlyOnce){const h=n,d=(p,_)=>{Mb(t._repo,t,u),h(p,_)};d.userCallback=n.userCallback,d.context=n.context,n=d}const l=new wC(n,o||void 0),u=e==="value"?new Hh(l):new k_(e,l);return MW(t._repo,t,u),()=>Mb(t._repo,t,u)}function jW(t,e,n,i){return VW(t,"value",e,n,i)}qB(Bi);XB(Bi);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qW="FIREBASE_DATABASE_EMULATOR_HOST",ag={};let KW=!1;function GW(t,e,n,i){t.repoInfo_=new T0(`${e}:${n}`,!1,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams),i&&(t.authTokenProvider_=i)}function zW(t,e,n,i,r){let o=i||t.options.databaseURL;o===void 0&&(t.options.projectId||cr("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Ut("Using default host for project ",t.options.projectId),o=`${t.options.projectId}-default-rtdb.firebaseio.com`);let l=$b(o,r),u=l.repoInfo,h,d;typeof process<"u"&&process.env&&(d=process.env[qW]),d?(h=!0,o=`http://${d}?ns=${u.namespace}`,l=$b(o,r),u=l.repoInfo):h=!l.repoInfo.secure;const p=r&&h?new Lo(Lo.OWNER):new aU(t.name,t.options,e);TW("Invalid Firebase Database URL",l),xe(l.path)||cr("Database URL must point to the root of a Firebase Database (not including a child path).");const _=XW(u,t,p,new oU(t.name,n));return new QW(_,t)}function YW(t,e){const n=ag[e];(!n||n[t.key]!==t)&&cr(`Database ${e}(${t.repoInfo_}) has already been deleted.`),$W(t),delete n[t.key]}function XW(t,e,n,i){let r=ag[e.name];r||(r={},ag[e.name]=r);let o=r[t.toURLString()];return o&&cr("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),o=new OW(t,KW,n,i),r[t.toURLString()]=o,o}class QW{constructor(e,n){this._repoInternal=e,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(NW(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Bi(this._repo,Ue())),this._rootInternal}_delete(){return this._rootInternal!==null&&(YW(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&cr("Cannot call "+e+" on a deleted database.")}}function CC(t=O$(),e){const n=I$(t,"database").getImmediate({identifier:e}),i=mM("database");return i&&JW(n,...i),n}function JW(t,e,n,i={}){t=Ui(t),t._checkNotDeleted("useEmulator"),t._instanceStarted&&cr("Cannot call useEmulator() after instance has already been initialized.");const r=t._repoInternal;let o;if(r.repoInfo_.nodeAdmin)i.mockUserToken&&cr('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),o=new Lo(Lo.OWNER);else if(i.mockUserToken){const l=typeof i.mockUserToken=="string"?i.mockUserToken:EM(i.mockUserToken,t.app.options.projectId);o=new Lo(l)}GW(r,e,n,o)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZW(t){qF(Pl),ki(new fi("database",(e,{instanceIdentifier:n})=>{const i=e.getProvider("app").getImmediate(),r=e.getProvider("auth-internal"),o=e.getProvider("app-check-internal");return zW(i,r,o,n)},"PUBLIC").setMultipleInstances(!0)),Nn(sb,ob,t),Nn(sb,ob,"esm2017")}rr.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)};rr.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};ZW();var eH=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},re,M_=M_||{},_e=eH||self;function Ju(){}function Vh(t){var e=typeof t;return e=e!="object"?e:t?Array.isArray(t)?"array":e:"null",e=="array"||e=="object"&&typeof t.length=="number"}function Hl(t){var e=typeof t;return e=="object"&&t!=null||e=="function"}function tH(t){return Object.prototype.hasOwnProperty.call(t,Jd)&&t[Jd]||(t[Jd]=++nH)}var Jd="closure_uid_"+(1e9*Math.random()>>>0),nH=0;function iH(t,e,n){return t.call.apply(t.bind,arguments)}function rH(t,e,n){if(!t)throw Error();if(2<arguments.length){var i=Array.prototype.slice.call(arguments,2);return function(){var r=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(r,i),t.apply(e,r)}}return function(){return t.apply(e,arguments)}}function Qt(t,e,n){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?Qt=iH:Qt=rH,Qt.apply(null,arguments)}function nu(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var i=n.slice();return i.push.apply(i,arguments),t.apply(this,i)}}function Vt(t,e){function n(){}n.prototype=e.prototype,t.X=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.Wb=function(i,r,o){for(var l=Array(arguments.length-2),u=2;u<arguments.length;u++)l[u-2]=arguments[u];return e.prototype[r].apply(i,l)}}function Xr(){this.s=this.s,this.o=this.o}var sH=0;Xr.prototype.s=!1;Xr.prototype.na=function(){!this.s&&(this.s=!0,this.M(),sH!=0)&&tH(this)};Xr.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const IC=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if(typeof t=="string")return typeof e!="string"||e.length!=1?-1:t.indexOf(e,0);for(let n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1};function $_(t){const e=t.length;if(0<e){const n=Array(e);for(let i=0;i<e;i++)n[i]=t[i];return n}return[]}function Fb(t,e){for(let n=1;n<arguments.length;n++){const i=arguments[n];if(Vh(i)){const r=t.length||0,o=i.length||0;t.length=r+o;for(let l=0;l<o;l++)t[r+l]=i[l]}else t.push(i)}}function Jt(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}Jt.prototype.h=function(){this.defaultPrevented=!0};var oH=function(){if(!_e.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{_e.addEventListener("test",Ju,e),_e.removeEventListener("test",Ju,e)}catch{}return t}();function Zu(t){return/^[\s\xa0]*$/.test(t)}var Ub=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function Zd(t,e){return t<e?-1:t>e?1:0}function jh(){var t=_e.navigator;return t&&(t=t.userAgent)?t:""}function Ii(t){return jh().indexOf(t)!=-1}function F_(t){return F_[" "](t),t}F_[" "]=Ju;function aH(t){var e=uH;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=t(9)}var lH=Ii("Opera"),wl=Ii("Trident")||Ii("MSIE"),AC=Ii("Edge"),lg=AC||wl,SC=Ii("Gecko")&&!(jh().toLowerCase().indexOf("webkit")!=-1&&!Ii("Edge"))&&!(Ii("Trident")||Ii("MSIE"))&&!Ii("Edge"),cH=jh().toLowerCase().indexOf("webkit")!=-1&&!Ii("Edge");function OC(){var t=_e.document;return t?t.documentMode:void 0}var cg;e:{var ep="",tp=function(){var t=jh();if(SC)return/rv:([^\);]+)(\)|;)/.exec(t);if(AC)return/Edge\/([\d\.]+)/.exec(t);if(wl)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t);if(cH)return/WebKit\/(\S+)/.exec(t);if(lH)return/(?:Version)[ \/]?(\S+)/.exec(t)}();if(tp&&(ep=tp?tp[1]:""),wl){var np=OC();if(np!=null&&np>parseFloat(ep)){cg=String(np);break e}}cg=ep}var uH={};function hH(){return aH(function(){let t=0;const e=Ub(String(cg)).split("."),n=Ub("9").split("."),i=Math.max(e.length,n.length);for(let l=0;t==0&&l<i;l++){var r=e[l]||"",o=n[l]||"";do{if(r=/(\d*)(\D*)(.*)/.exec(r)||["","","",""],o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],r[0].length==0&&o[0].length==0)break;t=Zd(r[1].length==0?0:parseInt(r[1],10),o[1].length==0?0:parseInt(o[1],10))||Zd(r[2].length==0,o[2].length==0)||Zd(r[2],o[2]),r=r[3],o=o[3]}while(t==0)}return 0<=t})}_e.document&&wl&&OC();function Tl(t,e){if(Jt.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,i=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(SC){e:{try{F_(e.nodeName);var r=!0;break e}catch{}r=!1}r||(e=null)}}else n=="mouseover"?e=t.fromElement:n=="mouseout"&&(e=t.toElement);this.relatedTarget=e,i?(this.clientX=i.clientX!==void 0?i.clientX:i.pageX,this.clientY=i.clientY!==void 0?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0):(this.clientX=t.clientX!==void 0?t.clientX:t.pageX,this.clientY=t.clientY!==void 0?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType=typeof t.pointerType=="string"?t.pointerType:fH[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&Tl.X.h.call(this)}}Vt(Tl,Jt);var fH={2:"touch",3:"pen",4:"mouse"};Tl.prototype.h=function(){Tl.X.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var Vl="closure_listenable_"+(1e6*Math.random()|0),dH=0;function pH(t,e,n,i,r){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!i,this.ha=r,this.key=++dH,this.ba=this.ea=!1}function qh(t){t.ba=!0,t.listener=null,t.proxy=null,t.src=null,t.ha=null}function U_(t,e,n){for(const i in t)e.call(n,t[i],i,t)}function NC(t){const e={};for(const n in t)e[n]=t[n];return e}const Bb="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function RC(t,e){let n,i;for(let r=1;r<arguments.length;r++){i=arguments[r];for(n in i)t[n]=i[n];for(let o=0;o<Bb.length;o++)n=Bb[o],Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}}function Kh(t){this.src=t,this.g={},this.h=0}Kh.prototype.add=function(t,e,n,i,r){var o=t.toString();t=this.g[o],t||(t=this.g[o]=[],this.h++);var l=hg(t,e,i,r);return-1<l?(e=t[l],n||(e.ea=!1)):(e=new pH(e,this.src,o,!!i,r),e.ea=n,t.push(e)),e};function ug(t,e){var n=e.type;if(n in t.g){var i=t.g[n],r=IC(i,e),o;(o=0<=r)&&Array.prototype.splice.call(i,r,1),o&&(qh(e),t.g[n].length==0&&(delete t.g[n],t.h--))}}function hg(t,e,n,i){for(var r=0;r<t.length;++r){var o=t[r];if(!o.ba&&o.listener==e&&o.capture==!!n&&o.ha==i)return r}return-1}var B_="closure_lm_"+(1e6*Math.random()|0),ip={};function xC(t,e,n,i,r){if(i&&i.once)return LC(t,e,n,i,r);if(Array.isArray(e)){for(var o=0;o<e.length;o++)xC(t,e[o],n,i,r);return null}return n=V_(n),t&&t[Vl]?t.N(e,n,Hl(i)?!!i.capture:!!i,r):DC(t,e,n,!1,i,r)}function DC(t,e,n,i,r,o){if(!e)throw Error("Invalid event type");var l=Hl(r)?!!r.capture:!!r,u=H_(t);if(u||(t[B_]=u=new Kh(t)),n=u.add(e,n,i,l,o),n.proxy)return n;if(i=gH(),n.proxy=i,i.src=t,i.listener=n,t.addEventListener)oH||(r=l),r===void 0&&(r=!1),t.addEventListener(e.toString(),i,r);else if(t.attachEvent)t.attachEvent(kC(e.toString()),i);else if(t.addListener&&t.removeListener)t.addListener(i);else throw Error("addEventListener and attachEvent are unavailable.");return n}function gH(){function t(n){return e.call(t.src,t.listener,n)}const e=_H;return t}function LC(t,e,n,i,r){if(Array.isArray(e)){for(var o=0;o<e.length;o++)LC(t,e[o],n,i,r);return null}return n=V_(n),t&&t[Vl]?t.O(e,n,Hl(i)?!!i.capture:!!i,r):DC(t,e,n,!0,i,r)}function PC(t,e,n,i,r){if(Array.isArray(e))for(var o=0;o<e.length;o++)PC(t,e[o],n,i,r);else i=Hl(i)?!!i.capture:!!i,n=V_(n),t&&t[Vl]?(t=t.i,e=String(e).toString(),e in t.g&&(o=t.g[e],n=hg(o,n,i,r),-1<n&&(qh(o[n]),Array.prototype.splice.call(o,n,1),o.length==0&&(delete t.g[e],t.h--)))):t&&(t=H_(t))&&(e=t.g[e.toString()],t=-1,e&&(t=hg(e,n,i,r)),(n=-1<t?e[t]:null)&&W_(n))}function W_(t){if(typeof t!="number"&&t&&!t.ba){var e=t.src;if(e&&e[Vl])ug(e.i,t);else{var n=t.type,i=t.proxy;e.removeEventListener?e.removeEventListener(n,i,t.capture):e.detachEvent?e.detachEvent(kC(n),i):e.addListener&&e.removeListener&&e.removeListener(i),(n=H_(e))?(ug(n,t),n.h==0&&(n.src=null,e[B_]=null)):qh(t)}}}function kC(t){return t in ip?ip[t]:ip[t]="on"+t}function _H(t,e){if(t.ba)t=!0;else{e=new Tl(e,this);var n=t.listener,i=t.ha||t.src;t.ea&&W_(t),t=n.call(i,e)}return t}function H_(t){return t=t[B_],t instanceof Kh?t:null}var rp="__closure_events_fn_"+(1e9*Math.random()>>>0);function V_(t){return typeof t=="function"?t:(t[rp]||(t[rp]=function(e){return t.handleEvent(e)}),t[rp])}function Lt(){Xr.call(this),this.i=new Kh(this),this.P=this,this.I=null}Vt(Lt,Xr);Lt.prototype[Vl]=!0;Lt.prototype.removeEventListener=function(t,e,n,i){PC(this,t,e,n,i)};function Wt(t,e){var n,i=t.I;if(i)for(n=[];i;i=i.I)n.push(i);if(t=t.P,i=e.type||e,typeof e=="string")e=new Jt(e,t);else if(e instanceof Jt)e.target=e.target||t;else{var r=e;e=new Jt(i,t),RC(e,r)}if(r=!0,n)for(var o=n.length-1;0<=o;o--){var l=e.g=n[o];r=iu(l,i,!0,e)&&r}if(l=e.g=t,r=iu(l,i,!0,e)&&r,r=iu(l,i,!1,e)&&r,n)for(o=0;o<n.length;o++)l=e.g=n[o],r=iu(l,i,!1,e)&&r}Lt.prototype.M=function(){if(Lt.X.M.call(this),this.i){var t=this.i,e;for(e in t.g){for(var n=t.g[e],i=0;i<n.length;i++)qh(n[i]);delete t.g[e],t.h--}}this.I=null};Lt.prototype.N=function(t,e,n,i){return this.i.add(String(t),e,!1,n,i)};Lt.prototype.O=function(t,e,n,i){return this.i.add(String(t),e,!0,n,i)};function iu(t,e,n,i){if(e=t.i.g[String(e)],!e)return!0;e=e.concat();for(var r=!0,o=0;o<e.length;++o){var l=e[o];if(l&&!l.ba&&l.capture==n){var u=l.listener,h=l.ha||l.src;l.ea&&ug(t.i,l),r=u.call(h,i)!==!1&&r}}return r&&!i.defaultPrevented}var j_=_e.JSON.stringify;function mH(){var t=FC;let e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}class vH{constructor(){this.h=this.g=null}add(e,n){const i=MC.get();i.set(e,n),this.h?this.h.next=i:this.g=i,this.h=i}}var MC=new class{constructor(t,e){this.i=t,this.j=e,this.h=0,this.g=null}get(){let t;return 0<this.h?(this.h--,t=this.g,this.g=t.next,t.next=null):t=this.i(),t}}(()=>new yH,t=>t.reset());class yH{constructor(){this.next=this.g=this.h=null}set(e,n){this.h=e,this.g=n,this.next=null}reset(){this.next=this.g=this.h=null}}function EH(t){_e.setTimeout(()=>{throw t},0)}function $C(t,e){fg||bH(),dg||(fg(),dg=!0),FC.add(t,e)}var fg;function bH(){var t=_e.Promise.resolve(void 0);fg=function(){t.then(wH)}}var dg=!1,FC=new vH;function wH(){for(var t;t=mH();){try{t.h.call(t.g)}catch(n){EH(n)}var e=MC;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}dg=!1}function Gh(t,e){Lt.call(this),this.h=t||1,this.g=e||_e,this.j=Qt(this.lb,this),this.l=Date.now()}Vt(Gh,Lt);re=Gh.prototype;re.ca=!1;re.R=null;re.lb=function(){if(this.ca){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.R=this.g.setTimeout(this.j,this.h-t):(this.R&&(this.g.clearTimeout(this.R),this.R=null),Wt(this,"tick"),this.ca&&(q_(this),this.start()))}};re.start=function(){this.ca=!0,this.R||(this.R=this.g.setTimeout(this.j,this.h),this.l=Date.now())};function q_(t){t.ca=!1,t.R&&(t.g.clearTimeout(t.R),t.R=null)}re.M=function(){Gh.X.M.call(this),q_(this),delete this.g};function K_(t,e,n){if(typeof t=="function")n&&(t=Qt(t,n));else if(t&&typeof t.handleEvent=="function")t=Qt(t.handleEvent,t);else throw Error("Invalid listener argument");return 2147483647<Number(e)?-1:_e.setTimeout(t,e||0)}function UC(t){t.g=K_(()=>{t.g=null,t.i&&(t.i=!1,UC(t))},t.j);const e=t.h;t.h=null,t.m.apply(null,e)}class TH extends Xr{constructor(e,n){super(),this.m=e,this.j=n,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:UC(this)}M(){super.M(),this.g&&(_e.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Cl(t){Xr.call(this),this.h=t,this.g={}}Vt(Cl,Xr);var Wb=[];function BC(t,e,n,i){Array.isArray(n)||(n&&(Wb[0]=n.toString()),n=Wb);for(var r=0;r<n.length;r++){var o=xC(e,n[r],i||t.handleEvent,!1,t.h||t);if(!o)break;t.g[o.key]=o}}function WC(t){U_(t.g,function(e,n){this.g.hasOwnProperty(n)&&W_(e)},t),t.g={}}Cl.prototype.M=function(){Cl.X.M.call(this),WC(this)};Cl.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};function zh(){this.g=!0}zh.prototype.Aa=function(){this.g=!1};function CH(t,e,n,i,r,o){t.info(function(){if(t.g)if(o)for(var l="",u=o.split("&"),h=0;h<u.length;h++){var d=u[h].split("=");if(1<d.length){var p=d[0];d=d[1];var _=p.split("_");l=2<=_.length&&_[1]=="type"?l+(p+"="+d+"&"):l+(p+"=redacted&")}}else l=null;else l=o;return"XMLHTTP REQ ("+i+") [attempt "+r+"]: "+e+`
`+n+`
`+l})}function IH(t,e,n,i,r,o,l){t.info(function(){return"XMLHTTP RESP ("+i+") [ attempt "+r+"]: "+e+`
`+n+`
`+o+" "+l})}function Co(t,e,n,i){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+SH(t,n)+(i?" "+i:"")})}function AH(t,e){t.info(function(){return"TIMEOUT: "+e})}zh.prototype.info=function(){};function SH(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n){for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var i=n[t];if(!(2>i.length)){var r=i[1];if(Array.isArray(r)&&!(1>r.length)){var o=r[0];if(o!="noop"&&o!="stop"&&o!="close")for(var l=1;l<r.length;l++)r[l]=""}}}}return j_(n)}catch{return e}}var sa={},Hb=null;function G_(){return Hb=Hb||new Lt}sa.Pa="serverreachability";function HC(t){Jt.call(this,sa.Pa,t)}Vt(HC,Jt);function Il(t){const e=G_();Wt(e,new HC(e))}sa.STAT_EVENT="statevent";function VC(t,e){Jt.call(this,sa.STAT_EVENT,t),this.stat=e}Vt(VC,Jt);function an(t){const e=G_();Wt(e,new VC(e,t))}sa.Qa="timingevent";function jC(t,e){Jt.call(this,sa.Qa,t),this.size=e}Vt(jC,Jt);function jl(t,e){if(typeof t!="function")throw Error("Fn must not be null and must be a function");return _e.setTimeout(function(){t()},e)}var z_={NO_ERROR:0,mb:1,zb:2,yb:3,tb:4,xb:5,Ab:6,Ma:7,TIMEOUT:8,Db:9},OH={rb:"complete",Nb:"success",Na:"error",Ma:"abort",Fb:"ready",Gb:"readystatechange",TIMEOUT:"timeout",Bb:"incrementaldata",Eb:"progress",ub:"downloadprogress",Vb:"uploadprogress"};function Y_(){}Y_.prototype.h=null;function Vb(t){return t.h||(t.h=t.i())}function NH(){}var ql={OPEN:"a",qb:"b",Na:"c",Cb:"d"};function X_(){Jt.call(this,"d")}Vt(X_,Jt);function Q_(){Jt.call(this,"c")}Vt(Q_,Jt);var pg;function Yh(){}Vt(Yh,Y_);Yh.prototype.g=function(){return new XMLHttpRequest};Yh.prototype.i=function(){return{}};pg=new Yh;function Kl(t,e,n,i){this.l=t,this.j=e,this.m=n,this.U=i||1,this.S=new Cl(this),this.O=RH,t=lg?125:void 0,this.T=new Gh(t),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.V=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.Y=-1,this.I=!1,this.N=0,this.L=null,this.$=this.J=this.Z=this.P=!1,this.h=new qC}function qC(){this.i=null,this.g="",this.h=!1}var RH=45e3,gg={},eh={};re=Kl.prototype;re.setTimeout=function(t){this.O=t};function _g(t,e,n){t.K=1,t.v=Qh(ur(e)),t.s=n,t.P=!0,KC(t,null)}function KC(t,e){t.F=Date.now(),Gl(t),t.A=ur(t.v);var n=t.A,i=t.U;Array.isArray(i)||(i=[String(i)]),eI(n.i,"t",i),t.C=0,n=t.l.H,t.h=new qC,t.g=bI(t.l,n?e:null,!t.s),0<t.N&&(t.L=new TH(Qt(t.La,t,t.g),t.N)),BC(t.S,t.g,"readystatechange",t.ib),e=t.H?NC(t.H):{},t.s?(t.u||(t.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.da(t.A,t.u,t.s,e)):(t.u="GET",t.g.da(t.A,t.u,null,e)),Il(),CH(t.j,t.u,t.A,t.m,t.U,t.s)}re.ib=function(t){t=t.target;const e=this.L;e&&ir(t)==3?e.l():this.La(t)};re.La=function(t){try{if(t==this.g)e:{const p=ir(this.g);var e=this.g.Ea();const _=this.g.aa();if(!(3>p)&&(p!=3||lg||this.g&&(this.h.h||this.g.fa()||Gb(this.g)))){this.I||p!=4||e==7||(e==8||0>=_?Il(3):Il(2)),Xh(this);var n=this.g.aa();this.Y=n;t:if(GC(this)){var i=Gb(this.g);t="";var r=i.length,o=ir(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Ts(this),tl(this);var l="";break t}this.h.i=new _e.TextDecoder}for(e=0;e<r;e++)this.h.h=!0,t+=this.h.i.decode(i[e],{stream:o&&e==r-1});i.splice(0,r),this.h.g+=t,this.C=0,l=this.h.g}else l=this.g.fa();if(this.i=n==200,IH(this.j,this.u,this.A,this.m,this.U,p,n),this.i){if(this.Z&&!this.J){t:{if(this.g){var u,h=this.g;if((u=h.g?h.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Zu(u)){var d=u;break t}}d=null}if(n=d)Co(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,mg(this,n);else{this.i=!1,this.o=3,an(12),Ts(this),tl(this);break e}}this.P?(zC(this,p,l),lg&&this.i&&p==3&&(BC(this.S,this.T,"tick",this.hb),this.T.start())):(Co(this.j,this.m,l,null),mg(this,l)),p==4&&Ts(this),this.i&&!this.I&&(p==4?mI(this.l,this):(this.i=!1,Gl(this)))}else n==400&&0<l.indexOf("Unknown SID")?(this.o=3,an(12)):(this.o=0,an(13)),Ts(this),tl(this)}}}catch{}finally{}};function GC(t){return t.g?t.u=="GET"&&t.K!=2&&t.l.Da:!1}function zC(t,e,n){let i=!0,r;for(;!t.I&&t.C<n.length;)if(r=xH(t,n),r==eh){e==4&&(t.o=4,an(14),i=!1),Co(t.j,t.m,null,"[Incomplete Response]");break}else if(r==gg){t.o=4,an(15),Co(t.j,t.m,n,"[Invalid Chunk]"),i=!1;break}else Co(t.j,t.m,r,null),mg(t,r);GC(t)&&r!=eh&&r!=gg&&(t.h.g="",t.C=0),e!=4||n.length!=0||t.h.h||(t.o=1,an(16),i=!1),t.i=t.i&&i,i?0<n.length&&!t.$&&(t.$=!0,e=t.l,e.g==t&&e.$&&!e.K&&(e.j.info("Great, no buffering proxy detected. Bytes received: "+n.length),rm(e),e.K=!0,an(11))):(Co(t.j,t.m,n,"[Invalid Chunked Response]"),Ts(t),tl(t))}re.hb=function(){if(this.g){var t=ir(this.g),e=this.g.fa();this.C<e.length&&(Xh(this),zC(this,t,e),this.i&&t!=4&&Gl(this))}};function xH(t,e){var n=t.C,i=e.indexOf(`
`,n);return i==-1?eh:(n=Number(e.substring(n,i)),isNaN(n)?gg:(i+=1,i+n>e.length?eh:(e=e.substr(i,n),t.C=i+n,e)))}re.cancel=function(){this.I=!0,Ts(this)};function Gl(t){t.V=Date.now()+t.O,YC(t,t.O)}function YC(t,e){if(t.B!=null)throw Error("WatchDog timer not null");t.B=jl(Qt(t.gb,t),e)}function Xh(t){t.B&&(_e.clearTimeout(t.B),t.B=null)}re.gb=function(){this.B=null;const t=Date.now();0<=t-this.V?(AH(this.j,this.A),this.K!=2&&(Il(),an(17)),Ts(this),this.o=2,tl(this)):YC(this,this.V-t)};function tl(t){t.l.G==0||t.I||mI(t.l,t)}function Ts(t){Xh(t);var e=t.L;e&&typeof e.na=="function"&&e.na(),t.L=null,q_(t.T),WC(t.S),t.g&&(e=t.g,t.g=null,e.abort(),e.na())}function mg(t,e){try{var n=t.l;if(n.G!=0&&(n.g==t||vg(n.h,t))){if(!t.J&&vg(n.h,t)&&n.G==3){try{var i=n.Fa.g.parse(e)}catch{i=null}if(Array.isArray(i)&&i.length==3){var r=i;if(r[0]==0){e:if(!n.u){if(n.g)if(n.g.F+3e3<t.F)ih(n),tf(n);else break e;im(n),an(18)}}else n.Ba=r[1],0<n.Ba-n.T&&37500>r[2]&&n.L&&n.A==0&&!n.v&&(n.v=jl(Qt(n.cb,n),6e3));if(1>=iI(n.h)&&n.ja){try{n.ja()}catch{}n.ja=void 0}}else Cs(n,11)}else if((t.J||n.g==t)&&ih(n),!Zu(e))for(r=n.Fa.g.parse(e),e=0;e<r.length;e++){let d=r[e];if(n.T=d[0],d=d[1],n.G==2)if(d[0]=="c"){n.I=d[1],n.ka=d[2];const p=d[3];p!=null&&(n.ma=p,n.j.info("VER="+n.ma));const _=d[4];_!=null&&(n.Ca=_,n.j.info("SVER="+n.Ca));const y=d[5];y!=null&&typeof y=="number"&&0<y&&(i=1.5*y,n.J=i,n.j.info("backChannelRequestTimeoutMs_="+i)),i=n;const b=t.g;if(b){const S=b.g?b.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(S){var o=i.h;o.g||S.indexOf("spdy")==-1&&S.indexOf("quic")==-1&&S.indexOf("h2")==-1||(o.j=o.l,o.g=new Set,o.h&&(J_(o,o.h),o.h=null))}if(i.D){const N=b.g?b.g.getResponseHeader("X-HTTP-Session-Id"):null;N&&(i.za=N,at(i.F,i.D,N))}}n.G=3,n.l&&n.l.xa(),n.$&&(n.P=Date.now()-t.F,n.j.info("Handshake RTT: "+n.P+"ms")),i=n;var l=t;if(i.sa=EI(i,i.H?i.ka:null,i.V),l.J){rI(i.h,l);var u=l,h=i.J;h&&u.setTimeout(h),u.B&&(Xh(u),Gl(u)),i.g=l}else gI(i);0<n.i.length&&nf(n)}else d[0]!="stop"&&d[0]!="close"||Cs(n,7);else n.G==3&&(d[0]=="stop"||d[0]=="close"?d[0]=="stop"?Cs(n,7):nm(n):d[0]!="noop"&&n.l&&n.l.wa(d),n.A=0)}}Il(4)}catch{}}function DH(t){if(t.W&&typeof t.W=="function")return t.W();if(typeof Map<"u"&&t instanceof Map||typeof Set<"u"&&t instanceof Set)return Array.from(t.values());if(typeof t=="string")return t.split("");if(Vh(t)){for(var e=[],n=t.length,i=0;i<n;i++)e.push(t[i]);return e}e=[],n=0;for(i in t)e[n++]=t[i];return e}function LH(t){if(t.oa&&typeof t.oa=="function")return t.oa();if(!t.W||typeof t.W!="function"){if(typeof Map<"u"&&t instanceof Map)return Array.from(t.keys());if(!(typeof Set<"u"&&t instanceof Set)){if(Vh(t)||typeof t=="string"){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}e=[],n=0;for(const i in t)e[n++]=i;return e}}}function XC(t,e){if(t.forEach&&typeof t.forEach=="function")t.forEach(e,void 0);else if(Vh(t)||typeof t=="string")Array.prototype.forEach.call(t,e,void 0);else for(var n=LH(t),i=DH(t),r=i.length,o=0;o<r;o++)e.call(void 0,i[o],n&&n[o],t)}var QC=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function PH(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var i=t[n].indexOf("="),r=null;if(0<=i){var o=t[n].substring(0,i);r=t[n].substring(i+1)}else o=t[n];e(o,r?decodeURIComponent(r.replace(/\+/g," ")):"")}}}function Ds(t,e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,t instanceof Ds){this.h=e!==void 0?e:t.h,th(this,t.j),this.s=t.s,this.g=t.g,nh(this,t.m),this.l=t.l,e=t.i;var n=new Al;n.i=e.i,e.g&&(n.g=new Map(e.g),n.h=e.h),jb(this,n),this.o=t.o}else t&&(n=String(t).match(QC))?(this.h=!!e,th(this,n[1]||"",!0),this.s=Va(n[2]||""),this.g=Va(n[3]||"",!0),nh(this,n[4]),this.l=Va(n[5]||"",!0),jb(this,n[6]||"",!0),this.o=Va(n[7]||"")):(this.h=!!e,this.i=new Al(null,this.h))}Ds.prototype.toString=function(){var t=[],e=this.j;e&&t.push(ja(e,qb,!0),":");var n=this.g;return(n||e=="file")&&(t.push("//"),(e=this.s)&&t.push(ja(e,qb,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n=this.m,n!=null&&t.push(":",String(n))),(n=this.l)&&(this.g&&n.charAt(0)!="/"&&t.push("/"),t.push(ja(n,n.charAt(0)=="/"?$H:MH,!0))),(n=this.i.toString())&&t.push("?",n),(n=this.o)&&t.push("#",ja(n,UH)),t.join("")};function ur(t){return new Ds(t)}function th(t,e,n){t.j=n?Va(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function nh(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function jb(t,e,n){e instanceof Al?(t.i=e,BH(t.i,t.h)):(n||(e=ja(e,FH)),t.i=new Al(e,t.h))}function at(t,e,n){t.i.set(e,n)}function Qh(t){return at(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function Va(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function ja(t,e,n){return typeof t=="string"?(t=encodeURI(t).replace(e,kH),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function kH(t){return t=t.charCodeAt(0),"%"+(t>>4&15).toString(16)+(t&15).toString(16)}var qb=/[#\/\?@]/g,MH=/[#\?:]/g,$H=/[#\?]/g,FH=/[#\?@]/g,UH=/#/g;function Al(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function Qr(t){t.g||(t.g=new Map,t.h=0,t.i&&PH(t.i,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}re=Al.prototype;re.add=function(t,e){Qr(this),this.i=null,t=oa(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this};function JC(t,e){Qr(t),e=oa(t,e),t.g.has(e)&&(t.i=null,t.h-=t.g.get(e).length,t.g.delete(e))}function ZC(t,e){return Qr(t),e=oa(t,e),t.g.has(e)}re.forEach=function(t,e){Qr(this),this.g.forEach(function(n,i){n.forEach(function(r){t.call(e,r,i,this)},this)},this)};re.oa=function(){Qr(this);const t=Array.from(this.g.values()),e=Array.from(this.g.keys()),n=[];for(let i=0;i<e.length;i++){const r=t[i];for(let o=0;o<r.length;o++)n.push(e[i])}return n};re.W=function(t){Qr(this);let e=[];if(typeof t=="string")ZC(this,t)&&(e=e.concat(this.g.get(oa(this,t))));else{t=Array.from(this.g.values());for(let n=0;n<t.length;n++)e=e.concat(t[n])}return e};re.set=function(t,e){return Qr(this),this.i=null,t=oa(this,t),ZC(this,t)&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this};re.get=function(t,e){return t?(t=this.W(t),0<t.length?String(t[0]):e):e};function eI(t,e,n){JC(t,e),0<n.length&&(t.i=null,t.g.set(oa(t,e),$_(n)),t.h+=n.length)}re.toString=function(){if(this.i)return this.i;if(!this.g)return"";const t=[],e=Array.from(this.g.keys());for(var n=0;n<e.length;n++){var i=e[n];const o=encodeURIComponent(String(i)),l=this.W(i);for(i=0;i<l.length;i++){var r=o;l[i]!==""&&(r+="="+encodeURIComponent(String(l[i]))),t.push(r)}}return this.i=t.join("&")};function oa(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}function BH(t,e){e&&!t.j&&(Qr(t),t.i=null,t.g.forEach(function(n,i){var r=i.toLowerCase();i!=r&&(JC(this,i),eI(this,r,n))},t)),t.j=e}var WH=class{constructor(t,e){this.h=t,this.g=e}};function tI(t){this.l=t||HH,_e.PerformanceNavigationTiming?(t=_e.performance.getEntriesByType("navigation"),t=0<t.length&&(t[0].nextHopProtocol=="hq"||t[0].nextHopProtocol=="h2")):t=!!(_e.g&&_e.g.Ga&&_e.g.Ga()&&_e.g.Ga().$b),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var HH=10;function nI(t){return t.h?!0:t.g?t.g.size>=t.j:!1}function iI(t){return t.h?1:t.g?t.g.size:0}function vg(t,e){return t.h?t.h==e:t.g?t.g.has(e):!1}function J_(t,e){t.g?t.g.add(e):t.h=e}function rI(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}tI.prototype.cancel=function(){if(this.i=sI(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const t of this.g.values())t.cancel();this.g.clear()}};function sI(t){if(t.h!=null)return t.i.concat(t.h.D);if(t.g!=null&&t.g.size!==0){let e=t.i;for(const n of t.g.values())e=e.concat(n.D);return e}return $_(t.i)}function Z_(){}Z_.prototype.stringify=function(t){return _e.JSON.stringify(t,void 0)};Z_.prototype.parse=function(t){return _e.JSON.parse(t,void 0)};function VH(){this.g=new Z_}function jH(t,e,n){const i=n||"";try{XC(t,function(r,o){let l=r;Hl(r)&&(l=j_(r)),e.push(i+o+"="+encodeURIComponent(l))})}catch(r){throw e.push(i+"type="+encodeURIComponent("_badmap")),r}}function qH(t,e){const n=new zh;if(_e.Image){const i=new Image;i.onload=nu(ru,n,i,"TestLoadImage: loaded",!0,e),i.onerror=nu(ru,n,i,"TestLoadImage: error",!1,e),i.onabort=nu(ru,n,i,"TestLoadImage: abort",!1,e),i.ontimeout=nu(ru,n,i,"TestLoadImage: timeout",!1,e),_e.setTimeout(function(){i.ontimeout&&i.ontimeout()},1e4),i.src=t}else e(!1)}function ru(t,e,n,i,r){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,r(i)}catch{}}function Jh(t){this.l=t.ac||null,this.j=t.jb||!1}Vt(Jh,Y_);Jh.prototype.g=function(){return new Zh(this.l,this.j)};Jh.prototype.i=function(t){return function(){return t}}({});function Zh(t,e){Lt.call(this),this.D=t,this.u=e,this.m=void 0,this.readyState=em,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Vt(Zh,Lt);var em=0;re=Zh.prototype;re.open=function(t,e){if(this.readyState!=em)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,Sl(this)};re.send=function(t){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.D||_e).fetch(new Request(this.B,e)).then(this.Wa.bind(this),this.ga.bind(this))};re.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,zl(this)),this.readyState=em};re.Wa=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,Sl(this)),this.g&&(this.readyState=3,Sl(this),this.g)))if(this.responseType==="arraybuffer")t.arrayBuffer().then(this.Ua.bind(this),this.ga.bind(this));else if(typeof _e.ReadableStream<"u"&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;oI(this)}else t.text().then(this.Va.bind(this),this.ga.bind(this))};function oI(t){t.j.read().then(t.Ta.bind(t)).catch(t.ga.bind(t))}re.Ta=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?zl(this):Sl(this),this.readyState==3&&oI(this)}};re.Va=function(t){this.g&&(this.response=this.responseText=t,zl(this))};re.Ua=function(t){this.g&&(this.response=t,zl(this))};re.ga=function(){this.g&&zl(this)};function zl(t){t.readyState=4,t.l=null,t.j=null,t.A=null,Sl(t)}re.setRequestHeader=function(t,e){this.v.append(t,e)};re.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""};re.getAllResponseHeaders=function(){if(!this.h)return"";const t=[],e=this.h.entries();for(var n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join(`\r
`)};function Sl(t){t.onreadystatechange&&t.onreadystatechange.call(t)}Object.defineProperty(Zh.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(t){this.m=t?"include":"same-origin"}});var KH=_e.JSON.parse;function _t(t){Lt.call(this),this.headers=new Map,this.u=t||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=aI,this.K=this.L=!1}Vt(_t,Lt);var aI="",GH=/^https?$/i,zH=["POST","PUT"];re=_t.prototype;re.Ka=function(t){this.L=t};re.da=function(t,e,n,i){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+t);e=e?e.toUpperCase():"GET",this.H=t,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():pg.g(),this.C=this.u?Vb(this.u):Vb(pg),this.g.onreadystatechange=Qt(this.Ha,this);try{this.F=!0,this.g.open(e,String(t),!0),this.F=!1}catch(o){Kb(this,o);return}if(t=n||"",n=new Map(this.headers),i)if(Object.getPrototypeOf(i)===Object.prototype)for(var r in i)n.set(r,i[r]);else if(typeof i.keys=="function"&&typeof i.get=="function")for(const o of i.keys())n.set(o,i.get(o));else throw Error("Unknown input type for opt_headers: "+String(i));i=Array.from(n.keys()).find(o=>o.toLowerCase()=="content-type"),r=_e.FormData&&t instanceof _e.FormData,!(0<=IC(zH,e))||i||r||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[o,l]of n)this.g.setRequestHeader(o,l);this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{uI(this),0<this.B&&((this.K=YH(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Qt(this.qa,this)):this.A=K_(this.qa,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(o){Kb(this,o)}};function YH(t){return wl&&hH()&&typeof t.timeout=="number"&&t.ontimeout!==void 0}re.qa=function(){typeof M_<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Wt(this,"timeout"),this.abort(8))};function Kb(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,lI(t),ef(t)}function lI(t){t.D||(t.D=!0,Wt(t,"complete"),Wt(t,"error"))}re.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,Wt(this,"complete"),Wt(this,"abort"),ef(this))};re.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),ef(this,!0)),_t.X.M.call(this)};re.Ha=function(){this.s||(this.F||this.v||this.l?cI(this):this.fb())};re.fb=function(){cI(this)};function cI(t){if(t.h&&typeof M_<"u"&&(!t.C[1]||ir(t)!=4||t.aa()!=2)){if(t.v&&ir(t)==4)K_(t.Ha,0,t);else if(Wt(t,"readystatechange"),ir(t)==4){t.h=!1;try{const u=t.aa();e:switch(u){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var n;if(!(n=e)){var i;if(i=u===0){var r=String(t.H).match(QC)[1]||null;if(!r&&_e.self&&_e.self.location){var o=_e.self.location.protocol;r=o.substr(0,o.length-1)}i=!GH.test(r?r.toLowerCase():"")}n=i}if(n)Wt(t,"complete"),Wt(t,"success");else{t.m=6;try{var l=2<ir(t)?t.g.statusText:""}catch{l=""}t.j=l+" ["+t.aa()+"]",lI(t)}}finally{ef(t)}}}}function ef(t,e){if(t.g){uI(t);const n=t.g,i=t.C[0]?Ju:null;t.g=null,t.C=null,e||Wt(t,"ready");try{n.onreadystatechange=i}catch{}}}function uI(t){t.g&&t.K&&(t.g.ontimeout=null),t.A&&(_e.clearTimeout(t.A),t.A=null)}function ir(t){return t.g?t.g.readyState:0}re.aa=function(){try{return 2<ir(this)?this.g.status:-1}catch{return-1}};re.fa=function(){try{return this.g?this.g.responseText:""}catch{return""}};re.Sa=function(t){if(this.g){var e=this.g.responseText;return t&&e.indexOf(t)==0&&(e=e.substring(t.length)),KH(e)}};function Gb(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.J){case aI:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch{return null}}re.Ea=function(){return this.m};re.Oa=function(){return typeof this.j=="string"?this.j:String(this.j)};function hI(t){let e="";return U_(t,function(n,i){e+=i,e+=":",e+=n,e+=`\r
`}),e}function tm(t,e,n){e:{for(i in n){var i=!1;break e}i=!0}i||(n=hI(n),typeof t=="string"?n!=null&&encodeURIComponent(String(n)):at(t,e,n))}function Ma(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function fI(t){this.Ca=0,this.i=[],this.j=new zh,this.ka=this.sa=this.F=this.V=this.g=this.za=this.D=this.ia=this.o=this.S=this.s=null,this.ab=this.U=0,this.Za=Ma("failFast",!1,t),this.L=this.v=this.u=this.m=this.l=null,this.Y=!0,this.pa=this.Ba=this.T=-1,this.Z=this.A=this.C=0,this.Xa=Ma("baseRetryDelayMs",5e3,t),this.bb=Ma("retryDelaySeedMs",1e4,t),this.$a=Ma("forwardChannelMaxRetries",2,t),this.ta=Ma("forwardChannelRequestTimeoutMs",2e4,t),this.ra=t&&t.xmlHttpFactory||void 0,this.Da=t&&t.Zb||!1,this.J=void 0,this.H=t&&t.supportsCrossDomainXhr||!1,this.I="",this.h=new tI(t&&t.concurrentRequestLimit),this.Fa=new VH,this.O=t&&t.fastHandshake||!1,this.N=t&&t.encodeInitMessageHeaders||!1,this.O&&this.N&&(this.N=!1),this.Ya=t&&t.Xb||!1,t&&t.Aa&&this.j.Aa(),t&&t.forceLongPolling&&(this.Y=!1),this.$=!this.O&&this.Y&&t&&t.detectBufferingProxy||!1,this.ja=void 0,this.P=0,this.K=!1,this.la=this.B=null}re=fI.prototype;re.ma=8;re.G=1;function nm(t){if(dI(t),t.G==3){var e=t.U++,n=ur(t.F);at(n,"SID",t.I),at(n,"RID",e),at(n,"TYPE","terminate"),Yl(t,n),e=new Kl(t,t.j,e,void 0),e.K=2,e.v=Qh(ur(n)),n=!1,_e.navigator&&_e.navigator.sendBeacon&&(n=_e.navigator.sendBeacon(e.v.toString(),"")),!n&&_e.Image&&(new Image().src=e.v,n=!0),n||(e.g=bI(e.l,null),e.g.da(e.v)),e.F=Date.now(),Gl(e)}yI(t)}function tf(t){t.g&&(rm(t),t.g.cancel(),t.g=null)}function dI(t){tf(t),t.u&&(_e.clearTimeout(t.u),t.u=null),ih(t),t.h.cancel(),t.m&&(typeof t.m=="number"&&_e.clearTimeout(t.m),t.m=null)}function nf(t){nI(t.h)||t.m||(t.m=!0,$C(t.Ja,t),t.C=0)}function XH(t,e){return iI(t.h)>=t.h.j-(t.m?1:0)?!1:t.m?(t.i=e.D.concat(t.i),!0):t.G==1||t.G==2||t.C>=(t.Za?0:t.$a)?!1:(t.m=jl(Qt(t.Ja,t,e),vI(t,t.C)),t.C++,!0)}re.Ja=function(t){if(this.m)if(this.m=null,this.G==1){if(!t){this.U=Math.floor(1e5*Math.random()),t=this.U++;const r=new Kl(this,this.j,t,void 0);let o=this.s;if(this.S&&(o?(o=NC(o),RC(o,this.S)):o=this.S),this.o!==null||this.N||(r.H=o,o=null),this.O)e:{for(var e=0,n=0;n<this.i.length;n++){t:{var i=this.i[n];if("__data__"in i.g&&(i=i.g.__data__,typeof i=="string")){i=i.length;break t}i=void 0}if(i===void 0)break;if(e+=i,4096<e){e=n;break e}if(e===4096||n===this.i.length-1){e=n+1;break e}}e=1e3}else e=1e3;e=pI(this,r,e),n=ur(this.F),at(n,"RID",t),at(n,"CVER",22),this.D&&at(n,"X-HTTP-Session-Id",this.D),Yl(this,n),o&&(this.N?e="headers="+encodeURIComponent(String(hI(o)))+"&"+e:this.o&&tm(n,this.o,o)),J_(this.h,r),this.Ya&&at(n,"TYPE","init"),this.O?(at(n,"$req",e),at(n,"SID","null"),r.Z=!0,_g(r,n,null)):_g(r,n,e),this.G=2}}else this.G==3&&(t?zb(this,t):this.i.length==0||nI(this.h)||zb(this))};function zb(t,e){var n;e?n=e.m:n=t.U++;const i=ur(t.F);at(i,"SID",t.I),at(i,"RID",n),at(i,"AID",t.T),Yl(t,i),t.o&&t.s&&tm(i,t.o,t.s),n=new Kl(t,t.j,n,t.C+1),t.o===null&&(n.H=t.s),e&&(t.i=e.D.concat(t.i)),e=pI(t,n,1e3),n.setTimeout(Math.round(.5*t.ta)+Math.round(.5*t.ta*Math.random())),J_(t.h,n),_g(n,i,e)}function Yl(t,e){t.ia&&U_(t.ia,function(n,i){at(e,i,n)}),t.l&&XC({},function(n,i){at(e,i,n)})}function pI(t,e,n){n=Math.min(t.i.length,n);var i=t.l?Qt(t.l.Ra,t.l,t):null;e:{var r=t.i;let o=-1;for(;;){const l=["count="+n];o==-1?0<n?(o=r[0].h,l.push("ofs="+o)):o=0:l.push("ofs="+o);let u=!0;for(let h=0;h<n;h++){let d=r[h].h;const p=r[h].g;if(d-=o,0>d)o=Math.max(0,r[h].h-100),u=!1;else try{jH(p,l,"req"+d+"_")}catch{i&&i(p)}}if(u){i=l.join("&");break e}}}return t=t.i.splice(0,n),e.D=t,i}function gI(t){t.g||t.u||(t.Z=1,$C(t.Ia,t),t.A=0)}function im(t){return t.g||t.u||3<=t.A?!1:(t.Z++,t.u=jl(Qt(t.Ia,t),vI(t,t.A)),t.A++,!0)}re.Ia=function(){if(this.u=null,_I(this),this.$&&!(this.K||this.g==null||0>=this.P)){var t=2*this.P;this.j.info("BP detection timer enabled: "+t),this.B=jl(Qt(this.eb,this),t)}};re.eb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.L=!1,this.K=!0,an(10),tf(this),_I(this))};function rm(t){t.B!=null&&(_e.clearTimeout(t.B),t.B=null)}function _I(t){t.g=new Kl(t,t.j,"rpc",t.Z),t.o===null&&(t.g.H=t.s),t.g.N=0;var e=ur(t.sa);at(e,"RID","rpc"),at(e,"SID",t.I),at(e,"CI",t.L?"0":"1"),at(e,"AID",t.T),at(e,"TYPE","xmlhttp"),Yl(t,e),t.o&&t.s&&tm(e,t.o,t.s),t.J&&t.g.setTimeout(t.J);var n=t.g;t=t.ka,n.K=1,n.v=Qh(ur(e)),n.s=null,n.P=!0,KC(n,t)}re.cb=function(){this.v!=null&&(this.v=null,tf(this),im(this),an(19))};function ih(t){t.v!=null&&(_e.clearTimeout(t.v),t.v=null)}function mI(t,e){var n=null;if(t.g==e){ih(t),rm(t),t.g=null;var i=2}else if(vg(t.h,e))n=e.D,rI(t.h,e),i=1;else return;if(t.G!=0){if(t.pa=e.Y,e.i)if(i==1){n=e.s?e.s.length:0,e=Date.now()-e.F;var r=t.C;i=G_(),Wt(i,new jC(i,n)),nf(t)}else gI(t);else if(r=e.o,r==3||r==0&&0<t.pa||!(i==1&&XH(t,e)||i==2&&im(t)))switch(n&&0<n.length&&(e=t.h,e.i=e.i.concat(n)),r){case 1:Cs(t,5);break;case 4:Cs(t,10);break;case 3:Cs(t,6);break;default:Cs(t,2)}}}function vI(t,e){let n=t.Xa+Math.floor(Math.random()*t.bb);return t.l||(n*=2),n*e}function Cs(t,e){if(t.j.info("Error code "+e),e==2){var n=null;t.l&&(n=null);var i=Qt(t.kb,t);n||(n=new Ds("//www.google.com/images/cleardot.gif"),_e.location&&_e.location.protocol=="http"||th(n,"https"),Qh(n)),qH(n.toString(),i)}else an(2);t.G=0,t.l&&t.l.va(e),yI(t),dI(t)}re.kb=function(t){t?(this.j.info("Successfully pinged google.com"),an(2)):(this.j.info("Failed to ping google.com"),an(1))};function yI(t){if(t.G=0,t.la=[],t.l){const e=sI(t.h);(e.length!=0||t.i.length!=0)&&(Fb(t.la,e),Fb(t.la,t.i),t.h.i.length=0,$_(t.i),t.i.length=0),t.l.ua()}}function EI(t,e,n){var i=n instanceof Ds?ur(n):new Ds(n,void 0);if(i.g!="")e&&(i.g=e+"."+i.g),nh(i,i.m);else{var r=_e.location;i=r.protocol,e=e?e+"."+r.hostname:r.hostname,r=+r.port;var o=new Ds(null,void 0);i&&th(o,i),e&&(o.g=e),r&&nh(o,r),n&&(o.l=n),i=o}return n=t.D,e=t.za,n&&e&&at(i,n,e),at(i,"VER",t.ma),Yl(t,i),i}function bI(t,e,n){if(e&&!t.H)throw Error("Can't create secondary domain capable XhrIo object.");return e=n&&t.Da&&!t.ra?new _t(new Jh({jb:!0})):new _t(t.ra),e.Ka(t.H),e}function wI(){}re=wI.prototype;re.xa=function(){};re.wa=function(){};re.va=function(){};re.ua=function(){};re.Ra=function(){};function Yn(t,e){Lt.call(this),this.g=new fI(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(t?t["X-WebChannel-Client-Profile"]=e.ya:t={"X-WebChannel-Client-Profile":e.ya}),this.g.S=t,(t=e&&e.Yb)&&!Zu(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Zu(e)&&(this.g.D=e,t=this.h,t!==null&&e in t&&(t=this.h,e in t&&delete t[e])),this.j=new aa(this)}Vt(Yn,Lt);Yn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.H=!0);var t=this.g,e=this.l,n=this.h||void 0;an(0),t.V=e,t.ia=n||{},t.L=t.Y,t.F=EI(t,null,t.V),nf(t)};Yn.prototype.close=function(){nm(this.g)};Yn.prototype.u=function(t){var e=this.g;if(typeof t=="string"){var n={};n.__data__=t,t=n}else this.v&&(n={},n.__data__=j_(t),t=n);e.i.push(new WH(e.ab++,t)),e.G==3&&nf(e)};Yn.prototype.M=function(){this.g.l=null,delete this.j,nm(this.g),delete this.g,Yn.X.M.call(this)};function TI(t){X_.call(this);var e=t.__sm__;if(e){e:{for(const n in e){t=n;break e}t=void 0}(this.i=t)&&(t=this.i,e=e!==null&&t in e?e[t]:void 0),this.data=e}else this.data=t}Vt(TI,X_);function CI(){Q_.call(this),this.status=1}Vt(CI,Q_);function aa(t){this.g=t}Vt(aa,wI);aa.prototype.xa=function(){Wt(this.g,"a")};aa.prototype.wa=function(t){Wt(this.g,new TI(t))};aa.prototype.va=function(t){Wt(this.g,new CI)};aa.prototype.ua=function(){Wt(this.g,"b")};Yn.prototype.send=Yn.prototype.u;Yn.prototype.open=Yn.prototype.m;Yn.prototype.close=Yn.prototype.close;z_.NO_ERROR=0;z_.TIMEOUT=8;z_.HTTP_ERROR=6;OH.COMPLETE="complete";NH.EventType=ql;ql.OPEN="a";ql.CLOSE="b";ql.ERROR="c";ql.MESSAGE="d";Lt.prototype.listen=Lt.prototype.N;_t.prototype.listenOnce=_t.prototype.O;_t.prototype.getLastError=_t.prototype.Oa;_t.prototype.getLastErrorCode=_t.prototype.Ea;_t.prototype.getStatus=_t.prototype.aa;_t.prototype.getResponseJson=_t.prototype.Sa;_t.prototype.getResponseText=_t.prototype.fa;_t.prototype.send=_t.prototype.da;_t.prototype.setWithCredentials=_t.prototype.Ka;const Yb="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}vn.UNAUTHENTICATED=new vn(null),vn.GOOGLE_CREDENTIALS=new vn("google-credentials-uid"),vn.FIRST_PARTY=new vn("first-party-uid"),vn.MOCK_USER=new vn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let rf="9.15.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rh=new Ll("@firebase/firestore");function On(t,...e){if(rh.logLevel<=Ke.DEBUG){const n=e.map(II);rh.debug(`Firestore (${rf}): ${t}`,...n)}}function sm(t,...e){if(rh.logLevel<=Ke.ERROR){const n=e.map(II);rh.error(`Firestore (${rf}): ${t}`,...n)}}function II(t){if(typeof t=="string")return t;try{return e=t,JSON.stringify(e)}catch{return t}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AI(t="Unexpected state"){const e=`FIRESTORE (${rf}) INTERNAL ASSERTION FAILED: `+t;throw sm(e),new Error(e)}function sh(t,e){t||AI()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Si={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Oi extends pr{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ko{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QH{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class JH{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(vn.UNAUTHENTICATED))}shutdown(){}}class ZH{constructor(e){this.t=e,this.currentUser=vn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){let i=this.i;const r=h=>this.i!==i?(i=this.i,n(h)):Promise.resolve();let o=new ko;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new ko,e.enqueueRetryable(()=>r(this.currentUser))};const l=()=>{const h=o;e.enqueueRetryable(async()=>{await h.promise,await r(this.currentUser)})},u=h=>{On("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=h,this.auth.addAuthTokenListener(this.o),l()};this.t.onInit(h=>u(h)),setTimeout(()=>{if(!this.auth){const h=this.t.getImmediate({optional:!0});h?u(h):(On("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new ko)}},0),l()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(i=>this.i!==e?(On("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(sh(typeof i.accessToken=="string"),new QH(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return sh(e===null||typeof e=="string"),new vn(e)}}class e2{constructor(e,n,i,r){this.h=e,this.l=n,this.m=i,this.g=r,this.type="FirstParty",this.user=vn.FIRST_PARTY,this.p=new Map}I(){return this.g?this.g():(sh(!(typeof this.h!="object"||this.h===null||!this.h.auth||!this.h.auth.getAuthHeaderValueForFirstParty)),this.h.auth.getAuthHeaderValueForFirstParty([]))}get headers(){this.p.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.p.set("Authorization",e),this.m&&this.p.set("X-Goog-Iam-Authorization-Token",this.m),this.p}}class t2{constructor(e,n,i,r){this.h=e,this.l=n,this.m=i,this.g=r}getToken(){return Promise.resolve(new e2(this.h,this.l,this.m,this.g))}start(e,n){e.enqueueRetryable(()=>n(vn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class n2{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class i2{constructor(e){this.T=e,this.forceRefresh=!1,this.appCheck=null,this.A=null}start(e,n){const i=o=>{o.error!=null&&On("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const l=o.token!==this.A;return this.A=o.token,On("FirebaseAppCheckTokenProvider",`Received ${l?"new":"existing"} token.`),l?n(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>i(o))};const r=o=>{On("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.appCheck.addTokenListener(this.o)};this.T.onInit(o=>r(o)),setTimeout(()=>{if(!this.appCheck){const o=this.T.getImmediate({optional:!0});o?r(o):On("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(sh(typeof n.token=="string"),this.A=n.token,new n2(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function r2(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let i=0;i<t;i++)n[i]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s2{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let i="";for(;i.length<20;){const r=r2(40);for(let o=0;o<r.length;++o)i.length<20&&r[o]<n&&(i+=e.charAt(r[o]%e.length))}return i}}function SI(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o2{constructor(e,n,i,r,o,l,u,h){this.databaseId=e,this.appId=n,this.persistenceKey=i,this.host=r,this.ssl=o,this.forceLongPolling=l,this.autoDetectLongPolling=u,this.useFetchStreams=h}}class oh{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new oh("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof oh&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Xb,Me;(Me=Xb||(Xb={}))[Me.OK=0]="OK",Me[Me.CANCELLED=1]="CANCELLED",Me[Me.UNKNOWN=2]="UNKNOWN",Me[Me.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Me[Me.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Me[Me.NOT_FOUND=5]="NOT_FOUND",Me[Me.ALREADY_EXISTS=6]="ALREADY_EXISTS",Me[Me.PERMISSION_DENIED=7]="PERMISSION_DENIED",Me[Me.UNAUTHENTICATED=16]="UNAUTHENTICATED",Me[Me.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Me[Me.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Me[Me.ABORTED=10]="ABORTED",Me[Me.OUT_OF_RANGE=11]="OUT_OF_RANGE",Me[Me.UNIMPLEMENTED=12]="UNIMPLEMENTED",Me[Me.INTERNAL=13]="INTERNAL",Me[Me.UNAVAILABLE=14]="UNAVAILABLE",Me[Me.DATA_LOSS=15]="DATA_LOSS";function sp(){return typeof document<"u"?document:null}class a2{constructor(e,n,i=1e3,r=1.5,o=6e4){this.Hs=e,this.timerId=n,this.mo=i,this.yo=r,this.po=o,this.Io=0,this.To=null,this.Eo=Date.now(),this.reset()}reset(){this.Io=0}Ao(){this.Io=this.po}Ro(e){this.cancel();const n=Math.floor(this.Io+this.bo()),i=Math.max(0,Date.now()-this.Eo),r=Math.max(0,n-i);r>0&&On("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.Io} ms, delay with jitter: ${n} ms, last attempt: ${i} ms ago)`),this.To=this.Hs.enqueueAfterDelay(this.timerId,r,()=>(this.Eo=Date.now(),e())),this.Io*=this.yo,this.Io<this.mo&&(this.Io=this.mo),this.Io>this.po&&(this.Io=this.po)}Po(){this.To!==null&&(this.To.skipDelay(),this.To=null)}cancel(){this.To!==null&&(this.To.cancel(),this.To=null)}bo(){return(Math.random()-.5)*this.Io}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class om{constructor(e,n,i,r,o){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=i,this.op=r,this.removalCallback=o,this.deferred=new ko,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(l=>{})}static createAndSchedule(e,n,i,r,o){const l=Date.now()+i,u=new om(e,n,l,r,o);return u.start(i),u}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Oi(Si.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function l2(t,e){if(sm("AsyncQueue",`${e}: ${t}`),SI(t))return new Oi(Si.UNAVAILABLE,`${e}: ${t}`);throw t}function c2(t,e,n,i){if(e===!0&&i===!0)throw new Oi(Si.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qb=new Map;class Jb{constructor(e){var n;if(e.host===void 0){if(e.ssl!==void 0)throw new Oi(Si.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new Oi(Si.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,c2("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u2{constructor(e,n,i,r){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=i,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Jb({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Oi(Si.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new Oi(Si.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Jb(e),e.credentials!==void 0&&(this._authCredentials=function(n){if(!n)return new JH;switch(n.type){case"gapi":const i=n.client;return new t2(i,n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new Oi(Si.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const n=Qb.get(e);n&&(On("ComponentProvider","Removing Datastore"),Qb.delete(e),n.terminate())}(this),Promise.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h2{constructor(e,n,i,r){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=i,this.databaseInfo=r,this.user=vn.UNAUTHENTICATED,this.clientId=s2.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(i,async o=>{On("FirestoreClient","Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(i,o=>(On("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}async getConfiguration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Oi(Si.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new ko;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this.onlineComponents&&await this.onlineComponents.terminate(),this.offlineComponents&&await this.offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const i=l2(n,"Failed to shutdown persistence");e.reject(i)}}),e.promise}}class f2{constructor(){this.Bc=Promise.resolve(),this.Lc=[],this.qc=!1,this.Uc=[],this.Kc=null,this.Gc=!1,this.Qc=!1,this.jc=[],this.xo=new a2(this,"async_queue_retry"),this.Wc=()=>{const n=sp();n&&On("AsyncQueue","Visibility state changed to "+n.visibilityState),this.xo.Po()};const e=sp();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.Wc)}get isShuttingDown(){return this.qc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.zc(),this.Hc(e)}enterRestrictedMode(e){if(!this.qc){this.qc=!0,this.Qc=e||!1;const n=sp();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Wc)}}enqueue(e){if(this.zc(),this.qc)return new Promise(()=>{});const n=new ko;return this.Hc(()=>this.qc&&this.Qc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Lc.push(e),this.Jc()))}async Jc(){if(this.Lc.length!==0){try{await this.Lc[0](),this.Lc.shift(),this.xo.reset()}catch(e){if(!SI(e))throw e;On("AsyncQueue","Operation failed with retryable error: "+e)}this.Lc.length>0&&this.xo.Ro(()=>this.Jc())}}Hc(e){const n=this.Bc.then(()=>(this.Gc=!0,e().catch(i=>{this.Kc=i,this.Gc=!1;const r=function(o){let l=o.message||"";return o.stack&&(l=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),l}(i);throw sm("INTERNAL UNHANDLED ERROR: ",r),i}).then(i=>(this.Gc=!1,i))));return this.Bc=n,n}enqueueAfterDelay(e,n,i){this.zc(),this.jc.indexOf(e)>-1&&(n=0);const r=om.createAndSchedule(this,e,n,i,o=>this.Yc(o));return this.Uc.push(r),r}zc(){this.Kc&&AI()}verifyOperationInProgress(){}async Xc(){let e;do e=this.Bc,await e;while(e!==this.Bc)}Zc(e){for(const n of this.Uc)if(n.timerId===e)return!0;return!1}ta(e){return this.Xc().then(()=>{this.Uc.sort((n,i)=>n.targetTimeMs-i.targetTimeMs);for(const n of this.Uc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Xc()})}ea(e){this.jc.push(e)}Yc(e){const n=this.Uc.indexOf(e);this.Uc.splice(n,1)}}class d2 extends u2{constructor(e,n,i,r){super(e,n,i,r),this.type="firestore",this._queue=new f2,this._persistenceKey=(r==null?void 0:r.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||p2(this),this._firestoreClient.terminate()}}function p2(t){var e;const n=t._freezeSettings(),i=function(r,o,l,u){return new o2(r,o,l,u.host,u.ssl,u.experimentalForceLongPolling,u.experimentalAutoDetectLongPolling,u.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,n);t._firestoreClient=new h2(t._authCredentials,t._appCheckCredentials,t._queue,i)}(function(t,e=!0){(function(n){rf=n})(Pl),ki(new fi("firestore",(n,{instanceIdentifier:i,options:r})=>{const o=n.getProvider("app").getImmediate(),l=new d2(new ZH(n.getProvider("auth-internal")),new i2(n.getProvider("app-check-internal")),function(u,h){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new Oi(Si.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new oh(u.options.projectId,h)}(o,i),o);return r=Object.assign({useFetchStreams:e},r),l._setSettings(r),l},"PUBLIC").setMultipleInstances(!0)),Nn(Yb,"3.8.0",t),Nn(Yb,"3.8.0","esm2017")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OI="firebasestorage.googleapis.com",g2="storageBucket",_2=2*60*1e3,m2=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wi extends pr{constructor(e,n,i=0){super(op(e),`Firebase Storage: ${n} (${op(e)})`),this.status_=i,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Wi.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return op(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}function op(t){return"storage/"+t}function v2(){const t="An unknown error occurred, please check the error payload for server response.";return new Wi("unknown",t)}function y2(){return new Wi("retry-limit-exceeded","Max retry time for operation exceeded, please try again.")}function E2(){return new Wi("canceled","User canceled the upload/download.")}function b2(t){return new Wi("invalid-url","Invalid URL '"+t+"'.")}function w2(t){return new Wi("invalid-default-bucket","Invalid default bucket '"+t+"'.")}function Zb(t){return new Wi("invalid-argument",t)}function NI(){return new Wi("app-deleted","The Firebase app was deleted.")}function T2(t){return new Wi("invalid-root-operation","The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ci{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let i;try{i=ci.makeFromUrl(e,n)}catch{return new ci(e,"")}if(i.path==="")return i;throw w2(e)}static makeFromUrl(e,n){let i=null;const r="([A-Za-z0-9.\\-_]+)";function o(V){V.path.charAt(V.path.length-1)==="/"&&(V.path_=V.path_.slice(0,-1))}const l="(/(.*))?$",u=new RegExp("^gs://"+r+l,"i"),h={bucket:1,path:3};function d(V){V.path_=decodeURIComponent(V.path)}const p="v[A-Za-z0-9_]+",_=n.replace(/[.]/g,"\\."),y="(/([^?#]*).*)?$",b=new RegExp(`^https?://${_}/${p}/b/${r}/o${y}`,"i"),S={bucket:1,path:3},N=n===OI?"(?:storage.googleapis.com|storage.cloud.google.com)":n,k="([^?#]*)",G=new RegExp(`^https?://${N}/${r}/${k}`,"i"),H=[{regex:u,indices:h,postModify:o},{regex:b,indices:S,postModify:d},{regex:G,indices:{bucket:1,path:2},postModify:d}];for(let V=0;V<H.length;V++){const Q=H[V],B=Q.regex.exec(e);if(B){const Z=B[Q.indices.bucket];let X=B[Q.indices.path];X||(X=""),i=new ci(Z,X),Q.postModify(i);break}}if(i==null)throw b2(e);return i}}class C2{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I2(t,e,n){let i=1,r=null,o=null,l=!1,u=0;function h(){return u===2}let d=!1;function p(...k){d||(d=!0,e.apply(null,k))}function _(k){r=setTimeout(()=>{r=null,t(b,h())},k)}function y(){o&&clearTimeout(o)}function b(k,...G){if(d){y();return}if(k){y(),p.call(null,k,...G);return}if(h()||l){y(),p.call(null,k,...G);return}i<64&&(i*=2);let H;u===1?(u=2,H=0):H=(i+Math.random())*1e3,_(H)}let S=!1;function N(k){S||(S=!0,y(),!d&&(r!==null?(k||(u=2),clearTimeout(r),_(0)):k||(u=1)))}return _(0),o=setTimeout(()=>{l=!0,N(!0)},n),N}function A2(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S2(t){return t!==void 0}function ew(t,e,n,i){if(i<e)throw Zb(`Invalid value for '${t}'. Expected ${e} or greater.`);if(i>n)throw Zb(`Invalid value for '${t}'. Expected ${n} or less.`)}function O2(t){const e=encodeURIComponent;let n="?";for(const i in t)if(t.hasOwnProperty(i)){const r=e(i)+"="+e(t[i]);n=n+r+"&"}return n=n.slice(0,-1),n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ah;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(ah||(ah={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function N2(t,e){const n=t>=500&&t<600,r=[408,429].indexOf(t)!==-1,o=e.indexOf(t)!==-1;return n||r||o}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R2{constructor(e,n,i,r,o,l,u,h,d,p,_,y=!0){this.url_=e,this.method_=n,this.headers_=i,this.body_=r,this.successCodes_=o,this.additionalRetryCodes_=l,this.callback_=u,this.errorCallback_=h,this.timeout_=d,this.progressCallback_=p,this.connectionFactory_=_,this.retry=y,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((b,S)=>{this.resolve_=b,this.reject_=S,this.start_()})}start_(){const e=(i,r)=>{if(r){i(!1,new su(!1,null,!0));return}const o=this.connectionFactory_();this.pendingConnection_=o;const l=u=>{const h=u.loaded,d=u.lengthComputable?u.total:-1;this.progressCallback_!==null&&this.progressCallback_(h,d)};this.progressCallback_!==null&&o.addUploadProgressListener(l),o.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&o.removeUploadProgressListener(l),this.pendingConnection_=null;const u=o.getErrorCode()===ah.NO_ERROR,h=o.getStatus();if((!u||N2(h,this.additionalRetryCodes_))&&this.retry){const p=o.getErrorCode()===ah.ABORT;i(!1,new su(!1,null,p));return}const d=this.successCodes_.indexOf(h)!==-1;i(!0,new su(d,o))})},n=(i,r)=>{const o=this.resolve_,l=this.reject_,u=r.connection;if(r.wasSuccessCode)try{const h=this.callback_(u,u.getResponse());S2(h)?o(h):o()}catch(h){l(h)}else if(u!==null){const h=v2();h.serverResponse=u.getErrorText(),this.errorCallback_?l(this.errorCallback_(u,h)):l(h)}else if(r.canceled){const h=this.appDelete_?NI():E2();l(h)}else{const h=y2();l(h)}};this.canceled_?n(!1,new su(!1,null,!0)):this.backoffId_=I2(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&A2(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class su{constructor(e,n,i){this.wasSuccessCode=e,this.connection=n,this.canceled=!!i}}function x2(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function D2(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function L2(t,e){e&&(t["X-Firebase-GMPID"]=e)}function P2(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function k2(t,e,n,i,r,o,l=!0){const u=O2(t.urlParams),h=t.url+u,d=Object.assign({},t.headers);return L2(d,e),x2(d,n),D2(d,o),P2(d,i),new R2(h,t.method,d,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,r,l)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function M2(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function $2(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lh{constructor(e,n){this._service=e,n instanceof ci?this._location=n:this._location=ci.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new lh(e,n)}get root(){const e=new ci(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return $2(this._location.path)}get storage(){return this._service}get parent(){const e=M2(this._location.path);if(e===null)return null;const n=new ci(this._location.bucket,e);return new lh(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw T2(e)}}function tw(t,e){const n=e==null?void 0:e[g2];return n==null?null:ci.makeFromBucketSpec(n,t)}class F2{constructor(e,n,i,r,o){this.app=e,this._authProvider=n,this._appCheckProvider=i,this._url=r,this._firebaseVersion=o,this._bucket=null,this._host=OI,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=_2,this._maxUploadRetryTime=m2,this._requests=new Set,r!=null?this._bucket=ci.makeFromBucketSpec(r,this._host):this._bucket=tw(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=ci.makeFromBucketSpec(this._url,e):this._bucket=tw(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){ew("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){ew("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new lh(this,e)}_makeRequest(e,n,i,r,o=!0){if(this._deleted)return new C2(NI());{const l=k2(e,this._appId,i,r,n,this._firebaseVersion,o);return this._requests.add(l),l.getPromise().then(()=>this._requests.delete(l),()=>this._requests.delete(l)),l}}async makeRequestWithTokens(e,n){const[i,r]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,i,r).getPromise()}}const nw="@firebase/storage",iw="0.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U2="storage";function B2(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),i=t.getProvider("auth-internal"),r=t.getProvider("app-check-internal");return new F2(n,i,r,e,Pl)}function W2(){ki(new fi(U2,B2,"PUBLIC").setMultipleInstances(!0)),Nn(nw,iw,""),Nn(nw,iw,"esm2017")}W2();function H2(t,{firebaseApp:e,modules:n=[]}){t.provide(jF,e);for(const i of n)t.use(i.bind(null,e))}const RI=e_({apiKey:"AIzaSyBJsQeWbln9lR9B-W7jQZVCy9AWZyoe9pQ",authDomain:"tacmap-dev.firebaseapp.com",projectId:"tacmap-dev",storageBucket:"tacmap-dev.appspot.com",messagingSenderId:"278955153095",appId:"1:278955153095:web:dc491f9539c91be1e0d0e2"}),la=CC(RI),V2=oi(la,"rooms");oi(la,"teams");const bu=oi(la,"squads"),Ls=oi(la,"users"),ap=oi(la,"markers");function j2(t){return{all:t=t||new Map,on:function(e,n){var i=t.get(e);i?i.push(n):t.set(e,[n])},off:function(e,n){var i=t.get(e);i&&(n?i.splice(i.indexOf(n)>>>0,1):t.set(e,[]))},emit:function(e,n){var i=t.get(e);i&&i.slice().map(function(r){r(n)}),(i=t.get("*"))&&i.slice().map(function(r){r(e,n)})}}}const vt=j2(),yn={firebaseVars:{live:{apiKey:"AIzaSyB1eJwaJojvqt3WvJ4pEv5rLZmI-kFhojA",authDomain:"tacmap-b51b4.firebaseapp.com",databaseURL:"https://tacmap-b51b4-default-rtdb.firebaseio.com",projectId:"tacmap-b51b4",storageBucket:"tacmap-b51b4.appspot.com",messagingSenderId:"967896842326",appId:"1:967896842326:web:5c2e93fc457c2aa8febbf7"},dev:{apiKey:"AIzaSyBJsQeWbln9lR9B-W7jQZVCy9AWZyoe9pQ",authDomain:"tacmap-dev.firebaseapp.com",projectId:"tacmap-dev",storageBucket:"tacmap-dev.appspot.com",messagingSenderId:"278955153095",appId:"1:278955153095:web:dc491f9539c91be1e0d0e2"}},geoLocationOptions:{enableHighAccuracy:!0,timeout:5e3,maximumAge:0},tickRateMS:1e4,updateMeters:3,roomId:"b4196e99-b3eb-489a-b2fe-41c3bc74dd13"};function q2(){return xI().__VUE_DEVTOOLS_GLOBAL_HOOK__}function xI(){return typeof navigator<"u"&&typeof window<"u"?window:typeof global<"u"?global:{}}const K2=typeof Proxy=="function",G2="devtools-plugin:setup",z2="plugin:settings:set";let po,yg;function Y2(){var t;return po!==void 0||(typeof window<"u"&&window.performance?(po=!0,yg=window.performance):typeof global<"u"&&(!((t=global.perf_hooks)===null||t===void 0)&&t.performance)?(po=!0,yg=global.perf_hooks.performance):po=!1),po}function X2(){return Y2()?yg.now():Date.now()}class Q2{constructor(e,n){this.target=null,this.targetQueue=[],this.onQueue=[],this.plugin=e,this.hook=n;const i={};if(e.settings)for(const l in e.settings){const u=e.settings[l];i[l]=u.defaultValue}const r=`__vue-devtools-plugin-settings__${e.id}`;let o=Object.assign({},i);try{const l=localStorage.getItem(r),u=JSON.parse(l);Object.assign(o,u)}catch{}this.fallbacks={getSettings(){return o},setSettings(l){try{localStorage.setItem(r,JSON.stringify(l))}catch{}o=l},now(){return X2()}},n&&n.on(z2,(l,u)=>{l===this.plugin.id&&this.fallbacks.setSettings(u)}),this.proxiedOn=new Proxy({},{get:(l,u)=>this.target?this.target.on[u]:(...h)=>{this.onQueue.push({method:u,args:h})}}),this.proxiedTarget=new Proxy({},{get:(l,u)=>this.target?this.target[u]:u==="on"?this.proxiedOn:Object.keys(this.fallbacks).includes(u)?(...h)=>(this.targetQueue.push({method:u,args:h,resolve:()=>{}}),this.fallbacks[u](...h)):(...h)=>new Promise(d=>{this.targetQueue.push({method:u,args:h,resolve:d})})})}async setRealTarget(e){this.target=e;for(const n of this.onQueue)this.target.on[n.method](...n.args);for(const n of this.targetQueue)n.resolve(await this.target[n.method](...n.args))}}function J2(t,e){const n=t,i=xI(),r=q2(),o=K2&&n.enableEarlyProxy;if(r&&(i.__VUE_DEVTOOLS_PLUGIN_API_AVAILABLE__||!o))r.emit(G2,t,e);else{const l=o?new Q2(n,r):null;(i.__VUE_DEVTOOLS_PLUGINS__=i.__VUE_DEVTOOLS_PLUGINS__||[]).push({pluginDescriptor:n,setupFn:e,proxy:l}),l&&e(l.proxiedTarget)}}/*!
 * vuex v4.0.2
 * (c) 2021 Evan You
 * @license MIT
 */var Z2="store";function ca(t,e){Object.keys(t).forEach(function(n){return e(t[n],n)})}function eV(t){return t!==null&&typeof t=="object"}function tV(t){return t&&typeof t.then=="function"}function nV(t,e){return function(){return t(e)}}function DI(t,e,n){return e.indexOf(t)<0&&(n&&n.prepend?e.unshift(t):e.push(t)),function(){var i=e.indexOf(t);i>-1&&e.splice(i,1)}}function LI(t,e){t._actions=Object.create(null),t._mutations=Object.create(null),t._wrappedGetters=Object.create(null),t._modulesNamespaceMap=Object.create(null);var n=t.state;sf(t,n,[],t._modules.root,!0),am(t,n,e)}function am(t,e,n){var i=t._state;t.getters={},t._makeLocalGettersCache=Object.create(null);var r=t._wrappedGetters,o={};ca(r,function(l,u){o[u]=nV(l,t),Object.defineProperty(t.getters,u,{get:function(){return o[u]()},enumerable:!0})}),t._state=Dl({data:e}),t.strict&&aV(t),i&&n&&t._withCommit(function(){i.data=null})}function sf(t,e,n,i,r){var o=!n.length,l=t._modules.getNamespace(n);if(i.namespaced&&(t._modulesNamespaceMap[l],t._modulesNamespaceMap[l]=i),!o&&!r){var u=lm(e,n.slice(0,-1)),h=n[n.length-1];t._withCommit(function(){u[h]=i.state})}var d=i.context=iV(t,l,n);i.forEachMutation(function(p,_){var y=l+_;rV(t,y,p,d)}),i.forEachAction(function(p,_){var y=p.root?_:l+_,b=p.handler||p;sV(t,y,b,d)}),i.forEachGetter(function(p,_){var y=l+_;oV(t,y,p,d)}),i.forEachChild(function(p,_){sf(t,e,n.concat(_),p,r)})}function iV(t,e,n){var i=e==="",r={dispatch:i?t.dispatch:function(o,l,u){var h=ch(o,l,u),d=h.payload,p=h.options,_=h.type;return(!p||!p.root)&&(_=e+_),t.dispatch(_,d)},commit:i?t.commit:function(o,l,u){var h=ch(o,l,u),d=h.payload,p=h.options,_=h.type;(!p||!p.root)&&(_=e+_),t.commit(_,d,p)}};return Object.defineProperties(r,{getters:{get:i?function(){return t.getters}:function(){return PI(t,e)}},state:{get:function(){return lm(t.state,n)}}}),r}function PI(t,e){if(!t._makeLocalGettersCache[e]){var n={},i=e.length;Object.keys(t.getters).forEach(function(r){if(r.slice(0,i)===e){var o=r.slice(i);Object.defineProperty(n,o,{get:function(){return t.getters[r]},enumerable:!0})}}),t._makeLocalGettersCache[e]=n}return t._makeLocalGettersCache[e]}function rV(t,e,n,i){var r=t._mutations[e]||(t._mutations[e]=[]);r.push(function(l){n.call(t,i.state,l)})}function sV(t,e,n,i){var r=t._actions[e]||(t._actions[e]=[]);r.push(function(l){var u=n.call(t,{dispatch:i.dispatch,commit:i.commit,getters:i.getters,state:i.state,rootGetters:t.getters,rootState:t.state},l);return tV(u)||(u=Promise.resolve(u)),t._devtoolHook?u.catch(function(h){throw t._devtoolHook.emit("vuex:error",h),h}):u})}function oV(t,e,n,i){t._wrappedGetters[e]||(t._wrappedGetters[e]=function(o){return n(i.state,i.getters,o.state,o.getters)})}function aV(t){Os(function(){return t._state.data},function(){},{deep:!0,flush:"sync"})}function lm(t,e){return e.reduce(function(n,i){return n[i]},t)}function ch(t,e,n){return eV(t)&&t.type&&(n=e,e=t,t=t.type),{type:t,payload:e,options:n}}var lV="vuex bindings",rw="vuex:mutations",lp="vuex:actions",go="vuex",cV=0;function uV(t,e){J2({id:"org.vuejs.vuex",app:t,label:"Vuex",homepage:"https://next.vuex.vuejs.org/",logo:"https://vuejs.org/images/icons/favicon-96x96.png",packageName:"vuex",componentStateTypes:[lV]},function(n){n.addTimelineLayer({id:rw,label:"Vuex Mutations",color:sw}),n.addTimelineLayer({id:lp,label:"Vuex Actions",color:sw}),n.addInspector({id:go,label:"Vuex",icon:"storage",treeFilterPlaceholder:"Filter stores..."}),n.on.getInspectorTree(function(i){if(i.app===t&&i.inspectorId===go)if(i.filter){var r=[];FI(r,e._modules.root,i.filter,""),i.rootNodes=r}else i.rootNodes=[$I(e._modules.root,"")]}),n.on.getInspectorState(function(i){if(i.app===t&&i.inspectorId===go){var r=i.nodeId;PI(e,r),i.state=dV(gV(e._modules,r),r==="root"?e.getters:e._makeLocalGettersCache,r)}}),n.on.editInspectorState(function(i){if(i.app===t&&i.inspectorId===go){var r=i.nodeId,o=i.path;r!=="root"&&(o=r.split("/").filter(Boolean).concat(o)),e._withCommit(function(){i.set(e._state.data,o,i.state.value)})}}),e.subscribe(function(i,r){var o={};i.payload&&(o.payload=i.payload),o.state=r,n.notifyComponentUpdate(),n.sendInspectorTree(go),n.sendInspectorState(go),n.addTimelineEvent({layerId:rw,event:{time:Date.now(),title:i.type,data:o}})}),e.subscribeAction({before:function(i,r){var o={};i.payload&&(o.payload=i.payload),i._id=cV++,i._time=Date.now(),o.state=r,n.addTimelineEvent({layerId:lp,event:{time:i._time,title:i.type,groupId:i._id,subtitle:"start",data:o}})},after:function(i,r){var o={},l=Date.now()-i._time;o.duration={_custom:{type:"duration",display:l+"ms",tooltip:"Action duration",value:l}},i.payload&&(o.payload=i.payload),o.state=r,n.addTimelineEvent({layerId:lp,event:{time:Date.now(),title:i.type,groupId:i._id,subtitle:"end",data:o}})}})})}var sw=8702998,hV=6710886,fV=16777215,kI={label:"namespaced",textColor:fV,backgroundColor:hV};function MI(t){return t&&t!=="root"?t.split("/").slice(-2,-1)[0]:"Root"}function $I(t,e){return{id:e||"root",label:MI(e),tags:t.namespaced?[kI]:[],children:Object.keys(t._children).map(function(n){return $I(t._children[n],e+n+"/")})}}function FI(t,e,n,i){i.includes(n)&&t.push({id:i||"root",label:i.endsWith("/")?i.slice(0,i.length-1):i||"Root",tags:e.namespaced?[kI]:[]}),Object.keys(e._children).forEach(function(r){FI(t,e._children[r],n,i+r+"/")})}function dV(t,e,n){e=n==="root"?e:e[n];var i=Object.keys(e),r={state:Object.keys(t.state).map(function(l){return{key:l,editable:!0,value:t.state[l]}})};if(i.length){var o=pV(e);r.getters=Object.keys(o).map(function(l){return{key:l.endsWith("/")?MI(l):l,editable:!1,value:Eg(function(){return o[l]})}})}return r}function pV(t){var e={};return Object.keys(t).forEach(function(n){var i=n.split("/");if(i.length>1){var r=e,o=i.pop();i.forEach(function(l){r[l]||(r[l]={_custom:{value:{},display:l,tooltip:"Module",abstract:!0}}),r=r[l]._custom.value}),r[o]=Eg(function(){return t[n]})}else e[n]=Eg(function(){return t[n]})}),e}function gV(t,e){var n=e.split("/").filter(function(i){return i});return n.reduce(function(i,r,o){var l=i[r];if(!l)throw new Error('Missing module "'+r+'" for path "'+e+'".');return o===n.length-1?l:l._children},e==="root"?t:t.root._children)}function Eg(t){try{return t()}catch(e){return e}}var di=function(e,n){this.runtime=n,this._children=Object.create(null),this._rawModule=e;var i=e.state;this.state=(typeof i=="function"?i():i)||{}},UI={namespaced:{configurable:!0}};UI.namespaced.get=function(){return!!this._rawModule.namespaced};di.prototype.addChild=function(e,n){this._children[e]=n};di.prototype.removeChild=function(e){delete this._children[e]};di.prototype.getChild=function(e){return this._children[e]};di.prototype.hasChild=function(e){return e in this._children};di.prototype.update=function(e){this._rawModule.namespaced=e.namespaced,e.actions&&(this._rawModule.actions=e.actions),e.mutations&&(this._rawModule.mutations=e.mutations),e.getters&&(this._rawModule.getters=e.getters)};di.prototype.forEachChild=function(e){ca(this._children,e)};di.prototype.forEachGetter=function(e){this._rawModule.getters&&ca(this._rawModule.getters,e)};di.prototype.forEachAction=function(e){this._rawModule.actions&&ca(this._rawModule.actions,e)};di.prototype.forEachMutation=function(e){this._rawModule.mutations&&ca(this._rawModule.mutations,e)};Object.defineProperties(di.prototype,UI);var qs=function(e){this.register([],e,!1)};qs.prototype.get=function(e){return e.reduce(function(n,i){return n.getChild(i)},this.root)};qs.prototype.getNamespace=function(e){var n=this.root;return e.reduce(function(i,r){return n=n.getChild(r),i+(n.namespaced?r+"/":"")},"")};qs.prototype.update=function(e){BI([],this.root,e)};qs.prototype.register=function(e,n,i){var r=this;i===void 0&&(i=!0);var o=new di(n,i);if(e.length===0)this.root=o;else{var l=this.get(e.slice(0,-1));l.addChild(e[e.length-1],o)}n.modules&&ca(n.modules,function(u,h){r.register(e.concat(h),u,i)})};qs.prototype.unregister=function(e){var n=this.get(e.slice(0,-1)),i=e[e.length-1],r=n.getChild(i);r&&r.runtime&&n.removeChild(i)};qs.prototype.isRegistered=function(e){var n=this.get(e.slice(0,-1)),i=e[e.length-1];return n?n.hasChild(i):!1};function BI(t,e,n){if(e.update(n),n.modules)for(var i in n.modules){if(!e.getChild(i))return;BI(t.concat(i),e.getChild(i),n.modules[i])}}function _V(t){return new bn(t)}var bn=function(e){var n=this;e===void 0&&(e={});var i=e.plugins;i===void 0&&(i=[]);var r=e.strict;r===void 0&&(r=!1);var o=e.devtools;this._committing=!1,this._actions=Object.create(null),this._actionSubscribers=[],this._mutations=Object.create(null),this._wrappedGetters=Object.create(null),this._modules=new qs(e),this._modulesNamespaceMap=Object.create(null),this._subscribers=[],this._makeLocalGettersCache=Object.create(null),this._devtools=o;var l=this,u=this,h=u.dispatch,d=u.commit;this.dispatch=function(y,b){return h.call(l,y,b)},this.commit=function(y,b,S){return d.call(l,y,b,S)},this.strict=r;var p=this._modules.root.state;sf(this,p,[],this._modules.root),am(this,p),i.forEach(function(_){return _(n)})},cm={state:{configurable:!0}};bn.prototype.install=function(e,n){e.provide(n||Z2,this),e.config.globalProperties.$store=this;var i=this._devtools!==void 0?this._devtools:!1;i&&uV(e,this)};cm.state.get=function(){return this._state.data};cm.state.set=function(t){};bn.prototype.commit=function(e,n,i){var r=this,o=ch(e,n,i),l=o.type,u=o.payload,h={type:l,payload:u},d=this._mutations[l];d&&(this._withCommit(function(){d.forEach(function(_){_(u)})}),this._subscribers.slice().forEach(function(p){return p(h,r.state)}))};bn.prototype.dispatch=function(e,n){var i=this,r=ch(e,n),o=r.type,l=r.payload,u={type:o,payload:l},h=this._actions[o];if(h){try{this._actionSubscribers.slice().filter(function(p){return p.before}).forEach(function(p){return p.before(u,i.state)})}catch{}var d=h.length>1?Promise.all(h.map(function(p){return p(l)})):h[0](l);return new Promise(function(p,_){d.then(function(y){try{i._actionSubscribers.filter(function(b){return b.after}).forEach(function(b){return b.after(u,i.state)})}catch{}p(y)},function(y){try{i._actionSubscribers.filter(function(b){return b.error}).forEach(function(b){return b.error(u,i.state,y)})}catch{}_(y)})})}};bn.prototype.subscribe=function(e,n){return DI(e,this._subscribers,n)};bn.prototype.subscribeAction=function(e,n){var i=typeof e=="function"?{before:e}:e;return DI(i,this._actionSubscribers,n)};bn.prototype.watch=function(e,n,i){var r=this;return Os(function(){return e(r.state,r.getters)},n,Object.assign({},i))};bn.prototype.replaceState=function(e){var n=this;this._withCommit(function(){n._state.data=e})};bn.prototype.registerModule=function(e,n,i){i===void 0&&(i={}),typeof e=="string"&&(e=[e]),this._modules.register(e,n),sf(this,this.state,e,this._modules.get(e),i.preserveState),am(this,this.state)};bn.prototype.unregisterModule=function(e){var n=this;typeof e=="string"&&(e=[e]),this._modules.unregister(e),this._withCommit(function(){var i=lm(n.state,e.slice(0,-1));delete i[e[e.length-1]]}),LI(this)};bn.prototype.hasModule=function(e){return typeof e=="string"&&(e=[e]),this._modules.isRegistered(e)};bn.prototype.hotUpdate=function(e){this._modules.update(e),LI(this,!0)};bn.prototype._withCommit=function(e){var n=this._committing;this._committing=!0,e(),this._committing=n};Object.defineProperties(bn.prototype,cm);const ne=_V({state:{rooms:void 0,teams:void 0,users:void 0,squads:void 0,markers:void 0,roomsReady:!1,teamsReady:!1,usersReady:!1,squadsReady:!1,sessionId:void 0,username:void 0,useGPS:!1,gameData:{},currentUser:{},location:{},markerData:{},isAdmin:!1},mutations:{saveRooms(t,e){t.rooms=e,t.roomsReady=!0},saveUsers(t,e){t.users=e,t.usersReady=!0},saveTeams(t,e){t.teams=e,t.teamsReady=!0},saveSquads(t,e){t.squads=e,t.squadsReady=!0},saveMarkers(t,e){t.markers=e},saveUseGPS(t,e){t.useGPS=e},saveSessionId(t,e){t.sessionId=e},saveData(t,e){t.gameData=e},saveUsername(t,e){t.username=e},saveLocation(t,e){t.location=e},saveMarkerData(t,e){t.markerData.markers=e},saveAdminState(t,e){t.isAdmin=e}},actions:{},getters:{dataReady(t){return t.roomsReady&&t.teamsReady&&t.squadsReady&&t.sessionId!=null&&t.usersReady},username(t){return t.username},currentSquad(t){let e=ne.getters.sessionId;if(t.squads&&t.users&&t.users[e])return t.users[e].squadId},sessionId(t){return t.sessionId},user(t){if(t.users)return t.users[t.sessionId]},mapCenter(t){if(t.rooms&&t.rooms[yn.roomId]&&t.rooms[yn.roomId].map&&t.rooms[yn.roomId].map.location)return t.rooms[yn.roomId].map.location},markers(t){return t.markers},spotDurationMS(t){if(!(!t.rooms||!t.rooms[yn.roomId]))return t.rooms[yn.roomId].spotDurationMS},useGPS(t){return t.useGPS},isAdmin(t){return t.isAdmin},rooms(t){return t.rooms},users(t){return t.users},teams(t){return t.teams},squads(t){return t.squads},squadsInTeam(t,e){},getSpotMarkers(t){let e=[];if(!ne.getters.user||!ne.getters.markers)return e;let n=ne.getters.user.teamId;return e=Object.keys(ne.getters.markers).map(r=>ne.getters.markers[r]).filter(r=>r.teamId==n),e},getTeamMarkers(t){let e=[],n=ne.getters.sessionId,i=ne.getters.user;if(!n||!t.users||!t.users[n]||!t.squads||!t.users)return e;if(ne.getters.sessionId){let r=t.users[n].teamId;if(!r)return e;if(!t.teams)return;let o=t.teams[r].squadIds;Object.keys(o).forEach(l=>{let u=o[l];if(!t.squads)return;let h=t.squads[u].userIds;h&&Object.keys(h).forEach(d=>{if(!t.squads||!t.users)return;let p=t.users[d];if(p.location){let _=d==n,y=i.squadId==u,b=p.isSquadLeader,S={markerType:"team-member",lat:p.location.lat,long:p.location.long,squadNumber:t.squads[u].squadName.replace("Squad ","")};b&&(S.markerType="squad-leader"),y&&(S.markerType="squad-member"),y&&b&&(S.markerType="squadmate-squad-leader"),_&&(S.markerType="me"),_&&b&&(S.markerType="me-squad-leader"),e.push(S)}})})}return e}}});let ow=!1;const Ze={uuidv4:()=>{var t=new Date().getTime(),e=typeof performance<"u"&&performance.now&&performance.now()*1e3||0;return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(n){var i=Math.random()*16;return t>0?(i=(t+i)%16|0,t=Math.floor(t/16)):(i=(e+i)%16|0,e=Math.floor(e/16)),(n==="x"?i:i&3|8).toString(16)})},distance:(t,e,n,i,r)=>{if(t==n&&e==i)return 0;var o=Math.PI*t/180,l=Math.PI*n/180,u=e-i,h=Math.PI*u/180,d=Math.sin(o)*Math.sin(l)+Math.cos(o)*Math.cos(l)*Math.cos(h);return d>1&&(d=1),d=Math.acos(d),d=d*180/Math.PI,d=d*60*1.1515,r=="K"&&(d=d*1.609344),r=="N"&&(d=d*.8684),d},getCircularReplacer:()=>{const t=new WeakSet;return(e,n)=>{if(typeof n=="object"&&n!==null){if(t.has(n))return;t.add(n)}return n}},randomRange:(t,e)=>Math.floor(Math.random()*(e-t+1)+t),randomGeo:(t,e)=>{var n=t.lat,i=t.long,r=e/111300,o=Math.random(),l=Math.random(),u=r*Math.sqrt(o),h=2*Math.PI*l,d=u*Math.cos(h),p=u*Math.sin(h),_=d/Math.cos(n),y=p+n,b=d+i,S=_+i;return{latitude:y.toFixed(5),longitude:b.toFixed(5),longitude2:S.toFixed(5),distance:Ze.CoordDistance(t.lat,t.long,y,b).toFixed(2),distance2:Ze.CoordDistance(t.lat,t.long,y,S).toFixed(2)}},CoordDistance:(t,e,n,i)=>{var r=6371e3,o=.5-Math.cos((n-t)*Math.PI/180)/2+Math.cos(t*Math.PI/180)*Math.cos(n*Math.PI/180)*(1-Math.cos((i-e)*Math.PI/180))/2;return r*2*Math.asin(Math.sqrt(o))},pathToIndex:t=>{let e=t.split("/"),n={r:e[1],t:e[3],s:e[5]};return e[7]&&(n.p=e[7]),n},error:t=>{console.trace(),console.error(t)},DataCheck:()=>{let t=ne.getters.dataReady;t&&!ow&&(vt.emit("data-ready"),ow=!0),t&&vt.emit("data-updated")},formatDistance(t){return t<500?Math.round(t/10)*10:t>=500?Math.round(t/100)*100:t}};var $a=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Ol={},mV={get exports(){return Ol},set exports(t){Ol=t}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */(function(t,e){(function(){var n,i="4.17.21",r=200,o="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",l="Expected a function",u="Invalid `variable` option passed into `_.template`",h="__lodash_hash_undefined__",d=500,p="__lodash_placeholder__",_=1,y=2,b=4,S=1,N=2,k=1,G=2,oe=4,H=8,V=16,Q=32,B=64,Z=128,X=256,de=512,pe=30,Fe="...",rt=800,Ye=16,jt=1,Ln=2,Be=3,ye=1/0,we=9007199254740991,Pt=17976931348623157e292,hn=0/0,ct=4294967295,St=ct-1,Hi=ct>>>1,_i=[["ary",Z],["bind",k],["bindKey",G],["curry",H],["curryRight",V],["flip",de],["partial",Q],["partialRight",B],["rearg",X]],kt="[object Arguments]",mt="[object Array]",Zn="[object AsyncFunction]",qt="[object Boolean]",Kt="[object Date]",ts="[object DOMException]",Pn="[object Error]",w="[object Function]",C="[object GeneratorFunction]",R="[object Map]",M="[object Number]",$="[object Null]",W="[object Object]",z="[object Promise]",q="[object Proxy]",j="[object RegExp]",P="[object Set]",te="[object String]",J="[object Symbol]",se="[object Undefined]",ae="[object WeakMap]",Ee="[object WeakSet]",Pe="[object ArrayBuffer]",Se="[object DataView]",st="[object Float32Array]",en="[object Float64Array]",mi="[object Int8Array]",Ys="[object Int16Array]",Vi="[object Int32Array]",Xs="[object Uint8Array]",Mt="[object Uint8ClampedArray]",fn="[object Uint16Array]",Qs="[object Uint32Array]",QA=/\b__p \+= '';/g,JA=/\b(__p \+=) '' \+/g,ZA=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Nm=/&(?:amp|lt|gt|quot|#39);/g,Rm=/[&<>"']/g,eS=RegExp(Nm.source),tS=RegExp(Rm.source),nS=/<%-([\s\S]+?)%>/g,iS=/<%([\s\S]+?)%>/g,xm=/<%=([\s\S]+?)%>/g,rS=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,sS=/^\w*$/,oS=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,yf=/[\\^$.*+?()[\]{}|]/g,aS=RegExp(yf.source),Ef=/^\s+/,lS=/\s/,cS=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,uS=/\{\n\/\* \[wrapped with (.+)\] \*/,hS=/,? & /,fS=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,dS=/[()=,{}\[\]\/\s]/,pS=/\\(\\)?/g,gS=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Dm=/\w*$/,_S=/^[-+]0x[0-9a-f]+$/i,mS=/^0b[01]+$/i,vS=/^\[object .+?Constructor\]$/,yS=/^0o[0-7]+$/i,ES=/^(?:0|[1-9]\d*)$/,bS=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,rc=/($^)/,wS=/['\n\r\u2028\u2029\\]/g,sc="\\ud800-\\udfff",TS="\\u0300-\\u036f",CS="\\ufe20-\\ufe2f",IS="\\u20d0-\\u20ff",Lm=TS+CS+IS,Pm="\\u2700-\\u27bf",km="a-z\\xdf-\\xf6\\xf8-\\xff",AS="\\xac\\xb1\\xd7\\xf7",SS="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",OS="\\u2000-\\u206f",NS=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Mm="A-Z\\xc0-\\xd6\\xd8-\\xde",$m="\\ufe0e\\ufe0f",Fm=AS+SS+OS+NS,bf="['’]",RS="["+sc+"]",Um="["+Fm+"]",oc="["+Lm+"]",Bm="\\d+",xS="["+Pm+"]",Wm="["+km+"]",Hm="[^"+sc+Fm+Bm+Pm+km+Mm+"]",wf="\\ud83c[\\udffb-\\udfff]",DS="(?:"+oc+"|"+wf+")",Vm="[^"+sc+"]",Tf="(?:\\ud83c[\\udde6-\\uddff]){2}",Cf="[\\ud800-\\udbff][\\udc00-\\udfff]",Js="["+Mm+"]",jm="\\u200d",qm="(?:"+Wm+"|"+Hm+")",LS="(?:"+Js+"|"+Hm+")",Km="(?:"+bf+"(?:d|ll|m|re|s|t|ve))?",Gm="(?:"+bf+"(?:D|LL|M|RE|S|T|VE))?",zm=DS+"?",Ym="["+$m+"]?",PS="(?:"+jm+"(?:"+[Vm,Tf,Cf].join("|")+")"+Ym+zm+")*",kS="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",MS="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Xm=Ym+zm+PS,$S="(?:"+[xS,Tf,Cf].join("|")+")"+Xm,FS="(?:"+[Vm+oc+"?",oc,Tf,Cf,RS].join("|")+")",US=RegExp(bf,"g"),BS=RegExp(oc,"g"),If=RegExp(wf+"(?="+wf+")|"+FS+Xm,"g"),WS=RegExp([Js+"?"+Wm+"+"+Km+"(?="+[Um,Js,"$"].join("|")+")",LS+"+"+Gm+"(?="+[Um,Js+qm,"$"].join("|")+")",Js+"?"+qm+"+"+Km,Js+"+"+Gm,MS,kS,Bm,$S].join("|"),"g"),HS=RegExp("["+jm+sc+Lm+$m+"]"),VS=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,jS=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],qS=-1,nt={};nt[st]=nt[en]=nt[mi]=nt[Ys]=nt[Vi]=nt[Xs]=nt[Mt]=nt[fn]=nt[Qs]=!0,nt[kt]=nt[mt]=nt[Pe]=nt[qt]=nt[Se]=nt[Kt]=nt[Pn]=nt[w]=nt[R]=nt[M]=nt[W]=nt[j]=nt[P]=nt[te]=nt[ae]=!1;var Qe={};Qe[kt]=Qe[mt]=Qe[Pe]=Qe[Se]=Qe[qt]=Qe[Kt]=Qe[st]=Qe[en]=Qe[mi]=Qe[Ys]=Qe[Vi]=Qe[R]=Qe[M]=Qe[W]=Qe[j]=Qe[P]=Qe[te]=Qe[J]=Qe[Xs]=Qe[Mt]=Qe[fn]=Qe[Qs]=!0,Qe[Pn]=Qe[w]=Qe[ae]=!1;var KS={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"},GS={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},zS={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},YS={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},XS=parseFloat,QS=parseInt,Qm=typeof $a=="object"&&$a&&$a.Object===Object&&$a,JS=typeof self=="object"&&self&&self.Object===Object&&self,$t=Qm||JS||Function("return this")(),Af=e&&!e.nodeType&&e,ns=Af&&!0&&t&&!t.nodeType&&t,Jm=ns&&ns.exports===Af,Sf=Jm&&Qm.process,kn=function(){try{var I=ns&&ns.require&&ns.require("util").types;return I||Sf&&Sf.binding&&Sf.binding("util")}catch{}}(),Zm=kn&&kn.isArrayBuffer,ev=kn&&kn.isDate,tv=kn&&kn.isMap,nv=kn&&kn.isRegExp,iv=kn&&kn.isSet,rv=kn&&kn.isTypedArray;function wn(I,x,O){switch(O.length){case 0:return I.call(x);case 1:return I.call(x,O[0]);case 2:return I.call(x,O[0],O[1]);case 3:return I.call(x,O[0],O[1],O[2])}return I.apply(x,O)}function ZS(I,x,O,ee){for(var me=-1,We=I==null?0:I.length;++me<We;){var yt=I[me];x(ee,yt,O(yt),I)}return ee}function Mn(I,x){for(var O=-1,ee=I==null?0:I.length;++O<ee&&x(I[O],O,I)!==!1;);return I}function eO(I,x){for(var O=I==null?0:I.length;O--&&x(I[O],O,I)!==!1;);return I}function sv(I,x){for(var O=-1,ee=I==null?0:I.length;++O<ee;)if(!x(I[O],O,I))return!1;return!0}function _r(I,x){for(var O=-1,ee=I==null?0:I.length,me=0,We=[];++O<ee;){var yt=I[O];x(yt,O,I)&&(We[me++]=yt)}return We}function ac(I,x){var O=I==null?0:I.length;return!!O&&Zs(I,x,0)>-1}function Of(I,x,O){for(var ee=-1,me=I==null?0:I.length;++ee<me;)if(O(x,I[ee]))return!0;return!1}function ot(I,x){for(var O=-1,ee=I==null?0:I.length,me=Array(ee);++O<ee;)me[O]=x(I[O],O,I);return me}function mr(I,x){for(var O=-1,ee=x.length,me=I.length;++O<ee;)I[me+O]=x[O];return I}function Nf(I,x,O,ee){var me=-1,We=I==null?0:I.length;for(ee&&We&&(O=I[++me]);++me<We;)O=x(O,I[me],me,I);return O}function tO(I,x,O,ee){var me=I==null?0:I.length;for(ee&&me&&(O=I[--me]);me--;)O=x(O,I[me],me,I);return O}function Rf(I,x){for(var O=-1,ee=I==null?0:I.length;++O<ee;)if(x(I[O],O,I))return!0;return!1}var nO=xf("length");function iO(I){return I.split("")}function rO(I){return I.match(fS)||[]}function ov(I,x,O){var ee;return O(I,function(me,We,yt){if(x(me,We,yt))return ee=We,!1}),ee}function lc(I,x,O,ee){for(var me=I.length,We=O+(ee?1:-1);ee?We--:++We<me;)if(x(I[We],We,I))return We;return-1}function Zs(I,x,O){return x===x?_O(I,x,O):lc(I,av,O)}function sO(I,x,O,ee){for(var me=O-1,We=I.length;++me<We;)if(ee(I[me],x))return me;return-1}function av(I){return I!==I}function lv(I,x){var O=I==null?0:I.length;return O?Lf(I,x)/O:hn}function xf(I){return function(x){return x==null?n:x[I]}}function Df(I){return function(x){return I==null?n:I[x]}}function cv(I,x,O,ee,me){return me(I,function(We,yt,Xe){O=ee?(ee=!1,We):x(O,We,yt,Xe)}),O}function oO(I,x){var O=I.length;for(I.sort(x);O--;)I[O]=I[O].value;return I}function Lf(I,x){for(var O,ee=-1,me=I.length;++ee<me;){var We=x(I[ee]);We!==n&&(O=O===n?We:O+We)}return O}function Pf(I,x){for(var O=-1,ee=Array(I);++O<I;)ee[O]=x(O);return ee}function aO(I,x){return ot(x,function(O){return[O,I[O]]})}function uv(I){return I&&I.slice(0,pv(I)+1).replace(Ef,"")}function Tn(I){return function(x){return I(x)}}function kf(I,x){return ot(x,function(O){return I[O]})}function ma(I,x){return I.has(x)}function hv(I,x){for(var O=-1,ee=I.length;++O<ee&&Zs(x,I[O],0)>-1;);return O}function fv(I,x){for(var O=I.length;O--&&Zs(x,I[O],0)>-1;);return O}function lO(I,x){for(var O=I.length,ee=0;O--;)I[O]===x&&++ee;return ee}var cO=Df(KS),uO=Df(GS);function hO(I){return"\\"+YS[I]}function fO(I,x){return I==null?n:I[x]}function eo(I){return HS.test(I)}function dO(I){return VS.test(I)}function pO(I){for(var x,O=[];!(x=I.next()).done;)O.push(x.value);return O}function Mf(I){var x=-1,O=Array(I.size);return I.forEach(function(ee,me){O[++x]=[me,ee]}),O}function dv(I,x){return function(O){return I(x(O))}}function vr(I,x){for(var O=-1,ee=I.length,me=0,We=[];++O<ee;){var yt=I[O];(yt===x||yt===p)&&(I[O]=p,We[me++]=O)}return We}function cc(I){var x=-1,O=Array(I.size);return I.forEach(function(ee){O[++x]=ee}),O}function gO(I){var x=-1,O=Array(I.size);return I.forEach(function(ee){O[++x]=[ee,ee]}),O}function _O(I,x,O){for(var ee=O-1,me=I.length;++ee<me;)if(I[ee]===x)return ee;return-1}function mO(I,x,O){for(var ee=O+1;ee--;)if(I[ee]===x)return ee;return ee}function to(I){return eo(I)?yO(I):nO(I)}function ei(I){return eo(I)?EO(I):iO(I)}function pv(I){for(var x=I.length;x--&&lS.test(I.charAt(x)););return x}var vO=Df(zS);function yO(I){for(var x=If.lastIndex=0;If.test(I);)++x;return x}function EO(I){return I.match(If)||[]}function bO(I){return I.match(WS)||[]}var wO=function I(x){x=x==null?$t:no.defaults($t.Object(),x,no.pick($t,jS));var O=x.Array,ee=x.Date,me=x.Error,We=x.Function,yt=x.Math,Xe=x.Object,$f=x.RegExp,TO=x.String,$n=x.TypeError,uc=O.prototype,CO=We.prototype,io=Xe.prototype,hc=x["__core-js_shared__"],fc=CO.toString,qe=io.hasOwnProperty,IO=0,gv=function(){var s=/[^.]+$/.exec(hc&&hc.keys&&hc.keys.IE_PROTO||"");return s?"Symbol(src)_1."+s:""}(),dc=io.toString,AO=fc.call(Xe),SO=$t._,OO=$f("^"+fc.call(qe).replace(yf,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),pc=Jm?x.Buffer:n,yr=x.Symbol,gc=x.Uint8Array,_v=pc?pc.allocUnsafe:n,_c=dv(Xe.getPrototypeOf,Xe),mv=Xe.create,vv=io.propertyIsEnumerable,mc=uc.splice,yv=yr?yr.isConcatSpreadable:n,va=yr?yr.iterator:n,is=yr?yr.toStringTag:n,vc=function(){try{var s=ls(Xe,"defineProperty");return s({},"",{}),s}catch{}}(),NO=x.clearTimeout!==$t.clearTimeout&&x.clearTimeout,RO=ee&&ee.now!==$t.Date.now&&ee.now,xO=x.setTimeout!==$t.setTimeout&&x.setTimeout,yc=yt.ceil,Ec=yt.floor,Ff=Xe.getOwnPropertySymbols,DO=pc?pc.isBuffer:n,Ev=x.isFinite,LO=uc.join,PO=dv(Xe.keys,Xe),Et=yt.max,Gt=yt.min,kO=ee.now,MO=x.parseInt,bv=yt.random,$O=uc.reverse,Uf=ls(x,"DataView"),ya=ls(x,"Map"),Bf=ls(x,"Promise"),ro=ls(x,"Set"),Ea=ls(x,"WeakMap"),ba=ls(Xe,"create"),bc=Ea&&new Ea,so={},FO=cs(Uf),UO=cs(ya),BO=cs(Bf),WO=cs(ro),HO=cs(Ea),wc=yr?yr.prototype:n,wa=wc?wc.valueOf:n,wv=wc?wc.toString:n;function m(s){if(ut(s)&&!ve(s)&&!(s instanceof De)){if(s instanceof Fn)return s;if(qe.call(s,"__wrapped__"))return Ty(s)}return new Fn(s)}var oo=function(){function s(){}return function(a){if(!lt(a))return{};if(mv)return mv(a);s.prototype=a;var c=new s;return s.prototype=n,c}}();function Tc(){}function Fn(s,a){this.__wrapped__=s,this.__actions__=[],this.__chain__=!!a,this.__index__=0,this.__values__=n}m.templateSettings={escape:nS,evaluate:iS,interpolate:xm,variable:"",imports:{_:m}},m.prototype=Tc.prototype,m.prototype.constructor=m,Fn.prototype=oo(Tc.prototype),Fn.prototype.constructor=Fn;function De(s){this.__wrapped__=s,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=ct,this.__views__=[]}function VO(){var s=new De(this.__wrapped__);return s.__actions__=dn(this.__actions__),s.__dir__=this.__dir__,s.__filtered__=this.__filtered__,s.__iteratees__=dn(this.__iteratees__),s.__takeCount__=this.__takeCount__,s.__views__=dn(this.__views__),s}function jO(){if(this.__filtered__){var s=new De(this);s.__dir__=-1,s.__filtered__=!0}else s=this.clone(),s.__dir__*=-1;return s}function qO(){var s=this.__wrapped__.value(),a=this.__dir__,c=ve(s),f=a<0,g=c?s.length:0,v=i1(0,g,this.__views__),E=v.start,T=v.end,A=T-E,D=f?T:E-1,L=this.__iteratees__,F=L.length,Y=0,ie=Gt(A,this.__takeCount__);if(!c||!f&&g==A&&ie==A)return Kv(s,this.__actions__);var ce=[];e:for(;A--&&Y<ie;){D+=a;for(var Te=-1,ue=s[D];++Te<F;){var Re=L[Te],ke=Re.iteratee,An=Re.type,rn=ke(ue);if(An==Ln)ue=rn;else if(!rn){if(An==jt)continue e;break e}}ce[Y++]=ue}return ce}De.prototype=oo(Tc.prototype),De.prototype.constructor=De;function rs(s){var a=-1,c=s==null?0:s.length;for(this.clear();++a<c;){var f=s[a];this.set(f[0],f[1])}}function KO(){this.__data__=ba?ba(null):{},this.size=0}function GO(s){var a=this.has(s)&&delete this.__data__[s];return this.size-=a?1:0,a}function zO(s){var a=this.__data__;if(ba){var c=a[s];return c===h?n:c}return qe.call(a,s)?a[s]:n}function YO(s){var a=this.__data__;return ba?a[s]!==n:qe.call(a,s)}function XO(s,a){var c=this.__data__;return this.size+=this.has(s)?0:1,c[s]=ba&&a===n?h:a,this}rs.prototype.clear=KO,rs.prototype.delete=GO,rs.prototype.get=zO,rs.prototype.has=YO,rs.prototype.set=XO;function ji(s){var a=-1,c=s==null?0:s.length;for(this.clear();++a<c;){var f=s[a];this.set(f[0],f[1])}}function QO(){this.__data__=[],this.size=0}function JO(s){var a=this.__data__,c=Cc(a,s);if(c<0)return!1;var f=a.length-1;return c==f?a.pop():mc.call(a,c,1),--this.size,!0}function ZO(s){var a=this.__data__,c=Cc(a,s);return c<0?n:a[c][1]}function eN(s){return Cc(this.__data__,s)>-1}function tN(s,a){var c=this.__data__,f=Cc(c,s);return f<0?(++this.size,c.push([s,a])):c[f][1]=a,this}ji.prototype.clear=QO,ji.prototype.delete=JO,ji.prototype.get=ZO,ji.prototype.has=eN,ji.prototype.set=tN;function qi(s){var a=-1,c=s==null?0:s.length;for(this.clear();++a<c;){var f=s[a];this.set(f[0],f[1])}}function nN(){this.size=0,this.__data__={hash:new rs,map:new(ya||ji),string:new rs}}function iN(s){var a=Mc(this,s).delete(s);return this.size-=a?1:0,a}function rN(s){return Mc(this,s).get(s)}function sN(s){return Mc(this,s).has(s)}function oN(s,a){var c=Mc(this,s),f=c.size;return c.set(s,a),this.size+=c.size==f?0:1,this}qi.prototype.clear=nN,qi.prototype.delete=iN,qi.prototype.get=rN,qi.prototype.has=sN,qi.prototype.set=oN;function ss(s){var a=-1,c=s==null?0:s.length;for(this.__data__=new qi;++a<c;)this.add(s[a])}function aN(s){return this.__data__.set(s,h),this}function lN(s){return this.__data__.has(s)}ss.prototype.add=ss.prototype.push=aN,ss.prototype.has=lN;function ti(s){var a=this.__data__=new ji(s);this.size=a.size}function cN(){this.__data__=new ji,this.size=0}function uN(s){var a=this.__data__,c=a.delete(s);return this.size=a.size,c}function hN(s){return this.__data__.get(s)}function fN(s){return this.__data__.has(s)}function dN(s,a){var c=this.__data__;if(c instanceof ji){var f=c.__data__;if(!ya||f.length<r-1)return f.push([s,a]),this.size=++c.size,this;c=this.__data__=new qi(f)}return c.set(s,a),this.size=c.size,this}ti.prototype.clear=cN,ti.prototype.delete=uN,ti.prototype.get=hN,ti.prototype.has=fN,ti.prototype.set=dN;function Tv(s,a){var c=ve(s),f=!c&&us(s),g=!c&&!f&&Cr(s),v=!c&&!f&&!g&&uo(s),E=c||f||g||v,T=E?Pf(s.length,TO):[],A=T.length;for(var D in s)(a||qe.call(s,D))&&!(E&&(D=="length"||g&&(D=="offset"||D=="parent")||v&&(D=="buffer"||D=="byteLength"||D=="byteOffset")||Yi(D,A)))&&T.push(D);return T}function Cv(s){var a=s.length;return a?s[Qf(0,a-1)]:n}function pN(s,a){return $c(dn(s),os(a,0,s.length))}function gN(s){return $c(dn(s))}function Wf(s,a,c){(c!==n&&!ni(s[a],c)||c===n&&!(a in s))&&Ki(s,a,c)}function Ta(s,a,c){var f=s[a];(!(qe.call(s,a)&&ni(f,c))||c===n&&!(a in s))&&Ki(s,a,c)}function Cc(s,a){for(var c=s.length;c--;)if(ni(s[c][0],a))return c;return-1}function _N(s,a,c,f){return Er(s,function(g,v,E){a(f,g,c(g),E)}),f}function Iv(s,a){return s&&yi(a,Ot(a),s)}function mN(s,a){return s&&yi(a,gn(a),s)}function Ki(s,a,c){a=="__proto__"&&vc?vc(s,a,{configurable:!0,enumerable:!0,value:c,writable:!0}):s[a]=c}function Hf(s,a){for(var c=-1,f=a.length,g=O(f),v=s==null;++c<f;)g[c]=v?n:wd(s,a[c]);return g}function os(s,a,c){return s===s&&(c!==n&&(s=s<=c?s:c),a!==n&&(s=s>=a?s:a)),s}function Un(s,a,c,f,g,v){var E,T=a&_,A=a&y,D=a&b;if(c&&(E=g?c(s,f,g,v):c(s)),E!==n)return E;if(!lt(s))return s;var L=ve(s);if(L){if(E=s1(s),!T)return dn(s,E)}else{var F=zt(s),Y=F==w||F==C;if(Cr(s))return Yv(s,T);if(F==W||F==kt||Y&&!g){if(E=A||Y?{}:py(s),!T)return A?zN(s,mN(E,s)):GN(s,Iv(E,s))}else{if(!Qe[F])return g?s:{};E=o1(s,F,T)}}v||(v=new ti);var ie=v.get(s);if(ie)return ie;v.set(s,E),Vy(s)?s.forEach(function(ue){E.add(Un(ue,a,c,ue,s,v))}):Wy(s)&&s.forEach(function(ue,Re){E.set(Re,Un(ue,a,c,Re,s,v))});var ce=D?A?ld:ad:A?gn:Ot,Te=L?n:ce(s);return Mn(Te||s,function(ue,Re){Te&&(Re=ue,ue=s[Re]),Ta(E,Re,Un(ue,a,c,Re,s,v))}),E}function vN(s){var a=Ot(s);return function(c){return Av(c,s,a)}}function Av(s,a,c){var f=c.length;if(s==null)return!f;for(s=Xe(s);f--;){var g=c[f],v=a[g],E=s[g];if(E===n&&!(g in s)||!v(E))return!1}return!0}function Sv(s,a,c){if(typeof s!="function")throw new $n(l);return Ra(function(){s.apply(n,c)},a)}function Ca(s,a,c,f){var g=-1,v=ac,E=!0,T=s.length,A=[],D=a.length;if(!T)return A;c&&(a=ot(a,Tn(c))),f?(v=Of,E=!1):a.length>=r&&(v=ma,E=!1,a=new ss(a));e:for(;++g<T;){var L=s[g],F=c==null?L:c(L);if(L=f||L!==0?L:0,E&&F===F){for(var Y=D;Y--;)if(a[Y]===F)continue e;A.push(L)}else v(a,F,f)||A.push(L)}return A}var Er=ey(vi),Ov=ey(jf,!0);function yN(s,a){var c=!0;return Er(s,function(f,g,v){return c=!!a(f,g,v),c}),c}function Ic(s,a,c){for(var f=-1,g=s.length;++f<g;){var v=s[f],E=a(v);if(E!=null&&(T===n?E===E&&!In(E):c(E,T)))var T=E,A=v}return A}function EN(s,a,c,f){var g=s.length;for(c=be(c),c<0&&(c=-c>g?0:g+c),f=f===n||f>g?g:be(f),f<0&&(f+=g),f=c>f?0:qy(f);c<f;)s[c++]=a;return s}function Nv(s,a){var c=[];return Er(s,function(f,g,v){a(f,g,v)&&c.push(f)}),c}function Ft(s,a,c,f,g){var v=-1,E=s.length;for(c||(c=l1),g||(g=[]);++v<E;){var T=s[v];a>0&&c(T)?a>1?Ft(T,a-1,c,f,g):mr(g,T):f||(g[g.length]=T)}return g}var Vf=ty(),Rv=ty(!0);function vi(s,a){return s&&Vf(s,a,Ot)}function jf(s,a){return s&&Rv(s,a,Ot)}function Ac(s,a){return _r(a,function(c){return Xi(s[c])})}function as(s,a){a=wr(a,s);for(var c=0,f=a.length;s!=null&&c<f;)s=s[Ei(a[c++])];return c&&c==f?s:n}function xv(s,a,c){var f=a(s);return ve(s)?f:mr(f,c(s))}function tn(s){return s==null?s===n?se:$:is&&is in Xe(s)?n1(s):g1(s)}function qf(s,a){return s>a}function bN(s,a){return s!=null&&qe.call(s,a)}function wN(s,a){return s!=null&&a in Xe(s)}function TN(s,a,c){return s>=Gt(a,c)&&s<Et(a,c)}function Kf(s,a,c){for(var f=c?Of:ac,g=s[0].length,v=s.length,E=v,T=O(v),A=1/0,D=[];E--;){var L=s[E];E&&a&&(L=ot(L,Tn(a))),A=Gt(L.length,A),T[E]=!c&&(a||g>=120&&L.length>=120)?new ss(E&&L):n}L=s[0];var F=-1,Y=T[0];e:for(;++F<g&&D.length<A;){var ie=L[F],ce=a?a(ie):ie;if(ie=c||ie!==0?ie:0,!(Y?ma(Y,ce):f(D,ce,c))){for(E=v;--E;){var Te=T[E];if(!(Te?ma(Te,ce):f(s[E],ce,c)))continue e}Y&&Y.push(ce),D.push(ie)}}return D}function CN(s,a,c,f){return vi(s,function(g,v,E){a(f,c(g),v,E)}),f}function Ia(s,a,c){a=wr(a,s),s=vy(s,a);var f=s==null?s:s[Ei(Wn(a))];return f==null?n:wn(f,s,c)}function Dv(s){return ut(s)&&tn(s)==kt}function IN(s){return ut(s)&&tn(s)==Pe}function AN(s){return ut(s)&&tn(s)==Kt}function Aa(s,a,c,f,g){return s===a?!0:s==null||a==null||!ut(s)&&!ut(a)?s!==s&&a!==a:SN(s,a,c,f,Aa,g)}function SN(s,a,c,f,g,v){var E=ve(s),T=ve(a),A=E?mt:zt(s),D=T?mt:zt(a);A=A==kt?W:A,D=D==kt?W:D;var L=A==W,F=D==W,Y=A==D;if(Y&&Cr(s)){if(!Cr(a))return!1;E=!0,L=!1}if(Y&&!L)return v||(v=new ti),E||uo(s)?hy(s,a,c,f,g,v):e1(s,a,A,c,f,g,v);if(!(c&S)){var ie=L&&qe.call(s,"__wrapped__"),ce=F&&qe.call(a,"__wrapped__");if(ie||ce){var Te=ie?s.value():s,ue=ce?a.value():a;return v||(v=new ti),g(Te,ue,c,f,v)}}return Y?(v||(v=new ti),t1(s,a,c,f,g,v)):!1}function ON(s){return ut(s)&&zt(s)==R}function Gf(s,a,c,f){var g=c.length,v=g,E=!f;if(s==null)return!v;for(s=Xe(s);g--;){var T=c[g];if(E&&T[2]?T[1]!==s[T[0]]:!(T[0]in s))return!1}for(;++g<v;){T=c[g];var A=T[0],D=s[A],L=T[1];if(E&&T[2]){if(D===n&&!(A in s))return!1}else{var F=new ti;if(f)var Y=f(D,L,A,s,a,F);if(!(Y===n?Aa(L,D,S|N,f,F):Y))return!1}}return!0}function Lv(s){if(!lt(s)||u1(s))return!1;var a=Xi(s)?OO:vS;return a.test(cs(s))}function NN(s){return ut(s)&&tn(s)==j}function RN(s){return ut(s)&&zt(s)==P}function xN(s){return ut(s)&&Vc(s.length)&&!!nt[tn(s)]}function Pv(s){return typeof s=="function"?s:s==null?_n:typeof s=="object"?ve(s)?$v(s[0],s[1]):Mv(s):nE(s)}function zf(s){if(!Na(s))return PO(s);var a=[];for(var c in Xe(s))qe.call(s,c)&&c!="constructor"&&a.push(c);return a}function DN(s){if(!lt(s))return p1(s);var a=Na(s),c=[];for(var f in s)f=="constructor"&&(a||!qe.call(s,f))||c.push(f);return c}function Yf(s,a){return s<a}function kv(s,a){var c=-1,f=pn(s)?O(s.length):[];return Er(s,function(g,v,E){f[++c]=a(g,v,E)}),f}function Mv(s){var a=ud(s);return a.length==1&&a[0][2]?_y(a[0][0],a[0][1]):function(c){return c===s||Gf(c,s,a)}}function $v(s,a){return fd(s)&&gy(a)?_y(Ei(s),a):function(c){var f=wd(c,s);return f===n&&f===a?Td(c,s):Aa(a,f,S|N)}}function Sc(s,a,c,f,g){s!==a&&Vf(a,function(v,E){if(g||(g=new ti),lt(v))LN(s,a,E,c,Sc,f,g);else{var T=f?f(pd(s,E),v,E+"",s,a,g):n;T===n&&(T=v),Wf(s,E,T)}},gn)}function LN(s,a,c,f,g,v,E){var T=pd(s,c),A=pd(a,c),D=E.get(A);if(D){Wf(s,c,D);return}var L=v?v(T,A,c+"",s,a,E):n,F=L===n;if(F){var Y=ve(A),ie=!Y&&Cr(A),ce=!Y&&!ie&&uo(A);L=A,Y||ie||ce?ve(T)?L=T:pt(T)?L=dn(T):ie?(F=!1,L=Yv(A,!0)):ce?(F=!1,L=Xv(A,!0)):L=[]:xa(A)||us(A)?(L=T,us(T)?L=Ky(T):(!lt(T)||Xi(T))&&(L=py(A))):F=!1}F&&(E.set(A,L),g(L,A,f,v,E),E.delete(A)),Wf(s,c,L)}function Fv(s,a){var c=s.length;if(c)return a+=a<0?c:0,Yi(a,c)?s[a]:n}function Uv(s,a,c){a.length?a=ot(a,function(v){return ve(v)?function(E){return as(E,v.length===1?v[0]:v)}:v}):a=[_n];var f=-1;a=ot(a,Tn(le()));var g=kv(s,function(v,E,T){var A=ot(a,function(D){return D(v)});return{criteria:A,index:++f,value:v}});return oO(g,function(v,E){return KN(v,E,c)})}function PN(s,a){return Bv(s,a,function(c,f){return Td(s,f)})}function Bv(s,a,c){for(var f=-1,g=a.length,v={};++f<g;){var E=a[f],T=as(s,E);c(T,E)&&Sa(v,wr(E,s),T)}return v}function kN(s){return function(a){return as(a,s)}}function Xf(s,a,c,f){var g=f?sO:Zs,v=-1,E=a.length,T=s;for(s===a&&(a=dn(a)),c&&(T=ot(s,Tn(c)));++v<E;)for(var A=0,D=a[v],L=c?c(D):D;(A=g(T,L,A,f))>-1;)T!==s&&mc.call(T,A,1),mc.call(s,A,1);return s}function Wv(s,a){for(var c=s?a.length:0,f=c-1;c--;){var g=a[c];if(c==f||g!==v){var v=g;Yi(g)?mc.call(s,g,1):ed(s,g)}}return s}function Qf(s,a){return s+Ec(bv()*(a-s+1))}function MN(s,a,c,f){for(var g=-1,v=Et(yc((a-s)/(c||1)),0),E=O(v);v--;)E[f?v:++g]=s,s+=c;return E}function Jf(s,a){var c="";if(!s||a<1||a>we)return c;do a%2&&(c+=s),a=Ec(a/2),a&&(s+=s);while(a);return c}function Ae(s,a){return gd(my(s,a,_n),s+"")}function $N(s){return Cv(ho(s))}function FN(s,a){var c=ho(s);return $c(c,os(a,0,c.length))}function Sa(s,a,c,f){if(!lt(s))return s;a=wr(a,s);for(var g=-1,v=a.length,E=v-1,T=s;T!=null&&++g<v;){var A=Ei(a[g]),D=c;if(A==="__proto__"||A==="constructor"||A==="prototype")return s;if(g!=E){var L=T[A];D=f?f(L,A,T):n,D===n&&(D=lt(L)?L:Yi(a[g+1])?[]:{})}Ta(T,A,D),T=T[A]}return s}var Hv=bc?function(s,a){return bc.set(s,a),s}:_n,UN=vc?function(s,a){return vc(s,"toString",{configurable:!0,enumerable:!1,value:Id(a),writable:!0})}:_n;function BN(s){return $c(ho(s))}function Bn(s,a,c){var f=-1,g=s.length;a<0&&(a=-a>g?0:g+a),c=c>g?g:c,c<0&&(c+=g),g=a>c?0:c-a>>>0,a>>>=0;for(var v=O(g);++f<g;)v[f]=s[f+a];return v}function WN(s,a){var c;return Er(s,function(f,g,v){return c=a(f,g,v),!c}),!!c}function Oc(s,a,c){var f=0,g=s==null?f:s.length;if(typeof a=="number"&&a===a&&g<=Hi){for(;f<g;){var v=f+g>>>1,E=s[v];E!==null&&!In(E)&&(c?E<=a:E<a)?f=v+1:g=v}return g}return Zf(s,a,_n,c)}function Zf(s,a,c,f){var g=0,v=s==null?0:s.length;if(v===0)return 0;a=c(a);for(var E=a!==a,T=a===null,A=In(a),D=a===n;g<v;){var L=Ec((g+v)/2),F=c(s[L]),Y=F!==n,ie=F===null,ce=F===F,Te=In(F);if(E)var ue=f||ce;else D?ue=ce&&(f||Y):T?ue=ce&&Y&&(f||!ie):A?ue=ce&&Y&&!ie&&(f||!Te):ie||Te?ue=!1:ue=f?F<=a:F<a;ue?g=L+1:v=L}return Gt(v,St)}function Vv(s,a){for(var c=-1,f=s.length,g=0,v=[];++c<f;){var E=s[c],T=a?a(E):E;if(!c||!ni(T,A)){var A=T;v[g++]=E===0?0:E}}return v}function jv(s){return typeof s=="number"?s:In(s)?hn:+s}function Cn(s){if(typeof s=="string")return s;if(ve(s))return ot(s,Cn)+"";if(In(s))return wv?wv.call(s):"";var a=s+"";return a=="0"&&1/s==-ye?"-0":a}function br(s,a,c){var f=-1,g=ac,v=s.length,E=!0,T=[],A=T;if(c)E=!1,g=Of;else if(v>=r){var D=a?null:JN(s);if(D)return cc(D);E=!1,g=ma,A=new ss}else A=a?[]:T;e:for(;++f<v;){var L=s[f],F=a?a(L):L;if(L=c||L!==0?L:0,E&&F===F){for(var Y=A.length;Y--;)if(A[Y]===F)continue e;a&&A.push(F),T.push(L)}else g(A,F,c)||(A!==T&&A.push(F),T.push(L))}return T}function ed(s,a){return a=wr(a,s),s=vy(s,a),s==null||delete s[Ei(Wn(a))]}function qv(s,a,c,f){return Sa(s,a,c(as(s,a)),f)}function Nc(s,a,c,f){for(var g=s.length,v=f?g:-1;(f?v--:++v<g)&&a(s[v],v,s););return c?Bn(s,f?0:v,f?v+1:g):Bn(s,f?v+1:0,f?g:v)}function Kv(s,a){var c=s;return c instanceof De&&(c=c.value()),Nf(a,function(f,g){return g.func.apply(g.thisArg,mr([f],g.args))},c)}function td(s,a,c){var f=s.length;if(f<2)return f?br(s[0]):[];for(var g=-1,v=O(f);++g<f;)for(var E=s[g],T=-1;++T<f;)T!=g&&(v[g]=Ca(v[g]||E,s[T],a,c));return br(Ft(v,1),a,c)}function Gv(s,a,c){for(var f=-1,g=s.length,v=a.length,E={};++f<g;){var T=f<v?a[f]:n;c(E,s[f],T)}return E}function nd(s){return pt(s)?s:[]}function id(s){return typeof s=="function"?s:_n}function wr(s,a){return ve(s)?s:fd(s,a)?[s]:wy(Ve(s))}var HN=Ae;function Tr(s,a,c){var f=s.length;return c=c===n?f:c,!a&&c>=f?s:Bn(s,a,c)}var zv=NO||function(s){return $t.clearTimeout(s)};function Yv(s,a){if(a)return s.slice();var c=s.length,f=_v?_v(c):new s.constructor(c);return s.copy(f),f}function rd(s){var a=new s.constructor(s.byteLength);return new gc(a).set(new gc(s)),a}function VN(s,a){var c=a?rd(s.buffer):s.buffer;return new s.constructor(c,s.byteOffset,s.byteLength)}function jN(s){var a=new s.constructor(s.source,Dm.exec(s));return a.lastIndex=s.lastIndex,a}function qN(s){return wa?Xe(wa.call(s)):{}}function Xv(s,a){var c=a?rd(s.buffer):s.buffer;return new s.constructor(c,s.byteOffset,s.length)}function Qv(s,a){if(s!==a){var c=s!==n,f=s===null,g=s===s,v=In(s),E=a!==n,T=a===null,A=a===a,D=In(a);if(!T&&!D&&!v&&s>a||v&&E&&A&&!T&&!D||f&&E&&A||!c&&A||!g)return 1;if(!f&&!v&&!D&&s<a||D&&c&&g&&!f&&!v||T&&c&&g||!E&&g||!A)return-1}return 0}function KN(s,a,c){for(var f=-1,g=s.criteria,v=a.criteria,E=g.length,T=c.length;++f<E;){var A=Qv(g[f],v[f]);if(A){if(f>=T)return A;var D=c[f];return A*(D=="desc"?-1:1)}}return s.index-a.index}function Jv(s,a,c,f){for(var g=-1,v=s.length,E=c.length,T=-1,A=a.length,D=Et(v-E,0),L=O(A+D),F=!f;++T<A;)L[T]=a[T];for(;++g<E;)(F||g<v)&&(L[c[g]]=s[g]);for(;D--;)L[T++]=s[g++];return L}function Zv(s,a,c,f){for(var g=-1,v=s.length,E=-1,T=c.length,A=-1,D=a.length,L=Et(v-T,0),F=O(L+D),Y=!f;++g<L;)F[g]=s[g];for(var ie=g;++A<D;)F[ie+A]=a[A];for(;++E<T;)(Y||g<v)&&(F[ie+c[E]]=s[g++]);return F}function dn(s,a){var c=-1,f=s.length;for(a||(a=O(f));++c<f;)a[c]=s[c];return a}function yi(s,a,c,f){var g=!c;c||(c={});for(var v=-1,E=a.length;++v<E;){var T=a[v],A=f?f(c[T],s[T],T,c,s):n;A===n&&(A=s[T]),g?Ki(c,T,A):Ta(c,T,A)}return c}function GN(s,a){return yi(s,hd(s),a)}function zN(s,a){return yi(s,fy(s),a)}function Rc(s,a){return function(c,f){var g=ve(c)?ZS:_N,v=a?a():{};return g(c,s,le(f,2),v)}}function ao(s){return Ae(function(a,c){var f=-1,g=c.length,v=g>1?c[g-1]:n,E=g>2?c[2]:n;for(v=s.length>3&&typeof v=="function"?(g--,v):n,E&&nn(c[0],c[1],E)&&(v=g<3?n:v,g=1),a=Xe(a);++f<g;){var T=c[f];T&&s(a,T,f,v)}return a})}function ey(s,a){return function(c,f){if(c==null)return c;if(!pn(c))return s(c,f);for(var g=c.length,v=a?g:-1,E=Xe(c);(a?v--:++v<g)&&f(E[v],v,E)!==!1;);return c}}function ty(s){return function(a,c,f){for(var g=-1,v=Xe(a),E=f(a),T=E.length;T--;){var A=E[s?T:++g];if(c(v[A],A,v)===!1)break}return a}}function YN(s,a,c){var f=a&k,g=Oa(s);function v(){var E=this&&this!==$t&&this instanceof v?g:s;return E.apply(f?c:this,arguments)}return v}function ny(s){return function(a){a=Ve(a);var c=eo(a)?ei(a):n,f=c?c[0]:a.charAt(0),g=c?Tr(c,1).join(""):a.slice(1);return f[s]()+g}}function lo(s){return function(a){return Nf(eE(Zy(a).replace(US,"")),s,"")}}function Oa(s){return function(){var a=arguments;switch(a.length){case 0:return new s;case 1:return new s(a[0]);case 2:return new s(a[0],a[1]);case 3:return new s(a[0],a[1],a[2]);case 4:return new s(a[0],a[1],a[2],a[3]);case 5:return new s(a[0],a[1],a[2],a[3],a[4]);case 6:return new s(a[0],a[1],a[2],a[3],a[4],a[5]);case 7:return new s(a[0],a[1],a[2],a[3],a[4],a[5],a[6])}var c=oo(s.prototype),f=s.apply(c,a);return lt(f)?f:c}}function XN(s,a,c){var f=Oa(s);function g(){for(var v=arguments.length,E=O(v),T=v,A=co(g);T--;)E[T]=arguments[T];var D=v<3&&E[0]!==A&&E[v-1]!==A?[]:vr(E,A);if(v-=D.length,v<c)return ay(s,a,xc,g.placeholder,n,E,D,n,n,c-v);var L=this&&this!==$t&&this instanceof g?f:s;return wn(L,this,E)}return g}function iy(s){return function(a,c,f){var g=Xe(a);if(!pn(a)){var v=le(c,3);a=Ot(a),c=function(T){return v(g[T],T,g)}}var E=s(a,c,f);return E>-1?g[v?a[E]:E]:n}}function ry(s){return zi(function(a){var c=a.length,f=c,g=Fn.prototype.thru;for(s&&a.reverse();f--;){var v=a[f];if(typeof v!="function")throw new $n(l);if(g&&!E&&kc(v)=="wrapper")var E=new Fn([],!0)}for(f=E?f:c;++f<c;){v=a[f];var T=kc(v),A=T=="wrapper"?cd(v):n;A&&dd(A[0])&&A[1]==(Z|H|Q|X)&&!A[4].length&&A[9]==1?E=E[kc(A[0])].apply(E,A[3]):E=v.length==1&&dd(v)?E[T]():E.thru(v)}return function(){var D=arguments,L=D[0];if(E&&D.length==1&&ve(L))return E.plant(L).value();for(var F=0,Y=c?a[F].apply(this,D):L;++F<c;)Y=a[F].call(this,Y);return Y}})}function xc(s,a,c,f,g,v,E,T,A,D){var L=a&Z,F=a&k,Y=a&G,ie=a&(H|V),ce=a&de,Te=Y?n:Oa(s);function ue(){for(var Re=arguments.length,ke=O(Re),An=Re;An--;)ke[An]=arguments[An];if(ie)var rn=co(ue),Sn=lO(ke,rn);if(f&&(ke=Jv(ke,f,g,ie)),v&&(ke=Zv(ke,v,E,ie)),Re-=Sn,ie&&Re<D){var gt=vr(ke,rn);return ay(s,a,xc,ue.placeholder,c,ke,gt,T,A,D-Re)}var ii=F?c:this,Ji=Y?ii[s]:s;return Re=ke.length,T?ke=_1(ke,T):ce&&Re>1&&ke.reverse(),L&&A<Re&&(ke.length=A),this&&this!==$t&&this instanceof ue&&(Ji=Te||Oa(Ji)),Ji.apply(ii,ke)}return ue}function sy(s,a){return function(c,f){return CN(c,s,a(f),{})}}function Dc(s,a){return function(c,f){var g;if(c===n&&f===n)return a;if(c!==n&&(g=c),f!==n){if(g===n)return f;typeof c=="string"||typeof f=="string"?(c=Cn(c),f=Cn(f)):(c=jv(c),f=jv(f)),g=s(c,f)}return g}}function sd(s){return zi(function(a){return a=ot(a,Tn(le())),Ae(function(c){var f=this;return s(a,function(g){return wn(g,f,c)})})})}function Lc(s,a){a=a===n?" ":Cn(a);var c=a.length;if(c<2)return c?Jf(a,s):a;var f=Jf(a,yc(s/to(a)));return eo(a)?Tr(ei(f),0,s).join(""):f.slice(0,s)}function QN(s,a,c,f){var g=a&k,v=Oa(s);function E(){for(var T=-1,A=arguments.length,D=-1,L=f.length,F=O(L+A),Y=this&&this!==$t&&this instanceof E?v:s;++D<L;)F[D]=f[D];for(;A--;)F[D++]=arguments[++T];return wn(Y,g?c:this,F)}return E}function oy(s){return function(a,c,f){return f&&typeof f!="number"&&nn(a,c,f)&&(c=f=n),a=Qi(a),c===n?(c=a,a=0):c=Qi(c),f=f===n?a<c?1:-1:Qi(f),MN(a,c,f,s)}}function Pc(s){return function(a,c){return typeof a=="string"&&typeof c=="string"||(a=Hn(a),c=Hn(c)),s(a,c)}}function ay(s,a,c,f,g,v,E,T,A,D){var L=a&H,F=L?E:n,Y=L?n:E,ie=L?v:n,ce=L?n:v;a|=L?Q:B,a&=~(L?B:Q),a&oe||(a&=~(k|G));var Te=[s,a,g,ie,F,ce,Y,T,A,D],ue=c.apply(n,Te);return dd(s)&&yy(ue,Te),ue.placeholder=f,Ey(ue,s,a)}function od(s){var a=yt[s];return function(c,f){if(c=Hn(c),f=f==null?0:Gt(be(f),292),f&&Ev(c)){var g=(Ve(c)+"e").split("e"),v=a(g[0]+"e"+(+g[1]+f));return g=(Ve(v)+"e").split("e"),+(g[0]+"e"+(+g[1]-f))}return a(c)}}var JN=ro&&1/cc(new ro([,-0]))[1]==ye?function(s){return new ro(s)}:Od;function ly(s){return function(a){var c=zt(a);return c==R?Mf(a):c==P?gO(a):aO(a,s(a))}}function Gi(s,a,c,f,g,v,E,T){var A=a&G;if(!A&&typeof s!="function")throw new $n(l);var D=f?f.length:0;if(D||(a&=~(Q|B),f=g=n),E=E===n?E:Et(be(E),0),T=T===n?T:be(T),D-=g?g.length:0,a&B){var L=f,F=g;f=g=n}var Y=A?n:cd(s),ie=[s,a,c,f,g,L,F,v,E,T];if(Y&&d1(ie,Y),s=ie[0],a=ie[1],c=ie[2],f=ie[3],g=ie[4],T=ie[9]=ie[9]===n?A?0:s.length:Et(ie[9]-D,0),!T&&a&(H|V)&&(a&=~(H|V)),!a||a==k)var ce=YN(s,a,c);else a==H||a==V?ce=XN(s,a,T):(a==Q||a==(k|Q))&&!g.length?ce=QN(s,a,c,f):ce=xc.apply(n,ie);var Te=Y?Hv:yy;return Ey(Te(ce,ie),s,a)}function cy(s,a,c,f){return s===n||ni(s,io[c])&&!qe.call(f,c)?a:s}function uy(s,a,c,f,g,v){return lt(s)&&lt(a)&&(v.set(a,s),Sc(s,a,n,uy,v),v.delete(a)),s}function ZN(s){return xa(s)?n:s}function hy(s,a,c,f,g,v){var E=c&S,T=s.length,A=a.length;if(T!=A&&!(E&&A>T))return!1;var D=v.get(s),L=v.get(a);if(D&&L)return D==a&&L==s;var F=-1,Y=!0,ie=c&N?new ss:n;for(v.set(s,a),v.set(a,s);++F<T;){var ce=s[F],Te=a[F];if(f)var ue=E?f(Te,ce,F,a,s,v):f(ce,Te,F,s,a,v);if(ue!==n){if(ue)continue;Y=!1;break}if(ie){if(!Rf(a,function(Re,ke){if(!ma(ie,ke)&&(ce===Re||g(ce,Re,c,f,v)))return ie.push(ke)})){Y=!1;break}}else if(!(ce===Te||g(ce,Te,c,f,v))){Y=!1;break}}return v.delete(s),v.delete(a),Y}function e1(s,a,c,f,g,v,E){switch(c){case Se:if(s.byteLength!=a.byteLength||s.byteOffset!=a.byteOffset)return!1;s=s.buffer,a=a.buffer;case Pe:return!(s.byteLength!=a.byteLength||!v(new gc(s),new gc(a)));case qt:case Kt:case M:return ni(+s,+a);case Pn:return s.name==a.name&&s.message==a.message;case j:case te:return s==a+"";case R:var T=Mf;case P:var A=f&S;if(T||(T=cc),s.size!=a.size&&!A)return!1;var D=E.get(s);if(D)return D==a;f|=N,E.set(s,a);var L=hy(T(s),T(a),f,g,v,E);return E.delete(s),L;case J:if(wa)return wa.call(s)==wa.call(a)}return!1}function t1(s,a,c,f,g,v){var E=c&S,T=ad(s),A=T.length,D=ad(a),L=D.length;if(A!=L&&!E)return!1;for(var F=A;F--;){var Y=T[F];if(!(E?Y in a:qe.call(a,Y)))return!1}var ie=v.get(s),ce=v.get(a);if(ie&&ce)return ie==a&&ce==s;var Te=!0;v.set(s,a),v.set(a,s);for(var ue=E;++F<A;){Y=T[F];var Re=s[Y],ke=a[Y];if(f)var An=E?f(ke,Re,Y,a,s,v):f(Re,ke,Y,s,a,v);if(!(An===n?Re===ke||g(Re,ke,c,f,v):An)){Te=!1;break}ue||(ue=Y=="constructor")}if(Te&&!ue){var rn=s.constructor,Sn=a.constructor;rn!=Sn&&"constructor"in s&&"constructor"in a&&!(typeof rn=="function"&&rn instanceof rn&&typeof Sn=="function"&&Sn instanceof Sn)&&(Te=!1)}return v.delete(s),v.delete(a),Te}function zi(s){return gd(my(s,n,Ay),s+"")}function ad(s){return xv(s,Ot,hd)}function ld(s){return xv(s,gn,fy)}var cd=bc?function(s){return bc.get(s)}:Od;function kc(s){for(var a=s.name+"",c=so[a],f=qe.call(so,a)?c.length:0;f--;){var g=c[f],v=g.func;if(v==null||v==s)return g.name}return a}function co(s){var a=qe.call(m,"placeholder")?m:s;return a.placeholder}function le(){var s=m.iteratee||Ad;return s=s===Ad?Pv:s,arguments.length?s(arguments[0],arguments[1]):s}function Mc(s,a){var c=s.__data__;return c1(a)?c[typeof a=="string"?"string":"hash"]:c.map}function ud(s){for(var a=Ot(s),c=a.length;c--;){var f=a[c],g=s[f];a[c]=[f,g,gy(g)]}return a}function ls(s,a){var c=fO(s,a);return Lv(c)?c:n}function n1(s){var a=qe.call(s,is),c=s[is];try{s[is]=n;var f=!0}catch{}var g=dc.call(s);return f&&(a?s[is]=c:delete s[is]),g}var hd=Ff?function(s){return s==null?[]:(s=Xe(s),_r(Ff(s),function(a){return vv.call(s,a)}))}:Nd,fy=Ff?function(s){for(var a=[];s;)mr(a,hd(s)),s=_c(s);return a}:Nd,zt=tn;(Uf&&zt(new Uf(new ArrayBuffer(1)))!=Se||ya&&zt(new ya)!=R||Bf&&zt(Bf.resolve())!=z||ro&&zt(new ro)!=P||Ea&&zt(new Ea)!=ae)&&(zt=function(s){var a=tn(s),c=a==W?s.constructor:n,f=c?cs(c):"";if(f)switch(f){case FO:return Se;case UO:return R;case BO:return z;case WO:return P;case HO:return ae}return a});function i1(s,a,c){for(var f=-1,g=c.length;++f<g;){var v=c[f],E=v.size;switch(v.type){case"drop":s+=E;break;case"dropRight":a-=E;break;case"take":a=Gt(a,s+E);break;case"takeRight":s=Et(s,a-E);break}}return{start:s,end:a}}function r1(s){var a=s.match(uS);return a?a[1].split(hS):[]}function dy(s,a,c){a=wr(a,s);for(var f=-1,g=a.length,v=!1;++f<g;){var E=Ei(a[f]);if(!(v=s!=null&&c(s,E)))break;s=s[E]}return v||++f!=g?v:(g=s==null?0:s.length,!!g&&Vc(g)&&Yi(E,g)&&(ve(s)||us(s)))}function s1(s){var a=s.length,c=new s.constructor(a);return a&&typeof s[0]=="string"&&qe.call(s,"index")&&(c.index=s.index,c.input=s.input),c}function py(s){return typeof s.constructor=="function"&&!Na(s)?oo(_c(s)):{}}function o1(s,a,c){var f=s.constructor;switch(a){case Pe:return rd(s);case qt:case Kt:return new f(+s);case Se:return VN(s,c);case st:case en:case mi:case Ys:case Vi:case Xs:case Mt:case fn:case Qs:return Xv(s,c);case R:return new f;case M:case te:return new f(s);case j:return jN(s);case P:return new f;case J:return qN(s)}}function a1(s,a){var c=a.length;if(!c)return s;var f=c-1;return a[f]=(c>1?"& ":"")+a[f],a=a.join(c>2?", ":" "),s.replace(cS,`{
/* [wrapped with `+a+`] */
`)}function l1(s){return ve(s)||us(s)||!!(yv&&s&&s[yv])}function Yi(s,a){var c=typeof s;return a=a??we,!!a&&(c=="number"||c!="symbol"&&ES.test(s))&&s>-1&&s%1==0&&s<a}function nn(s,a,c){if(!lt(c))return!1;var f=typeof a;return(f=="number"?pn(c)&&Yi(a,c.length):f=="string"&&a in c)?ni(c[a],s):!1}function fd(s,a){if(ve(s))return!1;var c=typeof s;return c=="number"||c=="symbol"||c=="boolean"||s==null||In(s)?!0:sS.test(s)||!rS.test(s)||a!=null&&s in Xe(a)}function c1(s){var a=typeof s;return a=="string"||a=="number"||a=="symbol"||a=="boolean"?s!=="__proto__":s===null}function dd(s){var a=kc(s),c=m[a];if(typeof c!="function"||!(a in De.prototype))return!1;if(s===c)return!0;var f=cd(c);return!!f&&s===f[0]}function u1(s){return!!gv&&gv in s}var h1=hc?Xi:Rd;function Na(s){var a=s&&s.constructor,c=typeof a=="function"&&a.prototype||io;return s===c}function gy(s){return s===s&&!lt(s)}function _y(s,a){return function(c){return c==null?!1:c[s]===a&&(a!==n||s in Xe(c))}}function f1(s){var a=Wc(s,function(f){return c.size===d&&c.clear(),f}),c=a.cache;return a}function d1(s,a){var c=s[1],f=a[1],g=c|f,v=g<(k|G|Z),E=f==Z&&c==H||f==Z&&c==X&&s[7].length<=a[8]||f==(Z|X)&&a[7].length<=a[8]&&c==H;if(!(v||E))return s;f&k&&(s[2]=a[2],g|=c&k?0:oe);var T=a[3];if(T){var A=s[3];s[3]=A?Jv(A,T,a[4]):T,s[4]=A?vr(s[3],p):a[4]}return T=a[5],T&&(A=s[5],s[5]=A?Zv(A,T,a[6]):T,s[6]=A?vr(s[5],p):a[6]),T=a[7],T&&(s[7]=T),f&Z&&(s[8]=s[8]==null?a[8]:Gt(s[8],a[8])),s[9]==null&&(s[9]=a[9]),s[0]=a[0],s[1]=g,s}function p1(s){var a=[];if(s!=null)for(var c in Xe(s))a.push(c);return a}function g1(s){return dc.call(s)}function my(s,a,c){return a=Et(a===n?s.length-1:a,0),function(){for(var f=arguments,g=-1,v=Et(f.length-a,0),E=O(v);++g<v;)E[g]=f[a+g];g=-1;for(var T=O(a+1);++g<a;)T[g]=f[g];return T[a]=c(E),wn(s,this,T)}}function vy(s,a){return a.length<2?s:as(s,Bn(a,0,-1))}function _1(s,a){for(var c=s.length,f=Gt(a.length,c),g=dn(s);f--;){var v=a[f];s[f]=Yi(v,c)?g[v]:n}return s}function pd(s,a){if(!(a==="constructor"&&typeof s[a]=="function")&&a!="__proto__")return s[a]}var yy=by(Hv),Ra=xO||function(s,a){return $t.setTimeout(s,a)},gd=by(UN);function Ey(s,a,c){var f=a+"";return gd(s,a1(f,m1(r1(f),c)))}function by(s){var a=0,c=0;return function(){var f=kO(),g=Ye-(f-c);if(c=f,g>0){if(++a>=rt)return arguments[0]}else a=0;return s.apply(n,arguments)}}function $c(s,a){var c=-1,f=s.length,g=f-1;for(a=a===n?f:a;++c<a;){var v=Qf(c,g),E=s[v];s[v]=s[c],s[c]=E}return s.length=a,s}var wy=f1(function(s){var a=[];return s.charCodeAt(0)===46&&a.push(""),s.replace(oS,function(c,f,g,v){a.push(g?v.replace(pS,"$1"):f||c)}),a});function Ei(s){if(typeof s=="string"||In(s))return s;var a=s+"";return a=="0"&&1/s==-ye?"-0":a}function cs(s){if(s!=null){try{return fc.call(s)}catch{}try{return s+""}catch{}}return""}function m1(s,a){return Mn(_i,function(c){var f="_."+c[0];a&c[1]&&!ac(s,f)&&s.push(f)}),s.sort()}function Ty(s){if(s instanceof De)return s.clone();var a=new Fn(s.__wrapped__,s.__chain__);return a.__actions__=dn(s.__actions__),a.__index__=s.__index__,a.__values__=s.__values__,a}function v1(s,a,c){(c?nn(s,a,c):a===n)?a=1:a=Et(be(a),0);var f=s==null?0:s.length;if(!f||a<1)return[];for(var g=0,v=0,E=O(yc(f/a));g<f;)E[v++]=Bn(s,g,g+=a);return E}function y1(s){for(var a=-1,c=s==null?0:s.length,f=0,g=[];++a<c;){var v=s[a];v&&(g[f++]=v)}return g}function E1(){var s=arguments.length;if(!s)return[];for(var a=O(s-1),c=arguments[0],f=s;f--;)a[f-1]=arguments[f];return mr(ve(c)?dn(c):[c],Ft(a,1))}var b1=Ae(function(s,a){return pt(s)?Ca(s,Ft(a,1,pt,!0)):[]}),w1=Ae(function(s,a){var c=Wn(a);return pt(c)&&(c=n),pt(s)?Ca(s,Ft(a,1,pt,!0),le(c,2)):[]}),T1=Ae(function(s,a){var c=Wn(a);return pt(c)&&(c=n),pt(s)?Ca(s,Ft(a,1,pt,!0),n,c):[]});function C1(s,a,c){var f=s==null?0:s.length;return f?(a=c||a===n?1:be(a),Bn(s,a<0?0:a,f)):[]}function I1(s,a,c){var f=s==null?0:s.length;return f?(a=c||a===n?1:be(a),a=f-a,Bn(s,0,a<0?0:a)):[]}function A1(s,a){return s&&s.length?Nc(s,le(a,3),!0,!0):[]}function S1(s,a){return s&&s.length?Nc(s,le(a,3),!0):[]}function O1(s,a,c,f){var g=s==null?0:s.length;return g?(c&&typeof c!="number"&&nn(s,a,c)&&(c=0,f=g),EN(s,a,c,f)):[]}function Cy(s,a,c){var f=s==null?0:s.length;if(!f)return-1;var g=c==null?0:be(c);return g<0&&(g=Et(f+g,0)),lc(s,le(a,3),g)}function Iy(s,a,c){var f=s==null?0:s.length;if(!f)return-1;var g=f-1;return c!==n&&(g=be(c),g=c<0?Et(f+g,0):Gt(g,f-1)),lc(s,le(a,3),g,!0)}function Ay(s){var a=s==null?0:s.length;return a?Ft(s,1):[]}function N1(s){var a=s==null?0:s.length;return a?Ft(s,ye):[]}function R1(s,a){var c=s==null?0:s.length;return c?(a=a===n?1:be(a),Ft(s,a)):[]}function x1(s){for(var a=-1,c=s==null?0:s.length,f={};++a<c;){var g=s[a];f[g[0]]=g[1]}return f}function Sy(s){return s&&s.length?s[0]:n}function D1(s,a,c){var f=s==null?0:s.length;if(!f)return-1;var g=c==null?0:be(c);return g<0&&(g=Et(f+g,0)),Zs(s,a,g)}function L1(s){var a=s==null?0:s.length;return a?Bn(s,0,-1):[]}var P1=Ae(function(s){var a=ot(s,nd);return a.length&&a[0]===s[0]?Kf(a):[]}),k1=Ae(function(s){var a=Wn(s),c=ot(s,nd);return a===Wn(c)?a=n:c.pop(),c.length&&c[0]===s[0]?Kf(c,le(a,2)):[]}),M1=Ae(function(s){var a=Wn(s),c=ot(s,nd);return a=typeof a=="function"?a:n,a&&c.pop(),c.length&&c[0]===s[0]?Kf(c,n,a):[]});function $1(s,a){return s==null?"":LO.call(s,a)}function Wn(s){var a=s==null?0:s.length;return a?s[a-1]:n}function F1(s,a,c){var f=s==null?0:s.length;if(!f)return-1;var g=f;return c!==n&&(g=be(c),g=g<0?Et(f+g,0):Gt(g,f-1)),a===a?mO(s,a,g):lc(s,av,g,!0)}function U1(s,a){return s&&s.length?Fv(s,be(a)):n}var B1=Ae(Oy);function Oy(s,a){return s&&s.length&&a&&a.length?Xf(s,a):s}function W1(s,a,c){return s&&s.length&&a&&a.length?Xf(s,a,le(c,2)):s}function H1(s,a,c){return s&&s.length&&a&&a.length?Xf(s,a,n,c):s}var V1=zi(function(s,a){var c=s==null?0:s.length,f=Hf(s,a);return Wv(s,ot(a,function(g){return Yi(g,c)?+g:g}).sort(Qv)),f});function j1(s,a){var c=[];if(!(s&&s.length))return c;var f=-1,g=[],v=s.length;for(a=le(a,3);++f<v;){var E=s[f];a(E,f,s)&&(c.push(E),g.push(f))}return Wv(s,g),c}function _d(s){return s==null?s:$O.call(s)}function q1(s,a,c){var f=s==null?0:s.length;return f?(c&&typeof c!="number"&&nn(s,a,c)?(a=0,c=f):(a=a==null?0:be(a),c=c===n?f:be(c)),Bn(s,a,c)):[]}function K1(s,a){return Oc(s,a)}function G1(s,a,c){return Zf(s,a,le(c,2))}function z1(s,a){var c=s==null?0:s.length;if(c){var f=Oc(s,a);if(f<c&&ni(s[f],a))return f}return-1}function Y1(s,a){return Oc(s,a,!0)}function X1(s,a,c){return Zf(s,a,le(c,2),!0)}function Q1(s,a){var c=s==null?0:s.length;if(c){var f=Oc(s,a,!0)-1;if(ni(s[f],a))return f}return-1}function J1(s){return s&&s.length?Vv(s):[]}function Z1(s,a){return s&&s.length?Vv(s,le(a,2)):[]}function eR(s){var a=s==null?0:s.length;return a?Bn(s,1,a):[]}function tR(s,a,c){return s&&s.length?(a=c||a===n?1:be(a),Bn(s,0,a<0?0:a)):[]}function nR(s,a,c){var f=s==null?0:s.length;return f?(a=c||a===n?1:be(a),a=f-a,Bn(s,a<0?0:a,f)):[]}function iR(s,a){return s&&s.length?Nc(s,le(a,3),!1,!0):[]}function rR(s,a){return s&&s.length?Nc(s,le(a,3)):[]}var sR=Ae(function(s){return br(Ft(s,1,pt,!0))}),oR=Ae(function(s){var a=Wn(s);return pt(a)&&(a=n),br(Ft(s,1,pt,!0),le(a,2))}),aR=Ae(function(s){var a=Wn(s);return a=typeof a=="function"?a:n,br(Ft(s,1,pt,!0),n,a)});function lR(s){return s&&s.length?br(s):[]}function cR(s,a){return s&&s.length?br(s,le(a,2)):[]}function uR(s,a){return a=typeof a=="function"?a:n,s&&s.length?br(s,n,a):[]}function md(s){if(!(s&&s.length))return[];var a=0;return s=_r(s,function(c){if(pt(c))return a=Et(c.length,a),!0}),Pf(a,function(c){return ot(s,xf(c))})}function Ny(s,a){if(!(s&&s.length))return[];var c=md(s);return a==null?c:ot(c,function(f){return wn(a,n,f)})}var hR=Ae(function(s,a){return pt(s)?Ca(s,a):[]}),fR=Ae(function(s){return td(_r(s,pt))}),dR=Ae(function(s){var a=Wn(s);return pt(a)&&(a=n),td(_r(s,pt),le(a,2))}),pR=Ae(function(s){var a=Wn(s);return a=typeof a=="function"?a:n,td(_r(s,pt),n,a)}),gR=Ae(md);function _R(s,a){return Gv(s||[],a||[],Ta)}function mR(s,a){return Gv(s||[],a||[],Sa)}var vR=Ae(function(s){var a=s.length,c=a>1?s[a-1]:n;return c=typeof c=="function"?(s.pop(),c):n,Ny(s,c)});function Ry(s){var a=m(s);return a.__chain__=!0,a}function yR(s,a){return a(s),s}function Fc(s,a){return a(s)}var ER=zi(function(s){var a=s.length,c=a?s[0]:0,f=this.__wrapped__,g=function(v){return Hf(v,s)};return a>1||this.__actions__.length||!(f instanceof De)||!Yi(c)?this.thru(g):(f=f.slice(c,+c+(a?1:0)),f.__actions__.push({func:Fc,args:[g],thisArg:n}),new Fn(f,this.__chain__).thru(function(v){return a&&!v.length&&v.push(n),v}))});function bR(){return Ry(this)}function wR(){return new Fn(this.value(),this.__chain__)}function TR(){this.__values__===n&&(this.__values__=jy(this.value()));var s=this.__index__>=this.__values__.length,a=s?n:this.__values__[this.__index__++];return{done:s,value:a}}function CR(){return this}function IR(s){for(var a,c=this;c instanceof Tc;){var f=Ty(c);f.__index__=0,f.__values__=n,a?g.__wrapped__=f:a=f;var g=f;c=c.__wrapped__}return g.__wrapped__=s,a}function AR(){var s=this.__wrapped__;if(s instanceof De){var a=s;return this.__actions__.length&&(a=new De(this)),a=a.reverse(),a.__actions__.push({func:Fc,args:[_d],thisArg:n}),new Fn(a,this.__chain__)}return this.thru(_d)}function SR(){return Kv(this.__wrapped__,this.__actions__)}var OR=Rc(function(s,a,c){qe.call(s,c)?++s[c]:Ki(s,c,1)});function NR(s,a,c){var f=ve(s)?sv:yN;return c&&nn(s,a,c)&&(a=n),f(s,le(a,3))}function RR(s,a){var c=ve(s)?_r:Nv;return c(s,le(a,3))}var xR=iy(Cy),DR=iy(Iy);function LR(s,a){return Ft(Uc(s,a),1)}function PR(s,a){return Ft(Uc(s,a),ye)}function kR(s,a,c){return c=c===n?1:be(c),Ft(Uc(s,a),c)}function xy(s,a){var c=ve(s)?Mn:Er;return c(s,le(a,3))}function Dy(s,a){var c=ve(s)?eO:Ov;return c(s,le(a,3))}var MR=Rc(function(s,a,c){qe.call(s,c)?s[c].push(a):Ki(s,c,[a])});function $R(s,a,c,f){s=pn(s)?s:ho(s),c=c&&!f?be(c):0;var g=s.length;return c<0&&(c=Et(g+c,0)),jc(s)?c<=g&&s.indexOf(a,c)>-1:!!g&&Zs(s,a,c)>-1}var FR=Ae(function(s,a,c){var f=-1,g=typeof a=="function",v=pn(s)?O(s.length):[];return Er(s,function(E){v[++f]=g?wn(a,E,c):Ia(E,a,c)}),v}),UR=Rc(function(s,a,c){Ki(s,c,a)});function Uc(s,a){var c=ve(s)?ot:kv;return c(s,le(a,3))}function BR(s,a,c,f){return s==null?[]:(ve(a)||(a=a==null?[]:[a]),c=f?n:c,ve(c)||(c=c==null?[]:[c]),Uv(s,a,c))}var WR=Rc(function(s,a,c){s[c?0:1].push(a)},function(){return[[],[]]});function HR(s,a,c){var f=ve(s)?Nf:cv,g=arguments.length<3;return f(s,le(a,4),c,g,Er)}function VR(s,a,c){var f=ve(s)?tO:cv,g=arguments.length<3;return f(s,le(a,4),c,g,Ov)}function jR(s,a){var c=ve(s)?_r:Nv;return c(s,Hc(le(a,3)))}function qR(s){var a=ve(s)?Cv:$N;return a(s)}function KR(s,a,c){(c?nn(s,a,c):a===n)?a=1:a=be(a);var f=ve(s)?pN:FN;return f(s,a)}function GR(s){var a=ve(s)?gN:BN;return a(s)}function zR(s){if(s==null)return 0;if(pn(s))return jc(s)?to(s):s.length;var a=zt(s);return a==R||a==P?s.size:zf(s).length}function YR(s,a,c){var f=ve(s)?Rf:WN;return c&&nn(s,a,c)&&(a=n),f(s,le(a,3))}var XR=Ae(function(s,a){if(s==null)return[];var c=a.length;return c>1&&nn(s,a[0],a[1])?a=[]:c>2&&nn(a[0],a[1],a[2])&&(a=[a[0]]),Uv(s,Ft(a,1),[])}),Bc=RO||function(){return $t.Date.now()};function QR(s,a){if(typeof a!="function")throw new $n(l);return s=be(s),function(){if(--s<1)return a.apply(this,arguments)}}function Ly(s,a,c){return a=c?n:a,a=s&&a==null?s.length:a,Gi(s,Z,n,n,n,n,a)}function Py(s,a){var c;if(typeof a!="function")throw new $n(l);return s=be(s),function(){return--s>0&&(c=a.apply(this,arguments)),s<=1&&(a=n),c}}var vd=Ae(function(s,a,c){var f=k;if(c.length){var g=vr(c,co(vd));f|=Q}return Gi(s,f,a,c,g)}),ky=Ae(function(s,a,c){var f=k|G;if(c.length){var g=vr(c,co(ky));f|=Q}return Gi(a,f,s,c,g)});function My(s,a,c){a=c?n:a;var f=Gi(s,H,n,n,n,n,n,a);return f.placeholder=My.placeholder,f}function $y(s,a,c){a=c?n:a;var f=Gi(s,V,n,n,n,n,n,a);return f.placeholder=$y.placeholder,f}function Fy(s,a,c){var f,g,v,E,T,A,D=0,L=!1,F=!1,Y=!0;if(typeof s!="function")throw new $n(l);a=Hn(a)||0,lt(c)&&(L=!!c.leading,F="maxWait"in c,v=F?Et(Hn(c.maxWait)||0,a):v,Y="trailing"in c?!!c.trailing:Y);function ie(gt){var ii=f,Ji=g;return f=g=n,D=gt,E=s.apply(Ji,ii),E}function ce(gt){return D=gt,T=Ra(Re,a),L?ie(gt):E}function Te(gt){var ii=gt-A,Ji=gt-D,iE=a-ii;return F?Gt(iE,v-Ji):iE}function ue(gt){var ii=gt-A,Ji=gt-D;return A===n||ii>=a||ii<0||F&&Ji>=v}function Re(){var gt=Bc();if(ue(gt))return ke(gt);T=Ra(Re,Te(gt))}function ke(gt){return T=n,Y&&f?ie(gt):(f=g=n,E)}function An(){T!==n&&zv(T),D=0,f=A=g=T=n}function rn(){return T===n?E:ke(Bc())}function Sn(){var gt=Bc(),ii=ue(gt);if(f=arguments,g=this,A=gt,ii){if(T===n)return ce(A);if(F)return zv(T),T=Ra(Re,a),ie(A)}return T===n&&(T=Ra(Re,a)),E}return Sn.cancel=An,Sn.flush=rn,Sn}var JR=Ae(function(s,a){return Sv(s,1,a)}),ZR=Ae(function(s,a,c){return Sv(s,Hn(a)||0,c)});function ex(s){return Gi(s,de)}function Wc(s,a){if(typeof s!="function"||a!=null&&typeof a!="function")throw new $n(l);var c=function(){var f=arguments,g=a?a.apply(this,f):f[0],v=c.cache;if(v.has(g))return v.get(g);var E=s.apply(this,f);return c.cache=v.set(g,E)||v,E};return c.cache=new(Wc.Cache||qi),c}Wc.Cache=qi;function Hc(s){if(typeof s!="function")throw new $n(l);return function(){var a=arguments;switch(a.length){case 0:return!s.call(this);case 1:return!s.call(this,a[0]);case 2:return!s.call(this,a[0],a[1]);case 3:return!s.call(this,a[0],a[1],a[2])}return!s.apply(this,a)}}function tx(s){return Py(2,s)}var nx=HN(function(s,a){a=a.length==1&&ve(a[0])?ot(a[0],Tn(le())):ot(Ft(a,1),Tn(le()));var c=a.length;return Ae(function(f){for(var g=-1,v=Gt(f.length,c);++g<v;)f[g]=a[g].call(this,f[g]);return wn(s,this,f)})}),yd=Ae(function(s,a){var c=vr(a,co(yd));return Gi(s,Q,n,a,c)}),Uy=Ae(function(s,a){var c=vr(a,co(Uy));return Gi(s,B,n,a,c)}),ix=zi(function(s,a){return Gi(s,X,n,n,n,a)});function rx(s,a){if(typeof s!="function")throw new $n(l);return a=a===n?a:be(a),Ae(s,a)}function sx(s,a){if(typeof s!="function")throw new $n(l);return a=a==null?0:Et(be(a),0),Ae(function(c){var f=c[a],g=Tr(c,0,a);return f&&mr(g,f),wn(s,this,g)})}function ox(s,a,c){var f=!0,g=!0;if(typeof s!="function")throw new $n(l);return lt(c)&&(f="leading"in c?!!c.leading:f,g="trailing"in c?!!c.trailing:g),Fy(s,a,{leading:f,maxWait:a,trailing:g})}function ax(s){return Ly(s,1)}function lx(s,a){return yd(id(a),s)}function cx(){if(!arguments.length)return[];var s=arguments[0];return ve(s)?s:[s]}function ux(s){return Un(s,b)}function hx(s,a){return a=typeof a=="function"?a:n,Un(s,b,a)}function fx(s){return Un(s,_|b)}function dx(s,a){return a=typeof a=="function"?a:n,Un(s,_|b,a)}function px(s,a){return a==null||Av(s,a,Ot(a))}function ni(s,a){return s===a||s!==s&&a!==a}var gx=Pc(qf),_x=Pc(function(s,a){return s>=a}),us=Dv(function(){return arguments}())?Dv:function(s){return ut(s)&&qe.call(s,"callee")&&!vv.call(s,"callee")},ve=O.isArray,mx=Zm?Tn(Zm):IN;function pn(s){return s!=null&&Vc(s.length)&&!Xi(s)}function pt(s){return ut(s)&&pn(s)}function vx(s){return s===!0||s===!1||ut(s)&&tn(s)==qt}var Cr=DO||Rd,yx=ev?Tn(ev):AN;function Ex(s){return ut(s)&&s.nodeType===1&&!xa(s)}function bx(s){if(s==null)return!0;if(pn(s)&&(ve(s)||typeof s=="string"||typeof s.splice=="function"||Cr(s)||uo(s)||us(s)))return!s.length;var a=zt(s);if(a==R||a==P)return!s.size;if(Na(s))return!zf(s).length;for(var c in s)if(qe.call(s,c))return!1;return!0}function wx(s,a){return Aa(s,a)}function Tx(s,a,c){c=typeof c=="function"?c:n;var f=c?c(s,a):n;return f===n?Aa(s,a,n,c):!!f}function Ed(s){if(!ut(s))return!1;var a=tn(s);return a==Pn||a==ts||typeof s.message=="string"&&typeof s.name=="string"&&!xa(s)}function Cx(s){return typeof s=="number"&&Ev(s)}function Xi(s){if(!lt(s))return!1;var a=tn(s);return a==w||a==C||a==Zn||a==q}function By(s){return typeof s=="number"&&s==be(s)}function Vc(s){return typeof s=="number"&&s>-1&&s%1==0&&s<=we}function lt(s){var a=typeof s;return s!=null&&(a=="object"||a=="function")}function ut(s){return s!=null&&typeof s=="object"}var Wy=tv?Tn(tv):ON;function Ix(s,a){return s===a||Gf(s,a,ud(a))}function Ax(s,a,c){return c=typeof c=="function"?c:n,Gf(s,a,ud(a),c)}function Sx(s){return Hy(s)&&s!=+s}function Ox(s){if(h1(s))throw new me(o);return Lv(s)}function Nx(s){return s===null}function Rx(s){return s==null}function Hy(s){return typeof s=="number"||ut(s)&&tn(s)==M}function xa(s){if(!ut(s)||tn(s)!=W)return!1;var a=_c(s);if(a===null)return!0;var c=qe.call(a,"constructor")&&a.constructor;return typeof c=="function"&&c instanceof c&&fc.call(c)==AO}var bd=nv?Tn(nv):NN;function xx(s){return By(s)&&s>=-we&&s<=we}var Vy=iv?Tn(iv):RN;function jc(s){return typeof s=="string"||!ve(s)&&ut(s)&&tn(s)==te}function In(s){return typeof s=="symbol"||ut(s)&&tn(s)==J}var uo=rv?Tn(rv):xN;function Dx(s){return s===n}function Lx(s){return ut(s)&&zt(s)==ae}function Px(s){return ut(s)&&tn(s)==Ee}var kx=Pc(Yf),Mx=Pc(function(s,a){return s<=a});function jy(s){if(!s)return[];if(pn(s))return jc(s)?ei(s):dn(s);if(va&&s[va])return pO(s[va]());var a=zt(s),c=a==R?Mf:a==P?cc:ho;return c(s)}function Qi(s){if(!s)return s===0?s:0;if(s=Hn(s),s===ye||s===-ye){var a=s<0?-1:1;return a*Pt}return s===s?s:0}function be(s){var a=Qi(s),c=a%1;return a===a?c?a-c:a:0}function qy(s){return s?os(be(s),0,ct):0}function Hn(s){if(typeof s=="number")return s;if(In(s))return hn;if(lt(s)){var a=typeof s.valueOf=="function"?s.valueOf():s;s=lt(a)?a+"":a}if(typeof s!="string")return s===0?s:+s;s=uv(s);var c=mS.test(s);return c||yS.test(s)?QS(s.slice(2),c?2:8):_S.test(s)?hn:+s}function Ky(s){return yi(s,gn(s))}function $x(s){return s?os(be(s),-we,we):s===0?s:0}function Ve(s){return s==null?"":Cn(s)}var Fx=ao(function(s,a){if(Na(a)||pn(a)){yi(a,Ot(a),s);return}for(var c in a)qe.call(a,c)&&Ta(s,c,a[c])}),Gy=ao(function(s,a){yi(a,gn(a),s)}),qc=ao(function(s,a,c,f){yi(a,gn(a),s,f)}),Ux=ao(function(s,a,c,f){yi(a,Ot(a),s,f)}),Bx=zi(Hf);function Wx(s,a){var c=oo(s);return a==null?c:Iv(c,a)}var Hx=Ae(function(s,a){s=Xe(s);var c=-1,f=a.length,g=f>2?a[2]:n;for(g&&nn(a[0],a[1],g)&&(f=1);++c<f;)for(var v=a[c],E=gn(v),T=-1,A=E.length;++T<A;){var D=E[T],L=s[D];(L===n||ni(L,io[D])&&!qe.call(s,D))&&(s[D]=v[D])}return s}),Vx=Ae(function(s){return s.push(n,uy),wn(zy,n,s)});function jx(s,a){return ov(s,le(a,3),vi)}function qx(s,a){return ov(s,le(a,3),jf)}function Kx(s,a){return s==null?s:Vf(s,le(a,3),gn)}function Gx(s,a){return s==null?s:Rv(s,le(a,3),gn)}function zx(s,a){return s&&vi(s,le(a,3))}function Yx(s,a){return s&&jf(s,le(a,3))}function Xx(s){return s==null?[]:Ac(s,Ot(s))}function Qx(s){return s==null?[]:Ac(s,gn(s))}function wd(s,a,c){var f=s==null?n:as(s,a);return f===n?c:f}function Jx(s,a){return s!=null&&dy(s,a,bN)}function Td(s,a){return s!=null&&dy(s,a,wN)}var Zx=sy(function(s,a,c){a!=null&&typeof a.toString!="function"&&(a=dc.call(a)),s[a]=c},Id(_n)),eD=sy(function(s,a,c){a!=null&&typeof a.toString!="function"&&(a=dc.call(a)),qe.call(s,a)?s[a].push(c):s[a]=[c]},le),tD=Ae(Ia);function Ot(s){return pn(s)?Tv(s):zf(s)}function gn(s){return pn(s)?Tv(s,!0):DN(s)}function nD(s,a){var c={};return a=le(a,3),vi(s,function(f,g,v){Ki(c,a(f,g,v),f)}),c}function iD(s,a){var c={};return a=le(a,3),vi(s,function(f,g,v){Ki(c,g,a(f,g,v))}),c}var rD=ao(function(s,a,c){Sc(s,a,c)}),zy=ao(function(s,a,c,f){Sc(s,a,c,f)}),sD=zi(function(s,a){var c={};if(s==null)return c;var f=!1;a=ot(a,function(v){return v=wr(v,s),f||(f=v.length>1),v}),yi(s,ld(s),c),f&&(c=Un(c,_|y|b,ZN));for(var g=a.length;g--;)ed(c,a[g]);return c});function oD(s,a){return Yy(s,Hc(le(a)))}var aD=zi(function(s,a){return s==null?{}:PN(s,a)});function Yy(s,a){if(s==null)return{};var c=ot(ld(s),function(f){return[f]});return a=le(a),Bv(s,c,function(f,g){return a(f,g[0])})}function lD(s,a,c){a=wr(a,s);var f=-1,g=a.length;for(g||(g=1,s=n);++f<g;){var v=s==null?n:s[Ei(a[f])];v===n&&(f=g,v=c),s=Xi(v)?v.call(s):v}return s}function cD(s,a,c){return s==null?s:Sa(s,a,c)}function uD(s,a,c,f){return f=typeof f=="function"?f:n,s==null?s:Sa(s,a,c,f)}var Xy=ly(Ot),Qy=ly(gn);function hD(s,a,c){var f=ve(s),g=f||Cr(s)||uo(s);if(a=le(a,4),c==null){var v=s&&s.constructor;g?c=f?new v:[]:lt(s)?c=Xi(v)?oo(_c(s)):{}:c={}}return(g?Mn:vi)(s,function(E,T,A){return a(c,E,T,A)}),c}function fD(s,a){return s==null?!0:ed(s,a)}function dD(s,a,c){return s==null?s:qv(s,a,id(c))}function pD(s,a,c,f){return f=typeof f=="function"?f:n,s==null?s:qv(s,a,id(c),f)}function ho(s){return s==null?[]:kf(s,Ot(s))}function gD(s){return s==null?[]:kf(s,gn(s))}function _D(s,a,c){return c===n&&(c=a,a=n),c!==n&&(c=Hn(c),c=c===c?c:0),a!==n&&(a=Hn(a),a=a===a?a:0),os(Hn(s),a,c)}function mD(s,a,c){return a=Qi(a),c===n?(c=a,a=0):c=Qi(c),s=Hn(s),TN(s,a,c)}function vD(s,a,c){if(c&&typeof c!="boolean"&&nn(s,a,c)&&(a=c=n),c===n&&(typeof a=="boolean"?(c=a,a=n):typeof s=="boolean"&&(c=s,s=n)),s===n&&a===n?(s=0,a=1):(s=Qi(s),a===n?(a=s,s=0):a=Qi(a)),s>a){var f=s;s=a,a=f}if(c||s%1||a%1){var g=bv();return Gt(s+g*(a-s+XS("1e-"+((g+"").length-1))),a)}return Qf(s,a)}var yD=lo(function(s,a,c){return a=a.toLowerCase(),s+(c?Jy(a):a)});function Jy(s){return Cd(Ve(s).toLowerCase())}function Zy(s){return s=Ve(s),s&&s.replace(bS,cO).replace(BS,"")}function ED(s,a,c){s=Ve(s),a=Cn(a);var f=s.length;c=c===n?f:os(be(c),0,f);var g=c;return c-=a.length,c>=0&&s.slice(c,g)==a}function bD(s){return s=Ve(s),s&&tS.test(s)?s.replace(Rm,uO):s}function wD(s){return s=Ve(s),s&&aS.test(s)?s.replace(yf,"\\$&"):s}var TD=lo(function(s,a,c){return s+(c?"-":"")+a.toLowerCase()}),CD=lo(function(s,a,c){return s+(c?" ":"")+a.toLowerCase()}),ID=ny("toLowerCase");function AD(s,a,c){s=Ve(s),a=be(a);var f=a?to(s):0;if(!a||f>=a)return s;var g=(a-f)/2;return Lc(Ec(g),c)+s+Lc(yc(g),c)}function SD(s,a,c){s=Ve(s),a=be(a);var f=a?to(s):0;return a&&f<a?s+Lc(a-f,c):s}function OD(s,a,c){s=Ve(s),a=be(a);var f=a?to(s):0;return a&&f<a?Lc(a-f,c)+s:s}function ND(s,a,c){return c||a==null?a=0:a&&(a=+a),MO(Ve(s).replace(Ef,""),a||0)}function RD(s,a,c){return(c?nn(s,a,c):a===n)?a=1:a=be(a),Jf(Ve(s),a)}function xD(){var s=arguments,a=Ve(s[0]);return s.length<3?a:a.replace(s[1],s[2])}var DD=lo(function(s,a,c){return s+(c?"_":"")+a.toLowerCase()});function LD(s,a,c){return c&&typeof c!="number"&&nn(s,a,c)&&(a=c=n),c=c===n?ct:c>>>0,c?(s=Ve(s),s&&(typeof a=="string"||a!=null&&!bd(a))&&(a=Cn(a),!a&&eo(s))?Tr(ei(s),0,c):s.split(a,c)):[]}var PD=lo(function(s,a,c){return s+(c?" ":"")+Cd(a)});function kD(s,a,c){return s=Ve(s),c=c==null?0:os(be(c),0,s.length),a=Cn(a),s.slice(c,c+a.length)==a}function MD(s,a,c){var f=m.templateSettings;c&&nn(s,a,c)&&(a=n),s=Ve(s),a=qc({},a,f,cy);var g=qc({},a.imports,f.imports,cy),v=Ot(g),E=kf(g,v),T,A,D=0,L=a.interpolate||rc,F="__p += '",Y=$f((a.escape||rc).source+"|"+L.source+"|"+(L===xm?gS:rc).source+"|"+(a.evaluate||rc).source+"|$","g"),ie="//# sourceURL="+(qe.call(a,"sourceURL")?(a.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++qS+"]")+`
`;s.replace(Y,function(ue,Re,ke,An,rn,Sn){return ke||(ke=An),F+=s.slice(D,Sn).replace(wS,hO),Re&&(T=!0,F+=`' +
__e(`+Re+`) +
'`),rn&&(A=!0,F+=`';
`+rn+`;
__p += '`),ke&&(F+=`' +
((__t = (`+ke+`)) == null ? '' : __t) +
'`),D=Sn+ue.length,ue}),F+=`';
`;var ce=qe.call(a,"variable")&&a.variable;if(!ce)F=`with (obj) {
`+F+`
}
`;else if(dS.test(ce))throw new me(u);F=(A?F.replace(QA,""):F).replace(JA,"$1").replace(ZA,"$1;"),F="function("+(ce||"obj")+`) {
`+(ce?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(T?", __e = _.escape":"")+(A?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+F+`return __p
}`;var Te=tE(function(){return We(v,ie+"return "+F).apply(n,E)});if(Te.source=F,Ed(Te))throw Te;return Te}function $D(s){return Ve(s).toLowerCase()}function FD(s){return Ve(s).toUpperCase()}function UD(s,a,c){if(s=Ve(s),s&&(c||a===n))return uv(s);if(!s||!(a=Cn(a)))return s;var f=ei(s),g=ei(a),v=hv(f,g),E=fv(f,g)+1;return Tr(f,v,E).join("")}function BD(s,a,c){if(s=Ve(s),s&&(c||a===n))return s.slice(0,pv(s)+1);if(!s||!(a=Cn(a)))return s;var f=ei(s),g=fv(f,ei(a))+1;return Tr(f,0,g).join("")}function WD(s,a,c){if(s=Ve(s),s&&(c||a===n))return s.replace(Ef,"");if(!s||!(a=Cn(a)))return s;var f=ei(s),g=hv(f,ei(a));return Tr(f,g).join("")}function HD(s,a){var c=pe,f=Fe;if(lt(a)){var g="separator"in a?a.separator:g;c="length"in a?be(a.length):c,f="omission"in a?Cn(a.omission):f}s=Ve(s);var v=s.length;if(eo(s)){var E=ei(s);v=E.length}if(c>=v)return s;var T=c-to(f);if(T<1)return f;var A=E?Tr(E,0,T).join(""):s.slice(0,T);if(g===n)return A+f;if(E&&(T+=A.length-T),bd(g)){if(s.slice(T).search(g)){var D,L=A;for(g.global||(g=$f(g.source,Ve(Dm.exec(g))+"g")),g.lastIndex=0;D=g.exec(L);)var F=D.index;A=A.slice(0,F===n?T:F)}}else if(s.indexOf(Cn(g),T)!=T){var Y=A.lastIndexOf(g);Y>-1&&(A=A.slice(0,Y))}return A+f}function VD(s){return s=Ve(s),s&&eS.test(s)?s.replace(Nm,vO):s}var jD=lo(function(s,a,c){return s+(c?" ":"")+a.toUpperCase()}),Cd=ny("toUpperCase");function eE(s,a,c){return s=Ve(s),a=c?n:a,a===n?dO(s)?bO(s):rO(s):s.match(a)||[]}var tE=Ae(function(s,a){try{return wn(s,n,a)}catch(c){return Ed(c)?c:new me(c)}}),qD=zi(function(s,a){return Mn(a,function(c){c=Ei(c),Ki(s,c,vd(s[c],s))}),s});function KD(s){var a=s==null?0:s.length,c=le();return s=a?ot(s,function(f){if(typeof f[1]!="function")throw new $n(l);return[c(f[0]),f[1]]}):[],Ae(function(f){for(var g=-1;++g<a;){var v=s[g];if(wn(v[0],this,f))return wn(v[1],this,f)}})}function GD(s){return vN(Un(s,_))}function Id(s){return function(){return s}}function zD(s,a){return s==null||s!==s?a:s}var YD=ry(),XD=ry(!0);function _n(s){return s}function Ad(s){return Pv(typeof s=="function"?s:Un(s,_))}function QD(s){return Mv(Un(s,_))}function JD(s,a){return $v(s,Un(a,_))}var ZD=Ae(function(s,a){return function(c){return Ia(c,s,a)}}),eL=Ae(function(s,a){return function(c){return Ia(s,c,a)}});function Sd(s,a,c){var f=Ot(a),g=Ac(a,f);c==null&&!(lt(a)&&(g.length||!f.length))&&(c=a,a=s,s=this,g=Ac(a,Ot(a)));var v=!(lt(c)&&"chain"in c)||!!c.chain,E=Xi(s);return Mn(g,function(T){var A=a[T];s[T]=A,E&&(s.prototype[T]=function(){var D=this.__chain__;if(v||D){var L=s(this.__wrapped__),F=L.__actions__=dn(this.__actions__);return F.push({func:A,args:arguments,thisArg:s}),L.__chain__=D,L}return A.apply(s,mr([this.value()],arguments))})}),s}function tL(){return $t._===this&&($t._=SO),this}function Od(){}function nL(s){return s=be(s),Ae(function(a){return Fv(a,s)})}var iL=sd(ot),rL=sd(sv),sL=sd(Rf);function nE(s){return fd(s)?xf(Ei(s)):kN(s)}function oL(s){return function(a){return s==null?n:as(s,a)}}var aL=oy(),lL=oy(!0);function Nd(){return[]}function Rd(){return!1}function cL(){return{}}function uL(){return""}function hL(){return!0}function fL(s,a){if(s=be(s),s<1||s>we)return[];var c=ct,f=Gt(s,ct);a=le(a),s-=ct;for(var g=Pf(f,a);++c<s;)a(c);return g}function dL(s){return ve(s)?ot(s,Ei):In(s)?[s]:dn(wy(Ve(s)))}function pL(s){var a=++IO;return Ve(s)+a}var gL=Dc(function(s,a){return s+a},0),_L=od("ceil"),mL=Dc(function(s,a){return s/a},1),vL=od("floor");function yL(s){return s&&s.length?Ic(s,_n,qf):n}function EL(s,a){return s&&s.length?Ic(s,le(a,2),qf):n}function bL(s){return lv(s,_n)}function wL(s,a){return lv(s,le(a,2))}function TL(s){return s&&s.length?Ic(s,_n,Yf):n}function CL(s,a){return s&&s.length?Ic(s,le(a,2),Yf):n}var IL=Dc(function(s,a){return s*a},1),AL=od("round"),SL=Dc(function(s,a){return s-a},0);function OL(s){return s&&s.length?Lf(s,_n):0}function NL(s,a){return s&&s.length?Lf(s,le(a,2)):0}return m.after=QR,m.ary=Ly,m.assign=Fx,m.assignIn=Gy,m.assignInWith=qc,m.assignWith=Ux,m.at=Bx,m.before=Py,m.bind=vd,m.bindAll=qD,m.bindKey=ky,m.castArray=cx,m.chain=Ry,m.chunk=v1,m.compact=y1,m.concat=E1,m.cond=KD,m.conforms=GD,m.constant=Id,m.countBy=OR,m.create=Wx,m.curry=My,m.curryRight=$y,m.debounce=Fy,m.defaults=Hx,m.defaultsDeep=Vx,m.defer=JR,m.delay=ZR,m.difference=b1,m.differenceBy=w1,m.differenceWith=T1,m.drop=C1,m.dropRight=I1,m.dropRightWhile=A1,m.dropWhile=S1,m.fill=O1,m.filter=RR,m.flatMap=LR,m.flatMapDeep=PR,m.flatMapDepth=kR,m.flatten=Ay,m.flattenDeep=N1,m.flattenDepth=R1,m.flip=ex,m.flow=YD,m.flowRight=XD,m.fromPairs=x1,m.functions=Xx,m.functionsIn=Qx,m.groupBy=MR,m.initial=L1,m.intersection=P1,m.intersectionBy=k1,m.intersectionWith=M1,m.invert=Zx,m.invertBy=eD,m.invokeMap=FR,m.iteratee=Ad,m.keyBy=UR,m.keys=Ot,m.keysIn=gn,m.map=Uc,m.mapKeys=nD,m.mapValues=iD,m.matches=QD,m.matchesProperty=JD,m.memoize=Wc,m.merge=rD,m.mergeWith=zy,m.method=ZD,m.methodOf=eL,m.mixin=Sd,m.negate=Hc,m.nthArg=nL,m.omit=sD,m.omitBy=oD,m.once=tx,m.orderBy=BR,m.over=iL,m.overArgs=nx,m.overEvery=rL,m.overSome=sL,m.partial=yd,m.partialRight=Uy,m.partition=WR,m.pick=aD,m.pickBy=Yy,m.property=nE,m.propertyOf=oL,m.pull=B1,m.pullAll=Oy,m.pullAllBy=W1,m.pullAllWith=H1,m.pullAt=V1,m.range=aL,m.rangeRight=lL,m.rearg=ix,m.reject=jR,m.remove=j1,m.rest=rx,m.reverse=_d,m.sampleSize=KR,m.set=cD,m.setWith=uD,m.shuffle=GR,m.slice=q1,m.sortBy=XR,m.sortedUniq=J1,m.sortedUniqBy=Z1,m.split=LD,m.spread=sx,m.tail=eR,m.take=tR,m.takeRight=nR,m.takeRightWhile=iR,m.takeWhile=rR,m.tap=yR,m.throttle=ox,m.thru=Fc,m.toArray=jy,m.toPairs=Xy,m.toPairsIn=Qy,m.toPath=dL,m.toPlainObject=Ky,m.transform=hD,m.unary=ax,m.union=sR,m.unionBy=oR,m.unionWith=aR,m.uniq=lR,m.uniqBy=cR,m.uniqWith=uR,m.unset=fD,m.unzip=md,m.unzipWith=Ny,m.update=dD,m.updateWith=pD,m.values=ho,m.valuesIn=gD,m.without=hR,m.words=eE,m.wrap=lx,m.xor=fR,m.xorBy=dR,m.xorWith=pR,m.zip=gR,m.zipObject=_R,m.zipObjectDeep=mR,m.zipWith=vR,m.entries=Xy,m.entriesIn=Qy,m.extend=Gy,m.extendWith=qc,Sd(m,m),m.add=gL,m.attempt=tE,m.camelCase=yD,m.capitalize=Jy,m.ceil=_L,m.clamp=_D,m.clone=ux,m.cloneDeep=fx,m.cloneDeepWith=dx,m.cloneWith=hx,m.conformsTo=px,m.deburr=Zy,m.defaultTo=zD,m.divide=mL,m.endsWith=ED,m.eq=ni,m.escape=bD,m.escapeRegExp=wD,m.every=NR,m.find=xR,m.findIndex=Cy,m.findKey=jx,m.findLast=DR,m.findLastIndex=Iy,m.findLastKey=qx,m.floor=vL,m.forEach=xy,m.forEachRight=Dy,m.forIn=Kx,m.forInRight=Gx,m.forOwn=zx,m.forOwnRight=Yx,m.get=wd,m.gt=gx,m.gte=_x,m.has=Jx,m.hasIn=Td,m.head=Sy,m.identity=_n,m.includes=$R,m.indexOf=D1,m.inRange=mD,m.invoke=tD,m.isArguments=us,m.isArray=ve,m.isArrayBuffer=mx,m.isArrayLike=pn,m.isArrayLikeObject=pt,m.isBoolean=vx,m.isBuffer=Cr,m.isDate=yx,m.isElement=Ex,m.isEmpty=bx,m.isEqual=wx,m.isEqualWith=Tx,m.isError=Ed,m.isFinite=Cx,m.isFunction=Xi,m.isInteger=By,m.isLength=Vc,m.isMap=Wy,m.isMatch=Ix,m.isMatchWith=Ax,m.isNaN=Sx,m.isNative=Ox,m.isNil=Rx,m.isNull=Nx,m.isNumber=Hy,m.isObject=lt,m.isObjectLike=ut,m.isPlainObject=xa,m.isRegExp=bd,m.isSafeInteger=xx,m.isSet=Vy,m.isString=jc,m.isSymbol=In,m.isTypedArray=uo,m.isUndefined=Dx,m.isWeakMap=Lx,m.isWeakSet=Px,m.join=$1,m.kebabCase=TD,m.last=Wn,m.lastIndexOf=F1,m.lowerCase=CD,m.lowerFirst=ID,m.lt=kx,m.lte=Mx,m.max=yL,m.maxBy=EL,m.mean=bL,m.meanBy=wL,m.min=TL,m.minBy=CL,m.stubArray=Nd,m.stubFalse=Rd,m.stubObject=cL,m.stubString=uL,m.stubTrue=hL,m.multiply=IL,m.nth=U1,m.noConflict=tL,m.noop=Od,m.now=Bc,m.pad=AD,m.padEnd=SD,m.padStart=OD,m.parseInt=ND,m.random=vD,m.reduce=HR,m.reduceRight=VR,m.repeat=RD,m.replace=xD,m.result=lD,m.round=AL,m.runInContext=I,m.sample=qR,m.size=zR,m.snakeCase=DD,m.some=YR,m.sortedIndex=K1,m.sortedIndexBy=G1,m.sortedIndexOf=z1,m.sortedLastIndex=Y1,m.sortedLastIndexBy=X1,m.sortedLastIndexOf=Q1,m.startCase=PD,m.startsWith=kD,m.subtract=SL,m.sum=OL,m.sumBy=NL,m.template=MD,m.times=fL,m.toFinite=Qi,m.toInteger=be,m.toLength=qy,m.toLower=$D,m.toNumber=Hn,m.toSafeInteger=$x,m.toString=Ve,m.toUpper=FD,m.trim=UD,m.trimEnd=BD,m.trimStart=WD,m.truncate=HD,m.unescape=VD,m.uniqueId=pL,m.upperCase=jD,m.upperFirst=Cd,m.each=xy,m.eachRight=Dy,m.first=Sy,Sd(m,function(){var s={};return vi(m,function(a,c){qe.call(m.prototype,c)||(s[c]=a)}),s}(),{chain:!1}),m.VERSION=i,Mn(["bind","bindKey","curry","curryRight","partial","partialRight"],function(s){m[s].placeholder=m}),Mn(["drop","take"],function(s,a){De.prototype[s]=function(c){c=c===n?1:Et(be(c),0);var f=this.__filtered__&&!a?new De(this):this.clone();return f.__filtered__?f.__takeCount__=Gt(c,f.__takeCount__):f.__views__.push({size:Gt(c,ct),type:s+(f.__dir__<0?"Right":"")}),f},De.prototype[s+"Right"]=function(c){return this.reverse()[s](c).reverse()}}),Mn(["filter","map","takeWhile"],function(s,a){var c=a+1,f=c==jt||c==Be;De.prototype[s]=function(g){var v=this.clone();return v.__iteratees__.push({iteratee:le(g,3),type:c}),v.__filtered__=v.__filtered__||f,v}}),Mn(["head","last"],function(s,a){var c="take"+(a?"Right":"");De.prototype[s]=function(){return this[c](1).value()[0]}}),Mn(["initial","tail"],function(s,a){var c="drop"+(a?"":"Right");De.prototype[s]=function(){return this.__filtered__?new De(this):this[c](1)}}),De.prototype.compact=function(){return this.filter(_n)},De.prototype.find=function(s){return this.filter(s).head()},De.prototype.findLast=function(s){return this.reverse().find(s)},De.prototype.invokeMap=Ae(function(s,a){return typeof s=="function"?new De(this):this.map(function(c){return Ia(c,s,a)})}),De.prototype.reject=function(s){return this.filter(Hc(le(s)))},De.prototype.slice=function(s,a){s=be(s);var c=this;return c.__filtered__&&(s>0||a<0)?new De(c):(s<0?c=c.takeRight(-s):s&&(c=c.drop(s)),a!==n&&(a=be(a),c=a<0?c.dropRight(-a):c.take(a-s)),c)},De.prototype.takeRightWhile=function(s){return this.reverse().takeWhile(s).reverse()},De.prototype.toArray=function(){return this.take(ct)},vi(De.prototype,function(s,a){var c=/^(?:filter|find|map|reject)|While$/.test(a),f=/^(?:head|last)$/.test(a),g=m[f?"take"+(a=="last"?"Right":""):a],v=f||/^find/.test(a);g&&(m.prototype[a]=function(){var E=this.__wrapped__,T=f?[1]:arguments,A=E instanceof De,D=T[0],L=A||ve(E),F=function(Re){var ke=g.apply(m,mr([Re],T));return f&&Y?ke[0]:ke};L&&c&&typeof D=="function"&&D.length!=1&&(A=L=!1);var Y=this.__chain__,ie=!!this.__actions__.length,ce=v&&!Y,Te=A&&!ie;if(!v&&L){E=Te?E:new De(this);var ue=s.apply(E,T);return ue.__actions__.push({func:Fc,args:[F],thisArg:n}),new Fn(ue,Y)}return ce&&Te?s.apply(this,T):(ue=this.thru(F),ce?f?ue.value()[0]:ue.value():ue)})}),Mn(["pop","push","shift","sort","splice","unshift"],function(s){var a=uc[s],c=/^(?:push|sort|unshift)$/.test(s)?"tap":"thru",f=/^(?:pop|shift)$/.test(s);m.prototype[s]=function(){var g=arguments;if(f&&!this.__chain__){var v=this.value();return a.apply(ve(v)?v:[],g)}return this[c](function(E){return a.apply(ve(E)?E:[],g)})}}),vi(De.prototype,function(s,a){var c=m[a];if(c){var f=c.name+"";qe.call(so,f)||(so[f]=[]),so[f].push({name:a,func:c})}}),so[xc(n,G).name]=[{name:"wrapper",func:n}],De.prototype.clone=VO,De.prototype.reverse=jO,De.prototype.value=qO,m.prototype.at=ER,m.prototype.chain=bR,m.prototype.commit=wR,m.prototype.next=TR,m.prototype.plant=IR,m.prototype.reverse=AR,m.prototype.toJSON=m.prototype.valueOf=m.prototype.value=SR,m.prototype.first=m.prototype.head,va&&(m.prototype[va]=CR),m},no=wO();ns?((ns.exports=no)._=no,Af._=no):$t._=no}).call($a)})(mV,Ol);const vV=e_({apiKey:"AIzaSyBJsQeWbln9lR9B-W7jQZVCy9AWZyoe9pQ",authDomain:"tacmap-dev.firebaseapp.com",projectId:"tacmap-dev",storageBucket:"tacmap-dev.appspot.com",messagingSenderId:"278955153095",appId:"1:278955153095:web:dc491f9539c91be1e0d0e2"}),Fa=CC(vV),Rr={GetValue:async t=>(await TC(oi(Fa,t))).val(),Subscribe:(t,e)=>jW(oi(Fa,t),n=>{e(n.val())}),UpdateValues:async t=>{await Eu(oi(Fa),t)},SetValue:async(t,e)=>{const n=oi(Fa,t);await Kr(n,e)},DeleteValue:async t=>{await xs(oi(Fa,t))},resetDB:async()=>{console.log("reset");let t=Ze.uuidv4(),e=Ze.uuidv4(),n=Ze.uuidv4(),i=Ze.uuidv4(),r=Ze.uuidv4(),o=Ze.uuidv4(),l=Ze.uuidv4(),u=Ze.uuidv4();await Rr.SetValue("/",{rooms:{[yn.roomId]:{gameMode:"TDM",roomName:"Cement Factory",password:"test",image:"cement-factory.png",map:{location:{lat:36.6508794278,long:-114.501887496},zoom:18,bounds:[[36.65305168185297,-114.50459216419664],[36.64879837009076,-114.49938038551329]]},spotDurationMS:5e3,teamIds:{[Ze.uuidv4()]:t,[Ze.uuidv4()]:e}}},teams:{[e]:{id:e,index:1,teamName:"OPFOR",squadIds:[n,i,r]},[t]:{id:t,index:0,teamName:"BLUFOR",squadIds:[o,l,u]}},squads:{[n]:{squadName:"Squad 1"},[i]:{squadName:"Squad 2"},[r]:{squadName:"Squad 3"},[o]:{squadName:"Squad 1"},[l]:{squadName:"Squad 2"},[u]:{squadName:"Squad 3"}},users:{[Ze.uuidv4()]:{username:"emptyUser"}}})}},yV={data(){return{time:"",calibrateMap:!1}},methods:{openOffCanvas(){vt.emit("toggle-sidebar")},SetLocation(){vt.emit("set-location")},resetDB(){Rr.resetDB()},toggleCalibrateMap(){this.calibrateMap=!this.calibrateMap,vt.emit("calibrate-map",this.calibrateMap)},saveMap(){vt.emit("save-map")}},created(){setInterval(()=>{let t=new Date;this.time=`${t.toLocaleTimeString("it-IT")}`},1e3)},mounted(){vt.on("map-saved",()=>{this.calibrateMap=!1})}};const Xl=(t,e)=>{const n=t.__vccOpts||t;for(const[i,r]of e)n[i]=r;return n},Ql=t=>(Vg("data-v-6cf40f65"),t=t(),jg(),t),EV={class:"container-fluid"},bV=Ql(()=>ge("i",{class:"bi bi-list"},null,-1)),wV=[bV],TV=Ql(()=>ge("i",{class:"bi bi-geo-fill"},null,-1)),CV=[TV],IV=Ql(()=>ge("i",{class:"bi bi-database-gear"},null,-1)),AV=[IV],SV=Ql(()=>ge("i",{class:"bi bi-map"},null,-1)),OV=[SV],NV=Ql(()=>ge("i",{class:"bi bi-cloud-arrow-up"},null,-1)),RV=[NV],xV={class:"clock d-inline"};function DV(t,e,n,i,r,o){return Le(),Ge("div",EV,[ge("button",{class:"btn btn-sm btn-primary m-1 d-inline",type:"button",onClick:e[0]||(e[0]=l=>o.openOffCanvas())},wV),t.$store.getters.useGPS?bt("",!0):(Le(),Ge("button",{key:0,class:"btn btn-sm btn-primary m-1 d-inline",type:"button",onClick:e[1]||(e[1]=l=>o.SetLocation())},CV)),t.$store.getters.isAdmin?(Le(),Ge("button",{key:1,class:"btn btn-sm btn-primary m-1 d-inline",type:"button",onClick:e[2]||(e[2]=l=>o.resetDB())},AV)):bt("",!0),t.$store.getters.isAdmin?(Le(),Ge("button",{key:2,class:"btn btn-sm btn-primary m-1 d-inline",type:"button",onClick:e[3]||(e[3]=l=>o.toggleCalibrateMap())},OV)):bt("",!0),t.$store.getters.isAdmin&&r.calibrateMap?(Le(),Ge("button",{key:3,class:"btn btn-sm btn-primary m-1 d-inline",type:"button",onClick:e[4]||(e[4]=l=>o.saveMap())},RV)):bt("",!0),ge("span",xV,er(r.time),1)])}const LV=Xl(yV,[["render",DV],["__scopeId","data-v-6cf40f65"]]);var cn="top",xn="bottom",Dn="right",un="left",of="auto",ua=[cn,xn,Dn,un],Bs="start",qo="end",WI="clippingParents",um="viewport",Eo="popper",HI="reference",bg=ua.reduce(function(t,e){return t.concat([e+"-"+Bs,e+"-"+qo])},[]),hm=[].concat(ua,[of]).reduce(function(t,e){return t.concat([e,e+"-"+Bs,e+"-"+qo])},[]),VI="beforeRead",jI="read",qI="afterRead",KI="beforeMain",GI="main",zI="afterMain",YI="beforeWrite",XI="write",QI="afterWrite",JI=[VI,jI,qI,KI,GI,zI,YI,XI,QI];function $i(t){return t?(t.nodeName||"").toLowerCase():null}function Qn(t){if(t==null)return window;if(t.toString()!=="[object Window]"){var e=t.ownerDocument;return e&&e.defaultView||window}return t}function Ws(t){var e=Qn(t).Element;return t instanceof e||t instanceof Element}function Gn(t){var e=Qn(t).HTMLElement;return t instanceof e||t instanceof HTMLElement}function fm(t){if(typeof ShadowRoot>"u")return!1;var e=Qn(t).ShadowRoot;return t instanceof e||t instanceof ShadowRoot}function PV(t){var e=t.state;Object.keys(e.elements).forEach(function(n){var i=e.styles[n]||{},r=e.attributes[n]||{},o=e.elements[n];!Gn(o)||!$i(o)||(Object.assign(o.style,i),Object.keys(r).forEach(function(l){var u=r[l];u===!1?o.removeAttribute(l):o.setAttribute(l,u===!0?"":u)}))})}function kV(t){var e=t.state,n={popper:{position:e.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(e.elements.popper.style,n.popper),e.styles=n,e.elements.arrow&&Object.assign(e.elements.arrow.style,n.arrow),function(){Object.keys(e.elements).forEach(function(i){var r=e.elements[i],o=e.attributes[i]||{},l=Object.keys(e.styles.hasOwnProperty(i)?e.styles[i]:n[i]),u=l.reduce(function(h,d){return h[d]="",h},{});!Gn(r)||!$i(r)||(Object.assign(r.style,u),Object.keys(o).forEach(function(h){r.removeAttribute(h)}))})}}const dm={name:"applyStyles",enabled:!0,phase:"write",fn:PV,effect:kV,requires:["computeStyles"]};function Ni(t){return t.split("-")[0]}var Ps=Math.max,uh=Math.min,Ko=Math.round;function wg(){var t=navigator.userAgentData;return t!=null&&t.brands?t.brands.map(function(e){return e.brand+"/"+e.version}).join(" "):navigator.userAgent}function ZI(){return!/^((?!chrome|android).)*safari/i.test(wg())}function Go(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!1);var i=t.getBoundingClientRect(),r=1,o=1;e&&Gn(t)&&(r=t.offsetWidth>0&&Ko(i.width)/t.offsetWidth||1,o=t.offsetHeight>0&&Ko(i.height)/t.offsetHeight||1);var l=Ws(t)?Qn(t):window,u=l.visualViewport,h=!ZI()&&n,d=(i.left+(h&&u?u.offsetLeft:0))/r,p=(i.top+(h&&u?u.offsetTop:0))/o,_=i.width/r,y=i.height/o;return{width:_,height:y,top:p,right:d+_,bottom:p+y,left:d,x:d,y:p}}function pm(t){var e=Go(t),n=t.offsetWidth,i=t.offsetHeight;return Math.abs(e.width-n)<=1&&(n=e.width),Math.abs(e.height-i)<=1&&(i=e.height),{x:t.offsetLeft,y:t.offsetTop,width:n,height:i}}function eA(t,e){var n=e.getRootNode&&e.getRootNode();if(t.contains(e))return!0;if(n&&fm(n)){var i=e;do{if(i&&t.isSameNode(i))return!0;i=i.parentNode||i.host}while(i)}return!1}function hr(t){return Qn(t).getComputedStyle(t)}function MV(t){return["table","td","th"].indexOf($i(t))>=0}function Jr(t){return((Ws(t)?t.ownerDocument:t.document)||window.document).documentElement}function af(t){return $i(t)==="html"?t:t.assignedSlot||t.parentNode||(fm(t)?t.host:null)||Jr(t)}function aw(t){return!Gn(t)||hr(t).position==="fixed"?null:t.offsetParent}function $V(t){var e=/firefox/i.test(wg()),n=/Trident/i.test(wg());if(n&&Gn(t)){var i=hr(t);if(i.position==="fixed")return null}var r=af(t);for(fm(r)&&(r=r.host);Gn(r)&&["html","body"].indexOf($i(r))<0;){var o=hr(r);if(o.transform!=="none"||o.perspective!=="none"||o.contain==="paint"||["transform","perspective"].indexOf(o.willChange)!==-1||e&&o.willChange==="filter"||e&&o.filter&&o.filter!=="none")return r;r=r.parentNode}return null}function Jl(t){for(var e=Qn(t),n=aw(t);n&&MV(n)&&hr(n).position==="static";)n=aw(n);return n&&($i(n)==="html"||$i(n)==="body"&&hr(n).position==="static")?e:n||$V(t)||e}function gm(t){return["top","bottom"].indexOf(t)>=0?"x":"y"}function nl(t,e,n){return Ps(t,uh(e,n))}function FV(t,e,n){var i=nl(t,e,n);return i>n?n:i}function tA(){return{top:0,right:0,bottom:0,left:0}}function nA(t){return Object.assign({},tA(),t)}function iA(t,e){return e.reduce(function(n,i){return n[i]=t,n},{})}var UV=function(e,n){return e=typeof e=="function"?e(Object.assign({},n.rects,{placement:n.placement})):e,nA(typeof e!="number"?e:iA(e,ua))};function BV(t){var e,n=t.state,i=t.name,r=t.options,o=n.elements.arrow,l=n.modifiersData.popperOffsets,u=Ni(n.placement),h=gm(u),d=[un,Dn].indexOf(u)>=0,p=d?"height":"width";if(!(!o||!l)){var _=UV(r.padding,n),y=pm(o),b=h==="y"?cn:un,S=h==="y"?xn:Dn,N=n.rects.reference[p]+n.rects.reference[h]-l[h]-n.rects.popper[p],k=l[h]-n.rects.reference[h],G=Jl(o),oe=G?h==="y"?G.clientHeight||0:G.clientWidth||0:0,H=N/2-k/2,V=_[b],Q=oe-y[p]-_[S],B=oe/2-y[p]/2+H,Z=nl(V,B,Q),X=h;n.modifiersData[i]=(e={},e[X]=Z,e.centerOffset=Z-B,e)}}function WV(t){var e=t.state,n=t.options,i=n.element,r=i===void 0?"[data-popper-arrow]":i;r!=null&&(typeof r=="string"&&(r=e.elements.popper.querySelector(r),!r)||eA(e.elements.popper,r)&&(e.elements.arrow=r))}const rA={name:"arrow",enabled:!0,phase:"main",fn:BV,effect:WV,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function zo(t){return t.split("-")[1]}var HV={top:"auto",right:"auto",bottom:"auto",left:"auto"};function VV(t){var e=t.x,n=t.y,i=window,r=i.devicePixelRatio||1;return{x:Ko(e*r)/r||0,y:Ko(n*r)/r||0}}function lw(t){var e,n=t.popper,i=t.popperRect,r=t.placement,o=t.variation,l=t.offsets,u=t.position,h=t.gpuAcceleration,d=t.adaptive,p=t.roundOffsets,_=t.isFixed,y=l.x,b=y===void 0?0:y,S=l.y,N=S===void 0?0:S,k=typeof p=="function"?p({x:b,y:N}):{x:b,y:N};b=k.x,N=k.y;var G=l.hasOwnProperty("x"),oe=l.hasOwnProperty("y"),H=un,V=cn,Q=window;if(d){var B=Jl(n),Z="clientHeight",X="clientWidth";if(B===Qn(n)&&(B=Jr(n),hr(B).position!=="static"&&u==="absolute"&&(Z="scrollHeight",X="scrollWidth")),B=B,r===cn||(r===un||r===Dn)&&o===qo){V=xn;var de=_&&B===Q&&Q.visualViewport?Q.visualViewport.height:B[Z];N-=de-i.height,N*=h?1:-1}if(r===un||(r===cn||r===xn)&&o===qo){H=Dn;var pe=_&&B===Q&&Q.visualViewport?Q.visualViewport.width:B[X];b-=pe-i.width,b*=h?1:-1}}var Fe=Object.assign({position:u},d&&HV),rt=p===!0?VV({x:b,y:N}):{x:b,y:N};if(b=rt.x,N=rt.y,h){var Ye;return Object.assign({},Fe,(Ye={},Ye[V]=oe?"0":"",Ye[H]=G?"0":"",Ye.transform=(Q.devicePixelRatio||1)<=1?"translate("+b+"px, "+N+"px)":"translate3d("+b+"px, "+N+"px, 0)",Ye))}return Object.assign({},Fe,(e={},e[V]=oe?N+"px":"",e[H]=G?b+"px":"",e.transform="",e))}function jV(t){var e=t.state,n=t.options,i=n.gpuAcceleration,r=i===void 0?!0:i,o=n.adaptive,l=o===void 0?!0:o,u=n.roundOffsets,h=u===void 0?!0:u,d={placement:Ni(e.placement),variation:zo(e.placement),popper:e.elements.popper,popperRect:e.rects.popper,gpuAcceleration:r,isFixed:e.options.strategy==="fixed"};e.modifiersData.popperOffsets!=null&&(e.styles.popper=Object.assign({},e.styles.popper,lw(Object.assign({},d,{offsets:e.modifiersData.popperOffsets,position:e.options.strategy,adaptive:l,roundOffsets:h})))),e.modifiersData.arrow!=null&&(e.styles.arrow=Object.assign({},e.styles.arrow,lw(Object.assign({},d,{offsets:e.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:h})))),e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-placement":e.placement})}const _m={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:jV,data:{}};var ou={passive:!0};function qV(t){var e=t.state,n=t.instance,i=t.options,r=i.scroll,o=r===void 0?!0:r,l=i.resize,u=l===void 0?!0:l,h=Qn(e.elements.popper),d=[].concat(e.scrollParents.reference,e.scrollParents.popper);return o&&d.forEach(function(p){p.addEventListener("scroll",n.update,ou)}),u&&h.addEventListener("resize",n.update,ou),function(){o&&d.forEach(function(p){p.removeEventListener("scroll",n.update,ou)}),u&&h.removeEventListener("resize",n.update,ou)}}const mm={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:qV,data:{}};var KV={left:"right",right:"left",bottom:"top",top:"bottom"};function wu(t){return t.replace(/left|right|bottom|top/g,function(e){return KV[e]})}var GV={start:"end",end:"start"};function cw(t){return t.replace(/start|end/g,function(e){return GV[e]})}function vm(t){var e=Qn(t),n=e.pageXOffset,i=e.pageYOffset;return{scrollLeft:n,scrollTop:i}}function ym(t){return Go(Jr(t)).left+vm(t).scrollLeft}function zV(t,e){var n=Qn(t),i=Jr(t),r=n.visualViewport,o=i.clientWidth,l=i.clientHeight,u=0,h=0;if(r){o=r.width,l=r.height;var d=ZI();(d||!d&&e==="fixed")&&(u=r.offsetLeft,h=r.offsetTop)}return{width:o,height:l,x:u+ym(t),y:h}}function YV(t){var e,n=Jr(t),i=vm(t),r=(e=t.ownerDocument)==null?void 0:e.body,o=Ps(n.scrollWidth,n.clientWidth,r?r.scrollWidth:0,r?r.clientWidth:0),l=Ps(n.scrollHeight,n.clientHeight,r?r.scrollHeight:0,r?r.clientHeight:0),u=-i.scrollLeft+ym(t),h=-i.scrollTop;return hr(r||n).direction==="rtl"&&(u+=Ps(n.clientWidth,r?r.clientWidth:0)-o),{width:o,height:l,x:u,y:h}}function Em(t){var e=hr(t),n=e.overflow,i=e.overflowX,r=e.overflowY;return/auto|scroll|overlay|hidden/.test(n+r+i)}function sA(t){return["html","body","#document"].indexOf($i(t))>=0?t.ownerDocument.body:Gn(t)&&Em(t)?t:sA(af(t))}function il(t,e){var n;e===void 0&&(e=[]);var i=sA(t),r=i===((n=t.ownerDocument)==null?void 0:n.body),o=Qn(i),l=r?[o].concat(o.visualViewport||[],Em(i)?i:[]):i,u=e.concat(l);return r?u:u.concat(il(af(l)))}function Tg(t){return Object.assign({},t,{left:t.x,top:t.y,right:t.x+t.width,bottom:t.y+t.height})}function XV(t,e){var n=Go(t,!1,e==="fixed");return n.top=n.top+t.clientTop,n.left=n.left+t.clientLeft,n.bottom=n.top+t.clientHeight,n.right=n.left+t.clientWidth,n.width=t.clientWidth,n.height=t.clientHeight,n.x=n.left,n.y=n.top,n}function uw(t,e,n){return e===um?Tg(zV(t,n)):Ws(e)?XV(e,n):Tg(YV(Jr(t)))}function QV(t){var e=il(af(t)),n=["absolute","fixed"].indexOf(hr(t).position)>=0,i=n&&Gn(t)?Jl(t):t;return Ws(i)?e.filter(function(r){return Ws(r)&&eA(r,i)&&$i(r)!=="body"}):[]}function JV(t,e,n,i){var r=e==="clippingParents"?QV(t):[].concat(e),o=[].concat(r,[n]),l=o[0],u=o.reduce(function(h,d){var p=uw(t,d,i);return h.top=Ps(p.top,h.top),h.right=uh(p.right,h.right),h.bottom=uh(p.bottom,h.bottom),h.left=Ps(p.left,h.left),h},uw(t,l,i));return u.width=u.right-u.left,u.height=u.bottom-u.top,u.x=u.left,u.y=u.top,u}function oA(t){var e=t.reference,n=t.element,i=t.placement,r=i?Ni(i):null,o=i?zo(i):null,l=e.x+e.width/2-n.width/2,u=e.y+e.height/2-n.height/2,h;switch(r){case cn:h={x:l,y:e.y-n.height};break;case xn:h={x:l,y:e.y+e.height};break;case Dn:h={x:e.x+e.width,y:u};break;case un:h={x:e.x-n.width,y:u};break;default:h={x:e.x,y:e.y}}var d=r?gm(r):null;if(d!=null){var p=d==="y"?"height":"width";switch(o){case Bs:h[d]=h[d]-(e[p]/2-n[p]/2);break;case qo:h[d]=h[d]+(e[p]/2-n[p]/2);break}}return h}function Yo(t,e){e===void 0&&(e={});var n=e,i=n.placement,r=i===void 0?t.placement:i,o=n.strategy,l=o===void 0?t.strategy:o,u=n.boundary,h=u===void 0?WI:u,d=n.rootBoundary,p=d===void 0?um:d,_=n.elementContext,y=_===void 0?Eo:_,b=n.altBoundary,S=b===void 0?!1:b,N=n.padding,k=N===void 0?0:N,G=nA(typeof k!="number"?k:iA(k,ua)),oe=y===Eo?HI:Eo,H=t.rects.popper,V=t.elements[S?oe:y],Q=JV(Ws(V)?V:V.contextElement||Jr(t.elements.popper),h,p,l),B=Go(t.elements.reference),Z=oA({reference:B,element:H,strategy:"absolute",placement:r}),X=Tg(Object.assign({},H,Z)),de=y===Eo?X:B,pe={top:Q.top-de.top+G.top,bottom:de.bottom-Q.bottom+G.bottom,left:Q.left-de.left+G.left,right:de.right-Q.right+G.right},Fe=t.modifiersData.offset;if(y===Eo&&Fe){var rt=Fe[r];Object.keys(pe).forEach(function(Ye){var jt=[Dn,xn].indexOf(Ye)>=0?1:-1,Ln=[cn,xn].indexOf(Ye)>=0?"y":"x";pe[Ye]+=rt[Ln]*jt})}return pe}function ZV(t,e){e===void 0&&(e={});var n=e,i=n.placement,r=n.boundary,o=n.rootBoundary,l=n.padding,u=n.flipVariations,h=n.allowedAutoPlacements,d=h===void 0?hm:h,p=zo(i),_=p?u?bg:bg.filter(function(S){return zo(S)===p}):ua,y=_.filter(function(S){return d.indexOf(S)>=0});y.length===0&&(y=_);var b=y.reduce(function(S,N){return S[N]=Yo(t,{placement:N,boundary:r,rootBoundary:o,padding:l})[Ni(N)],S},{});return Object.keys(b).sort(function(S,N){return b[S]-b[N]})}function ej(t){if(Ni(t)===of)return[];var e=wu(t);return[cw(t),e,cw(e)]}function tj(t){var e=t.state,n=t.options,i=t.name;if(!e.modifiersData[i]._skip){for(var r=n.mainAxis,o=r===void 0?!0:r,l=n.altAxis,u=l===void 0?!0:l,h=n.fallbackPlacements,d=n.padding,p=n.boundary,_=n.rootBoundary,y=n.altBoundary,b=n.flipVariations,S=b===void 0?!0:b,N=n.allowedAutoPlacements,k=e.options.placement,G=Ni(k),oe=G===k,H=h||(oe||!S?[wu(k)]:ej(k)),V=[k].concat(H).reduce(function(_i,kt){return _i.concat(Ni(kt)===of?ZV(e,{placement:kt,boundary:p,rootBoundary:_,padding:d,flipVariations:S,allowedAutoPlacements:N}):kt)},[]),Q=e.rects.reference,B=e.rects.popper,Z=new Map,X=!0,de=V[0],pe=0;pe<V.length;pe++){var Fe=V[pe],rt=Ni(Fe),Ye=zo(Fe)===Bs,jt=[cn,xn].indexOf(rt)>=0,Ln=jt?"width":"height",Be=Yo(e,{placement:Fe,boundary:p,rootBoundary:_,altBoundary:y,padding:d}),ye=jt?Ye?Dn:un:Ye?xn:cn;Q[Ln]>B[Ln]&&(ye=wu(ye));var we=wu(ye),Pt=[];if(o&&Pt.push(Be[rt]<=0),u&&Pt.push(Be[ye]<=0,Be[we]<=0),Pt.every(function(_i){return _i})){de=Fe,X=!1;break}Z.set(Fe,Pt)}if(X)for(var hn=S?3:1,ct=function(kt){var mt=V.find(function(Zn){var qt=Z.get(Zn);if(qt)return qt.slice(0,kt).every(function(Kt){return Kt})});if(mt)return de=mt,"break"},St=hn;St>0;St--){var Hi=ct(St);if(Hi==="break")break}e.placement!==de&&(e.modifiersData[i]._skip=!0,e.placement=de,e.reset=!0)}}const aA={name:"flip",enabled:!0,phase:"main",fn:tj,requiresIfExists:["offset"],data:{_skip:!1}};function hw(t,e,n){return n===void 0&&(n={x:0,y:0}),{top:t.top-e.height-n.y,right:t.right-e.width+n.x,bottom:t.bottom-e.height+n.y,left:t.left-e.width-n.x}}function fw(t){return[cn,Dn,xn,un].some(function(e){return t[e]>=0})}function nj(t){var e=t.state,n=t.name,i=e.rects.reference,r=e.rects.popper,o=e.modifiersData.preventOverflow,l=Yo(e,{elementContext:"reference"}),u=Yo(e,{altBoundary:!0}),h=hw(l,i),d=hw(u,r,o),p=fw(h),_=fw(d);e.modifiersData[n]={referenceClippingOffsets:h,popperEscapeOffsets:d,isReferenceHidden:p,hasPopperEscaped:_},e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-reference-hidden":p,"data-popper-escaped":_})}const lA={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:nj};function ij(t,e,n){var i=Ni(t),r=[un,cn].indexOf(i)>=0?-1:1,o=typeof n=="function"?n(Object.assign({},e,{placement:t})):n,l=o[0],u=o[1];return l=l||0,u=(u||0)*r,[un,Dn].indexOf(i)>=0?{x:u,y:l}:{x:l,y:u}}function rj(t){var e=t.state,n=t.options,i=t.name,r=n.offset,o=r===void 0?[0,0]:r,l=hm.reduce(function(p,_){return p[_]=ij(_,e.rects,o),p},{}),u=l[e.placement],h=u.x,d=u.y;e.modifiersData.popperOffsets!=null&&(e.modifiersData.popperOffsets.x+=h,e.modifiersData.popperOffsets.y+=d),e.modifiersData[i]=l}const cA={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:rj};function sj(t){var e=t.state,n=t.name;e.modifiersData[n]=oA({reference:e.rects.reference,element:e.rects.popper,strategy:"absolute",placement:e.placement})}const bm={name:"popperOffsets",enabled:!0,phase:"read",fn:sj,data:{}};function oj(t){return t==="x"?"y":"x"}function aj(t){var e=t.state,n=t.options,i=t.name,r=n.mainAxis,o=r===void 0?!0:r,l=n.altAxis,u=l===void 0?!1:l,h=n.boundary,d=n.rootBoundary,p=n.altBoundary,_=n.padding,y=n.tether,b=y===void 0?!0:y,S=n.tetherOffset,N=S===void 0?0:S,k=Yo(e,{boundary:h,rootBoundary:d,padding:_,altBoundary:p}),G=Ni(e.placement),oe=zo(e.placement),H=!oe,V=gm(G),Q=oj(V),B=e.modifiersData.popperOffsets,Z=e.rects.reference,X=e.rects.popper,de=typeof N=="function"?N(Object.assign({},e.rects,{placement:e.placement})):N,pe=typeof de=="number"?{mainAxis:de,altAxis:de}:Object.assign({mainAxis:0,altAxis:0},de),Fe=e.modifiersData.offset?e.modifiersData.offset[e.placement]:null,rt={x:0,y:0};if(B){if(o){var Ye,jt=V==="y"?cn:un,Ln=V==="y"?xn:Dn,Be=V==="y"?"height":"width",ye=B[V],we=ye+k[jt],Pt=ye-k[Ln],hn=b?-X[Be]/2:0,ct=oe===Bs?Z[Be]:X[Be],St=oe===Bs?-X[Be]:-Z[Be],Hi=e.elements.arrow,_i=b&&Hi?pm(Hi):{width:0,height:0},kt=e.modifiersData["arrow#persistent"]?e.modifiersData["arrow#persistent"].padding:tA(),mt=kt[jt],Zn=kt[Ln],qt=nl(0,Z[Be],_i[Be]),Kt=H?Z[Be]/2-hn-qt-mt-pe.mainAxis:ct-qt-mt-pe.mainAxis,ts=H?-Z[Be]/2+hn+qt+Zn+pe.mainAxis:St+qt+Zn+pe.mainAxis,Pn=e.elements.arrow&&Jl(e.elements.arrow),w=Pn?V==="y"?Pn.clientTop||0:Pn.clientLeft||0:0,C=(Ye=Fe==null?void 0:Fe[V])!=null?Ye:0,R=ye+Kt-C-w,M=ye+ts-C,$=nl(b?uh(we,R):we,ye,b?Ps(Pt,M):Pt);B[V]=$,rt[V]=$-ye}if(u){var W,z=V==="x"?cn:un,q=V==="x"?xn:Dn,j=B[Q],P=Q==="y"?"height":"width",te=j+k[z],J=j-k[q],se=[cn,un].indexOf(G)!==-1,ae=(W=Fe==null?void 0:Fe[Q])!=null?W:0,Ee=se?te:j-Z[P]-X[P]-ae+pe.altAxis,Pe=se?j+Z[P]+X[P]-ae-pe.altAxis:J,Se=b&&se?FV(Ee,j,Pe):nl(b?Ee:te,j,b?Pe:J);B[Q]=Se,rt[Q]=Se-j}e.modifiersData[i]=rt}}const uA={name:"preventOverflow",enabled:!0,phase:"main",fn:aj,requiresIfExists:["offset"]};function lj(t){return{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}}function cj(t){return t===Qn(t)||!Gn(t)?vm(t):lj(t)}function uj(t){var e=t.getBoundingClientRect(),n=Ko(e.width)/t.offsetWidth||1,i=Ko(e.height)/t.offsetHeight||1;return n!==1||i!==1}function hj(t,e,n){n===void 0&&(n=!1);var i=Gn(e),r=Gn(e)&&uj(e),o=Jr(e),l=Go(t,r,n),u={scrollLeft:0,scrollTop:0},h={x:0,y:0};return(i||!i&&!n)&&(($i(e)!=="body"||Em(o))&&(u=cj(e)),Gn(e)?(h=Go(e,!0),h.x+=e.clientLeft,h.y+=e.clientTop):o&&(h.x=ym(o))),{x:l.left+u.scrollLeft-h.x,y:l.top+u.scrollTop-h.y,width:l.width,height:l.height}}function fj(t){var e=new Map,n=new Set,i=[];t.forEach(function(o){e.set(o.name,o)});function r(o){n.add(o.name);var l=[].concat(o.requires||[],o.requiresIfExists||[]);l.forEach(function(u){if(!n.has(u)){var h=e.get(u);h&&r(h)}}),i.push(o)}return t.forEach(function(o){n.has(o.name)||r(o)}),i}function dj(t){var e=fj(t);return JI.reduce(function(n,i){return n.concat(e.filter(function(r){return r.phase===i}))},[])}function pj(t){var e;return function(){return e||(e=new Promise(function(n){Promise.resolve().then(function(){e=void 0,n(t())})})),e}}function gj(t){var e=t.reduce(function(n,i){var r=n[i.name];return n[i.name]=r?Object.assign({},r,i,{options:Object.assign({},r.options,i.options),data:Object.assign({},r.data,i.data)}):i,n},{});return Object.keys(e).map(function(n){return e[n]})}var dw={placement:"bottom",modifiers:[],strategy:"absolute"};function pw(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return!e.some(function(i){return!(i&&typeof i.getBoundingClientRect=="function")})}function lf(t){t===void 0&&(t={});var e=t,n=e.defaultModifiers,i=n===void 0?[]:n,r=e.defaultOptions,o=r===void 0?dw:r;return function(u,h,d){d===void 0&&(d=o);var p={placement:"bottom",orderedModifiers:[],options:Object.assign({},dw,o),modifiersData:{},elements:{reference:u,popper:h},attributes:{},styles:{}},_=[],y=!1,b={state:p,setOptions:function(G){var oe=typeof G=="function"?G(p.options):G;N(),p.options=Object.assign({},o,p.options,oe),p.scrollParents={reference:Ws(u)?il(u):u.contextElement?il(u.contextElement):[],popper:il(h)};var H=dj(gj([].concat(i,p.options.modifiers)));return p.orderedModifiers=H.filter(function(V){return V.enabled}),S(),b.update()},forceUpdate:function(){if(!y){var G=p.elements,oe=G.reference,H=G.popper;if(pw(oe,H)){p.rects={reference:hj(oe,Jl(H),p.options.strategy==="fixed"),popper:pm(H)},p.reset=!1,p.placement=p.options.placement,p.orderedModifiers.forEach(function(pe){return p.modifiersData[pe.name]=Object.assign({},pe.data)});for(var V=0;V<p.orderedModifiers.length;V++){if(p.reset===!0){p.reset=!1,V=-1;continue}var Q=p.orderedModifiers[V],B=Q.fn,Z=Q.options,X=Z===void 0?{}:Z,de=Q.name;typeof B=="function"&&(p=B({state:p,options:X,name:de,instance:b})||p)}}}},update:pj(function(){return new Promise(function(k){b.forceUpdate(),k(p)})}),destroy:function(){N(),y=!0}};if(!pw(u,h))return b;b.setOptions(d).then(function(k){!y&&d.onFirstUpdate&&d.onFirstUpdate(k)});function S(){p.orderedModifiers.forEach(function(k){var G=k.name,oe=k.options,H=oe===void 0?{}:oe,V=k.effect;if(typeof V=="function"){var Q=V({state:p,name:G,instance:b,options:H}),B=function(){};_.push(Q||B)}})}function N(){_.forEach(function(k){return k()}),_=[]}return b}}var _j=lf(),mj=[mm,bm,_m,dm],vj=lf({defaultModifiers:mj}),yj=[mm,bm,_m,dm,cA,aA,uA,rA,lA],wm=lf({defaultModifiers:yj});const hA=Object.freeze(Object.defineProperty({__proto__:null,popperGenerator:lf,detectOverflow:Yo,createPopperBase:_j,createPopper:wm,createPopperLite:vj,top:cn,bottom:xn,right:Dn,left:un,auto:of,basePlacements:ua,start:Bs,end:qo,clippingParents:WI,viewport:um,popper:Eo,reference:HI,variationPlacements:bg,placements:hm,beforeRead:VI,read:jI,afterRead:qI,beforeMain:KI,main:GI,afterMain:zI,beforeWrite:YI,write:XI,afterWrite:QI,modifierPhases:JI,applyStyles:dm,arrow:rA,computeStyles:_m,eventListeners:mm,flip:aA,hide:lA,offset:cA,popperOffsets:bm,preventOverflow:uA},Symbol.toStringTag,{value:"Module"}));/*!
  * Bootstrap v5.2.3 (https://getbootstrap.com/)
  * Copyright 2011-2022 The Bootstrap Authors (https://github.com/twbs/bootstrap/graphs/contributors)
  * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)
  */const Ej=1e6,bj=1e3,Cg="transitionend",wj=t=>t==null?`${t}`:Object.prototype.toString.call(t).match(/\s([a-z]+)/i)[1].toLowerCase(),Tj=t=>{do t+=Math.floor(Math.random()*Ej);while(document.getElementById(t));return t},fA=t=>{let e=t.getAttribute("data-bs-target");if(!e||e==="#"){let n=t.getAttribute("href");if(!n||!n.includes("#")&&!n.startsWith("."))return null;n.includes("#")&&!n.startsWith("#")&&(n=`#${n.split("#")[1]}`),e=n&&n!=="#"?n.trim():null}return e},dA=t=>{const e=fA(t);return e&&document.querySelector(e)?e:null},sr=t=>{const e=fA(t);return e?document.querySelector(e):null},Cj=t=>{if(!t)return 0;let{transitionDuration:e,transitionDelay:n}=window.getComputedStyle(t);const i=Number.parseFloat(e),r=Number.parseFloat(n);return!i&&!r?0:(e=e.split(",")[0],n=n.split(",")[0],(Number.parseFloat(e)+Number.parseFloat(n))*bj)},pA=t=>{t.dispatchEvent(new Event(Cg))},or=t=>!t||typeof t!="object"?!1:(typeof t.jquery<"u"&&(t=t[0]),typeof t.nodeType<"u"),Gr=t=>or(t)?t.jquery?t[0]:t:typeof t=="string"&&t.length>0?document.querySelector(t):null,ha=t=>{if(!or(t)||t.getClientRects().length===0)return!1;const e=getComputedStyle(t).getPropertyValue("visibility")==="visible",n=t.closest("details:not([open])");if(!n)return e;if(n!==t){const i=t.closest("summary");if(i&&i.parentNode!==n||i===null)return!1}return e},zr=t=>!t||t.nodeType!==Node.ELEMENT_NODE||t.classList.contains("disabled")?!0:typeof t.disabled<"u"?t.disabled:t.hasAttribute("disabled")&&t.getAttribute("disabled")!=="false",gA=t=>{if(!document.documentElement.attachShadow)return null;if(typeof t.getRootNode=="function"){const e=t.getRootNode();return e instanceof ShadowRoot?e:null}return t instanceof ShadowRoot?t:t.parentNode?gA(t.parentNode):null},hh=()=>{},Zl=t=>{t.offsetHeight},_A=()=>window.jQuery&&!document.body.hasAttribute("data-bs-no-jquery")?window.jQuery:null,cp=[],Ij=t=>{document.readyState==="loading"?(cp.length||document.addEventListener("DOMContentLoaded",()=>{for(const e of cp)e()}),cp.push(t)):t()},Xn=()=>document.documentElement.dir==="rtl",Jn=t=>{Ij(()=>{const e=_A();if(e){const n=t.NAME,i=e.fn[n];e.fn[n]=t.jQueryInterface,e.fn[n].Constructor=t,e.fn[n].noConflict=()=>(e.fn[n]=i,t.jQueryInterface)}})},tr=t=>{typeof t=="function"&&t()},mA=(t,e,n=!0)=>{if(!n){tr(t);return}const i=5,r=Cj(e)+i;let o=!1;const l=({target:u})=>{u===e&&(o=!0,e.removeEventListener(Cg,l),tr(t))};e.addEventListener(Cg,l),setTimeout(()=>{o||pA(e)},r)},Tm=(t,e,n,i)=>{const r=t.length;let o=t.indexOf(e);return o===-1?!n&&i?t[r-1]:t[0]:(o+=n?1:-1,i&&(o=(o+r)%r),t[Math.max(0,Math.min(o,r-1))])},Aj=/[^.]*(?=\..*)\.|.*/,Sj=/\..*/,Oj=/::\d+$/,up={};let gw=1;const vA={mouseenter:"mouseover",mouseleave:"mouseout"},Nj=new Set(["click","dblclick","mouseup","mousedown","contextmenu","mousewheel","DOMMouseScroll","mouseover","mouseout","mousemove","selectstart","selectend","keydown","keypress","keyup","orientationchange","touchstart","touchmove","touchend","touchcancel","pointerdown","pointermove","pointerup","pointerleave","pointercancel","gesturestart","gesturechange","gestureend","focus","blur","change","reset","select","submit","focusin","focusout","load","unload","beforeunload","resize","move","DOMContentLoaded","readystatechange","error","abort","scroll"]);function yA(t,e){return e&&`${e}::${gw++}`||t.uidEvent||gw++}function EA(t){const e=yA(t);return t.uidEvent=e,up[e]=up[e]||{},up[e]}function Rj(t,e){return function n(i){return Cm(i,{delegateTarget:t}),n.oneOff&&U.off(t,i.type,e),e.apply(t,[i])}}function xj(t,e,n){return function i(r){const o=t.querySelectorAll(e);for(let{target:l}=r;l&&l!==this;l=l.parentNode)for(const u of o)if(u===l)return Cm(r,{delegateTarget:l}),i.oneOff&&U.off(t,r.type,e,n),n.apply(l,[r])}}function bA(t,e,n=null){return Object.values(t).find(i=>i.callable===e&&i.delegationSelector===n)}function wA(t,e,n){const i=typeof e=="string",r=i?n:e||n;let o=TA(t);return Nj.has(o)||(o=t),[i,r,o]}function _w(t,e,n,i,r){if(typeof e!="string"||!t)return;let[o,l,u]=wA(e,n,i);e in vA&&(l=(S=>function(N){if(!N.relatedTarget||N.relatedTarget!==N.delegateTarget&&!N.delegateTarget.contains(N.relatedTarget))return S.call(this,N)})(l));const h=EA(t),d=h[u]||(h[u]={}),p=bA(d,l,o?n:null);if(p){p.oneOff=p.oneOff&&r;return}const _=yA(l,e.replace(Aj,"")),y=o?xj(t,n,l):Rj(t,l);y.delegationSelector=o?n:null,y.callable=l,y.oneOff=r,y.uidEvent=_,d[_]=y,t.addEventListener(u,y,o)}function Ig(t,e,n,i,r){const o=bA(e[n],i,r);o&&(t.removeEventListener(n,o,Boolean(r)),delete e[n][o.uidEvent])}function Dj(t,e,n,i){const r=e[n]||{};for(const o of Object.keys(r))if(o.includes(i)){const l=r[o];Ig(t,e,n,l.callable,l.delegationSelector)}}function TA(t){return t=t.replace(Sj,""),vA[t]||t}const U={on(t,e,n,i){_w(t,e,n,i,!1)},one(t,e,n,i){_w(t,e,n,i,!0)},off(t,e,n,i){if(typeof e!="string"||!t)return;const[r,o,l]=wA(e,n,i),u=l!==e,h=EA(t),d=h[l]||{},p=e.startsWith(".");if(typeof o<"u"){if(!Object.keys(d).length)return;Ig(t,h,l,o,r?n:null);return}if(p)for(const _ of Object.keys(h))Dj(t,h,_,e.slice(1));for(const _ of Object.keys(d)){const y=_.replace(Oj,"");if(!u||e.includes(y)){const b=d[_];Ig(t,h,l,b.callable,b.delegationSelector)}}},trigger(t,e,n){if(typeof e!="string"||!t)return null;const i=_A(),r=TA(e),o=e!==r;let l=null,u=!0,h=!0,d=!1;o&&i&&(l=i.Event(e,n),i(t).trigger(l),u=!l.isPropagationStopped(),h=!l.isImmediatePropagationStopped(),d=l.isDefaultPrevented());let p=new Event(e,{bubbles:u,cancelable:!0});return p=Cm(p,n),d&&p.preventDefault(),h&&t.dispatchEvent(p),p.defaultPrevented&&l&&l.preventDefault(),p}};function Cm(t,e){for(const[n,i]of Object.entries(e||{}))try{t[n]=i}catch{Object.defineProperty(t,n,{configurable:!0,get(){return i}})}return t}const Sr=new Map,hp={set(t,e,n){Sr.has(t)||Sr.set(t,new Map);const i=Sr.get(t);if(!i.has(e)&&i.size!==0){console.error(`Bootstrap doesn't allow more than one instance per element. Bound instance: ${Array.from(i.keys())[0]}.`);return}i.set(e,n)},get(t,e){return Sr.has(t)&&Sr.get(t).get(e)||null},remove(t,e){if(!Sr.has(t))return;const n=Sr.get(t);n.delete(e),n.size===0&&Sr.delete(t)}};function mw(t){if(t==="true")return!0;if(t==="false")return!1;if(t===Number(t).toString())return Number(t);if(t===""||t==="null")return null;if(typeof t!="string")return t;try{return JSON.parse(decodeURIComponent(t))}catch{return t}}function fp(t){return t.replace(/[A-Z]/g,e=>`-${e.toLowerCase()}`)}const ar={setDataAttribute(t,e,n){t.setAttribute(`data-bs-${fp(e)}`,n)},removeDataAttribute(t,e){t.removeAttribute(`data-bs-${fp(e)}`)},getDataAttributes(t){if(!t)return{};const e={},n=Object.keys(t.dataset).filter(i=>i.startsWith("bs")&&!i.startsWith("bsConfig"));for(const i of n){let r=i.replace(/^bs/,"");r=r.charAt(0).toLowerCase()+r.slice(1,r.length),e[r]=mw(t.dataset[i])}return e},getDataAttribute(t,e){return mw(t.getAttribute(`data-bs-${fp(e)}`))}};class ec{static get Default(){return{}}static get DefaultType(){return{}}static get NAME(){throw new Error('You have to implement the static method "NAME", for each component!')}_getConfig(e){return e=this._mergeConfigObj(e),e=this._configAfterMerge(e),this._typeCheckConfig(e),e}_configAfterMerge(e){return e}_mergeConfigObj(e,n){const i=or(n)?ar.getDataAttribute(n,"config"):{};return{...this.constructor.Default,...typeof i=="object"?i:{},...or(n)?ar.getDataAttributes(n):{},...typeof e=="object"?e:{}}}_typeCheckConfig(e,n=this.constructor.DefaultType){for(const i of Object.keys(n)){const r=n[i],o=e[i],l=or(o)?"element":wj(o);if(!new RegExp(r).test(l))throw new TypeError(`${this.constructor.NAME.toUpperCase()}: Option "${i}" provided type "${l}" but expected type "${r}".`)}}}const Lj="5.2.3";class pi extends ec{constructor(e,n){super(),e=Gr(e),e&&(this._element=e,this._config=this._getConfig(n),hp.set(this._element,this.constructor.DATA_KEY,this))}dispose(){hp.remove(this._element,this.constructor.DATA_KEY),U.off(this._element,this.constructor.EVENT_KEY);for(const e of Object.getOwnPropertyNames(this))this[e]=null}_queueCallback(e,n,i=!0){mA(e,n,i)}_getConfig(e){return e=this._mergeConfigObj(e,this._element),e=this._configAfterMerge(e),this._typeCheckConfig(e),e}static getInstance(e){return hp.get(Gr(e),this.DATA_KEY)}static getOrCreateInstance(e,n={}){return this.getInstance(e)||new this(e,typeof n=="object"?n:null)}static get VERSION(){return Lj}static get DATA_KEY(){return`bs.${this.NAME}`}static get EVENT_KEY(){return`.${this.DATA_KEY}`}static eventName(e){return`${e}${this.EVENT_KEY}`}}const cf=(t,e="hide")=>{const n=`click.dismiss${t.EVENT_KEY}`,i=t.NAME;U.on(document,n,`[data-bs-dismiss="${i}"]`,function(r){if(["A","AREA"].includes(this.tagName)&&r.preventDefault(),zr(this))return;const o=sr(this)||this.closest(`.${i}`);t.getOrCreateInstance(o)[e]()})},Pj="alert",kj="bs.alert",CA=`.${kj}`,Mj=`close${CA}`,$j=`closed${CA}`,Fj="fade",Uj="show";class uf extends pi{static get NAME(){return Pj}close(){if(U.trigger(this._element,Mj).defaultPrevented)return;this._element.classList.remove(Uj);const n=this._element.classList.contains(Fj);this._queueCallback(()=>this._destroyElement(),this._element,n)}_destroyElement(){this._element.remove(),U.trigger(this._element,$j),this.dispose()}static jQueryInterface(e){return this.each(function(){const n=uf.getOrCreateInstance(this);if(typeof e=="string"){if(n[e]===void 0||e.startsWith("_")||e==="constructor")throw new TypeError(`No method named "${e}"`);n[e](this)}})}}cf(uf,"close");Jn(uf);const Bj="button",Wj="bs.button",Hj=`.${Wj}`,Vj=".data-api",jj="active",vw='[data-bs-toggle="button"]',qj=`click${Hj}${Vj}`;class hf extends pi{static get NAME(){return Bj}toggle(){this._element.setAttribute("aria-pressed",this._element.classList.toggle(jj))}static jQueryInterface(e){return this.each(function(){const n=hf.getOrCreateInstance(this);e==="toggle"&&n[e]()})}}U.on(document,qj,vw,t=>{t.preventDefault();const e=t.target.closest(vw);hf.getOrCreateInstance(e).toggle()});Jn(hf);const Ce={find(t,e=document.documentElement){return[].concat(...Element.prototype.querySelectorAll.call(e,t))},findOne(t,e=document.documentElement){return Element.prototype.querySelector.call(e,t)},children(t,e){return[].concat(...t.children).filter(n=>n.matches(e))},parents(t,e){const n=[];let i=t.parentNode.closest(e);for(;i;)n.push(i),i=i.parentNode.closest(e);return n},prev(t,e){let n=t.previousElementSibling;for(;n;){if(n.matches(e))return[n];n=n.previousElementSibling}return[]},next(t,e){let n=t.nextElementSibling;for(;n;){if(n.matches(e))return[n];n=n.nextElementSibling}return[]},focusableChildren(t){const e=["a","button","input","textarea","select","details","[tabindex]",'[contenteditable="true"]'].map(n=>`${n}:not([tabindex^="-"])`).join(",");return this.find(e,t).filter(n=>!zr(n)&&ha(n))}},Kj="swipe",fa=".bs.swipe",Gj=`touchstart${fa}`,zj=`touchmove${fa}`,Yj=`touchend${fa}`,Xj=`pointerdown${fa}`,Qj=`pointerup${fa}`,Jj="touch",Zj="pen",e3="pointer-event",t3=40,n3={endCallback:null,leftCallback:null,rightCallback:null},i3={endCallback:"(function|null)",leftCallback:"(function|null)",rightCallback:"(function|null)"};class fh extends ec{constructor(e,n){super(),this._element=e,!(!e||!fh.isSupported())&&(this._config=this._getConfig(n),this._deltaX=0,this._supportPointerEvents=Boolean(window.PointerEvent),this._initEvents())}static get Default(){return n3}static get DefaultType(){return i3}static get NAME(){return Kj}dispose(){U.off(this._element,fa)}_start(e){if(!this._supportPointerEvents){this._deltaX=e.touches[0].clientX;return}this._eventIsPointerPenTouch(e)&&(this._deltaX=e.clientX)}_end(e){this._eventIsPointerPenTouch(e)&&(this._deltaX=e.clientX-this._deltaX),this._handleSwipe(),tr(this._config.endCallback)}_move(e){this._deltaX=e.touches&&e.touches.length>1?0:e.touches[0].clientX-this._deltaX}_handleSwipe(){const e=Math.abs(this._deltaX);if(e<=t3)return;const n=e/this._deltaX;this._deltaX=0,n&&tr(n>0?this._config.rightCallback:this._config.leftCallback)}_initEvents(){this._supportPointerEvents?(U.on(this._element,Xj,e=>this._start(e)),U.on(this._element,Qj,e=>this._end(e)),this._element.classList.add(e3)):(U.on(this._element,Gj,e=>this._start(e)),U.on(this._element,zj,e=>this._move(e)),U.on(this._element,Yj,e=>this._end(e)))}_eventIsPointerPenTouch(e){return this._supportPointerEvents&&(e.pointerType===Zj||e.pointerType===Jj)}static isSupported(){return"ontouchstart"in document.documentElement||navigator.maxTouchPoints>0}}const r3="carousel",s3="bs.carousel",Zr=`.${s3}`,IA=".data-api",o3="ArrowLeft",a3="ArrowRight",l3=500,Ua="next",_o="prev",bo="left",Tu="right",c3=`slide${Zr}`,dp=`slid${Zr}`,u3=`keydown${Zr}`,h3=`mouseenter${Zr}`,f3=`mouseleave${Zr}`,d3=`dragstart${Zr}`,p3=`load${Zr}${IA}`,g3=`click${Zr}${IA}`,AA="carousel",au="active",_3="slide",m3="carousel-item-end",v3="carousel-item-start",y3="carousel-item-next",E3="carousel-item-prev",SA=".active",OA=".carousel-item",b3=SA+OA,w3=".carousel-item img",T3=".carousel-indicators",C3="[data-bs-slide], [data-bs-slide-to]",I3='[data-bs-ride="carousel"]',A3={[o3]:Tu,[a3]:bo},S3={interval:5e3,keyboard:!0,pause:"hover",ride:!1,touch:!0,wrap:!0},O3={interval:"(number|boolean)",keyboard:"boolean",pause:"(string|boolean)",ride:"(boolean|string)",touch:"boolean",wrap:"boolean"};class tc extends pi{constructor(e,n){super(e,n),this._interval=null,this._activeElement=null,this._isSliding=!1,this.touchTimeout=null,this._swipeHelper=null,this._indicatorsElement=Ce.findOne(T3,this._element),this._addEventListeners(),this._config.ride===AA&&this.cycle()}static get Default(){return S3}static get DefaultType(){return O3}static get NAME(){return r3}next(){this._slide(Ua)}nextWhenVisible(){!document.hidden&&ha(this._element)&&this.next()}prev(){this._slide(_o)}pause(){this._isSliding&&pA(this._element),this._clearInterval()}cycle(){this._clearInterval(),this._updateInterval(),this._interval=setInterval(()=>this.nextWhenVisible(),this._config.interval)}_maybeEnableCycle(){if(this._config.ride){if(this._isSliding){U.one(this._element,dp,()=>this.cycle());return}this.cycle()}}to(e){const n=this._getItems();if(e>n.length-1||e<0)return;if(this._isSliding){U.one(this._element,dp,()=>this.to(e));return}const i=this._getItemIndex(this._getActive());if(i===e)return;const r=e>i?Ua:_o;this._slide(r,n[e])}dispose(){this._swipeHelper&&this._swipeHelper.dispose(),super.dispose()}_configAfterMerge(e){return e.defaultInterval=e.interval,e}_addEventListeners(){this._config.keyboard&&U.on(this._element,u3,e=>this._keydown(e)),this._config.pause==="hover"&&(U.on(this._element,h3,()=>this.pause()),U.on(this._element,f3,()=>this._maybeEnableCycle())),this._config.touch&&fh.isSupported()&&this._addTouchEventListeners()}_addTouchEventListeners(){for(const i of Ce.find(w3,this._element))U.on(i,d3,r=>r.preventDefault());const n={leftCallback:()=>this._slide(this._directionToOrder(bo)),rightCallback:()=>this._slide(this._directionToOrder(Tu)),endCallback:()=>{this._config.pause==="hover"&&(this.pause(),this.touchTimeout&&clearTimeout(this.touchTimeout),this.touchTimeout=setTimeout(()=>this._maybeEnableCycle(),l3+this._config.interval))}};this._swipeHelper=new fh(this._element,n)}_keydown(e){if(/input|textarea/i.test(e.target.tagName))return;const n=A3[e.key];n&&(e.preventDefault(),this._slide(this._directionToOrder(n)))}_getItemIndex(e){return this._getItems().indexOf(e)}_setActiveIndicatorElement(e){if(!this._indicatorsElement)return;const n=Ce.findOne(SA,this._indicatorsElement);n.classList.remove(au),n.removeAttribute("aria-current");const i=Ce.findOne(`[data-bs-slide-to="${e}"]`,this._indicatorsElement);i&&(i.classList.add(au),i.setAttribute("aria-current","true"))}_updateInterval(){const e=this._activeElement||this._getActive();if(!e)return;const n=Number.parseInt(e.getAttribute("data-bs-interval"),10);this._config.interval=n||this._config.defaultInterval}_slide(e,n=null){if(this._isSliding)return;const i=this._getActive(),r=e===Ua,o=n||Tm(this._getItems(),i,r,this._config.wrap);if(o===i)return;const l=this._getItemIndex(o),u=b=>U.trigger(this._element,b,{relatedTarget:o,direction:this._orderToDirection(e),from:this._getItemIndex(i),to:l});if(u(c3).defaultPrevented||!i||!o)return;const d=Boolean(this._interval);this.pause(),this._isSliding=!0,this._setActiveIndicatorElement(l),this._activeElement=o;const p=r?v3:m3,_=r?y3:E3;o.classList.add(_),Zl(o),i.classList.add(p),o.classList.add(p);const y=()=>{o.classList.remove(p,_),o.classList.add(au),i.classList.remove(au,_,p),this._isSliding=!1,u(dp)};this._queueCallback(y,i,this._isAnimated()),d&&this.cycle()}_isAnimated(){return this._element.classList.contains(_3)}_getActive(){return Ce.findOne(b3,this._element)}_getItems(){return Ce.find(OA,this._element)}_clearInterval(){this._interval&&(clearInterval(this._interval),this._interval=null)}_directionToOrder(e){return Xn()?e===bo?_o:Ua:e===bo?Ua:_o}_orderToDirection(e){return Xn()?e===_o?bo:Tu:e===_o?Tu:bo}static jQueryInterface(e){return this.each(function(){const n=tc.getOrCreateInstance(this,e);if(typeof e=="number"){n.to(e);return}if(typeof e=="string"){if(n[e]===void 0||e.startsWith("_")||e==="constructor")throw new TypeError(`No method named "${e}"`);n[e]()}})}}U.on(document,g3,C3,function(t){const e=sr(this);if(!e||!e.classList.contains(AA))return;t.preventDefault();const n=tc.getOrCreateInstance(e),i=this.getAttribute("data-bs-slide-to");if(i){n.to(i),n._maybeEnableCycle();return}if(ar.getDataAttribute(this,"slide")==="next"){n.next(),n._maybeEnableCycle();return}n.prev(),n._maybeEnableCycle()});U.on(window,p3,()=>{const t=Ce.find(I3);for(const e of t)tc.getOrCreateInstance(e)});Jn(tc);const N3="collapse",R3="bs.collapse",nc=`.${R3}`,x3=".data-api",D3=`show${nc}`,L3=`shown${nc}`,P3=`hide${nc}`,k3=`hidden${nc}`,M3=`click${nc}${x3}`,pp="show",Io="collapse",lu="collapsing",$3="collapsed",F3=`:scope .${Io} .${Io}`,U3="collapse-horizontal",B3="width",W3="height",H3=".collapse.show, .collapse.collapsing",Ag='[data-bs-toggle="collapse"]',V3={parent:null,toggle:!0},j3={parent:"(null|element)",toggle:"boolean"};class Nl extends pi{constructor(e,n){super(e,n),this._isTransitioning=!1,this._triggerArray=[];const i=Ce.find(Ag);for(const r of i){const o=dA(r),l=Ce.find(o).filter(u=>u===this._element);o!==null&&l.length&&this._triggerArray.push(r)}this._initializeChildren(),this._config.parent||this._addAriaAndCollapsedClass(this._triggerArray,this._isShown()),this._config.toggle&&this.toggle()}static get Default(){return V3}static get DefaultType(){return j3}static get NAME(){return N3}toggle(){this._isShown()?this.hide():this.show()}show(){if(this._isTransitioning||this._isShown())return;let e=[];if(this._config.parent&&(e=this._getFirstLevelChildren(H3).filter(u=>u!==this._element).map(u=>Nl.getOrCreateInstance(u,{toggle:!1}))),e.length&&e[0]._isTransitioning||U.trigger(this._element,D3).defaultPrevented)return;for(const u of e)u.hide();const i=this._getDimension();this._element.classList.remove(Io),this._element.classList.add(lu),this._element.style[i]=0,this._addAriaAndCollapsedClass(this._triggerArray,!0),this._isTransitioning=!0;const r=()=>{this._isTransitioning=!1,this._element.classList.remove(lu),this._element.classList.add(Io,pp),this._element.style[i]="",U.trigger(this._element,L3)},l=`scroll${i[0].toUpperCase()+i.slice(1)}`;this._queueCallback(r,this._element,!0),this._element.style[i]=`${this._element[l]}px`}hide(){if(this._isTransitioning||!this._isShown()||U.trigger(this._element,P3).defaultPrevented)return;const n=this._getDimension();this._element.style[n]=`${this._element.getBoundingClientRect()[n]}px`,Zl(this._element),this._element.classList.add(lu),this._element.classList.remove(Io,pp);for(const r of this._triggerArray){const o=sr(r);o&&!this._isShown(o)&&this._addAriaAndCollapsedClass([r],!1)}this._isTransitioning=!0;const i=()=>{this._isTransitioning=!1,this._element.classList.remove(lu),this._element.classList.add(Io),U.trigger(this._element,k3)};this._element.style[n]="",this._queueCallback(i,this._element,!0)}_isShown(e=this._element){return e.classList.contains(pp)}_configAfterMerge(e){return e.toggle=Boolean(e.toggle),e.parent=Gr(e.parent),e}_getDimension(){return this._element.classList.contains(U3)?B3:W3}_initializeChildren(){if(!this._config.parent)return;const e=this._getFirstLevelChildren(Ag);for(const n of e){const i=sr(n);i&&this._addAriaAndCollapsedClass([n],this._isShown(i))}}_getFirstLevelChildren(e){const n=Ce.find(F3,this._config.parent);return Ce.find(e,this._config.parent).filter(i=>!n.includes(i))}_addAriaAndCollapsedClass(e,n){if(e.length)for(const i of e)i.classList.toggle($3,!n),i.setAttribute("aria-expanded",n)}static jQueryInterface(e){const n={};return typeof e=="string"&&/show|hide/.test(e)&&(n.toggle=!1),this.each(function(){const i=Nl.getOrCreateInstance(this,n);if(typeof e=="string"){if(typeof i[e]>"u")throw new TypeError(`No method named "${e}"`);i[e]()}})}}U.on(document,M3,Ag,function(t){(t.target.tagName==="A"||t.delegateTarget&&t.delegateTarget.tagName==="A")&&t.preventDefault();const e=dA(this),n=Ce.find(e);for(const i of n)Nl.getOrCreateInstance(i,{toggle:!1}).toggle()});Jn(Nl);const yw="dropdown",q3="bs.dropdown",Ks=`.${q3}`,Im=".data-api",K3="Escape",Ew="Tab",G3="ArrowUp",bw="ArrowDown",z3=2,Y3=`hide${Ks}`,X3=`hidden${Ks}`,Q3=`show${Ks}`,J3=`shown${Ks}`,NA=`click${Ks}${Im}`,RA=`keydown${Ks}${Im}`,Z3=`keyup${Ks}${Im}`,wo="show",eq="dropup",tq="dropend",nq="dropstart",iq="dropup-center",rq="dropdown-center",Is='[data-bs-toggle="dropdown"]:not(.disabled):not(:disabled)',sq=`${Is}.${wo}`,Cu=".dropdown-menu",oq=".navbar",aq=".navbar-nav",lq=".dropdown-menu .dropdown-item:not(.disabled):not(:disabled)",cq=Xn()?"top-end":"top-start",uq=Xn()?"top-start":"top-end",hq=Xn()?"bottom-end":"bottom-start",fq=Xn()?"bottom-start":"bottom-end",dq=Xn()?"left-start":"right-start",pq=Xn()?"right-start":"left-start",gq="top",_q="bottom",mq={autoClose:!0,boundary:"clippingParents",display:"dynamic",offset:[0,2],popperConfig:null,reference:"toggle"},vq={autoClose:"(boolean|string)",boundary:"(string|element)",display:"string",offset:"(array|string|function)",popperConfig:"(null|object|function)",reference:"(string|element|object)"};class Ri extends pi{constructor(e,n){super(e,n),this._popper=null,this._parent=this._element.parentNode,this._menu=Ce.next(this._element,Cu)[0]||Ce.prev(this._element,Cu)[0]||Ce.findOne(Cu,this._parent),this._inNavbar=this._detectNavbar()}static get Default(){return mq}static get DefaultType(){return vq}static get NAME(){return yw}toggle(){return this._isShown()?this.hide():this.show()}show(){if(zr(this._element)||this._isShown())return;const e={relatedTarget:this._element};if(!U.trigger(this._element,Q3,e).defaultPrevented){if(this._createPopper(),"ontouchstart"in document.documentElement&&!this._parent.closest(aq))for(const i of[].concat(...document.body.children))U.on(i,"mouseover",hh);this._element.focus(),this._element.setAttribute("aria-expanded",!0),this._menu.classList.add(wo),this._element.classList.add(wo),U.trigger(this._element,J3,e)}}hide(){if(zr(this._element)||!this._isShown())return;const e={relatedTarget:this._element};this._completeHide(e)}dispose(){this._popper&&this._popper.destroy(),super.dispose()}update(){this._inNavbar=this._detectNavbar(),this._popper&&this._popper.update()}_completeHide(e){if(!U.trigger(this._element,Y3,e).defaultPrevented){if("ontouchstart"in document.documentElement)for(const i of[].concat(...document.body.children))U.off(i,"mouseover",hh);this._popper&&this._popper.destroy(),this._menu.classList.remove(wo),this._element.classList.remove(wo),this._element.setAttribute("aria-expanded","false"),ar.removeDataAttribute(this._menu,"popper"),U.trigger(this._element,X3,e)}}_getConfig(e){if(e=super._getConfig(e),typeof e.reference=="object"&&!or(e.reference)&&typeof e.reference.getBoundingClientRect!="function")throw new TypeError(`${yw.toUpperCase()}: Option "reference" provided type "object" without a required "getBoundingClientRect" method.`);return e}_createPopper(){if(typeof hA>"u")throw new TypeError("Bootstrap's dropdowns require Popper (https://popper.js.org)");let e=this._element;this._config.reference==="parent"?e=this._parent:or(this._config.reference)?e=Gr(this._config.reference):typeof this._config.reference=="object"&&(e=this._config.reference);const n=this._getPopperConfig();this._popper=wm(e,this._menu,n)}_isShown(){return this._menu.classList.contains(wo)}_getPlacement(){const e=this._parent;if(e.classList.contains(tq))return dq;if(e.classList.contains(nq))return pq;if(e.classList.contains(iq))return gq;if(e.classList.contains(rq))return _q;const n=getComputedStyle(this._menu).getPropertyValue("--bs-position").trim()==="end";return e.classList.contains(eq)?n?uq:cq:n?fq:hq}_detectNavbar(){return this._element.closest(oq)!==null}_getOffset(){const{offset:e}=this._config;return typeof e=="string"?e.split(",").map(n=>Number.parseInt(n,10)):typeof e=="function"?n=>e(n,this._element):e}_getPopperConfig(){const e={placement:this._getPlacement(),modifiers:[{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"offset",options:{offset:this._getOffset()}}]};return(this._inNavbar||this._config.display==="static")&&(ar.setDataAttribute(this._menu,"popper","static"),e.modifiers=[{name:"applyStyles",enabled:!1}]),{...e,...typeof this._config.popperConfig=="function"?this._config.popperConfig(e):this._config.popperConfig}}_selectMenuItem({key:e,target:n}){const i=Ce.find(lq,this._menu).filter(r=>ha(r));i.length&&Tm(i,n,e===bw,!i.includes(n)).focus()}static jQueryInterface(e){return this.each(function(){const n=Ri.getOrCreateInstance(this,e);if(typeof e=="string"){if(typeof n[e]>"u")throw new TypeError(`No method named "${e}"`);n[e]()}})}static clearMenus(e){if(e.button===z3||e.type==="keyup"&&e.key!==Ew)return;const n=Ce.find(sq);for(const i of n){const r=Ri.getInstance(i);if(!r||r._config.autoClose===!1)continue;const o=e.composedPath(),l=o.includes(r._menu);if(o.includes(r._element)||r._config.autoClose==="inside"&&!l||r._config.autoClose==="outside"&&l||r._menu.contains(e.target)&&(e.type==="keyup"&&e.key===Ew||/input|select|option|textarea|form/i.test(e.target.tagName)))continue;const u={relatedTarget:r._element};e.type==="click"&&(u.clickEvent=e),r._completeHide(u)}}static dataApiKeydownHandler(e){const n=/input|textarea/i.test(e.target.tagName),i=e.key===K3,r=[G3,bw].includes(e.key);if(!r&&!i||n&&!i)return;e.preventDefault();const o=this.matches(Is)?this:Ce.prev(this,Is)[0]||Ce.next(this,Is)[0]||Ce.findOne(Is,e.delegateTarget.parentNode),l=Ri.getOrCreateInstance(o);if(r){e.stopPropagation(),l.show(),l._selectMenuItem(e);return}l._isShown()&&(e.stopPropagation(),l.hide(),o.focus())}}U.on(document,RA,Is,Ri.dataApiKeydownHandler);U.on(document,RA,Cu,Ri.dataApiKeydownHandler);U.on(document,NA,Ri.clearMenus);U.on(document,Z3,Ri.clearMenus);U.on(document,NA,Is,function(t){t.preventDefault(),Ri.getOrCreateInstance(this).toggle()});Jn(Ri);const ww=".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",Tw=".sticky-top",cu="padding-right",Cw="margin-right";class Sg{constructor(){this._element=document.body}getWidth(){const e=document.documentElement.clientWidth;return Math.abs(window.innerWidth-e)}hide(){const e=this.getWidth();this._disableOverFlow(),this._setElementAttributes(this._element,cu,n=>n+e),this._setElementAttributes(ww,cu,n=>n+e),this._setElementAttributes(Tw,Cw,n=>n-e)}reset(){this._resetElementAttributes(this._element,"overflow"),this._resetElementAttributes(this._element,cu),this._resetElementAttributes(ww,cu),this._resetElementAttributes(Tw,Cw)}isOverflowing(){return this.getWidth()>0}_disableOverFlow(){this._saveInitialAttribute(this._element,"overflow"),this._element.style.overflow="hidden"}_setElementAttributes(e,n,i){const r=this.getWidth(),o=l=>{if(l!==this._element&&window.innerWidth>l.clientWidth+r)return;this._saveInitialAttribute(l,n);const u=window.getComputedStyle(l).getPropertyValue(n);l.style.setProperty(n,`${i(Number.parseFloat(u))}px`)};this._applyManipulationCallback(e,o)}_saveInitialAttribute(e,n){const i=e.style.getPropertyValue(n);i&&ar.setDataAttribute(e,n,i)}_resetElementAttributes(e,n){const i=r=>{const o=ar.getDataAttribute(r,n);if(o===null){r.style.removeProperty(n);return}ar.removeDataAttribute(r,n),r.style.setProperty(n,o)};this._applyManipulationCallback(e,i)}_applyManipulationCallback(e,n){if(or(e)){n(e);return}for(const i of Ce.find(e,this._element))n(i)}}const xA="backdrop",yq="fade",Iw="show",Aw=`mousedown.bs.${xA}`,Eq={className:"modal-backdrop",clickCallback:null,isAnimated:!1,isVisible:!0,rootElement:"body"},bq={className:"string",clickCallback:"(function|null)",isAnimated:"boolean",isVisible:"boolean",rootElement:"(element|string)"};class DA extends ec{constructor(e){super(),this._config=this._getConfig(e),this._isAppended=!1,this._element=null}static get Default(){return Eq}static get DefaultType(){return bq}static get NAME(){return xA}show(e){if(!this._config.isVisible){tr(e);return}this._append();const n=this._getElement();this._config.isAnimated&&Zl(n),n.classList.add(Iw),this._emulateAnimation(()=>{tr(e)})}hide(e){if(!this._config.isVisible){tr(e);return}this._getElement().classList.remove(Iw),this._emulateAnimation(()=>{this.dispose(),tr(e)})}dispose(){this._isAppended&&(U.off(this._element,Aw),this._element.remove(),this._isAppended=!1)}_getElement(){if(!this._element){const e=document.createElement("div");e.className=this._config.className,this._config.isAnimated&&e.classList.add(yq),this._element=e}return this._element}_configAfterMerge(e){return e.rootElement=Gr(e.rootElement),e}_append(){if(this._isAppended)return;const e=this._getElement();this._config.rootElement.append(e),U.on(e,Aw,()=>{tr(this._config.clickCallback)}),this._isAppended=!0}_emulateAnimation(e){mA(e,this._getElement(),this._config.isAnimated)}}const wq="focustrap",Tq="bs.focustrap",dh=`.${Tq}`,Cq=`focusin${dh}`,Iq=`keydown.tab${dh}`,Aq="Tab",Sq="forward",Sw="backward",Oq={autofocus:!0,trapElement:null},Nq={autofocus:"boolean",trapElement:"element"};class LA extends ec{constructor(e){super(),this._config=this._getConfig(e),this._isActive=!1,this._lastTabNavDirection=null}static get Default(){return Oq}static get DefaultType(){return Nq}static get NAME(){return wq}activate(){this._isActive||(this._config.autofocus&&this._config.trapElement.focus(),U.off(document,dh),U.on(document,Cq,e=>this._handleFocusin(e)),U.on(document,Iq,e=>this._handleKeydown(e)),this._isActive=!0)}deactivate(){this._isActive&&(this._isActive=!1,U.off(document,dh))}_handleFocusin(e){const{trapElement:n}=this._config;if(e.target===document||e.target===n||n.contains(e.target))return;const i=Ce.focusableChildren(n);i.length===0?n.focus():this._lastTabNavDirection===Sw?i[i.length-1].focus():i[0].focus()}_handleKeydown(e){e.key===Aq&&(this._lastTabNavDirection=e.shiftKey?Sw:Sq)}}const Rq="modal",xq="bs.modal",gi=`.${xq}`,Dq=".data-api",Lq="Escape",Pq=`hide${gi}`,kq=`hidePrevented${gi}`,PA=`hidden${gi}`,kA=`show${gi}`,Mq=`shown${gi}`,$q=`resize${gi}`,Fq=`click.dismiss${gi}`,Uq=`mousedown.dismiss${gi}`,Bq=`keydown.dismiss${gi}`,Wq=`click${gi}${Dq}`,Ow="modal-open",Hq="fade",Nw="show",gp="modal-static",Vq=".modal.show",jq=".modal-dialog",qq=".modal-body",Kq='[data-bs-toggle="modal"]',Gq={backdrop:!0,focus:!0,keyboard:!0},zq={backdrop:"(boolean|string)",focus:"boolean",keyboard:"boolean"};class Hs extends pi{constructor(e,n){super(e,n),this._dialog=Ce.findOne(jq,this._element),this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._isShown=!1,this._isTransitioning=!1,this._scrollBar=new Sg,this._addEventListeners()}static get Default(){return Gq}static get DefaultType(){return zq}static get NAME(){return Rq}toggle(e){return this._isShown?this.hide():this.show(e)}show(e){this._isShown||this._isTransitioning||U.trigger(this._element,kA,{relatedTarget:e}).defaultPrevented||(this._isShown=!0,this._isTransitioning=!0,this._scrollBar.hide(),document.body.classList.add(Ow),this._adjustDialog(),this._backdrop.show(()=>this._showElement(e)))}hide(){!this._isShown||this._isTransitioning||U.trigger(this._element,Pq).defaultPrevented||(this._isShown=!1,this._isTransitioning=!0,this._focustrap.deactivate(),this._element.classList.remove(Nw),this._queueCallback(()=>this._hideModal(),this._element,this._isAnimated()))}dispose(){for(const e of[window,this._dialog])U.off(e,gi);this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}handleUpdate(){this._adjustDialog()}_initializeBackDrop(){return new DA({isVisible:Boolean(this._config.backdrop),isAnimated:this._isAnimated()})}_initializeFocusTrap(){return new LA({trapElement:this._element})}_showElement(e){document.body.contains(this._element)||document.body.append(this._element),this._element.style.display="block",this._element.removeAttribute("aria-hidden"),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.scrollTop=0;const n=Ce.findOne(qq,this._dialog);n&&(n.scrollTop=0),Zl(this._element),this._element.classList.add(Nw);const i=()=>{this._config.focus&&this._focustrap.activate(),this._isTransitioning=!1,U.trigger(this._element,Mq,{relatedTarget:e})};this._queueCallback(i,this._dialog,this._isAnimated())}_addEventListeners(){U.on(this._element,Bq,e=>{if(e.key===Lq){if(this._config.keyboard){e.preventDefault(),this.hide();return}this._triggerBackdropTransition()}}),U.on(window,$q,()=>{this._isShown&&!this._isTransitioning&&this._adjustDialog()}),U.on(this._element,Uq,e=>{U.one(this._element,Fq,n=>{if(!(this._element!==e.target||this._element!==n.target)){if(this._config.backdrop==="static"){this._triggerBackdropTransition();return}this._config.backdrop&&this.hide()}})})}_hideModal(){this._element.style.display="none",this._element.setAttribute("aria-hidden",!0),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._isTransitioning=!1,this._backdrop.hide(()=>{document.body.classList.remove(Ow),this._resetAdjustments(),this._scrollBar.reset(),U.trigger(this._element,PA)})}_isAnimated(){return this._element.classList.contains(Hq)}_triggerBackdropTransition(){if(U.trigger(this._element,kq).defaultPrevented)return;const n=this._element.scrollHeight>document.documentElement.clientHeight,i=this._element.style.overflowY;i==="hidden"||this._element.classList.contains(gp)||(n||(this._element.style.overflowY="hidden"),this._element.classList.add(gp),this._queueCallback(()=>{this._element.classList.remove(gp),this._queueCallback(()=>{this._element.style.overflowY=i},this._dialog)},this._dialog),this._element.focus())}_adjustDialog(){const e=this._element.scrollHeight>document.documentElement.clientHeight,n=this._scrollBar.getWidth(),i=n>0;if(i&&!e){const r=Xn()?"paddingLeft":"paddingRight";this._element.style[r]=`${n}px`}if(!i&&e){const r=Xn()?"paddingRight":"paddingLeft";this._element.style[r]=`${n}px`}}_resetAdjustments(){this._element.style.paddingLeft="",this._element.style.paddingRight=""}static jQueryInterface(e,n){return this.each(function(){const i=Hs.getOrCreateInstance(this,e);if(typeof e=="string"){if(typeof i[e]>"u")throw new TypeError(`No method named "${e}"`);i[e](n)}})}}U.on(document,Wq,Kq,function(t){const e=sr(this);["A","AREA"].includes(this.tagName)&&t.preventDefault(),U.one(e,kA,r=>{r.defaultPrevented||U.one(e,PA,()=>{ha(this)&&this.focus()})});const n=Ce.findOne(Vq);n&&Hs.getInstance(n).hide(),Hs.getOrCreateInstance(e).toggle(this)});cf(Hs);Jn(Hs);const Yq="offcanvas",Xq="bs.offcanvas",gr=`.${Xq}`,MA=".data-api",Qq=`load${gr}${MA}`,Jq="Escape",Rw="show",xw="showing",Dw="hiding",Zq="offcanvas-backdrop",$A=".offcanvas.show",eK=`show${gr}`,tK=`shown${gr}`,nK=`hide${gr}`,Lw=`hidePrevented${gr}`,FA=`hidden${gr}`,iK=`resize${gr}`,rK=`click${gr}${MA}`,sK=`keydown.dismiss${gr}`,oK='[data-bs-toggle="offcanvas"]',aK={backdrop:!0,keyboard:!0,scroll:!1},lK={backdrop:"(boolean|string)",keyboard:"boolean",scroll:"boolean"};class fr extends pi{constructor(e,n){super(e,n),this._isShown=!1,this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._addEventListeners()}static get Default(){return aK}static get DefaultType(){return lK}static get NAME(){return Yq}toggle(e){return this._isShown?this.hide():this.show(e)}show(e){if(this._isShown||U.trigger(this._element,eK,{relatedTarget:e}).defaultPrevented)return;this._isShown=!0,this._backdrop.show(),this._config.scroll||new Sg().hide(),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.classList.add(xw);const i=()=>{(!this._config.scroll||this._config.backdrop)&&this._focustrap.activate(),this._element.classList.add(Rw),this._element.classList.remove(xw),U.trigger(this._element,tK,{relatedTarget:e})};this._queueCallback(i,this._element,!0)}hide(){if(!this._isShown||U.trigger(this._element,nK).defaultPrevented)return;this._focustrap.deactivate(),this._element.blur(),this._isShown=!1,this._element.classList.add(Dw),this._backdrop.hide();const n=()=>{this._element.classList.remove(Rw,Dw),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._config.scroll||new Sg().reset(),U.trigger(this._element,FA)};this._queueCallback(n,this._element,!0)}dispose(){this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}_initializeBackDrop(){const e=()=>{if(this._config.backdrop==="static"){U.trigger(this._element,Lw);return}this.hide()},n=Boolean(this._config.backdrop);return new DA({className:Zq,isVisible:n,isAnimated:!0,rootElement:this._element.parentNode,clickCallback:n?e:null})}_initializeFocusTrap(){return new LA({trapElement:this._element})}_addEventListeners(){U.on(this._element,sK,e=>{if(e.key===Jq){if(!this._config.keyboard){U.trigger(this._element,Lw);return}this.hide()}})}static jQueryInterface(e){return this.each(function(){const n=fr.getOrCreateInstance(this,e);if(typeof e=="string"){if(n[e]===void 0||e.startsWith("_")||e==="constructor")throw new TypeError(`No method named "${e}"`);n[e](this)}})}}U.on(document,rK,oK,function(t){const e=sr(this);if(["A","AREA"].includes(this.tagName)&&t.preventDefault(),zr(this))return;U.one(e,FA,()=>{ha(this)&&this.focus()});const n=Ce.findOne($A);n&&n!==e&&fr.getInstance(n).hide(),fr.getOrCreateInstance(e).toggle(this)});U.on(window,Qq,()=>{for(const t of Ce.find($A))fr.getOrCreateInstance(t).show()});U.on(window,iK,()=>{for(const t of Ce.find("[aria-modal][class*=show][class*=offcanvas-]"))getComputedStyle(t).position!=="fixed"&&fr.getOrCreateInstance(t).hide()});cf(fr);Jn(fr);const cK=new Set(["background","cite","href","itemtype","longdesc","poster","src","xlink:href"]),uK=/^aria-[\w-]*$/i,hK=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^#&/:?]*(?:[#/?]|$))/i,fK=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[\d+/a-z]+=*$/i,dK=(t,e)=>{const n=t.nodeName.toLowerCase();return e.includes(n)?cK.has(n)?Boolean(hK.test(t.nodeValue)||fK.test(t.nodeValue)):!0:e.filter(i=>i instanceof RegExp).some(i=>i.test(n))},UA={"*":["class","dir","id","lang","role",uK],a:["target","href","title","rel"],area:[],b:[],br:[],col:[],code:[],div:[],em:[],hr:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],i:[],img:["src","srcset","alt","title","width","height"],li:[],ol:[],p:[],pre:[],s:[],small:[],span:[],sub:[],sup:[],strong:[],u:[],ul:[]};function pK(t,e,n){if(!t.length)return t;if(n&&typeof n=="function")return n(t);const r=new window.DOMParser().parseFromString(t,"text/html"),o=[].concat(...r.body.querySelectorAll("*"));for(const l of o){const u=l.nodeName.toLowerCase();if(!Object.keys(e).includes(u)){l.remove();continue}const h=[].concat(...l.attributes),d=[].concat(e["*"]||[],e[u]||[]);for(const p of h)dK(p,d)||l.removeAttribute(p.nodeName)}return r.body.innerHTML}const gK="TemplateFactory",_K={allowList:UA,content:{},extraClass:"",html:!1,sanitize:!0,sanitizeFn:null,template:"<div></div>"},mK={allowList:"object",content:"object",extraClass:"(string|function)",html:"boolean",sanitize:"boolean",sanitizeFn:"(null|function)",template:"string"},vK={entry:"(string|element|function|null)",selector:"(string|element)"};class yK extends ec{constructor(e){super(),this._config=this._getConfig(e)}static get Default(){return _K}static get DefaultType(){return mK}static get NAME(){return gK}getContent(){return Object.values(this._config.content).map(e=>this._resolvePossibleFunction(e)).filter(Boolean)}hasContent(){return this.getContent().length>0}changeContent(e){return this._checkContent(e),this._config.content={...this._config.content,...e},this}toHtml(){const e=document.createElement("div");e.innerHTML=this._maybeSanitize(this._config.template);for(const[r,o]of Object.entries(this._config.content))this._setContent(e,o,r);const n=e.children[0],i=this._resolvePossibleFunction(this._config.extraClass);return i&&n.classList.add(...i.split(" ")),n}_typeCheckConfig(e){super._typeCheckConfig(e),this._checkContent(e.content)}_checkContent(e){for(const[n,i]of Object.entries(e))super._typeCheckConfig({selector:n,entry:i},vK)}_setContent(e,n,i){const r=Ce.findOne(i,e);if(r){if(n=this._resolvePossibleFunction(n),!n){r.remove();return}if(or(n)){this._putElementInTemplate(Gr(n),r);return}if(this._config.html){r.innerHTML=this._maybeSanitize(n);return}r.textContent=n}}_maybeSanitize(e){return this._config.sanitize?pK(e,this._config.allowList,this._config.sanitizeFn):e}_resolvePossibleFunction(e){return typeof e=="function"?e(this):e}_putElementInTemplate(e,n){if(this._config.html){n.innerHTML="",n.append(e);return}n.textContent=e.textContent}}const EK="tooltip",bK=new Set(["sanitize","allowList","sanitizeFn"]),_p="fade",wK="modal",uu="show",TK=".tooltip-inner",Pw=`.${wK}`,kw="hide.bs.modal",Ba="hover",mp="focus",CK="click",IK="manual",AK="hide",SK="hidden",OK="show",NK="shown",RK="inserted",xK="click",DK="focusin",LK="focusout",PK="mouseenter",kK="mouseleave",MK={AUTO:"auto",TOP:"top",RIGHT:Xn()?"left":"right",BOTTOM:"bottom",LEFT:Xn()?"right":"left"},$K={allowList:UA,animation:!0,boundary:"clippingParents",container:!1,customClass:"",delay:0,fallbackPlacements:["top","right","bottom","left"],html:!1,offset:[0,0],placement:"top",popperConfig:null,sanitize:!0,sanitizeFn:null,selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',title:"",trigger:"hover focus"},FK={allowList:"object",animation:"boolean",boundary:"(string|element)",container:"(string|element|boolean)",customClass:"(string|function)",delay:"(number|object)",fallbackPlacements:"array",html:"boolean",offset:"(array|string|function)",placement:"(string|function)",popperConfig:"(null|object|function)",sanitize:"boolean",sanitizeFn:"(null|function)",selector:"(string|boolean)",template:"string",title:"(string|element|function)",trigger:"string"};class da extends pi{constructor(e,n){if(typeof hA>"u")throw new TypeError("Bootstrap's tooltips require Popper (https://popper.js.org)");super(e,n),this._isEnabled=!0,this._timeout=0,this._isHovered=null,this._activeTrigger={},this._popper=null,this._templateFactory=null,this._newContent=null,this.tip=null,this._setListeners(),this._config.selector||this._fixTitle()}static get Default(){return $K}static get DefaultType(){return FK}static get NAME(){return EK}enable(){this._isEnabled=!0}disable(){this._isEnabled=!1}toggleEnabled(){this._isEnabled=!this._isEnabled}toggle(){if(this._isEnabled){if(this._activeTrigger.click=!this._activeTrigger.click,this._isShown()){this._leave();return}this._enter()}}dispose(){clearTimeout(this._timeout),U.off(this._element.closest(Pw),kw,this._hideModalHandler),this._element.getAttribute("data-bs-original-title")&&this._element.setAttribute("title",this._element.getAttribute("data-bs-original-title")),this._disposePopper(),super.dispose()}show(){if(this._element.style.display==="none")throw new Error("Please use show on visible elements");if(!(this._isWithContent()&&this._isEnabled))return;const e=U.trigger(this._element,this.constructor.eventName(OK)),i=(gA(this._element)||this._element.ownerDocument.documentElement).contains(this._element);if(e.defaultPrevented||!i)return;this._disposePopper();const r=this._getTipElement();this._element.setAttribute("aria-describedby",r.getAttribute("id"));const{container:o}=this._config;if(this._element.ownerDocument.documentElement.contains(this.tip)||(o.append(r),U.trigger(this._element,this.constructor.eventName(RK))),this._popper=this._createPopper(r),r.classList.add(uu),"ontouchstart"in document.documentElement)for(const u of[].concat(...document.body.children))U.on(u,"mouseover",hh);const l=()=>{U.trigger(this._element,this.constructor.eventName(NK)),this._isHovered===!1&&this._leave(),this._isHovered=!1};this._queueCallback(l,this.tip,this._isAnimated())}hide(){if(!this._isShown()||U.trigger(this._element,this.constructor.eventName(AK)).defaultPrevented)return;if(this._getTipElement().classList.remove(uu),"ontouchstart"in document.documentElement)for(const r of[].concat(...document.body.children))U.off(r,"mouseover",hh);this._activeTrigger[CK]=!1,this._activeTrigger[mp]=!1,this._activeTrigger[Ba]=!1,this._isHovered=null;const i=()=>{this._isWithActiveTrigger()||(this._isHovered||this._disposePopper(),this._element.removeAttribute("aria-describedby"),U.trigger(this._element,this.constructor.eventName(SK)))};this._queueCallback(i,this.tip,this._isAnimated())}update(){this._popper&&this._popper.update()}_isWithContent(){return Boolean(this._getTitle())}_getTipElement(){return this.tip||(this.tip=this._createTipElement(this._newContent||this._getContentForTemplate())),this.tip}_createTipElement(e){const n=this._getTemplateFactory(e).toHtml();if(!n)return null;n.classList.remove(_p,uu),n.classList.add(`bs-${this.constructor.NAME}-auto`);const i=Tj(this.constructor.NAME).toString();return n.setAttribute("id",i),this._isAnimated()&&n.classList.add(_p),n}setContent(e){this._newContent=e,this._isShown()&&(this._disposePopper(),this.show())}_getTemplateFactory(e){return this._templateFactory?this._templateFactory.changeContent(e):this._templateFactory=new yK({...this._config,content:e,extraClass:this._resolvePossibleFunction(this._config.customClass)}),this._templateFactory}_getContentForTemplate(){return{[TK]:this._getTitle()}}_getTitle(){return this._resolvePossibleFunction(this._config.title)||this._element.getAttribute("data-bs-original-title")}_initializeOnDelegatedTarget(e){return this.constructor.getOrCreateInstance(e.delegateTarget,this._getDelegateConfig())}_isAnimated(){return this._config.animation||this.tip&&this.tip.classList.contains(_p)}_isShown(){return this.tip&&this.tip.classList.contains(uu)}_createPopper(e){const n=typeof this._config.placement=="function"?this._config.placement.call(this,e,this._element):this._config.placement,i=MK[n.toUpperCase()];return wm(this._element,e,this._getPopperConfig(i))}_getOffset(){const{offset:e}=this._config;return typeof e=="string"?e.split(",").map(n=>Number.parseInt(n,10)):typeof e=="function"?n=>e(n,this._element):e}_resolvePossibleFunction(e){return typeof e=="function"?e.call(this._element):e}_getPopperConfig(e){const n={placement:e,modifiers:[{name:"flip",options:{fallbackPlacements:this._config.fallbackPlacements}},{name:"offset",options:{offset:this._getOffset()}},{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"arrow",options:{element:`.${this.constructor.NAME}-arrow`}},{name:"preSetPlacement",enabled:!0,phase:"beforeMain",fn:i=>{this._getTipElement().setAttribute("data-popper-placement",i.state.placement)}}]};return{...n,...typeof this._config.popperConfig=="function"?this._config.popperConfig(n):this._config.popperConfig}}_setListeners(){const e=this._config.trigger.split(" ");for(const n of e)if(n==="click")U.on(this._element,this.constructor.eventName(xK),this._config.selector,i=>{this._initializeOnDelegatedTarget(i).toggle()});else if(n!==IK){const i=n===Ba?this.constructor.eventName(PK):this.constructor.eventName(DK),r=n===Ba?this.constructor.eventName(kK):this.constructor.eventName(LK);U.on(this._element,i,this._config.selector,o=>{const l=this._initializeOnDelegatedTarget(o);l._activeTrigger[o.type==="focusin"?mp:Ba]=!0,l._enter()}),U.on(this._element,r,this._config.selector,o=>{const l=this._initializeOnDelegatedTarget(o);l._activeTrigger[o.type==="focusout"?mp:Ba]=l._element.contains(o.relatedTarget),l._leave()})}this._hideModalHandler=()=>{this._element&&this.hide()},U.on(this._element.closest(Pw),kw,this._hideModalHandler)}_fixTitle(){const e=this._element.getAttribute("title");e&&(!this._element.getAttribute("aria-label")&&!this._element.textContent.trim()&&this._element.setAttribute("aria-label",e),this._element.setAttribute("data-bs-original-title",e),this._element.removeAttribute("title"))}_enter(){if(this._isShown()||this._isHovered){this._isHovered=!0;return}this._isHovered=!0,this._setTimeout(()=>{this._isHovered&&this.show()},this._config.delay.show)}_leave(){this._isWithActiveTrigger()||(this._isHovered=!1,this._setTimeout(()=>{this._isHovered||this.hide()},this._config.delay.hide))}_setTimeout(e,n){clearTimeout(this._timeout),this._timeout=setTimeout(e,n)}_isWithActiveTrigger(){return Object.values(this._activeTrigger).includes(!0)}_getConfig(e){const n=ar.getDataAttributes(this._element);for(const i of Object.keys(n))bK.has(i)&&delete n[i];return e={...n,...typeof e=="object"&&e?e:{}},e=this._mergeConfigObj(e),e=this._configAfterMerge(e),this._typeCheckConfig(e),e}_configAfterMerge(e){return e.container=e.container===!1?document.body:Gr(e.container),typeof e.delay=="number"&&(e.delay={show:e.delay,hide:e.delay}),typeof e.title=="number"&&(e.title=e.title.toString()),typeof e.content=="number"&&(e.content=e.content.toString()),e}_getDelegateConfig(){const e={};for(const n in this._config)this.constructor.Default[n]!==this._config[n]&&(e[n]=this._config[n]);return e.selector=!1,e.trigger="manual",e}_disposePopper(){this._popper&&(this._popper.destroy(),this._popper=null),this.tip&&(this.tip.remove(),this.tip=null)}static jQueryInterface(e){return this.each(function(){const n=da.getOrCreateInstance(this,e);if(typeof e=="string"){if(typeof n[e]>"u")throw new TypeError(`No method named "${e}"`);n[e]()}})}}Jn(da);const UK="popover",BK=".popover-header",WK=".popover-body",HK={...da.Default,content:"",offset:[0,8],placement:"right",template:'<div class="popover" role="tooltip"><div class="popover-arrow"></div><h3 class="popover-header"></h3><div class="popover-body"></div></div>',trigger:"click"},VK={...da.DefaultType,content:"(null|string|element|function)"};class Am extends da{static get Default(){return HK}static get DefaultType(){return VK}static get NAME(){return UK}_isWithContent(){return this._getTitle()||this._getContent()}_getContentForTemplate(){return{[BK]:this._getTitle(),[WK]:this._getContent()}}_getContent(){return this._resolvePossibleFunction(this._config.content)}static jQueryInterface(e){return this.each(function(){const n=Am.getOrCreateInstance(this,e);if(typeof e=="string"){if(typeof n[e]>"u")throw new TypeError(`No method named "${e}"`);n[e]()}})}}Jn(Am);const jK="scrollspy",qK="bs.scrollspy",Sm=`.${qK}`,KK=".data-api",GK=`activate${Sm}`,Mw=`click${Sm}`,zK=`load${Sm}${KK}`,YK="dropdown-item",mo="active",XK='[data-bs-spy="scroll"]',vp="[href]",QK=".nav, .list-group",$w=".nav-link",JK=".nav-item",ZK=".list-group-item",eG=`${$w}, ${JK} > ${$w}, ${ZK}`,tG=".dropdown",nG=".dropdown-toggle",iG={offset:null,rootMargin:"0px 0px -25%",smoothScroll:!1,target:null,threshold:[.1,.5,1]},rG={offset:"(number|null)",rootMargin:"string",smoothScroll:"boolean",target:"element",threshold:"array"};class ff extends pi{constructor(e,n){super(e,n),this._targetLinks=new Map,this._observableSections=new Map,this._rootElement=getComputedStyle(this._element).overflowY==="visible"?null:this._element,this._activeTarget=null,this._observer=null,this._previousScrollData={visibleEntryTop:0,parentScrollTop:0},this.refresh()}static get Default(){return iG}static get DefaultType(){return rG}static get NAME(){return jK}refresh(){this._initializeTargetsAndObservables(),this._maybeEnableSmoothScroll(),this._observer?this._observer.disconnect():this._observer=this._getNewObserver();for(const e of this._observableSections.values())this._observer.observe(e)}dispose(){this._observer.disconnect(),super.dispose()}_configAfterMerge(e){return e.target=Gr(e.target)||document.body,e.rootMargin=e.offset?`${e.offset}px 0px -30%`:e.rootMargin,typeof e.threshold=="string"&&(e.threshold=e.threshold.split(",").map(n=>Number.parseFloat(n))),e}_maybeEnableSmoothScroll(){this._config.smoothScroll&&(U.off(this._config.target,Mw),U.on(this._config.target,Mw,vp,e=>{const n=this._observableSections.get(e.target.hash);if(n){e.preventDefault();const i=this._rootElement||window,r=n.offsetTop-this._element.offsetTop;if(i.scrollTo){i.scrollTo({top:r,behavior:"smooth"});return}i.scrollTop=r}}))}_getNewObserver(){const e={root:this._rootElement,threshold:this._config.threshold,rootMargin:this._config.rootMargin};return new IntersectionObserver(n=>this._observerCallback(n),e)}_observerCallback(e){const n=l=>this._targetLinks.get(`#${l.target.id}`),i=l=>{this._previousScrollData.visibleEntryTop=l.target.offsetTop,this._process(n(l))},r=(this._rootElement||document.documentElement).scrollTop,o=r>=this._previousScrollData.parentScrollTop;this._previousScrollData.parentScrollTop=r;for(const l of e){if(!l.isIntersecting){this._activeTarget=null,this._clearActiveClass(n(l));continue}const u=l.target.offsetTop>=this._previousScrollData.visibleEntryTop;if(o&&u){if(i(l),!r)return;continue}!o&&!u&&i(l)}}_initializeTargetsAndObservables(){this._targetLinks=new Map,this._observableSections=new Map;const e=Ce.find(vp,this._config.target);for(const n of e){if(!n.hash||zr(n))continue;const i=Ce.findOne(n.hash,this._element);ha(i)&&(this._targetLinks.set(n.hash,n),this._observableSections.set(n.hash,i))}}_process(e){this._activeTarget!==e&&(this._clearActiveClass(this._config.target),this._activeTarget=e,e.classList.add(mo),this._activateParents(e),U.trigger(this._element,GK,{relatedTarget:e}))}_activateParents(e){if(e.classList.contains(YK)){Ce.findOne(nG,e.closest(tG)).classList.add(mo);return}for(const n of Ce.parents(e,QK))for(const i of Ce.prev(n,eG))i.classList.add(mo)}_clearActiveClass(e){e.classList.remove(mo);const n=Ce.find(`${vp}.${mo}`,e);for(const i of n)i.classList.remove(mo)}static jQueryInterface(e){return this.each(function(){const n=ff.getOrCreateInstance(this,e);if(typeof e=="string"){if(n[e]===void 0||e.startsWith("_")||e==="constructor")throw new TypeError(`No method named "${e}"`);n[e]()}})}}U.on(window,zK,()=>{for(const t of Ce.find(XK))ff.getOrCreateInstance(t)});Jn(ff);const sG="tab",oG="bs.tab",Gs=`.${oG}`,aG=`hide${Gs}`,lG=`hidden${Gs}`,cG=`show${Gs}`,uG=`shown${Gs}`,hG=`click${Gs}`,fG=`keydown${Gs}`,dG=`load${Gs}`,pG="ArrowLeft",Fw="ArrowRight",gG="ArrowUp",Uw="ArrowDown",As="active",Bw="fade",yp="show",_G="dropdown",mG=".dropdown-toggle",vG=".dropdown-menu",Ep=":not(.dropdown-toggle)",yG='.list-group, .nav, [role="tablist"]',EG=".nav-item, .list-group-item",bG=`.nav-link${Ep}, .list-group-item${Ep}, [role="tab"]${Ep}`,BA='[data-bs-toggle="tab"], [data-bs-toggle="pill"], [data-bs-toggle="list"]',bp=`${bG}, ${BA}`,wG=`.${As}[data-bs-toggle="tab"], .${As}[data-bs-toggle="pill"], .${As}[data-bs-toggle="list"]`;class Xo extends pi{constructor(e){super(e),this._parent=this._element.closest(yG),this._parent&&(this._setInitialAttributes(this._parent,this._getChildren()),U.on(this._element,fG,n=>this._keydown(n)))}static get NAME(){return sG}show(){const e=this._element;if(this._elemIsActive(e))return;const n=this._getActiveElem(),i=n?U.trigger(n,aG,{relatedTarget:e}):null;U.trigger(e,cG,{relatedTarget:n}).defaultPrevented||i&&i.defaultPrevented||(this._deactivate(n,e),this._activate(e,n))}_activate(e,n){if(!e)return;e.classList.add(As),this._activate(sr(e));const i=()=>{if(e.getAttribute("role")!=="tab"){e.classList.add(yp);return}e.removeAttribute("tabindex"),e.setAttribute("aria-selected",!0),this._toggleDropDown(e,!0),U.trigger(e,uG,{relatedTarget:n})};this._queueCallback(i,e,e.classList.contains(Bw))}_deactivate(e,n){if(!e)return;e.classList.remove(As),e.blur(),this._deactivate(sr(e));const i=()=>{if(e.getAttribute("role")!=="tab"){e.classList.remove(yp);return}e.setAttribute("aria-selected",!1),e.setAttribute("tabindex","-1"),this._toggleDropDown(e,!1),U.trigger(e,lG,{relatedTarget:n})};this._queueCallback(i,e,e.classList.contains(Bw))}_keydown(e){if(![pG,Fw,gG,Uw].includes(e.key))return;e.stopPropagation(),e.preventDefault();const n=[Fw,Uw].includes(e.key),i=Tm(this._getChildren().filter(r=>!zr(r)),e.target,n,!0);i&&(i.focus({preventScroll:!0}),Xo.getOrCreateInstance(i).show())}_getChildren(){return Ce.find(bp,this._parent)}_getActiveElem(){return this._getChildren().find(e=>this._elemIsActive(e))||null}_setInitialAttributes(e,n){this._setAttributeIfNotExists(e,"role","tablist");for(const i of n)this._setInitialAttributesOnChild(i)}_setInitialAttributesOnChild(e){e=this._getInnerElement(e);const n=this._elemIsActive(e),i=this._getOuterElement(e);e.setAttribute("aria-selected",n),i!==e&&this._setAttributeIfNotExists(i,"role","presentation"),n||e.setAttribute("tabindex","-1"),this._setAttributeIfNotExists(e,"role","tab"),this._setInitialAttributesOnTargetPanel(e)}_setInitialAttributesOnTargetPanel(e){const n=sr(e);n&&(this._setAttributeIfNotExists(n,"role","tabpanel"),e.id&&this._setAttributeIfNotExists(n,"aria-labelledby",`#${e.id}`))}_toggleDropDown(e,n){const i=this._getOuterElement(e);if(!i.classList.contains(_G))return;const r=(o,l)=>{const u=Ce.findOne(o,i);u&&u.classList.toggle(l,n)};r(mG,As),r(vG,yp),i.setAttribute("aria-expanded",n)}_setAttributeIfNotExists(e,n,i){e.hasAttribute(n)||e.setAttribute(n,i)}_elemIsActive(e){return e.classList.contains(As)}_getInnerElement(e){return e.matches(bp)?e:Ce.findOne(bp,e)}_getOuterElement(e){return e.closest(EG)||e}static jQueryInterface(e){return this.each(function(){const n=Xo.getOrCreateInstance(this);if(typeof e=="string"){if(n[e]===void 0||e.startsWith("_")||e==="constructor")throw new TypeError(`No method named "${e}"`);n[e]()}})}}U.on(document,hG,BA,function(t){["A","AREA"].includes(this.tagName)&&t.preventDefault(),!zr(this)&&Xo.getOrCreateInstance(this).show()});U.on(window,dG,()=>{for(const t of Ce.find(wG))Xo.getOrCreateInstance(t)});Jn(Xo);const TG="toast",CG="bs.toast",es=`.${CG}`,IG=`mouseover${es}`,AG=`mouseout${es}`,SG=`focusin${es}`,OG=`focusout${es}`,NG=`hide${es}`,RG=`hidden${es}`,xG=`show${es}`,DG=`shown${es}`,LG="fade",Ww="hide",hu="show",fu="showing",PG={animation:"boolean",autohide:"boolean",delay:"number"},kG={animation:!0,autohide:!0,delay:5e3};class df extends pi{constructor(e,n){super(e,n),this._timeout=null,this._hasMouseInteraction=!1,this._hasKeyboardInteraction=!1,this._setListeners()}static get Default(){return kG}static get DefaultType(){return PG}static get NAME(){return TG}show(){if(U.trigger(this._element,xG).defaultPrevented)return;this._clearTimeout(),this._config.animation&&this._element.classList.add(LG);const n=()=>{this._element.classList.remove(fu),U.trigger(this._element,DG),this._maybeScheduleHide()};this._element.classList.remove(Ww),Zl(this._element),this._element.classList.add(hu,fu),this._queueCallback(n,this._element,this._config.animation)}hide(){if(!this.isShown()||U.trigger(this._element,NG).defaultPrevented)return;const n=()=>{this._element.classList.add(Ww),this._element.classList.remove(fu,hu),U.trigger(this._element,RG)};this._element.classList.add(fu),this._queueCallback(n,this._element,this._config.animation)}dispose(){this._clearTimeout(),this.isShown()&&this._element.classList.remove(hu),super.dispose()}isShown(){return this._element.classList.contains(hu)}_maybeScheduleHide(){this._config.autohide&&(this._hasMouseInteraction||this._hasKeyboardInteraction||(this._timeout=setTimeout(()=>{this.hide()},this._config.delay)))}_onInteraction(e,n){switch(e.type){case"mouseover":case"mouseout":{this._hasMouseInteraction=n;break}case"focusin":case"focusout":{this._hasKeyboardInteraction=n;break}}if(n){this._clearTimeout();return}const i=e.relatedTarget;this._element===i||this._element.contains(i)||this._maybeScheduleHide()}_setListeners(){U.on(this._element,IG,e=>this._onInteraction(e,!0)),U.on(this._element,AG,e=>this._onInteraction(e,!1)),U.on(this._element,SG,e=>this._onInteraction(e,!0)),U.on(this._element,OG,e=>this._onInteraction(e,!1))}_clearTimeout(){clearTimeout(this._timeout),this._timeout=null}static jQueryInterface(e){return this.each(function(){const n=df.getOrCreateInstance(this,e);if(typeof e=="string"){if(typeof n[e]>"u")throw new TypeError(`No method named "${e}"`);n[e](this)}})}}cf(df);Jn(df);class MG{constructor(){}async Init(){await this.LoadUser()}async LoadUser(){let e=this.GetSessionId(),n=await(await TC(oi(la,`users/${e}`))).val(),i,r;!e||!n?vt.emit("open-settings-modal",(o,l)=>{this.CacheUser(o,l,!0)}):(i=n.username,r=n.useGPS,ne.commit("saveUseGPS",r),ne.commit("saveUsername",i),ne.commit("saveSessionId",e)),Ze.DataCheck()}GetSessionId(){let e=localStorage.getItem("sessionId");if(e&&e!="undefined")return e}CacheUser(e,n,i=!1){let r,o={};r=i?Ze.uuidv4():ne.getters.sessionId;let l=ne.getters.users[r];o=l?{...o,...l}:o,o.username=e,o.useGPS=n,Kr(Ct(Ls,r),o),localStorage.setItem("sessionId",r),ne.commit("saveUseGPS",n),ne.commit("saveUsername",e),ne.commit("saveSessionId",r)}async Disconnect(){let e=ne.getters.sessionId,n=ne.getters.currentSquad;await xs(Ct(bu,`${n}/userIds/${e}`)),await xs(Ct(Ls,`${e}/squadId`)),await xs(Ct(Ls,`${e}/teamId`))}currentTeamSquad(){let e=ne.getters.user;if(!(e.squadId==null||e.teamId==null))return{squadId:e.squadId,teamId:e.teamId}}}const rl=new MG;class $G{constructor(){xd(this,"location",{});xd(this,"lastCoord",{lat:0,long:0})}Init(){ne.commit("saveLocation",location),this.Update()}async Update(){if(console.log("tick"),ne.getters.useGPS){let e=await this.ScanLocation(!1);e&&(this.location=e,ne.commit("saveLocation",this.location),rl.currentTeamSquad()&&this.UpdateUserLocation())}this.CleanSpotMarkers(),setTimeout(()=>this.Update(),yn.tickRateMS)}async UpdateUserLocation(){Ze.CoordDistance(this.location.lat,this.location.long,this.lastCoord.lat,this.lastCoord.long)>yn.updateMeters&&ne.getters.user&&await Kr(Ct(Ls,ne.getters.sessionId+"/location"),this.location)}async GetLocation(){return new Promise((e,n)=>{navigator.geolocation.getCurrentPosition(i=>{let r={lat:i.coords.latitude,long:i.coords.longitude};return e(r)},i=>console.log(i),yn.geoLocationOptions)})}async ScanLocation(e=!1){let n={lat:0,long:0};if(e){let i=[36.16360240464562,-115.18453981692234],r=Ze.randomGeo({lat:i[0],long:i[1]},2e4);return n={lat:Number.parseFloat(r.latitude),long:Number.parseFloat(r.longitude)},n}else return await this.GetLocation()}async createSpotMarker(e,n){let i=Ze.uuidv4(),r={teamId:ne.getters.user.teamId,markerType:n,lat:e.lat,long:e.long,owner:ne.getters.sessionId,createTime:new Date().getTime()};return await Kr(Ct(ap,i),r),i}async removeSpotMarker(e){await xs(Ct(ap,e))}async CleanSpotMarkers(){let e=new Date().getTime(),n=ne.getters.spotDurationMS,i=ne.getters.markers;!ne.getters.markers||!n||Object.keys(i).forEach(async r=>{let o=i[r];e-o.createTime>n&&await xs(Ct(ap,r))})}}const Og=new $G,FG={data(){return{rooms:{},teams:{},squads:{},users:{},roomId:yn.roomId}},methods:{openModal(){vt.emit("open-settings-modal",(t,e)=>{rl.CacheUser(t,e)})},async joinSquad(t,e){let n=ne.getters.sessionId,i=ne.getters.users.isSquadLeader,r=rl.currentTeamSquad();r&&await xs(Ct(bu,`${r.squadId}/userIds/${n}`));let o=this.squads[e],l=(o==null?void 0:o.userIds)==null;if(await Kr(Ct(bu,`${e}/userIds/${n}`),{joinTime:new Date().getTime(),userId:n,isSquadLeader:l}),console.log(t,e),await Eu(Ct(Ls,n),{teamId:t,squadId:e,isSquadLeader:l}),r&&i){let u=r.squadId,h=this.sortByJoinTime(this.squads[u].userIds);if(h&&h[0]!=null){let d=h[0];console.log(d),await Eu(Ct(bu,`${u}/userIds/${d.userId}`),{joinTime:new Date().getTime(),userId:d.userId,isSquadLeader:!0}),await Eu(Ct(Ls,d.userId),{isSquadLeader:!0})}}},sortByJoinTime(t){if(!t)return[];let n=Object.keys(t).map(i=>t[i]);return Ol.orderBy(n,"joinTime")},Disconnect(){rl.Disconnect()},usernameColor(t,e,n){if(ne.getters.sessionId){if(t==ne.getters.sessionId)return"isMe";if(e==ne.getters.user.squadId)return"isSquad";if(n==ne.getters.user.teamId)return"isTeam"}},GoToUser(t){vt.emit("go-to-user",t),vt.emit("toggle-sidebar")}},async mounted(){let t=document.getElementById("offcanvasExample"),e=new fr(t);vt.on("toggle-sidebar",()=>{e.toggle()}),vt.on("data-updated",()=>{this.squads=ne.getters.squads,this.teams=ne.getters.teams,this.users=ne.getters.users,this.rooms=ne.getters.rooms})},computed:{orderedTeams:function(){return Ol.orderBy(this.teams,"index")}}};const pf=t=>(Vg("data-v-d9e3de4f"),t=t(),jg(),t),UG={class:"offcanvas offcanvas-start",tabindex:"-1",id:"offcanvasExample","aria-labelledby":"offcanvasExampleLabel"},BG={class:"offcanvas-body"},WG={class:"offcanvas-title"},HG={class:"room-name me-2"},VG={class:"game-mode"},jG={class:"team-header"},qG=["onClick"],KG=pf(()=>ge("i",{class:"bi bi-box-arrow-in-down-right float-end"},null,-1)),GG=["onClick"],zG={key:0,class:"bi bi-star-fill me-1"},YG={class:"ps-3 pt-2 pb-2"},XG=pf(()=>ge("div",{class:"offcanvas-title"},"Playing As",-1)),QG=pf(()=>ge("i",{class:"bi bi-box-arrow-right"},null,-1)),JG=[QG],ZG={key:0,class:"btn btn-sm btn-outline-primary d-inline float-end me-2 dev-only",id:"log-button",type:"button","data-bs-toggle":"offcanvas",href:"#logOffCanvas",role:"button","aria-controls":"logOffCanvas"},ez=pf(()=>ge("i",{class:"bi bi-code-square"},null,-1)),tz=[ez];function nz(t,e,n,i,r,o){var l,u;return Le(),Ge("div",UG,[ge("div",BG,[ge("div",WG,[ge("span",HG,er((l=r.rooms[r.roomId])==null?void 0:l.roomName),1),ge("span",VG,er((u=r.rooms[r.roomId])==null?void 0:u.gameMode),1)]),(Le(!0),Ge(xt,null,Ka(o.orderedTeams,h=>(Le(),Ge("div",{class:"team",key:h.id},[ge("h2",jG,er(h.teamName),1),(Le(!0),Ge(xt,null,Ka(h.squadIds,d=>(Le(),Ge("div",{class:"squad ms-4 mb-2",id:"squad-{{squad.id}}",key:d},[ge("div",{class:"squad-header",onClick:p=>o.joinSquad(h.id,d)},[kp(er(r.squads[d].squadName)+" ",1),KG],8,qG),(Le(!0),Ge(xt,null,Ka(o.sortByJoinTime(r.squads[d].userIds),p=>(Le(),Ge("div",{class:"squad-member ms-4 mt-2 mb-2",key:p.userId},[r.users!=null&&r.users[p.userId]!=null?(Le(),Ge("div",{key:0,class:Rl(o.usernameColor(p.userId,d,h.id)),onClick:_=>o.GoToUser(p.userId)},[r.users[p.userId].isSquadLeader?(Le(),Ge("i",zG)):bt("",!0),kp(" "+er(r.users[p.userId].username),1)],10,GG)):bt("",!0)]))),128))]))),128))]))),128))]),ge("footer",YG,[XG,ge("div",null,[ge("h5",{class:"d-inline align-middle",onClick:e[0]||(e[0]=(...h)=>o.openModal&&o.openModal(...h)),id:"username-display"},er(r.users&&r.users[t.$store.getters.sessionId]?r.users[t.$store.getters.sessionId].username:"unde"),1),ge("button",{class:"btn btn-sm btn-outline-primary d-inline float-end me-2",id:"disconnect-button",type:"button",onClick:e[1]||(e[1]=h=>o.Disconnect())},JG),t.$store.getters.isAdmin?(Le(),Ge("button",ZG,tz)):bt("",!0)])])])}const iz=Xl(FG,[["render",nz],["__scopeId","data-v-d9e3de4f"]]);let wp,Hw;const rz={data(){return{username:"",useGPS:!1,error:!1,onCloseCallback:void 0}},methods:{Save(t){t.stopPropagation(),this.error=!1,!this.username||this.username.length==0?this.error=!0:(Hw(this.username,this.useGPS==null?!1:this.useGPS),wp.hide())}},mounted(){this.$refs.modalRef&&(wp=new Hs(this.$refs.modalRef)),vt.on("open-settings-modal",t=>{Hw=t,this.username=ne.getters.username,this.useGPS=ne.getters.useGPS,wp.show()})}};const ic=t=>(Vg("data-v-e77368fd"),t=t(),jg(),t),sz={class:"modal fade",tabindex:"-1","aria-hidden":"true",ref:"modalRef"},oz={class:"modal-dialog"},az={class:"modal-content"},lz=ic(()=>ge("div",{class:"modal-header"},[ge("h5",{class:"modal-title",id:"exampleModalLabel"},"Settings"),ge("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1)),cz={class:"modal-body"},uz={ref:"form",class:"needs-validation"},hz={class:"mb-4"},fz=ic(()=>ge("label",{for:"validationDefaultUsername",class:"form-label"},"Username",-1)),dz={class:"input-group"},pz=ic(()=>ge("div",{class:"invalid-feedback"},"Please choose a username.",-1)),gz={class:"mb-2"},_z=ic(()=>ge("label",{for:"validationDefaultUsername",class:"form-label"},"GPS Tracking",-1)),mz={class:"form-check form-switch"},vz=ic(()=>ge("label",{class:"form-check-label",for:"flexSwitchCheckDefault"},"By turning on GPS tracking, you will be able to share your device location with your teammates.",-1)),yz={class:"modal-footer"};function Ez(t,e,n,i,r,o){return Le(),Ge("div",sz,[ge("div",oz,[ge("div",az,[lz,ge("div",cz,[ge("form",uz,[ge("div",hz,[fz,ge("div",dz,[_E(ge("input",{type:"text",class:Rl(["form-control",{"is-invalid":r.error}]),id:"validationDefaultUsername","onUpdate:modelValue":e[0]||(e[0]=l=>r.username=l),required:""},null,2),[[eM,r.username]])]),pz]),ge("div",gz,[_z,ge("div",mz,[_E(ge("input",{class:"form-check-input",type:"checkbox",id:"flexSwitchCheckDefault","onUpdate:modelValue":e[1]||(e[1]=l=>r.useGPS=l)},null,512),[[tM,r.useGPS]]),vz])])],512)]),ge("div",yz,[ek(t.$slots,"footer",{},void 0,!0),ge("button",{class:"btn btn-secondary",type:"submit",onClick:e[2]||(e[2]=(...l)=>o.Save&&o.Save(...l))}," Save ")])])])],512)}const bz=Xl(rz,[["render",Ez],["__scopeId","data-v-e77368fd"]]);const wz="modulepreload",Tz=function(t){return"/"+t},Vw={},xi=function(e,n,i){if(!n||n.length===0)return e();const r=document.getElementsByTagName("link");return Promise.all(n.map(o=>{if(o=Tz(o),o in Vw)return;Vw[o]=!0;const l=o.endsWith(".css"),u=l?'[rel="stylesheet"]':"";if(!!i)for(let p=r.length-1;p>=0;p--){const _=r[p];if(_.href===o&&(!l||_.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${o}"]${u}`))return;const d=document.createElement("link");if(d.rel=l?"stylesheet":wz,l||(d.as="script",d.crossOrigin=""),d.href=o,document.head.appendChild(d),l)return new Promise((p,_)=>{d.addEventListener("load",p),d.addEventListener("error",()=>_(new Error(`Unable to preload CSS for ${o}`)))})})).then(()=>e())},WA=(t,e)=>{let n;return function(...i){const r=this;n&&clearTimeout(n),n=setTimeout(()=>{t.apply(r,i),n=null},e)}},Cz=t=>!t||typeof t.charAt!="function"?t:t.charAt(0).toUpperCase()+t.slice(1),vo=t=>typeof t=="function",pa=(t,e,n)=>{for(const i in n){const r="set"+Cz(i);t[r]?Os(()=>n[i],(o,l)=>{t[r](o,l)}):e[r]&&Os(()=>n[i],o=>{e[r](o)})}},ga=t=>{const e={};for(const n in t)if(n.startsWith("on")&&!n.startsWith("onUpdate")&&n!=="onReady"){const i=n.slice(2).toLocaleLowerCase();e[i]=t[n]}return e},Iz=async t=>{const e=await Promise.all([xi(()=>import("./marker-icon-2x.js"),[]),xi(()=>import("./marker-icon.js"),[]),xi(()=>import("./marker-shadow.js"),[])]);delete t.Default.prototype._getIconUrl,t.Default.mergeOptions({iconRetinaUrl:e[0].default,iconUrl:e[1].default,shadowUrl:e[2].default})},du=t=>{const e=Li(()=>console.warn(`Method ${t} has been invoked without being replaced`)),n=(...i)=>e.value(...i);return n.wrapped=e,Ai(t,n),n},pu=(t,e)=>t.wrapped.value=e,Ur=typeof self=="object"&&self.self===self&&self||typeof global=="object"&&global.global===global&&global||void 0,_a="useGlobalLeaflet",gf={options:{type:Object,default:()=>({})}},_f=t=>({options:t.options,methods:{}}),mf={...gf,pane:{type:String,default:"overlayPane"},attribution:{type:String,default:null},name:{type:String,custom:!0,default:void 0},layerType:{type:String,custom:!0,default:void 0},visible:{type:Boolean,custom:!0,default:!0}},vf=(t,e,n)=>{const i=It("addLayer"),r=It("removeLayer"),{options:o,methods:l}=_f(t),u={...o,attribution:t.attribution,pane:t.pane},h=()=>i({leafletObject:e.value}),d=()=>r({leafletObject:e.value}),p={...l,setAttribution(_,y){this.$parent.leafletObject.attributionControl.removeAttribution(y).addAttribution(_)},setName(){d(),t.visible&&h()},setLayerType(){d(),t.visible&&h()},setVisible(_){e.value&&(_?h():d())},bindPopup({leafletObject:_}){if(!e.value||!vo(e.value.bindPopup)){console.warn("Attempt to bind popup before bindPopup method available on layer.");return}e.value.bindPopup(_)},bindTooltip({leafletObject:_}){if(!e.value||!vo(e.value.bindTooltip)){console.warn("Attempt to bind tooltip before bindTooltip method available on layer.");return}e.value.bindTooltip(_)},unbindTooltip(){const _=e.value&&vo(e.value.getTooltip)?e.value.getTooltip():null;_&&vo(_.unbindTooltip)&&_.unbindTooltip()},unbindPopup(){const _=e.value&&vo(e.value.getPopup)?e.value.getPopup():null;_&&vo(_.unbindPopup)&&_.unbindPopup()},updateVisibleProp(_){n.emit("update:visible",_)}};return Ai("bindPopup",p.bindPopup),Ai("bindTooltip",p.bindTooltip),Ai("unbindTooltip",p.unbindTooltip),Ai("unbindPopup",p.unbindPopup),qg(()=>{p.unbindPopup(),p.unbindTooltip(),d()}),{options:u,methods:p}},Om=(t,e)=>{if(t&&e.default)return Yg("div",{style:{display:"none"}},e.default())},Az={...gf,interactive:{type:Boolean,default:!0},bubblingMouseEvents:{type:Boolean,default:!0}},Sz=t=>{const{options:e,methods:n}=_f(t);return{options:{...e,interactive:t.interactive,bubblingMouseEvents:t.bubblingMouseEvents},methods:n}},Oz={...mf,...Az,stroke:{type:Boolean,custom:!0,default:!0},color:{type:String,custom:!0,default:"#3388ff"},weight:{type:Number,custom:!0,default:3},opacity:{type:Number,custom:!0,default:1},lineCap:{type:String,custom:!0,default:"round"},lineJoin:{type:String,custom:!0,default:"round"},dashArray:{type:String,custom:!0,default:null},dashOffset:{type:String,custom:!0,default:null},fill:{type:Boolean,custom:!0,default:!1},fillColor:{type:String,custom:!0,default:"#3388ff"},fillOpacity:{type:Number,custom:!0,default:.2},fillRule:{type:String,custom:!0,default:"evenodd"},className:{type:String,custom:!0,default:null}},Nz=(t,e,n)=>{const{options:i,methods:r}=vf(t,e,n),{options:o,methods:l}=Sz(t),u=It("removeLayer"),h={...i,...o,stroke:t.stroke,color:t.color,weight:t.weight,opacity:t.opacity,lineCap:t.lineCap,lineJoin:t.lineJoin,dashArray:t.dashArray,dashOffset:t.dashOffset,fill:t.fill,fillColor:t.fillColor,fillOpacity:t.fillOpacity,fillRule:t.fillRule,className:t.className},d={...r,...l,setStroke(p){e.value.setStyle({stroke:p})},setColor(p){e.value.setStyle({color:p})},setWeight(p){e.value.setStyle({weight:p})},setOpacity(p){e.value.setStyle({opacity:p})},setLineCap(p){e.value.setStyle({lineCap:p})},setLineJoin(p){e.value.setStyle({lineJoin:p})},setDashArray(p){e.value.setStyle({dashArray:p})},setDashOffset(p){e.value.setStyle({dashOffset:p})},setFill(p){e.value.setStyle({fill:p})},setFillColor(p){e.value.setStyle({fillColor:p})},setFillOpacity(p){e.value.setStyle({fillOpacity:p})},setFillRule(p){e.value.setStyle({fillRule:p})},setClassName(p){e.value.setStyle({className:p})}};return Ih(()=>{u({leafletObject:e.value})}),{options:h,methods:d}},Rz={...mf,pane:{type:String,default:"tilePane"},opacity:{type:Number,custom:!1,default:1},zIndex:{type:Number,default:1},tileSize:{type:Number,default:256},noWrap:{type:Boolean,default:!1},minZoom:{type:Number,default:0},maxZoom:{type:Number,default:void 0}},xz=(t,e,n)=>{const{options:i,methods:r}=vf(t,e,n);return{options:{...i,pane:t.pane,opacity:t.opacity,zIndex:t.zIndex,tileSize:t.tileSize,noWrap:t.noWrap,minZoom:t.minZoom,maxZoom:t.maxZoom},methods:{...r}}},Dz={iconUrl:{type:String,custom:!0,default:null},iconRetinaUrl:{type:String,custom:!0,default:null},iconSize:{type:[Object,Array],custom:!0,default:null},iconAnchor:{type:[Object,Array],custom:!0,default:null},popupAnchor:{type:[Object,Array],custom:!0,default:()=>[0,0]},tooltipAnchor:{type:[Object,Array],custom:!0,default:()=>[0,0]},shadowUrl:{type:String,custom:!0,default:null},shadowRetinaUrl:{type:String,custom:!0,default:null},shadowSize:{type:[Object,Array],custom:!0,default:null},shadowAnchor:{type:[Object,Array],custom:!0,default:null},bgPos:{type:[Object,Array],custom:!0,default:()=>[0,0]},className:{type:String,custom:!0,default:""},options:{type:Object,custom:!0,default:()=>({})}};var HA={name:"LIcon",props:{...Dz,...gf},setup(t,e){const n=Li(null),i=It(_a),r=It("canSetParentHtml"),o=It("setParentHtml"),l=It("setIcon");let u,h,d,p,_;const y=(k,G,oe)=>{const H=k&&k.innerHTML;if(!G){oe&&_&&r()&&o(H);return}const V=ga(e.attrs);_&&h(_,V);const{options:Q}=_f(t),B={...Q,iconUrl:t.iconUrl,iconRetinaUrl:t.iconRetinaUrl,iconSize:t.iconSize,iconAnchor:t.iconAnchor,popupAnchor:t.popupAnchor,tooltipAnchor:t.tooltipAnchor,shadowUrl:t.shadowUrl,shadowRetinaUrl:t.shadowRetinaUrl,shadowSize:t.shadowSize,shadowAnchor:t.shadowAnchor,bgPos:t.bgPos,className:t.className,html:H||t.html};_=B.html?d(B):p(B),u(_,V),l(_)},b=()=>{Wr(()=>y(n.value,!0,!1))},S=()=>{Wr(()=>y(n.value,!1,!0))},N={setIconUrl:b,setIconRetinaUrl:b,setIconSize:b,setIconAnchor:b,setPopupAnchor:b,setTooltipAnchor:b,setShadowUrl:b,setShadowRetinaUrl:b,setShadowAnchor:b,setBgPos:b,setClassName:b,setHtml:b};return Yr(async()=>{const{DomEvent:k,divIcon:G,icon:oe}=i?Ur.L:await xi(()=>import("./leaflet-src.esm.js"),[]);u=k.on,h=k.off,d=G,p=oe,pa(N,{},t),new MutationObserver(S).observe(n.value,{attributes:!0,childList:!0,characterData:!0,subtree:!0}),b()}),{root:n}},render(){const t=this.$slots.default?this.$slots.default():void 0;return Yg("div",{ref:"root"},t)}};HA.__file="src/components/LIcon.vue";const Lz={...mf,url:{type:String,required:!0},bounds:{type:[Array,Object],required:!0},opacity:{type:Number,custom:!0,default:1},alt:{type:String,default:""},interactive:{type:Boolean,default:!1},crossOrigin:{type:Boolean,default:!1},errorOverlayUrl:{type:String,custom:!0,default:""},zIndex:{type:Number,custom:!0,default:1},className:{type:String,default:""}},Pz=(t,e,n)=>{const{options:i,methods:r}=vf(t,e,n),o={...i,...t},l={...r,setOpacity(u){return e.value.setOpacity(u)},setUrl(u){return e.value.setUrl(u)},setBounds(u){return e.value.setBounds(u)},getBounds(){return e.value.getBounds()},getElement(){return e.value.getElement()},bringToFront(){return e.value.bringToFront()},bringToBack(){return e.value.bringToBack()},setZIndex(u){return e.value.setZIndex(u)}};return{options:o,methods:l}};var VA={name:"LImageOverlay",props:Lz,setup(t,e){const n=Li({}),i=Li(!1),r=It(_a),o=It("addLayer"),{options:l,methods:u}=Pz(t,n,e);return Yr(async()=>{const{imageOverlay:h,DomEvent:d}=r?Ur.L:await xi(()=>import("./leaflet-src.esm.js"),[]);n.value=h(t.url,t.bounds,l);const p=ga(e.attrs);d.on(n.value,p),pa(u,n.value,t),o({...t,...u,leafletObject:n.value}),i.value=!0,Wr(()=>e.emit("ready",n.value))}),{ready:i,leafletObject:n}},render(){return Om(this.ready,this.$slots)}};VA.__file="src/components/LImageOverlay.vue";var jA={emits:["ready","update:zoom","update:center","update:bounds"],props:{...gf,center:{type:[Object,Array],default:()=>[0,0]},bounds:{type:[Array,Object],default:void 0},maxBounds:{type:[Array,Object],default:void 0},zoom:{type:Number,default:0},minZoom:{type:Number,default:void 0},maxZoom:{type:Number,default:void 0},paddingBottomRight:{type:Array,default:void 0},paddingTopLeft:{type:Array,default:void 0},padding:{type:Array,default:void 0},worldCopyJump:{type:Boolean,default:!1},crs:{type:[String,Object],default:"EPSG3857"},maxBoundsViscosity:{type:Number,default:void 0},inertia:{type:Boolean,default:void 0},inertiaDeceleration:{type:Number,default:void 0},inertiaMaxSpeed:{type:Number,default:void 0},easeLinearity:{type:Number,default:void 0},zoomAnimation:{type:Boolean,default:void 0},zoomAnimationThreshold:{type:Number,default:void 0},fadeAnimation:{type:Boolean,default:void 0},markerZoomAnimation:{type:Boolean,default:void 0},noBlockingAnimations:{type:Boolean,default:!1},useGlobalLeaflet:{type:Boolean,default:!0}},setup(t,e){const n=Li(null),i=Dl({ready:!1,leafletRef:{},layersToAdd:[],layersInControl:[]}),{options:r}=_f(t),o={...r,minZoom:t.minZoom,maxZoom:t.maxZoom,maxBounds:t.maxBounds,maxBoundsViscosity:t.maxBoundsViscosity,worldCopyJump:t.worldCopyJump,crs:t.crs,center:t.center,zoom:t.zoom,inertia:t.inertia,inertiaDeceleration:t.inertiaDeceleration,inertiaMaxSpeed:t.inertiaMaxSpeed,easeLinearity:t.easeLinearity,zoomAnimation:t.zoomAnimation,zoomAnimationThreshold:t.zoomAnimationThreshold,fadeAnimation:t.fadeAnimation,markerZoomAnimation:t.markerZoomAnimation},l=du("addLayer"),u=du("removeLayer"),h=du("registerControl"),d=du("registerLayerControl");Ai(_a,t.useGlobalLeaflet);const p={moveEndHandler(){e.emit("update:zoom",i.leafletRef.getZoom()),e.emit("update:center",i.leafletRef.getCenter()),e.emit("update:bounds",i.leafletRef.getBounds())},overlayAddHandler(b){const S=i.layersInControl.find(N=>N.name===b.name);S&&S.updateVisibleProp(!0)},overlayRemoveHandler(b){const S=i.layersInControl.find(N=>N.name===b.name);S&&S.updateVisibleProp(!1)}};Yr(async()=>{t.useGlobalLeaflet&&(Ur.L=Ur.L||await xi(()=>import("./leaflet-src.js").then(B=>B.l),[]));const{map:b,CRS:S,Icon:N,latLngBounds:k,latLng:G,DomEvent:oe}=t.useGlobalLeaflet?Ur.L:await xi(()=>import("./leaflet-src.esm.js"),[]);try{o.beforeMapMount&&await o.beforeMapMount()}catch(B){console.error(`The following error occurred running the provided beforeMapMount hook ${B.message}`)}await Iz(N);const H=typeof o.crs=="string"?S[o.crs]:o.crs;o.crs=H||S.EPSG3857;const V={addLayer(B){B.layerType!==void 0&&(i.layerControl===void 0?i.layersToAdd.push(B):i.layersInControl.find(X=>X.leafletObject._leaflet_id===B.leafletObject._leaflet_id)||(i.layerControl.addLayer(B),i.layersInControl.push(B))),B.visible!==!1&&i.leafletRef.addLayer(B.leafletObject)},removeLayer(B){B.layerType!==void 0&&(i.layerControl===void 0?i.layersToAdd=i.layersToAdd.filter(Z=>Z.name!==B.name):(i.layerControl.removeLayer(B.leafletObject),i.layersInControl=i.layersInControl.filter(Z=>Z.leafletObject._leaflet_id!==B.leafletObject._leaflet_id))),i.leafletRef.removeLayer(B.leafletObject)},registerLayerControl(B){i.layerControl=B,i.layersToAdd.forEach(Z=>{i.layerControl.addLayer(Z)}),i.layersToAdd=[],h(B)},registerControl(B){i.leafletRef.addControl(B.leafletObject)},setZoom(B){const Z=i.leafletRef.getZoom();B!==Z&&i.leafletRef.setZoom(B,{animate:t.noBlockingAnimations?!1:null})},setPaddingBottomRight(B){i.paddingBottomRight=B},setPaddingTopLeft(B){i.paddingTopLeft=B},setPadding(B){i.padding=B},setCrs(B){const Z=i.leafletRef.getBounds();i.leafletRef.options.crs=B,i.leafletRef.fitBounds(Z,{animate:!1,padding:[0,0]})},fitBounds(B){i.leafletRef.fitBounds(B,{animate:this.noBlockingAnimations?!1:null})},setBounds(B){if(!B)return;const Z=k(B);if(!Z.isValid())return;!(i.lastSetBounds||i.leafletRef.getBounds()).equals(Z,0)&&(i.lastSetBounds=Z,i.leafletRef.fitBounds(Z,this.fitBoundsOptions))},setCenter(B){if(B==null)return;const Z=G(B),X=i.lastSetCenter||i.leafletRef.getCenter();(X.lat!==Z.lat||X.lng!==Z.lng)&&(i.lastSetCenter=Z,i.leafletRef.panTo(Z,{animate:this.noBlockingAnimations?!1:null}))}};pu(l,V.addLayer),pu(u,V.removeLayer),pu(h,V.registerControl),pu(d,V.registerLayerControl),i.leafletRef=b(n.value,o),pa(V,i.leafletRef,t);const Q=ga(e.attrs);i.leafletRef.on("moveend",WA(p.moveEndHandler,100)),i.leafletRef.on("overlayadd",p.overlayAddHandler),i.leafletRef.on("overlayremove",p.overlayRemoveHandler),oe.on(i.leafletRef,Q),i.ready=!0,Wr(()=>e.emit("ready",i.leafletRef))}),Ih(()=>{i.leafletRef&&i.leafletRef.remove()});const _=Mp(()=>i.leafletRef),y=Mp(()=>i.ready);return{root:n,ready:y,leafletObject:_}},render(){return Yg("div",{style:{width:"100%",height:"100%"},ref:"root"},this.ready?this.$slots.default():{})}};jA.__file="src/components/LMap.vue";const kz={...mf,pane:{type:String,default:"markerPane"},draggable:{type:Boolean,custom:!0,default:!1},latLng:{type:[Object,Array],custom:!0,default:null},icon:{type:[Object],default:()=>{},custom:!1},zIndexOffset:{type:Number,custom:!1,default:null}},Mz=(t,e,n)=>{const{options:i,methods:r}=vf(t,e,n),o={...i,...t},l={...r,setDraggable(u){e.value.dragging&&(u?e.value.dragging.enable():e.value.dragging.disable())},latLngSync(u){n.emit("update:latLng",u.latlng),n.emit("update:lat-lng",u.latlng)},setLatLng(u){if(u!=null&&e.value){const h=e.value.getLatLng();(!h||!h.equals(u))&&e.value.setLatLng(u)}}};return{options:o,methods:l}};var qA={name:"LMarker",props:kz,setup(t,e){const n=Li({}),i=Li(!1),r=It(_a),o=It("addLayer");Ai("canSetParentHtml",()=>!!n.value.getElement()),Ai("setParentHtml",h=>n.value.getElement().innerHTML=h),Ai("setIcon",h=>n.value.setIcon&&n.value.setIcon(h));const{options:l,methods:u}=Mz(t,n,e);return l.icon===void 0&&delete l.icon,Yr(async()=>{const{marker:h,DomEvent:d}=r?Ur.L:await xi(()=>import("./leaflet-src.esm.js"),[]);n.value=h(t.latLng,l);const p=ga(e.attrs);d.on(n.value,p),n.value.on("move",WA(u.latLngSync,100)),pa(u,n.value,t),o({...t,...u,leafletObject:n.value}),i.value=!0,Wr(()=>e.emit("ready",n.value))}),{ready:i,leafletObject:n}},render(){return Om(this.ready,this.$slots)}};qA.__file="src/components/LMarker.vue";const KA={...Oz,latLngs:{type:Array,default:()=>[]},smoothFactor:{type:Number,custom:!0,default:1},noClip:{type:Boolean,custom:!0,default:!1}},$z=(t,e,n)=>{const{options:i,methods:r}=Nz(t,e,n),o={...i,...t},l={...r,setSmoothFactor(u){e.value.setStyle({smoothFactor:u})},setNoClip(u){e.value.setStyle({noClip:u})},addLatLng(u){e.value.addLatLng(u)}};return{options:o,methods:l}};({...KA});var GA={name:"LPolyline",props:KA,setup(t,e){const n=Li({}),i=Li(!1),r=It(_a),o=It("addLayer"),{options:l,methods:u}=$z(t,n,e);return Yr(async()=>{const{polyline:h,DomEvent:d}=r?Ur.L:await xi(()=>import("./leaflet-src.esm.js"),[]);n.value=h(t.latLngs,l);const p=ga(e.attrs);d.on(n.value,p),pa(u,n.value,t),o({...t,...u,leafletObject:n.value}),i.value=!0,Wr(()=>e.emit("ready",n.value))}),{ready:i,leafletObject:n}},render(){return Om(this.ready,this.$slots)}};GA.__file="src/components/LPolyline.vue";const zA={...Rz,tms:{type:Boolean,default:!1},subdomains:{type:String,default:"abc"},detectRetina:{type:Boolean,default:!1},url:{type:String,default:null}},Fz=(t,e,n)=>{const{options:i,methods:r}=xz(t,e,n);return{options:{...i,tms:t.tms,subdomains:t.subdomains,detectRetina:t.detectRetina},methods:{...r}}};var YA={props:zA,setup(t,e){const n=Li({}),i=It(_a),r=It("addLayer"),{options:o,methods:l}=Fz(t,n,e);return Yr(async()=>{const{tileLayer:u,DomEvent:h}=i?Ur.L:await xi(()=>import("./leaflet-src.esm.js"),[]);n.value=u(t.url,o);const d=ga(e.attrs);h.on(n.value,d),pa(l,n.value,t),r({...t,...l,leafletObject:n.value}),Wr(()=>e.emit("ready",n.value))}),{leafletObject:n}},render(){return null}};YA.__file="src/components/LTileLayer.vue";({...zA});const Uz={components:{LMap:jA,LTileLayer:YA,LMarker:qA,LIcon:HA,LPolyline:GA,LImageOverlay:VA},data(){return{map:null,mapCenter:[0,0],playerMarkers:[],watchCenter:!1,distanceToCenter:"",boundStart:{lat:0,lng:0},boundEnd:{lat:0,lng:0},bounds:[[0,0],[0,0]],calibrateMap:!1}},methods:{onCenterUpdate(){let t=ne.getters.user.location;if(t&&this.map){let e=this.map.getCenter();this.distanceToCenter=Ze.formatDistance(Ze.CoordDistance(e.lat,e.lng,t.lat,t.long)*3.28084)+"ft"}setTimeout(()=>this.onCenterUpdate(),5)},async addSpotMarker(t){if(t.latlng&&ne.getters.currentSquad){let e={lat:t.latlng.lat,long:t.latlng.lng};console.log(e);let n=await Og.createSpotMarker(e,"spottedEnemy");setTimeout(async()=>{await Og.removeSpotMarker(n)},ne.getters.spotDurationMS)}},startMove(t){this.boundStart=t.target.getLatLng(),console.log(this.boundStart)},endMove(t){this.boundEnd=t.target.getLatLng(),console.log(this.boundEnd)}},async mounted(){vt.on("data-ready",()=>{console.log("data-ready");let t=ne.getters.rooms[yn.roomId].map,e=t.location;this.mapCenter=[e.lat,e.long],this.bounds=[[t.bounds[0][0],t.bounds[0][1]],[t.bounds[1][0],t.bounds[1][1]]],console.log(this.bounds),this.playerMarkers=ne.getters.getTeamMarkers,this.map=this.$refs.map.leafletObject,this.watchCenter=!0,this.onCenterUpdate()}),vt.on("set-location",()=>{let t=this.map.getCenter();console.log(t);let e={lat:t.lat,long:t.lng};Kr(Ct(Ls,`${ne.getters.sessionId}/location`),e)}),vt.on("go-to-user",t=>{let e=ne.getters.users,n=t;if(!e||!ne.getters.users[n]||!ne.getters.users[n].location)return;let i=ne.getters.users[n].location;this.map&&this.map.flyTo([i.lat,i.long],18)}),vt.on("calibrate-map",t=>{this.calibrateMap=t;let e=ne.getters.rooms[yn.roomId].map.bounds;this.boundStart={lat:e[0][0],lng:e[0][1]},this.boundEnd={lat:e[1][0],lng:e[1][1]}}),vt.on("save-map",async()=>{await Kr(Ct(V2,`${yn.roomId}/map/bounds`),{0:[this.boundStart.lat,this.boundStart.lng],1:[this.boundEnd.lat,this.boundEnd.lng]}),this.calibrateMap=!1,vt.emit("map-saved")})},computed:{}},Bz="/assets/me.svg",Wz="/assets/me-squad-leader.svg",Hz="/assets/squad-leader.svg",Vz="/assets/squadmate-squad-leader.svg",jz="/assets/squad-member.svg",XA="/assets/team-member.svg",qz="/assets/enemy.svg";const Kz={class:"distance"},Gz=bk('<div id="crosshair"><div class="lines dot"></div><div class="lines left"></div><div class="lines right"></div><div class="lines top"></div><div class="lines bottom"></div></div>',1),zz={class:"icon"},Yz={key:0,class:"pulse",src:Bz},Xz={key:1,class:"pulse",src:Wz},Qz={key:2,src:Hz},Jz={key:3,src:Vz},Zz={key:4,src:jz},e4={key:5,src:XA},t4={key:6,src:XA},n4={key:7,class:"squadNumber"},i4=ge("img",{class:"enemy-marker",src:qz},null,-1);function r4(t,e,n,i,r,o){const l=xr("l-image-overlay"),u=xr("l-marker"),h=xr("l-icon"),d=xr("l-map");return Le(),Ge("div",null,[ge("div",Kz,er(r.distanceToCenter),1),Gz,ft(d,{id:"map",ref:"map",zoom:18,onClick:o.addSpotMarker,center:r.mapCenter,minZoom:3,maxZoom:40,zoomSnap:0,zoomDelta:.001,useGlobalLeaflet:!1,options:{attributionControl:!1,zoomControl:!1,zoomSnap:.01}},{default:yo(()=>[r.calibrateMap?bt("",!0):(Le(),Or(l,{key:0,class:"overlay",url:"./cement-factory.png",bounds:r.bounds},null,8,["bounds"])),r.calibrateMap?(Le(),Or(l,{key:1,class:"overlay",className:"calibrate",url:"./cement-factory.png",bounds:[[r.boundStart.lat,r.boundStart.lng],[r.boundEnd.lat,r.boundEnd.lng]]},null,8,["bounds"])):bt("",!0),r.calibrateMap?(Le(),Or(u,{key:2,ref:"start",draggable:!0,onDrag:o.startMove,"lat-lng":[r.boundStart.lat,r.boundStart.lng]},null,8,["onDrag","lat-lng"])):bt("",!0),r.calibrateMap?(Le(),Or(u,{key:3,ref:"end",draggable:!0,onDrag:o.endMove,"lat-lng":[r.boundEnd.lat,r.boundEnd.lng]},null,8,["onDrag","lat-lng"])):bt("",!0),(Le(!0),Ge(xt,null,Ka(t.$store.getters.getTeamMarkers,p=>(Le(),Or(u,{"lat-lng":[p.lat,p.long],key:p.id},{default:yo(()=>[ft(h,null,{default:yo(()=>[ge("div",zz,[p.markerType=="me"?(Le(),Ge("img",Yz)):bt("",!0),p.markerType=="me-squad-leader"?(Le(),Ge("img",Xz)):bt("",!0),p.markerType=="squad-leader"?(Le(),Ge("img",Qz)):bt("",!0),p.markerType=="squadmate-squad-leader"?(Le(),Ge("img",Jz)):bt("",!0),p.markerType=="squad-member"?(Le(),Ge("img",Zz)):bt("",!0),p.markerType=="team-member"?(Le(),Ge("img",e4)):bt("",!0),p.markerType=="team-squad-leader"?(Le(),Ge("img",t4)):bt("",!0),p.markerType.includes("leader")?(Le(),Ge("span",n4,er(p.squadNumber),1)):bt("",!0)])]),_:2},1024)]),_:2},1032,["lat-lng"]))),128)),(Le(!0),Ge(xt,null,Ka(t.$store.getters.getSpotMarkers,p=>(Le(),Or(u,{"lat-lng":[p.lat,p.long],key:p.id},{default:yo(()=>[ft(h,null,{default:yo(()=>[i4]),_:1})]),_:2},1032,["lat-lng"]))),128))]),_:1},8,["onClick","center","zoomDelta","options"])])}const s4=Xl(Uz,[["render",r4]]),o4={methods:{DataCheck(){}},async mounted(){rl.Init(),Og.Init(),console.log("init-data"),Rr.Subscribe("rooms",async n=>{ne.commit("saveRooms",n),Ze.DataCheck()}),Rr.Subscribe("teams",async n=>{ne.commit("saveTeams",n),Ze.DataCheck()}),Rr.Subscribe("squads",async n=>{ne.commit("saveSquads",n),Ze.DataCheck()}),Rr.Subscribe("markers",async n=>{ne.commit("saveMarkers",n),Ze.DataCheck()}),Rr.Subscribe("users",async n=>{ne.commit("saveUsers",n),Ze.DataCheck()}),Rr.Subscribe("markers",async n=>{ne.commit("saveMarkers",n),Ze.DataCheck()}),new URLSearchParams(window.location.search).get("isAdmin")=="true"&&ne.commit("saveAdminState",!0)}};function a4(t,e,n,i,r,o){const l=xr("NavBar"),u=xr("SideBar"),h=xr("Map"),d=xr("SettingsModal");return Le(),Ge(xt,null,[ft(l),ft(u),ft(h),ft(d)],64)}const l4=Xl(o4,[["render",a4]]);const zs=sM(l4);zs.component("NavBar",LV);zs.component("SideBar",iz);zs.component("Map",s4);zs.component("SettingsModal",bz);zs.use(ne);zs.use(H2,{firebaseApp:RI,modules:[]});zs.mount("#app");export{$a as c};
