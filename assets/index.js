var YL=Object.defineProperty;var XL=(t,e,n)=>e in t?YL(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var $d=(t,e,n)=>(XL(t,typeof e!="symbol"?e+"":e,n),n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&i(l)}).observe(document,{childList:!0,subtree:!0});function n(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerpolicy&&(o.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?o.credentials="include":r.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(r){if(r.ep)return;r.ep=!0;const o=n(r);fetch(r.href,o)}})();function $g(t,e){const n=Object.create(null),i=t.split(",");for(let r=0;r<i.length;r++)n[i[r]]=!0;return e?r=>!!n[r.toLowerCase()]:r=>!!n[r]}function Fg(t){if(fe(t)){const e={};for(let n=0;n<t.length;n++){const i=t[n],r=Tt(i)?eP(i):Fg(i);if(r)for(const o in r)e[o]=r[o]}return e}else{if(Tt(t))return t;if(tt(t))return t}}const QL=/;(?![^(]*\))/g,JL=/:([^]+)/,ZL=/\/\*.*?\*\//gs;function eP(t){const e={};return t.replace(ZL,"").split(QL).forEach(n=>{if(n){const i=n.split(JL);i.length>1&&(e[i[0].trim()]=i[1].trim())}}),e}function xl(t){let e="";if(Tt(t))e=t;else if(fe(t))for(let n=0;n<t.length;n++){const i=xl(t[n]);i&&(e+=i+" ")}else if(tt(t))for(const n in t)t[n]&&(e+=n+" ");return e.trim()}const tP="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",nP=$g(tP);function tT(t){return!!t||t===""}function iP(t,e){if(t.length!==e.length)return!1;let n=!0;for(let i=0;n&&i<t.length;i++)n=yh(t[i],e[i]);return n}function yh(t,e){if(t===e)return!0;let n=pE(t),i=pE(e);if(n||i)return n&&i?t.getTime()===e.getTime():!1;if(n=ol(t),i=ol(e),n||i)return t===e;if(n=fe(t),i=fe(e),n||i)return n&&i?iP(t,e):!1;if(n=tt(t),i=tt(e),n||i){if(!n||!i)return!1;const r=Object.keys(t).length,o=Object.keys(e).length;if(r!==o)return!1;for(const l in t){const u=t.hasOwnProperty(l),h=e.hasOwnProperty(l);if(u&&!h||!u&&h||!yh(t[l],e[l]))return!1}}return String(t)===String(e)}function nT(t,e){return t.findIndex(n=>yh(n,e))}const vs=t=>Tt(t)?t:t==null?"":fe(t)||tt(t)&&(t.toString===sT||!Ie(t.toString))?JSON.stringify(t,iT,2):String(t),iT=(t,e)=>e&&e.__v_isRef?iT(t,e.value):Oo(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((n,[i,r])=>(n[`${i} =>`]=r,n),{})}:bh(e)?{[`Set(${e.size})`]:[...e.values()]}:tt(e)&&!fe(e)&&!oT(e)?String(e):e,it={},So=[],fi=()=>{},rP=()=>!1,sP=/^on[^a-z]/,Eh=t=>sP.test(t),Ug=t=>t.startsWith("onUpdate:"),Qt=Object.assign,Bg=(t,e)=>{const n=t.indexOf(e);n>-1&&t.splice(n,1)},oP=Object.prototype.hasOwnProperty,Me=(t,e)=>oP.call(t,e),fe=Array.isArray,Oo=t=>Dl(t)==="[object Map]",bh=t=>Dl(t)==="[object Set]",pE=t=>Dl(t)==="[object Date]",Ie=t=>typeof t=="function",Tt=t=>typeof t=="string",ol=t=>typeof t=="symbol",tt=t=>t!==null&&typeof t=="object",rT=t=>tt(t)&&Ie(t.then)&&Ie(t.catch),sT=Object.prototype.toString,Dl=t=>sT.call(t),aP=t=>Dl(t).slice(8,-1),oT=t=>Dl(t)==="[object Object]",Wg=t=>Tt(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,Eu=$g(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),wh=t=>{const e=Object.create(null);return n=>e[n]||(e[n]=t(n))},lP=/-(\w)/g,Li=wh(t=>t.replace(lP,(e,n)=>n?n.toUpperCase():"")),cP=/\B([A-Z])/g,Jo=wh(t=>t.replace(cP,"-$1").toLowerCase()),Th=wh(t=>t.charAt(0).toUpperCase()+t.slice(1)),Fd=wh(t=>t?`on${Th(t)}`:""),al=(t,e)=>!Object.is(t,e),bu=(t,e)=>{for(let n=0;n<t.length;n++)t[n](e)},Nu=(t,e,n)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,value:n})},Ru=t=>{const e=parseFloat(t);return isNaN(e)?t:e};let gE;const uP=()=>gE||(gE=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});let In;class hP{constructor(e=!1){this.detached=e,this.active=!0,this.effects=[],this.cleanups=[],this.parent=In,!e&&In&&(this.index=(In.scopes||(In.scopes=[])).push(this)-1)}run(e){if(this.active){const n=In;try{return In=this,e()}finally{In=n}}}on(){In=this}off(){In=this.parent}stop(e){if(this.active){let n,i;for(n=0,i=this.effects.length;n<i;n++)this.effects[n].stop();for(n=0,i=this.cleanups.length;n<i;n++)this.cleanups[n]();if(this.scopes)for(n=0,i=this.scopes.length;n<i;n++)this.scopes[n].stop(!0);if(!this.detached&&this.parent&&!e){const r=this.parent.scopes.pop();r&&r!==this&&(this.parent.scopes[this.index]=r,r.index=this.index)}this.parent=void 0,this.active=!1}}}function fP(t,e=In){e&&e.active&&e.effects.push(t)}function dP(){return In}function pP(t){In&&In.cleanups.push(t)}const Hg=t=>{const e=new Set(t);return e.w=0,e.n=0,e},aT=t=>(t.w&Wr)>0,lT=t=>(t.n&Wr)>0,gP=({deps:t})=>{if(t.length)for(let e=0;e<t.length;e++)t[e].w|=Wr},_P=t=>{const{deps:e}=t;if(e.length){let n=0;for(let i=0;i<e.length;i++){const r=e[i];aT(r)&&!lT(r)?r.delete(t):e[n++]=r,r.w&=~Wr,r.n&=~Wr}e.length=n}},xp=new WeakMap;let Wa=0,Wr=1;const Dp=30;let si;const As=Symbol(""),Lp=Symbol("");class Vg{constructor(e,n=null,i){this.fn=e,this.scheduler=n,this.active=!0,this.deps=[],this.parent=void 0,fP(this,i)}run(){if(!this.active)return this.fn();let e=si,n=Lr;for(;e;){if(e===this)return;e=e.parent}try{return this.parent=si,si=this,Lr=!0,Wr=1<<++Wa,Wa<=Dp?gP(this):_E(this),this.fn()}finally{Wa<=Dp&&_P(this),Wr=1<<--Wa,si=this.parent,Lr=n,this.parent=void 0,this.deferStop&&this.stop()}}stop(){si===this?this.deferStop=!0:this.active&&(_E(this),this.onStop&&this.onStop(),this.active=!1)}}function _E(t){const{deps:e}=t;if(e.length){for(let n=0;n<e.length;n++)e[n].delete(t);e.length=0}}let Lr=!0;const cT=[];function Zo(){cT.push(Lr),Lr=!1}function ea(){const t=cT.pop();Lr=t===void 0?!0:t}function Rn(t,e,n){if(Lr&&si){let i=xp.get(t);i||xp.set(t,i=new Map);let r=i.get(n);r||i.set(n,r=Hg()),uT(r)}}function uT(t,e){let n=!1;Wa<=Dp?lT(t)||(t.n|=Wr,n=!aT(t)):n=!t.has(si),n&&(t.add(si),si.deps.push(t))}function lr(t,e,n,i,r,o){const l=xp.get(t);if(!l)return;let u=[];if(e==="clear")u=[...l.values()];else if(n==="length"&&fe(t)){const h=Ru(i);l.forEach((d,p)=>{(p==="length"||p>=h)&&u.push(d)})}else switch(n!==void 0&&u.push(l.get(n)),e){case"add":fe(t)?Wg(n)&&u.push(l.get("length")):(u.push(l.get(As)),Oo(t)&&u.push(l.get(Lp)));break;case"delete":fe(t)||(u.push(l.get(As)),Oo(t)&&u.push(l.get(Lp)));break;case"set":Oo(t)&&u.push(l.get(As));break}if(u.length===1)u[0]&&Pp(u[0]);else{const h=[];for(const d of u)d&&h.push(...d);Pp(Hg(h))}}function Pp(t,e){const n=fe(t)?t:[...t];for(const i of n)i.computed&&mE(i);for(const i of n)i.computed||mE(i)}function mE(t,e){(t!==si||t.allowRecurse)&&(t.scheduler?t.scheduler():t.run())}const mP=$g("__proto__,__v_isRef,__isVue"),hT=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(ol)),vP=jg(),yP=jg(!1,!0),EP=jg(!0),vE=bP();function bP(){const t={};return["includes","indexOf","lastIndexOf"].forEach(e=>{t[e]=function(...n){const i=We(this);for(let o=0,l=this.length;o<l;o++)Rn(i,"get",o+"");const r=i[e](...n);return r===-1||r===!1?i[e](...n.map(We)):r}}),["push","pop","shift","unshift","splice"].forEach(e=>{t[e]=function(...n){Zo();const i=We(this)[e].apply(this,n);return ea(),i}}),t}function jg(t=!1,e=!1){return function(i,r,o){if(r==="__v_isReactive")return!t;if(r==="__v_isReadonly")return t;if(r==="__v_isShallow")return e;if(r==="__v_raw"&&o===(t?e?$P:_T:e?gT:pT).get(i))return i;const l=fe(i);if(!t&&l&&Me(vE,r))return Reflect.get(vE,r,o);const u=Reflect.get(i,r,o);return(ol(r)?hT.has(r):mP(r))||(t||Rn(i,"get",r),e)?u:Ft(u)?l&&Wg(r)?u:u.value:tt(u)?t?mT(u):Ll(u):u}}const wP=fT(),TP=fT(!0);function fT(t=!1){return function(n,i,r,o){let l=n[i];if($o(l)&&Ft(l)&&!Ft(r))return!1;if(!t&&(!xu(r)&&!$o(r)&&(l=We(l),r=We(r)),!fe(n)&&Ft(l)&&!Ft(r)))return l.value=r,!0;const u=fe(n)&&Wg(i)?Number(i)<n.length:Me(n,i),h=Reflect.set(n,i,r,o);return n===We(o)&&(u?al(r,l)&&lr(n,"set",i,r):lr(n,"add",i,r)),h}}function CP(t,e){const n=Me(t,e);t[e];const i=Reflect.deleteProperty(t,e);return i&&n&&lr(t,"delete",e,void 0),i}function IP(t,e){const n=Reflect.has(t,e);return(!ol(e)||!hT.has(e))&&Rn(t,"has",e),n}function AP(t){return Rn(t,"iterate",fe(t)?"length":As),Reflect.ownKeys(t)}const dT={get:vP,set:wP,deleteProperty:CP,has:IP,ownKeys:AP},SP={get:EP,set(t,e){return!0},deleteProperty(t,e){return!0}},OP=Qt({},dT,{get:yP,set:TP}),qg=t=>t,Ch=t=>Reflect.getPrototypeOf(t);function Qc(t,e,n=!1,i=!1){t=t.__v_raw;const r=We(t),o=We(e);n||(e!==o&&Rn(r,"get",e),Rn(r,"get",o));const{has:l}=Ch(r),u=i?qg:n?zg:ll;if(l.call(r,e))return u(t.get(e));if(l.call(r,o))return u(t.get(o));t!==r&&t.get(e)}function Jc(t,e=!1){const n=this.__v_raw,i=We(n),r=We(t);return e||(t!==r&&Rn(i,"has",t),Rn(i,"has",r)),t===r?n.has(t):n.has(t)||n.has(r)}function Zc(t,e=!1){return t=t.__v_raw,!e&&Rn(We(t),"iterate",As),Reflect.get(t,"size",t)}function yE(t){t=We(t);const e=We(this);return Ch(e).has.call(e,t)||(e.add(t),lr(e,"add",t,t)),this}function EE(t,e){e=We(e);const n=We(this),{has:i,get:r}=Ch(n);let o=i.call(n,t);o||(t=We(t),o=i.call(n,t));const l=r.call(n,t);return n.set(t,e),o?al(e,l)&&lr(n,"set",t,e):lr(n,"add",t,e),this}function bE(t){const e=We(this),{has:n,get:i}=Ch(e);let r=n.call(e,t);r||(t=We(t),r=n.call(e,t)),i&&i.call(e,t);const o=e.delete(t);return r&&lr(e,"delete",t,void 0),o}function wE(){const t=We(this),e=t.size!==0,n=t.clear();return e&&lr(t,"clear",void 0,void 0),n}function eu(t,e){return function(i,r){const o=this,l=o.__v_raw,u=We(l),h=e?qg:t?zg:ll;return!t&&Rn(u,"iterate",As),l.forEach((d,p)=>i.call(r,h(d),h(p),o))}}function tu(t,e,n){return function(...i){const r=this.__v_raw,o=We(r),l=Oo(o),u=t==="entries"||t===Symbol.iterator&&l,h=t==="keys"&&l,d=r[t](...i),p=n?qg:e?zg:ll;return!e&&Rn(o,"iterate",h?Lp:As),{next(){const{value:_,done:y}=d.next();return y?{value:_,done:y}:{value:u?[p(_[0]),p(_[1])]:p(_),done:y}},[Symbol.iterator](){return this}}}}function Ir(t){return function(...e){return t==="delete"?!1:this}}function NP(){const t={get(o){return Qc(this,o)},get size(){return Zc(this)},has:Jc,add:yE,set:EE,delete:bE,clear:wE,forEach:eu(!1,!1)},e={get(o){return Qc(this,o,!1,!0)},get size(){return Zc(this)},has:Jc,add:yE,set:EE,delete:bE,clear:wE,forEach:eu(!1,!0)},n={get(o){return Qc(this,o,!0)},get size(){return Zc(this,!0)},has(o){return Jc.call(this,o,!0)},add:Ir("add"),set:Ir("set"),delete:Ir("delete"),clear:Ir("clear"),forEach:eu(!0,!1)},i={get(o){return Qc(this,o,!0,!0)},get size(){return Zc(this,!0)},has(o){return Jc.call(this,o,!0)},add:Ir("add"),set:Ir("set"),delete:Ir("delete"),clear:Ir("clear"),forEach:eu(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(o=>{t[o]=tu(o,!1,!1),n[o]=tu(o,!0,!1),e[o]=tu(o,!1,!0),i[o]=tu(o,!0,!0)}),[t,n,e,i]}const[RP,xP,DP,LP]=NP();function Kg(t,e){const n=e?t?LP:DP:t?xP:RP;return(i,r,o)=>r==="__v_isReactive"?!t:r==="__v_isReadonly"?t:r==="__v_raw"?i:Reflect.get(Me(n,r)&&r in i?n:i,r,o)}const PP={get:Kg(!1,!1)},kP={get:Kg(!1,!0)},MP={get:Kg(!0,!1)},pT=new WeakMap,gT=new WeakMap,_T=new WeakMap,$P=new WeakMap;function FP(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function UP(t){return t.__v_skip||!Object.isExtensible(t)?0:FP(aP(t))}function Ll(t){return $o(t)?t:Gg(t,!1,dT,PP,pT)}function BP(t){return Gg(t,!1,OP,kP,gT)}function mT(t){return Gg(t,!0,SP,MP,_T)}function Gg(t,e,n,i,r){if(!tt(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const o=r.get(t);if(o)return o;const l=UP(t);if(l===0)return t;const u=new Proxy(t,l===2?i:n);return r.set(t,u),u}function No(t){return $o(t)?No(t.__v_raw):!!(t&&t.__v_isReactive)}function $o(t){return!!(t&&t.__v_isReadonly)}function xu(t){return!!(t&&t.__v_isShallow)}function vT(t){return No(t)||$o(t)}function We(t){const e=t&&t.__v_raw;return e?We(e):t}function yT(t){return Nu(t,"__v_skip",!0),t}const ll=t=>tt(t)?Ll(t):t,zg=t=>tt(t)?mT(t):t;function ET(t){Lr&&si&&(t=We(t),uT(t.dep||(t.dep=Hg())))}function bT(t,e){t=We(t),t.dep&&Pp(t.dep)}function Ft(t){return!!(t&&t.__v_isRef===!0)}function On(t){return wT(t,!1)}function WP(t){return wT(t,!0)}function wT(t,e){return Ft(t)?t:new HP(t,e)}class HP{constructor(e,n){this.__v_isShallow=n,this.dep=void 0,this.__v_isRef=!0,this._rawValue=n?e:We(e),this._value=n?e:ll(e)}get value(){return ET(this),this._value}set value(e){const n=this.__v_isShallow||xu(e)||$o(e);e=n?e:We(e),al(e,this._rawValue)&&(this._rawValue=e,this._value=n?e:ll(e),bT(this))}}function Rr(t){return Ft(t)?t.value:t}const VP={get:(t,e,n)=>Rr(Reflect.get(t,e,n)),set:(t,e,n,i)=>{const r=t[e];return Ft(r)&&!Ft(n)?(r.value=n,!0):Reflect.set(t,e,n,i)}};function TT(t){return No(t)?t:new Proxy(t,VP)}var CT;class jP{constructor(e,n,i,r){this._setter=n,this.dep=void 0,this.__v_isRef=!0,this[CT]=!1,this._dirty=!0,this.effect=new Vg(e,()=>{this._dirty||(this._dirty=!0,bT(this))}),this.effect.computed=this,this.effect.active=this._cacheable=!r,this.__v_isReadonly=i}get value(){const e=We(this);return ET(e),(e._dirty||!e._cacheable)&&(e._dirty=!1,e._value=e.effect.run()),e._value}set value(e){this._setter(e)}}CT="__v_isReadonly";function qP(t,e,n=!1){let i,r;const o=Ie(t);return o?(i=t,r=fi):(i=t.get,r=t.set),new jP(i,r,o||!r,n)}function Pr(t,e,n,i){let r;try{r=i?t(...i):t()}catch(o){Ih(o,e,n)}return r}function Kn(t,e,n,i){if(Ie(t)){const o=Pr(t,e,n,i);return o&&rT(o)&&o.catch(l=>{Ih(l,e,n)}),o}const r=[];for(let o=0;o<t.length;o++)r.push(Kn(t[o],e,n,i));return r}function Ih(t,e,n,i=!0){const r=e?e.vnode:null;if(e){let o=e.parent;const l=e.proxy,u=n;for(;o;){const d=o.ec;if(d){for(let p=0;p<d.length;p++)if(d[p](t,l,u)===!1)return}o=o.parent}const h=e.appContext.config.errorHandler;if(h){Pr(h,null,10,[t,l,u]);return}}KP(t,n,r,i)}function KP(t,e,n,i=!0){console.error(t)}let cl=!1,kp=!1;const zt=[];let Ai=0;const Ro=[];let Zi=null,ps=0;const IT=Promise.resolve();let Yg=null;function Ls(t){const e=Yg||IT;return t?e.then(this?t.bind(this):t):e}function GP(t){let e=Ai+1,n=zt.length;for(;e<n;){const i=e+n>>>1;ul(zt[i])<t?e=i+1:n=i}return e}function Xg(t){(!zt.length||!zt.includes(t,cl&&t.allowRecurse?Ai+1:Ai))&&(t.id==null?zt.push(t):zt.splice(GP(t.id),0,t),AT())}function AT(){!cl&&!kp&&(kp=!0,Yg=IT.then(OT))}function zP(t){const e=zt.indexOf(t);e>Ai&&zt.splice(e,1)}function YP(t){fe(t)?Ro.push(...t):(!Zi||!Zi.includes(t,t.allowRecurse?ps+1:ps))&&Ro.push(t),AT()}function TE(t,e=cl?Ai+1:0){for(;e<zt.length;e++){const n=zt[e];n&&n.pre&&(zt.splice(e,1),e--,n())}}function ST(t){if(Ro.length){const e=[...new Set(Ro)];if(Ro.length=0,Zi){Zi.push(...e);return}for(Zi=e,Zi.sort((n,i)=>ul(n)-ul(i)),ps=0;ps<Zi.length;ps++)Zi[ps]();Zi=null,ps=0}}const ul=t=>t.id==null?1/0:t.id,XP=(t,e)=>{const n=ul(t)-ul(e);if(n===0){if(t.pre&&!e.pre)return-1;if(e.pre&&!t.pre)return 1}return n};function OT(t){kp=!1,cl=!0,zt.sort(XP);const e=fi;try{for(Ai=0;Ai<zt.length;Ai++){const n=zt[Ai];n&&n.active!==!1&&Pr(n,null,14)}}finally{Ai=0,zt.length=0,ST(),cl=!1,Yg=null,(zt.length||Ro.length)&&OT()}}function QP(t,e,...n){if(t.isUnmounted)return;const i=t.vnode.props||it;let r=n;const o=e.startsWith("update:"),l=o&&e.slice(7);if(l&&l in i){const p=`${l==="modelValue"?"model":l}Modifiers`,{number:_,trim:y}=i[p]||it;y&&(r=n.map(E=>Tt(E)?E.trim():E)),_&&(r=n.map(Ru))}let u,h=i[u=Fd(e)]||i[u=Fd(Li(e))];!h&&o&&(h=i[u=Fd(Jo(e))]),h&&Kn(h,t,6,r);const d=i[u+"Once"];if(d){if(!t.emitted)t.emitted={};else if(t.emitted[u])return;t.emitted[u]=!0,Kn(d,t,6,r)}}function NT(t,e,n=!1){const i=e.emitsCache,r=i.get(t);if(r!==void 0)return r;const o=t.emits;let l={},u=!1;if(!Ie(t)){const h=d=>{const p=NT(d,e,!0);p&&(u=!0,Qt(l,p))};!n&&e.mixins.length&&e.mixins.forEach(h),t.extends&&h(t.extends),t.mixins&&t.mixins.forEach(h)}return!o&&!u?(tt(t)&&i.set(t,null),null):(fe(o)?o.forEach(h=>l[h]=null):Qt(l,o),tt(t)&&i.set(t,l),l)}function Ah(t,e){return!t||!Eh(e)?!1:(e=e.slice(2).replace(/Once$/,""),Me(t,e[0].toLowerCase()+e.slice(1))||Me(t,Jo(e))||Me(t,e))}let Ut=null,Sh=null;function Du(t){const e=Ut;return Ut=t,Sh=t&&t.type.__scopeId||null,e}function Oh(t){Sh=t}function Nh(){Sh=null}function Eo(t,e=Ut,n){if(!e||t._n)return t;const i=(...r)=>{i._d&&PE(-1);const o=Du(e);let l;try{l=t(...r)}finally{Du(o),i._d&&PE(1)}return l};return i._n=!0,i._c=!0,i._d=!0,i}function Ud(t){const{type:e,vnode:n,proxy:i,withProxy:r,props:o,propsOptions:[l],slots:u,attrs:h,emit:d,render:p,renderCache:_,data:y,setupState:E,ctx:S,inheritAttrs:O}=t;let L,q;const oe=Du(t);try{if(n.shapeFlag&4){const V=r||i;L=Ci(p.call(V,V,_,o,E,y,S)),q=h}else{const V=e;L=Ci(V.length>1?V(o,{attrs:h,slots:u,emit:d}):V(o,null)),q=e.props?h:JP(h)}}catch(V){Ya.length=0,Ih(V,t,1),L=ct(Gn)}let H=L;if(q&&O!==!1){const V=Object.keys(q),{shapeFlag:Q}=H;V.length&&Q&7&&(l&&V.some(Ug)&&(q=ZP(q,l)),H=Hr(H,q))}return n.dirs&&(H=Hr(H),H.dirs=H.dirs?H.dirs.concat(n.dirs):n.dirs),n.transition&&(H.transition=n.transition),L=H,Du(oe),L}const JP=t=>{let e;for(const n in t)(n==="class"||n==="style"||Eh(n))&&((e||(e={}))[n]=t[n]);return e},ZP=(t,e)=>{const n={};for(const i in t)(!Ug(i)||!(i.slice(9)in e))&&(n[i]=t[i]);return n};function ek(t,e,n){const{props:i,children:r,component:o}=t,{props:l,children:u,patchFlag:h}=e,d=o.emitsOptions;if(e.dirs||e.transition)return!0;if(n&&h>=0){if(h&1024)return!0;if(h&16)return i?CE(i,l,d):!!l;if(h&8){const p=e.dynamicProps;for(let _=0;_<p.length;_++){const y=p[_];if(l[y]!==i[y]&&!Ah(d,y))return!0}}}else return(r||u)&&(!u||!u.$stable)?!0:i===l?!1:i?l?CE(i,l,d):!0:!!l;return!1}function CE(t,e,n){const i=Object.keys(e);if(i.length!==Object.keys(t).length)return!0;for(let r=0;r<i.length;r++){const o=i[r];if(e[o]!==t[o]&&!Ah(n,o))return!0}return!1}function tk({vnode:t,parent:e},n){for(;e&&e.subTree===t;)(t=e.vnode).el=n,e=e.parent}const nk=t=>t.__isSuspense;function ik(t,e){e&&e.pendingBranch?fe(t)?e.effects.push(...t):e.effects.push(t):YP(t)}function Oi(t,e){if(Nt){let n=Nt.provides;const i=Nt.parent&&Nt.parent.provides;i===n&&(n=Nt.provides=Object.create(i)),n[t]=e}}function wt(t,e,n=!1){const i=Nt||Ut;if(i){const r=i.parent==null?i.vnode.appContext&&i.vnode.appContext.provides:i.parent.provides;if(r&&t in r)return r[t];if(arguments.length>1)return n&&Ie(e)?e.call(i.proxy):e}}const nu={};function kr(t,e,n){return RT(t,e,n)}function RT(t,e,{immediate:n,deep:i,flush:r,onTrack:o,onTrigger:l}=it){const u=Nt;let h,d=!1,p=!1;if(Ft(t)?(h=()=>t.value,d=xu(t)):No(t)?(h=()=>t,i=!0):fe(t)?(p=!0,d=t.some(H=>No(H)||xu(H)),h=()=>t.map(H=>{if(Ft(H))return H.value;if(No(H))return ys(H);if(Ie(H))return Pr(H,u,2)})):Ie(t)?e?h=()=>Pr(t,u,2):h=()=>{if(!(u&&u.isUnmounted))return _&&_(),Kn(t,u,3,[y])}:h=fi,e&&i){const H=h;h=()=>ys(H())}let _,y=H=>{_=q.onStop=()=>{Pr(H,u,4)}},E;if(fl)if(y=fi,e?n&&Kn(e,u,3,[h(),p?[]:void 0,y]):h(),r==="sync"){const H=Qk();E=H.__watcherHandles||(H.__watcherHandles=[])}else return fi;let S=p?new Array(t.length).fill(nu):nu;const O=()=>{if(q.active)if(e){const H=q.run();(i||d||(p?H.some((V,Q)=>al(V,S[Q])):al(H,S)))&&(_&&_(),Kn(e,u,3,[H,S===nu?void 0:p&&S[0]===nu?[]:S,y]),S=H)}else q.run()};O.allowRecurse=!!e;let L;r==="sync"?L=O:r==="post"?L=()=>gn(O,u&&u.suspense):(O.pre=!0,u&&(O.id=u.uid),L=()=>Xg(O));const q=new Vg(h,L);e?n?O():S=q.run():r==="post"?gn(q.run.bind(q),u&&u.suspense):q.run();const oe=()=>{q.stop(),u&&u.scope&&Bg(u.scope.effects,q)};return E&&E.push(oe),oe}function rk(t,e,n){const i=this.proxy,r=Tt(t)?t.includes(".")?xT(i,t):()=>i[t]:t.bind(i,i);let o;Ie(e)?o=e:(o=e.handler,n=e);const l=Nt;Fo(this);const u=RT(r,o.bind(i),n);return l?Fo(l):Ss(),u}function xT(t,e){const n=e.split(".");return()=>{let i=t;for(let r=0;r<n.length&&i;r++)i=i[n[r]];return i}}function ys(t,e){if(!tt(t)||t.__v_skip||(e=e||new Set,e.has(t)))return t;if(e.add(t),Ft(t))ys(t.value,e);else if(fe(t))for(let n=0;n<t.length;n++)ys(t[n],e);else if(bh(t)||Oo(t))t.forEach(n=>{ys(n,e)});else if(oT(t))for(const n in t)ys(t[n],e);return t}function sk(){const t={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return Vs(()=>{t.isMounted=!0}),Dh(()=>{t.isUnmounting=!0}),t}const Vn=[Function,Array],ok={name:"BaseTransition",props:{mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:Vn,onEnter:Vn,onAfterEnter:Vn,onEnterCancelled:Vn,onBeforeLeave:Vn,onLeave:Vn,onAfterLeave:Vn,onLeaveCancelled:Vn,onBeforeAppear:Vn,onAppear:Vn,onAfterAppear:Vn,onAppearCancelled:Vn},setup(t,{slots:e}){const n=kh(),i=sk();let r;return()=>{const o=e.default&&LT(e.default(),!0);if(!o||!o.length)return;let l=o[0];if(o.length>1){for(const O of o)if(O.type!==Gn){l=O;break}}const u=We(t),{mode:h}=u;if(i.isLeaving)return Bd(l);const d=IE(l);if(!d)return Bd(l);const p=Mp(d,u,i,n);$p(d,p);const _=n.subTree,y=_&&IE(_);let E=!1;const{getTransitionKey:S}=d.type;if(S){const O=S();r===void 0?r=O:O!==r&&(r=O,E=!0)}if(y&&y.type!==Gn&&(!gs(d,y)||E)){const O=Mp(y,u,i,n);if($p(y,O),h==="out-in")return i.isLeaving=!0,O.afterLeave=()=>{i.isLeaving=!1,n.update.active!==!1&&n.update()},Bd(l);h==="in-out"&&d.type!==Gn&&(O.delayLeave=(L,q,oe)=>{const H=DT(i,y);H[String(y.key)]=y,L._leaveCb=()=>{q(),L._leaveCb=void 0,delete p.delayedLeave},p.delayedLeave=oe})}return l}}},ak=ok;function DT(t,e){const{leavingVNodes:n}=t;let i=n.get(e.type);return i||(i=Object.create(null),n.set(e.type,i)),i}function Mp(t,e,n,i){const{appear:r,mode:o,persisted:l=!1,onBeforeEnter:u,onEnter:h,onAfterEnter:d,onEnterCancelled:p,onBeforeLeave:_,onLeave:y,onAfterLeave:E,onLeaveCancelled:S,onBeforeAppear:O,onAppear:L,onAfterAppear:q,onAppearCancelled:oe}=e,H=String(t.key),V=DT(n,t),Q=(X,de)=>{X&&Kn(X,i,9,de)},B=(X,de)=>{const pe=de[1];Q(X,de),fe(X)?X.every($e=>$e.length<=1)&&pe():X.length<=1&&pe()},Z={mode:o,persisted:l,beforeEnter(X){let de=u;if(!n.isMounted)if(r)de=O||u;else return;X._leaveCb&&X._leaveCb(!0);const pe=V[H];pe&&gs(t,pe)&&pe.el._leaveCb&&pe.el._leaveCb(),Q(de,[X])},enter(X){let de=h,pe=d,$e=p;if(!n.isMounted)if(r)de=L||h,pe=q||d,$e=oe||p;else return;let rt=!1;const ze=X._enterCb=Vt=>{rt||(rt=!0,Vt?Q($e,[X]):Q(pe,[X]),Z.delayedLeave&&Z.delayedLeave(),X._enterCb=void 0)};de?B(de,[X,ze]):ze()},leave(X,de){const pe=String(t.key);if(X._enterCb&&X._enterCb(!0),n.isUnmounting)return de();Q(_,[X]);let $e=!1;const rt=X._leaveCb=ze=>{$e||($e=!0,de(),ze?Q(S,[X]):Q(E,[X]),X._leaveCb=void 0,V[pe]===t&&delete V[pe])};V[pe]=t,y?B(y,[X,rt]):rt()},clone(X){return Mp(X,e,n,i)}};return Z}function Bd(t){if(Rh(t))return t=Hr(t),t.children=null,t}function IE(t){return Rh(t)?t.children?t.children[0]:void 0:t}function $p(t,e){t.shapeFlag&6&&t.component?$p(t.component.subTree,e):t.shapeFlag&128?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}function LT(t,e=!1,n){let i=[],r=0;for(let o=0;o<t.length;o++){let l=t[o];const u=n==null?l.key:String(n)+String(l.key!=null?l.key:o);l.type===Ot?(l.patchFlag&128&&r++,i=i.concat(LT(l.children,e,u))):(e||l.type!==Gn)&&i.push(u!=null?Hr(l,{key:u}):l)}if(r>1)for(let o=0;o<i.length;o++)i[o].patchFlag=-2;return i}const Ka=t=>!!t.type.__asyncLoader,Rh=t=>t.type.__isKeepAlive;function lk(t,e){PT(t,"a",e)}function ck(t,e){PT(t,"da",e)}function PT(t,e,n=Nt){const i=t.__wdc||(t.__wdc=()=>{let r=n;for(;r;){if(r.isDeactivated)return;r=r.parent}return t()});if(xh(e,i,n),n){let r=n.parent;for(;r&&r.parent;)Rh(r.parent.vnode)&&uk(i,e,n,r),r=r.parent}}function uk(t,e,n,i){const r=xh(e,t,i,!0);Qg(()=>{Bg(i[e],r)},n)}function xh(t,e,n=Nt,i=!1){if(n){const r=n[t]||(n[t]=[]),o=e.__weh||(e.__weh=(...l)=>{if(n.isUnmounted)return;Zo(),Fo(n);const u=Kn(e,n,t,l);return Ss(),ea(),u});return i?r.unshift(o):r.push(o),o}}const dr=t=>(e,n=Nt)=>(!fl||t==="sp")&&xh(t,(...i)=>e(...i),n),hk=dr("bm"),Vs=dr("m"),fk=dr("bu"),dk=dr("u"),Dh=dr("bum"),Qg=dr("um"),kT=dr("sp"),pk=dr("rtg"),gk=dr("rtc");function _k(t,e=Nt){xh("ec",t,e)}function AE(t,e){const n=Ut;if(n===null)return t;const i=Mh(n)||n.proxy,r=t.dirs||(t.dirs=[]);for(let o=0;o<e.length;o++){let[l,u,h,d=it]=e[o];l&&(Ie(l)&&(l={mounted:l,updated:l}),l.deep&&ys(u),r.push({dir:l,instance:i,value:u,oldValue:void 0,arg:h,modifiers:d}))}return t}function cs(t,e,n,i){const r=t.dirs,o=e&&e.dirs;for(let l=0;l<r.length;l++){const u=r[l];o&&(u.oldValue=o[l].value);let h=u.dir[i];h&&(Zo(),Kn(h,n,8,[t.el,u,t,e]),ea())}}const MT="components";function xr(t,e){return vk(MT,t,!0,e)||t}const mk=Symbol();function vk(t,e,n=!0,i=!1){const r=Ut||Nt;if(r){const o=r.type;if(t===MT){const u=Yk(o,!1);if(u&&(u===e||u===Li(e)||u===Th(Li(e))))return o}const l=SE(r[t]||o[t],e)||SE(r.appContext[t],e);return!l&&i?o:l}}function SE(t,e){return t&&(t[e]||t[Li(e)]||t[Th(Li(e))])}function Ga(t,e,n,i){let r;const o=n&&n[i];if(fe(t)||Tt(t)){r=new Array(t.length);for(let l=0,u=t.length;l<u;l++)r[l]=e(t[l],l,void 0,o&&o[l])}else if(typeof t=="number"){r=new Array(t);for(let l=0;l<t;l++)r[l]=e(l+1,l,void 0,o&&o[l])}else if(tt(t))if(t[Symbol.iterator])r=Array.from(t,(l,u)=>e(l,u,void 0,o&&o[u]));else{const l=Object.keys(t);r=new Array(l.length);for(let u=0,h=l.length;u<h;u++){const d=l[u];r[u]=e(t[d],d,u,o&&o[u])}}else r=[];return n&&(n[i]=r),r}function yk(t,e,n={},i,r){if(Ut.isCE||Ut.parent&&Ka(Ut.parent)&&Ut.parent.isCE)return e!=="default"&&(n.name=e),ct("slot",n,i&&i());let o=t[e];o&&o._c&&(o._d=!1),Ve();const l=o&&$T(o(n)),u=Pu(Ot,{key:n.key||l&&l.key||`_${e}`},l||(i?i():[]),l&&t._===1?64:-2);return!r&&u.scopeId&&(u.slotScopeIds=[u.scopeId+"-s"]),o&&o._c&&(o._d=!0),u}function $T(t){return t.some(e=>ku(e)?!(e.type===Gn||e.type===Ot&&!$T(e.children)):!0)?t:null}const Fp=t=>t?zT(t)?Mh(t)||t.proxy:Fp(t.parent):null,za=Qt(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>Fp(t.parent),$root:t=>Fp(t.root),$emit:t=>t.emit,$options:t=>Jg(t),$forceUpdate:t=>t.f||(t.f=()=>Xg(t.update)),$nextTick:t=>t.n||(t.n=Ls.bind(t.proxy)),$watch:t=>rk.bind(t)}),Wd=(t,e)=>t!==it&&!t.__isScriptSetup&&Me(t,e),Ek={get({_:t},e){const{ctx:n,setupState:i,data:r,props:o,accessCache:l,type:u,appContext:h}=t;let d;if(e[0]!=="$"){const E=l[e];if(E!==void 0)switch(E){case 1:return i[e];case 2:return r[e];case 4:return n[e];case 3:return o[e]}else{if(Wd(i,e))return l[e]=1,i[e];if(r!==it&&Me(r,e))return l[e]=2,r[e];if((d=t.propsOptions[0])&&Me(d,e))return l[e]=3,o[e];if(n!==it&&Me(n,e))return l[e]=4,n[e];Up&&(l[e]=0)}}const p=za[e];let _,y;if(p)return e==="$attrs"&&Rn(t,"get",e),p(t);if((_=u.__cssModules)&&(_=_[e]))return _;if(n!==it&&Me(n,e))return l[e]=4,n[e];if(y=h.config.globalProperties,Me(y,e))return y[e]},set({_:t},e,n){const{data:i,setupState:r,ctx:o}=t;return Wd(r,e)?(r[e]=n,!0):i!==it&&Me(i,e)?(i[e]=n,!0):Me(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(o[e]=n,!0)},has({_:{data:t,setupState:e,accessCache:n,ctx:i,appContext:r,propsOptions:o}},l){let u;return!!n[l]||t!==it&&Me(t,l)||Wd(e,l)||(u=o[0])&&Me(u,l)||Me(i,l)||Me(za,l)||Me(r.config.globalProperties,l)},defineProperty(t,e,n){return n.get!=null?t._.accessCache[e]=0:Me(n,"value")&&this.set(t,e,n.value,null),Reflect.defineProperty(t,e,n)}};let Up=!0;function bk(t){const e=Jg(t),n=t.proxy,i=t.ctx;Up=!1,e.beforeCreate&&OE(e.beforeCreate,t,"bc");const{data:r,computed:o,methods:l,watch:u,provide:h,inject:d,created:p,beforeMount:_,mounted:y,beforeUpdate:E,updated:S,activated:O,deactivated:L,beforeDestroy:q,beforeUnmount:oe,destroyed:H,unmounted:V,render:Q,renderTracked:B,renderTriggered:Z,errorCaptured:X,serverPrefetch:de,expose:pe,inheritAttrs:$e,components:rt,directives:ze,filters:Vt}=e;if(d&&wk(d,i,null,t.appContext.config.unwrapInjectedRef),l)for(const ve in l){const we=l[ve];Ie(we)&&(i[ve]=we.bind(n))}if(r){const ve=r.call(n,n);tt(ve)&&(t.data=Ll(ve))}if(Up=!0,o)for(const ve in o){const we=o[ve],Dt=Ie(we)?we.bind(n,n):Ie(we.get)?we.get.bind(n,n):fi,cn=!Ie(we)&&Ie(we.set)?we.set.bind(n):fi,ut=jp({get:Dt,set:cn});Object.defineProperty(i,ve,{enumerable:!0,configurable:!0,get:()=>ut.value,set:Ct=>ut.value=Ct})}if(u)for(const ve in u)FT(u[ve],i,n,ve);if(h){const ve=Ie(h)?h.call(n):h;Reflect.ownKeys(ve).forEach(we=>{Oi(we,ve[we])})}p&&OE(p,t,"c");function Ue(ve,we){fe(we)?we.forEach(Dt=>ve(Dt.bind(n))):we&&ve(we.bind(n))}if(Ue(hk,_),Ue(Vs,y),Ue(fk,E),Ue(dk,S),Ue(lk,O),Ue(ck,L),Ue(_k,X),Ue(gk,B),Ue(pk,Z),Ue(Dh,oe),Ue(Qg,V),Ue(kT,de),fe(pe))if(pe.length){const ve=t.exposed||(t.exposed={});pe.forEach(we=>{Object.defineProperty(ve,we,{get:()=>n[we],set:Dt=>n[we]=Dt})})}else t.exposed||(t.exposed={});Q&&t.render===fi&&(t.render=Q),$e!=null&&(t.inheritAttrs=$e),rt&&(t.components=rt),ze&&(t.directives=ze)}function wk(t,e,n=fi,i=!1){fe(t)&&(t=Bp(t));for(const r in t){const o=t[r];let l;tt(o)?"default"in o?l=wt(o.from||r,o.default,!0):l=wt(o.from||r):l=wt(o),Ft(l)&&i?Object.defineProperty(e,r,{enumerable:!0,configurable:!0,get:()=>l.value,set:u=>l.value=u}):e[r]=l}}function OE(t,e,n){Kn(fe(t)?t.map(i=>i.bind(e.proxy)):t.bind(e.proxy),e,n)}function FT(t,e,n,i){const r=i.includes(".")?xT(n,i):()=>n[i];if(Tt(t)){const o=e[t];Ie(o)&&kr(r,o)}else if(Ie(t))kr(r,t.bind(n));else if(tt(t))if(fe(t))t.forEach(o=>FT(o,e,n,i));else{const o=Ie(t.handler)?t.handler.bind(n):e[t.handler];Ie(o)&&kr(r,o,t)}}function Jg(t){const e=t.type,{mixins:n,extends:i}=e,{mixins:r,optionsCache:o,config:{optionMergeStrategies:l}}=t.appContext,u=o.get(e);let h;return u?h=u:!r.length&&!n&&!i?h=e:(h={},r.length&&r.forEach(d=>Lu(h,d,l,!0)),Lu(h,e,l)),tt(e)&&o.set(e,h),h}function Lu(t,e,n,i=!1){const{mixins:r,extends:o}=e;o&&Lu(t,o,n,!0),r&&r.forEach(l=>Lu(t,l,n,!0));for(const l in e)if(!(i&&l==="expose")){const u=Tk[l]||n&&n[l];t[l]=u?u(t[l],e[l]):e[l]}return t}const Tk={data:NE,props:hs,emits:hs,methods:hs,computed:hs,beforeCreate:nn,created:nn,beforeMount:nn,mounted:nn,beforeUpdate:nn,updated:nn,beforeDestroy:nn,beforeUnmount:nn,destroyed:nn,unmounted:nn,activated:nn,deactivated:nn,errorCaptured:nn,serverPrefetch:nn,components:hs,directives:hs,watch:Ik,provide:NE,inject:Ck};function NE(t,e){return e?t?function(){return Qt(Ie(t)?t.call(this,this):t,Ie(e)?e.call(this,this):e)}:e:t}function Ck(t,e){return hs(Bp(t),Bp(e))}function Bp(t){if(fe(t)){const e={};for(let n=0;n<t.length;n++)e[t[n]]=t[n];return e}return t}function nn(t,e){return t?[...new Set([].concat(t,e))]:e}function hs(t,e){return t?Qt(Qt(Object.create(null),t),e):e}function Ik(t,e){if(!t)return e;if(!e)return t;const n=Qt(Object.create(null),t);for(const i in e)n[i]=nn(t[i],e[i]);return n}function Ak(t,e,n,i=!1){const r={},o={};Nu(o,Ph,1),t.propsDefaults=Object.create(null),UT(t,e,r,o);for(const l in t.propsOptions[0])l in r||(r[l]=void 0);n?t.props=i?r:BP(r):t.type.props?t.props=r:t.props=o,t.attrs=o}function Sk(t,e,n,i){const{props:r,attrs:o,vnode:{patchFlag:l}}=t,u=We(r),[h]=t.propsOptions;let d=!1;if((i||l>0)&&!(l&16)){if(l&8){const p=t.vnode.dynamicProps;for(let _=0;_<p.length;_++){let y=p[_];if(Ah(t.emitsOptions,y))continue;const E=e[y];if(h)if(Me(o,y))E!==o[y]&&(o[y]=E,d=!0);else{const S=Li(y);r[S]=Wp(h,u,S,E,t,!1)}else E!==o[y]&&(o[y]=E,d=!0)}}}else{UT(t,e,r,o)&&(d=!0);let p;for(const _ in u)(!e||!Me(e,_)&&((p=Jo(_))===_||!Me(e,p)))&&(h?n&&(n[_]!==void 0||n[p]!==void 0)&&(r[_]=Wp(h,u,_,void 0,t,!0)):delete r[_]);if(o!==u)for(const _ in o)(!e||!Me(e,_))&&(delete o[_],d=!0)}d&&lr(t,"set","$attrs")}function UT(t,e,n,i){const[r,o]=t.propsOptions;let l=!1,u;if(e)for(let h in e){if(Eu(h))continue;const d=e[h];let p;r&&Me(r,p=Li(h))?!o||!o.includes(p)?n[p]=d:(u||(u={}))[p]=d:Ah(t.emitsOptions,h)||(!(h in i)||d!==i[h])&&(i[h]=d,l=!0)}if(o){const h=We(n),d=u||it;for(let p=0;p<o.length;p++){const _=o[p];n[_]=Wp(r,h,_,d[_],t,!Me(d,_))}}return l}function Wp(t,e,n,i,r,o){const l=t[n];if(l!=null){const u=Me(l,"default");if(u&&i===void 0){const h=l.default;if(l.type!==Function&&Ie(h)){const{propsDefaults:d}=r;n in d?i=d[n]:(Fo(r),i=d[n]=h.call(null,e),Ss())}else i=h}l[0]&&(o&&!u?i=!1:l[1]&&(i===""||i===Jo(n))&&(i=!0))}return i}function BT(t,e,n=!1){const i=e.propsCache,r=i.get(t);if(r)return r;const o=t.props,l={},u=[];let h=!1;if(!Ie(t)){const p=_=>{h=!0;const[y,E]=BT(_,e,!0);Qt(l,y),E&&u.push(...E)};!n&&e.mixins.length&&e.mixins.forEach(p),t.extends&&p(t.extends),t.mixins&&t.mixins.forEach(p)}if(!o&&!h)return tt(t)&&i.set(t,So),So;if(fe(o))for(let p=0;p<o.length;p++){const _=Li(o[p]);RE(_)&&(l[_]=it)}else if(o)for(const p in o){const _=Li(p);if(RE(_)){const y=o[p],E=l[_]=fe(y)||Ie(y)?{type:y}:Object.assign({},y);if(E){const S=LE(Boolean,E.type),O=LE(String,E.type);E[0]=S>-1,E[1]=O<0||S<O,(S>-1||Me(E,"default"))&&u.push(_)}}}const d=[l,u];return tt(t)&&i.set(t,d),d}function RE(t){return t[0]!=="$"}function xE(t){const e=t&&t.toString().match(/^\s*function (\w+)/);return e?e[1]:t===null?"null":""}function DE(t,e){return xE(t)===xE(e)}function LE(t,e){return fe(e)?e.findIndex(n=>DE(n,t)):Ie(e)&&DE(e,t)?0:-1}const WT=t=>t[0]==="_"||t==="$stable",Zg=t=>fe(t)?t.map(Ci):[Ci(t)],Ok=(t,e,n)=>{if(e._n)return e;const i=Eo((...r)=>Zg(e(...r)),n);return i._c=!1,i},HT=(t,e,n)=>{const i=t._ctx;for(const r in t){if(WT(r))continue;const o=t[r];if(Ie(o))e[r]=Ok(r,o,i);else if(o!=null){const l=Zg(o);e[r]=()=>l}}},VT=(t,e)=>{const n=Zg(e);t.slots.default=()=>n},Nk=(t,e)=>{if(t.vnode.shapeFlag&32){const n=e._;n?(t.slots=We(e),Nu(e,"_",n)):HT(e,t.slots={})}else t.slots={},e&&VT(t,e);Nu(t.slots,Ph,1)},Rk=(t,e,n)=>{const{vnode:i,slots:r}=t;let o=!0,l=it;if(i.shapeFlag&32){const u=e._;u?n&&u===1?o=!1:(Qt(r,e),!n&&u===1&&delete r._):(o=!e.$stable,HT(e,r)),l=e}else e&&(VT(t,e),l={default:1});if(o)for(const u in r)!WT(u)&&!(u in l)&&delete r[u]};function jT(){return{app:null,config:{isNativeTag:rP,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let xk=0;function Dk(t,e){return function(i,r=null){Ie(i)||(i=Object.assign({},i)),r!=null&&!tt(r)&&(r=null);const o=jT(),l=new Set;let u=!1;const h=o.app={_uid:xk++,_component:i,_props:r,_container:null,_context:o,_instance:null,version:Jk,get config(){return o.config},set config(d){},use(d,...p){return l.has(d)||(d&&Ie(d.install)?(l.add(d),d.install(h,...p)):Ie(d)&&(l.add(d),d(h,...p))),h},mixin(d){return o.mixins.includes(d)||o.mixins.push(d),h},component(d,p){return p?(o.components[d]=p,h):o.components[d]},directive(d,p){return p?(o.directives[d]=p,h):o.directives[d]},mount(d,p,_){if(!u){const y=ct(i,r);return y.appContext=o,p&&e?e(y,d):t(y,d,_),u=!0,h._container=d,d.__vue_app__=h,Mh(y.component)||y.component.proxy}},unmount(){u&&(t(null,h._container),delete h._container.__vue_app__)},provide(d,p){return o.provides[d]=p,h}};return h}}function Hp(t,e,n,i,r=!1){if(fe(t)){t.forEach((y,E)=>Hp(y,e&&(fe(e)?e[E]:e),n,i,r));return}if(Ka(i)&&!r)return;const o=i.shapeFlag&4?Mh(i.component)||i.component.proxy:i.el,l=r?null:o,{i:u,r:h}=t,d=e&&e.r,p=u.refs===it?u.refs={}:u.refs,_=u.setupState;if(d!=null&&d!==h&&(Tt(d)?(p[d]=null,Me(_,d)&&(_[d]=null)):Ft(d)&&(d.value=null)),Ie(h))Pr(h,u,12,[l,p]);else{const y=Tt(h),E=Ft(h);if(y||E){const S=()=>{if(t.f){const O=y?Me(_,h)?_[h]:p[h]:h.value;r?fe(O)&&Bg(O,o):fe(O)?O.includes(o)||O.push(o):y?(p[h]=[o],Me(_,h)&&(_[h]=p[h])):(h.value=[o],t.k&&(p[t.k]=h.value))}else y?(p[h]=l,Me(_,h)&&(_[h]=l)):E&&(h.value=l,t.k&&(p[t.k]=l))};l?(S.id=-1,gn(S,n)):S()}}}const gn=ik;function Lk(t){return Pk(t)}function Pk(t,e){const n=uP();n.__VUE__=!0;const{insert:i,remove:r,patchProp:o,createElement:l,createText:u,createComment:h,setText:d,setElementText:p,parentNode:_,nextSibling:y,setScopeId:E=fi,insertStaticContent:S}=t,O=(w,C,R,M=null,$=null,W=null,z=!1,K=null,j=!!C.dynamicChildren)=>{if(w===C)return;w&&!gs(w,C)&&(M=ei(w),Ct(w,$,W,!0),w=null),C.patchFlag===-2&&(j=!1,C.dynamicChildren=null);const{type:k,ref:te,shapeFlag:J}=C;switch(k){case Lh:L(w,C,R,M);break;case Gn:q(w,C,R,M);break;case wu:w==null&&oe(C,R,M,z);break;case Ot:rt(w,C,R,M,$,W,z,K,j);break;default:J&1?Q(w,C,R,M,$,W,z,K,j):J&6?ze(w,C,R,M,$,W,z,K,j):(J&64||J&128)&&k.process(w,C,R,M,$,W,z,K,j,qt)}te!=null&&$&&Hp(te,w&&w.ref,W,C||w,!C)},L=(w,C,R,M)=>{if(w==null)i(C.el=u(C.children),R,M);else{const $=C.el=w.el;C.children!==w.children&&d($,C.children)}},q=(w,C,R,M)=>{w==null?i(C.el=h(C.children||""),R,M):C.el=w.el},oe=(w,C,R,M)=>{[w.el,w.anchor]=S(w.children,C,R,M,w.el,w.anchor)},H=({el:w,anchor:C},R,M)=>{let $;for(;w&&w!==C;)$=y(w),i(w,R,M),w=$;i(C,R,M)},V=({el:w,anchor:C})=>{let R;for(;w&&w!==C;)R=y(w),r(w),w=R;r(C)},Q=(w,C,R,M,$,W,z,K,j)=>{z=z||C.type==="svg",w==null?B(C,R,M,$,W,z,K,j):de(w,C,$,W,z,K,j)},B=(w,C,R,M,$,W,z,K)=>{let j,k;const{type:te,props:J,shapeFlag:re,transition:ae,dirs:ye}=w;if(j=w.el=l(w.type,W,J&&J.is,J),re&8?p(j,w.children):re&16&&X(w.children,j,null,M,$,W&&te!=="foreignObject",z,K),ye&&cs(w,null,M,"created"),J){for(const Se in J)Se!=="value"&&!Eu(Se)&&o(j,Se,null,J[Se],W,w.children,M,$,mt);"value"in J&&o(j,"value",null,J.value),(k=J.onVnodeBeforeMount)&&Ti(k,M,w)}Z(j,w,w.scopeId,z,M),ye&&cs(w,null,M,"beforeMount");const Le=(!$||$&&!$.pendingBranch)&&ae&&!ae.persisted;Le&&ae.beforeEnter(j),i(j,C,R),((k=J&&J.onVnodeMounted)||Le||ye)&&gn(()=>{k&&Ti(k,M,w),Le&&ae.enter(j),ye&&cs(w,null,M,"mounted")},$)},Z=(w,C,R,M,$)=>{if(R&&E(w,R),M)for(let W=0;W<M.length;W++)E(w,M[W]);if($){let W=$.subTree;if(C===W){const z=$.vnode;Z(w,z,z.scopeId,z.slotScopeIds,$.parent)}}},X=(w,C,R,M,$,W,z,K,j=0)=>{for(let k=j;k<w.length;k++){const te=w[k]=K?Or(w[k]):Ci(w[k]);O(null,te,C,R,M,$,W,z,K)}},de=(w,C,R,M,$,W,z)=>{const K=C.el=w.el;let{patchFlag:j,dynamicChildren:k,dirs:te}=C;j|=w.patchFlag&16;const J=w.props||it,re=C.props||it;let ae;R&&us(R,!1),(ae=re.onVnodeBeforeUpdate)&&Ti(ae,R,C,w),te&&cs(C,w,R,"beforeUpdate"),R&&us(R,!0);const ye=$&&C.type!=="foreignObject";if(k?pe(w.dynamicChildren,k,K,R,M,ye,W):z||we(w,C,K,null,R,M,ye,W,!1),j>0){if(j&16)$e(K,C,J,re,R,M,$);else if(j&2&&J.class!==re.class&&o(K,"class",null,re.class,$),j&4&&o(K,"style",J.style,re.style,$),j&8){const Le=C.dynamicProps;for(let Se=0;Se<Le.length;Se++){const st=Le[Se],Jt=J[st],yi=re[st];(yi!==Jt||st==="value")&&o(K,st,Jt,yi,$,w.children,R,M,mt)}}j&1&&w.children!==C.children&&p(K,C.children)}else!z&&k==null&&$e(K,C,J,re,R,M,$);((ae=re.onVnodeUpdated)||te)&&gn(()=>{ae&&Ti(ae,R,C,w),te&&cs(C,w,R,"updated")},M)},pe=(w,C,R,M,$,W,z)=>{for(let K=0;K<C.length;K++){const j=w[K],k=C[K],te=j.el&&(j.type===Ot||!gs(j,k)||j.shapeFlag&70)?_(j.el):R;O(j,k,te,null,M,$,W,z,!0)}},$e=(w,C,R,M,$,W,z)=>{if(R!==M){if(R!==it)for(const K in R)!Eu(K)&&!(K in M)&&o(w,K,R[K],null,z,C.children,$,W,mt);for(const K in M){if(Eu(K))continue;const j=M[K],k=R[K];j!==k&&K!=="value"&&o(w,K,k,j,z,C.children,$,W,mt)}"value"in M&&o(w,"value",R.value,M.value)}},rt=(w,C,R,M,$,W,z,K,j)=>{const k=C.el=w?w.el:u(""),te=C.anchor=w?w.anchor:u("");let{patchFlag:J,dynamicChildren:re,slotScopeIds:ae}=C;ae&&(K=K?K.concat(ae):ae),w==null?(i(k,R,M),i(te,R,M),X(C.children,R,te,$,W,z,K,j)):J>0&&J&64&&re&&w.dynamicChildren?(pe(w.dynamicChildren,re,R,$,W,z,K),(C.key!=null||$&&C===$.subTree)&&qT(w,C,!0)):we(w,C,R,te,$,W,z,K,j)},ze=(w,C,R,M,$,W,z,K,j)=>{C.slotScopeIds=K,w==null?C.shapeFlag&512?$.ctx.activate(C,R,M,z,j):Vt(C,R,M,$,W,z,j):Ln(w,C,j)},Vt=(w,C,R,M,$,W,z)=>{const K=w.component=jk(w,M,$);if(Rh(w)&&(K.ctx.renderer=qt),qk(K),K.asyncDep){if($&&$.registerDep(K,Ue),!w.el){const j=K.subTree=ct(Gn);q(null,j,C,R)}return}Ue(K,w,C,R,$,W,z)},Ln=(w,C,R)=>{const M=C.component=w.component;if(ek(w,C,R))if(M.asyncDep&&!M.asyncResolved){ve(M,C,R);return}else M.next=C,zP(M.update),M.update();else C.el=w.el,M.vnode=C},Ue=(w,C,R,M,$,W,z)=>{const K=()=>{if(w.isMounted){let{next:te,bu:J,u:re,parent:ae,vnode:ye}=w,Le=te,Se;us(w,!1),te?(te.el=ye.el,ve(w,te,z)):te=ye,J&&bu(J),(Se=te.props&&te.props.onVnodeBeforeUpdate)&&Ti(Se,ae,te,ye),us(w,!0);const st=Ud(w),Jt=w.subTree;w.subTree=st,O(Jt,st,_(Jt.el),ei(Jt),w,$,W),te.el=st.el,Le===null&&tk(w,st.el),re&&gn(re,$),(Se=te.props&&te.props.onVnodeUpdated)&&gn(()=>Ti(Se,ae,te,ye),$)}else{let te;const{el:J,props:re}=C,{bm:ae,m:ye,parent:Le}=w,Se=Ka(C);if(us(w,!1),ae&&bu(ae),!Se&&(te=re&&re.onVnodeBeforeMount)&&Ti(te,Le,C),us(w,!0),J&&Pn){const st=()=>{w.subTree=Ud(w),Pn(J,w.subTree,w,$,null)};Se?C.type.__asyncLoader().then(()=>!w.isUnmounted&&st()):st()}else{const st=w.subTree=Ud(w);O(null,st,R,M,w,$,W),C.el=st.el}if(ye&&gn(ye,$),!Se&&(te=re&&re.onVnodeMounted)){const st=C;gn(()=>Ti(te,Le,st),$)}(C.shapeFlag&256||Le&&Ka(Le.vnode)&&Le.vnode.shapeFlag&256)&&w.a&&gn(w.a,$),w.isMounted=!0,C=R=M=null}},j=w.effect=new Vg(K,()=>Xg(k),w.scope),k=w.update=()=>j.run();k.id=w.uid,us(w,!0),k()},ve=(w,C,R)=>{C.component=w;const M=w.vnode.props;w.vnode=C,w.next=null,Sk(w,C.props,M,R),Rk(w,C.children,R),Zo(),TE(),ea()},we=(w,C,R,M,$,W,z,K,j=!1)=>{const k=w&&w.children,te=w?w.shapeFlag:0,J=C.children,{patchFlag:re,shapeFlag:ae}=C;if(re>0){if(re&128){cn(k,J,R,M,$,W,z,K,j);return}else if(re&256){Dt(k,J,R,M,$,W,z,K,j);return}}ae&8?(te&16&&mt(k,$,W),J!==k&&p(R,J)):te&16?ae&16?cn(k,J,R,M,$,W,z,K,j):mt(k,$,W,!0):(te&8&&p(R,""),ae&16&&X(J,R,M,$,W,z,K,j))},Dt=(w,C,R,M,$,W,z,K,j)=>{w=w||So,C=C||So;const k=w.length,te=C.length,J=Math.min(k,te);let re;for(re=0;re<J;re++){const ae=C[re]=j?Or(C[re]):Ci(C[re]);O(w[re],ae,R,null,$,W,z,K,j)}k>te?mt(w,$,W,!0,!1,J):X(C,R,M,$,W,z,K,j,J)},cn=(w,C,R,M,$,W,z,K,j)=>{let k=0;const te=C.length;let J=w.length-1,re=te-1;for(;k<=J&&k<=re;){const ae=w[k],ye=C[k]=j?Or(C[k]):Ci(C[k]);if(gs(ae,ye))O(ae,ye,R,null,$,W,z,K,j);else break;k++}for(;k<=J&&k<=re;){const ae=w[J],ye=C[re]=j?Or(C[re]):Ci(C[re]);if(gs(ae,ye))O(ae,ye,R,null,$,W,z,K,j);else break;J--,re--}if(k>J){if(k<=re){const ae=re+1,ye=ae<te?C[ae].el:M;for(;k<=re;)O(null,C[k]=j?Or(C[k]):Ci(C[k]),R,ye,$,W,z,K,j),k++}}else if(k>re)for(;k<=J;)Ct(w[k],$,W,!0),k++;else{const ae=k,ye=k,Le=new Map;for(k=ye;k<=re;k++){const Pt=C[k]=j?Or(C[k]):Ci(C[k]);Pt.key!=null&&Le.set(Pt.key,k)}let Se,st=0;const Jt=re-ye+1;let yi=!1,Xs=0;const Vi=new Array(Jt);for(k=0;k<Jt;k++)Vi[k]=0;for(k=ae;k<=J;k++){const Pt=w[k];if(st>=Jt){Ct(Pt,$,W,!0);continue}let un;if(Pt.key!=null)un=Le.get(Pt.key);else for(Se=ye;Se<=re;Se++)if(Vi[Se-ye]===0&&gs(Pt,C[Se])){un=Se;break}un===void 0?Ct(Pt,$,W,!0):(Vi[un-ye]=k+1,un>=Xs?Xs=un:yi=!0,O(Pt,C[un],R,null,$,W,z,K,j),st++)}const Qs=yi?kk(Vi):So;for(Se=Qs.length-1,k=Jt-1;k>=0;k--){const Pt=ye+k,un=C[Pt],Js=Pt+1<te?C[Pt+1].el:M;Vi[k]===0?O(null,un,R,Js,$,W,z,K,j):yi&&(Se<0||k!==Qs[Se]?ut(un,R,Js,2):Se--)}}},ut=(w,C,R,M,$=null)=>{const{el:W,type:z,transition:K,children:j,shapeFlag:k}=w;if(k&6){ut(w.component.subTree,C,R,M);return}if(k&128){w.suspense.move(C,R,M);return}if(k&64){z.move(w,C,R,qt);return}if(z===Ot){i(W,C,R);for(let J=0;J<j.length;J++)ut(j[J],C,R,M);i(w.anchor,C,R);return}if(z===wu){H(w,C,R);return}if(M!==2&&k&1&&K)if(M===0)K.beforeEnter(W),i(W,C,R),gn(()=>K.enter(W),$);else{const{leave:J,delayLeave:re,afterLeave:ae}=K,ye=()=>i(W,C,R),Le=()=>{J(W,()=>{ye(),ae&&ae()})};re?re(W,ye,Le):Le()}else i(W,C,R)},Ct=(w,C,R,M=!1,$=!1)=>{const{type:W,props:z,ref:K,children:j,dynamicChildren:k,shapeFlag:te,patchFlag:J,dirs:re}=w;if(K!=null&&Hp(K,null,R,w,!0),te&256){C.ctx.deactivate(w);return}const ae=te&1&&re,ye=!Ka(w);let Le;if(ye&&(Le=z&&z.onVnodeBeforeUnmount)&&Ti(Le,C,w),te&6)Lt(w.component,R,M);else{if(te&128){w.suspense.unmount(R,M);return}ae&&cs(w,null,C,"beforeUnmount"),te&64?w.type.remove(w,C,R,$,qt,M):k&&(W!==Ot||J>0&&J&64)?mt(k,C,R,!1,!0):(W===Ot&&J&384||!$&&te&16)&&mt(j,C,R),M&&Hi(w)}(ye&&(Le=z&&z.onVnodeUnmounted)||ae)&&gn(()=>{Le&&Ti(Le,C,w),ae&&cs(w,null,C,"unmounted")},R)},Hi=w=>{const{type:C,el:R,anchor:M,transition:$}=w;if(C===Ot){vi(R,M);return}if(C===wu){V(w);return}const W=()=>{r(R),$&&!$.persisted&&$.afterLeave&&$.afterLeave()};if(w.shapeFlag&1&&$&&!$.persisted){const{leave:z,delayLeave:K}=$,j=()=>z(R,W);K?K(w.el,W,j):j()}else W()},vi=(w,C)=>{let R;for(;w!==C;)R=y(w),r(w),w=R;r(C)},Lt=(w,C,R)=>{const{bum:M,scope:$,update:W,subTree:z,um:K}=w;M&&bu(M),$.stop(),W&&(W.active=!1,Ct(z,w,C,R)),K&&gn(K,C),gn(()=>{w.isUnmounted=!0},C),C&&C.pendingBranch&&!C.isUnmounted&&w.asyncDep&&!w.asyncResolved&&w.suspenseId===C.pendingId&&(C.deps--,C.deps===0&&C.resolve())},mt=(w,C,R,M=!1,$=!1,W=0)=>{for(let z=W;z<w.length;z++)Ct(w[z],C,R,M,$)},ei=w=>w.shapeFlag&6?ei(w.component.subTree):w.shapeFlag&128?w.suspense.next():y(w.anchor||w.el),jt=(w,C,R)=>{w==null?C._vnode&&Ct(C._vnode,null,null,!0):O(C._vnode||null,w,C,null,null,null,R),TE(),ST(),C._vnode=w},qt={p:O,um:Ct,m:ut,r:Hi,mt:Vt,mc:X,pc:we,pbc:pe,n:ei,o:t};let Zr,Pn;return e&&([Zr,Pn]=e(qt)),{render:jt,hydrate:Zr,createApp:Dk(jt,Zr)}}function us({effect:t,update:e},n){t.allowRecurse=e.allowRecurse=n}function qT(t,e,n=!1){const i=t.children,r=e.children;if(fe(i)&&fe(r))for(let o=0;o<i.length;o++){const l=i[o];let u=r[o];u.shapeFlag&1&&!u.dynamicChildren&&((u.patchFlag<=0||u.patchFlag===32)&&(u=r[o]=Or(r[o]),u.el=l.el),n||qT(l,u)),u.type===Lh&&(u.el=l.el)}}function kk(t){const e=t.slice(),n=[0];let i,r,o,l,u;const h=t.length;for(i=0;i<h;i++){const d=t[i];if(d!==0){if(r=n[n.length-1],t[r]<d){e[i]=r,n.push(i);continue}for(o=0,l=n.length-1;o<l;)u=o+l>>1,t[n[u]]<d?o=u+1:l=u;d<t[n[o]]&&(o>0&&(e[i]=n[o-1]),n[o]=i)}}for(o=n.length,l=n[o-1];o-- >0;)n[o]=l,l=e[l];return n}const Mk=t=>t.__isTeleport,Ot=Symbol(void 0),Lh=Symbol(void 0),Gn=Symbol(void 0),wu=Symbol(void 0),Ya=[];let ci=null;function Ve(t=!1){Ya.push(ci=t?null:[])}function $k(){Ya.pop(),ci=Ya[Ya.length-1]||null}let hl=1;function PE(t){hl+=t}function KT(t){return t.dynamicChildren=hl>0?ci||So:null,$k(),hl>0&&ci&&ci.push(t),t}function Je(t,e,n,i,r,o){return KT(be(t,e,n,i,r,o,!0))}function Pu(t,e,n,i,r){return KT(ct(t,e,n,i,r,!0))}function ku(t){return t?t.__v_isVNode===!0:!1}function gs(t,e){return t.type===e.type&&t.key===e.key}const Ph="__vInternal",GT=({key:t})=>t??null,Tu=({ref:t,ref_key:e,ref_for:n})=>t!=null?Tt(t)||Ft(t)||Ie(t)?{i:Ut,r:t,k:e,f:!!n}:t:null;function be(t,e=null,n=null,i=0,r=null,o=t===Ot?0:1,l=!1,u=!1){const h={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&GT(e),ref:e&&Tu(e),scopeId:Sh,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:o,patchFlag:i,dynamicProps:r,dynamicChildren:null,appContext:null,ctx:Ut};return u?(e_(h,n),o&128&&t.normalize(h)):n&&(h.shapeFlag|=Tt(n)?8:16),hl>0&&!l&&ci&&(h.patchFlag>0||o&6)&&h.patchFlag!==32&&ci.push(h),h}const ct=Fk;function Fk(t,e=null,n=null,i=0,r=null,o=!1){if((!t||t===mk)&&(t=Gn),ku(t)){const u=Hr(t,e,!0);return n&&e_(u,n),hl>0&&!o&&ci&&(u.shapeFlag&6?ci[ci.indexOf(t)]=u:ci.push(u)),u.patchFlag|=-2,u}if(Xk(t)&&(t=t.__vccOpts),e){e=Uk(e);let{class:u,style:h}=e;u&&!Tt(u)&&(e.class=xl(u)),tt(h)&&(vT(h)&&!fe(h)&&(h=Qt({},h)),e.style=Fg(h))}const l=Tt(t)?1:nk(t)?128:Mk(t)?64:tt(t)?4:Ie(t)?2:0;return be(t,e,n,i,r,l,o,!0)}function Uk(t){return t?vT(t)||Ph in t?Qt({},t):t:null}function Hr(t,e,n=!1){const{props:i,ref:r,patchFlag:o,children:l}=t,u=e?Wk(i||{},e):i;return{__v_isVNode:!0,__v_skip:!0,type:t.type,props:u,key:u&&GT(u),ref:e&&e.ref?n&&r?fe(r)?r.concat(Tu(e)):[r,Tu(e)]:Tu(e):r,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:l,target:t.target,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==Ot?o===-1?16:o|16:o,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:t.transition,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&Hr(t.ssContent),ssFallback:t.ssFallback&&Hr(t.ssFallback),el:t.el,anchor:t.anchor,ctx:t.ctx}}function Vp(t=" ",e=0){return ct(Lh,null,t,e)}function Bk(t,e){const n=ct(wu,null,t);return n.staticCount=e,n}function An(t="",e=!1){return e?(Ve(),Pu(Gn,null,t)):ct(Gn,null,t)}function Ci(t){return t==null||typeof t=="boolean"?ct(Gn):fe(t)?ct(Ot,null,t.slice()):typeof t=="object"?Or(t):ct(Lh,null,String(t))}function Or(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:Hr(t)}function e_(t,e){let n=0;const{shapeFlag:i}=t;if(e==null)e=null;else if(fe(e))n=16;else if(typeof e=="object")if(i&65){const r=e.default;r&&(r._c&&(r._d=!1),e_(t,r()),r._c&&(r._d=!0));return}else{n=32;const r=e._;!r&&!(Ph in e)?e._ctx=Ut:r===3&&Ut&&(Ut.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else Ie(e)?(e={default:e,_ctx:Ut},n=32):(e=String(e),i&64?(n=16,e=[Vp(e)]):n=8);t.children=e,t.shapeFlag|=n}function Wk(...t){const e={};for(let n=0;n<t.length;n++){const i=t[n];for(const r in i)if(r==="class")e.class!==i.class&&(e.class=xl([e.class,i.class]));else if(r==="style")e.style=Fg([e.style,i.style]);else if(Eh(r)){const o=e[r],l=i[r];l&&o!==l&&!(fe(o)&&o.includes(l))&&(e[r]=o?[].concat(o,l):l)}else r!==""&&(e[r]=i[r])}return e}function Ti(t,e,n,i=null){Kn(t,e,7,[n,i])}const Hk=jT();let Vk=0;function jk(t,e,n){const i=t.type,r=(e?e.appContext:t.appContext)||Hk,o={uid:Vk++,vnode:t,type:i,parent:e,appContext:r,root:null,next:null,subTree:null,effect:null,update:null,scope:new hP(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(r.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:BT(i,r),emitsOptions:NT(i,r),emit:null,emitted:null,propsDefaults:it,inheritAttrs:i.inheritAttrs,ctx:it,data:it,props:it,attrs:it,slots:it,refs:it,setupState:it,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return o.ctx={_:o},o.root=e?e.root:o,o.emit=QP.bind(null,o),t.ce&&t.ce(o),o}let Nt=null;const kh=()=>Nt||Ut,Fo=t=>{Nt=t,t.scope.on()},Ss=()=>{Nt&&Nt.scope.off(),Nt=null};function zT(t){return t.vnode.shapeFlag&4}let fl=!1;function qk(t,e=!1){fl=e;const{props:n,children:i}=t.vnode,r=zT(t);Ak(t,n,r,e),Nk(t,i);const o=r?Kk(t,e):void 0;return fl=!1,o}function Kk(t,e){const n=t.type;t.accessCache=Object.create(null),t.proxy=yT(new Proxy(t.ctx,Ek));const{setup:i}=n;if(i){const r=t.setupContext=i.length>1?zk(t):null;Fo(t),Zo();const o=Pr(i,t,0,[t.props,r]);if(ea(),Ss(),rT(o)){if(o.then(Ss,Ss),e)return o.then(l=>{kE(t,l,e)}).catch(l=>{Ih(l,t,0)});t.asyncDep=o}else kE(t,o,e)}else YT(t,e)}function kE(t,e,n){Ie(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:tt(e)&&(t.setupState=TT(e)),YT(t,n)}let ME;function YT(t,e,n){const i=t.type;if(!t.render){if(!e&&ME&&!i.render){const r=i.template||Jg(t).template;if(r){const{isCustomElement:o,compilerOptions:l}=t.appContext.config,{delimiters:u,compilerOptions:h}=i,d=Qt(Qt({isCustomElement:o,delimiters:u},l),h);i.render=ME(r,d)}}t.render=i.render||fi}Fo(t),Zo(),bk(t),ea(),Ss()}function Gk(t){return new Proxy(t.attrs,{get(e,n){return Rn(t,"get","$attrs"),e[n]}})}function zk(t){const e=i=>{t.exposed=i||{}};let n;return{get attrs(){return n||(n=Gk(t))},slots:t.slots,emit:t.emit,expose:e}}function Mh(t){if(t.exposed)return t.exposeProxy||(t.exposeProxy=new Proxy(TT(yT(t.exposed)),{get(e,n){if(n in e)return e[n];if(n in za)return za[n](t)},has(e,n){return n in e||n in za}}))}function Yk(t,e=!0){return Ie(t)?t.displayName||t.name:t.name||e&&t.__name}function Xk(t){return Ie(t)&&"__vccOpts"in t}const jp=(t,e)=>qP(t,e,fl);function t_(t,e,n){const i=arguments.length;return i===2?tt(e)&&!fe(e)?ku(e)?ct(t,null,[e]):ct(t,e):ct(t,null,e):(i>3?n=Array.prototype.slice.call(arguments,2):i===3&&ku(n)&&(n=[n]),ct(t,e,n))}const XT=Symbol(""),Qk=()=>wt(XT),Jk="3.2.45",Zk="http://www.w3.org/2000/svg",_s=typeof document<"u"?document:null,$E=_s&&_s.createElement("template"),eM={insert:(t,e,n)=>{e.insertBefore(t,n||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,n,i)=>{const r=e?_s.createElementNS(Zk,t):_s.createElement(t,n?{is:n}:void 0);return t==="select"&&i&&i.multiple!=null&&r.setAttribute("multiple",i.multiple),r},createText:t=>_s.createTextNode(t),createComment:t=>_s.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>_s.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,n,i,r,o){const l=n?n.previousSibling:e.lastChild;if(r&&(r===o||r.nextSibling))for(;e.insertBefore(r.cloneNode(!0),n),!(r===o||!(r=r.nextSibling)););else{$E.innerHTML=i?`<svg>${t}</svg>`:t;const u=$E.content;if(i){const h=u.firstChild;for(;h.firstChild;)u.appendChild(h.firstChild);u.removeChild(h)}e.insertBefore(u,n)}return[l?l.nextSibling:e.firstChild,n?n.previousSibling:e.lastChild]}};function tM(t,e,n){const i=t._vtc;i&&(e=(e?[e,...i]:[...i]).join(" ")),e==null?t.removeAttribute("class"):n?t.setAttribute("class",e):t.className=e}function nM(t,e,n){const i=t.style,r=Tt(n);if(n&&!r){for(const o in n)qp(i,o,n[o]);if(e&&!Tt(e))for(const o in e)n[o]==null&&qp(i,o,"")}else{const o=i.display;r?e!==n&&(i.cssText=n):e&&t.removeAttribute("style"),"_vod"in t&&(i.display=o)}}const FE=/\s*!important$/;function qp(t,e,n){if(fe(n))n.forEach(i=>qp(t,e,i));else if(n==null&&(n=""),e.startsWith("--"))t.setProperty(e,n);else{const i=iM(t,e);FE.test(n)?t.setProperty(Jo(i),n.replace(FE,""),"important"):t[i]=n}}const UE=["Webkit","Moz","ms"],Hd={};function iM(t,e){const n=Hd[e];if(n)return n;let i=Li(e);if(i!=="filter"&&i in t)return Hd[e]=i;i=Th(i);for(let r=0;r<UE.length;r++){const o=UE[r]+i;if(o in t)return Hd[e]=o}return e}const BE="http://www.w3.org/1999/xlink";function rM(t,e,n,i,r){if(i&&e.startsWith("xlink:"))n==null?t.removeAttributeNS(BE,e.slice(6,e.length)):t.setAttributeNS(BE,e,n);else{const o=nP(e);n==null||o&&!tT(n)?t.removeAttribute(e):t.setAttribute(e,o?"":n)}}function sM(t,e,n,i,r,o,l){if(e==="innerHTML"||e==="textContent"){i&&l(i,r,o),t[e]=n??"";return}if(e==="value"&&t.tagName!=="PROGRESS"&&!t.tagName.includes("-")){t._value=n;const h=n??"";(t.value!==h||t.tagName==="OPTION")&&(t.value=h),n==null&&t.removeAttribute(e);return}let u=!1;if(n===""||n==null){const h=typeof t[e];h==="boolean"?n=tT(n):n==null&&h==="string"?(n="",u=!0):h==="number"&&(n=0,u=!0)}try{t[e]=n}catch{}u&&t.removeAttribute(e)}function ms(t,e,n,i){t.addEventListener(e,n,i)}function oM(t,e,n,i){t.removeEventListener(e,n,i)}function aM(t,e,n,i,r=null){const o=t._vei||(t._vei={}),l=o[e];if(i&&l)l.value=i;else{const[u,h]=lM(e);if(i){const d=o[e]=hM(i,r);ms(t,u,d,h)}else l&&(oM(t,u,l,h),o[e]=void 0)}}const WE=/(?:Once|Passive|Capture)$/;function lM(t){let e;if(WE.test(t)){e={};let i;for(;i=t.match(WE);)t=t.slice(0,t.length-i[0].length),e[i[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):Jo(t.slice(2)),e]}let Vd=0;const cM=Promise.resolve(),uM=()=>Vd||(cM.then(()=>Vd=0),Vd=Date.now());function hM(t,e){const n=i=>{if(!i._vts)i._vts=Date.now();else if(i._vts<=n.attached)return;Kn(fM(i,n.value),e,5,[i])};return n.value=t,n.attached=uM(),n}function fM(t,e){if(fe(e)){const n=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{n.call(t),t._stopped=!0},e.map(i=>r=>!r._stopped&&i&&i(r))}else return e}const HE=/^on[a-z]/,dM=(t,e,n,i,r=!1,o,l,u,h)=>{e==="class"?tM(t,i,r):e==="style"?nM(t,n,i):Eh(e)?Ug(e)||aM(t,e,n,i,l):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):pM(t,e,i,r))?sM(t,e,i,o,l,u,h):(e==="true-value"?t._trueValue=i:e==="false-value"&&(t._falseValue=i),rM(t,e,i,r))};function pM(t,e,n,i){return i?!!(e==="innerHTML"||e==="textContent"||e in t&&HE.test(e)&&Ie(n)):e==="spellcheck"||e==="draggable"||e==="translate"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA"||HE.test(e)&&Tt(n)?!1:e in t}const gM={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String};ak.props;const Mu=t=>{const e=t.props["onUpdate:modelValue"]||!1;return fe(e)?n=>bu(e,n):e};function _M(t){t.target.composing=!0}function VE(t){const e=t.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const mM={created(t,{modifiers:{lazy:e,trim:n,number:i}},r){t._assign=Mu(r);const o=i||r.props&&r.props.type==="number";ms(t,e?"change":"input",l=>{if(l.target.composing)return;let u=t.value;n&&(u=u.trim()),o&&(u=Ru(u)),t._assign(u)}),n&&ms(t,"change",()=>{t.value=t.value.trim()}),e||(ms(t,"compositionstart",_M),ms(t,"compositionend",VE),ms(t,"change",VE))},mounted(t,{value:e}){t.value=e??""},beforeUpdate(t,{value:e,modifiers:{lazy:n,trim:i,number:r}},o){if(t._assign=Mu(o),t.composing||document.activeElement===t&&t.type!=="range"&&(n||i&&t.value.trim()===e||(r||t.type==="number")&&Ru(t.value)===e))return;const l=e??"";t.value!==l&&(t.value=l)}},vM={deep:!0,created(t,e,n){t._assign=Mu(n),ms(t,"change",()=>{const i=t._modelValue,r=yM(t),o=t.checked,l=t._assign;if(fe(i)){const u=nT(i,r),h=u!==-1;if(o&&!h)l(i.concat(r));else if(!o&&h){const d=[...i];d.splice(u,1),l(d)}}else if(bh(i)){const u=new Set(i);o?u.add(r):u.delete(r),l(u)}else l(QT(t,o))})},mounted:jE,beforeUpdate(t,e,n){t._assign=Mu(n),jE(t,e,n)}};function jE(t,{value:e,oldValue:n},i){t._modelValue=e,fe(e)?t.checked=nT(e,i.props.value)>-1:bh(e)?t.checked=e.has(i.props.value):e!==n&&(t.checked=yh(e,QT(t,!0)))}function yM(t){return"_value"in t?t._value:t.value}function QT(t,e){const n=e?"_trueValue":"_falseValue";return n in t?t[n]:e}const EM=Qt({patchProp:dM},eM);let qE;function bM(){return qE||(qE=Lk(EM))}const wM=(...t)=>{const e=bM().createApp(...t),{mount:n}=e;return e.mount=i=>{const r=TM(i);if(!r)return;const o=e._component;!Ie(o)&&!o.render&&!o.template&&(o.template=r.innerHTML),r.innerHTML="";const l=n(r,!1,r instanceof SVGElement);return r instanceof Element&&(r.removeAttribute("v-cloak"),r.setAttribute("data-v-app","")),l},e};function TM(t){return Tt(t)?document.querySelector(t):t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JT={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G=function(t,e){if(!t)throw ta(e)},ta=function(t){return new Error("Firebase Database ("+JT.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZT=function(t){const e=[];let n=0;for(let i=0;i<t.length;i++){let r=t.charCodeAt(i);r<128?e[n++]=r:r<2048?(e[n++]=r>>6|192,e[n++]=r&63|128):(r&64512)===55296&&i+1<t.length&&(t.charCodeAt(i+1)&64512)===56320?(r=65536+((r&1023)<<10)+(t.charCodeAt(++i)&1023),e[n++]=r>>18|240,e[n++]=r>>12&63|128,e[n++]=r>>6&63|128,e[n++]=r&63|128):(e[n++]=r>>12|224,e[n++]=r>>6&63|128,e[n++]=r&63|128)}return e},CM=function(t){const e=[];let n=0,i=0;for(;n<t.length;){const r=t[n++];if(r<128)e[i++]=String.fromCharCode(r);else if(r>191&&r<224){const o=t[n++];e[i++]=String.fromCharCode((r&31)<<6|o&63)}else if(r>239&&r<365){const o=t[n++],l=t[n++],u=t[n++],h=((r&7)<<18|(o&63)<<12|(l&63)<<6|u&63)-65536;e[i++]=String.fromCharCode(55296+(h>>10)),e[i++]=String.fromCharCode(56320+(h&1023))}else{const o=t[n++],l=t[n++];e[i++]=String.fromCharCode((r&15)<<12|(o&63)<<6|l&63)}}return e.join("")},$h={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let r=0;r<t.length;r+=3){const o=t[r],l=r+1<t.length,u=l?t[r+1]:0,h=r+2<t.length,d=h?t[r+2]:0,p=o>>2,_=(o&3)<<4|u>>4;let y=(u&15)<<2|d>>6,E=d&63;h||(E=64,l||(y=64)),i.push(n[p],n[_],n[y],n[E])}return i.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(ZT(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):CM(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let r=0;r<t.length;){const o=n[t.charAt(r++)],u=r<t.length?n[t.charAt(r)]:0;++r;const d=r<t.length?n[t.charAt(r)]:64;++r;const _=r<t.length?n[t.charAt(r)]:64;if(++r,o==null||u==null||d==null||_==null)throw Error();const y=o<<2|u>>4;if(i.push(y),d!==64){const E=u<<4&240|d>>2;if(i.push(E),_!==64){const S=d<<6&192|_;i.push(S)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},eC=function(t){const e=ZT(t);return $h.encodeByteArray(e,!0)},$u=function(t){return eC(t).replace(/\./g,"")},Fu=function(t){try{return $h.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IM(t){return tC(void 0,t)}function tC(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(const n in e)!e.hasOwnProperty(n)||!AM(n)||(t[n]=tC(t[n],e[n]));return t}function AM(t){return t!=="__proto__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pi(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function n_(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Pi())}function SM(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function nC(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function iC(){return JT.NODE_ADMIN===!0}function rC(){try{return typeof indexedDB=="object"}catch{return!1}}function OM(){return new Promise((t,e)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(i);r.onsuccess=()=>{r.result.close(),n||self.indexedDB.deleteDatabase(i),t(!0)},r.onupgradeneeded=()=>{n=!1},r.onerror=()=>{var o;e(((o=r.error)===null||o===void 0?void 0:o.message)||"")}}catch(n){e(n)}})}function NM(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RM=()=>NM().__FIREBASE_DEFAULTS__,xM=()=>{if(typeof process>"u"||typeof process.env>"u")return;const t={}.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},DM=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&Fu(t[1]);return e&&JSON.parse(e)},i_=()=>{try{return RM()||xM()||DM()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},LM=t=>{var e,n;return(n=(e=i_())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},PM=t=>{const e=LM(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),i]:[e.substring(0,n),i]},kM=()=>{var t;return(t=i_())===null||t===void 0?void 0:t.config},MM=t=>{var e;return(e=i_())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ps{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,i)=>{n?this.reject(n):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,i))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $M(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},i=e||"demo-project",r=t.iat||0,o=t.sub||t.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const l=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:r,exp:r+3600,auth_time:r,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},t),u="";return[$u(JSON.stringify(n)),$u(JSON.stringify(l)),u].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FM="FirebaseError";class pr extends Error{constructor(e,n,i){super(n),this.code=e,this.customData=i,this.name=FM,Object.setPrototypeOf(this,pr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,na.prototype.create)}}class na{constructor(e,n,i){this.service=e,this.serviceName=n,this.errors=i}create(e,...n){const i=n[0]||{},r=`${this.service}/${e}`,o=this.errors[e],l=o?UM(o,i):"Error",u=`${this.serviceName}: ${l} (${r}).`;return new pr(r,u,i)}}function UM(t,e){return t.replace(BM,(n,i)=>{const r=e[i];return r!=null?String(r):`<${i}?>`})}const BM=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dl(t){return JSON.parse(t)}function bt(t){return JSON.stringify(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sC=function(t){let e={},n={},i={},r="";try{const o=t.split(".");e=dl(Fu(o[0])||""),n=dl(Fu(o[1])||""),r=o[2],i=n.d||{},delete n.d}catch{}return{header:e,claims:n,data:i,signature:r}},WM=function(t){const e=sC(t),n=e.claims;return!!n&&typeof n=="object"&&n.hasOwnProperty("iat")},HM=function(t){const e=sC(t).claims;return typeof e=="object"&&e.admin===!0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fi(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function Uo(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]}function KE(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Uu(t,e,n){const i={};for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&(i[r]=e.call(n,t[r],r,t));return i}function Kp(t,e){if(t===e)return!0;const n=Object.keys(t),i=Object.keys(e);for(const r of n){if(!i.includes(r))return!1;const o=t[r],l=e[r];if(GE(o)&&GE(l)){if(!Kp(o,l))return!1}else if(o!==l)return!1}for(const r of i)if(!n.includes(r))return!1;return!0}function GE(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function r_(t){const e=[];for(const[n,i]of Object.entries(t))Array.isArray(i)?i.forEach(r=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(r))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VM{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,n){n||(n=0);const i=this.W_;if(typeof e=="string")for(let _=0;_<16;_++)i[_]=e.charCodeAt(n)<<24|e.charCodeAt(n+1)<<16|e.charCodeAt(n+2)<<8|e.charCodeAt(n+3),n+=4;else for(let _=0;_<16;_++)i[_]=e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3],n+=4;for(let _=16;_<80;_++){const y=i[_-3]^i[_-8]^i[_-14]^i[_-16];i[_]=(y<<1|y>>>31)&4294967295}let r=this.chain_[0],o=this.chain_[1],l=this.chain_[2],u=this.chain_[3],h=this.chain_[4],d,p;for(let _=0;_<80;_++){_<40?_<20?(d=u^o&(l^u),p=1518500249):(d=o^l^u,p=1859775393):_<60?(d=o&l|u&(o|l),p=2400959708):(d=o^l^u,p=3395469782);const y=(r<<5|r>>>27)+d+h+p+i[_]&4294967295;h=u,u=l,l=(o<<30|o>>>2)&4294967295,o=r,r=y}this.chain_[0]=this.chain_[0]+r&4294967295,this.chain_[1]=this.chain_[1]+o&4294967295,this.chain_[2]=this.chain_[2]+l&4294967295,this.chain_[3]=this.chain_[3]+u&4294967295,this.chain_[4]=this.chain_[4]+h&4294967295}update(e,n){if(e==null)return;n===void 0&&(n=e.length);const i=n-this.blockSize;let r=0;const o=this.buf_;let l=this.inbuf_;for(;r<n;){if(l===0)for(;r<=i;)this.compress_(e,r),r+=this.blockSize;if(typeof e=="string"){for(;r<n;)if(o[l]=e.charCodeAt(r),++l,++r,l===this.blockSize){this.compress_(o),l=0;break}}else for(;r<n;)if(o[l]=e[r],++l,++r,l===this.blockSize){this.compress_(o),l=0;break}}this.inbuf_=l,this.total_+=n}digest(){const e=[];let n=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let r=this.blockSize-1;r>=56;r--)this.buf_[r]=n&255,n/=256;this.compress_(this.buf_);let i=0;for(let r=0;r<5;r++)for(let o=24;o>=0;o-=8)e[i]=this.chain_[r]>>o&255,++i;return e}}function jM(t,e){const n=new qM(t,e);return n.subscribe.bind(n)}class qM{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,i){let r;if(e===void 0&&n===void 0&&i===void 0)throw new Error("Missing Observer.");KM(e,["next","error","complete"])?r=e:r={next:e,error:n,complete:i},r.next===void 0&&(r.next=jd),r.error===void 0&&(r.error=jd),r.complete===void 0&&(r.complete=jd);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function KM(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function jd(){}function Fh(t,e){return`${t} failed: ${e} argument `}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GM=function(t){const e=[];let n=0;for(let i=0;i<t.length;i++){let r=t.charCodeAt(i);if(r>=55296&&r<=56319){const o=r-55296;i++,G(i<t.length,"Surrogate pair missing trail surrogate.");const l=t.charCodeAt(i)-56320;r=65536+(o<<10)+l}r<128?e[n++]=r:r<2048?(e[n++]=r>>6|192,e[n++]=r&63|128):r<65536?(e[n++]=r>>12|224,e[n++]=r>>6&63|128,e[n++]=r&63|128):(e[n++]=r>>18|240,e[n++]=r>>12&63|128,e[n++]=r>>6&63|128,e[n++]=r&63|128)}return e},Uh=function(t){let e=0;for(let n=0;n<t.length;n++){const i=t.charCodeAt(n);i<128?e++:i<2048?e+=2:i>=55296&&i<=56319?(e+=4,n++):e+=3}return e};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ui(t){return t&&t._delegate?t._delegate:t}class pi{constructor(e,n,i){this.name=e,this.instanceFactory=n,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fs="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zM{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const i=new Ps;if(this.instancesDeferred.set(n,i),this.isInitialized(n)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:n});r&&i.resolve(r)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const i=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(o){if(r)return null;throw o}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(XM(e))try{this.getOrInitializeService({instanceIdentifier:fs})}catch{}for(const[n,i]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(n);try{const o=this.getOrInitializeService({instanceIdentifier:r});i.resolve(o)}catch{}}}}clearInstance(e=fs){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=fs){return this.instances.has(e)}getOptions(e=fs){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:i,options:n});for(const[o,l]of this.instancesDeferred.entries()){const u=this.normalizeInstanceIdentifier(o);i===u&&l.resolve(r)}return r}onInit(e,n){var i;const r=this.normalizeInstanceIdentifier(n),o=(i=this.onInitCallbacks.get(r))!==null&&i!==void 0?i:new Set;o.add(e),this.onInitCallbacks.set(r,o);const l=this.instances.get(r);return l&&e(l,r),()=>{o.delete(e)}}invokeOnInitCallbacks(e,n){const i=this.onInitCallbacks.get(n);if(i)for(const r of i)try{r(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:YM(e),options:n}),this.instances.set(e,i),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=fs){return this.component?this.component.multipleInstances?e:fs:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function YM(t){return t===fs?void 0:t}function XM(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QM{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new zM(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ke;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Ke||(Ke={}));const JM={debug:Ke.DEBUG,verbose:Ke.VERBOSE,info:Ke.INFO,warn:Ke.WARN,error:Ke.ERROR,silent:Ke.SILENT},ZM=Ke.INFO,e$={[Ke.DEBUG]:"log",[Ke.VERBOSE]:"log",[Ke.INFO]:"info",[Ke.WARN]:"warn",[Ke.ERROR]:"error"},t$=(t,e,...n)=>{if(e<t.logLevel)return;const i=new Date().toISOString(),r=e$[e];if(r)console[r](`[${i}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Pl{constructor(e){this.name=e,this._logLevel=ZM,this._logHandler=t$,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ke))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?JM[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ke.DEBUG,...e),this._logHandler(this,Ke.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ke.VERBOSE,...e),this._logHandler(this,Ke.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ke.INFO,...e),this._logHandler(this,Ke.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ke.WARN,...e),this._logHandler(this,Ke.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ke.ERROR,...e),this._logHandler(this,Ke.ERROR,...e)}}const n$=(t,e)=>e.some(n=>t instanceof n);let zE,YE;function i$(){return zE||(zE=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function r$(){return YE||(YE=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const oC=new WeakMap,Gp=new WeakMap,aC=new WeakMap,qd=new WeakMap,s_=new WeakMap;function s$(t){const e=new Promise((n,i)=>{const r=()=>{t.removeEventListener("success",o),t.removeEventListener("error",l)},o=()=>{n(Mr(t.result)),r()},l=()=>{i(t.error),r()};t.addEventListener("success",o),t.addEventListener("error",l)});return e.then(n=>{n instanceof IDBCursor&&oC.set(n,t)}).catch(()=>{}),s_.set(e,t),e}function o$(t){if(Gp.has(t))return;const e=new Promise((n,i)=>{const r=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",l),t.removeEventListener("abort",l)},o=()=>{n(),r()},l=()=>{i(t.error||new DOMException("AbortError","AbortError")),r()};t.addEventListener("complete",o),t.addEventListener("error",l),t.addEventListener("abort",l)});Gp.set(t,e)}let zp={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Gp.get(t);if(e==="objectStoreNames")return t.objectStoreNames||aC.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Mr(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function a$(t){zp=t(zp)}function l$(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const i=t.call(Kd(this),e,...n);return aC.set(i,e.sort?e.sort():[e]),Mr(i)}:r$().includes(t)?function(...e){return t.apply(Kd(this),e),Mr(oC.get(this))}:function(...e){return Mr(t.apply(Kd(this),e))}}function c$(t){return typeof t=="function"?l$(t):(t instanceof IDBTransaction&&o$(t),n$(t,i$())?new Proxy(t,zp):t)}function Mr(t){if(t instanceof IDBRequest)return s$(t);if(qd.has(t))return qd.get(t);const e=c$(t);return e!==t&&(qd.set(t,e),s_.set(e,t)),e}const Kd=t=>s_.get(t);function u$(t,e,{blocked:n,upgrade:i,blocking:r,terminated:o}={}){const l=indexedDB.open(t,e),u=Mr(l);return i&&l.addEventListener("upgradeneeded",h=>{i(Mr(l.result),h.oldVersion,h.newVersion,Mr(l.transaction))}),n&&l.addEventListener("blocked",()=>n()),u.then(h=>{o&&h.addEventListener("close",()=>o()),r&&h.addEventListener("versionchange",()=>r())}).catch(()=>{}),u}const h$=["get","getKey","getAll","getAllKeys","count"],f$=["put","add","delete","clear"],Gd=new Map;function XE(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Gd.get(e))return Gd.get(e);const n=e.replace(/FromIndex$/,""),i=e!==n,r=f$.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!(r||h$.includes(n)))return;const o=async function(l,...u){const h=this.transaction(l,r?"readwrite":"readonly");let d=h.store;return i&&(d=d.index(u.shift())),(await Promise.all([d[n](...u),r&&h.done]))[0]};return Gd.set(e,o),o}a$(t=>({...t,get:(e,n,i)=>XE(e,n)||t.get(e,n,i),has:(e,n)=>!!XE(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d${constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(p$(n)){const i=n.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(n=>n).join(" ")}}function p$(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Yp="@firebase/app",QE="0.9.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ks=new Pl("@firebase/app"),g$="@firebase/app-compat",_$="@firebase/analytics-compat",m$="@firebase/analytics",v$="@firebase/app-check-compat",y$="@firebase/app-check",E$="@firebase/auth",b$="@firebase/auth-compat",w$="@firebase/database",T$="@firebase/database-compat",C$="@firebase/functions",I$="@firebase/functions-compat",A$="@firebase/installations",S$="@firebase/installations-compat",O$="@firebase/messaging",N$="@firebase/messaging-compat",R$="@firebase/performance",x$="@firebase/performance-compat",D$="@firebase/remote-config",L$="@firebase/remote-config-compat",P$="@firebase/storage",k$="@firebase/storage-compat",M$="@firebase/firestore",$$="@firebase/firestore-compat",F$="firebase",U$="9.15.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xp="[DEFAULT]",B$={[Yp]:"fire-core",[g$]:"fire-core-compat",[m$]:"fire-analytics",[_$]:"fire-analytics-compat",[y$]:"fire-app-check",[v$]:"fire-app-check-compat",[E$]:"fire-auth",[b$]:"fire-auth-compat",[w$]:"fire-rtdb",[T$]:"fire-rtdb-compat",[C$]:"fire-fn",[I$]:"fire-fn-compat",[A$]:"fire-iid",[S$]:"fire-iid-compat",[O$]:"fire-fcm",[N$]:"fire-fcm-compat",[R$]:"fire-perf",[x$]:"fire-perf-compat",[D$]:"fire-rc",[L$]:"fire-rc-compat",[P$]:"fire-gcs",[k$]:"fire-gcs-compat",[M$]:"fire-fst",[$$]:"fire-fst-compat","fire-js":"fire-js",[F$]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bu=new Map,Qp=new Map;function W$(t,e){try{t.container.addComponent(e)}catch(n){ks.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function ki(t){const e=t.name;if(Qp.has(e))return ks.debug(`There were multiple attempts to register component ${e}.`),!1;Qp.set(e,t);for(const n of Bu.values())W$(n,t);return!0}function H$(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V$={["no-app"]:"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",["bad-app-name"]:"Illegal App name: '{$appName}",["duplicate-app"]:"Firebase App named '{$appName}' already exists with different options or config",["app-deleted"]:"Firebase App named '{$appName}' already deleted",["no-options"]:"Need to provide options, when not being deployed to hosting via source.",["invalid-app-argument"]:"firebase.{$appName}() takes either no argument or a Firebase App instance.",["invalid-log-argument"]:"First argument to `onLog` must be null or a function.",["idb-open"]:"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.",["idb-get"]:"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.",["idb-set"]:"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.",["idb-delete"]:"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."},$r=new na("app","Firebase",V$);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j${constructor(e,n,i){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new pi("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw $r.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kl=U$;function o_(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const i=Object.assign({name:Xp,automaticDataCollectionEnabled:!1},e),r=i.name;if(typeof r!="string"||!r)throw $r.create("bad-app-name",{appName:String(r)});if(n||(n=kM()),!n)throw $r.create("no-options");const o=Bu.get(r);if(o){if(Kp(n,o.options)&&Kp(i,o.config))return o;throw $r.create("duplicate-app",{appName:r})}const l=new QM(r);for(const h of Qp.values())l.addComponent(h);const u=new j$(n,i,l);return Bu.set(r,u),u}function lC(t=Xp){const e=Bu.get(t);if(!e&&t===Xp)return o_();if(!e)throw $r.create("no-app",{appName:t});return e}function Nn(t,e,n){var i;let r=(i=B$[t])!==null&&i!==void 0?i:t;n&&(r+=`-${n}`);const o=r.match(/\s|\//),l=e.match(/\s|\//);if(o||l){const u=[`Unable to register library "${r}" with version "${e}":`];o&&u.push(`library name "${r}" contains illegal characters (whitespace or "/")`),o&&l&&u.push("and"),l&&u.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ks.warn(u.join(" "));return}ki(new pi(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q$="firebase-heartbeat-database",K$=1,pl="firebase-heartbeat-store";let zd=null;function cC(){return zd||(zd=u$(q$,K$,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(pl)}}}).catch(t=>{throw $r.create("idb-open",{originalErrorMessage:t.message})})),zd}async function G$(t){try{return(await cC()).transaction(pl).objectStore(pl).get(uC(t))}catch(e){if(e instanceof pr)ks.warn(e.message);else{const n=$r.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});ks.warn(n.message)}}}async function JE(t,e){try{const i=(await cC()).transaction(pl,"readwrite");return await i.objectStore(pl).put(e,uC(t)),i.done}catch(n){if(n instanceof pr)ks.warn(n.message);else{const i=$r.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});ks.warn(i.message)}}}function uC(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z$=1024,Y$=30*24*60*60*1e3;class X${constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new J$(n),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=ZE();if(this._heartbeatsCache===null&&(this._heartbeatsCache=await this._heartbeatsCachePromise),!(this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(r=>r.date===i)))return this._heartbeatsCache.heartbeats.push({date:i,agent:n}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(r=>{const o=new Date(r.date).valueOf();return Date.now()-o<=Y$}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache===null||this._heartbeatsCache.heartbeats.length===0)return"";const e=ZE(),{heartbeatsToSend:n,unsentEntries:i}=Q$(this._heartbeatsCache.heartbeats),r=$u(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),r}}function ZE(){return new Date().toISOString().substring(0,10)}function Q$(t,e=z$){const n=[];let i=t.slice();for(const r of t){const o=n.find(l=>l.agent===r.agent);if(o){if(o.dates.push(r.date),eb(n)>e){o.dates.pop();break}}else if(n.push({agent:r.agent,dates:[r.date]}),eb(n)>e){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}class J${constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return rC()?OM().then(()=>!0).catch(()=>!1):!1}async read(){return await this._canUseIndexedDBPromise?await G$(this.app)||{heartbeats:[]}:{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const r=await this.read();return JE(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const r=await this.read();return JE(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function eb(t){return $u(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z$(t){ki(new pi("platform-logger",e=>new d$(e),"PRIVATE")),ki(new pi("heartbeat",e=>new X$(e),"PRIVATE")),Nn(Yp,QE,t),Nn(Yp,QE,"esm2017"),Nn("fire-js","")}Z$("");function hC(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(t);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(n[i[r]]=t[i[r]]);return n}function fC(){return{["dependent-sdk-initialized-before-auth"]:"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const eF=fC,dC=new na("auth","Firebase",fC());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tb=new Pl("@firebase/auth");function Cu(t,...e){tb.logLevel<=Ke.ERROR&&tb.error(`Auth (${kl}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nb(t,...e){throw a_(t,...e)}function pC(t,...e){return a_(t,...e)}function tF(t,e,n){const i=Object.assign(Object.assign({},eF()),{[e]:n});return new na("auth","Firebase",i).create(e,{appName:t.name})}function a_(t,...e){if(typeof t!="string"){const n=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=t.name),t._errorFactory.create(n,...i)}return dC.create(t,...e)}function je(t,e,...n){if(!t)throw a_(e,...n)}function Xa(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Cu(e),new Error(e)}function Wu(t,e){t||Xa(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ib=new Map;function Es(t){Wu(t instanceof Function,"Expected a class definition");let e=ib.get(t);return e?(Wu(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,ib.set(t,e),e)}function nF(t,e){const n=(e==null?void 0:e.persistence)||[],i=(Array.isArray(n)?n:[n]).map(Es);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(i,e==null?void 0:e.popupRedirectResolver)}function iF(){return rb()==="http:"||rb()==="https:"}function rb(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rF(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(iF()||SM()||"connection"in navigator)?navigator.onLine:!0}function sF(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ml{constructor(e,n){this.shortDelay=e,this.longDelay=n,Wu(n>e,"Short delay should be less than long delay!"),this.isMobile=n_()||nC()}get(){return rF()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oF(t,e){Wu(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gC{static initialize(e,n,i){this.fetchImpl=e,n&&(this.headersImpl=n),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;Xa("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;Xa("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;Xa("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aF={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lF=new Ml(3e4,6e4);async function _C(t,e,n,i,r={}){return mC(t,r,async()=>{let o={},l={};i&&(e==="GET"?l=i:o={body:JSON.stringify(i)});const u=r_(Object.assign({key:t.config.apiKey},l)).slice(1),h=await t._getAdditionalHeaders();return h["Content-Type"]="application/json",t.languageCode&&(h["X-Firebase-Locale"]=t.languageCode),gC.fetch()(vC(t,t.config.apiHost,n,u),Object.assign({method:e,headers:h,referrerPolicy:"no-referrer"},o))})}async function mC(t,e,n){t._canInitEmulator=!1;const i=Object.assign(Object.assign({},aF),e);try{const r=new cF(t),o=await Promise.race([n(),r.promise]);r.clearNetworkTimeout();const l=await o.json();if("needConfirmation"in l)throw iu(t,"account-exists-with-different-credential",l);if(o.ok&&!("errorMessage"in l))return l;{const u=o.ok?l.errorMessage:l.error.message,[h,d]=u.split(" : ");if(h==="FEDERATED_USER_ID_ALREADY_LINKED")throw iu(t,"credential-already-in-use",l);if(h==="EMAIL_EXISTS")throw iu(t,"email-already-in-use",l);if(h==="USER_DISABLED")throw iu(t,"user-disabled",l);const p=i[h]||h.toLowerCase().replace(/[_\s]+/g,"-");if(d)throw tF(t,p,d);nb(t,p)}}catch(r){if(r instanceof pr)throw r;nb(t,"network-request-failed")}}function vC(t,e,n,i){const r=`${e}${n}?${i}`;return t.config.emulator?oF(t.config,r):`${t.config.apiScheme}://${r}`}class cF{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,i)=>{this.timer=setTimeout(()=>i(pC(this.auth,"network-request-failed")),lF.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function iu(t,e,n){const i={appName:t.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);const r=pC(t,e,i);return r.customData._tokenResponse=n,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uF(t,e){return _C(t,"POST","/v1/accounts:delete",e)}async function hF(t,e){return _C(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qa(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function fF(t,e=!1){const n=Ui(t),i=await n.getIdToken(e),r=yC(i);je(r&&r.exp&&r.auth_time&&r.iat,n.auth,"internal-error");const o=typeof r.firebase=="object"?r.firebase:void 0,l=o==null?void 0:o.sign_in_provider;return{claims:r,token:i,authTime:Qa(Yd(r.auth_time)),issuedAtTime:Qa(Yd(r.iat)),expirationTime:Qa(Yd(r.exp)),signInProvider:l||null,signInSecondFactor:(o==null?void 0:o.sign_in_second_factor)||null}}function Yd(t){return Number(t)*1e3}function yC(t){const[e,n,i]=t.split(".");if(e===void 0||n===void 0||i===void 0)return Cu("JWT malformed, contained fewer than 3 sections"),null;try{const r=Fu(n);return r?JSON.parse(r):(Cu("Failed to decode base64 JWT payload"),null)}catch(r){return Cu("Caught error parsing JWT payload as JSON",r==null?void 0:r.toString()),null}}function dF(t){const e=yC(t);return je(e,"internal-error"),je(typeof e.exp<"u","internal-error"),je(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Jp(t,e,n=!1){if(n)return e;try{return await e}catch(i){throw i instanceof pr&&pF(i)&&t.auth.currentUser===t&&await t.auth.signOut(),i}}function pF({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gF{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;const r=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EC{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Qa(this.lastLoginAt),this.creationTime=Qa(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Hu(t){var e;const n=t.auth,i=await t.getIdToken(),r=await Jp(t,hF(n,{idToken:i}));je(r==null?void 0:r.users.length,n,"internal-error");const o=r.users[0];t._notifyReloadListener(o);const l=!((e=o.providerUserInfo)===null||e===void 0)&&e.length?vF(o.providerUserInfo):[],u=mF(t.providerData,l),h=t.isAnonymous,d=!(t.email&&o.passwordHash)&&!(u!=null&&u.length),p=h?d:!1,_={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:u,metadata:new EC(o.createdAt,o.lastLoginAt),isAnonymous:p};Object.assign(t,_)}async function _F(t){const e=Ui(t);await Hu(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function mF(t,e){return[...t.filter(i=>!e.some(r=>r.providerId===i.providerId)),...e]}function vF(t){return t.map(e=>{var{providerId:n}=e,i=hC(e,["providerId"]);return{providerId:n,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yF(t,e){const n=await mC(t,{},async()=>{const i=r_({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:r,apiKey:o}=t.config,l=vC(t,r,"/v1/token",`key=${o}`),u=await t._getAdditionalHeaders();return u["Content-Type"]="application/x-www-form-urlencoded",gC.fetch()(l,{method:"POST",headers:u,body:i})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gl{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){je(e.idToken,"internal-error"),je(typeof e.idToken<"u","internal-error"),je(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):dF(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}async getToken(e,n=!1){return je(!this.accessToken||this.refreshToken,e,"user-token-expired"),!n&&this.accessToken&&!this.isExpired?this.accessToken:this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:i,refreshToken:r,expiresIn:o}=await yF(e,n);this.updateTokensAndExpiration(i,r,Number(o))}updateTokensAndExpiration(e,n,i){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,n){const{refreshToken:i,accessToken:r,expirationTime:o}=n,l=new gl;return i&&(je(typeof i=="string","internal-error",{appName:e}),l.refreshToken=i),r&&(je(typeof r=="string","internal-error",{appName:e}),l.accessToken=r),o&&(je(typeof o=="number","internal-error",{appName:e}),l.expirationTime=o),l}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new gl,this.toJSON())}_performRefresh(){return Xa("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ar(t,e){je(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class xo{constructor(e){var{uid:n,auth:i,stsTokenManager:r}=e,o=hC(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new gF(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=i,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new EC(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const n=await Jp(this,this.stsTokenManager.getToken(this.auth,e));return je(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return fF(this,e)}reload(){return _F(this)}_assign(e){this!==e&&(je(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){return new xo(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(e){je(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),n&&await Hu(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){const e=await this.getIdToken();return await Jp(this,uF(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var i,r,o,l,u,h,d,p;const _=(i=n.displayName)!==null&&i!==void 0?i:void 0,y=(r=n.email)!==null&&r!==void 0?r:void 0,E=(o=n.phoneNumber)!==null&&o!==void 0?o:void 0,S=(l=n.photoURL)!==null&&l!==void 0?l:void 0,O=(u=n.tenantId)!==null&&u!==void 0?u:void 0,L=(h=n._redirectEventId)!==null&&h!==void 0?h:void 0,q=(d=n.createdAt)!==null&&d!==void 0?d:void 0,oe=(p=n.lastLoginAt)!==null&&p!==void 0?p:void 0,{uid:H,emailVerified:V,isAnonymous:Q,providerData:B,stsTokenManager:Z}=n;je(H&&Z,e,"internal-error");const X=gl.fromJSON(this.name,Z);je(typeof H=="string",e,"internal-error"),Ar(_,e.name),Ar(y,e.name),je(typeof V=="boolean",e,"internal-error"),je(typeof Q=="boolean",e,"internal-error"),Ar(E,e.name),Ar(S,e.name),Ar(O,e.name),Ar(L,e.name),Ar(q,e.name),Ar(oe,e.name);const de=new xo({uid:H,auth:e,email:y,emailVerified:V,displayName:_,isAnonymous:Q,photoURL:S,phoneNumber:E,tenantId:O,stsTokenManager:X,createdAt:q,lastLoginAt:oe});return B&&Array.isArray(B)&&(de.providerData=B.map(pe=>Object.assign({},pe))),L&&(de._redirectEventId=L),de}static async _fromIdTokenResponse(e,n,i=!1){const r=new gl;r.updateFromServerResponse(n);const o=new xo({uid:n.localId,auth:e,stsTokenManager:r,isAnonymous:i});return await Hu(o),o}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bC{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}bC.type="NONE";const sb=bC;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xd(t,e,n){return`firebase:${t}:${e}:${n}`}class Do{constructor(e,n,i){this.persistence=e,this.auth=n,this.userKey=i;const{config:r,name:o}=this.auth;this.fullUserKey=Xd(this.userKey,r.apiKey,o),this.fullPersistenceKey=Xd("persistence",r.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?xo._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,i="authUser"){if(!n.length)return new Do(Es(sb),e,i);const r=(await Promise.all(n.map(async d=>{if(await d._isAvailable())return d}))).filter(d=>d);let o=r[0]||Es(sb);const l=Xd(i,e.config.apiKey,e.name);let u=null;for(const d of n)try{const p=await d._get(l);if(p){const _=xo._fromJSON(e,p);d!==o&&(u=_),o=d;break}}catch{}const h=r.filter(d=>d._shouldAllowMigration);return!o._shouldAllowMigration||!h.length?new Do(o,e,i):(o=h[0],u&&await o._set(l,u.toJSON()),await Promise.all(n.map(async d=>{if(d!==o)try{await d._remove(l)}catch{}})),new Do(o,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ob(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(TF(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(EF(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(IF(e))return"Blackberry";if(AF(e))return"Webos";if(bF(e))return"Safari";if((e.includes("chrome/")||wF(e))&&!e.includes("edge/"))return"Chrome";if(CF(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=t.match(n);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function EF(t=Pi()){return/firefox\//i.test(t)}function bF(t=Pi()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function wF(t=Pi()){return/crios\//i.test(t)}function TF(t=Pi()){return/iemobile/i.test(t)}function CF(t=Pi()){return/android/i.test(t)}function IF(t=Pi()){return/blackberry/i.test(t)}function AF(t=Pi()){return/webos/i.test(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wC(t,e=[]){let n;switch(t){case"Browser":n=ob(Pi());break;case"Worker":n=`${ob(Pi())}-${t}`;break;default:n=t}const i=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${kl}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SF{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const i=o=>new Promise((l,u)=>{try{const h=e(o);l(h)}catch(h){u(h)}});i.onAbort=n,this.queue.push(i);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const i of this.queue)await i(e),i.onAbort&&n.push(i.onAbort)}catch(i){n.reverse();for(const r of n)try{r()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OF{constructor(e,n,i){this.app=e,this.heartbeatServiceProvider=n,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new ab(this),this.idTokenSubscription=new ab(this),this.beforeStateQueue=new SF(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=dC,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Es(n)),this._initializationPromise=this.queue(async()=>{var i,r;if(!this._deleted&&(this.persistenceManager=await Do.create(this,e),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((r=this.currentUser)===null||r===void 0?void 0:r.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUser(e){var n;const i=await this.assertedPersistence.getCurrentUser();let r=i,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const l=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,u=r==null?void 0:r._redirectEventId,h=await this.tryRedirectSignIn(e);(!l||l===u)&&(h!=null&&h.user)&&(r=h.user,o=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(r)}catch(l){r=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(l))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return je(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Hu(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=sF()}async _delete(){this._deleted=!0}async updateCurrentUser(e){const n=e?Ui(e):null;return n&&je(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&je(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0)}setPersistence(e){return this.queue(async()=>{await this.assertedPersistence.setPersistence(Es(e))})}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new na("auth","Firebase",e())}onAuthStateChanged(e,n,i){return this.registerStateListener(this.authStateSubscription,e,n,i)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,i){return this.registerStateListener(this.idTokenSubscription,e,n,i)}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const i=await this.getOrInitRedirectPersistenceManager(n);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Es(e)||this._popupRedirectResolver;je(n,this,"argument-error"),this.redirectPersistenceManager=await Do.create(this,[Es(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,i;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((i=this.redirectUser)===null||i===void 0?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const i=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==i&&(this.lastNotifiedUid=i,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,i,r){if(this._deleted)return()=>{};const o=typeof n=="function"?n:n.next.bind(n),l=this._isInitialized?Promise.resolve():this._initializationPromise;return je(l,this,"internal-error"),l.then(()=>o(this.currentUser)),typeof n=="function"?e.addObserver(n,i,r):e.addObserver(n)}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return je(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=wC(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={["X-Client-Version"]:this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const i=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());return i&&(n["X-Firebase-Client"]=i),n}}function NF(t){return Ui(t)}class ab{constructor(e){this.auth=e,this.observer=null,this.addObserver=jM(n=>this.observer=n)}get next(){return je(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}new Ml(3e4,6e4);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */new Ml(2e3,1e4);/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */new Ml(3e4,6e4);/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */new Ml(5e3,15e3);var lb="@firebase/auth",cb="0.21.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RF{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(i=>{e((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){je(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xF(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}function DF(t){ki(new pi("auth",(e,{options:n})=>{const i=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),{apiKey:o,authDomain:l}=i.options;return((u,h)=>{je(o&&!o.includes(":"),"invalid-api-key",{appName:u.name}),je(!(l!=null&&l.includes(":")),"argument-error",{appName:u.name});const d={apiKey:o,authDomain:l,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:wC(t)},p=new OF(u,h,d);return nF(p,n),p})(i,r)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,i)=>{e.getProvider("auth-internal").initialize()})),ki(new pi("auth-internal",e=>{const n=NF(e.getProvider("auth").getImmediate());return(i=>new RF(i))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Nn(lb,cb,xF(t)),Nn(lb,cb,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LF=5*60;MM("authIdTokenMaxAge");DF("Browser");/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PF=new Map,kF={activated:!1,tokenObservers:[]};function Mi(t){return PF.get(t)||Object.assign({},kF)}const ub={OFFSET_DURATION:5*60*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:16*60*1e3};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MF{constructor(e,n,i,r,o){if(this.operation=e,this.retryPolicy=n,this.getWaitDuration=i,this.lowerBound=r,this.upperBound=o,this.pending=null,this.nextErrorWaitInterval=r,r>o)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}async process(e){this.stop();try{this.pending=new Ps,await $F(this.getNextRun(e)),this.pending.resolve(),await this.pending.promise,this.pending=new Ps,await this.operation(),this.pending.resolve(),await this.pending.promise,this.process(!0).catch(()=>{})}catch(n){this.retryPolicy(n)?this.process(!1).catch(()=>{}):this.stop()}}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const n=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),n}}}function $F(t){return new Promise(e=>{setTimeout(e,t)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FF={["already-initialized"]:"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.",["use-before-activation"]:"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.",["fetch-network-error"]:"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.",["fetch-parse-error"]:"Fetch client could not parse response. Original error: {$originalErrorMessage}.",["fetch-status-error"]:"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.",["storage-open"]:"Error thrown when opening storage. Original error: {$originalErrorMessage}.",["storage-get"]:"Error thrown when reading from storage. Original error: {$originalErrorMessage}.",["storage-set"]:"Error thrown when writing to storage. Original error: {$originalErrorMessage}.",["recaptcha-error"]:"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"},Vu=new na("appCheck","AppCheck",FF);function UF(t){if(!Mi(t).activated)throw Vu.create("use-before-activation",{appName:t.name})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BF="firebase-app-check-database",WF=1,Zp="firebase-app-check-store";let ru=null;function HF(){return ru||(ru=new Promise((t,e)=>{try{const n=indexedDB.open(BF,WF);n.onsuccess=i=>{t(i.target.result)},n.onerror=i=>{var r;e(Vu.create("storage-open",{originalErrorMessage:(r=i.target.error)===null||r===void 0?void 0:r.message}))},n.onupgradeneeded=i=>{const r=i.target.result;switch(i.oldVersion){case 0:r.createObjectStore(Zp,{keyPath:"compositeKey"})}}}catch(n){e(Vu.create("storage-open",{originalErrorMessage:n==null?void 0:n.message}))}}),ru)}function VF(t,e){return jF(qF(t),e)}async function jF(t,e){const i=(await HF()).transaction(Zp,"readwrite"),o=i.objectStore(Zp).put({compositeKey:t,value:e});return new Promise((l,u)=>{o.onsuccess=h=>{l()},i.onerror=h=>{var d;u(Vu.create("storage-set",{originalErrorMessage:(d=h.target.error)===null||d===void 0?void 0:d.message}))}})}function qF(t){return`${t.options.appId}-${t.name}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eg=new Pl("@firebase/app-check");function hb(t,e){return rC()?VF(t,e).catch(n=>{eg.warn(`Failed to write token to IndexedDB. Error: ${n}`)}):Promise.resolve()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KF={error:"UNKNOWN_ERROR"};function GF(t){return $h.encodeString(JSON.stringify(t),!1)}async function tg(t,e=!1){const n=t.app;UF(n);const i=Mi(n);let r=i.token,o;if(r&&!Ha(r)&&(i.token=void 0,r=void 0),!r){const h=await i.cachedTokenPromise;h&&(Ha(h)?r=h:await hb(n,void 0))}if(!e&&r&&Ha(r))return{token:r.token};let l=!1;try{i.exchangeTokenPromise||(i.exchangeTokenPromise=i.provider.getToken().finally(()=>{i.exchangeTokenPromise=void 0}),l=!0),r=await Mi(n).exchangeTokenPromise}catch(h){h.code==="appCheck/throttled"?eg.warn(h.message):eg.error(h),o=h}let u;return r?o?Ha(r)?u={token:r.token,internalError:o}:u=db(o):(u={token:r.token},i.token=r,await hb(n,r)):u=db(o),l&&XF(n,u),u}function zF(t,e,n,i){const{app:r}=t,o=Mi(r),l={next:n,error:i,type:e};if(o.tokenObservers=[...o.tokenObservers,l],o.token&&Ha(o.token)){const u=o.token;Promise.resolve().then(()=>{n({token:u.token}),fb(t)}).catch(()=>{})}o.cachedTokenPromise.then(()=>fb(t))}function TC(t,e){const n=Mi(t),i=n.tokenObservers.filter(r=>r.next!==e);i.length===0&&n.tokenRefresher&&n.tokenRefresher.isRunning()&&n.tokenRefresher.stop(),n.tokenObservers=i}function fb(t){const{app:e}=t,n=Mi(e);let i=n.tokenRefresher;i||(i=YF(t),n.tokenRefresher=i),!i.isRunning()&&n.isTokenAutoRefreshEnabled&&i.start()}function YF(t){const{app:e}=t;return new MF(async()=>{const n=Mi(e);let i;if(n.token?i=await tg(t,!0):i=await tg(t),i.error)throw i.error;if(i.internalError)throw i.internalError},()=>!0,()=>{const n=Mi(e);if(n.token){let i=n.token.issuedAtTimeMillis+(n.token.expireTimeMillis-n.token.issuedAtTimeMillis)*.5+3e5;const r=n.token.expireTimeMillis-5*60*1e3;return i=Math.min(i,r),Math.max(0,i-Date.now())}else return 0},ub.RETRIAL_MIN_WAIT,ub.RETRIAL_MAX_WAIT)}function XF(t,e){const n=Mi(t).tokenObservers;for(const i of n)try{i.type==="EXTERNAL"&&e.error!=null?i.error(e.error):i.next(e)}catch{}}function Ha(t){return t.expireTimeMillis-Date.now()>0}function db(t){return{token:GF(KF),error:t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QF{constructor(e,n){this.app=e,this.heartbeatServiceProvider=n}_delete(){const{tokenObservers:e}=Mi(this.app);for(const n of e)TC(this.app,n.next);return Promise.resolve()}}function JF(t,e){return new QF(t,e)}function ZF(t){return{getToken:e=>tg(t,e),addTokenListener:e=>zF(t,"INTERNAL",e),removeTokenListener:e=>TC(t.app,e)}}const eU="@firebase/app-check",tU="0.6.0",nU="app-check",pb="app-check-internal";function iU(){ki(new pi(nU,t=>{const e=t.getProvider("app").getImmediate(),n=t.getProvider("heartbeat");return JF(e,n)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,e,n)=>{t.getProvider(pb).initialize()})),ki(new pi(pb,t=>{const e=t.getProvider("app-check").getImmediate();return ZF(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),Nn(eU,tU)}iU();var rU="firebase",sU="9.15.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Nn(rU,sU,"app");const CC=Symbol("firebaseApp");function IC(t){return kh()&&wt(CC,null)||lC(t)}const oi=()=>{};function ia(t){return!!t&&typeof t=="object"}function oU(t){return ia(t)&&t.type==="document"}function aU(t){return ia(t)&&t.type==="collection"}function lU(t){return oU(t)||aU(t)}function cU(t){return ia(t)&&t.type==="query"}function uU(t){return ia(t)&&"ref"in t}function hU(t){return ia(t)&&typeof t.bucket=="string"}function fU(){return!!(kh()&&wt(XT,null))}const gb="@firebase/database",_b="0.14.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let AC="";function dU(t){AC=t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pU{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,n){n==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),bt(n))}get(e){const n=this.domStorage_.getItem(this.prefixedName_(e));return n==null?null:dl(n)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gU{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,n){n==null?delete this.cache_[e]:this.cache_[e]=n}get(e){return Fi(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SC=function(t){try{if(typeof window<"u"&&typeof window[t]<"u"){const e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new pU(e)}}catch{}return new gU},bs=SC("localStorage"),ng=SC("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lo=new Pl("@firebase/database"),_U=function(){let t=1;return function(){return t++}}(),OC=function(t){const e=GM(t),n=new VM;n.update(e);const i=n.digest();return $h.encodeByteArray(i)},$l=function(...t){let e="";for(let n=0;n<t.length;n++){const i=t[n];Array.isArray(i)||i&&typeof i=="object"&&typeof i.length=="number"?e+=$l.apply(null,i):typeof i=="object"?e+=bt(i):e+=i,e+=" "}return e};let Os=null,mb=!0;const mU=function(t,e){G(!e||t===!0||t===!1,"Can't turn on custom loggers persistently."),t===!0?(Lo.logLevel=Ke.VERBOSE,Os=Lo.log.bind(Lo),e&&ng.set("logging_enabled",!0)):typeof t=="function"?Os=t:(Os=null,ng.remove("logging_enabled"))},$t=function(...t){if(mb===!0&&(mb=!1,Os===null&&ng.get("logging_enabled")===!0&&mU(!0)),Os){const e=$l.apply(null,t);Os(e)}},Fl=function(t){return function(...e){$t(t,...e)}},ig=function(...t){const e="FIREBASE INTERNAL ERROR: "+$l(...t);Lo.error(e)},cr=function(...t){const e=`FIREBASE FATAL ERROR: ${$l(...t)}`;throw Lo.error(e),new Error(e)},on=function(...t){const e="FIREBASE WARNING: "+$l(...t);Lo.warn(e)},vU=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&on("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},l_=function(t){return typeof t=="number"&&(t!==t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},yU=function(t){if(document.readyState==="complete")t();else{let e=!1;const n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}e||(e=!0,t())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},Bo="[MIN_NAME]",Ms="[MAX_NAME]",js=function(t,e){if(t===e)return 0;if(t===Bo||e===Ms)return-1;if(e===Bo||t===Ms)return 1;{const n=vb(t),i=vb(e);return n!==null?i!==null?n-i===0?t.length-e.length:n-i:-1:i!==null?1:t<e?-1:1}},EU=function(t,e){return t===e?0:t<e?-1:1},xa=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+bt(e))},c_=function(t){if(typeof t!="object"||t===null)return bt(t);const e=[];for(const i in t)e.push(i);e.sort();let n="{";for(let i=0;i<e.length;i++)i!==0&&(n+=","),n+=bt(e[i]),n+=":",n+=c_(t[e[i]]);return n+="}",n},NC=function(t,e){const n=t.length;if(n<=e)return[t];const i=[];for(let r=0;r<n;r+=e)r+e>n?i.push(t.substring(r,n)):i.push(t.substring(r,r+e));return i};function Wt(t,e){for(const n in t)t.hasOwnProperty(n)&&e(n,t[n])}const RC=function(t){G(!l_(t),"Invalid JSON number");const e=11,n=52,i=(1<<e-1)-1;let r,o,l,u,h;t===0?(o=0,l=0,r=1/t===-1/0?1:0):(r=t<0,t=Math.abs(t),t>=Math.pow(2,1-i)?(u=Math.min(Math.floor(Math.log(t)/Math.LN2),i),o=u+i,l=Math.round(t*Math.pow(2,n-u)-Math.pow(2,n))):(o=0,l=Math.round(t/Math.pow(2,1-i-n))));const d=[];for(h=n;h;h-=1)d.push(l%2?1:0),l=Math.floor(l/2);for(h=e;h;h-=1)d.push(o%2?1:0),o=Math.floor(o/2);d.push(r?1:0),d.reverse();const p=d.join("");let _="";for(h=0;h<64;h+=8){let y=parseInt(p.substr(h,8),2).toString(16);y.length===1&&(y="0"+y),_=_+y}return _.toLowerCase()},bU=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},wU=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function TU(t,e){let n="Unknown Error";t==="too_big"?n="The data requested exceeds the maximum size that can be accessed with a single request.":t==="permission_denied"?n="Client doesn't have permission to access the desired data.":t==="unavailable"&&(n="The service is unavailable");const i=new Error(t+" at "+e._path.toString()+": "+n);return i.code=t.toUpperCase(),i}const CU=new RegExp("^-?(0*)\\d{1,10}$"),IU=-2147483648,AU=2147483647,vb=function(t){if(CU.test(t)){const e=Number(t);if(e>=IU&&e<=AU)return e}return null},ra=function(t){try{t()}catch(e){setTimeout(()=>{const n=e.stack||"";throw on("Exception was thrown by user callback.",n),e},Math.floor(0))}},SU=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},Ja=function(t,e){const n=setTimeout(t,e);return typeof n=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):typeof n=="object"&&n.unref&&n.unref(),n};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OU{constructor(e,n){this.appName_=e,this.appCheckProvider=n,this.appCheck=n==null?void 0:n.getImmediate({optional:!0}),this.appCheck||n==null||n.get().then(i=>this.appCheck=i)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((n,i)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(n,i):n(null)},0)})}addTokenChangeListener(e){var n;(n=this.appCheckProvider)===null||n===void 0||n.get().then(i=>i.addTokenListener(e))}notifyForInvalidToken(){on(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NU{constructor(e,n,i){this.appName_=e,this.firebaseOptions_=n,this.authProvider_=i,this.auth_=null,this.auth_=i.getImmediate({optional:!0}),this.auth_||i.onInit(r=>this.auth_=r)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(n=>n&&n.code==="auth/token-not-initialized"?($t("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,i)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(n,i):n(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(n=>n.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(n=>n.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',on(e)}}class Po{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}Po.OWNER="owner";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u_="5",xC="v",DC="s",LC="r",PC="f",kC=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,MC="ls",$C="p",rg="ac",FC="websocket",UC="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BC{constructor(e,n,i,r,o=!1,l="",u=!1){this.secure=n,this.namespace=i,this.webSocketOnly=r,this.nodeAdmin=o,this.persistenceKey=l,this.includeNamespaceInQueryParams=u,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=bs.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&bs.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${n}`}}function RU(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams}function WC(t,e,n){G(typeof e=="string","typeof type must == string"),G(typeof n=="object","typeof params must == object");let i;if(e===FC)i=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else if(e===UC)i=(t.secure?"https://":"http://")+t.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);RU(t)&&(n.ns=t.namespace);const r=[];return Wt(n,(o,l)=>{r.push(o+"="+l)}),i+r.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xU{constructor(){this.counters_={}}incrementCounter(e,n=1){Fi(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=n}get(){return IM(this.counters_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qd={},Jd={};function h_(t){const e=t.toString();return Qd[e]||(Qd[e]=new xU),Qd[e]}function DU(t,e){const n=t.toString();return Jd[n]||(Jd[n]=e()),Jd[n]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LU{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,n){this.closeAfterResponse=e,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,n){for(this.pendingResponses[e]=n;this.pendingResponses[this.currentResponseNum];){const i=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let r=0;r<i.length;++r)i[r]&&ra(()=>{this.onMessage_(i[r])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yb="start",PU="close",kU="pLPCommand",MU="pRTLPCB",HC="id",VC="pw",jC="ser",$U="cb",FU="seg",UU="ts",BU="d",WU="dframe",qC=1870,KC=30,HU=qC-KC,VU=25e3,jU=3e4;class Co{constructor(e,n,i,r,o,l,u){this.connId=e,this.repoInfo=n,this.applicationId=i,this.appCheckToken=r,this.authToken=o,this.transportSessionId=l,this.lastSessionId=u,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Fl(e),this.stats_=h_(n),this.urlFn=h=>(this.appCheckToken&&(h[rg]=this.appCheckToken),WC(n,UC,h))}open(e,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new LU(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(jU)),yU(()=>{if(this.isClosed_)return;this.scriptTagHolder=new f_((...o)=>{const[l,u,h,d,p]=o;if(this.incrementIncomingBytes_(o),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,l===yb)this.id=u,this.password=h;else if(l===PU)u?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(u,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+l)},(...o)=>{const[l,u]=o;this.incrementIncomingBytes_(o),this.myPacketOrderer.handleResponse(l,u)},()=>{this.onClosed_()},this.urlFn);const i={};i[yb]="t",i[jC]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(i[$U]=this.scriptTagHolder.uniqueCallbackIdentifier),i[xC]=u_,this.transportSessionId&&(i[DC]=this.transportSessionId),this.lastSessionId&&(i[MC]=this.lastSessionId),this.applicationId&&(i[$C]=this.applicationId),this.appCheckToken&&(i[rg]=this.appCheckToken),typeof location<"u"&&location.hostname&&kC.test(location.hostname)&&(i[LC]=PC);const r=this.urlFn(i);this.log_("Connecting via long-poll to "+r),this.scriptTagHolder.addTag(r,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Co.forceAllow_=!0}static forceDisallow(){Co.forceDisallow_=!0}static isAvailable(){return Co.forceAllow_?!0:!Co.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!bU()&&!wU()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const n=bt(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const i=eC(n),r=NC(i,HU);for(let o=0;o<r.length;o++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[o]),this.curSegmentNum++}addDisconnectPingFrame(e,n){this.myDisconnFrame=document.createElement("iframe");const i={};i[WU]="t",i[HC]=e,i[VC]=n,this.myDisconnFrame.src=this.urlFn(i),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const n=bt(e).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}}class f_{constructor(e,n,i,r){this.onDisconnect=i,this.urlFn=r,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=_U(),window[kU+this.uniqueCallbackIdentifier]=e,window[MU+this.uniqueCallbackIdentifier]=n,this.myIFrame=f_.createIFrame_();let o="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(o='<script>document.domain="'+document.domain+'";<\/script>');const l="<html><body>"+o+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(l),this.myIFrame.doc.close()}catch(u){$t("frame writing exception"),u.stack&&$t(u.stack),$t(u)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||$t("No IE domain setting required")}catch{const i=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+i+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,n){for(this.myID=e,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e[HC]=this.myID,e[VC]=this.myPW,e[jC]=this.currentSerial;let n=this.urlFn(e),i="",r=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+KC+i.length<=qC;){const l=this.pendingSegs.shift();i=i+"&"+FU+r+"="+l.seg+"&"+UU+r+"="+l.ts+"&"+BU+r+"="+l.d,r++}return n=n+i,this.addLongPollTag_(n,this.currentSerial),!0}else return!1}enqueueSegment(e,n,i){this.pendingSegs.push({seg:e,ts:n,d:i}),this.alive&&this.newRequest_()}addLongPollTag_(e,n){this.outstandingRequests.add(n);const i=()=>{this.outstandingRequests.delete(n),this.newRequest_()},r=setTimeout(i,Math.floor(VU)),o=()=>{clearTimeout(r),i()};this.addTag(e,o)}addTag(e,n){setTimeout(()=>{try{if(!this.sendNewPolls)return;const i=this.myIFrame.doc.createElement("script");i.type="text/javascript",i.async=!0,i.src=e,i.onload=i.onreadystatechange=function(){const r=i.readyState;(!r||r==="loaded"||r==="complete")&&(i.onload=i.onreadystatechange=null,i.parentNode&&i.parentNode.removeChild(i),n())},i.onerror=()=>{$t("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(i)}catch{}},Math.floor(1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qU=16384,KU=45e3;let ju=null;typeof MozWebSocket<"u"?ju=MozWebSocket:typeof WebSocket<"u"&&(ju=WebSocket);class ai{constructor(e,n,i,r,o,l,u){this.connId=e,this.applicationId=i,this.appCheckToken=r,this.authToken=o,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Fl(this.connId),this.stats_=h_(n),this.connURL=ai.connectionURL_(n,l,u,r,i),this.nodeAdmin=n.nodeAdmin}static connectionURL_(e,n,i,r,o){const l={};return l[xC]=u_,typeof location<"u"&&location.hostname&&kC.test(location.hostname)&&(l[LC]=PC),n&&(l[DC]=n),i&&(l[MC]=i),r&&(l[rg]=r),o&&(l[$C]=o),WC(e,FC,l)}open(e,n){this.onDisconnect=n,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,bs.set("previous_websocket_failure",!0);try{let i;iC(),this.mySock=new ju(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");const r=i.message||i.data;r&&this.log_(r),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");const r=i.message||i.data;r&&this.log_(r),this.onClosed_()}}start(){}static forceDisallow(){ai.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){const n=/Android ([0-9]{0,}\.[0-9]{0,})/,i=navigator.userAgent.match(n);i&&i.length>1&&parseFloat(i[1])<4.4&&(e=!0)}return!e&&ju!==null&&!ai.forceDisallow_}static previouslyFailed(){return bs.isInMemoryStorage||bs.get("previous_websocket_failure")===!0}markConnectionHealthy(){bs.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const n=this.frames.join("");this.frames=null;const i=dl(n);this.onMessage(i)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(G(this.frames===null,"We already have a frame buffer"),e.length<=6){const n=Number(e);if(!isNaN(n))return this.handleNewFrameCount_(n),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(this.mySock===null)return;const n=e.data;if(this.bytesReceived+=n.length,this.stats_.incrementCounter("bytes_received",n.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(n);else{const i=this.extractFrameCount_(n);i!==null&&this.appendFrame_(i)}}send(e){this.resetKeepAlive();const n=bt(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const i=NC(n,qU);i.length>1&&this.sendString_(String(i.length));for(let r=0;r<i.length;r++)this.sendString_(i[r])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(KU))}sendString_(e){try{this.mySock.send(e)}catch(n){this.log_("Exception thrown from WebSocket.send():",n.message||n.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}ai.responsesRequiredToBeHealthy=2;ai.healthyTimeout=3e4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _l{constructor(e){this.initTransports_(e)}static get ALL_TRANSPORTS(){return[Co,ai]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(e){const n=ai&&ai.isAvailable();let i=n&&!ai.previouslyFailed();if(e.webSocketOnly&&(n||on("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[ai];else{const r=this.transports_=[];for(const o of _l.ALL_TRANSPORTS)o&&o.isAvailable()&&r.push(o);_l.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}_l.globalTransportInitialized_=!1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GU=6e4,zU=5e3,YU=10*1024,XU=100*1024,Zd="t",Eb="d",QU="s",bb="r",JU="e",wb="o",Tb="a",Cb="n",Ib="p",ZU="h";class eB{constructor(e,n,i,r,o,l,u,h,d,p){this.id=e,this.repoInfo_=n,this.applicationId_=i,this.appCheckToken_=r,this.authToken_=o,this.onMessage_=l,this.onReady_=u,this.onDisconnect_=h,this.onKill_=d,this.lastSessionId=p,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Fl("c:"+this.id+":"),this.transportManager_=new _l(n),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.conn_),i=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,i)},Math.floor(0));const r=e.healthyTimeout||0;r>0&&(this.healthyTimeout_=Ja(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>XU?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>YU?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(r)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return n=>{e===this.conn_?this.onConnectionLost_(n):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return n=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(n):e===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(e){const n={t:"d",d:e};this.sendData_(n)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(Zd in e){const n=e[Zd];n===Tb?this.upgradeIfSecondaryHealthy_():n===bb?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===wb&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const n=xa("t",e),i=xa("d",e);if(n==="c")this.onSecondaryControl_(i);else if(n==="d")this.pendingDataMessages.push(i);else throw new Error("Unknown protocol layer: "+n)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:Ib,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:Tb,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:Cb,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const n=xa("t",e),i=xa("d",e);n==="c"?this.onControl_(i):n==="d"&&this.onDataMessage_(i)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const n=xa(Zd,e);if(Eb in e){const i=e[Eb];if(n===ZU)this.onHandshake_(i);else if(n===Cb){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let r=0;r<this.pendingDataMessages.length;++r)this.onDataMessage_(this.pendingDataMessages[r]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===QU?this.onConnectionShutdown_(i):n===bb?this.onReset_(i):n===JU?ig("Server Error: "+i):n===wb?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):ig("Unknown control packet command: "+n)}}onHandshake_(e){const n=e.ts,i=e.v,r=e.h;this.sessionId=e.s,this.repoInfo_.host=r,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),u_!==i&&on("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.secondaryConn_),i=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,i),Ja(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(GU))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,n){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Ja(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(zU))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:Ib,d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(bs.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GC{put(e,n,i,r){}merge(e,n,i,r){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,n,i){}onDisconnectMerge(e,n,i){}onDisconnectCancel(e,n){}reportStats(e){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zC{constructor(e){this.allowedEvents_=e,this.listeners_={},G(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...n){if(Array.isArray(this.listeners_[e])){const i=[...this.listeners_[e]];for(let r=0;r<i.length;r++)i[r].callback.apply(i[r].context,n)}}on(e,n,i){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:n,context:i});const r=this.getInitialEvent(e);r&&n.apply(i,r)}off(e,n,i){this.validateEventType_(e);const r=this.listeners_[e]||[];for(let o=0;o<r.length;o++)if(r[o].callback===n&&(!i||i===r[o].context)){r.splice(o,1);return}}validateEventType_(e){G(this.allowedEvents_.find(n=>n===e),"Unknown event: "+e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qu extends zC{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!n_()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new qu}getInitialEvent(e){return G(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ab=32,Sb=768;class Ge{constructor(e,n){if(n===void 0){this.pieces_=e.split("/");let i=0;for(let r=0;r<this.pieces_.length;r++)this.pieces_[r].length>0&&(this.pieces_[i]=this.pieces_[r],i++);this.pieces_.length=i,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=n}toString(){let e="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(e+="/"+this.pieces_[n]);return e||"/"}}function Fe(){return new Ge("")}function Oe(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function Vr(t){return t.pieces_.length-t.pieceNum_}function et(t){let e=t.pieceNum_;return e<t.pieces_.length&&e++,new Ge(t.pieces_,e)}function d_(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function tB(t){let e="";for(let n=t.pieceNum_;n<t.pieces_.length;n++)t.pieces_[n]!==""&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}function ml(t,e=0){return t.pieces_.slice(t.pieceNum_+e)}function YC(t){if(t.pieceNum_>=t.pieces_.length)return null;const e=[];for(let n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new Ge(e,0)}function ft(t,e){const n=[];for(let i=t.pieceNum_;i<t.pieces_.length;i++)n.push(t.pieces_[i]);if(e instanceof Ge)for(let i=e.pieceNum_;i<e.pieces_.length;i++)n.push(e.pieces_[i]);else{const i=e.split("/");for(let r=0;r<i.length;r++)i[r].length>0&&n.push(i[r])}return new Ge(n,0)}function xe(t){return t.pieceNum_>=t.pieces_.length}function rn(t,e){const n=Oe(t),i=Oe(e);if(n===null)return e;if(n===i)return rn(et(t),et(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function nB(t,e){const n=ml(t,0),i=ml(e,0);for(let r=0;r<n.length&&r<i.length;r++){const o=js(n[r],i[r]);if(o!==0)return o}return n.length===i.length?0:n.length<i.length?-1:1}function p_(t,e){if(Vr(t)!==Vr(e))return!1;for(let n=t.pieceNum_,i=e.pieceNum_;n<=t.pieces_.length;n++,i++)if(t.pieces_[n]!==e.pieces_[i])return!1;return!0}function jn(t,e){let n=t.pieceNum_,i=e.pieceNum_;if(Vr(t)>Vr(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[i])return!1;++n,++i}return!0}class iB{constructor(e,n){this.errorPrefix_=n,this.parts_=ml(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let i=0;i<this.parts_.length;i++)this.byteLength_+=Uh(this.parts_[i]);XC(this)}}function rB(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=Uh(e),XC(t)}function sB(t){const e=t.parts_.pop();t.byteLength_-=Uh(e),t.parts_.length>0&&(t.byteLength_-=1)}function XC(t){if(t.byteLength_>Sb)throw new Error(t.errorPrefix_+"has a key path longer than "+Sb+" bytes ("+t.byteLength_+").");if(t.parts_.length>Ab)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+Ab+") or object contains a cycle "+ds(t))}function ds(t){return t.parts_.length===0?"":"in property '"+t.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g_ extends zC{constructor(){super(["visible"]);let e,n;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{const i=!document[e];i!==this.visible_&&(this.visible_=i,this.trigger("visible",i))},!1)}static getInstance(){return new g_}getInitialEvent(e){return G(e==="visible","Unknown event type: "+e),[this.visible_]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Da=1e3,oB=60*5*1e3,Ob=30*1e3,aB=1.3,lB=3e4,cB="server_kill",Nb=3;class ir extends GC{constructor(e,n,i,r,o,l,u,h){if(super(),this.repoInfo_=e,this.applicationId_=n,this.onDataUpdate_=i,this.onConnectStatus_=r,this.onServerInfoUpdate_=o,this.authTokenProvider_=l,this.appCheckTokenProvider_=u,this.authOverride_=h,this.id=ir.nextPersistentConnectionId_++,this.log_=Fl("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Da,this.maxReconnectDelay_=oB,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,h&&!iC())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");g_.getInstance().on("visible",this.onVisible_,this),e.host.indexOf("fblocal")===-1&&qu.getInstance().on("online",this.onOnline_,this)}sendRequest(e,n,i){const r=++this.requestNumber_,o={r,a:e,b:n};this.log_(bt(o)),G(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(o),i&&(this.requestCBHash_[r]=i)}get(e){this.initConnection_();const n=new Ps,r={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:l=>{const u=l.d;l.s==="ok"?n.resolve(u):n.reject(u)}};this.outstandingGets_.push(r),this.outstandingGetCount_++;const o=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(o),n.promise}listen(e,n,i,r){this.initConnection_();const o=e._queryIdentifier,l=e._path.toString();this.log_("Listen called for "+l+" "+o),this.listens.has(l)||this.listens.set(l,new Map),G(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),G(!this.listens.get(l).has(o),"listen() called twice for same path/queryId.");const u={onComplete:r,hashFn:n,query:e,tag:i};this.listens.get(l).set(o,u),this.connected_&&this.sendListen_(u)}sendGet_(e){const n=this.outstandingGets_[e];this.sendRequest("g",n.request,i=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),n.onComplete&&n.onComplete(i)})}sendListen_(e){const n=e.query,i=n._path.toString(),r=n._queryIdentifier;this.log_("Listen on "+i+" for "+r);const o={p:i},l="q";e.tag&&(o.q=n._queryObject,o.t=e.tag),o.h=e.hashFn(),this.sendRequest(l,o,u=>{const h=u.d,d=u.s;ir.warnOnListenWarnings_(h,n),(this.listens.get(i)&&this.listens.get(i).get(r))===e&&(this.log_("listen response",u),d!=="ok"&&this.removeListen_(i,r),e.onComplete&&e.onComplete(d,h))})}static warnOnListenWarnings_(e,n){if(e&&typeof e=="object"&&Fi(e,"w")){const i=Uo(e,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){const r='".indexOn": "'+n._queryParams.getIndex().toString()+'"',o=n._path.toString();on(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${r} at ${o} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&e.length===40||HM(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=Ob)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,n=WM(e)?"auth":"gauth",i={cred:e};this.authOverride_===null?i.noauth=!0:typeof this.authOverride_=="object"&&(i.authvar=this.authOverride_),this.sendRequest(n,i,r=>{const o=r.s,l=r.d||"error";this.authToken_===e&&(o==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(o,l))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const n=e.s,i=e.d||"error";n==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(n,i)})}unlisten(e,n){const i=e._path.toString(),r=e._queryIdentifier;this.log_("Unlisten called for "+i+" "+r),G(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,r)&&this.connected_&&this.sendUnlisten_(i,r,e._queryObject,n)}sendUnlisten_(e,n,i,r){this.log_("Unlisten on "+e+" for "+n);const o={p:e},l="n";r&&(o.q=i,o.t=r),this.sendRequest(l,o)}onDisconnectPut(e,n,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,n,i):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:n,onComplete:i})}onDisconnectMerge(e,n,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,n,i):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:n,onComplete:i})}onDisconnectCancel(e,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:n})}sendOnDisconnect_(e,n,i,r){const o={p:n,d:i};this.log_("onDisconnect "+e,o),this.sendRequest(e,o,l=>{r&&setTimeout(()=>{r(l.s,l.d)},Math.floor(0))})}put(e,n,i,r){this.putInternal("p",e,n,i,r)}merge(e,n,i,r){this.putInternal("m",e,n,i,r)}putInternal(e,n,i,r,o){this.initConnection_();const l={p:n,d:i};o!==void 0&&(l.h=o),this.outstandingPuts_.push({action:e,request:l,onComplete:r}),this.outstandingPutCount_++;const u=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(u):this.log_("Buffering put: "+n)}sendPut_(e){const n=this.outstandingPuts_[e].action,i=this.outstandingPuts_[e].request,r=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(n,i,o=>{this.log_(n+" response",o),delete this.outstandingPuts_[e],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),r&&r(o.s,o.d)})}reportStats(e){if(this.connected_){const n={c:e};this.log_("reportStats",n),this.sendRequest("s",n,i=>{if(i.s!=="ok"){const o=i.d;this.log_("reportStats","Error sending stats: "+o)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+bt(e));const n=e.r,i=this.requestCBHash_[n];i&&(delete this.requestCBHash_[n],i(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,n){this.log_("handleServerMessage",e,n),e==="d"?this.onDataUpdate_(n.p,n.d,!1,n.t):e==="m"?this.onDataUpdate_(n.p,n.d,!0,n.t):e==="c"?this.onListenRevoked_(n.p,n.q):e==="ac"?this.onAuthRevoked_(n.s,n.d):e==="apc"?this.onAppCheckRevoked_(n.s,n.d):e==="sd"?this.onSecurityDebugPacket_(n):ig("Unrecognized action received from server: "+bt(e)+`
Are you using the latest client?`)}onReady_(e,n){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(e),this.lastSessionId=n,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){G(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Da,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=Da,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>lB&&(this.reconnectDelay_=Da),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const e=new Date().getTime()-this.lastConnectionAttemptTime_;let n=Math.max(0,this.reconnectDelay_-e);n=Math.random()*n,this.log_("Trying to reconnect in "+n+"ms"),this.scheduleConnect_(n),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*aB)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),i=this.onRealtimeDisconnect_.bind(this),r=this.id+":"+ir.nextConnectionId_++,o=this.lastSessionId;let l=!1,u=null;const h=function(){u?u.close():(l=!0,i())},d=function(_){G(u,"sendRequest call when we're not connected not allowed."),u.sendRequest(_)};this.realtime_={close:h,sendRequest:d};const p=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[_,y]=await Promise.all([this.authTokenProvider_.getToken(p),this.appCheckTokenProvider_.getToken(p)]);l?$t("getToken() completed but was canceled"):($t("getToken() completed. Creating connection."),this.authToken_=_&&_.accessToken,this.appCheckToken_=y&&y.token,u=new eB(r,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,n,i,E=>{on(E+" ("+this.repoInfo_.toString()+")"),this.interrupt(cB)},o))}catch(_){this.log_("Failed to get token: "+_),l||(this.repoInfo_.nodeAdmin&&on(_),h())}}}interrupt(e){$t("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){$t("Resuming connection for reason: "+e),delete this.interruptReasons_[e],KE(this.interruptReasons_)&&(this.reconnectDelay_=Da,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const n=e-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:n})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const n=this.outstandingPuts_[e];n&&"h"in n.request&&n.queued&&(n.onComplete&&n.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(e,n){let i;n?i=n.map(o=>c_(o)).join("$"):i="default";const r=this.removeListen_(e,i);r&&r.onComplete&&r.onComplete("permission_denied")}removeListen_(e,n){const i=new Ge(e).toString();let r;if(this.listens.has(i)){const o=this.listens.get(i);r=o.get(n),o.delete(n),o.size===0&&this.listens.delete(i)}else r=void 0;return r}onAuthRevoked_(e,n){$t("Auth token revoked: "+e+"/"+n),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(e==="invalid_token"||e==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=Nb&&(this.reconnectDelay_=Ob,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,n){$t("App check token revoked: "+e+"/"+n),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(e==="invalid_token"||e==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=Nb&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const n of e.values())this.sendListen_(n);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let n="js";e["sdk."+n+"."+AC.replace(/\./g,"-")]=1,n_()?e["framework.cordova"]=1:nC()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=qu.getInstance().currentlyOnline();return KE(this.interruptReasons_)&&e}}ir.nextPersistentConnectionId_=0;ir.nextConnectionId_=0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ne{constructor(e,n){this.name=e,this.node=n}static Wrap(e,n){return new Ne(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bh{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,n){const i=new Ne(Bo,e),r=new Ne(Bo,n);return this.compare(i,r)!==0}minPost(){return Ne.MIN}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let su;class QC extends Bh{static get __EMPTY_NODE(){return su}static set __EMPTY_NODE(e){su=e}compare(e,n){return js(e.name,n.name)}isDefinedOn(e){throw ta("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,n){return!1}minPost(){return Ne.MIN}maxPost(){return new Ne(Ms,su)}makePost(e,n){return G(typeof e=="string","KeyIndex indexValue must always be a string."),new Ne(e,su)}toString(){return".key"}}const ko=new QC;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ou{constructor(e,n,i,r,o=null){this.isReverse_=r,this.resultGenerator_=o,this.nodeStack_=[];let l=1;for(;!e.isEmpty();)if(e=e,l=n?i(e.key,n):1,r&&(l*=-1),l<0)this.isReverse_?e=e.left:e=e.right;else if(l===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(e.key,e.value):n={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}class St{constructor(e,n,i,r,o){this.key=e,this.value=n,this.color=i??St.RED,this.left=r??mn.EMPTY_NODE,this.right=o??mn.EMPTY_NODE}copy(e,n,i,r,o){return new St(e??this.key,n??this.value,i??this.color,r??this.left,o??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,i){let r=this;const o=i(e,r.key);return o<0?r=r.copy(null,null,null,r.left.insert(e,n,i),null):o===0?r=r.copy(null,n,null,null,null):r=r.copy(null,null,null,null,r.right.insert(e,n,i)),r.fixUp_()}removeMin_(){if(this.left.isEmpty())return mn.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,n){let i,r;if(i=this,n(e,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),n(e,i.key)===0){if(i.right.isEmpty())return mn.EMPTY_NODE;r=i.right.min_(),i=i.copy(r.key,r.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,St.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,St.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}St.RED=!0;St.BLACK=!1;class uB{copy(e,n,i,r,o){return this}insert(e,n,i){return new St(e,n,null)}remove(e,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}class mn{constructor(e,n=mn.EMPTY_NODE){this.comparator_=e,this.root_=n}insert(e,n){return new mn(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,St.BLACK,null,null))}remove(e){return new mn(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,St.BLACK,null,null))}get(e){let n,i=this.root_;for(;!i.isEmpty();){if(n=this.comparator_(e,i.key),n===0)return i.value;n<0?i=i.left:n>0&&(i=i.right)}return null}getPredecessorKey(e){let n,i=this.root_,r=null;for(;!i.isEmpty();)if(n=this.comparator_(e,i.key),n===0){if(i.left.isEmpty())return r?r.key:null;for(i=i.left;!i.right.isEmpty();)i=i.right;return i.key}else n<0?i=i.left:n>0&&(r=i,i=i.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new ou(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,n){return new ou(this.root_,e,this.comparator_,!1,n)}getReverseIteratorFrom(e,n){return new ou(this.root_,e,this.comparator_,!0,n)}getReverseIterator(e){return new ou(this.root_,null,this.comparator_,!0,e)}}mn.EMPTY_NODE=new uB;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hB(t,e){return js(t.name,e.name)}function __(t,e){return js(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let sg;function fB(t){sg=t}const JC=function(t){return typeof t=="number"?"number:"+RC(t):"string:"+t},ZC=function(t){if(t.isLeafNode()){const e=t.val();G(typeof e=="string"||typeof e=="number"||typeof e=="object"&&Fi(e,".sv"),"Priority must be a string or number.")}else G(t===sg||t.isEmpty(),"priority of unexpected type.");G(t===sg||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Rb;class At{constructor(e,n=At.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=n,this.lazyHash_=null,G(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),ZC(this.priorityNode_)}static set __childrenNodeConstructor(e){Rb=e}static get __childrenNodeConstructor(){return Rb}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new At(this.value_,e)}getImmediateChild(e){return e===".priority"?this.priorityNode_:At.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return xe(e)?this:Oe(e)===".priority"?this.priorityNode_:At.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,n){return null}updateImmediateChild(e,n){return e===".priority"?this.updatePriority(n):n.isEmpty()&&e!==".priority"?this:At.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)}updateChild(e,n){const i=Oe(e);return i===null?n:n.isEmpty()&&i!==".priority"?this:(G(i!==".priority"||Vr(e)===1,".priority must be the last token in a path"),this.updateImmediateChild(i,At.__childrenNodeConstructor.EMPTY_NODE.updateChild(et(e),n)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,n){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+JC(this.priorityNode_.val())+":");const n=typeof this.value_;e+=n+":",n==="number"?e+=RC(this.value_):e+=this.value_,this.lazyHash_=OC(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===At.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof At.__childrenNodeConstructor?-1:(G(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const n=typeof e.value_,i=typeof this.value_,r=At.VALUE_TYPE_ORDER.indexOf(n),o=At.VALUE_TYPE_ORDER.indexOf(i);return G(r>=0,"Unknown leaf type: "+n),G(o>=0,"Unknown leaf type: "+i),r===o?i==="object"?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:o-r}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const n=e;return this.value_===n.value_&&this.priorityNode_.equals(n.priorityNode_)}else return!1}}At.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let e0,t0;function dB(t){e0=t}function pB(t){t0=t}class gB extends Bh{compare(e,n){const i=e.node.getPriority(),r=n.node.getPriority(),o=i.compareTo(r);return o===0?js(e.name,n.name):o}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,n){return!e.getPriority().equals(n.getPriority())}minPost(){return Ne.MIN}maxPost(){return new Ne(Ms,new At("[PRIORITY-POST]",t0))}makePost(e,n){const i=e0(e);return new Ne(n,new At("[PRIORITY-POST]",i))}toString(){return".priority"}}const dt=new gB;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _B=Math.log(2);class mB{constructor(e){const n=o=>parseInt(Math.log(o)/_B,10),i=o=>parseInt(Array(o+1).join("1"),2);this.count=n(e+1),this.current_=this.count-1;const r=i(this.count);this.bits_=e+1&r}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const Ku=function(t,e,n,i){t.sort(e);const r=function(h,d){const p=d-h;let _,y;if(p===0)return null;if(p===1)return _=t[h],y=n?n(_):_,new St(y,_.node,St.BLACK,null,null);{const E=parseInt(p/2,10)+h,S=r(h,E),O=r(E+1,d);return _=t[E],y=n?n(_):_,new St(y,_.node,St.BLACK,S,O)}},o=function(h){let d=null,p=null,_=t.length;const y=function(S,O){const L=_-S,q=_;_-=S;const oe=r(L+1,q),H=t[L],V=n?n(H):H;E(new St(V,H.node,O,null,oe))},E=function(S){d?(d.left=S,d=S):(p=S,d=S)};for(let S=0;S<h.count;++S){const O=h.nextBitIsOne(),L=Math.pow(2,h.count-(S+1));O?y(L,St.BLACK):(y(L,St.BLACK),y(L,St.RED))}return p},l=new mB(t.length),u=o(l);return new mn(i||e,u)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ep;const po={};class tr{constructor(e,n){this.indexes_=e,this.indexSet_=n}static get Default(){return G(po&&dt,"ChildrenNode.ts has not been loaded"),ep=ep||new tr({".priority":po},{".priority":dt}),ep}get(e){const n=Uo(this.indexes_,e);if(!n)throw new Error("No index defined for "+e);return n instanceof mn?n:null}hasIndex(e){return Fi(this.indexSet_,e.toString())}addIndex(e,n){G(e!==ko,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const i=[];let r=!1;const o=n.getIterator(Ne.Wrap);let l=o.getNext();for(;l;)r=r||e.isDefinedOn(l.node),i.push(l),l=o.getNext();let u;r?u=Ku(i,e.getCompare()):u=po;const h=e.toString(),d=Object.assign({},this.indexSet_);d[h]=e;const p=Object.assign({},this.indexes_);return p[h]=u,new tr(p,d)}addToIndexes(e,n){const i=Uu(this.indexes_,(r,o)=>{const l=Uo(this.indexSet_,o);if(G(l,"Missing index implementation for "+o),r===po)if(l.isDefinedOn(e.node)){const u=[],h=n.getIterator(Ne.Wrap);let d=h.getNext();for(;d;)d.name!==e.name&&u.push(d),d=h.getNext();return u.push(e),Ku(u,l.getCompare())}else return po;else{const u=n.get(e.name);let h=r;return u&&(h=h.remove(new Ne(e.name,u))),h.insert(e,e.node)}});return new tr(i,this.indexSet_)}removeFromIndexes(e,n){const i=Uu(this.indexes_,r=>{if(r===po)return r;{const o=n.get(e.name);return o?r.remove(new Ne(e.name,o)):r}});return new tr(i,this.indexSet_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let La;class he{constructor(e,n,i){this.children_=e,this.priorityNode_=n,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&ZC(this.priorityNode_),this.children_.isEmpty()&&G(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return La||(La=new he(new mn(__),null,tr.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||La}updatePriority(e){return this.children_.isEmpty()?this:new he(this.children_,e,this.indexMap_)}getImmediateChild(e){if(e===".priority")return this.getPriority();{const n=this.children_.get(e);return n===null?La:n}}getChild(e){const n=Oe(e);return n===null?this:this.getImmediateChild(n).getChild(et(e))}hasChild(e){return this.children_.get(e)!==null}updateImmediateChild(e,n){if(G(n,"We should always be passing snapshot nodes"),e===".priority")return this.updatePriority(n);{const i=new Ne(e,n);let r,o;n.isEmpty()?(r=this.children_.remove(e),o=this.indexMap_.removeFromIndexes(i,this.children_)):(r=this.children_.insert(e,n),o=this.indexMap_.addToIndexes(i,this.children_));const l=r.isEmpty()?La:this.priorityNode_;return new he(r,l,o)}}updateChild(e,n){const i=Oe(e);if(i===null)return n;{G(Oe(e)!==".priority"||Vr(e)===1,".priority must be the last token in a path");const r=this.getImmediateChild(i).updateChild(et(e),n);return this.updateImmediateChild(i,r)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const n={};let i=0,r=0,o=!0;if(this.forEachChild(dt,(l,u)=>{n[l]=u.val(e),i++,o&&he.INTEGER_REGEXP_.test(l)?r=Math.max(r,Number(l)):o=!1}),!e&&o&&r<2*i){const l=[];for(const u in n)l[u]=n[u];return l}else return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}hash(){if(this.lazyHash_===null){let e="";this.getPriority().isEmpty()||(e+="priority:"+JC(this.getPriority().val())+":"),this.forEachChild(dt,(n,i)=>{const r=i.hash();r!==""&&(e+=":"+n+":"+r)}),this.lazyHash_=e===""?"":OC(e)}return this.lazyHash_}getPredecessorChildName(e,n,i){const r=this.resolveIndex_(i);if(r){const o=r.getPredecessorKey(new Ne(e,n));return o?o.name:null}else return this.children_.getPredecessorKey(e)}getFirstChildName(e){const n=this.resolveIndex_(e);if(n){const i=n.minKey();return i&&i.name}else return this.children_.minKey()}getFirstChild(e){const n=this.getFirstChildName(e);return n?new Ne(n,this.children_.get(n)):null}getLastChildName(e){const n=this.resolveIndex_(e);if(n){const i=n.maxKey();return i&&i.name}else return this.children_.maxKey()}getLastChild(e){const n=this.getLastChildName(e);return n?new Ne(n,this.children_.get(n)):null}forEachChild(e,n){const i=this.resolveIndex_(e);return i?i.inorderTraversal(r=>n(r.name,r.node)):this.children_.inorderTraversal(n)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,n){const i=this.resolveIndex_(n);if(i)return i.getIteratorFrom(e,r=>r);{const r=this.children_.getIteratorFrom(e.name,Ne.Wrap);let o=r.peek();for(;o!=null&&n.compare(o,e)<0;)r.getNext(),o=r.peek();return r}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,n){const i=this.resolveIndex_(n);if(i)return i.getReverseIteratorFrom(e,r=>r);{const r=this.children_.getReverseIteratorFrom(e.name,Ne.Wrap);let o=r.peek();for(;o!=null&&n.compare(o,e)>0;)r.getNext(),o=r.peek();return r}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===Ul?-1:0}withIndex(e){if(e===ko||this.indexMap_.hasIndex(e))return this;{const n=this.indexMap_.addIndex(e,this.children_);return new he(this.children_,this.priorityNode_,n)}}isIndexed(e){return e===ko||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const n=e;if(this.getPriority().equals(n.getPriority()))if(this.children_.count()===n.children_.count()){const i=this.getIterator(dt),r=n.getIterator(dt);let o=i.getNext(),l=r.getNext();for(;o&&l;){if(o.name!==l.name||!o.node.equals(l.node))return!1;o=i.getNext(),l=r.getNext()}return o===null&&l===null}else return!1;else return!1}}resolveIndex_(e){return e===ko?null:this.indexMap_.get(e.toString())}}he.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class vB extends he{constructor(){super(new mn(__),he.EMPTY_NODE,tr.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return he.EMPTY_NODE}isEmpty(){return!1}}const Ul=new vB;Object.defineProperties(Ne,{MIN:{value:new Ne(Bo,he.EMPTY_NODE)},MAX:{value:new Ne(Ms,Ul)}});QC.__EMPTY_NODE=he.EMPTY_NODE;At.__childrenNodeConstructor=he;fB(Ul);pB(Ul);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yB=!0;function Et(t,e=null){if(t===null)return he.EMPTY_NODE;if(typeof t=="object"&&".priority"in t&&(e=t[".priority"]),G(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof t=="object"&&".value"in t&&t[".value"]!==null&&(t=t[".value"]),typeof t!="object"||".sv"in t){const n=t;return new At(n,Et(e))}if(!(t instanceof Array)&&yB){const n=[];let i=!1;if(Wt(t,(l,u)=>{if(l.substring(0,1)!=="."){const h=Et(u);h.isEmpty()||(i=i||!h.getPriority().isEmpty(),n.push(new Ne(l,h)))}}),n.length===0)return he.EMPTY_NODE;const o=Ku(n,hB,l=>l.name,__);if(i){const l=Ku(n,dt.getCompare());return new he(o,Et(e),new tr({".priority":l},{".priority":dt}))}else return new he(o,Et(e),tr.Default)}else{let n=he.EMPTY_NODE;return Wt(t,(i,r)=>{if(Fi(t,i)&&i.substring(0,1)!=="."){const o=Et(r);(o.isLeafNode()||!o.isEmpty())&&(n=n.updateImmediateChild(i,o))}}),n.updatePriority(Et(e))}}dB(Et);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EB extends Bh{constructor(e){super(),this.indexPath_=e,G(!xe(e)&&Oe(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,n){const i=this.extractChild(e.node),r=this.extractChild(n.node),o=i.compareTo(r);return o===0?js(e.name,n.name):o}makePost(e,n){const i=Et(e),r=he.EMPTY_NODE.updateChild(this.indexPath_,i);return new Ne(n,r)}maxPost(){const e=he.EMPTY_NODE.updateChild(this.indexPath_,Ul);return new Ne(Ms,e)}toString(){return ml(this.indexPath_,0).join("/")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bB extends Bh{compare(e,n){const i=e.node.compareTo(n.node);return i===0?js(e.name,n.name):i}isDefinedOn(e){return!0}indexedValueChanged(e,n){return!e.equals(n)}minPost(){return Ne.MIN}maxPost(){return Ne.MAX}makePost(e,n){const i=Et(e);return new Ne(n,i)}toString(){return".value"}}const wB=new bB;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function n0(t){return{type:"value",snapshotNode:t}}function Wo(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function vl(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function yl(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}function TB(t,e){return{type:"child_moved",snapshotNode:e,childName:t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m_{constructor(e){this.index_=e}updateChild(e,n,i,r,o,l){G(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const u=e.getImmediateChild(n);return u.getChild(r).equals(i.getChild(r))&&u.isEmpty()===i.isEmpty()||(l!=null&&(i.isEmpty()?e.hasChild(n)?l.trackChildChange(vl(n,u)):G(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):u.isEmpty()?l.trackChildChange(Wo(n,i)):l.trackChildChange(yl(n,i,u))),e.isLeafNode()&&i.isEmpty())?e:e.updateImmediateChild(n,i).withIndex(this.index_)}updateFullNode(e,n,i){return i!=null&&(e.isLeafNode()||e.forEachChild(dt,(r,o)=>{n.hasChild(r)||i.trackChildChange(vl(r,o))}),n.isLeafNode()||n.forEachChild(dt,(r,o)=>{if(e.hasChild(r)){const l=e.getImmediateChild(r);l.equals(o)||i.trackChildChange(yl(r,o,l))}else i.trackChildChange(Wo(r,o))})),n.withIndex(this.index_)}updatePriority(e,n){return e.isEmpty()?he.EMPTY_NODE:e.updatePriority(n)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class El{constructor(e){this.indexedFilter_=new m_(e.getIndex()),this.index_=e.getIndex(),this.startPost_=El.getStartPost_(e),this.endPost_=El.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const n=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,i=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return n&&i}updateChild(e,n,i,r,o,l){return this.matches(new Ne(n,i))||(i=he.EMPTY_NODE),this.indexedFilter_.updateChild(e,n,i,r,o,l)}updateFullNode(e,n,i){n.isLeafNode()&&(n=he.EMPTY_NODE);let r=n.withIndex(this.index_);r=r.updatePriority(he.EMPTY_NODE);const o=this;return n.forEachChild(dt,(l,u)=>{o.matches(new Ne(l,u))||(r=r.updateImmediateChild(l,he.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,r,i)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const n=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),n)}else return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const n=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),n)}else return e.getIndex().maxPost()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CB{constructor(e){this.withinDirectionalStart=n=>this.reverse_?this.withinEndPost(n):this.withinStartPost(n),this.withinDirectionalEnd=n=>this.reverse_?this.withinStartPost(n):this.withinEndPost(n),this.withinStartPost=n=>{const i=this.index_.compare(this.rangedFilter_.getStartPost(),n);return this.startIsInclusive_?i<=0:i<0},this.withinEndPost=n=>{const i=this.index_.compare(n,this.rangedFilter_.getEndPost());return this.endIsInclusive_?i<=0:i<0},this.rangedFilter_=new El(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,n,i,r,o,l){return this.rangedFilter_.matches(new Ne(n,i))||(i=he.EMPTY_NODE),e.getImmediateChild(n).equals(i)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,n,i,r,o,l):this.fullLimitUpdateChild_(e,n,i,o,l)}updateFullNode(e,n,i){let r;if(n.isLeafNode()||n.isEmpty())r=he.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<n.numChildren()&&n.isIndexed(this.index_)){r=he.EMPTY_NODE.withIndex(this.index_);let o;this.reverse_?o=n.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):o=n.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let l=0;for(;o.hasNext()&&l<this.limit_;){const u=o.getNext();if(this.withinDirectionalStart(u))if(this.withinDirectionalEnd(u))r=r.updateImmediateChild(u.name,u.node),l++;else break;else continue}}else{r=n.withIndex(this.index_),r=r.updatePriority(he.EMPTY_NODE);let o;this.reverse_?o=r.getReverseIterator(this.index_):o=r.getIterator(this.index_);let l=0;for(;o.hasNext();){const u=o.getNext();l<this.limit_&&this.withinDirectionalStart(u)&&this.withinDirectionalEnd(u)?l++:r=r.updateImmediateChild(u.name,he.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,r,i)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,n,i,r,o){let l;if(this.reverse_){const _=this.index_.getCompare();l=(y,E)=>_(E,y)}else l=this.index_.getCompare();const u=e;G(u.numChildren()===this.limit_,"");const h=new Ne(n,i),d=this.reverse_?u.getFirstChild(this.index_):u.getLastChild(this.index_),p=this.rangedFilter_.matches(h);if(u.hasChild(n)){const _=u.getImmediateChild(n);let y=r.getChildAfterChild(this.index_,d,this.reverse_);for(;y!=null&&(y.name===n||u.hasChild(y.name));)y=r.getChildAfterChild(this.index_,y,this.reverse_);const E=y==null?1:l(y,h);if(p&&!i.isEmpty()&&E>=0)return o!=null&&o.trackChildChange(yl(n,i,_)),u.updateImmediateChild(n,i);{o!=null&&o.trackChildChange(vl(n,_));const O=u.updateImmediateChild(n,he.EMPTY_NODE);return y!=null&&this.rangedFilter_.matches(y)?(o!=null&&o.trackChildChange(Wo(y.name,y.node)),O.updateImmediateChild(y.name,y.node)):O}}else return i.isEmpty()?e:p&&l(d,h)>=0?(o!=null&&(o.trackChildChange(vl(d.name,d.node)),o.trackChildChange(Wo(n,i))),u.updateImmediateChild(n,i).updateImmediateChild(d.name,he.EMPTY_NODE)):e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v_{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=dt}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return G(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return G(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Bo}hasEnd(){return this.endSet_}getIndexEndValue(){return G(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return G(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Ms}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return G(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===dt}copy(){const e=new v_;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function IB(t){return t.loadsAllData()?new m_(t.getIndex()):t.hasLimit()?new CB(t):new El(t)}function xb(t){const e={};if(t.isDefault())return e;let n;if(t.index_===dt?n="$priority":t.index_===wB?n="$value":t.index_===ko?n="$key":(G(t.index_ instanceof EB,"Unrecognized index type!"),n=t.index_.toString()),e.orderBy=bt(n),t.startSet_){const i=t.startAfterSet_?"startAfter":"startAt";e[i]=bt(t.indexStartValue_),t.startNameSet_&&(e[i]+=","+bt(t.indexStartName_))}if(t.endSet_){const i=t.endBeforeSet_?"endBefore":"endAt";e[i]=bt(t.indexEndValue_),t.endNameSet_&&(e[i]+=","+bt(t.indexEndName_))}return t.limitSet_&&(t.isViewFromLeft()?e.limitToFirst=t.limit_:e.limitToLast=t.limit_),e}function Db(t){const e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_),e.sin=!t.startAfterSet_),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_),e.ein=!t.endBeforeSet_),t.limitSet_){e.l=t.limit_;let n=t.viewFrom_;n===""&&(t.isViewFromLeft()?n="l":n="r"),e.vf=n}return t.index_!==dt&&(e.i=t.index_.toString()),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gu extends GC{constructor(e,n,i,r){super(),this.repoInfo_=e,this.onDataUpdate_=n,this.authTokenProvider_=i,this.appCheckTokenProvider_=r,this.log_=Fl("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,n){return n!==void 0?"tag$"+n:(G(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,n,i,r){const o=e._path.toString();this.log_("Listen called for "+o+" "+e._queryIdentifier);const l=Gu.getListenId_(e,i),u={};this.listens_[l]=u;const h=xb(e._queryParams);this.restRequest_(o+".json",h,(d,p)=>{let _=p;if(d===404&&(_=null,d=null),d===null&&this.onDataUpdate_(o,_,!1,i),Uo(this.listens_,l)===u){let y;d?d===401?y="permission_denied":y="rest_error:"+d:y="ok",r(y,null)}})}unlisten(e,n){const i=Gu.getListenId_(e,n);delete this.listens_[i]}get(e){const n=xb(e._queryParams),i=e._path.toString(),r=new Ps;return this.restRequest_(i+".json",n,(o,l)=>{let u=l;o===404&&(u=null,o=null),o===null?(this.onDataUpdate_(i,u,!1,null),r.resolve(u)):r.reject(new Error(u))}),r.promise}refreshAuthToken(e){}restRequest_(e,n={},i){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([r,o])=>{r&&r.accessToken&&(n.auth=r.accessToken),o&&o.token&&(n.ac=o.token);const l=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+r_(n);this.log_("Sending REST request for "+l);const u=new XMLHttpRequest;u.onreadystatechange=()=>{if(i&&u.readyState===4){this.log_("REST Response for "+l+" received. status:",u.status,"response:",u.responseText);let h=null;if(u.status>=200&&u.status<300){try{h=dl(u.responseText)}catch{on("Failed to parse JSON response for "+l+": "+u.responseText)}i(null,h)}else u.status!==401&&u.status!==404&&on("Got unsuccessful REST response for "+l+" Status: "+u.status),i(u.status);i=null}},u.open("GET",l,!0),u.send()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AB{constructor(){this.rootNode_=he.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,n){this.rootNode_=this.rootNode_.updateChild(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zu(){return{value:null,children:new Map}}function i0(t,e,n){if(xe(e))t.value=n,t.children.clear();else if(t.value!==null)t.value=t.value.updateChild(e,n);else{const i=Oe(e);t.children.has(i)||t.children.set(i,zu());const r=t.children.get(i);e=et(e),i0(r,e,n)}}function og(t,e,n){t.value!==null?n(e,t.value):SB(t,(i,r)=>{const o=new Ge(e.toString()+"/"+i);og(r,o,n)})}function SB(t,e){t.children.forEach((n,i)=>{e(i,n)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OB{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),n=Object.assign({},e);return this.last_&&Wt(this.last_,(i,r)=>{n[i]=n[i]-r}),this.last_=e,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lb=10*1e3,NB=30*1e3,RB=5*60*1e3;class xB{constructor(e,n){this.server_=n,this.statsToReport_={},this.statsListener_=new OB(e);const i=Lb+(NB-Lb)*Math.random();Ja(this.reportStats_.bind(this),Math.floor(i))}reportStats_(){const e=this.statsListener_.get(),n={};let i=!1;Wt(e,(r,o)=>{o>0&&Fi(this.statsToReport_,r)&&(n[r]=o,i=!0)}),i&&this.server_.reportStats(n),Ja(this.reportStats_.bind(this),Math.floor(Math.random()*2*RB))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ui;(function(t){t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(ui||(ui={}));function y_(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function E_(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function b_(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yu{constructor(e,n,i){this.path=e,this.affectedTree=n,this.revert=i,this.type=ui.ACK_USER_WRITE,this.source=y_()}operationForChild(e){if(xe(this.path)){if(this.affectedTree.value!=null)return G(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const n=this.affectedTree.subtree(new Ge(e));return new Yu(Fe(),n,this.revert)}}else return G(Oe(this.path)===e,"operationForChild called for unrelated child."),new Yu(et(this.path),this.affectedTree,this.revert)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bl{constructor(e,n){this.source=e,this.path=n,this.type=ui.LISTEN_COMPLETE}operationForChild(e){return xe(this.path)?new bl(this.source,Fe()):new bl(this.source,et(this.path))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $s{constructor(e,n,i){this.source=e,this.path=n,this.snap=i,this.type=ui.OVERWRITE}operationForChild(e){return xe(this.path)?new $s(this.source,Fe(),this.snap.getImmediateChild(e)):new $s(this.source,et(this.path),this.snap)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ho{constructor(e,n,i){this.source=e,this.path=n,this.children=i,this.type=ui.MERGE}operationForChild(e){if(xe(this.path)){const n=this.children.subtree(new Ge(e));return n.isEmpty()?null:n.value?new $s(this.source,Fe(),n.value):new Ho(this.source,Fe(),n)}else return G(Oe(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new Ho(this.source,et(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jr{constructor(e,n,i){this.node_=e,this.fullyInitialized_=n,this.filtered_=i}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(xe(e))return this.isFullyInitialized()&&!this.filtered_;const n=Oe(e);return this.isCompleteForChild(n)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DB{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function LB(t,e,n,i){const r=[],o=[];return e.forEach(l=>{l.type==="child_changed"&&t.index_.indexedValueChanged(l.oldSnap,l.snapshotNode)&&o.push(TB(l.childName,l.snapshotNode))}),Pa(t,r,"child_removed",e,i,n),Pa(t,r,"child_added",e,i,n),Pa(t,r,"child_moved",o,i,n),Pa(t,r,"child_changed",e,i,n),Pa(t,r,"value",e,i,n),r}function Pa(t,e,n,i,r,o){const l=i.filter(u=>u.type===n);l.sort((u,h)=>kB(t,u,h)),l.forEach(u=>{const h=PB(t,u,o);r.forEach(d=>{d.respondsTo(u.type)&&e.push(d.createEvent(h,t.query_))})})}function PB(t,e,n){return e.type==="value"||e.type==="child_removed"||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}function kB(t,e,n){if(e.childName==null||n.childName==null)throw ta("Should only compare child_ events.");const i=new Ne(e.childName,e.snapshotNode),r=new Ne(n.childName,n.snapshotNode);return t.index_.compare(i,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wh(t,e){return{eventCache:t,serverCache:e}}function Za(t,e,n,i){return Wh(new jr(e,n,i),t.serverCache)}function r0(t,e,n,i){return Wh(t.eventCache,new jr(e,n,i))}function Xu(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function Fs(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let tp;const MB=()=>(tp||(tp=new mn(EU)),tp);class Qe{constructor(e,n=MB()){this.value=e,this.children=n}static fromObject(e){let n=new Qe(null);return Wt(e,(i,r)=>{n=n.set(new Ge(i),r)}),n}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,n){if(this.value!=null&&n(this.value))return{path:Fe(),value:this.value};if(xe(e))return null;{const i=Oe(e),r=this.children.get(i);if(r!==null){const o=r.findRootMostMatchingPathAndValue(et(e),n);return o!=null?{path:ft(new Ge(i),o.path),value:o.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(xe(e))return this;{const n=Oe(e),i=this.children.get(n);return i!==null?i.subtree(et(e)):new Qe(null)}}set(e,n){if(xe(e))return new Qe(n,this.children);{const i=Oe(e),o=(this.children.get(i)||new Qe(null)).set(et(e),n),l=this.children.insert(i,o);return new Qe(this.value,l)}}remove(e){if(xe(e))return this.children.isEmpty()?new Qe(null):new Qe(null,this.children);{const n=Oe(e),i=this.children.get(n);if(i){const r=i.remove(et(e));let o;return r.isEmpty()?o=this.children.remove(n):o=this.children.insert(n,r),this.value===null&&o.isEmpty()?new Qe(null):new Qe(this.value,o)}else return this}}get(e){if(xe(e))return this.value;{const n=Oe(e),i=this.children.get(n);return i?i.get(et(e)):null}}setTree(e,n){if(xe(e))return n;{const i=Oe(e),o=(this.children.get(i)||new Qe(null)).setTree(et(e),n);let l;return o.isEmpty()?l=this.children.remove(i):l=this.children.insert(i,o),new Qe(this.value,l)}}fold(e){return this.fold_(Fe(),e)}fold_(e,n){const i={};return this.children.inorderTraversal((r,o)=>{i[r]=o.fold_(ft(e,r),n)}),n(e,this.value,i)}findOnPath(e,n){return this.findOnPath_(e,Fe(),n)}findOnPath_(e,n,i){const r=this.value?i(n,this.value):!1;if(r)return r;if(xe(e))return null;{const o=Oe(e),l=this.children.get(o);return l?l.findOnPath_(et(e),ft(n,o),i):null}}foreachOnPath(e,n){return this.foreachOnPath_(e,Fe(),n)}foreachOnPath_(e,n,i){if(xe(e))return this;{this.value&&i(n,this.value);const r=Oe(e),o=this.children.get(r);return o?o.foreachOnPath_(et(e),ft(n,r),i):new Qe(null)}}foreach(e){this.foreach_(Fe(),e)}foreach_(e,n){this.children.inorderTraversal((i,r)=>{r.foreach_(ft(e,i),n)}),this.value&&n(e,this.value)}foreachChild(e){this.children.inorderTraversal((n,i)=>{i.value&&e(n,i.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class di{constructor(e){this.writeTree_=e}static empty(){return new di(new Qe(null))}}function el(t,e,n){if(xe(e))return new di(new Qe(n));{const i=t.writeTree_.findRootMostValueAndPath(e);if(i!=null){const r=i.path;let o=i.value;const l=rn(r,e);return o=o.updateChild(l,n),new di(t.writeTree_.set(r,o))}else{const r=new Qe(n),o=t.writeTree_.setTree(e,r);return new di(o)}}}function ag(t,e,n){let i=t;return Wt(n,(r,o)=>{i=el(i,ft(e,r),o)}),i}function Pb(t,e){if(xe(e))return di.empty();{const n=t.writeTree_.setTree(e,new Qe(null));return new di(n)}}function lg(t,e){return qs(t,e)!=null}function qs(t,e){const n=t.writeTree_.findRootMostValueAndPath(e);return n!=null?t.writeTree_.get(n.path).getChild(rn(n.path,e)):null}function kb(t){const e=[],n=t.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild(dt,(i,r)=>{e.push(new Ne(i,r))}):t.writeTree_.children.inorderTraversal((i,r)=>{r.value!=null&&e.push(new Ne(i,r.value))}),e}function Fr(t,e){if(xe(e))return t;{const n=qs(t,e);return n!=null?new di(new Qe(n)):new di(t.writeTree_.subtree(e))}}function cg(t){return t.writeTree_.isEmpty()}function Vo(t,e){return s0(Fe(),t.writeTree_,e)}function s0(t,e,n){if(e.value!=null)return n.updateChild(t,e.value);{let i=null;return e.children.inorderTraversal((r,o)=>{r===".priority"?(G(o.value!==null,"Priority writes must always be leaf nodes"),i=o.value):n=s0(ft(t,r),o,n)}),!n.getChild(t).isEmpty()&&i!==null&&(n=n.updateChild(ft(t,".priority"),i)),n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hh(t,e){return c0(e,t)}function $B(t,e,n,i,r){G(i>t.lastWriteId,"Stacking an older write on top of newer ones"),r===void 0&&(r=!0),t.allWrites.push({path:e,snap:n,writeId:i,visible:r}),r&&(t.visibleWrites=el(t.visibleWrites,e,n)),t.lastWriteId=i}function FB(t,e,n,i){G(i>t.lastWriteId,"Stacking an older merge on top of newer ones"),t.allWrites.push({path:e,children:n,writeId:i,visible:!0}),t.visibleWrites=ag(t.visibleWrites,e,n),t.lastWriteId=i}function UB(t,e){for(let n=0;n<t.allWrites.length;n++){const i=t.allWrites[n];if(i.writeId===e)return i}return null}function BB(t,e){const n=t.allWrites.findIndex(u=>u.writeId===e);G(n>=0,"removeWrite called with nonexistent writeId.");const i=t.allWrites[n];t.allWrites.splice(n,1);let r=i.visible,o=!1,l=t.allWrites.length-1;for(;r&&l>=0;){const u=t.allWrites[l];u.visible&&(l>=n&&WB(u,i.path)?r=!1:jn(i.path,u.path)&&(o=!0)),l--}if(r){if(o)return HB(t),!0;if(i.snap)t.visibleWrites=Pb(t.visibleWrites,i.path);else{const u=i.children;Wt(u,h=>{t.visibleWrites=Pb(t.visibleWrites,ft(i.path,h))})}return!0}else return!1}function WB(t,e){if(t.snap)return jn(t.path,e);for(const n in t.children)if(t.children.hasOwnProperty(n)&&jn(ft(t.path,n),e))return!0;return!1}function HB(t){t.visibleWrites=o0(t.allWrites,VB,Fe()),t.allWrites.length>0?t.lastWriteId=t.allWrites[t.allWrites.length-1].writeId:t.lastWriteId=-1}function VB(t){return t.visible}function o0(t,e,n){let i=di.empty();for(let r=0;r<t.length;++r){const o=t[r];if(e(o)){const l=o.path;let u;if(o.snap)jn(n,l)?(u=rn(n,l),i=el(i,u,o.snap)):jn(l,n)&&(u=rn(l,n),i=el(i,Fe(),o.snap.getChild(u)));else if(o.children){if(jn(n,l))u=rn(n,l),i=ag(i,u,o.children);else if(jn(l,n))if(u=rn(l,n),xe(u))i=ag(i,Fe(),o.children);else{const h=Uo(o.children,Oe(u));if(h){const d=h.getChild(et(u));i=el(i,Fe(),d)}}}else throw ta("WriteRecord should have .snap or .children")}}return i}function a0(t,e,n,i,r){if(!i&&!r){const o=qs(t.visibleWrites,e);if(o!=null)return o;{const l=Fr(t.visibleWrites,e);if(cg(l))return n;if(n==null&&!lg(l,Fe()))return null;{const u=n||he.EMPTY_NODE;return Vo(l,u)}}}else{const o=Fr(t.visibleWrites,e);if(!r&&cg(o))return n;if(!r&&n==null&&!lg(o,Fe()))return null;{const l=function(d){return(d.visible||r)&&(!i||!~i.indexOf(d.writeId))&&(jn(d.path,e)||jn(e,d.path))},u=o0(t.allWrites,l,e),h=n||he.EMPTY_NODE;return Vo(u,h)}}}function jB(t,e,n){let i=he.EMPTY_NODE;const r=qs(t.visibleWrites,e);if(r)return r.isLeafNode()||r.forEachChild(dt,(o,l)=>{i=i.updateImmediateChild(o,l)}),i;if(n){const o=Fr(t.visibleWrites,e);return n.forEachChild(dt,(l,u)=>{const h=Vo(Fr(o,new Ge(l)),u);i=i.updateImmediateChild(l,h)}),kb(o).forEach(l=>{i=i.updateImmediateChild(l.name,l.node)}),i}else{const o=Fr(t.visibleWrites,e);return kb(o).forEach(l=>{i=i.updateImmediateChild(l.name,l.node)}),i}}function qB(t,e,n,i,r){G(i||r,"Either existingEventSnap or existingServerSnap must exist");const o=ft(e,n);if(lg(t.visibleWrites,o))return null;{const l=Fr(t.visibleWrites,o);return cg(l)?r.getChild(n):Vo(l,r.getChild(n))}}function KB(t,e,n,i){const r=ft(e,n),o=qs(t.visibleWrites,r);if(o!=null)return o;if(i.isCompleteForChild(n)){const l=Fr(t.visibleWrites,r);return Vo(l,i.getNode().getImmediateChild(n))}else return null}function GB(t,e){return qs(t.visibleWrites,e)}function zB(t,e,n,i,r,o,l){let u;const h=Fr(t.visibleWrites,e),d=qs(h,Fe());if(d!=null)u=d;else if(n!=null)u=Vo(h,n);else return[];if(u=u.withIndex(l),!u.isEmpty()&&!u.isLeafNode()){const p=[],_=l.getCompare(),y=o?u.getReverseIteratorFrom(i,l):u.getIteratorFrom(i,l);let E=y.getNext();for(;E&&p.length<r;)_(E,i)!==0&&p.push(E),E=y.getNext();return p}else return[]}function YB(){return{visibleWrites:di.empty(),allWrites:[],lastWriteId:-1}}function Qu(t,e,n,i){return a0(t.writeTree,t.treePath,e,n,i)}function w_(t,e){return jB(t.writeTree,t.treePath,e)}function Mb(t,e,n,i){return qB(t.writeTree,t.treePath,e,n,i)}function Ju(t,e){return GB(t.writeTree,ft(t.treePath,e))}function XB(t,e,n,i,r,o){return zB(t.writeTree,t.treePath,e,n,i,r,o)}function T_(t,e,n){return KB(t.writeTree,t.treePath,e,n)}function l0(t,e){return c0(ft(t.treePath,e),t.writeTree)}function c0(t,e){return{treePath:t,writeTree:e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QB{constructor(){this.changeMap=new Map}trackChildChange(e){const n=e.type,i=e.childName;G(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),G(i!==".priority","Only non-priority child changes can be tracked.");const r=this.changeMap.get(i);if(r){const o=r.type;if(n==="child_added"&&o==="child_removed")this.changeMap.set(i,yl(i,e.snapshotNode,r.snapshotNode));else if(n==="child_removed"&&o==="child_added")this.changeMap.delete(i);else if(n==="child_removed"&&o==="child_changed")this.changeMap.set(i,vl(i,r.oldSnap));else if(n==="child_changed"&&o==="child_added")this.changeMap.set(i,Wo(i,e.snapshotNode));else if(n==="child_changed"&&o==="child_changed")this.changeMap.set(i,yl(i,e.snapshotNode,r.oldSnap));else throw ta("Illegal combination of changes: "+e+" occurred after "+r)}else this.changeMap.set(i,e)}getChanges(){return Array.from(this.changeMap.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JB{getCompleteChild(e){return null}getChildAfterChild(e,n,i){return null}}const u0=new JB;class C_{constructor(e,n,i=null){this.writes_=e,this.viewCache_=n,this.optCompleteServerCache_=i}getCompleteChild(e){const n=this.viewCache_.eventCache;if(n.isCompleteForChild(e))return n.getNode().getImmediateChild(e);{const i=this.optCompleteServerCache_!=null?new jr(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return T_(this.writes_,e,i)}}getChildAfterChild(e,n,i){const r=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:Fs(this.viewCache_),o=XB(this.writes_,r,n,1,i,e);return o.length===0?null:o[0]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZB(t){return{filter:t}}function eW(t,e){G(e.eventCache.getNode().isIndexed(t.filter.getIndex()),"Event snap not indexed"),G(e.serverCache.getNode().isIndexed(t.filter.getIndex()),"Server snap not indexed")}function tW(t,e,n,i,r){const o=new QB;let l,u;if(n.type===ui.OVERWRITE){const d=n;d.source.fromUser?l=ug(t,e,d.path,d.snap,i,r,o):(G(d.source.fromServer,"Unknown source."),u=d.source.tagged||e.serverCache.isFiltered()&&!xe(d.path),l=Zu(t,e,d.path,d.snap,i,r,u,o))}else if(n.type===ui.MERGE){const d=n;d.source.fromUser?l=iW(t,e,d.path,d.children,i,r,o):(G(d.source.fromServer,"Unknown source."),u=d.source.tagged||e.serverCache.isFiltered(),l=hg(t,e,d.path,d.children,i,r,u,o))}else if(n.type===ui.ACK_USER_WRITE){const d=n;d.revert?l=oW(t,e,d.path,i,r,o):l=rW(t,e,d.path,d.affectedTree,i,r,o)}else if(n.type===ui.LISTEN_COMPLETE)l=sW(t,e,n.path,i,o);else throw ta("Unknown operation type: "+n.type);const h=o.getChanges();return nW(e,l,h),{viewCache:l,changes:h}}function nW(t,e,n){const i=e.eventCache;if(i.isFullyInitialized()){const r=i.getNode().isLeafNode()||i.getNode().isEmpty(),o=Xu(t);(n.length>0||!t.eventCache.isFullyInitialized()||r&&!i.getNode().equals(o)||!i.getNode().getPriority().equals(o.getPriority()))&&n.push(n0(Xu(e)))}}function h0(t,e,n,i,r,o){const l=e.eventCache;if(Ju(i,n)!=null)return e;{let u,h;if(xe(n))if(G(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const d=Fs(e),p=d instanceof he?d:he.EMPTY_NODE,_=w_(i,p);u=t.filter.updateFullNode(e.eventCache.getNode(),_,o)}else{const d=Qu(i,Fs(e));u=t.filter.updateFullNode(e.eventCache.getNode(),d,o)}else{const d=Oe(n);if(d===".priority"){G(Vr(n)===1,"Can't have a priority with additional path components");const p=l.getNode();h=e.serverCache.getNode();const _=Mb(i,n,p,h);_!=null?u=t.filter.updatePriority(p,_):u=l.getNode()}else{const p=et(n);let _;if(l.isCompleteForChild(d)){h=e.serverCache.getNode();const y=Mb(i,n,l.getNode(),h);y!=null?_=l.getNode().getImmediateChild(d).updateChild(p,y):_=l.getNode().getImmediateChild(d)}else _=T_(i,d,e.serverCache);_!=null?u=t.filter.updateChild(l.getNode(),d,_,p,r,o):u=l.getNode()}}return Za(e,u,l.isFullyInitialized()||xe(n),t.filter.filtersNodes())}}function Zu(t,e,n,i,r,o,l,u){const h=e.serverCache;let d;const p=l?t.filter:t.filter.getIndexedFilter();if(xe(n))d=p.updateFullNode(h.getNode(),i,null);else if(p.filtersNodes()&&!h.isFiltered()){const E=h.getNode().updateChild(n,i);d=p.updateFullNode(h.getNode(),E,null)}else{const E=Oe(n);if(!h.isCompleteForPath(n)&&Vr(n)>1)return e;const S=et(n),L=h.getNode().getImmediateChild(E).updateChild(S,i);E===".priority"?d=p.updatePriority(h.getNode(),L):d=p.updateChild(h.getNode(),E,L,S,u0,null)}const _=r0(e,d,h.isFullyInitialized()||xe(n),p.filtersNodes()),y=new C_(r,_,o);return h0(t,_,n,r,y,u)}function ug(t,e,n,i,r,o,l){const u=e.eventCache;let h,d;const p=new C_(r,e,o);if(xe(n))d=t.filter.updateFullNode(e.eventCache.getNode(),i,l),h=Za(e,d,!0,t.filter.filtersNodes());else{const _=Oe(n);if(_===".priority")d=t.filter.updatePriority(e.eventCache.getNode(),i),h=Za(e,d,u.isFullyInitialized(),u.isFiltered());else{const y=et(n),E=u.getNode().getImmediateChild(_);let S;if(xe(y))S=i;else{const O=p.getCompleteChild(_);O!=null?d_(y)===".priority"&&O.getChild(YC(y)).isEmpty()?S=O:S=O.updateChild(y,i):S=he.EMPTY_NODE}if(E.equals(S))h=e;else{const O=t.filter.updateChild(u.getNode(),_,S,y,p,l);h=Za(e,O,u.isFullyInitialized(),t.filter.filtersNodes())}}}return h}function $b(t,e){return t.eventCache.isCompleteForChild(e)}function iW(t,e,n,i,r,o,l){let u=e;return i.foreach((h,d)=>{const p=ft(n,h);$b(e,Oe(p))&&(u=ug(t,u,p,d,r,o,l))}),i.foreach((h,d)=>{const p=ft(n,h);$b(e,Oe(p))||(u=ug(t,u,p,d,r,o,l))}),u}function Fb(t,e,n){return n.foreach((i,r)=>{e=e.updateChild(i,r)}),e}function hg(t,e,n,i,r,o,l,u){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let h=e,d;xe(n)?d=i:d=new Qe(null).setTree(n,i);const p=e.serverCache.getNode();return d.children.inorderTraversal((_,y)=>{if(p.hasChild(_)){const E=e.serverCache.getNode().getImmediateChild(_),S=Fb(t,E,y);h=Zu(t,h,new Ge(_),S,r,o,l,u)}}),d.children.inorderTraversal((_,y)=>{const E=!e.serverCache.isCompleteForChild(_)&&y.value===null;if(!p.hasChild(_)&&!E){const S=e.serverCache.getNode().getImmediateChild(_),O=Fb(t,S,y);h=Zu(t,h,new Ge(_),O,r,o,l,u)}}),h}function rW(t,e,n,i,r,o,l){if(Ju(r,n)!=null)return e;const u=e.serverCache.isFiltered(),h=e.serverCache;if(i.value!=null){if(xe(n)&&h.isFullyInitialized()||h.isCompleteForPath(n))return Zu(t,e,n,h.getNode().getChild(n),r,o,u,l);if(xe(n)){let d=new Qe(null);return h.getNode().forEachChild(ko,(p,_)=>{d=d.set(new Ge(p),_)}),hg(t,e,n,d,r,o,u,l)}else return e}else{let d=new Qe(null);return i.foreach((p,_)=>{const y=ft(n,p);h.isCompleteForPath(y)&&(d=d.set(p,h.getNode().getChild(y)))}),hg(t,e,n,d,r,o,u,l)}}function sW(t,e,n,i,r){const o=e.serverCache,l=r0(e,o.getNode(),o.isFullyInitialized()||xe(n),o.isFiltered());return h0(t,l,n,i,u0,r)}function oW(t,e,n,i,r,o){let l;if(Ju(i,n)!=null)return e;{const u=new C_(i,e,r),h=e.eventCache.getNode();let d;if(xe(n)||Oe(n)===".priority"){let p;if(e.serverCache.isFullyInitialized())p=Qu(i,Fs(e));else{const _=e.serverCache.getNode();G(_ instanceof he,"serverChildren would be complete if leaf node"),p=w_(i,_)}p=p,d=t.filter.updateFullNode(h,p,o)}else{const p=Oe(n);let _=T_(i,p,e.serverCache);_==null&&e.serverCache.isCompleteForChild(p)&&(_=h.getImmediateChild(p)),_!=null?d=t.filter.updateChild(h,p,_,et(n),u,o):e.eventCache.getNode().hasChild(p)?d=t.filter.updateChild(h,p,he.EMPTY_NODE,et(n),u,o):d=h,d.isEmpty()&&e.serverCache.isFullyInitialized()&&(l=Qu(i,Fs(e)),l.isLeafNode()&&(d=t.filter.updateFullNode(d,l,o)))}return l=e.serverCache.isFullyInitialized()||Ju(i,Fe())!=null,Za(e,d,l,t.filter.filtersNodes())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aW{constructor(e,n){this.query_=e,this.eventRegistrations_=[];const i=this.query_._queryParams,r=new m_(i.getIndex()),o=IB(i);this.processor_=ZB(o);const l=n.serverCache,u=n.eventCache,h=r.updateFullNode(he.EMPTY_NODE,l.getNode(),null),d=o.updateFullNode(he.EMPTY_NODE,u.getNode(),null),p=new jr(h,l.isFullyInitialized(),r.filtersNodes()),_=new jr(d,u.isFullyInitialized(),o.filtersNodes());this.viewCache_=Wh(_,p),this.eventGenerator_=new DB(this.query_)}get query(){return this.query_}}function lW(t){return t.viewCache_.serverCache.getNode()}function cW(t){return Xu(t.viewCache_)}function uW(t,e){const n=Fs(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!xe(e)&&!n.getImmediateChild(Oe(e)).isEmpty())?n.getChild(e):null}function Ub(t){return t.eventRegistrations_.length===0}function hW(t,e){t.eventRegistrations_.push(e)}function Bb(t,e,n){const i=[];if(n){G(e==null,"A cancel should cancel all event registrations.");const r=t.query._path;t.eventRegistrations_.forEach(o=>{const l=o.createCancelEvent(n,r);l&&i.push(l)})}if(e){let r=[];for(let o=0;o<t.eventRegistrations_.length;++o){const l=t.eventRegistrations_[o];if(!l.matches(e))r.push(l);else if(e.hasAnyCallback()){r=r.concat(t.eventRegistrations_.slice(o+1));break}}t.eventRegistrations_=r}else t.eventRegistrations_=[];return i}function Wb(t,e,n,i){e.type===ui.MERGE&&e.source.queryId!==null&&(G(Fs(t.viewCache_),"We should always have a full cache before handling merges"),G(Xu(t.viewCache_),"Missing event cache, even though we have a server cache"));const r=t.viewCache_,o=tW(t.processor_,r,e,n,i);return eW(t.processor_,o.viewCache),G(o.viewCache.serverCache.isFullyInitialized()||!r.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=o.viewCache,f0(t,o.changes,o.viewCache.eventCache.getNode(),null)}function fW(t,e){const n=t.viewCache_.eventCache,i=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(dt,(o,l)=>{i.push(Wo(o,l))}),n.isFullyInitialized()&&i.push(n0(n.getNode())),f0(t,i,n.getNode(),e)}function f0(t,e,n,i){const r=i?[i]:t.eventRegistrations_;return LB(t.eventGenerator_,e,n,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let eh;class d0{constructor(){this.views=new Map}}function dW(t){G(!eh,"__referenceConstructor has already been defined"),eh=t}function pW(){return G(eh,"Reference.ts has not been loaded"),eh}function gW(t){return t.views.size===0}function I_(t,e,n,i){const r=e.source.queryId;if(r!==null){const o=t.views.get(r);return G(o!=null,"SyncTree gave us an op for an invalid query."),Wb(o,e,n,i)}else{let o=[];for(const l of t.views.values())o=o.concat(Wb(l,e,n,i));return o}}function p0(t,e,n,i,r){const o=e._queryIdentifier,l=t.views.get(o);if(!l){let u=Qu(n,r?i:null),h=!1;u?h=!0:i instanceof he?(u=w_(n,i),h=!1):(u=he.EMPTY_NODE,h=!1);const d=Wh(new jr(u,h,!1),new jr(i,r,!1));return new aW(e,d)}return l}function _W(t,e,n,i,r,o){const l=p0(t,e,i,r,o);return t.views.has(e._queryIdentifier)||t.views.set(e._queryIdentifier,l),hW(l,n),fW(l,n)}function mW(t,e,n,i){const r=e._queryIdentifier,o=[];let l=[];const u=qr(t);if(r==="default")for(const[h,d]of t.views.entries())l=l.concat(Bb(d,n,i)),Ub(d)&&(t.views.delete(h),d.query._queryParams.loadsAllData()||o.push(d.query));else{const h=t.views.get(r);h&&(l=l.concat(Bb(h,n,i)),Ub(h)&&(t.views.delete(r),h.query._queryParams.loadsAllData()||o.push(h.query)))}return u&&!qr(t)&&o.push(new(pW())(e._repo,e._path)),{removed:o,events:l}}function g0(t){const e=[];for(const n of t.views.values())n.query._queryParams.loadsAllData()||e.push(n);return e}function Ur(t,e){let n=null;for(const i of t.views.values())n=n||uW(i,e);return n}function _0(t,e){if(e._queryParams.loadsAllData())return Vh(t);{const i=e._queryIdentifier;return t.views.get(i)}}function m0(t,e){return _0(t,e)!=null}function qr(t){return Vh(t)!=null}function Vh(t){for(const e of t.views.values())if(e.query._queryParams.loadsAllData())return e;return null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let th;function vW(t){G(!th,"__referenceConstructor has already been defined"),th=t}function yW(){return G(th,"Reference.ts has not been loaded"),th}let EW=1;class Hb{constructor(e){this.listenProvider_=e,this.syncPointTree_=new Qe(null),this.pendingWriteTree_=YB(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function v0(t,e,n,i,r){return $B(t.pendingWriteTree_,e,n,i,r),r?sa(t,new $s(y_(),e,n)):[]}function bW(t,e,n,i){FB(t.pendingWriteTree_,e,n,i);const r=Qe.fromObject(n);return sa(t,new Ho(y_(),e,r))}function Dr(t,e,n=!1){const i=UB(t.pendingWriteTree_,e);if(BB(t.pendingWriteTree_,e)){let o=new Qe(null);return i.snap!=null?o=o.set(Fe(),!0):Wt(i.children,l=>{o=o.set(new Ge(l),!0)}),sa(t,new Yu(i.path,o,n))}else return[]}function Bl(t,e,n){return sa(t,new $s(E_(),e,n))}function wW(t,e,n){const i=Qe.fromObject(n);return sa(t,new Ho(E_(),e,i))}function TW(t,e){return sa(t,new bl(E_(),e))}function CW(t,e,n){const i=S_(t,n);if(i){const r=O_(i),o=r.path,l=r.queryId,u=rn(o,e),h=new bl(b_(l),u);return N_(t,o,h)}else return[]}function nh(t,e,n,i,r=!1){const o=e._path,l=t.syncPointTree_.get(o);let u=[];if(l&&(e._queryIdentifier==="default"||m0(l,e))){const h=mW(l,e,n,i);gW(l)&&(t.syncPointTree_=t.syncPointTree_.remove(o));const d=h.removed;if(u=h.events,!r){const p=d.findIndex(y=>y._queryParams.loadsAllData())!==-1,_=t.syncPointTree_.findOnPath(o,(y,E)=>qr(E));if(p&&!_){const y=t.syncPointTree_.subtree(o);if(!y.isEmpty()){const E=SW(y);for(let S=0;S<E.length;++S){const O=E[S],L=O.query,q=w0(t,O);t.listenProvider_.startListening(tl(L),wl(t,L),q.hashFn,q.onComplete)}}}!_&&d.length>0&&!i&&(p?t.listenProvider_.stopListening(tl(e),null):d.forEach(y=>{const E=t.queryToTagMap.get(jh(y));t.listenProvider_.stopListening(tl(y),E)}))}OW(t,d)}return u}function y0(t,e,n,i){const r=S_(t,i);if(r!=null){const o=O_(r),l=o.path,u=o.queryId,h=rn(l,e),d=new $s(b_(u),h,n);return N_(t,l,d)}else return[]}function IW(t,e,n,i){const r=S_(t,i);if(r){const o=O_(r),l=o.path,u=o.queryId,h=rn(l,e),d=Qe.fromObject(n),p=new Ho(b_(u),h,d);return N_(t,l,p)}else return[]}function fg(t,e,n,i=!1){const r=e._path;let o=null,l=!1;t.syncPointTree_.foreachOnPath(r,(y,E)=>{const S=rn(y,r);o=o||Ur(E,S),l=l||qr(E)});let u=t.syncPointTree_.get(r);u?(l=l||qr(u),o=o||Ur(u,Fe())):(u=new d0,t.syncPointTree_=t.syncPointTree_.set(r,u));let h;o!=null?h=!0:(h=!1,o=he.EMPTY_NODE,t.syncPointTree_.subtree(r).foreachChild((E,S)=>{const O=Ur(S,Fe());O&&(o=o.updateImmediateChild(E,O))}));const d=m0(u,e);if(!d&&!e._queryParams.loadsAllData()){const y=jh(e);G(!t.queryToTagMap.has(y),"View does not exist, but we have a tag");const E=NW();t.queryToTagMap.set(y,E),t.tagToQueryMap.set(E,y)}const p=Hh(t.pendingWriteTree_,r);let _=_W(u,e,n,p,o,h);if(!d&&!l&&!i){const y=_0(u,e);_=_.concat(RW(t,e,y))}return _}function A_(t,e,n){const r=t.pendingWriteTree_,o=t.syncPointTree_.findOnPath(e,(l,u)=>{const h=rn(l,e),d=Ur(u,h);if(d)return d});return a0(r,e,o,n,!0)}function AW(t,e){const n=e._path;let i=null;t.syncPointTree_.foreachOnPath(n,(d,p)=>{const _=rn(d,n);i=i||Ur(p,_)});let r=t.syncPointTree_.get(n);r?i=i||Ur(r,Fe()):(r=new d0,t.syncPointTree_=t.syncPointTree_.set(n,r));const o=i!=null,l=o?new jr(i,!0,!1):null,u=Hh(t.pendingWriteTree_,e._path),h=p0(r,e,u,o?l.getNode():he.EMPTY_NODE,o);return cW(h)}function sa(t,e){return E0(e,t.syncPointTree_,null,Hh(t.pendingWriteTree_,Fe()))}function E0(t,e,n,i){if(xe(t.path))return b0(t,e,n,i);{const r=e.get(Fe());n==null&&r!=null&&(n=Ur(r,Fe()));let o=[];const l=Oe(t.path),u=t.operationForChild(l),h=e.children.get(l);if(h&&u){const d=n?n.getImmediateChild(l):null,p=l0(i,l);o=o.concat(E0(u,h,d,p))}return r&&(o=o.concat(I_(r,t,i,n))),o}}function b0(t,e,n,i){const r=e.get(Fe());n==null&&r!=null&&(n=Ur(r,Fe()));let o=[];return e.children.inorderTraversal((l,u)=>{const h=n?n.getImmediateChild(l):null,d=l0(i,l),p=t.operationForChild(l);p&&(o=o.concat(b0(p,u,h,d)))}),r&&(o=o.concat(I_(r,t,i,n))),o}function w0(t,e){const n=e.query,i=wl(t,n);return{hashFn:()=>(lW(e)||he.EMPTY_NODE).hash(),onComplete:r=>{if(r==="ok")return i?CW(t,n._path,i):TW(t,n._path);{const o=TU(r,n);return nh(t,n,null,o)}}}}function wl(t,e){const n=jh(e);return t.queryToTagMap.get(n)}function jh(t){return t._path.toString()+"$"+t._queryIdentifier}function S_(t,e){return t.tagToQueryMap.get(e)}function O_(t){const e=t.indexOf("$");return G(e!==-1&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new Ge(t.substr(0,e))}}function N_(t,e,n){const i=t.syncPointTree_.get(e);G(i,"Missing sync point for query tag that we're tracking");const r=Hh(t.pendingWriteTree_,e);return I_(i,n,r,null)}function SW(t){return t.fold((e,n,i)=>{if(n&&qr(n))return[Vh(n)];{let r=[];return n&&(r=g0(n)),Wt(i,(o,l)=>{r=r.concat(l)}),r}})}function tl(t){return t._queryParams.loadsAllData()&&!t._queryParams.isDefault()?new(yW())(t._repo,t._path):t}function OW(t,e){for(let n=0;n<e.length;++n){const i=e[n];if(!i._queryParams.loadsAllData()){const r=jh(i),o=t.queryToTagMap.get(r);t.queryToTagMap.delete(r),t.tagToQueryMap.delete(o)}}}function NW(){return EW++}function RW(t,e,n){const i=e._path,r=wl(t,e),o=w0(t,n),l=t.listenProvider_.startListening(tl(e),r,o.hashFn,o.onComplete),u=t.syncPointTree_.subtree(i);if(r)G(!qr(u.value),"If we're adding a query, it shouldn't be shadowed");else{const h=u.fold((d,p,_)=>{if(!xe(d)&&p&&qr(p))return[Vh(p).query];{let y=[];return p&&(y=y.concat(g0(p).map(E=>E.query))),Wt(_,(E,S)=>{y=y.concat(S)}),y}});for(let d=0;d<h.length;++d){const p=h[d];t.listenProvider_.stopListening(tl(p),wl(t,p))}}return l}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R_{constructor(e){this.node_=e}getImmediateChild(e){const n=this.node_.getImmediateChild(e);return new R_(n)}node(){return this.node_}}class x_{constructor(e,n){this.syncTree_=e,this.path_=n}getImmediateChild(e){const n=ft(this.path_,e);return new x_(this.syncTree_,n)}node(){return A_(this.syncTree_,this.path_)}}const xW=function(t){return t=t||{},t.timestamp=t.timestamp||new Date().getTime(),t},Vb=function(t,e,n){if(!t||typeof t!="object")return t;if(G(".sv"in t,"Unexpected leaf node or priority contents"),typeof t[".sv"]=="string")return DW(t[".sv"],e,n);if(typeof t[".sv"]=="object")return LW(t[".sv"],e);G(!1,"Unexpected server value: "+JSON.stringify(t,null,2))},DW=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:G(!1,"Unexpected server value: "+t)}},LW=function(t,e,n){t.hasOwnProperty("increment")||G(!1,"Unexpected server value: "+JSON.stringify(t,null,2));const i=t.increment;typeof i!="number"&&G(!1,"Unexpected increment value: "+i);const r=e.node();if(G(r!==null&&typeof r<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!r.isLeafNode())return i;const l=r.getValue();return typeof l!="number"?i:l+i},T0=function(t,e,n,i){return D_(e,new x_(n,t),i)},C0=function(t,e,n){return D_(t,new R_(e),n)};function D_(t,e,n){const i=t.getPriority().val(),r=Vb(i,e.getImmediateChild(".priority"),n);let o;if(t.isLeafNode()){const l=t,u=Vb(l.getValue(),e,n);return u!==l.getValue()||r!==l.getPriority().val()?new At(u,Et(r)):t}else{const l=t;return o=l,r!==l.getPriority().val()&&(o=o.updatePriority(new At(r))),l.forEachChild(dt,(u,h)=>{const d=D_(h,e.getImmediateChild(u),n);d!==h&&(o=o.updateImmediateChild(u,d))}),o}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L_{constructor(e="",n=null,i={children:{},childCount:0}){this.name=e,this.parent=n,this.node=i}}function P_(t,e){let n=e instanceof Ge?e:new Ge(e),i=t,r=Oe(n);for(;r!==null;){const o=Uo(i.node.children,r)||{children:{},childCount:0};i=new L_(r,i,o),n=et(n),r=Oe(n)}return i}function oa(t){return t.node.value}function I0(t,e){t.node.value=e,dg(t)}function A0(t){return t.node.childCount>0}function PW(t){return oa(t)===void 0&&!A0(t)}function qh(t,e){Wt(t.node.children,(n,i)=>{e(new L_(n,t,i))})}function S0(t,e,n,i){n&&!i&&e(t),qh(t,r=>{S0(r,e,!0,i)}),n&&i&&e(t)}function kW(t,e,n){let i=n?t:t.parent;for(;i!==null;){if(e(i))return!0;i=i.parent}return!1}function Wl(t){return new Ge(t.parent===null?t.name:Wl(t.parent)+"/"+t.name)}function dg(t){t.parent!==null&&MW(t.parent,t.name,t)}function MW(t,e,n){const i=PW(n),r=Fi(t.node.children,e);i&&r?(delete t.node.children[e],t.node.childCount--,dg(t)):!i&&!r&&(t.node.children[e]=n.node,t.node.childCount++,dg(t))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $W=/[\[\].#$\/\u0000-\u001F\u007F]/,FW=/[\[\].#$\u0000-\u001F\u007F]/,np=10*1024*1024,k_=function(t){return typeof t=="string"&&t.length!==0&&!$W.test(t)},O0=function(t){return typeof t=="string"&&t.length!==0&&!FW.test(t)},UW=function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),O0(t)},BW=function(t){return t===null||typeof t=="string"||typeof t=="number"&&!l_(t)||t&&typeof t=="object"&&Fi(t,".sv")},WW=function(t,e,n,i){i&&e===void 0||Kh(Fh(t,"value"),e,n)},Kh=function(t,e,n){const i=n instanceof Ge?new iB(n,t):n;if(e===void 0)throw new Error(t+"contains undefined "+ds(i));if(typeof e=="function")throw new Error(t+"contains a function "+ds(i)+" with contents = "+e.toString());if(l_(e))throw new Error(t+"contains "+e.toString()+" "+ds(i));if(typeof e=="string"&&e.length>np/3&&Uh(e)>np)throw new Error(t+"contains a string greater than "+np+" utf8 bytes "+ds(i)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let r=!1,o=!1;if(Wt(e,(l,u)=>{if(l===".value")r=!0;else if(l!==".priority"&&l!==".sv"&&(o=!0,!k_(l)))throw new Error(t+" contains an invalid key ("+l+") "+ds(i)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);rB(i,l),Kh(t,u,i),sB(i)}),r&&o)throw new Error(t+' contains ".value" child '+ds(i)+" in addition to actual children.")}},HW=function(t,e){let n,i;for(n=0;n<e.length;n++){i=e[n];const o=ml(i);for(let l=0;l<o.length;l++)if(!(o[l]===".priority"&&l===o.length-1)){if(!k_(o[l]))throw new Error(t+"contains an invalid key ("+o[l]+") in path "+i.toString()+`. Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`)}}e.sort(nB);let r=null;for(n=0;n<e.length;n++){if(i=e[n],r!==null&&jn(r,i))throw new Error(t+"contains a path "+r.toString()+" that is ancestor of another path "+i.toString());r=i}},VW=function(t,e,n,i){if(i&&e===void 0)return;const r=Fh(t,"values");if(!(e&&typeof e=="object")||Array.isArray(e))throw new Error(r+" must be an object containing the children to replace.");const o=[];Wt(e,(l,u)=>{const h=new Ge(l);if(Kh(r,u,ft(n,h)),d_(h)===".priority"&&!BW(u))throw new Error(r+"contains an invalid value for '"+h.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");o.push(h)}),HW(r,o)},N0=function(t,e,n,i){if(!(i&&n===void 0)&&!O0(n))throw new Error(Fh(t,e)+'was an invalid path = "'+n+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},jW=function(t,e,n,i){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),N0(t,e,n,i)},R0=function(t,e){if(Oe(e)===".info")throw new Error(t+" failed = Can't modify data under /.info/")},qW=function(t,e){const n=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!k_(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!UW(n))throw new Error(Fh(t,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KW{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function Gh(t,e){let n=null;for(let i=0;i<e.length;i++){const r=e[i],o=r.getPath();n!==null&&!p_(o,n.path)&&(t.eventLists_.push(n),n=null),n===null&&(n={events:[],path:o}),n.events.push(r)}n&&t.eventLists_.push(n)}function x0(t,e,n){Gh(t,n),D0(t,i=>p_(i,e))}function Yn(t,e,n){Gh(t,n),D0(t,i=>jn(i,e)||jn(e,i))}function D0(t,e){t.recursionDepth_++;let n=!0;for(let i=0;i<t.eventLists_.length;i++){const r=t.eventLists_[i];if(r){const o=r.path;e(o)?(GW(t.eventLists_[i]),t.eventLists_[i]=null):n=!1}}n&&(t.eventLists_=[]),t.recursionDepth_--}function GW(t){for(let e=0;e<t.events.length;e++){const n=t.events[e];if(n!==null){t.events[e]=null;const i=n.getEventRunner();Os&&$t("event: "+n.toString()),ra(i)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zW="repo_interrupt",YW=25;class XW{constructor(e,n,i,r){this.repoInfo_=e,this.forceRestClient_=n,this.authTokenProvider_=i,this.appCheckProvider_=r,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new KW,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=zu(),this.transactionQueueTree_=new L_,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function QW(t,e,n){if(t.stats_=h_(t.repoInfo_),t.forceRestClient_||SU())t.server_=new Gu(t.repoInfo_,(i,r,o,l)=>{jb(t,i,r,o,l)},t.authTokenProvider_,t.appCheckProvider_),setTimeout(()=>qb(t,!0),0);else{if(typeof n<"u"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{bt(n)}catch(i){throw new Error("Invalid authOverride provided: "+i)}}t.persistentConnection_=new ir(t.repoInfo_,e,(i,r,o,l)=>{jb(t,i,r,o,l)},i=>{qb(t,i)},i=>{ZW(t,i)},t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}t.authTokenProvider_.addTokenChangeListener(i=>{t.server_.refreshAuthToken(i)}),t.appCheckProvider_.addTokenChangeListener(i=>{t.server_.refreshAppCheckToken(i.token)}),t.statsReporter_=DU(t.repoInfo_,()=>new xB(t.stats_,t.server_)),t.infoData_=new AB,t.infoSyncTree_=new Hb({startListening:(i,r,o,l)=>{let u=[];const h=t.infoData_.getNode(i._path);return h.isEmpty()||(u=Bl(t.infoSyncTree_,i._path,h),setTimeout(()=>{l("ok")},0)),u},stopListening:()=>{}}),M_(t,"connected",!1),t.serverSyncTree_=new Hb({startListening:(i,r,o,l)=>(t.server_.listen(i,o,r,(u,h)=>{const d=l(u,h);Yn(t.eventQueue_,i._path,d)}),[]),stopListening:(i,r)=>{t.server_.unlisten(i,r)}})}function JW(t){const n=t.infoData_.getNode(new Ge(".info/serverTimeOffset")).val()||0;return new Date().getTime()+n}function zh(t){return xW({timestamp:JW(t)})}function jb(t,e,n,i,r){t.dataUpdateCount++;const o=new Ge(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;let l=[];if(r)if(i){const h=Uu(n,d=>Et(d));l=IW(t.serverSyncTree_,o,h,r)}else{const h=Et(n);l=y0(t.serverSyncTree_,o,h,r)}else if(i){const h=Uu(n,d=>Et(d));l=wW(t.serverSyncTree_,o,h)}else{const h=Et(n);l=Bl(t.serverSyncTree_,o,h)}let u=o;l.length>0&&(u=jo(t,o)),Yn(t.eventQueue_,u,l)}function qb(t,e){M_(t,"connected",e),e===!1&&iH(t)}function ZW(t,e){Wt(e,(n,i)=>{M_(t,n,i)})}function M_(t,e,n){const i=new Ge("/.info/"+e),r=Et(n);t.infoData_.updateSnapshot(i,r);const o=Bl(t.infoSyncTree_,i,r);Yn(t.eventQueue_,i,o)}function $_(t){return t.nextWriteId_++}function eH(t,e,n){const i=AW(t.serverSyncTree_,e);return i!=null?Promise.resolve(i):t.server_.get(e).then(r=>{const o=Et(r).withIndex(e._queryParams.getIndex());fg(t.serverSyncTree_,e,n,!0);let l;if(e._queryParams.loadsAllData())l=Bl(t.serverSyncTree_,e._path,o);else{const u=wl(t.serverSyncTree_,e);l=y0(t.serverSyncTree_,e._path,o,u)}return Yn(t.eventQueue_,e._path,l),nh(t.serverSyncTree_,e,n,null,!0),o},r=>(Hl(t,"get for query "+bt(e)+" failed: "+r),Promise.reject(new Error(r))))}function tH(t,e,n,i,r){Hl(t,"set",{path:e.toString(),value:n,priority:i});const o=zh(t),l=Et(n,i),u=A_(t.serverSyncTree_,e),h=C0(l,u,o),d=$_(t),p=v0(t.serverSyncTree_,e,h,d,!0);Gh(t.eventQueue_,p),t.server_.put(e.toString(),l.val(!0),(y,E)=>{const S=y==="ok";S||on("set at "+e+" failed: "+y);const O=Dr(t.serverSyncTree_,d,!S);Yn(t.eventQueue_,e,O),pg(t,r,y,E)});const _=U_(t,e);jo(t,_),Yn(t.eventQueue_,_,[])}function nH(t,e,n,i){Hl(t,"update",{path:e.toString(),value:n});let r=!0;const o=zh(t),l={};if(Wt(n,(u,h)=>{r=!1,l[u]=T0(ft(e,u),Et(h),t.serverSyncTree_,o)}),r)$t("update() called with empty data.  Don't do anything."),pg(t,i,"ok",void 0);else{const u=$_(t),h=bW(t.serverSyncTree_,e,l,u);Gh(t.eventQueue_,h),t.server_.merge(e.toString(),n,(d,p)=>{const _=d==="ok";_||on("update at "+e+" failed: "+d);const y=Dr(t.serverSyncTree_,u,!_),E=y.length>0?jo(t,e):e;Yn(t.eventQueue_,E,y),pg(t,i,d,p)}),Wt(n,d=>{const p=U_(t,ft(e,d));jo(t,p)}),Yn(t.eventQueue_,e,[])}}function iH(t){Hl(t,"onDisconnectEvents");const e=zh(t),n=zu();og(t.onDisconnect_,Fe(),(r,o)=>{const l=T0(r,o,t.serverSyncTree_,e);i0(n,r,l)});let i=[];og(n,Fe(),(r,o)=>{i=i.concat(Bl(t.serverSyncTree_,r,o));const l=U_(t,r);jo(t,l)}),t.onDisconnect_=zu(),Yn(t.eventQueue_,Fe(),i)}function rH(t,e,n){let i;Oe(e._path)===".info"?i=fg(t.infoSyncTree_,e,n):i=fg(t.serverSyncTree_,e,n),x0(t.eventQueue_,e._path,i)}function Kb(t,e,n){let i;Oe(e._path)===".info"?i=nh(t.infoSyncTree_,e,n):i=nh(t.serverSyncTree_,e,n),x0(t.eventQueue_,e._path,i)}function sH(t){t.persistentConnection_&&t.persistentConnection_.interrupt(zW)}function Hl(t,...e){let n="";t.persistentConnection_&&(n=t.persistentConnection_.id+":"),$t(n,...e)}function pg(t,e,n,i){e&&ra(()=>{if(n==="ok")e(null);else{const r=(n||"error").toUpperCase();let o=r;i&&(o+=": "+i);const l=new Error(o);l.code=r,e(l)}})}function L0(t,e,n){return A_(t.serverSyncTree_,e,n)||he.EMPTY_NODE}function F_(t,e=t.transactionQueueTree_){if(e||Yh(t,e),oa(e)){const n=k0(t,e);G(n.length>0,"Sending zero length transaction queue"),n.every(r=>r.status===0)&&oH(t,Wl(e),n)}else A0(e)&&qh(e,n=>{F_(t,n)})}function oH(t,e,n){const i=n.map(d=>d.currentWriteId),r=L0(t,e,i);let o=r;const l=r.hash();for(let d=0;d<n.length;d++){const p=n[d];G(p.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),p.status=1,p.retryCount++;const _=rn(e,p.path);o=o.updateChild(_,p.currentOutputSnapshotRaw)}const u=o.val(!0),h=e;t.server_.put(h.toString(),u,d=>{Hl(t,"transaction put response",{path:h.toString(),status:d});let p=[];if(d==="ok"){const _=[];for(let y=0;y<n.length;y++)n[y].status=2,p=p.concat(Dr(t.serverSyncTree_,n[y].currentWriteId)),n[y].onComplete&&_.push(()=>n[y].onComplete(null,!0,n[y].currentOutputSnapshotResolved)),n[y].unwatcher();Yh(t,P_(t.transactionQueueTree_,e)),F_(t,t.transactionQueueTree_),Yn(t.eventQueue_,e,p);for(let y=0;y<_.length;y++)ra(_[y])}else{if(d==="datastale")for(let _=0;_<n.length;_++)n[_].status===3?n[_].status=4:n[_].status=0;else{on("transaction at "+h.toString()+" failed: "+d);for(let _=0;_<n.length;_++)n[_].status=4,n[_].abortReason=d}jo(t,e)}},l)}function jo(t,e){const n=P0(t,e),i=Wl(n),r=k0(t,n);return aH(t,r,i),i}function aH(t,e,n){if(e.length===0)return;const i=[];let r=[];const l=e.filter(u=>u.status===0).map(u=>u.currentWriteId);for(let u=0;u<e.length;u++){const h=e[u],d=rn(n,h.path);let p=!1,_;if(G(d!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),h.status===4)p=!0,_=h.abortReason,r=r.concat(Dr(t.serverSyncTree_,h.currentWriteId,!0));else if(h.status===0)if(h.retryCount>=YW)p=!0,_="maxretry",r=r.concat(Dr(t.serverSyncTree_,h.currentWriteId,!0));else{const y=L0(t,h.path,l);h.currentInputSnapshot=y;const E=e[u].update(y.val());if(E!==void 0){Kh("transaction failed: Data returned ",E,h.path);let S=Et(E);typeof E=="object"&&E!=null&&Fi(E,".priority")||(S=S.updatePriority(y.getPriority()));const L=h.currentWriteId,q=zh(t),oe=C0(S,y,q);h.currentOutputSnapshotRaw=S,h.currentOutputSnapshotResolved=oe,h.currentWriteId=$_(t),l.splice(l.indexOf(L),1),r=r.concat(v0(t.serverSyncTree_,h.path,oe,h.currentWriteId,h.applyLocally)),r=r.concat(Dr(t.serverSyncTree_,L,!0))}else p=!0,_="nodata",r=r.concat(Dr(t.serverSyncTree_,h.currentWriteId,!0))}Yn(t.eventQueue_,n,r),r=[],p&&(e[u].status=2,function(y){setTimeout(y,Math.floor(0))}(e[u].unwatcher),e[u].onComplete&&(_==="nodata"?i.push(()=>e[u].onComplete(null,!1,e[u].currentInputSnapshot)):i.push(()=>e[u].onComplete(new Error(_),!1,null))))}Yh(t,t.transactionQueueTree_);for(let u=0;u<i.length;u++)ra(i[u]);F_(t,t.transactionQueueTree_)}function P0(t,e){let n,i=t.transactionQueueTree_;for(n=Oe(e);n!==null&&oa(i)===void 0;)i=P_(i,n),e=et(e),n=Oe(e);return i}function k0(t,e){const n=[];return M0(t,e,n),n.sort((i,r)=>i.order-r.order),n}function M0(t,e,n){const i=oa(e);if(i)for(let r=0;r<i.length;r++)n.push(i[r]);qh(e,r=>{M0(t,r,n)})}function Yh(t,e){const n=oa(e);if(n){let i=0;for(let r=0;r<n.length;r++)n[r].status!==2&&(n[i]=n[r],i++);n.length=i,I0(e,n.length>0?n:void 0)}qh(e,i=>{Yh(t,i)})}function U_(t,e){const n=Wl(P0(t,e)),i=P_(t.transactionQueueTree_,e);return kW(i,r=>{ip(t,r)}),ip(t,i),S0(i,r=>{ip(t,r)}),n}function ip(t,e){const n=oa(e);if(n){const i=[];let r=[],o=-1;for(let l=0;l<n.length;l++)n[l].status===3||(n[l].status===1?(G(o===l-1,"All SENT items should be at beginning of queue."),o=l,n[l].status=3,n[l].abortReason="set"):(G(n[l].status===0,"Unexpected transaction status in abort"),n[l].unwatcher(),r=r.concat(Dr(t.serverSyncTree_,n[l].currentWriteId,!0)),n[l].onComplete&&i.push(n[l].onComplete.bind(null,new Error("set"),!1,null))));o===-1?I0(e,void 0):n.length=o+1,Yn(t.eventQueue_,Wl(e),r);for(let l=0;l<i.length;l++)ra(i[l])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lH(t){let e="";const n=t.split("/");for(let i=0;i<n.length;i++)if(n[i].length>0){let r=n[i];try{r=decodeURIComponent(r.replace(/\+/g," "))}catch{}e+="/"+r}return e}function cH(t){const e={};t.charAt(0)==="?"&&(t=t.substring(1));for(const n of t.split("&")){if(n.length===0)continue;const i=n.split("=");i.length===2?e[decodeURIComponent(i[0])]=decodeURIComponent(i[1]):on(`Invalid query segment '${n}' in query '${t}'`)}return e}const Gb=function(t,e){const n=uH(t),i=n.namespace;n.domain==="firebase.com"&&cr(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!i||i==="undefined")&&n.domain!=="localhost"&&cr("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||vU();const r=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new BC(n.host,n.secure,i,r,e,"",i!==n.subdomain),path:new Ge(n.pathString)}},uH=function(t){let e="",n="",i="",r="",o="",l=!0,u="https",h=443;if(typeof t=="string"){let d=t.indexOf("//");d>=0&&(u=t.substring(0,d-1),t=t.substring(d+2));let p=t.indexOf("/");p===-1&&(p=t.length);let _=t.indexOf("?");_===-1&&(_=t.length),e=t.substring(0,Math.min(p,_)),p<_&&(r=lH(t.substring(p,_)));const y=cH(t.substring(Math.min(t.length,_)));d=e.indexOf(":"),d>=0?(l=u==="https"||u==="wss",h=parseInt(e.substring(d+1),10)):d=e.length;const E=e.slice(0,d);if(E.toLowerCase()==="localhost")n="localhost";else if(E.split(".").length<=2)n=E;else{const S=e.indexOf(".");i=e.substring(0,S).toLowerCase(),n=e.substring(S+1),o=i}"ns"in y&&(o=y.ns)}return{host:e,port:h,domain:n,subdomain:i,secure:l,scheme:u,pathString:r,namespace:o}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $0{constructor(e,n,i,r){this.eventType=e,this.eventRegistration=n,this.snapshot=i,this.prevName=r}getPath(){const e=this.snapshot.ref;return this.eventType==="value"?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+bt(this.snapshot.exportVal())}}class F0{constructor(e,n,i){this.eventRegistration=e,this.error=n,this.path=i}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U0{constructor(e,n){this.snapshotCallback=e,this.cancelCallback=n}onValue(e,n){this.snapshotCallback.call(null,e,n)}onCancel(e){return G(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B_{constructor(e,n,i,r){this._repo=e,this._path=n,this._queryParams=i,this._orderByCalled=r}get key(){return xe(this._path)?null:d_(this._path)}get ref(){return new Bi(this._repo,this._path)}get _queryIdentifier(){const e=Db(this._queryParams),n=c_(e);return n==="{}"?"default":n}get _queryObject(){return Db(this._queryParams)}isEqual(e){if(e=Ui(e),!(e instanceof B_))return!1;const n=this._repo===e._repo,i=p_(this._path,e._path),r=this._queryIdentifier===e._queryIdentifier;return n&&i&&r}toJSON(){return this.toString()}toString(){return this._repo.toString()+tB(this._path)}}class Bi extends B_{constructor(e,n){super(e,n,new v_,!1)}get parent(){const e=YC(this._path);return e===null?null:new Bi(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}}class qo{constructor(e,n,i){this._node=e,this.ref=n,this._index=i}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const n=new Ge(e),i=Rt(this.ref,e);return new qo(this._node.getChild(n),i,dt)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(i,r)=>e(new qo(r,Rt(this.ref,i),dt)))}hasChild(e){const n=new Ge(e);return!this._node.getChild(n).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function li(t,e){return t=Ui(t),t._checkNotDeleted("ref"),e!==void 0?Rt(t._root,e):t._root}function Rt(t,e){return t=Ui(t),Oe(t._path)===null?jW("child","path",e,!1):N0("child","path",e,!1),new Bi(t._repo,ft(t._path,e))}function Ns(t){return R0("remove",t._path),Us(t,null)}function Us(t,e){t=Ui(t),R0("set",t._path),WW("set",e,t._path,!1);const n=new Ps;return tH(t._repo,t._path,e,null,n.wrapCallback(()=>{})),n.promise}function Iu(t,e){VW("update",e,t._path,!1);const n=new Ps;return nH(t._repo,t._path,e,n.wrapCallback(()=>{})),n.promise}function Xh(t){t=Ui(t);const e=new U0(()=>{}),n=new Qh(e);return eH(t._repo,t,n).then(i=>new qo(i,new Bi(t._repo,t._path),t._queryParams.getIndex()))}class Qh{constructor(e){this.callbackContext=e}respondsTo(e){return e==="value"}createEvent(e,n){const i=n._queryParams.getIndex();return new $0("value",this,new qo(e.snapshotNode,new Bi(n._repo,n._path),i))}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,n){return this.callbackContext.hasCancelCallback?new F0(this,e,n):null}matches(e){return e instanceof Qh?!e.callbackContext||!this.callbackContext?!0:e.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}}class W_{constructor(e,n){this.eventType=e,this.callbackContext=n}respondsTo(e){let n=e==="children_added"?"child_added":e;return n=n==="children_removed"?"child_removed":n,this.eventType===n}createCancelEvent(e,n){return this.callbackContext.hasCancelCallback?new F0(this,e,n):null}createEvent(e,n){G(e.childName!=null,"Child events should have a childName.");const i=Rt(new Bi(n._repo,n._path),e.childName),r=n._queryParams.getIndex();return new $0(e.type,this,new qo(e.snapshotNode,i,r),e.prevName)}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof W_?this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext)):!1}hasAnyCallback(){return!!this.callbackContext}}function Vl(t,e,n,i,r){let o;if(typeof i=="object"&&(o=void 0,r=i),typeof i=="function"&&(o=i),r&&r.onlyOnce){const h=n,d=(p,_)=>{Kb(t._repo,t,u),h(p,_)};d.userCallback=n.userCallback,d.context=n.context,n=d}const l=new U0(n,o||void 0),u=e==="value"?new Qh(l):new W_(e,l);return rH(t._repo,t,u),()=>Kb(t._repo,t,u)}function H_(t,e,n,i){return Vl(t,"value",e,n,i)}function hH(t,e,n,i){return Vl(t,"child_added",e,n,i)}function fH(t,e,n,i){return Vl(t,"child_changed",e,n,i)}function dH(t,e,n,i){return Vl(t,"child_moved",e,n,i)}function pH(t,e,n,i){return Vl(t,"child_removed",e,n,i)}dW(Bi);vW(Bi);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gH="FIREBASE_DATABASE_EMULATOR_HOST",gg={};let _H=!1;function mH(t,e,n,i){t.repoInfo_=new BC(`${e}:${n}`,!1,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams),i&&(t.authTokenProvider_=i)}function vH(t,e,n,i,r){let o=i||t.options.databaseURL;o===void 0&&(t.options.projectId||cr("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),$t("Using default host for project ",t.options.projectId),o=`${t.options.projectId}-default-rtdb.firebaseio.com`);let l=Gb(o,r),u=l.repoInfo,h,d;typeof process<"u"&&process.env&&(d=process.env[gH]),d?(h=!0,o=`http://${d}?ns=${u.namespace}`,l=Gb(o,r),u=l.repoInfo):h=!l.repoInfo.secure;const p=r&&h?new Po(Po.OWNER):new NU(t.name,t.options,e);qW("Invalid Firebase Database URL",l),xe(l.path)||cr("Database URL must point to the root of a Firebase Database (not including a child path).");const _=EH(u,t,p,new OU(t.name,n));return new bH(_,t)}function yH(t,e){const n=gg[e];(!n||n[t.key]!==t)&&cr(`Database ${e}(${t.repoInfo_}) has already been deleted.`),sH(t),delete n[t.key]}function EH(t,e,n,i){let r=gg[e.name];r||(r={},gg[e.name]=r);let o=r[t.toURLString()];return o&&cr("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),o=new XW(t,_H,n,i),r[t.toURLString()]=o,o}class bH{constructor(e,n){this._repoInternal=e,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(QW(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Bi(this._repo,Fe())),this._rootInternal}_delete(){return this._rootInternal!==null&&(yH(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&cr("Cannot call "+e+" on a deleted database.")}}function B0(t=lC(),e){const n=H$(t,"database").getImmediate({identifier:e}),i=PM("database");return i&&wH(n,...i),n}function wH(t,e,n,i={}){t=Ui(t),t._checkNotDeleted("useEmulator"),t._instanceStarted&&cr("Cannot call useEmulator() after instance has already been initialized.");const r=t._repoInternal;let o;if(r.repoInfo_.nodeAdmin)i.mockUserToken&&cr('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),o=new Po(Po.OWNER);else if(i.mockUserToken){const l=typeof i.mockUserToken=="string"?i.mockUserToken:$M(i.mockUserToken,t.app.options.projectId);o=new Po(l)}mH(r,e,n,o)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TH(t){dU(kl),ki(new pi("database",(e,{instanceIdentifier:n})=>{const i=e.getProvider("app").getImmediate(),r=e.getProvider("auth-internal"),o=e.getProvider("app-check-internal");return vH(i,r,o,n)},"PUBLIC").setMultipleInstances(!0)),Nn(gb,_b,t),Nn(gb,_b,"esm2017")}ir.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)};ir.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};TH();var CH=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},ie,V_=V_||{},ge=CH||self;function ih(){}function Jh(t){var e=typeof t;return e=e!="object"?e:t?Array.isArray(t)?"array":e:"null",e=="array"||e=="object"&&typeof t.length=="number"}function jl(t){var e=typeof t;return e=="object"&&t!=null||e=="function"}function IH(t){return Object.prototype.hasOwnProperty.call(t,rp)&&t[rp]||(t[rp]=++AH)}var rp="closure_uid_"+(1e9*Math.random()>>>0),AH=0;function SH(t,e,n){return t.call.apply(t.bind,arguments)}function OH(t,e,n){if(!t)throw Error();if(2<arguments.length){var i=Array.prototype.slice.call(arguments,2);return function(){var r=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(r,i),t.apply(e,r)}}return function(){return t.apply(e,arguments)}}function Yt(t,e,n){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?Yt=SH:Yt=OH,Yt.apply(null,arguments)}function au(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var i=n.slice();return i.push.apply(i,arguments),t.apply(this,i)}}function Ht(t,e){function n(){}n.prototype=e.prototype,t.X=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.Wb=function(i,r,o){for(var l=Array(arguments.length-2),u=2;u<arguments.length;u++)l[u-2]=arguments[u];return e.prototype[r].apply(i,l)}}function zr(){this.s=this.s,this.o=this.o}var NH=0;zr.prototype.s=!1;zr.prototype.na=function(){!this.s&&(this.s=!0,this.M(),NH!=0)&&IH(this)};zr.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const W0=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if(typeof t=="string")return typeof e!="string"||e.length!=1?-1:t.indexOf(e,0);for(let n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1};function j_(t){const e=t.length;if(0<e){const n=Array(e);for(let i=0;i<e;i++)n[i]=t[i];return n}return[]}function zb(t,e){for(let n=1;n<arguments.length;n++){const i=arguments[n];if(Jh(i)){const r=t.length||0,o=i.length||0;t.length=r+o;for(let l=0;l<o;l++)t[r+l]=i[l]}else t.push(i)}}function Xt(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}Xt.prototype.h=function(){this.defaultPrevented=!0};var RH=function(){if(!ge.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{ge.addEventListener("test",ih,e),ge.removeEventListener("test",ih,e)}catch{}return t}();function rh(t){return/^[\s\xa0]*$/.test(t)}var Yb=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function sp(t,e){return t<e?-1:t>e?1:0}function Zh(){var t=ge.navigator;return t&&(t=t.userAgent)?t:""}function Si(t){return Zh().indexOf(t)!=-1}function q_(t){return q_[" "](t),t}q_[" "]=ih;function xH(t){var e=PH;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=t(9)}var DH=Si("Opera"),Tl=Si("Trident")||Si("MSIE"),H0=Si("Edge"),_g=H0||Tl,V0=Si("Gecko")&&!(Zh().toLowerCase().indexOf("webkit")!=-1&&!Si("Edge"))&&!(Si("Trident")||Si("MSIE"))&&!Si("Edge"),LH=Zh().toLowerCase().indexOf("webkit")!=-1&&!Si("Edge");function j0(){var t=ge.document;return t?t.documentMode:void 0}var mg;e:{var op="",ap=function(){var t=Zh();if(V0)return/rv:([^\);]+)(\)|;)/.exec(t);if(H0)return/Edge\/([\d\.]+)/.exec(t);if(Tl)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t);if(LH)return/WebKit\/(\S+)/.exec(t);if(DH)return/(?:Version)[ \/]?(\S+)/.exec(t)}();if(ap&&(op=ap?ap[1]:""),Tl){var lp=j0();if(lp!=null&&lp>parseFloat(op)){mg=String(lp);break e}}mg=op}var PH={};function kH(){return xH(function(){let t=0;const e=Yb(String(mg)).split("."),n=Yb("9").split("."),i=Math.max(e.length,n.length);for(let l=0;t==0&&l<i;l++){var r=e[l]||"",o=n[l]||"";do{if(r=/(\d*)(\D*)(.*)/.exec(r)||["","","",""],o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],r[0].length==0&&o[0].length==0)break;t=sp(r[1].length==0?0:parseInt(r[1],10),o[1].length==0?0:parseInt(o[1],10))||sp(r[2].length==0,o[2].length==0)||sp(r[2],o[2]),r=r[3],o=o[3]}while(t==0)}return 0<=t})}ge.document&&Tl&&j0();function Cl(t,e){if(Xt.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,i=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(V0){e:{try{q_(e.nodeName);var r=!0;break e}catch{}r=!1}r||(e=null)}}else n=="mouseover"?e=t.fromElement:n=="mouseout"&&(e=t.toElement);this.relatedTarget=e,i?(this.clientX=i.clientX!==void 0?i.clientX:i.pageX,this.clientY=i.clientY!==void 0?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0):(this.clientX=t.clientX!==void 0?t.clientX:t.pageX,this.clientY=t.clientY!==void 0?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType=typeof t.pointerType=="string"?t.pointerType:MH[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&Cl.X.h.call(this)}}Ht(Cl,Xt);var MH={2:"touch",3:"pen",4:"mouse"};Cl.prototype.h=function(){Cl.X.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var ql="closure_listenable_"+(1e6*Math.random()|0),$H=0;function FH(t,e,n,i,r){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!i,this.ha=r,this.key=++$H,this.ba=this.ea=!1}function ef(t){t.ba=!0,t.listener=null,t.proxy=null,t.src=null,t.ha=null}function K_(t,e,n){for(const i in t)e.call(n,t[i],i,t)}function q0(t){const e={};for(const n in t)e[n]=t[n];return e}const Xb="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function K0(t,e){let n,i;for(let r=1;r<arguments.length;r++){i=arguments[r];for(n in i)t[n]=i[n];for(let o=0;o<Xb.length;o++)n=Xb[o],Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}}function tf(t){this.src=t,this.g={},this.h=0}tf.prototype.add=function(t,e,n,i,r){var o=t.toString();t=this.g[o],t||(t=this.g[o]=[],this.h++);var l=yg(t,e,i,r);return-1<l?(e=t[l],n||(e.ea=!1)):(e=new FH(e,this.src,o,!!i,r),e.ea=n,t.push(e)),e};function vg(t,e){var n=e.type;if(n in t.g){var i=t.g[n],r=W0(i,e),o;(o=0<=r)&&Array.prototype.splice.call(i,r,1),o&&(ef(e),t.g[n].length==0&&(delete t.g[n],t.h--))}}function yg(t,e,n,i){for(var r=0;r<t.length;++r){var o=t[r];if(!o.ba&&o.listener==e&&o.capture==!!n&&o.ha==i)return r}return-1}var G_="closure_lm_"+(1e6*Math.random()|0),cp={};function G0(t,e,n,i,r){if(i&&i.once)return Y0(t,e,n,i,r);if(Array.isArray(e)){for(var o=0;o<e.length;o++)G0(t,e[o],n,i,r);return null}return n=X_(n),t&&t[ql]?t.N(e,n,jl(i)?!!i.capture:!!i,r):z0(t,e,n,!1,i,r)}function z0(t,e,n,i,r,o){if(!e)throw Error("Invalid event type");var l=jl(r)?!!r.capture:!!r,u=Y_(t);if(u||(t[G_]=u=new tf(t)),n=u.add(e,n,i,l,o),n.proxy)return n;if(i=UH(),n.proxy=i,i.src=t,i.listener=n,t.addEventListener)RH||(r=l),r===void 0&&(r=!1),t.addEventListener(e.toString(),i,r);else if(t.attachEvent)t.attachEvent(Q0(e.toString()),i);else if(t.addListener&&t.removeListener)t.addListener(i);else throw Error("addEventListener and attachEvent are unavailable.");return n}function UH(){function t(n){return e.call(t.src,t.listener,n)}const e=BH;return t}function Y0(t,e,n,i,r){if(Array.isArray(e)){for(var o=0;o<e.length;o++)Y0(t,e[o],n,i,r);return null}return n=X_(n),t&&t[ql]?t.O(e,n,jl(i)?!!i.capture:!!i,r):z0(t,e,n,!0,i,r)}function X0(t,e,n,i,r){if(Array.isArray(e))for(var o=0;o<e.length;o++)X0(t,e[o],n,i,r);else i=jl(i)?!!i.capture:!!i,n=X_(n),t&&t[ql]?(t=t.i,e=String(e).toString(),e in t.g&&(o=t.g[e],n=yg(o,n,i,r),-1<n&&(ef(o[n]),Array.prototype.splice.call(o,n,1),o.length==0&&(delete t.g[e],t.h--)))):t&&(t=Y_(t))&&(e=t.g[e.toString()],t=-1,e&&(t=yg(e,n,i,r)),(n=-1<t?e[t]:null)&&z_(n))}function z_(t){if(typeof t!="number"&&t&&!t.ba){var e=t.src;if(e&&e[ql])vg(e.i,t);else{var n=t.type,i=t.proxy;e.removeEventListener?e.removeEventListener(n,i,t.capture):e.detachEvent?e.detachEvent(Q0(n),i):e.addListener&&e.removeListener&&e.removeListener(i),(n=Y_(e))?(vg(n,t),n.h==0&&(n.src=null,e[G_]=null)):ef(t)}}}function Q0(t){return t in cp?cp[t]:cp[t]="on"+t}function BH(t,e){if(t.ba)t=!0;else{e=new Cl(e,this);var n=t.listener,i=t.ha||t.src;t.ea&&z_(t),t=n.call(i,e)}return t}function Y_(t){return t=t[G_],t instanceof tf?t:null}var up="__closure_events_fn_"+(1e9*Math.random()>>>0);function X_(t){return typeof t=="function"?t:(t[up]||(t[up]=function(e){return t.handleEvent(e)}),t[up])}function xt(){zr.call(this),this.i=new tf(this),this.P=this,this.I=null}Ht(xt,zr);xt.prototype[ql]=!0;xt.prototype.removeEventListener=function(t,e,n,i){X0(this,t,e,n,i)};function Bt(t,e){var n,i=t.I;if(i)for(n=[];i;i=i.I)n.push(i);if(t=t.P,i=e.type||e,typeof e=="string")e=new Xt(e,t);else if(e instanceof Xt)e.target=e.target||t;else{var r=e;e=new Xt(i,t),K0(e,r)}if(r=!0,n)for(var o=n.length-1;0<=o;o--){var l=e.g=n[o];r=lu(l,i,!0,e)&&r}if(l=e.g=t,r=lu(l,i,!0,e)&&r,r=lu(l,i,!1,e)&&r,n)for(o=0;o<n.length;o++)l=e.g=n[o],r=lu(l,i,!1,e)&&r}xt.prototype.M=function(){if(xt.X.M.call(this),this.i){var t=this.i,e;for(e in t.g){for(var n=t.g[e],i=0;i<n.length;i++)ef(n[i]);delete t.g[e],t.h--}}this.I=null};xt.prototype.N=function(t,e,n,i){return this.i.add(String(t),e,!1,n,i)};xt.prototype.O=function(t,e,n,i){return this.i.add(String(t),e,!0,n,i)};function lu(t,e,n,i){if(e=t.i.g[String(e)],!e)return!0;e=e.concat();for(var r=!0,o=0;o<e.length;++o){var l=e[o];if(l&&!l.ba&&l.capture==n){var u=l.listener,h=l.ha||l.src;l.ea&&vg(t.i,l),r=u.call(h,i)!==!1&&r}}return r&&!i.defaultPrevented}var Q_=ge.JSON.stringify;function WH(){var t=eI;let e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}class HH{constructor(){this.h=this.g=null}add(e,n){const i=J0.get();i.set(e,n),this.h?this.h.next=i:this.g=i,this.h=i}}var J0=new class{constructor(t,e){this.i=t,this.j=e,this.h=0,this.g=null}get(){let t;return 0<this.h?(this.h--,t=this.g,this.g=t.next,t.next=null):t=this.i(),t}}(()=>new VH,t=>t.reset());class VH{constructor(){this.next=this.g=this.h=null}set(e,n){this.h=e,this.g=n,this.next=null}reset(){this.next=this.g=this.h=null}}function jH(t){ge.setTimeout(()=>{throw t},0)}function Z0(t,e){Eg||qH(),bg||(Eg(),bg=!0),eI.add(t,e)}var Eg;function qH(){var t=ge.Promise.resolve(void 0);Eg=function(){t.then(KH)}}var bg=!1,eI=new HH;function KH(){for(var t;t=WH();){try{t.h.call(t.g)}catch(n){jH(n)}var e=J0;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}bg=!1}function nf(t,e){xt.call(this),this.h=t||1,this.g=e||ge,this.j=Yt(this.lb,this),this.l=Date.now()}Ht(nf,xt);ie=nf.prototype;ie.ca=!1;ie.R=null;ie.lb=function(){if(this.ca){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.R=this.g.setTimeout(this.j,this.h-t):(this.R&&(this.g.clearTimeout(this.R),this.R=null),Bt(this,"tick"),this.ca&&(J_(this),this.start()))}};ie.start=function(){this.ca=!0,this.R||(this.R=this.g.setTimeout(this.j,this.h),this.l=Date.now())};function J_(t){t.ca=!1,t.R&&(t.g.clearTimeout(t.R),t.R=null)}ie.M=function(){nf.X.M.call(this),J_(this),delete this.g};function Z_(t,e,n){if(typeof t=="function")n&&(t=Yt(t,n));else if(t&&typeof t.handleEvent=="function")t=Yt(t.handleEvent,t);else throw Error("Invalid listener argument");return 2147483647<Number(e)?-1:ge.setTimeout(t,e||0)}function tI(t){t.g=Z_(()=>{t.g=null,t.i&&(t.i=!1,tI(t))},t.j);const e=t.h;t.h=null,t.m.apply(null,e)}class GH extends zr{constructor(e,n){super(),this.m=e,this.j=n,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:tI(this)}M(){super.M(),this.g&&(ge.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Il(t){zr.call(this),this.h=t,this.g={}}Ht(Il,zr);var Qb=[];function nI(t,e,n,i){Array.isArray(n)||(n&&(Qb[0]=n.toString()),n=Qb);for(var r=0;r<n.length;r++){var o=G0(e,n[r],i||t.handleEvent,!1,t.h||t);if(!o)break;t.g[o.key]=o}}function iI(t){K_(t.g,function(e,n){this.g.hasOwnProperty(n)&&z_(e)},t),t.g={}}Il.prototype.M=function(){Il.X.M.call(this),iI(this)};Il.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};function rf(){this.g=!0}rf.prototype.Aa=function(){this.g=!1};function zH(t,e,n,i,r,o){t.info(function(){if(t.g)if(o)for(var l="",u=o.split("&"),h=0;h<u.length;h++){var d=u[h].split("=");if(1<d.length){var p=d[0];d=d[1];var _=p.split("_");l=2<=_.length&&_[1]=="type"?l+(p+"="+d+"&"):l+(p+"=redacted&")}}else l=null;else l=o;return"XMLHTTP REQ ("+i+") [attempt "+r+"]: "+e+`
`+n+`
`+l})}function YH(t,e,n,i,r,o,l){t.info(function(){return"XMLHTTP RESP ("+i+") [ attempt "+r+"]: "+e+`
`+n+`
`+o+" "+l})}function Io(t,e,n,i){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+QH(t,n)+(i?" "+i:"")})}function XH(t,e){t.info(function(){return"TIMEOUT: "+e})}rf.prototype.info=function(){};function QH(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n){for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var i=n[t];if(!(2>i.length)){var r=i[1];if(Array.isArray(r)&&!(1>r.length)){var o=r[0];if(o!="noop"&&o!="stop"&&o!="close")for(var l=1;l<r.length;l++)r[l]=""}}}}return Q_(n)}catch{return e}}var aa={},Jb=null;function em(){return Jb=Jb||new xt}aa.Pa="serverreachability";function rI(t){Xt.call(this,aa.Pa,t)}Ht(rI,Xt);function Al(t){const e=em();Bt(e,new rI(e))}aa.STAT_EVENT="statevent";function sI(t,e){Xt.call(this,aa.STAT_EVENT,t),this.stat=e}Ht(sI,Xt);function sn(t){const e=em();Bt(e,new sI(e,t))}aa.Qa="timingevent";function oI(t,e){Xt.call(this,aa.Qa,t),this.size=e}Ht(oI,Xt);function Kl(t,e){if(typeof t!="function")throw Error("Fn must not be null and must be a function");return ge.setTimeout(function(){t()},e)}var tm={NO_ERROR:0,mb:1,zb:2,yb:3,tb:4,xb:5,Ab:6,Ma:7,TIMEOUT:8,Db:9},JH={rb:"complete",Nb:"success",Na:"error",Ma:"abort",Fb:"ready",Gb:"readystatechange",TIMEOUT:"timeout",Bb:"incrementaldata",Eb:"progress",ub:"downloadprogress",Vb:"uploadprogress"};function nm(){}nm.prototype.h=null;function Zb(t){return t.h||(t.h=t.i())}function ZH(){}var Gl={OPEN:"a",qb:"b",Na:"c",Cb:"d"};function im(){Xt.call(this,"d")}Ht(im,Xt);function rm(){Xt.call(this,"c")}Ht(rm,Xt);var wg;function sf(){}Ht(sf,nm);sf.prototype.g=function(){return new XMLHttpRequest};sf.prototype.i=function(){return{}};wg=new sf;function zl(t,e,n,i){this.l=t,this.j=e,this.m=n,this.U=i||1,this.S=new Il(this),this.O=e2,t=_g?125:void 0,this.T=new nf(t),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.V=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.Y=-1,this.I=!1,this.N=0,this.L=null,this.$=this.J=this.Z=this.P=!1,this.h=new aI}function aI(){this.i=null,this.g="",this.h=!1}var e2=45e3,Tg={},sh={};ie=zl.prototype;ie.setTimeout=function(t){this.O=t};function Cg(t,e,n){t.K=1,t.v=af(ur(e)),t.s=n,t.P=!0,lI(t,null)}function lI(t,e){t.F=Date.now(),Yl(t),t.A=ur(t.v);var n=t.A,i=t.U;Array.isArray(i)||(i=[String(i)]),_I(n.i,"t",i),t.C=0,n=t.l.H,t.h=new aI,t.g=$I(t.l,n?e:null,!t.s),0<t.N&&(t.L=new GH(Yt(t.La,t,t.g),t.N)),nI(t.S,t.g,"readystatechange",t.ib),e=t.H?q0(t.H):{},t.s?(t.u||(t.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.da(t.A,t.u,t.s,e)):(t.u="GET",t.g.da(t.A,t.u,null,e)),Al(),zH(t.j,t.u,t.A,t.m,t.U,t.s)}ie.ib=function(t){t=t.target;const e=this.L;e&&nr(t)==3?e.l():this.La(t)};ie.La=function(t){try{if(t==this.g)e:{const p=nr(this.g);var e=this.g.Ea();const _=this.g.aa();if(!(3>p)&&(p!=3||_g||this.g&&(this.h.h||this.g.fa()||iw(this.g)))){this.I||p!=4||e==7||(e==8||0>=_?Al(3):Al(2)),of(this);var n=this.g.aa();this.Y=n;t:if(cI(this)){var i=iw(this.g);t="";var r=i.length,o=nr(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){ws(this),nl(this);var l="";break t}this.h.i=new ge.TextDecoder}for(e=0;e<r;e++)this.h.h=!0,t+=this.h.i.decode(i[e],{stream:o&&e==r-1});i.splice(0,r),this.h.g+=t,this.C=0,l=this.h.g}else l=this.g.fa();if(this.i=n==200,YH(this.j,this.u,this.A,this.m,this.U,p,n),this.i){if(this.Z&&!this.J){t:{if(this.g){var u,h=this.g;if((u=h.g?h.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!rh(u)){var d=u;break t}}d=null}if(n=d)Io(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,Ig(this,n);else{this.i=!1,this.o=3,sn(12),ws(this),nl(this);break e}}this.P?(uI(this,p,l),_g&&this.i&&p==3&&(nI(this.S,this.T,"tick",this.hb),this.T.start())):(Io(this.j,this.m,l,null),Ig(this,l)),p==4&&ws(this),this.i&&!this.I&&(p==4?LI(this.l,this):(this.i=!1,Yl(this)))}else n==400&&0<l.indexOf("Unknown SID")?(this.o=3,sn(12)):(this.o=0,sn(13)),ws(this),nl(this)}}}catch{}finally{}};function cI(t){return t.g?t.u=="GET"&&t.K!=2&&t.l.Da:!1}function uI(t,e,n){let i=!0,r;for(;!t.I&&t.C<n.length;)if(r=t2(t,n),r==sh){e==4&&(t.o=4,sn(14),i=!1),Io(t.j,t.m,null,"[Incomplete Response]");break}else if(r==Tg){t.o=4,sn(15),Io(t.j,t.m,n,"[Invalid Chunk]"),i=!1;break}else Io(t.j,t.m,r,null),Ig(t,r);cI(t)&&r!=sh&&r!=Tg&&(t.h.g="",t.C=0),e!=4||n.length!=0||t.h.h||(t.o=1,sn(16),i=!1),t.i=t.i&&i,i?0<n.length&&!t.$&&(t.$=!0,e=t.l,e.g==t&&e.$&&!e.K&&(e.j.info("Great, no buffering proxy detected. Bytes received: "+n.length),hm(e),e.K=!0,sn(11))):(Io(t.j,t.m,n,"[Invalid Chunked Response]"),ws(t),nl(t))}ie.hb=function(){if(this.g){var t=nr(this.g),e=this.g.fa();this.C<e.length&&(of(this),uI(this,t,e),this.i&&t!=4&&Yl(this))}};function t2(t,e){var n=t.C,i=e.indexOf(`
`,n);return i==-1?sh:(n=Number(e.substring(n,i)),isNaN(n)?Tg:(i+=1,i+n>e.length?sh:(e=e.substr(i,n),t.C=i+n,e)))}ie.cancel=function(){this.I=!0,ws(this)};function Yl(t){t.V=Date.now()+t.O,hI(t,t.O)}function hI(t,e){if(t.B!=null)throw Error("WatchDog timer not null");t.B=Kl(Yt(t.gb,t),e)}function of(t){t.B&&(ge.clearTimeout(t.B),t.B=null)}ie.gb=function(){this.B=null;const t=Date.now();0<=t-this.V?(XH(this.j,this.A),this.K!=2&&(Al(),sn(17)),ws(this),this.o=2,nl(this)):hI(this,this.V-t)};function nl(t){t.l.G==0||t.I||LI(t.l,t)}function ws(t){of(t);var e=t.L;e&&typeof e.na=="function"&&e.na(),t.L=null,J_(t.T),iI(t.S),t.g&&(e=t.g,t.g=null,e.abort(),e.na())}function Ig(t,e){try{var n=t.l;if(n.G!=0&&(n.g==t||Ag(n.h,t))){if(!t.J&&Ag(n.h,t)&&n.G==3){try{var i=n.Fa.g.parse(e)}catch{i=null}if(Array.isArray(i)&&i.length==3){var r=i;if(r[0]==0){e:if(!n.u){if(n.g)if(n.g.F+3e3<t.F)lh(n),hf(n);else break e;um(n),sn(18)}}else n.Ba=r[1],0<n.Ba-n.T&&37500>r[2]&&n.L&&n.A==0&&!n.v&&(n.v=Kl(Yt(n.cb,n),6e3));if(1>=yI(n.h)&&n.ja){try{n.ja()}catch{}n.ja=void 0}}else Ts(n,11)}else if((t.J||n.g==t)&&lh(n),!rh(e))for(r=n.Fa.g.parse(e),e=0;e<r.length;e++){let d=r[e];if(n.T=d[0],d=d[1],n.G==2)if(d[0]=="c"){n.I=d[1],n.ka=d[2];const p=d[3];p!=null&&(n.ma=p,n.j.info("VER="+n.ma));const _=d[4];_!=null&&(n.Ca=_,n.j.info("SVER="+n.Ca));const y=d[5];y!=null&&typeof y=="number"&&0<y&&(i=1.5*y,n.J=i,n.j.info("backChannelRequestTimeoutMs_="+i)),i=n;const E=t.g;if(E){const S=E.g?E.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(S){var o=i.h;o.g||S.indexOf("spdy")==-1&&S.indexOf("quic")==-1&&S.indexOf("h2")==-1||(o.j=o.l,o.g=new Set,o.h&&(sm(o,o.h),o.h=null))}if(i.D){const O=E.g?E.g.getResponseHeader("X-HTTP-Session-Id"):null;O&&(i.za=O,at(i.F,i.D,O))}}n.G=3,n.l&&n.l.xa(),n.$&&(n.P=Date.now()-t.F,n.j.info("Handshake RTT: "+n.P+"ms")),i=n;var l=t;if(i.sa=MI(i,i.H?i.ka:null,i.V),l.J){EI(i.h,l);var u=l,h=i.J;h&&u.setTimeout(h),u.B&&(of(u),Yl(u)),i.g=l}else xI(i);0<n.i.length&&ff(n)}else d[0]!="stop"&&d[0]!="close"||Ts(n,7);else n.G==3&&(d[0]=="stop"||d[0]=="close"?d[0]=="stop"?Ts(n,7):cm(n):d[0]!="noop"&&n.l&&n.l.wa(d),n.A=0)}}Al(4)}catch{}}function n2(t){if(t.W&&typeof t.W=="function")return t.W();if(typeof Map<"u"&&t instanceof Map||typeof Set<"u"&&t instanceof Set)return Array.from(t.values());if(typeof t=="string")return t.split("");if(Jh(t)){for(var e=[],n=t.length,i=0;i<n;i++)e.push(t[i]);return e}e=[],n=0;for(i in t)e[n++]=t[i];return e}function i2(t){if(t.oa&&typeof t.oa=="function")return t.oa();if(!t.W||typeof t.W!="function"){if(typeof Map<"u"&&t instanceof Map)return Array.from(t.keys());if(!(typeof Set<"u"&&t instanceof Set)){if(Jh(t)||typeof t=="string"){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}e=[],n=0;for(const i in t)e[n++]=i;return e}}}function fI(t,e){if(t.forEach&&typeof t.forEach=="function")t.forEach(e,void 0);else if(Jh(t)||typeof t=="string")Array.prototype.forEach.call(t,e,void 0);else for(var n=i2(t),i=n2(t),r=i.length,o=0;o<r;o++)e.call(void 0,i[o],n&&n[o],t)}var dI=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function r2(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var i=t[n].indexOf("="),r=null;if(0<=i){var o=t[n].substring(0,i);r=t[n].substring(i+1)}else o=t[n];e(o,r?decodeURIComponent(r.replace(/\+/g," ")):"")}}}function Rs(t,e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,t instanceof Rs){this.h=e!==void 0?e:t.h,oh(this,t.j),this.s=t.s,this.g=t.g,ah(this,t.m),this.l=t.l,e=t.i;var n=new Sl;n.i=e.i,e.g&&(n.g=new Map(e.g),n.h=e.h),ew(this,n),this.o=t.o}else t&&(n=String(t).match(dI))?(this.h=!!e,oh(this,n[1]||"",!0),this.s=Va(n[2]||""),this.g=Va(n[3]||"",!0),ah(this,n[4]),this.l=Va(n[5]||"",!0),ew(this,n[6]||"",!0),this.o=Va(n[7]||"")):(this.h=!!e,this.i=new Sl(null,this.h))}Rs.prototype.toString=function(){var t=[],e=this.j;e&&t.push(ja(e,tw,!0),":");var n=this.g;return(n||e=="file")&&(t.push("//"),(e=this.s)&&t.push(ja(e,tw,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n=this.m,n!=null&&t.push(":",String(n))),(n=this.l)&&(this.g&&n.charAt(0)!="/"&&t.push("/"),t.push(ja(n,n.charAt(0)=="/"?a2:o2,!0))),(n=this.i.toString())&&t.push("?",n),(n=this.o)&&t.push("#",ja(n,c2)),t.join("")};function ur(t){return new Rs(t)}function oh(t,e,n){t.j=n?Va(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function ah(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function ew(t,e,n){e instanceof Sl?(t.i=e,u2(t.i,t.h)):(n||(e=ja(e,l2)),t.i=new Sl(e,t.h))}function at(t,e,n){t.i.set(e,n)}function af(t){return at(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function Va(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function ja(t,e,n){return typeof t=="string"?(t=encodeURI(t).replace(e,s2),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function s2(t){return t=t.charCodeAt(0),"%"+(t>>4&15).toString(16)+(t&15).toString(16)}var tw=/[#\/\?@]/g,o2=/[#\?:]/g,a2=/[#\?]/g,l2=/[#\?@]/g,c2=/#/g;function Sl(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function Yr(t){t.g||(t.g=new Map,t.h=0,t.i&&r2(t.i,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}ie=Sl.prototype;ie.add=function(t,e){Yr(this),this.i=null,t=la(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this};function pI(t,e){Yr(t),e=la(t,e),t.g.has(e)&&(t.i=null,t.h-=t.g.get(e).length,t.g.delete(e))}function gI(t,e){return Yr(t),e=la(t,e),t.g.has(e)}ie.forEach=function(t,e){Yr(this),this.g.forEach(function(n,i){n.forEach(function(r){t.call(e,r,i,this)},this)},this)};ie.oa=function(){Yr(this);const t=Array.from(this.g.values()),e=Array.from(this.g.keys()),n=[];for(let i=0;i<e.length;i++){const r=t[i];for(let o=0;o<r.length;o++)n.push(e[i])}return n};ie.W=function(t){Yr(this);let e=[];if(typeof t=="string")gI(this,t)&&(e=e.concat(this.g.get(la(this,t))));else{t=Array.from(this.g.values());for(let n=0;n<t.length;n++)e=e.concat(t[n])}return e};ie.set=function(t,e){return Yr(this),this.i=null,t=la(this,t),gI(this,t)&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this};ie.get=function(t,e){return t?(t=this.W(t),0<t.length?String(t[0]):e):e};function _I(t,e,n){pI(t,e),0<n.length&&(t.i=null,t.g.set(la(t,e),j_(n)),t.h+=n.length)}ie.toString=function(){if(this.i)return this.i;if(!this.g)return"";const t=[],e=Array.from(this.g.keys());for(var n=0;n<e.length;n++){var i=e[n];const o=encodeURIComponent(String(i)),l=this.W(i);for(i=0;i<l.length;i++){var r=o;l[i]!==""&&(r+="="+encodeURIComponent(String(l[i]))),t.push(r)}}return this.i=t.join("&")};function la(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}function u2(t,e){e&&!t.j&&(Yr(t),t.i=null,t.g.forEach(function(n,i){var r=i.toLowerCase();i!=r&&(pI(this,i),_I(this,r,n))},t)),t.j=e}var h2=class{constructor(t,e){this.h=t,this.g=e}};function mI(t){this.l=t||f2,ge.PerformanceNavigationTiming?(t=ge.performance.getEntriesByType("navigation"),t=0<t.length&&(t[0].nextHopProtocol=="hq"||t[0].nextHopProtocol=="h2")):t=!!(ge.g&&ge.g.Ga&&ge.g.Ga()&&ge.g.Ga().$b),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var f2=10;function vI(t){return t.h?!0:t.g?t.g.size>=t.j:!1}function yI(t){return t.h?1:t.g?t.g.size:0}function Ag(t,e){return t.h?t.h==e:t.g?t.g.has(e):!1}function sm(t,e){t.g?t.g.add(e):t.h=e}function EI(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}mI.prototype.cancel=function(){if(this.i=bI(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const t of this.g.values())t.cancel();this.g.clear()}};function bI(t){if(t.h!=null)return t.i.concat(t.h.D);if(t.g!=null&&t.g.size!==0){let e=t.i;for(const n of t.g.values())e=e.concat(n.D);return e}return j_(t.i)}function om(){}om.prototype.stringify=function(t){return ge.JSON.stringify(t,void 0)};om.prototype.parse=function(t){return ge.JSON.parse(t,void 0)};function d2(){this.g=new om}function p2(t,e,n){const i=n||"";try{fI(t,function(r,o){let l=r;jl(r)&&(l=Q_(r)),e.push(i+o+"="+encodeURIComponent(l))})}catch(r){throw e.push(i+"type="+encodeURIComponent("_badmap")),r}}function g2(t,e){const n=new rf;if(ge.Image){const i=new Image;i.onload=au(cu,n,i,"TestLoadImage: loaded",!0,e),i.onerror=au(cu,n,i,"TestLoadImage: error",!1,e),i.onabort=au(cu,n,i,"TestLoadImage: abort",!1,e),i.ontimeout=au(cu,n,i,"TestLoadImage: timeout",!1,e),ge.setTimeout(function(){i.ontimeout&&i.ontimeout()},1e4),i.src=t}else e(!1)}function cu(t,e,n,i,r){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,r(i)}catch{}}function lf(t){this.l=t.ac||null,this.j=t.jb||!1}Ht(lf,nm);lf.prototype.g=function(){return new cf(this.l,this.j)};lf.prototype.i=function(t){return function(){return t}}({});function cf(t,e){xt.call(this),this.D=t,this.u=e,this.m=void 0,this.readyState=am,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Ht(cf,xt);var am=0;ie=cf.prototype;ie.open=function(t,e){if(this.readyState!=am)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,Ol(this)};ie.send=function(t){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.D||ge).fetch(new Request(this.B,e)).then(this.Wa.bind(this),this.ga.bind(this))};ie.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Xl(this)),this.readyState=am};ie.Wa=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,Ol(this)),this.g&&(this.readyState=3,Ol(this),this.g)))if(this.responseType==="arraybuffer")t.arrayBuffer().then(this.Ua.bind(this),this.ga.bind(this));else if(typeof ge.ReadableStream<"u"&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;wI(this)}else t.text().then(this.Va.bind(this),this.ga.bind(this))};function wI(t){t.j.read().then(t.Ta.bind(t)).catch(t.ga.bind(t))}ie.Ta=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?Xl(this):Ol(this),this.readyState==3&&wI(this)}};ie.Va=function(t){this.g&&(this.response=this.responseText=t,Xl(this))};ie.Ua=function(t){this.g&&(this.response=t,Xl(this))};ie.ga=function(){this.g&&Xl(this)};function Xl(t){t.readyState=4,t.l=null,t.j=null,t.A=null,Ol(t)}ie.setRequestHeader=function(t,e){this.v.append(t,e)};ie.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""};ie.getAllResponseHeaders=function(){if(!this.h)return"";const t=[],e=this.h.entries();for(var n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join(`\r
`)};function Ol(t){t.onreadystatechange&&t.onreadystatechange.call(t)}Object.defineProperty(cf.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(t){this.m=t?"include":"same-origin"}});var _2=ge.JSON.parse;function _t(t){xt.call(this),this.headers=new Map,this.u=t||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=TI,this.K=this.L=!1}Ht(_t,xt);var TI="",m2=/^https?$/i,v2=["POST","PUT"];ie=_t.prototype;ie.Ka=function(t){this.L=t};ie.da=function(t,e,n,i){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+t);e=e?e.toUpperCase():"GET",this.H=t,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():wg.g(),this.C=this.u?Zb(this.u):Zb(wg),this.g.onreadystatechange=Yt(this.Ha,this);try{this.F=!0,this.g.open(e,String(t),!0),this.F=!1}catch(o){nw(this,o);return}if(t=n||"",n=new Map(this.headers),i)if(Object.getPrototypeOf(i)===Object.prototype)for(var r in i)n.set(r,i[r]);else if(typeof i.keys=="function"&&typeof i.get=="function")for(const o of i.keys())n.set(o,i.get(o));else throw Error("Unknown input type for opt_headers: "+String(i));i=Array.from(n.keys()).find(o=>o.toLowerCase()=="content-type"),r=ge.FormData&&t instanceof ge.FormData,!(0<=W0(v2,e))||i||r||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[o,l]of n)this.g.setRequestHeader(o,l);this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{AI(this),0<this.B&&((this.K=y2(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Yt(this.qa,this)):this.A=Z_(this.qa,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(o){nw(this,o)}};function y2(t){return Tl&&kH()&&typeof t.timeout=="number"&&t.ontimeout!==void 0}ie.qa=function(){typeof V_<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Bt(this,"timeout"),this.abort(8))};function nw(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,CI(t),uf(t)}function CI(t){t.D||(t.D=!0,Bt(t,"complete"),Bt(t,"error"))}ie.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,Bt(this,"complete"),Bt(this,"abort"),uf(this))};ie.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),uf(this,!0)),_t.X.M.call(this)};ie.Ha=function(){this.s||(this.F||this.v||this.l?II(this):this.fb())};ie.fb=function(){II(this)};function II(t){if(t.h&&typeof V_<"u"&&(!t.C[1]||nr(t)!=4||t.aa()!=2)){if(t.v&&nr(t)==4)Z_(t.Ha,0,t);else if(Bt(t,"readystatechange"),nr(t)==4){t.h=!1;try{const u=t.aa();e:switch(u){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var n;if(!(n=e)){var i;if(i=u===0){var r=String(t.H).match(dI)[1]||null;if(!r&&ge.self&&ge.self.location){var o=ge.self.location.protocol;r=o.substr(0,o.length-1)}i=!m2.test(r?r.toLowerCase():"")}n=i}if(n)Bt(t,"complete"),Bt(t,"success");else{t.m=6;try{var l=2<nr(t)?t.g.statusText:""}catch{l=""}t.j=l+" ["+t.aa()+"]",CI(t)}}finally{uf(t)}}}}function uf(t,e){if(t.g){AI(t);const n=t.g,i=t.C[0]?ih:null;t.g=null,t.C=null,e||Bt(t,"ready");try{n.onreadystatechange=i}catch{}}}function AI(t){t.g&&t.K&&(t.g.ontimeout=null),t.A&&(ge.clearTimeout(t.A),t.A=null)}function nr(t){return t.g?t.g.readyState:0}ie.aa=function(){try{return 2<nr(this)?this.g.status:-1}catch{return-1}};ie.fa=function(){try{return this.g?this.g.responseText:""}catch{return""}};ie.Sa=function(t){if(this.g){var e=this.g.responseText;return t&&e.indexOf(t)==0&&(e=e.substring(t.length)),_2(e)}};function iw(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.J){case TI:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch{return null}}ie.Ea=function(){return this.m};ie.Oa=function(){return typeof this.j=="string"?this.j:String(this.j)};function SI(t){let e="";return K_(t,function(n,i){e+=i,e+=":",e+=n,e+=`\r
`}),e}function lm(t,e,n){e:{for(i in n){var i=!1;break e}i=!0}i||(n=SI(n),typeof t=="string"?n!=null&&encodeURIComponent(String(n)):at(t,e,n))}function ka(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function OI(t){this.Ca=0,this.i=[],this.j=new rf,this.ka=this.sa=this.F=this.V=this.g=this.za=this.D=this.ia=this.o=this.S=this.s=null,this.ab=this.U=0,this.Za=ka("failFast",!1,t),this.L=this.v=this.u=this.m=this.l=null,this.Y=!0,this.pa=this.Ba=this.T=-1,this.Z=this.A=this.C=0,this.Xa=ka("baseRetryDelayMs",5e3,t),this.bb=ka("retryDelaySeedMs",1e4,t),this.$a=ka("forwardChannelMaxRetries",2,t),this.ta=ka("forwardChannelRequestTimeoutMs",2e4,t),this.ra=t&&t.xmlHttpFactory||void 0,this.Da=t&&t.Zb||!1,this.J=void 0,this.H=t&&t.supportsCrossDomainXhr||!1,this.I="",this.h=new mI(t&&t.concurrentRequestLimit),this.Fa=new d2,this.O=t&&t.fastHandshake||!1,this.N=t&&t.encodeInitMessageHeaders||!1,this.O&&this.N&&(this.N=!1),this.Ya=t&&t.Xb||!1,t&&t.Aa&&this.j.Aa(),t&&t.forceLongPolling&&(this.Y=!1),this.$=!this.O&&this.Y&&t&&t.detectBufferingProxy||!1,this.ja=void 0,this.P=0,this.K=!1,this.la=this.B=null}ie=OI.prototype;ie.ma=8;ie.G=1;function cm(t){if(NI(t),t.G==3){var e=t.U++,n=ur(t.F);at(n,"SID",t.I),at(n,"RID",e),at(n,"TYPE","terminate"),Ql(t,n),e=new zl(t,t.j,e,void 0),e.K=2,e.v=af(ur(n)),n=!1,ge.navigator&&ge.navigator.sendBeacon&&(n=ge.navigator.sendBeacon(e.v.toString(),"")),!n&&ge.Image&&(new Image().src=e.v,n=!0),n||(e.g=$I(e.l,null),e.g.da(e.v)),e.F=Date.now(),Yl(e)}kI(t)}function hf(t){t.g&&(hm(t),t.g.cancel(),t.g=null)}function NI(t){hf(t),t.u&&(ge.clearTimeout(t.u),t.u=null),lh(t),t.h.cancel(),t.m&&(typeof t.m=="number"&&ge.clearTimeout(t.m),t.m=null)}function ff(t){vI(t.h)||t.m||(t.m=!0,Z0(t.Ja,t),t.C=0)}function E2(t,e){return yI(t.h)>=t.h.j-(t.m?1:0)?!1:t.m?(t.i=e.D.concat(t.i),!0):t.G==1||t.G==2||t.C>=(t.Za?0:t.$a)?!1:(t.m=Kl(Yt(t.Ja,t,e),PI(t,t.C)),t.C++,!0)}ie.Ja=function(t){if(this.m)if(this.m=null,this.G==1){if(!t){this.U=Math.floor(1e5*Math.random()),t=this.U++;const r=new zl(this,this.j,t,void 0);let o=this.s;if(this.S&&(o?(o=q0(o),K0(o,this.S)):o=this.S),this.o!==null||this.N||(r.H=o,o=null),this.O)e:{for(var e=0,n=0;n<this.i.length;n++){t:{var i=this.i[n];if("__data__"in i.g&&(i=i.g.__data__,typeof i=="string")){i=i.length;break t}i=void 0}if(i===void 0)break;if(e+=i,4096<e){e=n;break e}if(e===4096||n===this.i.length-1){e=n+1;break e}}e=1e3}else e=1e3;e=RI(this,r,e),n=ur(this.F),at(n,"RID",t),at(n,"CVER",22),this.D&&at(n,"X-HTTP-Session-Id",this.D),Ql(this,n),o&&(this.N?e="headers="+encodeURIComponent(String(SI(o)))+"&"+e:this.o&&lm(n,this.o,o)),sm(this.h,r),this.Ya&&at(n,"TYPE","init"),this.O?(at(n,"$req",e),at(n,"SID","null"),r.Z=!0,Cg(r,n,null)):Cg(r,n,e),this.G=2}}else this.G==3&&(t?rw(this,t):this.i.length==0||vI(this.h)||rw(this))};function rw(t,e){var n;e?n=e.m:n=t.U++;const i=ur(t.F);at(i,"SID",t.I),at(i,"RID",n),at(i,"AID",t.T),Ql(t,i),t.o&&t.s&&lm(i,t.o,t.s),n=new zl(t,t.j,n,t.C+1),t.o===null&&(n.H=t.s),e&&(t.i=e.D.concat(t.i)),e=RI(t,n,1e3),n.setTimeout(Math.round(.5*t.ta)+Math.round(.5*t.ta*Math.random())),sm(t.h,n),Cg(n,i,e)}function Ql(t,e){t.ia&&K_(t.ia,function(n,i){at(e,i,n)}),t.l&&fI({},function(n,i){at(e,i,n)})}function RI(t,e,n){n=Math.min(t.i.length,n);var i=t.l?Yt(t.l.Ra,t.l,t):null;e:{var r=t.i;let o=-1;for(;;){const l=["count="+n];o==-1?0<n?(o=r[0].h,l.push("ofs="+o)):o=0:l.push("ofs="+o);let u=!0;for(let h=0;h<n;h++){let d=r[h].h;const p=r[h].g;if(d-=o,0>d)o=Math.max(0,r[h].h-100),u=!1;else try{p2(p,l,"req"+d+"_")}catch{i&&i(p)}}if(u){i=l.join("&");break e}}}return t=t.i.splice(0,n),e.D=t,i}function xI(t){t.g||t.u||(t.Z=1,Z0(t.Ia,t),t.A=0)}function um(t){return t.g||t.u||3<=t.A?!1:(t.Z++,t.u=Kl(Yt(t.Ia,t),PI(t,t.A)),t.A++,!0)}ie.Ia=function(){if(this.u=null,DI(this),this.$&&!(this.K||this.g==null||0>=this.P)){var t=2*this.P;this.j.info("BP detection timer enabled: "+t),this.B=Kl(Yt(this.eb,this),t)}};ie.eb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.L=!1,this.K=!0,sn(10),hf(this),DI(this))};function hm(t){t.B!=null&&(ge.clearTimeout(t.B),t.B=null)}function DI(t){t.g=new zl(t,t.j,"rpc",t.Z),t.o===null&&(t.g.H=t.s),t.g.N=0;var e=ur(t.sa);at(e,"RID","rpc"),at(e,"SID",t.I),at(e,"CI",t.L?"0":"1"),at(e,"AID",t.T),at(e,"TYPE","xmlhttp"),Ql(t,e),t.o&&t.s&&lm(e,t.o,t.s),t.J&&t.g.setTimeout(t.J);var n=t.g;t=t.ka,n.K=1,n.v=af(ur(e)),n.s=null,n.P=!0,lI(n,t)}ie.cb=function(){this.v!=null&&(this.v=null,hf(this),um(this),sn(19))};function lh(t){t.v!=null&&(ge.clearTimeout(t.v),t.v=null)}function LI(t,e){var n=null;if(t.g==e){lh(t),hm(t),t.g=null;var i=2}else if(Ag(t.h,e))n=e.D,EI(t.h,e),i=1;else return;if(t.G!=0){if(t.pa=e.Y,e.i)if(i==1){n=e.s?e.s.length:0,e=Date.now()-e.F;var r=t.C;i=em(),Bt(i,new oI(i,n)),ff(t)}else xI(t);else if(r=e.o,r==3||r==0&&0<t.pa||!(i==1&&E2(t,e)||i==2&&um(t)))switch(n&&0<n.length&&(e=t.h,e.i=e.i.concat(n)),r){case 1:Ts(t,5);break;case 4:Ts(t,10);break;case 3:Ts(t,6);break;default:Ts(t,2)}}}function PI(t,e){let n=t.Xa+Math.floor(Math.random()*t.bb);return t.l||(n*=2),n*e}function Ts(t,e){if(t.j.info("Error code "+e),e==2){var n=null;t.l&&(n=null);var i=Yt(t.kb,t);n||(n=new Rs("//www.google.com/images/cleardot.gif"),ge.location&&ge.location.protocol=="http"||oh(n,"https"),af(n)),g2(n.toString(),i)}else sn(2);t.G=0,t.l&&t.l.va(e),kI(t),NI(t)}ie.kb=function(t){t?(this.j.info("Successfully pinged google.com"),sn(2)):(this.j.info("Failed to ping google.com"),sn(1))};function kI(t){if(t.G=0,t.la=[],t.l){const e=bI(t.h);(e.length!=0||t.i.length!=0)&&(zb(t.la,e),zb(t.la,t.i),t.h.i.length=0,j_(t.i),t.i.length=0),t.l.ua()}}function MI(t,e,n){var i=n instanceof Rs?ur(n):new Rs(n,void 0);if(i.g!="")e&&(i.g=e+"."+i.g),ah(i,i.m);else{var r=ge.location;i=r.protocol,e=e?e+"."+r.hostname:r.hostname,r=+r.port;var o=new Rs(null,void 0);i&&oh(o,i),e&&(o.g=e),r&&ah(o,r),n&&(o.l=n),i=o}return n=t.D,e=t.za,n&&e&&at(i,n,e),at(i,"VER",t.ma),Ql(t,i),i}function $I(t,e,n){if(e&&!t.H)throw Error("Can't create secondary domain capable XhrIo object.");return e=n&&t.Da&&!t.ra?new _t(new lf({jb:!0})):new _t(t.ra),e.Ka(t.H),e}function FI(){}ie=FI.prototype;ie.xa=function(){};ie.wa=function(){};ie.va=function(){};ie.ua=function(){};ie.Ra=function(){};function Xn(t,e){xt.call(this),this.g=new OI(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(t?t["X-WebChannel-Client-Profile"]=e.ya:t={"X-WebChannel-Client-Profile":e.ya}),this.g.S=t,(t=e&&e.Yb)&&!rh(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!rh(e)&&(this.g.D=e,t=this.h,t!==null&&e in t&&(t=this.h,e in t&&delete t[e])),this.j=new ca(this)}Ht(Xn,xt);Xn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.H=!0);var t=this.g,e=this.l,n=this.h||void 0;sn(0),t.V=e,t.ia=n||{},t.L=t.Y,t.F=MI(t,null,t.V),ff(t)};Xn.prototype.close=function(){cm(this.g)};Xn.prototype.u=function(t){var e=this.g;if(typeof t=="string"){var n={};n.__data__=t,t=n}else this.v&&(n={},n.__data__=Q_(t),t=n);e.i.push(new h2(e.ab++,t)),e.G==3&&ff(e)};Xn.prototype.M=function(){this.g.l=null,delete this.j,cm(this.g),delete this.g,Xn.X.M.call(this)};function UI(t){im.call(this);var e=t.__sm__;if(e){e:{for(const n in e){t=n;break e}t=void 0}(this.i=t)&&(t=this.i,e=e!==null&&t in e?e[t]:void 0),this.data=e}else this.data=t}Ht(UI,im);function BI(){rm.call(this),this.status=1}Ht(BI,rm);function ca(t){this.g=t}Ht(ca,FI);ca.prototype.xa=function(){Bt(this.g,"a")};ca.prototype.wa=function(t){Bt(this.g,new UI(t))};ca.prototype.va=function(t){Bt(this.g,new BI)};ca.prototype.ua=function(){Bt(this.g,"b")};Xn.prototype.send=Xn.prototype.u;Xn.prototype.open=Xn.prototype.m;Xn.prototype.close=Xn.prototype.close;tm.NO_ERROR=0;tm.TIMEOUT=8;tm.HTTP_ERROR=6;JH.COMPLETE="complete";ZH.EventType=Gl;Gl.OPEN="a";Gl.CLOSE="b";Gl.ERROR="c";Gl.MESSAGE="d";xt.prototype.listen=xt.prototype.N;_t.prototype.listenOnce=_t.prototype.O;_t.prototype.getLastError=_t.prototype.Oa;_t.prototype.getLastErrorCode=_t.prototype.Ea;_t.prototype.getStatus=_t.prototype.aa;_t.prototype.getResponseJson=_t.prototype.Sa;_t.prototype.getResponseText=_t.prototype.fa;_t.prototype.send=_t.prototype.da;_t.prototype.setWithCredentials=_t.prototype.Ka;const sw="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _n{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}_n.UNAUTHENTICATED=new _n(null),_n.GOOGLE_CREDENTIALS=new _n("google-credentials-uid"),_n.FIRST_PARTY=new _n("first-party-uid"),_n.MOCK_USER=new _n("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let df="9.15.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ch=new Pl("@firebase/firestore");function Sn(t,...e){if(ch.logLevel<=Ke.DEBUG){const n=e.map(WI);ch.debug(`Firestore (${df}): ${t}`,...n)}}function fm(t,...e){if(ch.logLevel<=Ke.ERROR){const n=e.map(WI);ch.error(`Firestore (${df}): ${t}`,...n)}}function WI(t){if(typeof t=="string")return t;try{return e=t,JSON.stringify(e)}catch{return t}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HI(t="Unexpected state"){const e=`FIRESTORE (${df}) INTERNAL ASSERTION FAILED: `+t;throw fm(e),new Error(e)}function uh(t,e){t||HI()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ni={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ri extends pr{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mo{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b2{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class w2{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(_n.UNAUTHENTICATED))}shutdown(){}}class T2{constructor(e){this.t=e,this.currentUser=_n.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){let i=this.i;const r=h=>this.i!==i?(i=this.i,n(h)):Promise.resolve();let o=new Mo;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Mo,e.enqueueRetryable(()=>r(this.currentUser))};const l=()=>{const h=o;e.enqueueRetryable(async()=>{await h.promise,await r(this.currentUser)})},u=h=>{Sn("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=h,this.auth.addAuthTokenListener(this.o),l()};this.t.onInit(h=>u(h)),setTimeout(()=>{if(!this.auth){const h=this.t.getImmediate({optional:!0});h?u(h):(Sn("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Mo)}},0),l()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(i=>this.i!==e?(Sn("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(uh(typeof i.accessToken=="string"),new b2(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return uh(e===null||typeof e=="string"),new _n(e)}}class C2{constructor(e,n,i,r){this.h=e,this.l=n,this.m=i,this.g=r,this.type="FirstParty",this.user=_n.FIRST_PARTY,this.p=new Map}I(){return this.g?this.g():(uh(!(typeof this.h!="object"||this.h===null||!this.h.auth||!this.h.auth.getAuthHeaderValueForFirstParty)),this.h.auth.getAuthHeaderValueForFirstParty([]))}get headers(){this.p.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.p.set("Authorization",e),this.m&&this.p.set("X-Goog-Iam-Authorization-Token",this.m),this.p}}class I2{constructor(e,n,i,r){this.h=e,this.l=n,this.m=i,this.g=r}getToken(){return Promise.resolve(new C2(this.h,this.l,this.m,this.g))}start(e,n){e.enqueueRetryable(()=>n(_n.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class A2{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class S2{constructor(e){this.T=e,this.forceRefresh=!1,this.appCheck=null,this.A=null}start(e,n){const i=o=>{o.error!=null&&Sn("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const l=o.token!==this.A;return this.A=o.token,Sn("FirebaseAppCheckTokenProvider",`Received ${l?"new":"existing"} token.`),l?n(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>i(o))};const r=o=>{Sn("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.appCheck.addTokenListener(this.o)};this.T.onInit(o=>r(o)),setTimeout(()=>{if(!this.appCheck){const o=this.T.getImmediate({optional:!0});o?r(o):Sn("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(uh(typeof n.token=="string"),this.A=n.token,new A2(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function O2(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let i=0;i<t;i++)n[i]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N2{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let i="";for(;i.length<20;){const r=O2(40);for(let o=0;o<r.length;++o)i.length<20&&r[o]<n&&(i+=e.charAt(r[o]%e.length))}return i}}function VI(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R2{constructor(e,n,i,r,o,l,u,h){this.databaseId=e,this.appId=n,this.persistenceKey=i,this.host=r,this.ssl=o,this.forceLongPolling=l,this.autoDetectLongPolling=u,this.useFetchStreams=h}}class hh{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new hh("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof hh&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ow,ke;(ke=ow||(ow={}))[ke.OK=0]="OK",ke[ke.CANCELLED=1]="CANCELLED",ke[ke.UNKNOWN=2]="UNKNOWN",ke[ke.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ke[ke.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ke[ke.NOT_FOUND=5]="NOT_FOUND",ke[ke.ALREADY_EXISTS=6]="ALREADY_EXISTS",ke[ke.PERMISSION_DENIED=7]="PERMISSION_DENIED",ke[ke.UNAUTHENTICATED=16]="UNAUTHENTICATED",ke[ke.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ke[ke.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ke[ke.ABORTED=10]="ABORTED",ke[ke.OUT_OF_RANGE=11]="OUT_OF_RANGE",ke[ke.UNIMPLEMENTED=12]="UNIMPLEMENTED",ke[ke.INTERNAL=13]="INTERNAL",ke[ke.UNAVAILABLE=14]="UNAVAILABLE",ke[ke.DATA_LOSS=15]="DATA_LOSS";function hp(){return typeof document<"u"?document:null}class x2{constructor(e,n,i=1e3,r=1.5,o=6e4){this.Hs=e,this.timerId=n,this.mo=i,this.yo=r,this.po=o,this.Io=0,this.To=null,this.Eo=Date.now(),this.reset()}reset(){this.Io=0}Ao(){this.Io=this.po}Ro(e){this.cancel();const n=Math.floor(this.Io+this.bo()),i=Math.max(0,Date.now()-this.Eo),r=Math.max(0,n-i);r>0&&Sn("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.Io} ms, delay with jitter: ${n} ms, last attempt: ${i} ms ago)`),this.To=this.Hs.enqueueAfterDelay(this.timerId,r,()=>(this.Eo=Date.now(),e())),this.Io*=this.yo,this.Io<this.mo&&(this.Io=this.mo),this.Io>this.po&&(this.Io=this.po)}Po(){this.To!==null&&(this.To.skipDelay(),this.To=null)}cancel(){this.To!==null&&(this.To.cancel(),this.To=null)}bo(){return(Math.random()-.5)*this.Io}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dm{constructor(e,n,i,r,o){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=i,this.op=r,this.removalCallback=o,this.deferred=new Mo,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(l=>{})}static createAndSchedule(e,n,i,r,o){const l=Date.now()+i,u=new dm(e,n,l,r,o);return u.start(i),u}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Ri(Ni.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function D2(t,e){if(fm("AsyncQueue",`${e}: ${t}`),VI(t))return new Ri(Ni.UNAVAILABLE,`${e}: ${t}`);throw t}function L2(t,e,n,i){if(e===!0&&i===!0)throw new Ri(Ni.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aw=new Map;class lw{constructor(e){var n;if(e.host===void 0){if(e.ssl!==void 0)throw new Ri(Ni.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new Ri(Ni.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,L2("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P2{constructor(e,n,i,r){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=i,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new lw({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Ri(Ni.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new Ri(Ni.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new lw(e),e.credentials!==void 0&&(this._authCredentials=function(n){if(!n)return new w2;switch(n.type){case"gapi":const i=n.client;return new I2(i,n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new Ri(Ni.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const n=aw.get(e);n&&(Sn("ComponentProvider","Removing Datastore"),aw.delete(e),n.terminate())}(this),Promise.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k2{constructor(e,n,i,r){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=i,this.databaseInfo=r,this.user=_n.UNAUTHENTICATED,this.clientId=N2.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(i,async o=>{Sn("FirestoreClient","Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(i,o=>(Sn("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}async getConfiguration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Ri(Ni.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Mo;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this.onlineComponents&&await this.onlineComponents.terminate(),this.offlineComponents&&await this.offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const i=D2(n,"Failed to shutdown persistence");e.reject(i)}}),e.promise}}class M2{constructor(){this.Bc=Promise.resolve(),this.Lc=[],this.qc=!1,this.Uc=[],this.Kc=null,this.Gc=!1,this.Qc=!1,this.jc=[],this.xo=new x2(this,"async_queue_retry"),this.Wc=()=>{const n=hp();n&&Sn("AsyncQueue","Visibility state changed to "+n.visibilityState),this.xo.Po()};const e=hp();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.Wc)}get isShuttingDown(){return this.qc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.zc(),this.Hc(e)}enterRestrictedMode(e){if(!this.qc){this.qc=!0,this.Qc=e||!1;const n=hp();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Wc)}}enqueue(e){if(this.zc(),this.qc)return new Promise(()=>{});const n=new Mo;return this.Hc(()=>this.qc&&this.Qc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Lc.push(e),this.Jc()))}async Jc(){if(this.Lc.length!==0){try{await this.Lc[0](),this.Lc.shift(),this.xo.reset()}catch(e){if(!VI(e))throw e;Sn("AsyncQueue","Operation failed with retryable error: "+e)}this.Lc.length>0&&this.xo.Ro(()=>this.Jc())}}Hc(e){const n=this.Bc.then(()=>(this.Gc=!0,e().catch(i=>{this.Kc=i,this.Gc=!1;const r=function(o){let l=o.message||"";return o.stack&&(l=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),l}(i);throw fm("INTERNAL UNHANDLED ERROR: ",r),i}).then(i=>(this.Gc=!1,i))));return this.Bc=n,n}enqueueAfterDelay(e,n,i){this.zc(),this.jc.indexOf(e)>-1&&(n=0);const r=dm.createAndSchedule(this,e,n,i,o=>this.Yc(o));return this.Uc.push(r),r}zc(){this.Kc&&HI()}verifyOperationInProgress(){}async Xc(){let e;do e=this.Bc,await e;while(e!==this.Bc)}Zc(e){for(const n of this.Uc)if(n.timerId===e)return!0;return!1}ta(e){return this.Xc().then(()=>{this.Uc.sort((n,i)=>n.targetTimeMs-i.targetTimeMs);for(const n of this.Uc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Xc()})}ea(e){this.jc.push(e)}Yc(e){const n=this.Uc.indexOf(e);this.Uc.splice(n,1)}}class $2 extends P2{constructor(e,n,i,r){super(e,n,i,r),this.type="firestore",this._queue=new M2,this._persistenceKey=(r==null?void 0:r.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||F2(this),this._firestoreClient.terminate()}}function F2(t){var e;const n=t._freezeSettings(),i=function(r,o,l,u){return new R2(r,o,l,u.host,u.ssl,u.experimentalForceLongPolling,u.experimentalAutoDetectLongPolling,u.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,n);t._firestoreClient=new k2(t._authCredentials,t._appCheckCredentials,t._queue,i)}(function(t,e=!0){(function(n){df=n})(kl),ki(new pi("firestore",(n,{instanceIdentifier:i,options:r})=>{const o=n.getProvider("app").getImmediate(),l=new $2(new T2(n.getProvider("auth-internal")),new S2(n.getProvider("app-check-internal")),function(u,h){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new Ri(Ni.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new hh(u.options.projectId,h)}(o,i),o);return r=Object.assign({useFetchStreams:e},r),l._setSettings(r),l},"PUBLIC").setMultipleInstances(!0)),Nn(sw,"3.8.0",t),Nn(sw,"3.8.0","esm2017")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jI="firebasestorage.googleapis.com",U2="storageBucket",B2=2*60*1e3,W2=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wi extends pr{constructor(e,n,i=0){super(fp(e),`Firebase Storage: ${n} (${fp(e)})`),this.status_=i,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Wi.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return fp(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}function fp(t){return"storage/"+t}function H2(){const t="An unknown error occurred, please check the error payload for server response.";return new Wi("unknown",t)}function V2(){return new Wi("retry-limit-exceeded","Max retry time for operation exceeded, please try again.")}function j2(){return new Wi("canceled","User canceled the upload/download.")}function q2(t){return new Wi("invalid-url","Invalid URL '"+t+"'.")}function K2(t){return new Wi("invalid-default-bucket","Invalid default bucket '"+t+"'.")}function cw(t){return new Wi("invalid-argument",t)}function qI(){return new Wi("app-deleted","The Firebase app was deleted.")}function G2(t){return new Wi("invalid-root-operation","The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hi{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let i;try{i=hi.makeFromUrl(e,n)}catch{return new hi(e,"")}if(i.path==="")return i;throw K2(e)}static makeFromUrl(e,n){let i=null;const r="([A-Za-z0-9.\\-_]+)";function o(V){V.path.charAt(V.path.length-1)==="/"&&(V.path_=V.path_.slice(0,-1))}const l="(/(.*))?$",u=new RegExp("^gs://"+r+l,"i"),h={bucket:1,path:3};function d(V){V.path_=decodeURIComponent(V.path)}const p="v[A-Za-z0-9_]+",_=n.replace(/[.]/g,"\\."),y="(/([^?#]*).*)?$",E=new RegExp(`^https?://${_}/${p}/b/${r}/o${y}`,"i"),S={bucket:1,path:3},O=n===jI?"(?:storage.googleapis.com|storage.cloud.google.com)":n,L="([^?#]*)",q=new RegExp(`^https?://${O}/${r}/${L}`,"i"),H=[{regex:u,indices:h,postModify:o},{regex:E,indices:S,postModify:d},{regex:q,indices:{bucket:1,path:2},postModify:d}];for(let V=0;V<H.length;V++){const Q=H[V],B=Q.regex.exec(e);if(B){const Z=B[Q.indices.bucket];let X=B[Q.indices.path];X||(X=""),i=new hi(Z,X),Q.postModify(i);break}}if(i==null)throw q2(e);return i}}class z2{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y2(t,e,n){let i=1,r=null,o=null,l=!1,u=0;function h(){return u===2}let d=!1;function p(...L){d||(d=!0,e.apply(null,L))}function _(L){r=setTimeout(()=>{r=null,t(E,h())},L)}function y(){o&&clearTimeout(o)}function E(L,...q){if(d){y();return}if(L){y(),p.call(null,L,...q);return}if(h()||l){y(),p.call(null,L,...q);return}i<64&&(i*=2);let H;u===1?(u=2,H=0):H=(i+Math.random())*1e3,_(H)}let S=!1;function O(L){S||(S=!0,y(),!d&&(r!==null?(L||(u=2),clearTimeout(r),_(0)):L||(u=1)))}return _(0),o=setTimeout(()=>{l=!0,O(!0)},n),O}function X2(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q2(t){return t!==void 0}function uw(t,e,n,i){if(i<e)throw cw(`Invalid value for '${t}'. Expected ${e} or greater.`);if(i>n)throw cw(`Invalid value for '${t}'. Expected ${n} or less.`)}function J2(t){const e=encodeURIComponent;let n="?";for(const i in t)if(t.hasOwnProperty(i)){const r=e(i)+"="+e(t[i]);n=n+r+"&"}return n=n.slice(0,-1),n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var fh;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(fh||(fh={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z2(t,e){const n=t>=500&&t<600,r=[408,429].indexOf(t)!==-1,o=e.indexOf(t)!==-1;return n||r||o}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eV{constructor(e,n,i,r,o,l,u,h,d,p,_,y=!0){this.url_=e,this.method_=n,this.headers_=i,this.body_=r,this.successCodes_=o,this.additionalRetryCodes_=l,this.callback_=u,this.errorCallback_=h,this.timeout_=d,this.progressCallback_=p,this.connectionFactory_=_,this.retry=y,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((E,S)=>{this.resolve_=E,this.reject_=S,this.start_()})}start_(){const e=(i,r)=>{if(r){i(!1,new uu(!1,null,!0));return}const o=this.connectionFactory_();this.pendingConnection_=o;const l=u=>{const h=u.loaded,d=u.lengthComputable?u.total:-1;this.progressCallback_!==null&&this.progressCallback_(h,d)};this.progressCallback_!==null&&o.addUploadProgressListener(l),o.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&o.removeUploadProgressListener(l),this.pendingConnection_=null;const u=o.getErrorCode()===fh.NO_ERROR,h=o.getStatus();if((!u||Z2(h,this.additionalRetryCodes_))&&this.retry){const p=o.getErrorCode()===fh.ABORT;i(!1,new uu(!1,null,p));return}const d=this.successCodes_.indexOf(h)!==-1;i(!0,new uu(d,o))})},n=(i,r)=>{const o=this.resolve_,l=this.reject_,u=r.connection;if(r.wasSuccessCode)try{const h=this.callback_(u,u.getResponse());Q2(h)?o(h):o()}catch(h){l(h)}else if(u!==null){const h=H2();h.serverResponse=u.getErrorText(),this.errorCallback_?l(this.errorCallback_(u,h)):l(h)}else if(r.canceled){const h=this.appDelete_?qI():j2();l(h)}else{const h=V2();l(h)}};this.canceled_?n(!1,new uu(!1,null,!0)):this.backoffId_=Y2(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&X2(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class uu{constructor(e,n,i){this.wasSuccessCode=e,this.connection=n,this.canceled=!!i}}function tV(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function nV(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function iV(t,e){e&&(t["X-Firebase-GMPID"]=e)}function rV(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function sV(t,e,n,i,r,o,l=!0){const u=J2(t.urlParams),h=t.url+u,d=Object.assign({},t.headers);return iV(d,e),tV(d,n),nV(d,o),rV(d,i),new eV(h,t.method,d,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,r,l)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oV(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function aV(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dh{constructor(e,n){this._service=e,n instanceof hi?this._location=n:this._location=hi.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new dh(e,n)}get root(){const e=new hi(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return aV(this._location.path)}get storage(){return this._service}get parent(){const e=oV(this._location.path);if(e===null)return null;const n=new hi(this._location.bucket,e);return new dh(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw G2(e)}}function hw(t,e){const n=e==null?void 0:e[U2];return n==null?null:hi.makeFromBucketSpec(n,t)}class lV{constructor(e,n,i,r,o){this.app=e,this._authProvider=n,this._appCheckProvider=i,this._url=r,this._firebaseVersion=o,this._bucket=null,this._host=jI,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=B2,this._maxUploadRetryTime=W2,this._requests=new Set,r!=null?this._bucket=hi.makeFromBucketSpec(r,this._host):this._bucket=hw(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=hi.makeFromBucketSpec(this._url,e):this._bucket=hw(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){uw("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){uw("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new dh(this,e)}_makeRequest(e,n,i,r,o=!0){if(this._deleted)return new z2(qI());{const l=sV(e,this._appId,i,r,n,this._firebaseVersion,o);return this._requests.add(l),l.getPromise().then(()=>this._requests.delete(l),()=>this._requests.delete(l)),l}}async makeRequestWithTokens(e,n){const[i,r]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,i,r).getPromise()}}const fw="@firebase/storage",dw="0.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cV="storage";function uV(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),i=t.getProvider("auth-internal"),r=t.getProvider("app-check-internal");return new lV(n,i,r,e,kl)}function hV(){ki(new pi(cV,uV,"PUBLIC").setMultipleInstances(!0)),Nn(fw,dw,""),Nn(fw,dw,"esm2017")}hV();const dp=new WeakMap;function KI(t,e){return dp.has(e)||dp.set(e,t||{f:{},r:{},s:{},u:{}}),dp.get(e)}function fV(t,e,n,i){if(!t)return n;const[r,o]=GI(t);if(!r)return n;const l=KI(void 0,i)[r]||{},u=e||o;return u&&u in l?l[u]:n}function dV(t,e,n,i){if(!t)return;const[r,o]=GI(t);if(!r)return;const l=KI(void 0,i)[r],u=e||o;if(u)return n.then(h=>{l[u]=h}),u}function GI(t){return lU(t)||cU(t)?["f",t.path]:uU(t)?["r",t.toString()]:hU(t)?["s",t.toString()]:[]}const pp=new WeakMap;function pV(t,e,n){const i=IC();pp.has(i)||pp.set(i,new Map);const r=pp.get(i),o=dV(e,n,t,i);return o&&r.set(o,t),o?()=>r.delete(o):oi}function gV(t){if(!t.exists())return null;const e=t.val();return ia(e)?Object.defineProperty(e,"id",{value:t.key}):{$value:e,id:t.key}}function Ma(t,e){for(let n=0;n<t.length;n++)if(t[n].id===e)return n;return-1}const pm={reset:!1,serialize:gV,wait:!0};function _V(t,e,n,i,r){const o=Object.assign({},pm,r);let l=oi;function u(h){const d=o.serialize(h);t.value=d,n(d)}return o.once?Xh(e).then(u).catch(i):l=H_(e,u,i),h=>{if(l(),h){const d=typeof h=="function"?h():null;t.value=d}}}function mV(t,e,n,i,r){const o=Object.assign({},pm,r);let l=o.wait?[]:t;o.wait||(t.value=[]);let u=oi,h=oi,d=oi,p=oi,_=oi;return o.once?Xh(e).then(y=>{const E=[];y.forEach(S=>{E.push(o.serialize(S))}),n(t.value=E)}).catch(i):(u=hH(e,(y,E)=>{const S=Rr(l),O=E?Ma(S,E)+1:0;S.splice(O,0,o.serialize(y))},i),d=pH(e,y=>{const E=Rr(l);E.splice(Ma(E,y.key),1)},i),h=fH(e,y=>{const E=Rr(l);E.splice(Ma(E,y.key),1,o.serialize(y))},i),p=dH(e,(y,E)=>{const S=Rr(l),O=Ma(S,y.key),L=S.splice(O,1)[0],q=E?Ma(S,E)+1:0;S.splice(q,0,L)},i),_=H_(e,()=>{const y=Rr(l);o.wait&&(t.value=y,l=t),n(y),_()},i)),y=>{if(_(),u(),d(),h(),p(),y){const E=typeof y=="function"?y():[];t.value=E}}}function zI(t,e={}){let n=oi;const i=Object.assign({},pm,e),r=Rr(t),o=i.target||On();fU()&&(i.once=!0),o.value=fV(r,i.ssrKey,o.value,IC());let l=o.value===void 0;const u=On(),h=On(!1),d=WP(),p=dP();let _=oi;function y(){const O=Rr(t),L=new Promise((q,oe)=>{if(n(i.reset),!O)return n=oi,q(null);h.value=l,l=!0,Array.isArray(o.value)?n=mV(o,O,q,oe,i):n=_V(o,O,q,oe,i)}).catch(q=>{throw d.value===L&&(u.value=q),q}).finally(()=>{d.value===L&&(h.value=!1)});d.value=L}let E=oi;Ft(t)&&(E=kr(t,y)),y(),r&&(_=pV(d.value,r)),p&&(pP(S),kh()&&kT(()=>d.value));function S(O=i.reset){E(),_(),n(O)}return Object.defineProperties(o,{data:{get:()=>o},error:{get:()=>u},pending:{get:()=>h},promise:{get:()=>d},stop:{get:()=>S}})}function vV(t,e){const n=On([]);return zI(t,{target:n,...e})}function pw(t,e){const n=On();return zI(t,{target:n,...e})}function yV(t,{firebaseApp:e,modules:n=[]}){t.provide(CC,e);for(const i of n)t.use(i.bind(null,e))}const YI=o_({apiKey:"AIzaSyBJsQeWbln9lR9B-W7jQZVCy9AWZyoe9pQ",authDomain:"tacmap-dev.firebaseapp.com",projectId:"tacmap-dev",storageBucket:"tacmap-dev.appspot.com",messagingSenderId:"278955153095",appId:"1:278955153095:web:dc491f9539c91be1e0d0e2"}),ua=B0(YI);li(ua,"rooms");const EV=li(ua,"teams"),qa=li(ua,"squads"),Br=li(ua,"users"),gp=li(ua,"markers");function bV(t){return{all:t=t||new Map,on:function(e,n){var i=t.get(e);i?i.push(n):t.set(e,[n])},off:function(e,n){var i=t.get(e);i&&(n?i.splice(i.indexOf(n)>>>0,1):t.set(e,[]))},emit:function(e,n){var i=t.get(e);i&&i.slice().map(function(r){r(n)}),(i=t.get("*"))&&i.slice().map(function(r){r(e,n)})}}}const qn=bV(),Ii={firebaseVars:{live:{apiKey:"AIzaSyB1eJwaJojvqt3WvJ4pEv5rLZmI-kFhojA",authDomain:"tacmap-b51b4.firebaseapp.com",databaseURL:"https://tacmap-b51b4-default-rtdb.firebaseio.com",projectId:"tacmap-b51b4",storageBucket:"tacmap-b51b4.appspot.com",messagingSenderId:"967896842326",appId:"1:967896842326:web:5c2e93fc457c2aa8febbf7"},dev:{apiKey:"AIzaSyBJsQeWbln9lR9B-W7jQZVCy9AWZyoe9pQ",authDomain:"tacmap-dev.firebaseapp.com",projectId:"tacmap-dev",storageBucket:"tacmap-dev.appspot.com",messagingSenderId:"278955153095",appId:"1:278955153095:web:dc491f9539c91be1e0d0e2"}},geoLocationOptions:{enableHighAccuracy:!0,timeout:5e3,maximumAge:0},tickRateMS:1e4,updateMeters:3,roomId:"b4196e99-b3eb-489a-b2fe-41c3bc74dd13"};function wV(){return XI().__VUE_DEVTOOLS_GLOBAL_HOOK__}function XI(){return typeof navigator<"u"&&typeof window<"u"?window:typeof global<"u"?global:{}}const TV=typeof Proxy=="function",CV="devtools-plugin:setup",IV="plugin:settings:set";let go,Sg;function AV(){var t;return go!==void 0||(typeof window<"u"&&window.performance?(go=!0,Sg=window.performance):typeof global<"u"&&(!((t=global.perf_hooks)===null||t===void 0)&&t.performance)?(go=!0,Sg=global.perf_hooks.performance):go=!1),go}function SV(){return AV()?Sg.now():Date.now()}class OV{constructor(e,n){this.target=null,this.targetQueue=[],this.onQueue=[],this.plugin=e,this.hook=n;const i={};if(e.settings)for(const l in e.settings){const u=e.settings[l];i[l]=u.defaultValue}const r=`__vue-devtools-plugin-settings__${e.id}`;let o=Object.assign({},i);try{const l=localStorage.getItem(r),u=JSON.parse(l);Object.assign(o,u)}catch{}this.fallbacks={getSettings(){return o},setSettings(l){try{localStorage.setItem(r,JSON.stringify(l))}catch{}o=l},now(){return SV()}},n&&n.on(IV,(l,u)=>{l===this.plugin.id&&this.fallbacks.setSettings(u)}),this.proxiedOn=new Proxy({},{get:(l,u)=>this.target?this.target.on[u]:(...h)=>{this.onQueue.push({method:u,args:h})}}),this.proxiedTarget=new Proxy({},{get:(l,u)=>this.target?this.target[u]:u==="on"?this.proxiedOn:Object.keys(this.fallbacks).includes(u)?(...h)=>(this.targetQueue.push({method:u,args:h,resolve:()=>{}}),this.fallbacks[u](...h)):(...h)=>new Promise(d=>{this.targetQueue.push({method:u,args:h,resolve:d})})})}async setRealTarget(e){this.target=e;for(const n of this.onQueue)this.target.on[n.method](...n.args);for(const n of this.targetQueue)n.resolve(await this.target[n.method](...n.args))}}function NV(t,e){const n=t,i=XI(),r=wV(),o=TV&&n.enableEarlyProxy;if(r&&(i.__VUE_DEVTOOLS_PLUGIN_API_AVAILABLE__||!o))r.emit(CV,t,e);else{const l=o?new OV(n,r):null;(i.__VUE_DEVTOOLS_PLUGINS__=i.__VUE_DEVTOOLS_PLUGINS__||[]).push({pluginDescriptor:n,setupFn:e,proxy:l}),l&&e(l.proxiedTarget)}}/*!
 * vuex v4.0.2
 * (c) 2021 Evan You
 * @license MIT
 */var RV="store";function ha(t,e){Object.keys(t).forEach(function(n){return e(t[n],n)})}function xV(t){return t!==null&&typeof t=="object"}function DV(t){return t&&typeof t.then=="function"}function LV(t,e){return function(){return t(e)}}function QI(t,e,n){return e.indexOf(t)<0&&(n&&n.prepend?e.unshift(t):e.push(t)),function(){var i=e.indexOf(t);i>-1&&e.splice(i,1)}}function JI(t,e){t._actions=Object.create(null),t._mutations=Object.create(null),t._wrappedGetters=Object.create(null),t._modulesNamespaceMap=Object.create(null);var n=t.state;pf(t,n,[],t._modules.root,!0),gm(t,n,e)}function gm(t,e,n){var i=t._state;t.getters={},t._makeLocalGettersCache=Object.create(null);var r=t._wrappedGetters,o={};ha(r,function(l,u){o[u]=LV(l,t),Object.defineProperty(t.getters,u,{get:function(){return o[u]()},enumerable:!0})}),t._state=Ll({data:e}),t.strict&&FV(t),i&&n&&t._withCommit(function(){i.data=null})}function pf(t,e,n,i,r){var o=!n.length,l=t._modules.getNamespace(n);if(i.namespaced&&(t._modulesNamespaceMap[l],t._modulesNamespaceMap[l]=i),!o&&!r){var u=_m(e,n.slice(0,-1)),h=n[n.length-1];t._withCommit(function(){u[h]=i.state})}var d=i.context=PV(t,l,n);i.forEachMutation(function(p,_){var y=l+_;kV(t,y,p,d)}),i.forEachAction(function(p,_){var y=p.root?_:l+_,E=p.handler||p;MV(t,y,E,d)}),i.forEachGetter(function(p,_){var y=l+_;$V(t,y,p,d)}),i.forEachChild(function(p,_){pf(t,e,n.concat(_),p,r)})}function PV(t,e,n){var i=e==="",r={dispatch:i?t.dispatch:function(o,l,u){var h=ph(o,l,u),d=h.payload,p=h.options,_=h.type;return(!p||!p.root)&&(_=e+_),t.dispatch(_,d)},commit:i?t.commit:function(o,l,u){var h=ph(o,l,u),d=h.payload,p=h.options,_=h.type;(!p||!p.root)&&(_=e+_),t.commit(_,d,p)}};return Object.defineProperties(r,{getters:{get:i?function(){return t.getters}:function(){return ZI(t,e)}},state:{get:function(){return _m(t.state,n)}}}),r}function ZI(t,e){if(!t._makeLocalGettersCache[e]){var n={},i=e.length;Object.keys(t.getters).forEach(function(r){if(r.slice(0,i)===e){var o=r.slice(i);Object.defineProperty(n,o,{get:function(){return t.getters[r]},enumerable:!0})}}),t._makeLocalGettersCache[e]=n}return t._makeLocalGettersCache[e]}function kV(t,e,n,i){var r=t._mutations[e]||(t._mutations[e]=[]);r.push(function(l){n.call(t,i.state,l)})}function MV(t,e,n,i){var r=t._actions[e]||(t._actions[e]=[]);r.push(function(l){var u=n.call(t,{dispatch:i.dispatch,commit:i.commit,getters:i.getters,state:i.state,rootGetters:t.getters,rootState:t.state},l);return DV(u)||(u=Promise.resolve(u)),t._devtoolHook?u.catch(function(h){throw t._devtoolHook.emit("vuex:error",h),h}):u})}function $V(t,e,n,i){t._wrappedGetters[e]||(t._wrappedGetters[e]=function(o){return n(i.state,i.getters,o.state,o.getters)})}function FV(t){kr(function(){return t._state.data},function(){},{deep:!0,flush:"sync"})}function _m(t,e){return e.reduce(function(n,i){return n[i]},t)}function ph(t,e,n){return xV(t)&&t.type&&(n=e,e=t,t=t.type),{type:t,payload:e,options:n}}var UV="vuex bindings",gw="vuex:mutations",_p="vuex:actions",_o="vuex",BV=0;function WV(t,e){NV({id:"org.vuejs.vuex",app:t,label:"Vuex",homepage:"https://next.vuex.vuejs.org/",logo:"https://vuejs.org/images/icons/favicon-96x96.png",packageName:"vuex",componentStateTypes:[UV]},function(n){n.addTimelineLayer({id:gw,label:"Vuex Mutations",color:_w}),n.addTimelineLayer({id:_p,label:"Vuex Actions",color:_w}),n.addInspector({id:_o,label:"Vuex",icon:"storage",treeFilterPlaceholder:"Filter stores..."}),n.on.getInspectorTree(function(i){if(i.app===t&&i.inspectorId===_o)if(i.filter){var r=[];iA(r,e._modules.root,i.filter,""),i.rootNodes=r}else i.rootNodes=[nA(e._modules.root,"")]}),n.on.getInspectorState(function(i){if(i.app===t&&i.inspectorId===_o){var r=i.nodeId;ZI(e,r),i.state=jV(KV(e._modules,r),r==="root"?e.getters:e._makeLocalGettersCache,r)}}),n.on.editInspectorState(function(i){if(i.app===t&&i.inspectorId===_o){var r=i.nodeId,o=i.path;r!=="root"&&(o=r.split("/").filter(Boolean).concat(o)),e._withCommit(function(){i.set(e._state.data,o,i.state.value)})}}),e.subscribe(function(i,r){var o={};i.payload&&(o.payload=i.payload),o.state=r,n.notifyComponentUpdate(),n.sendInspectorTree(_o),n.sendInspectorState(_o),n.addTimelineEvent({layerId:gw,event:{time:Date.now(),title:i.type,data:o}})}),e.subscribeAction({before:function(i,r){var o={};i.payload&&(o.payload=i.payload),i._id=BV++,i._time=Date.now(),o.state=r,n.addTimelineEvent({layerId:_p,event:{time:i._time,title:i.type,groupId:i._id,subtitle:"start",data:o}})},after:function(i,r){var o={},l=Date.now()-i._time;o.duration={_custom:{type:"duration",display:l+"ms",tooltip:"Action duration",value:l}},i.payload&&(o.payload=i.payload),o.state=r,n.addTimelineEvent({layerId:_p,event:{time:Date.now(),title:i.type,groupId:i._id,subtitle:"end",data:o}})}})})}var _w=8702998,HV=6710886,VV=16777215,eA={label:"namespaced",textColor:VV,backgroundColor:HV};function tA(t){return t&&t!=="root"?t.split("/").slice(-2,-1)[0]:"Root"}function nA(t,e){return{id:e||"root",label:tA(e),tags:t.namespaced?[eA]:[],children:Object.keys(t._children).map(function(n){return nA(t._children[n],e+n+"/")})}}function iA(t,e,n,i){i.includes(n)&&t.push({id:i||"root",label:i.endsWith("/")?i.slice(0,i.length-1):i||"Root",tags:e.namespaced?[eA]:[]}),Object.keys(e._children).forEach(function(r){iA(t,e._children[r],n,i+r+"/")})}function jV(t,e,n){e=n==="root"?e:e[n];var i=Object.keys(e),r={state:Object.keys(t.state).map(function(l){return{key:l,editable:!0,value:t.state[l]}})};if(i.length){var o=qV(e);r.getters=Object.keys(o).map(function(l){return{key:l.endsWith("/")?tA(l):l,editable:!1,value:Og(function(){return o[l]})}})}return r}function qV(t){var e={};return Object.keys(t).forEach(function(n){var i=n.split("/");if(i.length>1){var r=e,o=i.pop();i.forEach(function(l){r[l]||(r[l]={_custom:{value:{},display:l,tooltip:"Module",abstract:!0}}),r=r[l]._custom.value}),r[o]=Og(function(){return t[n]})}else e[n]=Og(function(){return t[n]})}),e}function KV(t,e){var n=e.split("/").filter(function(i){return i});return n.reduce(function(i,r,o){var l=i[r];if(!l)throw new Error('Missing module "'+r+'" for path "'+e+'".');return o===n.length-1?l:l._children},e==="root"?t:t.root._children)}function Og(t){try{return t()}catch(e){return e}}var gi=function(e,n){this.runtime=n,this._children=Object.create(null),this._rawModule=e;var i=e.state;this.state=(typeof i=="function"?i():i)||{}},rA={namespaced:{configurable:!0}};rA.namespaced.get=function(){return!!this._rawModule.namespaced};gi.prototype.addChild=function(e,n){this._children[e]=n};gi.prototype.removeChild=function(e){delete this._children[e]};gi.prototype.getChild=function(e){return this._children[e]};gi.prototype.hasChild=function(e){return e in this._children};gi.prototype.update=function(e){this._rawModule.namespaced=e.namespaced,e.actions&&(this._rawModule.actions=e.actions),e.mutations&&(this._rawModule.mutations=e.mutations),e.getters&&(this._rawModule.getters=e.getters)};gi.prototype.forEachChild=function(e){ha(this._children,e)};gi.prototype.forEachGetter=function(e){this._rawModule.getters&&ha(this._rawModule.getters,e)};gi.prototype.forEachAction=function(e){this._rawModule.actions&&ha(this._rawModule.actions,e)};gi.prototype.forEachMutation=function(e){this._rawModule.mutations&&ha(this._rawModule.mutations,e)};Object.defineProperties(gi.prototype,rA);var Ks=function(e){this.register([],e,!1)};Ks.prototype.get=function(e){return e.reduce(function(n,i){return n.getChild(i)},this.root)};Ks.prototype.getNamespace=function(e){var n=this.root;return e.reduce(function(i,r){return n=n.getChild(r),i+(n.namespaced?r+"/":"")},"")};Ks.prototype.update=function(e){sA([],this.root,e)};Ks.prototype.register=function(e,n,i){var r=this;i===void 0&&(i=!0);var o=new gi(n,i);if(e.length===0)this.root=o;else{var l=this.get(e.slice(0,-1));l.addChild(e[e.length-1],o)}n.modules&&ha(n.modules,function(u,h){r.register(e.concat(h),u,i)})};Ks.prototype.unregister=function(e){var n=this.get(e.slice(0,-1)),i=e[e.length-1],r=n.getChild(i);r&&r.runtime&&n.removeChild(i)};Ks.prototype.isRegistered=function(e){var n=this.get(e.slice(0,-1)),i=e[e.length-1];return n?n.hasChild(i):!1};function sA(t,e,n){if(e.update(n),n.modules)for(var i in n.modules){if(!e.getChild(i))return;sA(t.concat(i),e.getChild(i),n.modules[i])}}function GV(t){return new vn(t)}var vn=function(e){var n=this;e===void 0&&(e={});var i=e.plugins;i===void 0&&(i=[]);var r=e.strict;r===void 0&&(r=!1);var o=e.devtools;this._committing=!1,this._actions=Object.create(null),this._actionSubscribers=[],this._mutations=Object.create(null),this._wrappedGetters=Object.create(null),this._modules=new Ks(e),this._modulesNamespaceMap=Object.create(null),this._subscribers=[],this._makeLocalGettersCache=Object.create(null),this._devtools=o;var l=this,u=this,h=u.dispatch,d=u.commit;this.dispatch=function(y,E){return h.call(l,y,E)},this.commit=function(y,E,S){return d.call(l,y,E,S)},this.strict=r;var p=this._modules.root.state;pf(this,p,[],this._modules.root),gm(this,p),i.forEach(function(_){return _(n)})},mm={state:{configurable:!0}};vn.prototype.install=function(e,n){e.provide(n||RV,this),e.config.globalProperties.$store=this;var i=this._devtools!==void 0?this._devtools:!1;i&&WV(e,this)};mm.state.get=function(){return this._state.data};mm.state.set=function(t){};vn.prototype.commit=function(e,n,i){var r=this,o=ph(e,n,i),l=o.type,u=o.payload,h={type:l,payload:u},d=this._mutations[l];d&&(this._withCommit(function(){d.forEach(function(_){_(u)})}),this._subscribers.slice().forEach(function(p){return p(h,r.state)}))};vn.prototype.dispatch=function(e,n){var i=this,r=ph(e,n),o=r.type,l=r.payload,u={type:o,payload:l},h=this._actions[o];if(h){try{this._actionSubscribers.slice().filter(function(p){return p.before}).forEach(function(p){return p.before(u,i.state)})}catch{}var d=h.length>1?Promise.all(h.map(function(p){return p(l)})):h[0](l);return new Promise(function(p,_){d.then(function(y){try{i._actionSubscribers.filter(function(E){return E.after}).forEach(function(E){return E.after(u,i.state)})}catch{}p(y)},function(y){try{i._actionSubscribers.filter(function(E){return E.error}).forEach(function(E){return E.error(u,i.state,y)})}catch{}_(y)})})}};vn.prototype.subscribe=function(e,n){return QI(e,this._subscribers,n)};vn.prototype.subscribeAction=function(e,n){var i=typeof e=="function"?{before:e}:e;return QI(i,this._actionSubscribers,n)};vn.prototype.watch=function(e,n,i){var r=this;return kr(function(){return e(r.state,r.getters)},n,Object.assign({},i))};vn.prototype.replaceState=function(e){var n=this;this._withCommit(function(){n._state.data=e})};vn.prototype.registerModule=function(e,n,i){i===void 0&&(i={}),typeof e=="string"&&(e=[e]),this._modules.register(e,n),pf(this,this.state,e,this._modules.get(e),i.preserveState),gm(this,this.state)};vn.prototype.unregisterModule=function(e){var n=this;typeof e=="string"&&(e=[e]),this._modules.unregister(e),this._withCommit(function(){var i=_m(n.state,e.slice(0,-1));delete i[e[e.length-1]]}),JI(this)};vn.prototype.hasModule=function(e){return typeof e=="string"&&(e=[e]),this._modules.isRegistered(e)};vn.prototype.hotUpdate=function(e){this._modules.update(e),JI(this,!0)};vn.prototype._withCommit=function(e){var n=this._committing;this._committing=!0,e(),this._committing=n};Object.defineProperties(vn.prototype,mm);const se=GV({state:{rooms:{},teams:{},users:{},squads:{},markers:{},roomsReady:!1,teamsReady:!1,usersReady:!1,squadsReady:!1,sessionId:void 0,username:void 0,useGPS:!1,gameData:{},currentUser:{},location:{},markerData:{},isAdmin:!1},mutations:{saveRooms(t,e){t.rooms=e,t.roomsReady=!0},saveUsers(t,e){t.users=e,t.usersReady=!0},saveTeams(t,e){t.teams=e,t.teamsReady=!0},saveSquads(t,e){t.squads=e,t.squadsReady=!0},saveMarkers(t,e){t.markers=e},saveUseGPS(t,e){t.useGPS=e},saveSessionId(t,e){t.sessionId=e},saveData(t,e){t.gameData=e},saveUsername(t,e){t.username=e},saveLocation(t,e){t.location=e},saveMarkerData(t,e){t.markerData.markers=e},saveAdminState(t,e){t.isAdmin=e}},actions:{},getters:{dataReady(t){return t.roomsReady&&t.teamsReady&&t.squadsReady&&t.sessionId!=null&&t.usersReady},username(t){return t.username},currentSquad(t){let e=se.getters.sessionId;if(t.squads&&t.users[e])return t.users[e].squadId},sessionId(t){return t.sessionId},user(t){return t.users[t.sessionId]},mapCenter(t){if(t.rooms&&t.rooms[Ii.roomId]&&t.rooms[Ii.roomId].map&&t.rooms[Ii.roomId].map.location)return t.rooms[Ii.roomId].map.location},markers(t){return t.markers},spotDurationMS(t){if(!(!t.rooms||!t.rooms[Ii.roomId]))return t.rooms[Ii.roomId].spotDurationMS},useGPS(t){return t.useGPS},isAdmin(t){return t.isAdmin},rooms(t){return t.rooms},users(t){return t.users},teams(t){return t.teams},squadsInTeam(t,e){},getSpotMarkers(t){let e=[];if(!se.getters.user||!se.getters.markers)return e;let n=se.getters.user.teamId;return e=Object.keys(se.getters.markers).map(r=>se.getters.markers[r]).filter(r=>r.teamId==n),e},getTeamMarkers(t){let e=[],n=se.getters.sessionId,i=se.getters.user;if(!n||!t.users||!t.users[n]||!t.squads||!t.users)return e;if(se.getters.sessionId){let r=t.users[n].teamId;if(!r)return e;let o=t.teams[r].squadIds;Object.keys(o).forEach(l=>{let u=o[l],h=t.squads[u].userIds;h&&Object.keys(h).forEach(d=>{let p=t.users[d];if(p.location){let _=d==n,y=i.squadId==u,E=p.isSquadLeader,S={markerType:"team-member",lat:p.location.lat,long:p.location.long,squadNumber:t.squads[u].squadName.replace("Squad ","")};E&&(S.markerType="squad-leader"),y&&(S.markerType="squad-member"),y&&E&&(S.markerType="squadmate-squad-leader"),_&&(S.markerType="me"),_&&E&&(S.markerType="me-squad-leader"),e.push(S)}})})}return e}}});let mw=!1;const Ze={uuidv4:()=>{var t=new Date().getTime(),e=typeof performance<"u"&&performance.now&&performance.now()*1e3||0;return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(n){var i=Math.random()*16;return t>0?(i=(t+i)%16|0,t=Math.floor(t/16)):(i=(e+i)%16|0,e=Math.floor(e/16)),(n==="x"?i:i&3|8).toString(16)})},distance:(t,e,n,i,r)=>{if(t==n&&e==i)return 0;var o=Math.PI*t/180,l=Math.PI*n/180,u=e-i,h=Math.PI*u/180,d=Math.sin(o)*Math.sin(l)+Math.cos(o)*Math.cos(l)*Math.cos(h);return d>1&&(d=1),d=Math.acos(d),d=d*180/Math.PI,d=d*60*1.1515,r=="K"&&(d=d*1.609344),r=="N"&&(d=d*.8684),d},getCircularReplacer:()=>{const t=new WeakSet;return(e,n)=>{if(typeof n=="object"&&n!==null){if(t.has(n))return;t.add(n)}return n}},randomRange:(t,e)=>Math.floor(Math.random()*(e-t+1)+t),randomGeo:(t,e)=>{var n=t.lat,i=t.long,r=e/111300,o=Math.random(),l=Math.random(),u=r*Math.sqrt(o),h=2*Math.PI*l,d=u*Math.cos(h),p=u*Math.sin(h),_=d/Math.cos(n),y=p+n,E=d+i,S=_+i;return{latitude:y.toFixed(5),longitude:E.toFixed(5),longitude2:S.toFixed(5),distance:Ze.CoordDistance(t.lat,t.long,y,E).toFixed(2),distance2:Ze.CoordDistance(t.lat,t.long,y,S).toFixed(2)}},CoordDistance:(t,e,n,i)=>{var r=6371e3,o=.5-Math.cos((n-t)*Math.PI/180)/2+Math.cos(t*Math.PI/180)*Math.cos(n*Math.PI/180)*(1-Math.cos((i-e)*Math.PI/180))/2;return r*2*Math.asin(Math.sqrt(o))},pathToIndex:t=>{let e=t.split("/"),n={r:e[1],t:e[3],s:e[5]};return e[7]&&(n.p=e[7]),n},error:t=>{console.trace(),console.error(t)},DataCheck:()=>{se.getters.dataReady&&!mw&&(qn.emit("data-ready"),mw=!0)},formatDistance(t){return t<500?Math.round(t/10)*10:t>=500?Math.round(t/100)*100:t}};var $a=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Nl={},zV={get exports(){return Nl},set exports(t){Nl=t}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */(function(t,e){(function(){var n,i="4.17.21",r=200,o="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",l="Expected a function",u="Invalid `variable` option passed into `_.template`",h="__lodash_hash_undefined__",d=500,p="__lodash_placeholder__",_=1,y=2,E=4,S=1,O=2,L=1,q=2,oe=4,H=8,V=16,Q=32,B=64,Z=128,X=256,de=512,pe=30,$e="...",rt=800,ze=16,Vt=1,Ln=2,Ue=3,ve=1/0,we=9007199254740991,Dt=17976931348623157e292,cn=0/0,ut=4294967295,Ct=ut-1,Hi=ut>>>1,vi=[["ary",Z],["bind",L],["bindKey",q],["curry",H],["curryRight",V],["flip",de],["partial",Q],["partialRight",B],["rearg",X]],Lt="[object Arguments]",mt="[object Array]",ei="[object AsyncFunction]",jt="[object Boolean]",qt="[object Date]",Zr="[object DOMException]",Pn="[object Error]",w="[object Function]",C="[object GeneratorFunction]",R="[object Map]",M="[object Number]",$="[object Null]",W="[object Object]",z="[object Promise]",K="[object Proxy]",j="[object RegExp]",k="[object Set]",te="[object String]",J="[object Symbol]",re="[object Undefined]",ae="[object WeakMap]",ye="[object WeakSet]",Le="[object ArrayBuffer]",Se="[object DataView]",st="[object Float32Array]",Jt="[object Float64Array]",yi="[object Int8Array]",Xs="[object Int16Array]",Vi="[object Int32Array]",Qs="[object Uint8Array]",Pt="[object Uint8ClampedArray]",un="[object Uint16Array]",Js="[object Uint32Array]",_S=/\b__p \+= '';/g,mS=/\b(__p \+=) '' \+/g,vS=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Um=/&(?:amp|lt|gt|quot|#39);/g,Bm=/[&<>"']/g,yS=RegExp(Um.source),ES=RegExp(Bm.source),bS=/<%-([\s\S]+?)%>/g,wS=/<%([\s\S]+?)%>/g,Wm=/<%=([\s\S]+?)%>/g,TS=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,CS=/^\w*$/,IS=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,If=/[\\^$.*+?()[\]{}|]/g,AS=RegExp(If.source),Af=/^\s+/,SS=/\s/,OS=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,NS=/\{\n\/\* \[wrapped with (.+)\] \*/,RS=/,? & /,xS=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,DS=/[()=,{}\[\]\/\s]/,LS=/\\(\\)?/g,PS=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Hm=/\w*$/,kS=/^[-+]0x[0-9a-f]+$/i,MS=/^0b[01]+$/i,$S=/^\[object .+?Constructor\]$/,FS=/^0o[0-7]+$/i,US=/^(?:0|[1-9]\d*)$/,BS=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,cc=/($^)/,WS=/['\n\r\u2028\u2029\\]/g,uc="\\ud800-\\udfff",HS="\\u0300-\\u036f",VS="\\ufe20-\\ufe2f",jS="\\u20d0-\\u20ff",Vm=HS+VS+jS,jm="\\u2700-\\u27bf",qm="a-z\\xdf-\\xf6\\xf8-\\xff",qS="\\xac\\xb1\\xd7\\xf7",KS="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",GS="\\u2000-\\u206f",zS=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Km="A-Z\\xc0-\\xd6\\xd8-\\xde",Gm="\\ufe0e\\ufe0f",zm=qS+KS+GS+zS,Sf="['’]",YS="["+uc+"]",Ym="["+zm+"]",hc="["+Vm+"]",Xm="\\d+",XS="["+jm+"]",Qm="["+qm+"]",Jm="[^"+uc+zm+Xm+jm+qm+Km+"]",Of="\\ud83c[\\udffb-\\udfff]",QS="(?:"+hc+"|"+Of+")",Zm="[^"+uc+"]",Nf="(?:\\ud83c[\\udde6-\\uddff]){2}",Rf="[\\ud800-\\udbff][\\udc00-\\udfff]",Zs="["+Km+"]",ev="\\u200d",tv="(?:"+Qm+"|"+Jm+")",JS="(?:"+Zs+"|"+Jm+")",nv="(?:"+Sf+"(?:d|ll|m|re|s|t|ve))?",iv="(?:"+Sf+"(?:D|LL|M|RE|S|T|VE))?",rv=QS+"?",sv="["+Gm+"]?",ZS="(?:"+ev+"(?:"+[Zm,Nf,Rf].join("|")+")"+sv+rv+")*",eO="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",tO="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",ov=sv+rv+ZS,nO="(?:"+[XS,Nf,Rf].join("|")+")"+ov,iO="(?:"+[Zm+hc+"?",hc,Nf,Rf,YS].join("|")+")",rO=RegExp(Sf,"g"),sO=RegExp(hc,"g"),xf=RegExp(Of+"(?="+Of+")|"+iO+ov,"g"),oO=RegExp([Zs+"?"+Qm+"+"+nv+"(?="+[Ym,Zs,"$"].join("|")+")",JS+"+"+iv+"(?="+[Ym,Zs+tv,"$"].join("|")+")",Zs+"?"+tv+"+"+nv,Zs+"+"+iv,tO,eO,Xm,nO].join("|"),"g"),aO=RegExp("["+ev+uc+Vm+Gm+"]"),lO=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,cO=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],uO=-1,nt={};nt[st]=nt[Jt]=nt[yi]=nt[Xs]=nt[Vi]=nt[Qs]=nt[Pt]=nt[un]=nt[Js]=!0,nt[Lt]=nt[mt]=nt[Le]=nt[jt]=nt[Se]=nt[qt]=nt[Pn]=nt[w]=nt[R]=nt[M]=nt[W]=nt[j]=nt[k]=nt[te]=nt[ae]=!1;var Xe={};Xe[Lt]=Xe[mt]=Xe[Le]=Xe[Se]=Xe[jt]=Xe[qt]=Xe[st]=Xe[Jt]=Xe[yi]=Xe[Xs]=Xe[Vi]=Xe[R]=Xe[M]=Xe[W]=Xe[j]=Xe[k]=Xe[te]=Xe[J]=Xe[Qs]=Xe[Pt]=Xe[un]=Xe[Js]=!0,Xe[Pn]=Xe[w]=Xe[ae]=!1;var hO={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"},fO={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},dO={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},pO={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},gO=parseFloat,_O=parseInt,av=typeof $a=="object"&&$a&&$a.Object===Object&&$a,mO=typeof self=="object"&&self&&self.Object===Object&&self,kt=av||mO||Function("return this")(),Df=e&&!e.nodeType&&e,es=Df&&!0&&t&&!t.nodeType&&t,lv=es&&es.exports===Df,Lf=lv&&av.process,kn=function(){try{var I=es&&es.require&&es.require("util").types;return I||Lf&&Lf.binding&&Lf.binding("util")}catch{}}(),cv=kn&&kn.isArrayBuffer,uv=kn&&kn.isDate,hv=kn&&kn.isMap,fv=kn&&kn.isRegExp,dv=kn&&kn.isSet,pv=kn&&kn.isTypedArray;function yn(I,x,N){switch(N.length){case 0:return I.call(x);case 1:return I.call(x,N[0]);case 2:return I.call(x,N[0],N[1]);case 3:return I.call(x,N[0],N[1],N[2])}return I.apply(x,N)}function vO(I,x,N,ee){for(var _e=-1,Be=I==null?0:I.length;++_e<Be;){var vt=I[_e];x(ee,vt,N(vt),I)}return ee}function Mn(I,x){for(var N=-1,ee=I==null?0:I.length;++N<ee&&x(I[N],N,I)!==!1;);return I}function yO(I,x){for(var N=I==null?0:I.length;N--&&x(I[N],N,I)!==!1;);return I}function gv(I,x){for(var N=-1,ee=I==null?0:I.length;++N<ee;)if(!x(I[N],N,I))return!1;return!0}function _r(I,x){for(var N=-1,ee=I==null?0:I.length,_e=0,Be=[];++N<ee;){var vt=I[N];x(vt,N,I)&&(Be[_e++]=vt)}return Be}function fc(I,x){var N=I==null?0:I.length;return!!N&&eo(I,x,0)>-1}function Pf(I,x,N){for(var ee=-1,_e=I==null?0:I.length;++ee<_e;)if(N(x,I[ee]))return!0;return!1}function ot(I,x){for(var N=-1,ee=I==null?0:I.length,_e=Array(ee);++N<ee;)_e[N]=x(I[N],N,I);return _e}function mr(I,x){for(var N=-1,ee=x.length,_e=I.length;++N<ee;)I[_e+N]=x[N];return I}function kf(I,x,N,ee){var _e=-1,Be=I==null?0:I.length;for(ee&&Be&&(N=I[++_e]);++_e<Be;)N=x(N,I[_e],_e,I);return N}function EO(I,x,N,ee){var _e=I==null?0:I.length;for(ee&&_e&&(N=I[--_e]);_e--;)N=x(N,I[_e],_e,I);return N}function Mf(I,x){for(var N=-1,ee=I==null?0:I.length;++N<ee;)if(x(I[N],N,I))return!0;return!1}var bO=$f("length");function wO(I){return I.split("")}function TO(I){return I.match(xS)||[]}function _v(I,x,N){var ee;return N(I,function(_e,Be,vt){if(x(_e,Be,vt))return ee=Be,!1}),ee}function dc(I,x,N,ee){for(var _e=I.length,Be=N+(ee?1:-1);ee?Be--:++Be<_e;)if(x(I[Be],Be,I))return Be;return-1}function eo(I,x,N){return x===x?kO(I,x,N):dc(I,mv,N)}function CO(I,x,N,ee){for(var _e=N-1,Be=I.length;++_e<Be;)if(ee(I[_e],x))return _e;return-1}function mv(I){return I!==I}function vv(I,x){var N=I==null?0:I.length;return N?Uf(I,x)/N:cn}function $f(I){return function(x){return x==null?n:x[I]}}function Ff(I){return function(x){return I==null?n:I[x]}}function yv(I,x,N,ee,_e){return _e(I,function(Be,vt,Ye){N=ee?(ee=!1,Be):x(N,Be,vt,Ye)}),N}function IO(I,x){var N=I.length;for(I.sort(x);N--;)I[N]=I[N].value;return I}function Uf(I,x){for(var N,ee=-1,_e=I.length;++ee<_e;){var Be=x(I[ee]);Be!==n&&(N=N===n?Be:N+Be)}return N}function Bf(I,x){for(var N=-1,ee=Array(I);++N<I;)ee[N]=x(N);return ee}function AO(I,x){return ot(x,function(N){return[N,I[N]]})}function Ev(I){return I&&I.slice(0,Cv(I)+1).replace(Af,"")}function En(I){return function(x){return I(x)}}function Wf(I,x){return ot(x,function(N){return I[N]})}function _a(I,x){return I.has(x)}function bv(I,x){for(var N=-1,ee=I.length;++N<ee&&eo(x,I[N],0)>-1;);return N}function wv(I,x){for(var N=I.length;N--&&eo(x,I[N],0)>-1;);return N}function SO(I,x){for(var N=I.length,ee=0;N--;)I[N]===x&&++ee;return ee}var OO=Ff(hO),NO=Ff(fO);function RO(I){return"\\"+pO[I]}function xO(I,x){return I==null?n:I[x]}function to(I){return aO.test(I)}function DO(I){return lO.test(I)}function LO(I){for(var x,N=[];!(x=I.next()).done;)N.push(x.value);return N}function Hf(I){var x=-1,N=Array(I.size);return I.forEach(function(ee,_e){N[++x]=[_e,ee]}),N}function Tv(I,x){return function(N){return I(x(N))}}function vr(I,x){for(var N=-1,ee=I.length,_e=0,Be=[];++N<ee;){var vt=I[N];(vt===x||vt===p)&&(I[N]=p,Be[_e++]=N)}return Be}function pc(I){var x=-1,N=Array(I.size);return I.forEach(function(ee){N[++x]=ee}),N}function PO(I){var x=-1,N=Array(I.size);return I.forEach(function(ee){N[++x]=[ee,ee]}),N}function kO(I,x,N){for(var ee=N-1,_e=I.length;++ee<_e;)if(I[ee]===x)return ee;return-1}function MO(I,x,N){for(var ee=N+1;ee--;)if(I[ee]===x)return ee;return ee}function no(I){return to(I)?FO(I):bO(I)}function ti(I){return to(I)?UO(I):wO(I)}function Cv(I){for(var x=I.length;x--&&SS.test(I.charAt(x)););return x}var $O=Ff(dO);function FO(I){for(var x=xf.lastIndex=0;xf.test(I);)++x;return x}function UO(I){return I.match(xf)||[]}function BO(I){return I.match(oO)||[]}var WO=function I(x){x=x==null?kt:io.defaults(kt.Object(),x,io.pick(kt,cO));var N=x.Array,ee=x.Date,_e=x.Error,Be=x.Function,vt=x.Math,Ye=x.Object,Vf=x.RegExp,HO=x.String,$n=x.TypeError,gc=N.prototype,VO=Be.prototype,ro=Ye.prototype,_c=x["__core-js_shared__"],mc=VO.toString,qe=ro.hasOwnProperty,jO=0,Iv=function(){var s=/[^.]+$/.exec(_c&&_c.keys&&_c.keys.IE_PROTO||"");return s?"Symbol(src)_1."+s:""}(),vc=ro.toString,qO=mc.call(Ye),KO=kt._,GO=Vf("^"+mc.call(qe).replace(If,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),yc=lv?x.Buffer:n,yr=x.Symbol,Ec=x.Uint8Array,Av=yc?yc.allocUnsafe:n,bc=Tv(Ye.getPrototypeOf,Ye),Sv=Ye.create,Ov=ro.propertyIsEnumerable,wc=gc.splice,Nv=yr?yr.isConcatSpreadable:n,ma=yr?yr.iterator:n,ts=yr?yr.toStringTag:n,Tc=function(){try{var s=os(Ye,"defineProperty");return s({},"",{}),s}catch{}}(),zO=x.clearTimeout!==kt.clearTimeout&&x.clearTimeout,YO=ee&&ee.now!==kt.Date.now&&ee.now,XO=x.setTimeout!==kt.setTimeout&&x.setTimeout,Cc=vt.ceil,Ic=vt.floor,jf=Ye.getOwnPropertySymbols,QO=yc?yc.isBuffer:n,Rv=x.isFinite,JO=gc.join,ZO=Tv(Ye.keys,Ye),yt=vt.max,Kt=vt.min,eN=ee.now,tN=x.parseInt,xv=vt.random,nN=gc.reverse,qf=os(x,"DataView"),va=os(x,"Map"),Kf=os(x,"Promise"),so=os(x,"Set"),ya=os(x,"WeakMap"),Ea=os(Ye,"create"),Ac=ya&&new ya,oo={},iN=as(qf),rN=as(va),sN=as(Kf),oN=as(so),aN=as(ya),Sc=yr?yr.prototype:n,ba=Sc?Sc.valueOf:n,Dv=Sc?Sc.toString:n;function m(s){if(ht(s)&&!me(s)&&!(s instanceof De)){if(s instanceof Fn)return s;if(qe.call(s,"__wrapped__"))return Ly(s)}return new Fn(s)}var ao=function(){function s(){}return function(a){if(!lt(a))return{};if(Sv)return Sv(a);s.prototype=a;var c=new s;return s.prototype=n,c}}();function Oc(){}function Fn(s,a){this.__wrapped__=s,this.__actions__=[],this.__chain__=!!a,this.__index__=0,this.__values__=n}m.templateSettings={escape:bS,evaluate:wS,interpolate:Wm,variable:"",imports:{_:m}},m.prototype=Oc.prototype,m.prototype.constructor=m,Fn.prototype=ao(Oc.prototype),Fn.prototype.constructor=Fn;function De(s){this.__wrapped__=s,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=ut,this.__views__=[]}function lN(){var s=new De(this.__wrapped__);return s.__actions__=hn(this.__actions__),s.__dir__=this.__dir__,s.__filtered__=this.__filtered__,s.__iteratees__=hn(this.__iteratees__),s.__takeCount__=this.__takeCount__,s.__views__=hn(this.__views__),s}function cN(){if(this.__filtered__){var s=new De(this);s.__dir__=-1,s.__filtered__=!0}else s=this.clone(),s.__dir__*=-1;return s}function uN(){var s=this.__wrapped__.value(),a=this.__dir__,c=me(s),f=a<0,g=c?s.length:0,v=wR(0,g,this.__views__),b=v.start,T=v.end,A=T-b,D=f?T:b-1,P=this.__iteratees__,F=P.length,Y=0,ne=Kt(A,this.__takeCount__);if(!c||!f&&g==A&&ne==A)return ny(s,this.__actions__);var ce=[];e:for(;A--&&Y<ne;){D+=a;for(var Te=-1,ue=s[D];++Te<F;){var Re=P[Te],Pe=Re.iteratee,Tn=Re.type,tn=Pe(ue);if(Tn==Ln)ue=tn;else if(!tn){if(Tn==Vt)continue e;break e}}ce[Y++]=ue}return ce}De.prototype=ao(Oc.prototype),De.prototype.constructor=De;function ns(s){var a=-1,c=s==null?0:s.length;for(this.clear();++a<c;){var f=s[a];this.set(f[0],f[1])}}function hN(){this.__data__=Ea?Ea(null):{},this.size=0}function fN(s){var a=this.has(s)&&delete this.__data__[s];return this.size-=a?1:0,a}function dN(s){var a=this.__data__;if(Ea){var c=a[s];return c===h?n:c}return qe.call(a,s)?a[s]:n}function pN(s){var a=this.__data__;return Ea?a[s]!==n:qe.call(a,s)}function gN(s,a){var c=this.__data__;return this.size+=this.has(s)?0:1,c[s]=Ea&&a===n?h:a,this}ns.prototype.clear=hN,ns.prototype.delete=fN,ns.prototype.get=dN,ns.prototype.has=pN,ns.prototype.set=gN;function ji(s){var a=-1,c=s==null?0:s.length;for(this.clear();++a<c;){var f=s[a];this.set(f[0],f[1])}}function _N(){this.__data__=[],this.size=0}function mN(s){var a=this.__data__,c=Nc(a,s);if(c<0)return!1;var f=a.length-1;return c==f?a.pop():wc.call(a,c,1),--this.size,!0}function vN(s){var a=this.__data__,c=Nc(a,s);return c<0?n:a[c][1]}function yN(s){return Nc(this.__data__,s)>-1}function EN(s,a){var c=this.__data__,f=Nc(c,s);return f<0?(++this.size,c.push([s,a])):c[f][1]=a,this}ji.prototype.clear=_N,ji.prototype.delete=mN,ji.prototype.get=vN,ji.prototype.has=yN,ji.prototype.set=EN;function qi(s){var a=-1,c=s==null?0:s.length;for(this.clear();++a<c;){var f=s[a];this.set(f[0],f[1])}}function bN(){this.size=0,this.__data__={hash:new ns,map:new(va||ji),string:new ns}}function wN(s){var a=Wc(this,s).delete(s);return this.size-=a?1:0,a}function TN(s){return Wc(this,s).get(s)}function CN(s){return Wc(this,s).has(s)}function IN(s,a){var c=Wc(this,s),f=c.size;return c.set(s,a),this.size+=c.size==f?0:1,this}qi.prototype.clear=bN,qi.prototype.delete=wN,qi.prototype.get=TN,qi.prototype.has=CN,qi.prototype.set=IN;function is(s){var a=-1,c=s==null?0:s.length;for(this.__data__=new qi;++a<c;)this.add(s[a])}function AN(s){return this.__data__.set(s,h),this}function SN(s){return this.__data__.has(s)}is.prototype.add=is.prototype.push=AN,is.prototype.has=SN;function ni(s){var a=this.__data__=new ji(s);this.size=a.size}function ON(){this.__data__=new ji,this.size=0}function NN(s){var a=this.__data__,c=a.delete(s);return this.size=a.size,c}function RN(s){return this.__data__.get(s)}function xN(s){return this.__data__.has(s)}function DN(s,a){var c=this.__data__;if(c instanceof ji){var f=c.__data__;if(!va||f.length<r-1)return f.push([s,a]),this.size=++c.size,this;c=this.__data__=new qi(f)}return c.set(s,a),this.size=c.size,this}ni.prototype.clear=ON,ni.prototype.delete=NN,ni.prototype.get=RN,ni.prototype.has=xN,ni.prototype.set=DN;function Lv(s,a){var c=me(s),f=!c&&ls(s),g=!c&&!f&&Cr(s),v=!c&&!f&&!g&&ho(s),b=c||f||g||v,T=b?Bf(s.length,HO):[],A=T.length;for(var D in s)(a||qe.call(s,D))&&!(b&&(D=="length"||g&&(D=="offset"||D=="parent")||v&&(D=="buffer"||D=="byteLength"||D=="byteOffset")||Yi(D,A)))&&T.push(D);return T}function Pv(s){var a=s.length;return a?s[id(0,a-1)]:n}function LN(s,a){return Hc(hn(s),rs(a,0,s.length))}function PN(s){return Hc(hn(s))}function Gf(s,a,c){(c!==n&&!ii(s[a],c)||c===n&&!(a in s))&&Ki(s,a,c)}function wa(s,a,c){var f=s[a];(!(qe.call(s,a)&&ii(f,c))||c===n&&!(a in s))&&Ki(s,a,c)}function Nc(s,a){for(var c=s.length;c--;)if(ii(s[c][0],a))return c;return-1}function kN(s,a,c,f){return Er(s,function(g,v,b){a(f,g,c(g),b)}),f}function kv(s,a){return s&&bi(a,It(a),s)}function MN(s,a){return s&&bi(a,dn(a),s)}function Ki(s,a,c){a=="__proto__"&&Tc?Tc(s,a,{configurable:!0,enumerable:!0,value:c,writable:!0}):s[a]=c}function zf(s,a){for(var c=-1,f=a.length,g=N(f),v=s==null;++c<f;)g[c]=v?n:Od(s,a[c]);return g}function rs(s,a,c){return s===s&&(c!==n&&(s=s<=c?s:c),a!==n&&(s=s>=a?s:a)),s}function Un(s,a,c,f,g,v){var b,T=a&_,A=a&y,D=a&E;if(c&&(b=g?c(s,f,g,v):c(s)),b!==n)return b;if(!lt(s))return s;var P=me(s);if(P){if(b=CR(s),!T)return hn(s,b)}else{var F=Gt(s),Y=F==w||F==C;if(Cr(s))return sy(s,T);if(F==W||F==Lt||Y&&!g){if(b=A||Y?{}:Cy(s),!T)return A?dR(s,MN(b,s)):fR(s,kv(b,s))}else{if(!Xe[F])return g?s:{};b=IR(s,F,T)}}v||(v=new ni);var ne=v.get(s);if(ne)return ne;v.set(s,b),Zy(s)?s.forEach(function(ue){b.add(Un(ue,a,c,ue,s,v))}):Qy(s)&&s.forEach(function(ue,Re){b.set(Re,Un(ue,a,c,Re,s,v))});var ce=D?A?pd:dd:A?dn:It,Te=P?n:ce(s);return Mn(Te||s,function(ue,Re){Te&&(Re=ue,ue=s[Re]),wa(b,Re,Un(ue,a,c,Re,s,v))}),b}function $N(s){var a=It(s);return function(c){return Mv(c,s,a)}}function Mv(s,a,c){var f=c.length;if(s==null)return!f;for(s=Ye(s);f--;){var g=c[f],v=a[g],b=s[g];if(b===n&&!(g in s)||!v(b))return!1}return!0}function $v(s,a,c){if(typeof s!="function")throw new $n(l);return Na(function(){s.apply(n,c)},a)}function Ta(s,a,c,f){var g=-1,v=fc,b=!0,T=s.length,A=[],D=a.length;if(!T)return A;c&&(a=ot(a,En(c))),f?(v=Pf,b=!1):a.length>=r&&(v=_a,b=!1,a=new is(a));e:for(;++g<T;){var P=s[g],F=c==null?P:c(P);if(P=f||P!==0?P:0,b&&F===F){for(var Y=D;Y--;)if(a[Y]===F)continue e;A.push(P)}else v(a,F,f)||A.push(P)}return A}var Er=uy(Ei),Fv=uy(Xf,!0);function FN(s,a){var c=!0;return Er(s,function(f,g,v){return c=!!a(f,g,v),c}),c}function Rc(s,a,c){for(var f=-1,g=s.length;++f<g;){var v=s[f],b=a(v);if(b!=null&&(T===n?b===b&&!wn(b):c(b,T)))var T=b,A=v}return A}function UN(s,a,c,f){var g=s.length;for(c=Ee(c),c<0&&(c=-c>g?0:g+c),f=f===n||f>g?g:Ee(f),f<0&&(f+=g),f=c>f?0:tE(f);c<f;)s[c++]=a;return s}function Uv(s,a){var c=[];return Er(s,function(f,g,v){a(f,g,v)&&c.push(f)}),c}function Mt(s,a,c,f,g){var v=-1,b=s.length;for(c||(c=SR),g||(g=[]);++v<b;){var T=s[v];a>0&&c(T)?a>1?Mt(T,a-1,c,f,g):mr(g,T):f||(g[g.length]=T)}return g}var Yf=hy(),Bv=hy(!0);function Ei(s,a){return s&&Yf(s,a,It)}function Xf(s,a){return s&&Bv(s,a,It)}function xc(s,a){return _r(a,function(c){return Xi(s[c])})}function ss(s,a){a=wr(a,s);for(var c=0,f=a.length;s!=null&&c<f;)s=s[wi(a[c++])];return c&&c==f?s:n}function Wv(s,a,c){var f=a(s);return me(s)?f:mr(f,c(s))}function Zt(s){return s==null?s===n?re:$:ts&&ts in Ye(s)?bR(s):PR(s)}function Qf(s,a){return s>a}function BN(s,a){return s!=null&&qe.call(s,a)}function WN(s,a){return s!=null&&a in Ye(s)}function HN(s,a,c){return s>=Kt(a,c)&&s<yt(a,c)}function Jf(s,a,c){for(var f=c?Pf:fc,g=s[0].length,v=s.length,b=v,T=N(v),A=1/0,D=[];b--;){var P=s[b];b&&a&&(P=ot(P,En(a))),A=Kt(P.length,A),T[b]=!c&&(a||g>=120&&P.length>=120)?new is(b&&P):n}P=s[0];var F=-1,Y=T[0];e:for(;++F<g&&D.length<A;){var ne=P[F],ce=a?a(ne):ne;if(ne=c||ne!==0?ne:0,!(Y?_a(Y,ce):f(D,ce,c))){for(b=v;--b;){var Te=T[b];if(!(Te?_a(Te,ce):f(s[b],ce,c)))continue e}Y&&Y.push(ce),D.push(ne)}}return D}function VN(s,a,c,f){return Ei(s,function(g,v,b){a(f,c(g),v,b)}),f}function Ca(s,a,c){a=wr(a,s),s=Oy(s,a);var f=s==null?s:s[wi(Wn(a))];return f==null?n:yn(f,s,c)}function Hv(s){return ht(s)&&Zt(s)==Lt}function jN(s){return ht(s)&&Zt(s)==Le}function qN(s){return ht(s)&&Zt(s)==qt}function Ia(s,a,c,f,g){return s===a?!0:s==null||a==null||!ht(s)&&!ht(a)?s!==s&&a!==a:KN(s,a,c,f,Ia,g)}function KN(s,a,c,f,g,v){var b=me(s),T=me(a),A=b?mt:Gt(s),D=T?mt:Gt(a);A=A==Lt?W:A,D=D==Lt?W:D;var P=A==W,F=D==W,Y=A==D;if(Y&&Cr(s)){if(!Cr(a))return!1;b=!0,P=!1}if(Y&&!P)return v||(v=new ni),b||ho(s)?by(s,a,c,f,g,v):yR(s,a,A,c,f,g,v);if(!(c&S)){var ne=P&&qe.call(s,"__wrapped__"),ce=F&&qe.call(a,"__wrapped__");if(ne||ce){var Te=ne?s.value():s,ue=ce?a.value():a;return v||(v=new ni),g(Te,ue,c,f,v)}}return Y?(v||(v=new ni),ER(s,a,c,f,g,v)):!1}function GN(s){return ht(s)&&Gt(s)==R}function Zf(s,a,c,f){var g=c.length,v=g,b=!f;if(s==null)return!v;for(s=Ye(s);g--;){var T=c[g];if(b&&T[2]?T[1]!==s[T[0]]:!(T[0]in s))return!1}for(;++g<v;){T=c[g];var A=T[0],D=s[A],P=T[1];if(b&&T[2]){if(D===n&&!(A in s))return!1}else{var F=new ni;if(f)var Y=f(D,P,A,s,a,F);if(!(Y===n?Ia(P,D,S|O,f,F):Y))return!1}}return!0}function Vv(s){if(!lt(s)||NR(s))return!1;var a=Xi(s)?GO:$S;return a.test(as(s))}function zN(s){return ht(s)&&Zt(s)==j}function YN(s){return ht(s)&&Gt(s)==k}function XN(s){return ht(s)&&zc(s.length)&&!!nt[Zt(s)]}function jv(s){return typeof s=="function"?s:s==null?pn:typeof s=="object"?me(s)?Gv(s[0],s[1]):Kv(s):fE(s)}function ed(s){if(!Oa(s))return ZO(s);var a=[];for(var c in Ye(s))qe.call(s,c)&&c!="constructor"&&a.push(c);return a}function QN(s){if(!lt(s))return LR(s);var a=Oa(s),c=[];for(var f in s)f=="constructor"&&(a||!qe.call(s,f))||c.push(f);return c}function td(s,a){return s<a}function qv(s,a){var c=-1,f=fn(s)?N(s.length):[];return Er(s,function(g,v,b){f[++c]=a(g,v,b)}),f}function Kv(s){var a=_d(s);return a.length==1&&a[0][2]?Ay(a[0][0],a[0][1]):function(c){return c===s||Zf(c,s,a)}}function Gv(s,a){return vd(s)&&Iy(a)?Ay(wi(s),a):function(c){var f=Od(c,s);return f===n&&f===a?Nd(c,s):Ia(a,f,S|O)}}function Dc(s,a,c,f,g){s!==a&&Yf(a,function(v,b){if(g||(g=new ni),lt(v))JN(s,a,b,c,Dc,f,g);else{var T=f?f(Ed(s,b),v,b+"",s,a,g):n;T===n&&(T=v),Gf(s,b,T)}},dn)}function JN(s,a,c,f,g,v,b){var T=Ed(s,c),A=Ed(a,c),D=b.get(A);if(D){Gf(s,c,D);return}var P=v?v(T,A,c+"",s,a,b):n,F=P===n;if(F){var Y=me(A),ne=!Y&&Cr(A),ce=!Y&&!ne&&ho(A);P=A,Y||ne||ce?me(T)?P=T:pt(T)?P=hn(T):ne?(F=!1,P=sy(A,!0)):ce?(F=!1,P=oy(A,!0)):P=[]:Ra(A)||ls(A)?(P=T,ls(T)?P=nE(T):(!lt(T)||Xi(T))&&(P=Cy(A))):F=!1}F&&(b.set(A,P),g(P,A,f,v,b),b.delete(A)),Gf(s,c,P)}function zv(s,a){var c=s.length;if(c)return a+=a<0?c:0,Yi(a,c)?s[a]:n}function Yv(s,a,c){a.length?a=ot(a,function(v){return me(v)?function(b){return ss(b,v.length===1?v[0]:v)}:v}):a=[pn];var f=-1;a=ot(a,En(le()));var g=qv(s,function(v,b,T){var A=ot(a,function(D){return D(v)});return{criteria:A,index:++f,value:v}});return IO(g,function(v,b){return hR(v,b,c)})}function ZN(s,a){return Xv(s,a,function(c,f){return Nd(s,f)})}function Xv(s,a,c){for(var f=-1,g=a.length,v={};++f<g;){var b=a[f],T=ss(s,b);c(T,b)&&Aa(v,wr(b,s),T)}return v}function eR(s){return function(a){return ss(a,s)}}function nd(s,a,c,f){var g=f?CO:eo,v=-1,b=a.length,T=s;for(s===a&&(a=hn(a)),c&&(T=ot(s,En(c)));++v<b;)for(var A=0,D=a[v],P=c?c(D):D;(A=g(T,P,A,f))>-1;)T!==s&&wc.call(T,A,1),wc.call(s,A,1);return s}function Qv(s,a){for(var c=s?a.length:0,f=c-1;c--;){var g=a[c];if(c==f||g!==v){var v=g;Yi(g)?wc.call(s,g,1):od(s,g)}}return s}function id(s,a){return s+Ic(xv()*(a-s+1))}function tR(s,a,c,f){for(var g=-1,v=yt(Cc((a-s)/(c||1)),0),b=N(v);v--;)b[f?v:++g]=s,s+=c;return b}function rd(s,a){var c="";if(!s||a<1||a>we)return c;do a%2&&(c+=s),a=Ic(a/2),a&&(s+=s);while(a);return c}function Ae(s,a){return bd(Sy(s,a,pn),s+"")}function nR(s){return Pv(fo(s))}function iR(s,a){var c=fo(s);return Hc(c,rs(a,0,c.length))}function Aa(s,a,c,f){if(!lt(s))return s;a=wr(a,s);for(var g=-1,v=a.length,b=v-1,T=s;T!=null&&++g<v;){var A=wi(a[g]),D=c;if(A==="__proto__"||A==="constructor"||A==="prototype")return s;if(g!=b){var P=T[A];D=f?f(P,A,T):n,D===n&&(D=lt(P)?P:Yi(a[g+1])?[]:{})}wa(T,A,D),T=T[A]}return s}var Jv=Ac?function(s,a){return Ac.set(s,a),s}:pn,rR=Tc?function(s,a){return Tc(s,"toString",{configurable:!0,enumerable:!1,value:xd(a),writable:!0})}:pn;function sR(s){return Hc(fo(s))}function Bn(s,a,c){var f=-1,g=s.length;a<0&&(a=-a>g?0:g+a),c=c>g?g:c,c<0&&(c+=g),g=a>c?0:c-a>>>0,a>>>=0;for(var v=N(g);++f<g;)v[f]=s[f+a];return v}function oR(s,a){var c;return Er(s,function(f,g,v){return c=a(f,g,v),!c}),!!c}function Lc(s,a,c){var f=0,g=s==null?f:s.length;if(typeof a=="number"&&a===a&&g<=Hi){for(;f<g;){var v=f+g>>>1,b=s[v];b!==null&&!wn(b)&&(c?b<=a:b<a)?f=v+1:g=v}return g}return sd(s,a,pn,c)}function sd(s,a,c,f){var g=0,v=s==null?0:s.length;if(v===0)return 0;a=c(a);for(var b=a!==a,T=a===null,A=wn(a),D=a===n;g<v;){var P=Ic((g+v)/2),F=c(s[P]),Y=F!==n,ne=F===null,ce=F===F,Te=wn(F);if(b)var ue=f||ce;else D?ue=ce&&(f||Y):T?ue=ce&&Y&&(f||!ne):A?ue=ce&&Y&&!ne&&(f||!Te):ne||Te?ue=!1:ue=f?F<=a:F<a;ue?g=P+1:v=P}return Kt(v,Ct)}function Zv(s,a){for(var c=-1,f=s.length,g=0,v=[];++c<f;){var b=s[c],T=a?a(b):b;if(!c||!ii(T,A)){var A=T;v[g++]=b===0?0:b}}return v}function ey(s){return typeof s=="number"?s:wn(s)?cn:+s}function bn(s){if(typeof s=="string")return s;if(me(s))return ot(s,bn)+"";if(wn(s))return Dv?Dv.call(s):"";var a=s+"";return a=="0"&&1/s==-ve?"-0":a}function br(s,a,c){var f=-1,g=fc,v=s.length,b=!0,T=[],A=T;if(c)b=!1,g=Pf;else if(v>=r){var D=a?null:mR(s);if(D)return pc(D);b=!1,g=_a,A=new is}else A=a?[]:T;e:for(;++f<v;){var P=s[f],F=a?a(P):P;if(P=c||P!==0?P:0,b&&F===F){for(var Y=A.length;Y--;)if(A[Y]===F)continue e;a&&A.push(F),T.push(P)}else g(A,F,c)||(A!==T&&A.push(F),T.push(P))}return T}function od(s,a){return a=wr(a,s),s=Oy(s,a),s==null||delete s[wi(Wn(a))]}function ty(s,a,c,f){return Aa(s,a,c(ss(s,a)),f)}function Pc(s,a,c,f){for(var g=s.length,v=f?g:-1;(f?v--:++v<g)&&a(s[v],v,s););return c?Bn(s,f?0:v,f?v+1:g):Bn(s,f?v+1:0,f?g:v)}function ny(s,a){var c=s;return c instanceof De&&(c=c.value()),kf(a,function(f,g){return g.func.apply(g.thisArg,mr([f],g.args))},c)}function ad(s,a,c){var f=s.length;if(f<2)return f?br(s[0]):[];for(var g=-1,v=N(f);++g<f;)for(var b=s[g],T=-1;++T<f;)T!=g&&(v[g]=Ta(v[g]||b,s[T],a,c));return br(Mt(v,1),a,c)}function iy(s,a,c){for(var f=-1,g=s.length,v=a.length,b={};++f<g;){var T=f<v?a[f]:n;c(b,s[f],T)}return b}function ld(s){return pt(s)?s:[]}function cd(s){return typeof s=="function"?s:pn}function wr(s,a){return me(s)?s:vd(s,a)?[s]:Dy(He(s))}var aR=Ae;function Tr(s,a,c){var f=s.length;return c=c===n?f:c,!a&&c>=f?s:Bn(s,a,c)}var ry=zO||function(s){return kt.clearTimeout(s)};function sy(s,a){if(a)return s.slice();var c=s.length,f=Av?Av(c):new s.constructor(c);return s.copy(f),f}function ud(s){var a=new s.constructor(s.byteLength);return new Ec(a).set(new Ec(s)),a}function lR(s,a){var c=a?ud(s.buffer):s.buffer;return new s.constructor(c,s.byteOffset,s.byteLength)}function cR(s){var a=new s.constructor(s.source,Hm.exec(s));return a.lastIndex=s.lastIndex,a}function uR(s){return ba?Ye(ba.call(s)):{}}function oy(s,a){var c=a?ud(s.buffer):s.buffer;return new s.constructor(c,s.byteOffset,s.length)}function ay(s,a){if(s!==a){var c=s!==n,f=s===null,g=s===s,v=wn(s),b=a!==n,T=a===null,A=a===a,D=wn(a);if(!T&&!D&&!v&&s>a||v&&b&&A&&!T&&!D||f&&b&&A||!c&&A||!g)return 1;if(!f&&!v&&!D&&s<a||D&&c&&g&&!f&&!v||T&&c&&g||!b&&g||!A)return-1}return 0}function hR(s,a,c){for(var f=-1,g=s.criteria,v=a.criteria,b=g.length,T=c.length;++f<b;){var A=ay(g[f],v[f]);if(A){if(f>=T)return A;var D=c[f];return A*(D=="desc"?-1:1)}}return s.index-a.index}function ly(s,a,c,f){for(var g=-1,v=s.length,b=c.length,T=-1,A=a.length,D=yt(v-b,0),P=N(A+D),F=!f;++T<A;)P[T]=a[T];for(;++g<b;)(F||g<v)&&(P[c[g]]=s[g]);for(;D--;)P[T++]=s[g++];return P}function cy(s,a,c,f){for(var g=-1,v=s.length,b=-1,T=c.length,A=-1,D=a.length,P=yt(v-T,0),F=N(P+D),Y=!f;++g<P;)F[g]=s[g];for(var ne=g;++A<D;)F[ne+A]=a[A];for(;++b<T;)(Y||g<v)&&(F[ne+c[b]]=s[g++]);return F}function hn(s,a){var c=-1,f=s.length;for(a||(a=N(f));++c<f;)a[c]=s[c];return a}function bi(s,a,c,f){var g=!c;c||(c={});for(var v=-1,b=a.length;++v<b;){var T=a[v],A=f?f(c[T],s[T],T,c,s):n;A===n&&(A=s[T]),g?Ki(c,T,A):wa(c,T,A)}return c}function fR(s,a){return bi(s,md(s),a)}function dR(s,a){return bi(s,wy(s),a)}function kc(s,a){return function(c,f){var g=me(c)?vO:kN,v=a?a():{};return g(c,s,le(f,2),v)}}function lo(s){return Ae(function(a,c){var f=-1,g=c.length,v=g>1?c[g-1]:n,b=g>2?c[2]:n;for(v=s.length>3&&typeof v=="function"?(g--,v):n,b&&en(c[0],c[1],b)&&(v=g<3?n:v,g=1),a=Ye(a);++f<g;){var T=c[f];T&&s(a,T,f,v)}return a})}function uy(s,a){return function(c,f){if(c==null)return c;if(!fn(c))return s(c,f);for(var g=c.length,v=a?g:-1,b=Ye(c);(a?v--:++v<g)&&f(b[v],v,b)!==!1;);return c}}function hy(s){return function(a,c,f){for(var g=-1,v=Ye(a),b=f(a),T=b.length;T--;){var A=b[s?T:++g];if(c(v[A],A,v)===!1)break}return a}}function pR(s,a,c){var f=a&L,g=Sa(s);function v(){var b=this&&this!==kt&&this instanceof v?g:s;return b.apply(f?c:this,arguments)}return v}function fy(s){return function(a){a=He(a);var c=to(a)?ti(a):n,f=c?c[0]:a.charAt(0),g=c?Tr(c,1).join(""):a.slice(1);return f[s]()+g}}function co(s){return function(a){return kf(uE(cE(a).replace(rO,"")),s,"")}}function Sa(s){return function(){var a=arguments;switch(a.length){case 0:return new s;case 1:return new s(a[0]);case 2:return new s(a[0],a[1]);case 3:return new s(a[0],a[1],a[2]);case 4:return new s(a[0],a[1],a[2],a[3]);case 5:return new s(a[0],a[1],a[2],a[3],a[4]);case 6:return new s(a[0],a[1],a[2],a[3],a[4],a[5]);case 7:return new s(a[0],a[1],a[2],a[3],a[4],a[5],a[6])}var c=ao(s.prototype),f=s.apply(c,a);return lt(f)?f:c}}function gR(s,a,c){var f=Sa(s);function g(){for(var v=arguments.length,b=N(v),T=v,A=uo(g);T--;)b[T]=arguments[T];var D=v<3&&b[0]!==A&&b[v-1]!==A?[]:vr(b,A);if(v-=D.length,v<c)return my(s,a,Mc,g.placeholder,n,b,D,n,n,c-v);var P=this&&this!==kt&&this instanceof g?f:s;return yn(P,this,b)}return g}function dy(s){return function(a,c,f){var g=Ye(a);if(!fn(a)){var v=le(c,3);a=It(a),c=function(T){return v(g[T],T,g)}}var b=s(a,c,f);return b>-1?g[v?a[b]:b]:n}}function py(s){return zi(function(a){var c=a.length,f=c,g=Fn.prototype.thru;for(s&&a.reverse();f--;){var v=a[f];if(typeof v!="function")throw new $n(l);if(g&&!b&&Bc(v)=="wrapper")var b=new Fn([],!0)}for(f=b?f:c;++f<c;){v=a[f];var T=Bc(v),A=T=="wrapper"?gd(v):n;A&&yd(A[0])&&A[1]==(Z|H|Q|X)&&!A[4].length&&A[9]==1?b=b[Bc(A[0])].apply(b,A[3]):b=v.length==1&&yd(v)?b[T]():b.thru(v)}return function(){var D=arguments,P=D[0];if(b&&D.length==1&&me(P))return b.plant(P).value();for(var F=0,Y=c?a[F].apply(this,D):P;++F<c;)Y=a[F].call(this,Y);return Y}})}function Mc(s,a,c,f,g,v,b,T,A,D){var P=a&Z,F=a&L,Y=a&q,ne=a&(H|V),ce=a&de,Te=Y?n:Sa(s);function ue(){for(var Re=arguments.length,Pe=N(Re),Tn=Re;Tn--;)Pe[Tn]=arguments[Tn];if(ne)var tn=uo(ue),Cn=SO(Pe,tn);if(f&&(Pe=ly(Pe,f,g,ne)),v&&(Pe=cy(Pe,v,b,ne)),Re-=Cn,ne&&Re<D){var gt=vr(Pe,tn);return my(s,a,Mc,ue.placeholder,c,Pe,gt,T,A,D-Re)}var ri=F?c:this,Ji=Y?ri[s]:s;return Re=Pe.length,T?Pe=kR(Pe,T):ce&&Re>1&&Pe.reverse(),P&&A<Re&&(Pe.length=A),this&&this!==kt&&this instanceof ue&&(Ji=Te||Sa(Ji)),Ji.apply(ri,Pe)}return ue}function gy(s,a){return function(c,f){return VN(c,s,a(f),{})}}function $c(s,a){return function(c,f){var g;if(c===n&&f===n)return a;if(c!==n&&(g=c),f!==n){if(g===n)return f;typeof c=="string"||typeof f=="string"?(c=bn(c),f=bn(f)):(c=ey(c),f=ey(f)),g=s(c,f)}return g}}function hd(s){return zi(function(a){return a=ot(a,En(le())),Ae(function(c){var f=this;return s(a,function(g){return yn(g,f,c)})})})}function Fc(s,a){a=a===n?" ":bn(a);var c=a.length;if(c<2)return c?rd(a,s):a;var f=rd(a,Cc(s/no(a)));return to(a)?Tr(ti(f),0,s).join(""):f.slice(0,s)}function _R(s,a,c,f){var g=a&L,v=Sa(s);function b(){for(var T=-1,A=arguments.length,D=-1,P=f.length,F=N(P+A),Y=this&&this!==kt&&this instanceof b?v:s;++D<P;)F[D]=f[D];for(;A--;)F[D++]=arguments[++T];return yn(Y,g?c:this,F)}return b}function _y(s){return function(a,c,f){return f&&typeof f!="number"&&en(a,c,f)&&(c=f=n),a=Qi(a),c===n?(c=a,a=0):c=Qi(c),f=f===n?a<c?1:-1:Qi(f),tR(a,c,f,s)}}function Uc(s){return function(a,c){return typeof a=="string"&&typeof c=="string"||(a=Hn(a),c=Hn(c)),s(a,c)}}function my(s,a,c,f,g,v,b,T,A,D){var P=a&H,F=P?b:n,Y=P?n:b,ne=P?v:n,ce=P?n:v;a|=P?Q:B,a&=~(P?B:Q),a&oe||(a&=~(L|q));var Te=[s,a,g,ne,F,ce,Y,T,A,D],ue=c.apply(n,Te);return yd(s)&&Ny(ue,Te),ue.placeholder=f,Ry(ue,s,a)}function fd(s){var a=vt[s];return function(c,f){if(c=Hn(c),f=f==null?0:Kt(Ee(f),292),f&&Rv(c)){var g=(He(c)+"e").split("e"),v=a(g[0]+"e"+(+g[1]+f));return g=(He(v)+"e").split("e"),+(g[0]+"e"+(+g[1]-f))}return a(c)}}var mR=so&&1/pc(new so([,-0]))[1]==ve?function(s){return new so(s)}:Pd;function vy(s){return function(a){var c=Gt(a);return c==R?Hf(a):c==k?PO(a):AO(a,s(a))}}function Gi(s,a,c,f,g,v,b,T){var A=a&q;if(!A&&typeof s!="function")throw new $n(l);var D=f?f.length:0;if(D||(a&=~(Q|B),f=g=n),b=b===n?b:yt(Ee(b),0),T=T===n?T:Ee(T),D-=g?g.length:0,a&B){var P=f,F=g;f=g=n}var Y=A?n:gd(s),ne=[s,a,c,f,g,P,F,v,b,T];if(Y&&DR(ne,Y),s=ne[0],a=ne[1],c=ne[2],f=ne[3],g=ne[4],T=ne[9]=ne[9]===n?A?0:s.length:yt(ne[9]-D,0),!T&&a&(H|V)&&(a&=~(H|V)),!a||a==L)var ce=pR(s,a,c);else a==H||a==V?ce=gR(s,a,T):(a==Q||a==(L|Q))&&!g.length?ce=_R(s,a,c,f):ce=Mc.apply(n,ne);var Te=Y?Jv:Ny;return Ry(Te(ce,ne),s,a)}function yy(s,a,c,f){return s===n||ii(s,ro[c])&&!qe.call(f,c)?a:s}function Ey(s,a,c,f,g,v){return lt(s)&&lt(a)&&(v.set(a,s),Dc(s,a,n,Ey,v),v.delete(a)),s}function vR(s){return Ra(s)?n:s}function by(s,a,c,f,g,v){var b=c&S,T=s.length,A=a.length;if(T!=A&&!(b&&A>T))return!1;var D=v.get(s),P=v.get(a);if(D&&P)return D==a&&P==s;var F=-1,Y=!0,ne=c&O?new is:n;for(v.set(s,a),v.set(a,s);++F<T;){var ce=s[F],Te=a[F];if(f)var ue=b?f(Te,ce,F,a,s,v):f(ce,Te,F,s,a,v);if(ue!==n){if(ue)continue;Y=!1;break}if(ne){if(!Mf(a,function(Re,Pe){if(!_a(ne,Pe)&&(ce===Re||g(ce,Re,c,f,v)))return ne.push(Pe)})){Y=!1;break}}else if(!(ce===Te||g(ce,Te,c,f,v))){Y=!1;break}}return v.delete(s),v.delete(a),Y}function yR(s,a,c,f,g,v,b){switch(c){case Se:if(s.byteLength!=a.byteLength||s.byteOffset!=a.byteOffset)return!1;s=s.buffer,a=a.buffer;case Le:return!(s.byteLength!=a.byteLength||!v(new Ec(s),new Ec(a)));case jt:case qt:case M:return ii(+s,+a);case Pn:return s.name==a.name&&s.message==a.message;case j:case te:return s==a+"";case R:var T=Hf;case k:var A=f&S;if(T||(T=pc),s.size!=a.size&&!A)return!1;var D=b.get(s);if(D)return D==a;f|=O,b.set(s,a);var P=by(T(s),T(a),f,g,v,b);return b.delete(s),P;case J:if(ba)return ba.call(s)==ba.call(a)}return!1}function ER(s,a,c,f,g,v){var b=c&S,T=dd(s),A=T.length,D=dd(a),P=D.length;if(A!=P&&!b)return!1;for(var F=A;F--;){var Y=T[F];if(!(b?Y in a:qe.call(a,Y)))return!1}var ne=v.get(s),ce=v.get(a);if(ne&&ce)return ne==a&&ce==s;var Te=!0;v.set(s,a),v.set(a,s);for(var ue=b;++F<A;){Y=T[F];var Re=s[Y],Pe=a[Y];if(f)var Tn=b?f(Pe,Re,Y,a,s,v):f(Re,Pe,Y,s,a,v);if(!(Tn===n?Re===Pe||g(Re,Pe,c,f,v):Tn)){Te=!1;break}ue||(ue=Y=="constructor")}if(Te&&!ue){var tn=s.constructor,Cn=a.constructor;tn!=Cn&&"constructor"in s&&"constructor"in a&&!(typeof tn=="function"&&tn instanceof tn&&typeof Cn=="function"&&Cn instanceof Cn)&&(Te=!1)}return v.delete(s),v.delete(a),Te}function zi(s){return bd(Sy(s,n,My),s+"")}function dd(s){return Wv(s,It,md)}function pd(s){return Wv(s,dn,wy)}var gd=Ac?function(s){return Ac.get(s)}:Pd;function Bc(s){for(var a=s.name+"",c=oo[a],f=qe.call(oo,a)?c.length:0;f--;){var g=c[f],v=g.func;if(v==null||v==s)return g.name}return a}function uo(s){var a=qe.call(m,"placeholder")?m:s;return a.placeholder}function le(){var s=m.iteratee||Dd;return s=s===Dd?jv:s,arguments.length?s(arguments[0],arguments[1]):s}function Wc(s,a){var c=s.__data__;return OR(a)?c[typeof a=="string"?"string":"hash"]:c.map}function _d(s){for(var a=It(s),c=a.length;c--;){var f=a[c],g=s[f];a[c]=[f,g,Iy(g)]}return a}function os(s,a){var c=xO(s,a);return Vv(c)?c:n}function bR(s){var a=qe.call(s,ts),c=s[ts];try{s[ts]=n;var f=!0}catch{}var g=vc.call(s);return f&&(a?s[ts]=c:delete s[ts]),g}var md=jf?function(s){return s==null?[]:(s=Ye(s),_r(jf(s),function(a){return Ov.call(s,a)}))}:kd,wy=jf?function(s){for(var a=[];s;)mr(a,md(s)),s=bc(s);return a}:kd,Gt=Zt;(qf&&Gt(new qf(new ArrayBuffer(1)))!=Se||va&&Gt(new va)!=R||Kf&&Gt(Kf.resolve())!=z||so&&Gt(new so)!=k||ya&&Gt(new ya)!=ae)&&(Gt=function(s){var a=Zt(s),c=a==W?s.constructor:n,f=c?as(c):"";if(f)switch(f){case iN:return Se;case rN:return R;case sN:return z;case oN:return k;case aN:return ae}return a});function wR(s,a,c){for(var f=-1,g=c.length;++f<g;){var v=c[f],b=v.size;switch(v.type){case"drop":s+=b;break;case"dropRight":a-=b;break;case"take":a=Kt(a,s+b);break;case"takeRight":s=yt(s,a-b);break}}return{start:s,end:a}}function TR(s){var a=s.match(NS);return a?a[1].split(RS):[]}function Ty(s,a,c){a=wr(a,s);for(var f=-1,g=a.length,v=!1;++f<g;){var b=wi(a[f]);if(!(v=s!=null&&c(s,b)))break;s=s[b]}return v||++f!=g?v:(g=s==null?0:s.length,!!g&&zc(g)&&Yi(b,g)&&(me(s)||ls(s)))}function CR(s){var a=s.length,c=new s.constructor(a);return a&&typeof s[0]=="string"&&qe.call(s,"index")&&(c.index=s.index,c.input=s.input),c}function Cy(s){return typeof s.constructor=="function"&&!Oa(s)?ao(bc(s)):{}}function IR(s,a,c){var f=s.constructor;switch(a){case Le:return ud(s);case jt:case qt:return new f(+s);case Se:return lR(s,c);case st:case Jt:case yi:case Xs:case Vi:case Qs:case Pt:case un:case Js:return oy(s,c);case R:return new f;case M:case te:return new f(s);case j:return cR(s);case k:return new f;case J:return uR(s)}}function AR(s,a){var c=a.length;if(!c)return s;var f=c-1;return a[f]=(c>1?"& ":"")+a[f],a=a.join(c>2?", ":" "),s.replace(OS,`{
/* [wrapped with `+a+`] */
`)}function SR(s){return me(s)||ls(s)||!!(Nv&&s&&s[Nv])}function Yi(s,a){var c=typeof s;return a=a??we,!!a&&(c=="number"||c!="symbol"&&US.test(s))&&s>-1&&s%1==0&&s<a}function en(s,a,c){if(!lt(c))return!1;var f=typeof a;return(f=="number"?fn(c)&&Yi(a,c.length):f=="string"&&a in c)?ii(c[a],s):!1}function vd(s,a){if(me(s))return!1;var c=typeof s;return c=="number"||c=="symbol"||c=="boolean"||s==null||wn(s)?!0:CS.test(s)||!TS.test(s)||a!=null&&s in Ye(a)}function OR(s){var a=typeof s;return a=="string"||a=="number"||a=="symbol"||a=="boolean"?s!=="__proto__":s===null}function yd(s){var a=Bc(s),c=m[a];if(typeof c!="function"||!(a in De.prototype))return!1;if(s===c)return!0;var f=gd(c);return!!f&&s===f[0]}function NR(s){return!!Iv&&Iv in s}var RR=_c?Xi:Md;function Oa(s){var a=s&&s.constructor,c=typeof a=="function"&&a.prototype||ro;return s===c}function Iy(s){return s===s&&!lt(s)}function Ay(s,a){return function(c){return c==null?!1:c[s]===a&&(a!==n||s in Ye(c))}}function xR(s){var a=Kc(s,function(f){return c.size===d&&c.clear(),f}),c=a.cache;return a}function DR(s,a){var c=s[1],f=a[1],g=c|f,v=g<(L|q|Z),b=f==Z&&c==H||f==Z&&c==X&&s[7].length<=a[8]||f==(Z|X)&&a[7].length<=a[8]&&c==H;if(!(v||b))return s;f&L&&(s[2]=a[2],g|=c&L?0:oe);var T=a[3];if(T){var A=s[3];s[3]=A?ly(A,T,a[4]):T,s[4]=A?vr(s[3],p):a[4]}return T=a[5],T&&(A=s[5],s[5]=A?cy(A,T,a[6]):T,s[6]=A?vr(s[5],p):a[6]),T=a[7],T&&(s[7]=T),f&Z&&(s[8]=s[8]==null?a[8]:Kt(s[8],a[8])),s[9]==null&&(s[9]=a[9]),s[0]=a[0],s[1]=g,s}function LR(s){var a=[];if(s!=null)for(var c in Ye(s))a.push(c);return a}function PR(s){return vc.call(s)}function Sy(s,a,c){return a=yt(a===n?s.length-1:a,0),function(){for(var f=arguments,g=-1,v=yt(f.length-a,0),b=N(v);++g<v;)b[g]=f[a+g];g=-1;for(var T=N(a+1);++g<a;)T[g]=f[g];return T[a]=c(b),yn(s,this,T)}}function Oy(s,a){return a.length<2?s:ss(s,Bn(a,0,-1))}function kR(s,a){for(var c=s.length,f=Kt(a.length,c),g=hn(s);f--;){var v=a[f];s[f]=Yi(v,c)?g[v]:n}return s}function Ed(s,a){if(!(a==="constructor"&&typeof s[a]=="function")&&a!="__proto__")return s[a]}var Ny=xy(Jv),Na=XO||function(s,a){return kt.setTimeout(s,a)},bd=xy(rR);function Ry(s,a,c){var f=a+"";return bd(s,AR(f,MR(TR(f),c)))}function xy(s){var a=0,c=0;return function(){var f=eN(),g=ze-(f-c);if(c=f,g>0){if(++a>=rt)return arguments[0]}else a=0;return s.apply(n,arguments)}}function Hc(s,a){var c=-1,f=s.length,g=f-1;for(a=a===n?f:a;++c<a;){var v=id(c,g),b=s[v];s[v]=s[c],s[c]=b}return s.length=a,s}var Dy=xR(function(s){var a=[];return s.charCodeAt(0)===46&&a.push(""),s.replace(IS,function(c,f,g,v){a.push(g?v.replace(LS,"$1"):f||c)}),a});function wi(s){if(typeof s=="string"||wn(s))return s;var a=s+"";return a=="0"&&1/s==-ve?"-0":a}function as(s){if(s!=null){try{return mc.call(s)}catch{}try{return s+""}catch{}}return""}function MR(s,a){return Mn(vi,function(c){var f="_."+c[0];a&c[1]&&!fc(s,f)&&s.push(f)}),s.sort()}function Ly(s){if(s instanceof De)return s.clone();var a=new Fn(s.__wrapped__,s.__chain__);return a.__actions__=hn(s.__actions__),a.__index__=s.__index__,a.__values__=s.__values__,a}function $R(s,a,c){(c?en(s,a,c):a===n)?a=1:a=yt(Ee(a),0);var f=s==null?0:s.length;if(!f||a<1)return[];for(var g=0,v=0,b=N(Cc(f/a));g<f;)b[v++]=Bn(s,g,g+=a);return b}function FR(s){for(var a=-1,c=s==null?0:s.length,f=0,g=[];++a<c;){var v=s[a];v&&(g[f++]=v)}return g}function UR(){var s=arguments.length;if(!s)return[];for(var a=N(s-1),c=arguments[0],f=s;f--;)a[f-1]=arguments[f];return mr(me(c)?hn(c):[c],Mt(a,1))}var BR=Ae(function(s,a){return pt(s)?Ta(s,Mt(a,1,pt,!0)):[]}),WR=Ae(function(s,a){var c=Wn(a);return pt(c)&&(c=n),pt(s)?Ta(s,Mt(a,1,pt,!0),le(c,2)):[]}),HR=Ae(function(s,a){var c=Wn(a);return pt(c)&&(c=n),pt(s)?Ta(s,Mt(a,1,pt,!0),n,c):[]});function VR(s,a,c){var f=s==null?0:s.length;return f?(a=c||a===n?1:Ee(a),Bn(s,a<0?0:a,f)):[]}function jR(s,a,c){var f=s==null?0:s.length;return f?(a=c||a===n?1:Ee(a),a=f-a,Bn(s,0,a<0?0:a)):[]}function qR(s,a){return s&&s.length?Pc(s,le(a,3),!0,!0):[]}function KR(s,a){return s&&s.length?Pc(s,le(a,3),!0):[]}function GR(s,a,c,f){var g=s==null?0:s.length;return g?(c&&typeof c!="number"&&en(s,a,c)&&(c=0,f=g),UN(s,a,c,f)):[]}function Py(s,a,c){var f=s==null?0:s.length;if(!f)return-1;var g=c==null?0:Ee(c);return g<0&&(g=yt(f+g,0)),dc(s,le(a,3),g)}function ky(s,a,c){var f=s==null?0:s.length;if(!f)return-1;var g=f-1;return c!==n&&(g=Ee(c),g=c<0?yt(f+g,0):Kt(g,f-1)),dc(s,le(a,3),g,!0)}function My(s){var a=s==null?0:s.length;return a?Mt(s,1):[]}function zR(s){var a=s==null?0:s.length;return a?Mt(s,ve):[]}function YR(s,a){var c=s==null?0:s.length;return c?(a=a===n?1:Ee(a),Mt(s,a)):[]}function XR(s){for(var a=-1,c=s==null?0:s.length,f={};++a<c;){var g=s[a];f[g[0]]=g[1]}return f}function $y(s){return s&&s.length?s[0]:n}function QR(s,a,c){var f=s==null?0:s.length;if(!f)return-1;var g=c==null?0:Ee(c);return g<0&&(g=yt(f+g,0)),eo(s,a,g)}function JR(s){var a=s==null?0:s.length;return a?Bn(s,0,-1):[]}var ZR=Ae(function(s){var a=ot(s,ld);return a.length&&a[0]===s[0]?Jf(a):[]}),ex=Ae(function(s){var a=Wn(s),c=ot(s,ld);return a===Wn(c)?a=n:c.pop(),c.length&&c[0]===s[0]?Jf(c,le(a,2)):[]}),tx=Ae(function(s){var a=Wn(s),c=ot(s,ld);return a=typeof a=="function"?a:n,a&&c.pop(),c.length&&c[0]===s[0]?Jf(c,n,a):[]});function nx(s,a){return s==null?"":JO.call(s,a)}function Wn(s){var a=s==null?0:s.length;return a?s[a-1]:n}function ix(s,a,c){var f=s==null?0:s.length;if(!f)return-1;var g=f;return c!==n&&(g=Ee(c),g=g<0?yt(f+g,0):Kt(g,f-1)),a===a?MO(s,a,g):dc(s,mv,g,!0)}function rx(s,a){return s&&s.length?zv(s,Ee(a)):n}var sx=Ae(Fy);function Fy(s,a){return s&&s.length&&a&&a.length?nd(s,a):s}function ox(s,a,c){return s&&s.length&&a&&a.length?nd(s,a,le(c,2)):s}function ax(s,a,c){return s&&s.length&&a&&a.length?nd(s,a,n,c):s}var lx=zi(function(s,a){var c=s==null?0:s.length,f=zf(s,a);return Qv(s,ot(a,function(g){return Yi(g,c)?+g:g}).sort(ay)),f});function cx(s,a){var c=[];if(!(s&&s.length))return c;var f=-1,g=[],v=s.length;for(a=le(a,3);++f<v;){var b=s[f];a(b,f,s)&&(c.push(b),g.push(f))}return Qv(s,g),c}function wd(s){return s==null?s:nN.call(s)}function ux(s,a,c){var f=s==null?0:s.length;return f?(c&&typeof c!="number"&&en(s,a,c)?(a=0,c=f):(a=a==null?0:Ee(a),c=c===n?f:Ee(c)),Bn(s,a,c)):[]}function hx(s,a){return Lc(s,a)}function fx(s,a,c){return sd(s,a,le(c,2))}function dx(s,a){var c=s==null?0:s.length;if(c){var f=Lc(s,a);if(f<c&&ii(s[f],a))return f}return-1}function px(s,a){return Lc(s,a,!0)}function gx(s,a,c){return sd(s,a,le(c,2),!0)}function _x(s,a){var c=s==null?0:s.length;if(c){var f=Lc(s,a,!0)-1;if(ii(s[f],a))return f}return-1}function mx(s){return s&&s.length?Zv(s):[]}function vx(s,a){return s&&s.length?Zv(s,le(a,2)):[]}function yx(s){var a=s==null?0:s.length;return a?Bn(s,1,a):[]}function Ex(s,a,c){return s&&s.length?(a=c||a===n?1:Ee(a),Bn(s,0,a<0?0:a)):[]}function bx(s,a,c){var f=s==null?0:s.length;return f?(a=c||a===n?1:Ee(a),a=f-a,Bn(s,a<0?0:a,f)):[]}function wx(s,a){return s&&s.length?Pc(s,le(a,3),!1,!0):[]}function Tx(s,a){return s&&s.length?Pc(s,le(a,3)):[]}var Cx=Ae(function(s){return br(Mt(s,1,pt,!0))}),Ix=Ae(function(s){var a=Wn(s);return pt(a)&&(a=n),br(Mt(s,1,pt,!0),le(a,2))}),Ax=Ae(function(s){var a=Wn(s);return a=typeof a=="function"?a:n,br(Mt(s,1,pt,!0),n,a)});function Sx(s){return s&&s.length?br(s):[]}function Ox(s,a){return s&&s.length?br(s,le(a,2)):[]}function Nx(s,a){return a=typeof a=="function"?a:n,s&&s.length?br(s,n,a):[]}function Td(s){if(!(s&&s.length))return[];var a=0;return s=_r(s,function(c){if(pt(c))return a=yt(c.length,a),!0}),Bf(a,function(c){return ot(s,$f(c))})}function Uy(s,a){if(!(s&&s.length))return[];var c=Td(s);return a==null?c:ot(c,function(f){return yn(a,n,f)})}var Rx=Ae(function(s,a){return pt(s)?Ta(s,a):[]}),xx=Ae(function(s){return ad(_r(s,pt))}),Dx=Ae(function(s){var a=Wn(s);return pt(a)&&(a=n),ad(_r(s,pt),le(a,2))}),Lx=Ae(function(s){var a=Wn(s);return a=typeof a=="function"?a:n,ad(_r(s,pt),n,a)}),Px=Ae(Td);function kx(s,a){return iy(s||[],a||[],wa)}function Mx(s,a){return iy(s||[],a||[],Aa)}var $x=Ae(function(s){var a=s.length,c=a>1?s[a-1]:n;return c=typeof c=="function"?(s.pop(),c):n,Uy(s,c)});function By(s){var a=m(s);return a.__chain__=!0,a}function Fx(s,a){return a(s),s}function Vc(s,a){return a(s)}var Ux=zi(function(s){var a=s.length,c=a?s[0]:0,f=this.__wrapped__,g=function(v){return zf(v,s)};return a>1||this.__actions__.length||!(f instanceof De)||!Yi(c)?this.thru(g):(f=f.slice(c,+c+(a?1:0)),f.__actions__.push({func:Vc,args:[g],thisArg:n}),new Fn(f,this.__chain__).thru(function(v){return a&&!v.length&&v.push(n),v}))});function Bx(){return By(this)}function Wx(){return new Fn(this.value(),this.__chain__)}function Hx(){this.__values__===n&&(this.__values__=eE(this.value()));var s=this.__index__>=this.__values__.length,a=s?n:this.__values__[this.__index__++];return{done:s,value:a}}function Vx(){return this}function jx(s){for(var a,c=this;c instanceof Oc;){var f=Ly(c);f.__index__=0,f.__values__=n,a?g.__wrapped__=f:a=f;var g=f;c=c.__wrapped__}return g.__wrapped__=s,a}function qx(){var s=this.__wrapped__;if(s instanceof De){var a=s;return this.__actions__.length&&(a=new De(this)),a=a.reverse(),a.__actions__.push({func:Vc,args:[wd],thisArg:n}),new Fn(a,this.__chain__)}return this.thru(wd)}function Kx(){return ny(this.__wrapped__,this.__actions__)}var Gx=kc(function(s,a,c){qe.call(s,c)?++s[c]:Ki(s,c,1)});function zx(s,a,c){var f=me(s)?gv:FN;return c&&en(s,a,c)&&(a=n),f(s,le(a,3))}function Yx(s,a){var c=me(s)?_r:Uv;return c(s,le(a,3))}var Xx=dy(Py),Qx=dy(ky);function Jx(s,a){return Mt(jc(s,a),1)}function Zx(s,a){return Mt(jc(s,a),ve)}function e1(s,a,c){return c=c===n?1:Ee(c),Mt(jc(s,a),c)}function Wy(s,a){var c=me(s)?Mn:Er;return c(s,le(a,3))}function Hy(s,a){var c=me(s)?yO:Fv;return c(s,le(a,3))}var t1=kc(function(s,a,c){qe.call(s,c)?s[c].push(a):Ki(s,c,[a])});function n1(s,a,c,f){s=fn(s)?s:fo(s),c=c&&!f?Ee(c):0;var g=s.length;return c<0&&(c=yt(g+c,0)),Yc(s)?c<=g&&s.indexOf(a,c)>-1:!!g&&eo(s,a,c)>-1}var i1=Ae(function(s,a,c){var f=-1,g=typeof a=="function",v=fn(s)?N(s.length):[];return Er(s,function(b){v[++f]=g?yn(a,b,c):Ca(b,a,c)}),v}),r1=kc(function(s,a,c){Ki(s,c,a)});function jc(s,a){var c=me(s)?ot:qv;return c(s,le(a,3))}function s1(s,a,c,f){return s==null?[]:(me(a)||(a=a==null?[]:[a]),c=f?n:c,me(c)||(c=c==null?[]:[c]),Yv(s,a,c))}var o1=kc(function(s,a,c){s[c?0:1].push(a)},function(){return[[],[]]});function a1(s,a,c){var f=me(s)?kf:yv,g=arguments.length<3;return f(s,le(a,4),c,g,Er)}function l1(s,a,c){var f=me(s)?EO:yv,g=arguments.length<3;return f(s,le(a,4),c,g,Fv)}function c1(s,a){var c=me(s)?_r:Uv;return c(s,Gc(le(a,3)))}function u1(s){var a=me(s)?Pv:nR;return a(s)}function h1(s,a,c){(c?en(s,a,c):a===n)?a=1:a=Ee(a);var f=me(s)?LN:iR;return f(s,a)}function f1(s){var a=me(s)?PN:sR;return a(s)}function d1(s){if(s==null)return 0;if(fn(s))return Yc(s)?no(s):s.length;var a=Gt(s);return a==R||a==k?s.size:ed(s).length}function p1(s,a,c){var f=me(s)?Mf:oR;return c&&en(s,a,c)&&(a=n),f(s,le(a,3))}var g1=Ae(function(s,a){if(s==null)return[];var c=a.length;return c>1&&en(s,a[0],a[1])?a=[]:c>2&&en(a[0],a[1],a[2])&&(a=[a[0]]),Yv(s,Mt(a,1),[])}),qc=YO||function(){return kt.Date.now()};function _1(s,a){if(typeof a!="function")throw new $n(l);return s=Ee(s),function(){if(--s<1)return a.apply(this,arguments)}}function Vy(s,a,c){return a=c?n:a,a=s&&a==null?s.length:a,Gi(s,Z,n,n,n,n,a)}function jy(s,a){var c;if(typeof a!="function")throw new $n(l);return s=Ee(s),function(){return--s>0&&(c=a.apply(this,arguments)),s<=1&&(a=n),c}}var Cd=Ae(function(s,a,c){var f=L;if(c.length){var g=vr(c,uo(Cd));f|=Q}return Gi(s,f,a,c,g)}),qy=Ae(function(s,a,c){var f=L|q;if(c.length){var g=vr(c,uo(qy));f|=Q}return Gi(a,f,s,c,g)});function Ky(s,a,c){a=c?n:a;var f=Gi(s,H,n,n,n,n,n,a);return f.placeholder=Ky.placeholder,f}function Gy(s,a,c){a=c?n:a;var f=Gi(s,V,n,n,n,n,n,a);return f.placeholder=Gy.placeholder,f}function zy(s,a,c){var f,g,v,b,T,A,D=0,P=!1,F=!1,Y=!0;if(typeof s!="function")throw new $n(l);a=Hn(a)||0,lt(c)&&(P=!!c.leading,F="maxWait"in c,v=F?yt(Hn(c.maxWait)||0,a):v,Y="trailing"in c?!!c.trailing:Y);function ne(gt){var ri=f,Ji=g;return f=g=n,D=gt,b=s.apply(Ji,ri),b}function ce(gt){return D=gt,T=Na(Re,a),P?ne(gt):b}function Te(gt){var ri=gt-A,Ji=gt-D,dE=a-ri;return F?Kt(dE,v-Ji):dE}function ue(gt){var ri=gt-A,Ji=gt-D;return A===n||ri>=a||ri<0||F&&Ji>=v}function Re(){var gt=qc();if(ue(gt))return Pe(gt);T=Na(Re,Te(gt))}function Pe(gt){return T=n,Y&&f?ne(gt):(f=g=n,b)}function Tn(){T!==n&&ry(T),D=0,f=A=g=T=n}function tn(){return T===n?b:Pe(qc())}function Cn(){var gt=qc(),ri=ue(gt);if(f=arguments,g=this,A=gt,ri){if(T===n)return ce(A);if(F)return ry(T),T=Na(Re,a),ne(A)}return T===n&&(T=Na(Re,a)),b}return Cn.cancel=Tn,Cn.flush=tn,Cn}var m1=Ae(function(s,a){return $v(s,1,a)}),v1=Ae(function(s,a,c){return $v(s,Hn(a)||0,c)});function y1(s){return Gi(s,de)}function Kc(s,a){if(typeof s!="function"||a!=null&&typeof a!="function")throw new $n(l);var c=function(){var f=arguments,g=a?a.apply(this,f):f[0],v=c.cache;if(v.has(g))return v.get(g);var b=s.apply(this,f);return c.cache=v.set(g,b)||v,b};return c.cache=new(Kc.Cache||qi),c}Kc.Cache=qi;function Gc(s){if(typeof s!="function")throw new $n(l);return function(){var a=arguments;switch(a.length){case 0:return!s.call(this);case 1:return!s.call(this,a[0]);case 2:return!s.call(this,a[0],a[1]);case 3:return!s.call(this,a[0],a[1],a[2])}return!s.apply(this,a)}}function E1(s){return jy(2,s)}var b1=aR(function(s,a){a=a.length==1&&me(a[0])?ot(a[0],En(le())):ot(Mt(a,1),En(le()));var c=a.length;return Ae(function(f){for(var g=-1,v=Kt(f.length,c);++g<v;)f[g]=a[g].call(this,f[g]);return yn(s,this,f)})}),Id=Ae(function(s,a){var c=vr(a,uo(Id));return Gi(s,Q,n,a,c)}),Yy=Ae(function(s,a){var c=vr(a,uo(Yy));return Gi(s,B,n,a,c)}),w1=zi(function(s,a){return Gi(s,X,n,n,n,a)});function T1(s,a){if(typeof s!="function")throw new $n(l);return a=a===n?a:Ee(a),Ae(s,a)}function C1(s,a){if(typeof s!="function")throw new $n(l);return a=a==null?0:yt(Ee(a),0),Ae(function(c){var f=c[a],g=Tr(c,0,a);return f&&mr(g,f),yn(s,this,g)})}function I1(s,a,c){var f=!0,g=!0;if(typeof s!="function")throw new $n(l);return lt(c)&&(f="leading"in c?!!c.leading:f,g="trailing"in c?!!c.trailing:g),zy(s,a,{leading:f,maxWait:a,trailing:g})}function A1(s){return Vy(s,1)}function S1(s,a){return Id(cd(a),s)}function O1(){if(!arguments.length)return[];var s=arguments[0];return me(s)?s:[s]}function N1(s){return Un(s,E)}function R1(s,a){return a=typeof a=="function"?a:n,Un(s,E,a)}function x1(s){return Un(s,_|E)}function D1(s,a){return a=typeof a=="function"?a:n,Un(s,_|E,a)}function L1(s,a){return a==null||Mv(s,a,It(a))}function ii(s,a){return s===a||s!==s&&a!==a}var P1=Uc(Qf),k1=Uc(function(s,a){return s>=a}),ls=Hv(function(){return arguments}())?Hv:function(s){return ht(s)&&qe.call(s,"callee")&&!Ov.call(s,"callee")},me=N.isArray,M1=cv?En(cv):jN;function fn(s){return s!=null&&zc(s.length)&&!Xi(s)}function pt(s){return ht(s)&&fn(s)}function $1(s){return s===!0||s===!1||ht(s)&&Zt(s)==jt}var Cr=QO||Md,F1=uv?En(uv):qN;function U1(s){return ht(s)&&s.nodeType===1&&!Ra(s)}function B1(s){if(s==null)return!0;if(fn(s)&&(me(s)||typeof s=="string"||typeof s.splice=="function"||Cr(s)||ho(s)||ls(s)))return!s.length;var a=Gt(s);if(a==R||a==k)return!s.size;if(Oa(s))return!ed(s).length;for(var c in s)if(qe.call(s,c))return!1;return!0}function W1(s,a){return Ia(s,a)}function H1(s,a,c){c=typeof c=="function"?c:n;var f=c?c(s,a):n;return f===n?Ia(s,a,n,c):!!f}function Ad(s){if(!ht(s))return!1;var a=Zt(s);return a==Pn||a==Zr||typeof s.message=="string"&&typeof s.name=="string"&&!Ra(s)}function V1(s){return typeof s=="number"&&Rv(s)}function Xi(s){if(!lt(s))return!1;var a=Zt(s);return a==w||a==C||a==ei||a==K}function Xy(s){return typeof s=="number"&&s==Ee(s)}function zc(s){return typeof s=="number"&&s>-1&&s%1==0&&s<=we}function lt(s){var a=typeof s;return s!=null&&(a=="object"||a=="function")}function ht(s){return s!=null&&typeof s=="object"}var Qy=hv?En(hv):GN;function j1(s,a){return s===a||Zf(s,a,_d(a))}function q1(s,a,c){return c=typeof c=="function"?c:n,Zf(s,a,_d(a),c)}function K1(s){return Jy(s)&&s!=+s}function G1(s){if(RR(s))throw new _e(o);return Vv(s)}function z1(s){return s===null}function Y1(s){return s==null}function Jy(s){return typeof s=="number"||ht(s)&&Zt(s)==M}function Ra(s){if(!ht(s)||Zt(s)!=W)return!1;var a=bc(s);if(a===null)return!0;var c=qe.call(a,"constructor")&&a.constructor;return typeof c=="function"&&c instanceof c&&mc.call(c)==qO}var Sd=fv?En(fv):zN;function X1(s){return Xy(s)&&s>=-we&&s<=we}var Zy=dv?En(dv):YN;function Yc(s){return typeof s=="string"||!me(s)&&ht(s)&&Zt(s)==te}function wn(s){return typeof s=="symbol"||ht(s)&&Zt(s)==J}var ho=pv?En(pv):XN;function Q1(s){return s===n}function J1(s){return ht(s)&&Gt(s)==ae}function Z1(s){return ht(s)&&Zt(s)==ye}var eD=Uc(td),tD=Uc(function(s,a){return s<=a});function eE(s){if(!s)return[];if(fn(s))return Yc(s)?ti(s):hn(s);if(ma&&s[ma])return LO(s[ma]());var a=Gt(s),c=a==R?Hf:a==k?pc:fo;return c(s)}function Qi(s){if(!s)return s===0?s:0;if(s=Hn(s),s===ve||s===-ve){var a=s<0?-1:1;return a*Dt}return s===s?s:0}function Ee(s){var a=Qi(s),c=a%1;return a===a?c?a-c:a:0}function tE(s){return s?rs(Ee(s),0,ut):0}function Hn(s){if(typeof s=="number")return s;if(wn(s))return cn;if(lt(s)){var a=typeof s.valueOf=="function"?s.valueOf():s;s=lt(a)?a+"":a}if(typeof s!="string")return s===0?s:+s;s=Ev(s);var c=MS.test(s);return c||FS.test(s)?_O(s.slice(2),c?2:8):kS.test(s)?cn:+s}function nE(s){return bi(s,dn(s))}function nD(s){return s?rs(Ee(s),-we,we):s===0?s:0}function He(s){return s==null?"":bn(s)}var iD=lo(function(s,a){if(Oa(a)||fn(a)){bi(a,It(a),s);return}for(var c in a)qe.call(a,c)&&wa(s,c,a[c])}),iE=lo(function(s,a){bi(a,dn(a),s)}),Xc=lo(function(s,a,c,f){bi(a,dn(a),s,f)}),rD=lo(function(s,a,c,f){bi(a,It(a),s,f)}),sD=zi(zf);function oD(s,a){var c=ao(s);return a==null?c:kv(c,a)}var aD=Ae(function(s,a){s=Ye(s);var c=-1,f=a.length,g=f>2?a[2]:n;for(g&&en(a[0],a[1],g)&&(f=1);++c<f;)for(var v=a[c],b=dn(v),T=-1,A=b.length;++T<A;){var D=b[T],P=s[D];(P===n||ii(P,ro[D])&&!qe.call(s,D))&&(s[D]=v[D])}return s}),lD=Ae(function(s){return s.push(n,Ey),yn(rE,n,s)});function cD(s,a){return _v(s,le(a,3),Ei)}function uD(s,a){return _v(s,le(a,3),Xf)}function hD(s,a){return s==null?s:Yf(s,le(a,3),dn)}function fD(s,a){return s==null?s:Bv(s,le(a,3),dn)}function dD(s,a){return s&&Ei(s,le(a,3))}function pD(s,a){return s&&Xf(s,le(a,3))}function gD(s){return s==null?[]:xc(s,It(s))}function _D(s){return s==null?[]:xc(s,dn(s))}function Od(s,a,c){var f=s==null?n:ss(s,a);return f===n?c:f}function mD(s,a){return s!=null&&Ty(s,a,BN)}function Nd(s,a){return s!=null&&Ty(s,a,WN)}var vD=gy(function(s,a,c){a!=null&&typeof a.toString!="function"&&(a=vc.call(a)),s[a]=c},xd(pn)),yD=gy(function(s,a,c){a!=null&&typeof a.toString!="function"&&(a=vc.call(a)),qe.call(s,a)?s[a].push(c):s[a]=[c]},le),ED=Ae(Ca);function It(s){return fn(s)?Lv(s):ed(s)}function dn(s){return fn(s)?Lv(s,!0):QN(s)}function bD(s,a){var c={};return a=le(a,3),Ei(s,function(f,g,v){Ki(c,a(f,g,v),f)}),c}function wD(s,a){var c={};return a=le(a,3),Ei(s,function(f,g,v){Ki(c,g,a(f,g,v))}),c}var TD=lo(function(s,a,c){Dc(s,a,c)}),rE=lo(function(s,a,c,f){Dc(s,a,c,f)}),CD=zi(function(s,a){var c={};if(s==null)return c;var f=!1;a=ot(a,function(v){return v=wr(v,s),f||(f=v.length>1),v}),bi(s,pd(s),c),f&&(c=Un(c,_|y|E,vR));for(var g=a.length;g--;)od(c,a[g]);return c});function ID(s,a){return sE(s,Gc(le(a)))}var AD=zi(function(s,a){return s==null?{}:ZN(s,a)});function sE(s,a){if(s==null)return{};var c=ot(pd(s),function(f){return[f]});return a=le(a),Xv(s,c,function(f,g){return a(f,g[0])})}function SD(s,a,c){a=wr(a,s);var f=-1,g=a.length;for(g||(g=1,s=n);++f<g;){var v=s==null?n:s[wi(a[f])];v===n&&(f=g,v=c),s=Xi(v)?v.call(s):v}return s}function OD(s,a,c){return s==null?s:Aa(s,a,c)}function ND(s,a,c,f){return f=typeof f=="function"?f:n,s==null?s:Aa(s,a,c,f)}var oE=vy(It),aE=vy(dn);function RD(s,a,c){var f=me(s),g=f||Cr(s)||ho(s);if(a=le(a,4),c==null){var v=s&&s.constructor;g?c=f?new v:[]:lt(s)?c=Xi(v)?ao(bc(s)):{}:c={}}return(g?Mn:Ei)(s,function(b,T,A){return a(c,b,T,A)}),c}function xD(s,a){return s==null?!0:od(s,a)}function DD(s,a,c){return s==null?s:ty(s,a,cd(c))}function LD(s,a,c,f){return f=typeof f=="function"?f:n,s==null?s:ty(s,a,cd(c),f)}function fo(s){return s==null?[]:Wf(s,It(s))}function PD(s){return s==null?[]:Wf(s,dn(s))}function kD(s,a,c){return c===n&&(c=a,a=n),c!==n&&(c=Hn(c),c=c===c?c:0),a!==n&&(a=Hn(a),a=a===a?a:0),rs(Hn(s),a,c)}function MD(s,a,c){return a=Qi(a),c===n?(c=a,a=0):c=Qi(c),s=Hn(s),HN(s,a,c)}function $D(s,a,c){if(c&&typeof c!="boolean"&&en(s,a,c)&&(a=c=n),c===n&&(typeof a=="boolean"?(c=a,a=n):typeof s=="boolean"&&(c=s,s=n)),s===n&&a===n?(s=0,a=1):(s=Qi(s),a===n?(a=s,s=0):a=Qi(a)),s>a){var f=s;s=a,a=f}if(c||s%1||a%1){var g=xv();return Kt(s+g*(a-s+gO("1e-"+((g+"").length-1))),a)}return id(s,a)}var FD=co(function(s,a,c){return a=a.toLowerCase(),s+(c?lE(a):a)});function lE(s){return Rd(He(s).toLowerCase())}function cE(s){return s=He(s),s&&s.replace(BS,OO).replace(sO,"")}function UD(s,a,c){s=He(s),a=bn(a);var f=s.length;c=c===n?f:rs(Ee(c),0,f);var g=c;return c-=a.length,c>=0&&s.slice(c,g)==a}function BD(s){return s=He(s),s&&ES.test(s)?s.replace(Bm,NO):s}function WD(s){return s=He(s),s&&AS.test(s)?s.replace(If,"\\$&"):s}var HD=co(function(s,a,c){return s+(c?"-":"")+a.toLowerCase()}),VD=co(function(s,a,c){return s+(c?" ":"")+a.toLowerCase()}),jD=fy("toLowerCase");function qD(s,a,c){s=He(s),a=Ee(a);var f=a?no(s):0;if(!a||f>=a)return s;var g=(a-f)/2;return Fc(Ic(g),c)+s+Fc(Cc(g),c)}function KD(s,a,c){s=He(s),a=Ee(a);var f=a?no(s):0;return a&&f<a?s+Fc(a-f,c):s}function GD(s,a,c){s=He(s),a=Ee(a);var f=a?no(s):0;return a&&f<a?Fc(a-f,c)+s:s}function zD(s,a,c){return c||a==null?a=0:a&&(a=+a),tN(He(s).replace(Af,""),a||0)}function YD(s,a,c){return(c?en(s,a,c):a===n)?a=1:a=Ee(a),rd(He(s),a)}function XD(){var s=arguments,a=He(s[0]);return s.length<3?a:a.replace(s[1],s[2])}var QD=co(function(s,a,c){return s+(c?"_":"")+a.toLowerCase()});function JD(s,a,c){return c&&typeof c!="number"&&en(s,a,c)&&(a=c=n),c=c===n?ut:c>>>0,c?(s=He(s),s&&(typeof a=="string"||a!=null&&!Sd(a))&&(a=bn(a),!a&&to(s))?Tr(ti(s),0,c):s.split(a,c)):[]}var ZD=co(function(s,a,c){return s+(c?" ":"")+Rd(a)});function eL(s,a,c){return s=He(s),c=c==null?0:rs(Ee(c),0,s.length),a=bn(a),s.slice(c,c+a.length)==a}function tL(s,a,c){var f=m.templateSettings;c&&en(s,a,c)&&(a=n),s=He(s),a=Xc({},a,f,yy);var g=Xc({},a.imports,f.imports,yy),v=It(g),b=Wf(g,v),T,A,D=0,P=a.interpolate||cc,F="__p += '",Y=Vf((a.escape||cc).source+"|"+P.source+"|"+(P===Wm?PS:cc).source+"|"+(a.evaluate||cc).source+"|$","g"),ne="//# sourceURL="+(qe.call(a,"sourceURL")?(a.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++uO+"]")+`
`;s.replace(Y,function(ue,Re,Pe,Tn,tn,Cn){return Pe||(Pe=Tn),F+=s.slice(D,Cn).replace(WS,RO),Re&&(T=!0,F+=`' +
__e(`+Re+`) +
'`),tn&&(A=!0,F+=`';
`+tn+`;
__p += '`),Pe&&(F+=`' +
((__t = (`+Pe+`)) == null ? '' : __t) +
'`),D=Cn+ue.length,ue}),F+=`';
`;var ce=qe.call(a,"variable")&&a.variable;if(!ce)F=`with (obj) {
`+F+`
}
`;else if(DS.test(ce))throw new _e(u);F=(A?F.replace(_S,""):F).replace(mS,"$1").replace(vS,"$1;"),F="function("+(ce||"obj")+`) {
`+(ce?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(T?", __e = _.escape":"")+(A?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+F+`return __p
}`;var Te=hE(function(){return Be(v,ne+"return "+F).apply(n,b)});if(Te.source=F,Ad(Te))throw Te;return Te}function nL(s){return He(s).toLowerCase()}function iL(s){return He(s).toUpperCase()}function rL(s,a,c){if(s=He(s),s&&(c||a===n))return Ev(s);if(!s||!(a=bn(a)))return s;var f=ti(s),g=ti(a),v=bv(f,g),b=wv(f,g)+1;return Tr(f,v,b).join("")}function sL(s,a,c){if(s=He(s),s&&(c||a===n))return s.slice(0,Cv(s)+1);if(!s||!(a=bn(a)))return s;var f=ti(s),g=wv(f,ti(a))+1;return Tr(f,0,g).join("")}function oL(s,a,c){if(s=He(s),s&&(c||a===n))return s.replace(Af,"");if(!s||!(a=bn(a)))return s;var f=ti(s),g=bv(f,ti(a));return Tr(f,g).join("")}function aL(s,a){var c=pe,f=$e;if(lt(a)){var g="separator"in a?a.separator:g;c="length"in a?Ee(a.length):c,f="omission"in a?bn(a.omission):f}s=He(s);var v=s.length;if(to(s)){var b=ti(s);v=b.length}if(c>=v)return s;var T=c-no(f);if(T<1)return f;var A=b?Tr(b,0,T).join(""):s.slice(0,T);if(g===n)return A+f;if(b&&(T+=A.length-T),Sd(g)){if(s.slice(T).search(g)){var D,P=A;for(g.global||(g=Vf(g.source,He(Hm.exec(g))+"g")),g.lastIndex=0;D=g.exec(P);)var F=D.index;A=A.slice(0,F===n?T:F)}}else if(s.indexOf(bn(g),T)!=T){var Y=A.lastIndexOf(g);Y>-1&&(A=A.slice(0,Y))}return A+f}function lL(s){return s=He(s),s&&yS.test(s)?s.replace(Um,$O):s}var cL=co(function(s,a,c){return s+(c?" ":"")+a.toUpperCase()}),Rd=fy("toUpperCase");function uE(s,a,c){return s=He(s),a=c?n:a,a===n?DO(s)?BO(s):TO(s):s.match(a)||[]}var hE=Ae(function(s,a){try{return yn(s,n,a)}catch(c){return Ad(c)?c:new _e(c)}}),uL=zi(function(s,a){return Mn(a,function(c){c=wi(c),Ki(s,c,Cd(s[c],s))}),s});function hL(s){var a=s==null?0:s.length,c=le();return s=a?ot(s,function(f){if(typeof f[1]!="function")throw new $n(l);return[c(f[0]),f[1]]}):[],Ae(function(f){for(var g=-1;++g<a;){var v=s[g];if(yn(v[0],this,f))return yn(v[1],this,f)}})}function fL(s){return $N(Un(s,_))}function xd(s){return function(){return s}}function dL(s,a){return s==null||s!==s?a:s}var pL=py(),gL=py(!0);function pn(s){return s}function Dd(s){return jv(typeof s=="function"?s:Un(s,_))}function _L(s){return Kv(Un(s,_))}function mL(s,a){return Gv(s,Un(a,_))}var vL=Ae(function(s,a){return function(c){return Ca(c,s,a)}}),yL=Ae(function(s,a){return function(c){return Ca(s,c,a)}});function Ld(s,a,c){var f=It(a),g=xc(a,f);c==null&&!(lt(a)&&(g.length||!f.length))&&(c=a,a=s,s=this,g=xc(a,It(a)));var v=!(lt(c)&&"chain"in c)||!!c.chain,b=Xi(s);return Mn(g,function(T){var A=a[T];s[T]=A,b&&(s.prototype[T]=function(){var D=this.__chain__;if(v||D){var P=s(this.__wrapped__),F=P.__actions__=hn(this.__actions__);return F.push({func:A,args:arguments,thisArg:s}),P.__chain__=D,P}return A.apply(s,mr([this.value()],arguments))})}),s}function EL(){return kt._===this&&(kt._=KO),this}function Pd(){}function bL(s){return s=Ee(s),Ae(function(a){return zv(a,s)})}var wL=hd(ot),TL=hd(gv),CL=hd(Mf);function fE(s){return vd(s)?$f(wi(s)):eR(s)}function IL(s){return function(a){return s==null?n:ss(s,a)}}var AL=_y(),SL=_y(!0);function kd(){return[]}function Md(){return!1}function OL(){return{}}function NL(){return""}function RL(){return!0}function xL(s,a){if(s=Ee(s),s<1||s>we)return[];var c=ut,f=Kt(s,ut);a=le(a),s-=ut;for(var g=Bf(f,a);++c<s;)a(c);return g}function DL(s){return me(s)?ot(s,wi):wn(s)?[s]:hn(Dy(He(s)))}function LL(s){var a=++jO;return He(s)+a}var PL=$c(function(s,a){return s+a},0),kL=fd("ceil"),ML=$c(function(s,a){return s/a},1),$L=fd("floor");function FL(s){return s&&s.length?Rc(s,pn,Qf):n}function UL(s,a){return s&&s.length?Rc(s,le(a,2),Qf):n}function BL(s){return vv(s,pn)}function WL(s,a){return vv(s,le(a,2))}function HL(s){return s&&s.length?Rc(s,pn,td):n}function VL(s,a){return s&&s.length?Rc(s,le(a,2),td):n}var jL=$c(function(s,a){return s*a},1),qL=fd("round"),KL=$c(function(s,a){return s-a},0);function GL(s){return s&&s.length?Uf(s,pn):0}function zL(s,a){return s&&s.length?Uf(s,le(a,2)):0}return m.after=_1,m.ary=Vy,m.assign=iD,m.assignIn=iE,m.assignInWith=Xc,m.assignWith=rD,m.at=sD,m.before=jy,m.bind=Cd,m.bindAll=uL,m.bindKey=qy,m.castArray=O1,m.chain=By,m.chunk=$R,m.compact=FR,m.concat=UR,m.cond=hL,m.conforms=fL,m.constant=xd,m.countBy=Gx,m.create=oD,m.curry=Ky,m.curryRight=Gy,m.debounce=zy,m.defaults=aD,m.defaultsDeep=lD,m.defer=m1,m.delay=v1,m.difference=BR,m.differenceBy=WR,m.differenceWith=HR,m.drop=VR,m.dropRight=jR,m.dropRightWhile=qR,m.dropWhile=KR,m.fill=GR,m.filter=Yx,m.flatMap=Jx,m.flatMapDeep=Zx,m.flatMapDepth=e1,m.flatten=My,m.flattenDeep=zR,m.flattenDepth=YR,m.flip=y1,m.flow=pL,m.flowRight=gL,m.fromPairs=XR,m.functions=gD,m.functionsIn=_D,m.groupBy=t1,m.initial=JR,m.intersection=ZR,m.intersectionBy=ex,m.intersectionWith=tx,m.invert=vD,m.invertBy=yD,m.invokeMap=i1,m.iteratee=Dd,m.keyBy=r1,m.keys=It,m.keysIn=dn,m.map=jc,m.mapKeys=bD,m.mapValues=wD,m.matches=_L,m.matchesProperty=mL,m.memoize=Kc,m.merge=TD,m.mergeWith=rE,m.method=vL,m.methodOf=yL,m.mixin=Ld,m.negate=Gc,m.nthArg=bL,m.omit=CD,m.omitBy=ID,m.once=E1,m.orderBy=s1,m.over=wL,m.overArgs=b1,m.overEvery=TL,m.overSome=CL,m.partial=Id,m.partialRight=Yy,m.partition=o1,m.pick=AD,m.pickBy=sE,m.property=fE,m.propertyOf=IL,m.pull=sx,m.pullAll=Fy,m.pullAllBy=ox,m.pullAllWith=ax,m.pullAt=lx,m.range=AL,m.rangeRight=SL,m.rearg=w1,m.reject=c1,m.remove=cx,m.rest=T1,m.reverse=wd,m.sampleSize=h1,m.set=OD,m.setWith=ND,m.shuffle=f1,m.slice=ux,m.sortBy=g1,m.sortedUniq=mx,m.sortedUniqBy=vx,m.split=JD,m.spread=C1,m.tail=yx,m.take=Ex,m.takeRight=bx,m.takeRightWhile=wx,m.takeWhile=Tx,m.tap=Fx,m.throttle=I1,m.thru=Vc,m.toArray=eE,m.toPairs=oE,m.toPairsIn=aE,m.toPath=DL,m.toPlainObject=nE,m.transform=RD,m.unary=A1,m.union=Cx,m.unionBy=Ix,m.unionWith=Ax,m.uniq=Sx,m.uniqBy=Ox,m.uniqWith=Nx,m.unset=xD,m.unzip=Td,m.unzipWith=Uy,m.update=DD,m.updateWith=LD,m.values=fo,m.valuesIn=PD,m.without=Rx,m.words=uE,m.wrap=S1,m.xor=xx,m.xorBy=Dx,m.xorWith=Lx,m.zip=Px,m.zipObject=kx,m.zipObjectDeep=Mx,m.zipWith=$x,m.entries=oE,m.entriesIn=aE,m.extend=iE,m.extendWith=Xc,Ld(m,m),m.add=PL,m.attempt=hE,m.camelCase=FD,m.capitalize=lE,m.ceil=kL,m.clamp=kD,m.clone=N1,m.cloneDeep=x1,m.cloneDeepWith=D1,m.cloneWith=R1,m.conformsTo=L1,m.deburr=cE,m.defaultTo=dL,m.divide=ML,m.endsWith=UD,m.eq=ii,m.escape=BD,m.escapeRegExp=WD,m.every=zx,m.find=Xx,m.findIndex=Py,m.findKey=cD,m.findLast=Qx,m.findLastIndex=ky,m.findLastKey=uD,m.floor=$L,m.forEach=Wy,m.forEachRight=Hy,m.forIn=hD,m.forInRight=fD,m.forOwn=dD,m.forOwnRight=pD,m.get=Od,m.gt=P1,m.gte=k1,m.has=mD,m.hasIn=Nd,m.head=$y,m.identity=pn,m.includes=n1,m.indexOf=QR,m.inRange=MD,m.invoke=ED,m.isArguments=ls,m.isArray=me,m.isArrayBuffer=M1,m.isArrayLike=fn,m.isArrayLikeObject=pt,m.isBoolean=$1,m.isBuffer=Cr,m.isDate=F1,m.isElement=U1,m.isEmpty=B1,m.isEqual=W1,m.isEqualWith=H1,m.isError=Ad,m.isFinite=V1,m.isFunction=Xi,m.isInteger=Xy,m.isLength=zc,m.isMap=Qy,m.isMatch=j1,m.isMatchWith=q1,m.isNaN=K1,m.isNative=G1,m.isNil=Y1,m.isNull=z1,m.isNumber=Jy,m.isObject=lt,m.isObjectLike=ht,m.isPlainObject=Ra,m.isRegExp=Sd,m.isSafeInteger=X1,m.isSet=Zy,m.isString=Yc,m.isSymbol=wn,m.isTypedArray=ho,m.isUndefined=Q1,m.isWeakMap=J1,m.isWeakSet=Z1,m.join=nx,m.kebabCase=HD,m.last=Wn,m.lastIndexOf=ix,m.lowerCase=VD,m.lowerFirst=jD,m.lt=eD,m.lte=tD,m.max=FL,m.maxBy=UL,m.mean=BL,m.meanBy=WL,m.min=HL,m.minBy=VL,m.stubArray=kd,m.stubFalse=Md,m.stubObject=OL,m.stubString=NL,m.stubTrue=RL,m.multiply=jL,m.nth=rx,m.noConflict=EL,m.noop=Pd,m.now=qc,m.pad=qD,m.padEnd=KD,m.padStart=GD,m.parseInt=zD,m.random=$D,m.reduce=a1,m.reduceRight=l1,m.repeat=YD,m.replace=XD,m.result=SD,m.round=qL,m.runInContext=I,m.sample=u1,m.size=d1,m.snakeCase=QD,m.some=p1,m.sortedIndex=hx,m.sortedIndexBy=fx,m.sortedIndexOf=dx,m.sortedLastIndex=px,m.sortedLastIndexBy=gx,m.sortedLastIndexOf=_x,m.startCase=ZD,m.startsWith=eL,m.subtract=KL,m.sum=GL,m.sumBy=zL,m.template=tL,m.times=xL,m.toFinite=Qi,m.toInteger=Ee,m.toLength=tE,m.toLower=nL,m.toNumber=Hn,m.toSafeInteger=nD,m.toString=He,m.toUpper=iL,m.trim=rL,m.trimEnd=sL,m.trimStart=oL,m.truncate=aL,m.unescape=lL,m.uniqueId=LL,m.upperCase=cL,m.upperFirst=Rd,m.each=Wy,m.eachRight=Hy,m.first=$y,Ld(m,function(){var s={};return Ei(m,function(a,c){qe.call(m.prototype,c)||(s[c]=a)}),s}(),{chain:!1}),m.VERSION=i,Mn(["bind","bindKey","curry","curryRight","partial","partialRight"],function(s){m[s].placeholder=m}),Mn(["drop","take"],function(s,a){De.prototype[s]=function(c){c=c===n?1:yt(Ee(c),0);var f=this.__filtered__&&!a?new De(this):this.clone();return f.__filtered__?f.__takeCount__=Kt(c,f.__takeCount__):f.__views__.push({size:Kt(c,ut),type:s+(f.__dir__<0?"Right":"")}),f},De.prototype[s+"Right"]=function(c){return this.reverse()[s](c).reverse()}}),Mn(["filter","map","takeWhile"],function(s,a){var c=a+1,f=c==Vt||c==Ue;De.prototype[s]=function(g){var v=this.clone();return v.__iteratees__.push({iteratee:le(g,3),type:c}),v.__filtered__=v.__filtered__||f,v}}),Mn(["head","last"],function(s,a){var c="take"+(a?"Right":"");De.prototype[s]=function(){return this[c](1).value()[0]}}),Mn(["initial","tail"],function(s,a){var c="drop"+(a?"":"Right");De.prototype[s]=function(){return this.__filtered__?new De(this):this[c](1)}}),De.prototype.compact=function(){return this.filter(pn)},De.prototype.find=function(s){return this.filter(s).head()},De.prototype.findLast=function(s){return this.reverse().find(s)},De.prototype.invokeMap=Ae(function(s,a){return typeof s=="function"?new De(this):this.map(function(c){return Ca(c,s,a)})}),De.prototype.reject=function(s){return this.filter(Gc(le(s)))},De.prototype.slice=function(s,a){s=Ee(s);var c=this;return c.__filtered__&&(s>0||a<0)?new De(c):(s<0?c=c.takeRight(-s):s&&(c=c.drop(s)),a!==n&&(a=Ee(a),c=a<0?c.dropRight(-a):c.take(a-s)),c)},De.prototype.takeRightWhile=function(s){return this.reverse().takeWhile(s).reverse()},De.prototype.toArray=function(){return this.take(ut)},Ei(De.prototype,function(s,a){var c=/^(?:filter|find|map|reject)|While$/.test(a),f=/^(?:head|last)$/.test(a),g=m[f?"take"+(a=="last"?"Right":""):a],v=f||/^find/.test(a);g&&(m.prototype[a]=function(){var b=this.__wrapped__,T=f?[1]:arguments,A=b instanceof De,D=T[0],P=A||me(b),F=function(Re){var Pe=g.apply(m,mr([Re],T));return f&&Y?Pe[0]:Pe};P&&c&&typeof D=="function"&&D.length!=1&&(A=P=!1);var Y=this.__chain__,ne=!!this.__actions__.length,ce=v&&!Y,Te=A&&!ne;if(!v&&P){b=Te?b:new De(this);var ue=s.apply(b,T);return ue.__actions__.push({func:Vc,args:[F],thisArg:n}),new Fn(ue,Y)}return ce&&Te?s.apply(this,T):(ue=this.thru(F),ce?f?ue.value()[0]:ue.value():ue)})}),Mn(["pop","push","shift","sort","splice","unshift"],function(s){var a=gc[s],c=/^(?:push|sort|unshift)$/.test(s)?"tap":"thru",f=/^(?:pop|shift)$/.test(s);m.prototype[s]=function(){var g=arguments;if(f&&!this.__chain__){var v=this.value();return a.apply(me(v)?v:[],g)}return this[c](function(b){return a.apply(me(b)?b:[],g)})}}),Ei(De.prototype,function(s,a){var c=m[a];if(c){var f=c.name+"";qe.call(oo,f)||(oo[f]=[]),oo[f].push({name:a,func:c})}}),oo[Mc(n,q).name]=[{name:"wrapper",func:n}],De.prototype.clone=lN,De.prototype.reverse=cN,De.prototype.value=uN,m.prototype.at=Ux,m.prototype.chain=Bx,m.prototype.commit=Wx,m.prototype.next=Hx,m.prototype.plant=jx,m.prototype.reverse=qx,m.prototype.toJSON=m.prototype.valueOf=m.prototype.value=Kx,m.prototype.first=m.prototype.head,ma&&(m.prototype[ma]=Vx),m},io=WO();es?((es.exports=io)._=io,Df._=io):kt._=io}).call($a)})(zV,Nl);const YV=o_({apiKey:"AIzaSyBJsQeWbln9lR9B-W7jQZVCy9AWZyoe9pQ",authDomain:"tacmap-dev.firebaseapp.com",projectId:"tacmap-dev",storageBucket:"tacmap-dev.appspot.com",messagingSenderId:"278955153095",appId:"1:278955153095:web:dc491f9539c91be1e0d0e2"}),Fa=B0(YV),Nr={GetValue:async t=>(await Xh(li(Fa,t))).val(),Subscribe:(t,e)=>H_(li(Fa,t),n=>{e(n.val())}),UpdateValues:async t=>{await Iu(li(Fa),t)},SetValue:async(t,e)=>{const n=li(Fa,t);await Us(n,e)},DeleteValue:async t=>{await Ns(li(Fa,t))},resetDB:async()=>{console.log("reset");let t=Ze.uuidv4(),e=Ze.uuidv4(),n=Ze.uuidv4(),i=Ze.uuidv4(),r=Ze.uuidv4(),o=Ze.uuidv4(),l=Ze.uuidv4(),u=Ze.uuidv4();await Nr.SetValue("/",{rooms:{[Ii.roomId]:{gameMode:"TDM",roomName:"Cement Factory",password:"test",map:{location:{lat:36.1390106,long:-115.1765157},zoom:10},spotDurationMS:5e3,teamIds:{[Ze.uuidv4()]:t,[Ze.uuidv4()]:e}}},teams:{[e]:{index:1,teamName:"OPFOR",squadIds:[n,i,r]},[t]:{index:0,teamName:"BLUFOR",squadIds:[o,l,u]}},squads:{[n]:{squadName:"Squad 1"},[i]:{squadName:"Squad 2"},[r]:{squadName:"Squad 3"},[o]:{squadName:"Squad 1"},[l]:{squadName:"Squad 2"},[u]:{squadName:"Squad 3"}},users:{[Ze.uuidv4()]:{username:"emptyUser"}}})}},XV={data(){return{time:""}},methods:{openOffCanvas(){qn.emit("toggle-sidebar")},SetLocation(){qn.emit("set-location")},resetDB(){Nr.resetDB()}},created(){setInterval(()=>{let t=new Date;this.time=`${t.toLocaleTimeString("it-IT")}`},1e3)}};const Jl=(t,e)=>{const n=t.__vccOpts||t;for(const[i,r]of e)n[i]=r;return n},vm=t=>(Oh("data-v-3337e30a"),t=t(),Nh(),t),QV={class:"container-fluid"},JV=vm(()=>be("i",{class:"bi bi-list"},null,-1)),ZV=[JV],ej=vm(()=>be("i",{class:"bi bi-geo-fill"},null,-1)),tj=[ej],nj=vm(()=>be("i",{class:"bi bi-database-gear"},null,-1)),ij=[nj],rj={class:"clock d-inline"};function sj(t,e,n,i,r,o){return Ve(),Je("div",QV,[be("button",{class:"btn btn-sm btn-primary m-1 d-inline",type:"button",onClick:e[0]||(e[0]=l=>o.openOffCanvas())},ZV),t.$store.getters.useGPS?An("",!0):(Ve(),Je("button",{key:0,class:"btn btn-sm btn-primary m-1 d-inline",type:"button",onClick:e[1]||(e[1]=l=>o.SetLocation())},tj)),t.$store.getters.isAdmin?(Ve(),Je("button",{key:1,class:"btn btn-sm btn-primary m-1 d-inline",type:"button",onClick:e[2]||(e[2]=l=>o.resetDB())},ij)):An("",!0),be("span",rj,vs(r.time),1)])}const oj=Jl(XV,[["render",sj],["__scopeId","data-v-3337e30a"]]);var an="top",xn="bottom",Dn="right",ln="left",gf="auto",fa=[an,xn,Dn,ln],Bs="start",Ko="end",oA="clippingParents",ym="viewport",bo="popper",aA="reference",Ng=fa.reduce(function(t,e){return t.concat([e+"-"+Bs,e+"-"+Ko])},[]),Em=[].concat(fa,[gf]).reduce(function(t,e){return t.concat([e,e+"-"+Bs,e+"-"+Ko])},[]),lA="beforeRead",cA="read",uA="afterRead",hA="beforeMain",fA="main",dA="afterMain",pA="beforeWrite",gA="write",_A="afterWrite",mA=[lA,cA,uA,hA,fA,dA,pA,gA,_A];function $i(t){return t?(t.nodeName||"").toLowerCase():null}function Jn(t){if(t==null)return window;if(t.toString()!=="[object Window]"){var e=t.ownerDocument;return e&&e.defaultView||window}return t}function Ws(t){var e=Jn(t).Element;return t instanceof e||t instanceof Element}function zn(t){var e=Jn(t).HTMLElement;return t instanceof e||t instanceof HTMLElement}function bm(t){if(typeof ShadowRoot>"u")return!1;var e=Jn(t).ShadowRoot;return t instanceof e||t instanceof ShadowRoot}function aj(t){var e=t.state;Object.keys(e.elements).forEach(function(n){var i=e.styles[n]||{},r=e.attributes[n]||{},o=e.elements[n];!zn(o)||!$i(o)||(Object.assign(o.style,i),Object.keys(r).forEach(function(l){var u=r[l];u===!1?o.removeAttribute(l):o.setAttribute(l,u===!0?"":u)}))})}function lj(t){var e=t.state,n={popper:{position:e.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(e.elements.popper.style,n.popper),e.styles=n,e.elements.arrow&&Object.assign(e.elements.arrow.style,n.arrow),function(){Object.keys(e.elements).forEach(function(i){var r=e.elements[i],o=e.attributes[i]||{},l=Object.keys(e.styles.hasOwnProperty(i)?e.styles[i]:n[i]),u=l.reduce(function(h,d){return h[d]="",h},{});!zn(r)||!$i(r)||(Object.assign(r.style,u),Object.keys(o).forEach(function(h){r.removeAttribute(h)}))})}}const wm={name:"applyStyles",enabled:!0,phase:"write",fn:aj,effect:lj,requires:["computeStyles"]};function xi(t){return t.split("-")[0]}var xs=Math.max,gh=Math.min,Go=Math.round;function Rg(){var t=navigator.userAgentData;return t!=null&&t.brands?t.brands.map(function(e){return e.brand+"/"+e.version}).join(" "):navigator.userAgent}function vA(){return!/^((?!chrome|android).)*safari/i.test(Rg())}function zo(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!1);var i=t.getBoundingClientRect(),r=1,o=1;e&&zn(t)&&(r=t.offsetWidth>0&&Go(i.width)/t.offsetWidth||1,o=t.offsetHeight>0&&Go(i.height)/t.offsetHeight||1);var l=Ws(t)?Jn(t):window,u=l.visualViewport,h=!vA()&&n,d=(i.left+(h&&u?u.offsetLeft:0))/r,p=(i.top+(h&&u?u.offsetTop:0))/o,_=i.width/r,y=i.height/o;return{width:_,height:y,top:p,right:d+_,bottom:p+y,left:d,x:d,y:p}}function Tm(t){var e=zo(t),n=t.offsetWidth,i=t.offsetHeight;return Math.abs(e.width-n)<=1&&(n=e.width),Math.abs(e.height-i)<=1&&(i=e.height),{x:t.offsetLeft,y:t.offsetTop,width:n,height:i}}function yA(t,e){var n=e.getRootNode&&e.getRootNode();if(t.contains(e))return!0;if(n&&bm(n)){var i=e;do{if(i&&t.isSameNode(i))return!0;i=i.parentNode||i.host}while(i)}return!1}function hr(t){return Jn(t).getComputedStyle(t)}function cj(t){return["table","td","th"].indexOf($i(t))>=0}function Xr(t){return((Ws(t)?t.ownerDocument:t.document)||window.document).documentElement}function _f(t){return $i(t)==="html"?t:t.assignedSlot||t.parentNode||(bm(t)?t.host:null)||Xr(t)}function vw(t){return!zn(t)||hr(t).position==="fixed"?null:t.offsetParent}function uj(t){var e=/firefox/i.test(Rg()),n=/Trident/i.test(Rg());if(n&&zn(t)){var i=hr(t);if(i.position==="fixed")return null}var r=_f(t);for(bm(r)&&(r=r.host);zn(r)&&["html","body"].indexOf($i(r))<0;){var o=hr(r);if(o.transform!=="none"||o.perspective!=="none"||o.contain==="paint"||["transform","perspective"].indexOf(o.willChange)!==-1||e&&o.willChange==="filter"||e&&o.filter&&o.filter!=="none")return r;r=r.parentNode}return null}function Zl(t){for(var e=Jn(t),n=vw(t);n&&cj(n)&&hr(n).position==="static";)n=vw(n);return n&&($i(n)==="html"||$i(n)==="body"&&hr(n).position==="static")?e:n||uj(t)||e}function Cm(t){return["top","bottom"].indexOf(t)>=0?"x":"y"}function il(t,e,n){return xs(t,gh(e,n))}function hj(t,e,n){var i=il(t,e,n);return i>n?n:i}function EA(){return{top:0,right:0,bottom:0,left:0}}function bA(t){return Object.assign({},EA(),t)}function wA(t,e){return e.reduce(function(n,i){return n[i]=t,n},{})}var fj=function(e,n){return e=typeof e=="function"?e(Object.assign({},n.rects,{placement:n.placement})):e,bA(typeof e!="number"?e:wA(e,fa))};function dj(t){var e,n=t.state,i=t.name,r=t.options,o=n.elements.arrow,l=n.modifiersData.popperOffsets,u=xi(n.placement),h=Cm(u),d=[ln,Dn].indexOf(u)>=0,p=d?"height":"width";if(!(!o||!l)){var _=fj(r.padding,n),y=Tm(o),E=h==="y"?an:ln,S=h==="y"?xn:Dn,O=n.rects.reference[p]+n.rects.reference[h]-l[h]-n.rects.popper[p],L=l[h]-n.rects.reference[h],q=Zl(o),oe=q?h==="y"?q.clientHeight||0:q.clientWidth||0:0,H=O/2-L/2,V=_[E],Q=oe-y[p]-_[S],B=oe/2-y[p]/2+H,Z=il(V,B,Q),X=h;n.modifiersData[i]=(e={},e[X]=Z,e.centerOffset=Z-B,e)}}function pj(t){var e=t.state,n=t.options,i=n.element,r=i===void 0?"[data-popper-arrow]":i;r!=null&&(typeof r=="string"&&(r=e.elements.popper.querySelector(r),!r)||yA(e.elements.popper,r)&&(e.elements.arrow=r))}const TA={name:"arrow",enabled:!0,phase:"main",fn:dj,effect:pj,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function Yo(t){return t.split("-")[1]}var gj={top:"auto",right:"auto",bottom:"auto",left:"auto"};function _j(t){var e=t.x,n=t.y,i=window,r=i.devicePixelRatio||1;return{x:Go(e*r)/r||0,y:Go(n*r)/r||0}}function yw(t){var e,n=t.popper,i=t.popperRect,r=t.placement,o=t.variation,l=t.offsets,u=t.position,h=t.gpuAcceleration,d=t.adaptive,p=t.roundOffsets,_=t.isFixed,y=l.x,E=y===void 0?0:y,S=l.y,O=S===void 0?0:S,L=typeof p=="function"?p({x:E,y:O}):{x:E,y:O};E=L.x,O=L.y;var q=l.hasOwnProperty("x"),oe=l.hasOwnProperty("y"),H=ln,V=an,Q=window;if(d){var B=Zl(n),Z="clientHeight",X="clientWidth";if(B===Jn(n)&&(B=Xr(n),hr(B).position!=="static"&&u==="absolute"&&(Z="scrollHeight",X="scrollWidth")),B=B,r===an||(r===ln||r===Dn)&&o===Ko){V=xn;var de=_&&B===Q&&Q.visualViewport?Q.visualViewport.height:B[Z];O-=de-i.height,O*=h?1:-1}if(r===ln||(r===an||r===xn)&&o===Ko){H=Dn;var pe=_&&B===Q&&Q.visualViewport?Q.visualViewport.width:B[X];E-=pe-i.width,E*=h?1:-1}}var $e=Object.assign({position:u},d&&gj),rt=p===!0?_j({x:E,y:O}):{x:E,y:O};if(E=rt.x,O=rt.y,h){var ze;return Object.assign({},$e,(ze={},ze[V]=oe?"0":"",ze[H]=q?"0":"",ze.transform=(Q.devicePixelRatio||1)<=1?"translate("+E+"px, "+O+"px)":"translate3d("+E+"px, "+O+"px, 0)",ze))}return Object.assign({},$e,(e={},e[V]=oe?O+"px":"",e[H]=q?E+"px":"",e.transform="",e))}function mj(t){var e=t.state,n=t.options,i=n.gpuAcceleration,r=i===void 0?!0:i,o=n.adaptive,l=o===void 0?!0:o,u=n.roundOffsets,h=u===void 0?!0:u,d={placement:xi(e.placement),variation:Yo(e.placement),popper:e.elements.popper,popperRect:e.rects.popper,gpuAcceleration:r,isFixed:e.options.strategy==="fixed"};e.modifiersData.popperOffsets!=null&&(e.styles.popper=Object.assign({},e.styles.popper,yw(Object.assign({},d,{offsets:e.modifiersData.popperOffsets,position:e.options.strategy,adaptive:l,roundOffsets:h})))),e.modifiersData.arrow!=null&&(e.styles.arrow=Object.assign({},e.styles.arrow,yw(Object.assign({},d,{offsets:e.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:h})))),e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-placement":e.placement})}const Im={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:mj,data:{}};var hu={passive:!0};function vj(t){var e=t.state,n=t.instance,i=t.options,r=i.scroll,o=r===void 0?!0:r,l=i.resize,u=l===void 0?!0:l,h=Jn(e.elements.popper),d=[].concat(e.scrollParents.reference,e.scrollParents.popper);return o&&d.forEach(function(p){p.addEventListener("scroll",n.update,hu)}),u&&h.addEventListener("resize",n.update,hu),function(){o&&d.forEach(function(p){p.removeEventListener("scroll",n.update,hu)}),u&&h.removeEventListener("resize",n.update,hu)}}const Am={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:vj,data:{}};var yj={left:"right",right:"left",bottom:"top",top:"bottom"};function Au(t){return t.replace(/left|right|bottom|top/g,function(e){return yj[e]})}var Ej={start:"end",end:"start"};function Ew(t){return t.replace(/start|end/g,function(e){return Ej[e]})}function Sm(t){var e=Jn(t),n=e.pageXOffset,i=e.pageYOffset;return{scrollLeft:n,scrollTop:i}}function Om(t){return zo(Xr(t)).left+Sm(t).scrollLeft}function bj(t,e){var n=Jn(t),i=Xr(t),r=n.visualViewport,o=i.clientWidth,l=i.clientHeight,u=0,h=0;if(r){o=r.width,l=r.height;var d=vA();(d||!d&&e==="fixed")&&(u=r.offsetLeft,h=r.offsetTop)}return{width:o,height:l,x:u+Om(t),y:h}}function wj(t){var e,n=Xr(t),i=Sm(t),r=(e=t.ownerDocument)==null?void 0:e.body,o=xs(n.scrollWidth,n.clientWidth,r?r.scrollWidth:0,r?r.clientWidth:0),l=xs(n.scrollHeight,n.clientHeight,r?r.scrollHeight:0,r?r.clientHeight:0),u=-i.scrollLeft+Om(t),h=-i.scrollTop;return hr(r||n).direction==="rtl"&&(u+=xs(n.clientWidth,r?r.clientWidth:0)-o),{width:o,height:l,x:u,y:h}}function Nm(t){var e=hr(t),n=e.overflow,i=e.overflowX,r=e.overflowY;return/auto|scroll|overlay|hidden/.test(n+r+i)}function CA(t){return["html","body","#document"].indexOf($i(t))>=0?t.ownerDocument.body:zn(t)&&Nm(t)?t:CA(_f(t))}function rl(t,e){var n;e===void 0&&(e=[]);var i=CA(t),r=i===((n=t.ownerDocument)==null?void 0:n.body),o=Jn(i),l=r?[o].concat(o.visualViewport||[],Nm(i)?i:[]):i,u=e.concat(l);return r?u:u.concat(rl(_f(l)))}function xg(t){return Object.assign({},t,{left:t.x,top:t.y,right:t.x+t.width,bottom:t.y+t.height})}function Tj(t,e){var n=zo(t,!1,e==="fixed");return n.top=n.top+t.clientTop,n.left=n.left+t.clientLeft,n.bottom=n.top+t.clientHeight,n.right=n.left+t.clientWidth,n.width=t.clientWidth,n.height=t.clientHeight,n.x=n.left,n.y=n.top,n}function bw(t,e,n){return e===ym?xg(bj(t,n)):Ws(e)?Tj(e,n):xg(wj(Xr(t)))}function Cj(t){var e=rl(_f(t)),n=["absolute","fixed"].indexOf(hr(t).position)>=0,i=n&&zn(t)?Zl(t):t;return Ws(i)?e.filter(function(r){return Ws(r)&&yA(r,i)&&$i(r)!=="body"}):[]}function Ij(t,e,n,i){var r=e==="clippingParents"?Cj(t):[].concat(e),o=[].concat(r,[n]),l=o[0],u=o.reduce(function(h,d){var p=bw(t,d,i);return h.top=xs(p.top,h.top),h.right=gh(p.right,h.right),h.bottom=gh(p.bottom,h.bottom),h.left=xs(p.left,h.left),h},bw(t,l,i));return u.width=u.right-u.left,u.height=u.bottom-u.top,u.x=u.left,u.y=u.top,u}function IA(t){var e=t.reference,n=t.element,i=t.placement,r=i?xi(i):null,o=i?Yo(i):null,l=e.x+e.width/2-n.width/2,u=e.y+e.height/2-n.height/2,h;switch(r){case an:h={x:l,y:e.y-n.height};break;case xn:h={x:l,y:e.y+e.height};break;case Dn:h={x:e.x+e.width,y:u};break;case ln:h={x:e.x-n.width,y:u};break;default:h={x:e.x,y:e.y}}var d=r?Cm(r):null;if(d!=null){var p=d==="y"?"height":"width";switch(o){case Bs:h[d]=h[d]-(e[p]/2-n[p]/2);break;case Ko:h[d]=h[d]+(e[p]/2-n[p]/2);break}}return h}function Xo(t,e){e===void 0&&(e={});var n=e,i=n.placement,r=i===void 0?t.placement:i,o=n.strategy,l=o===void 0?t.strategy:o,u=n.boundary,h=u===void 0?oA:u,d=n.rootBoundary,p=d===void 0?ym:d,_=n.elementContext,y=_===void 0?bo:_,E=n.altBoundary,S=E===void 0?!1:E,O=n.padding,L=O===void 0?0:O,q=bA(typeof L!="number"?L:wA(L,fa)),oe=y===bo?aA:bo,H=t.rects.popper,V=t.elements[S?oe:y],Q=Ij(Ws(V)?V:V.contextElement||Xr(t.elements.popper),h,p,l),B=zo(t.elements.reference),Z=IA({reference:B,element:H,strategy:"absolute",placement:r}),X=xg(Object.assign({},H,Z)),de=y===bo?X:B,pe={top:Q.top-de.top+q.top,bottom:de.bottom-Q.bottom+q.bottom,left:Q.left-de.left+q.left,right:de.right-Q.right+q.right},$e=t.modifiersData.offset;if(y===bo&&$e){var rt=$e[r];Object.keys(pe).forEach(function(ze){var Vt=[Dn,xn].indexOf(ze)>=0?1:-1,Ln=[an,xn].indexOf(ze)>=0?"y":"x";pe[ze]+=rt[Ln]*Vt})}return pe}function Aj(t,e){e===void 0&&(e={});var n=e,i=n.placement,r=n.boundary,o=n.rootBoundary,l=n.padding,u=n.flipVariations,h=n.allowedAutoPlacements,d=h===void 0?Em:h,p=Yo(i),_=p?u?Ng:Ng.filter(function(S){return Yo(S)===p}):fa,y=_.filter(function(S){return d.indexOf(S)>=0});y.length===0&&(y=_);var E=y.reduce(function(S,O){return S[O]=Xo(t,{placement:O,boundary:r,rootBoundary:o,padding:l})[xi(O)],S},{});return Object.keys(E).sort(function(S,O){return E[S]-E[O]})}function Sj(t){if(xi(t)===gf)return[];var e=Au(t);return[Ew(t),e,Ew(e)]}function Oj(t){var e=t.state,n=t.options,i=t.name;if(!e.modifiersData[i]._skip){for(var r=n.mainAxis,o=r===void 0?!0:r,l=n.altAxis,u=l===void 0?!0:l,h=n.fallbackPlacements,d=n.padding,p=n.boundary,_=n.rootBoundary,y=n.altBoundary,E=n.flipVariations,S=E===void 0?!0:E,O=n.allowedAutoPlacements,L=e.options.placement,q=xi(L),oe=q===L,H=h||(oe||!S?[Au(L)]:Sj(L)),V=[L].concat(H).reduce(function(vi,Lt){return vi.concat(xi(Lt)===gf?Aj(e,{placement:Lt,boundary:p,rootBoundary:_,padding:d,flipVariations:S,allowedAutoPlacements:O}):Lt)},[]),Q=e.rects.reference,B=e.rects.popper,Z=new Map,X=!0,de=V[0],pe=0;pe<V.length;pe++){var $e=V[pe],rt=xi($e),ze=Yo($e)===Bs,Vt=[an,xn].indexOf(rt)>=0,Ln=Vt?"width":"height",Ue=Xo(e,{placement:$e,boundary:p,rootBoundary:_,altBoundary:y,padding:d}),ve=Vt?ze?Dn:ln:ze?xn:an;Q[Ln]>B[Ln]&&(ve=Au(ve));var we=Au(ve),Dt=[];if(o&&Dt.push(Ue[rt]<=0),u&&Dt.push(Ue[ve]<=0,Ue[we]<=0),Dt.every(function(vi){return vi})){de=$e,X=!1;break}Z.set($e,Dt)}if(X)for(var cn=S?3:1,ut=function(Lt){var mt=V.find(function(ei){var jt=Z.get(ei);if(jt)return jt.slice(0,Lt).every(function(qt){return qt})});if(mt)return de=mt,"break"},Ct=cn;Ct>0;Ct--){var Hi=ut(Ct);if(Hi==="break")break}e.placement!==de&&(e.modifiersData[i]._skip=!0,e.placement=de,e.reset=!0)}}const AA={name:"flip",enabled:!0,phase:"main",fn:Oj,requiresIfExists:["offset"],data:{_skip:!1}};function ww(t,e,n){return n===void 0&&(n={x:0,y:0}),{top:t.top-e.height-n.y,right:t.right-e.width+n.x,bottom:t.bottom-e.height+n.y,left:t.left-e.width-n.x}}function Tw(t){return[an,Dn,xn,ln].some(function(e){return t[e]>=0})}function Nj(t){var e=t.state,n=t.name,i=e.rects.reference,r=e.rects.popper,o=e.modifiersData.preventOverflow,l=Xo(e,{elementContext:"reference"}),u=Xo(e,{altBoundary:!0}),h=ww(l,i),d=ww(u,r,o),p=Tw(h),_=Tw(d);e.modifiersData[n]={referenceClippingOffsets:h,popperEscapeOffsets:d,isReferenceHidden:p,hasPopperEscaped:_},e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-reference-hidden":p,"data-popper-escaped":_})}const SA={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:Nj};function Rj(t,e,n){var i=xi(t),r=[ln,an].indexOf(i)>=0?-1:1,o=typeof n=="function"?n(Object.assign({},e,{placement:t})):n,l=o[0],u=o[1];return l=l||0,u=(u||0)*r,[ln,Dn].indexOf(i)>=0?{x:u,y:l}:{x:l,y:u}}function xj(t){var e=t.state,n=t.options,i=t.name,r=n.offset,o=r===void 0?[0,0]:r,l=Em.reduce(function(p,_){return p[_]=Rj(_,e.rects,o),p},{}),u=l[e.placement],h=u.x,d=u.y;e.modifiersData.popperOffsets!=null&&(e.modifiersData.popperOffsets.x+=h,e.modifiersData.popperOffsets.y+=d),e.modifiersData[i]=l}const OA={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:xj};function Dj(t){var e=t.state,n=t.name;e.modifiersData[n]=IA({reference:e.rects.reference,element:e.rects.popper,strategy:"absolute",placement:e.placement})}const Rm={name:"popperOffsets",enabled:!0,phase:"read",fn:Dj,data:{}};function Lj(t){return t==="x"?"y":"x"}function Pj(t){var e=t.state,n=t.options,i=t.name,r=n.mainAxis,o=r===void 0?!0:r,l=n.altAxis,u=l===void 0?!1:l,h=n.boundary,d=n.rootBoundary,p=n.altBoundary,_=n.padding,y=n.tether,E=y===void 0?!0:y,S=n.tetherOffset,O=S===void 0?0:S,L=Xo(e,{boundary:h,rootBoundary:d,padding:_,altBoundary:p}),q=xi(e.placement),oe=Yo(e.placement),H=!oe,V=Cm(q),Q=Lj(V),B=e.modifiersData.popperOffsets,Z=e.rects.reference,X=e.rects.popper,de=typeof O=="function"?O(Object.assign({},e.rects,{placement:e.placement})):O,pe=typeof de=="number"?{mainAxis:de,altAxis:de}:Object.assign({mainAxis:0,altAxis:0},de),$e=e.modifiersData.offset?e.modifiersData.offset[e.placement]:null,rt={x:0,y:0};if(B){if(o){var ze,Vt=V==="y"?an:ln,Ln=V==="y"?xn:Dn,Ue=V==="y"?"height":"width",ve=B[V],we=ve+L[Vt],Dt=ve-L[Ln],cn=E?-X[Ue]/2:0,ut=oe===Bs?Z[Ue]:X[Ue],Ct=oe===Bs?-X[Ue]:-Z[Ue],Hi=e.elements.arrow,vi=E&&Hi?Tm(Hi):{width:0,height:0},Lt=e.modifiersData["arrow#persistent"]?e.modifiersData["arrow#persistent"].padding:EA(),mt=Lt[Vt],ei=Lt[Ln],jt=il(0,Z[Ue],vi[Ue]),qt=H?Z[Ue]/2-cn-jt-mt-pe.mainAxis:ut-jt-mt-pe.mainAxis,Zr=H?-Z[Ue]/2+cn+jt+ei+pe.mainAxis:Ct+jt+ei+pe.mainAxis,Pn=e.elements.arrow&&Zl(e.elements.arrow),w=Pn?V==="y"?Pn.clientTop||0:Pn.clientLeft||0:0,C=(ze=$e==null?void 0:$e[V])!=null?ze:0,R=ve+qt-C-w,M=ve+Zr-C,$=il(E?gh(we,R):we,ve,E?xs(Dt,M):Dt);B[V]=$,rt[V]=$-ve}if(u){var W,z=V==="x"?an:ln,K=V==="x"?xn:Dn,j=B[Q],k=Q==="y"?"height":"width",te=j+L[z],J=j-L[K],re=[an,ln].indexOf(q)!==-1,ae=(W=$e==null?void 0:$e[Q])!=null?W:0,ye=re?te:j-Z[k]-X[k]-ae+pe.altAxis,Le=re?j+Z[k]+X[k]-ae-pe.altAxis:J,Se=E&&re?hj(ye,j,Le):il(E?ye:te,j,E?Le:J);B[Q]=Se,rt[Q]=Se-j}e.modifiersData[i]=rt}}const NA={name:"preventOverflow",enabled:!0,phase:"main",fn:Pj,requiresIfExists:["offset"]};function kj(t){return{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}}function Mj(t){return t===Jn(t)||!zn(t)?Sm(t):kj(t)}function $j(t){var e=t.getBoundingClientRect(),n=Go(e.width)/t.offsetWidth||1,i=Go(e.height)/t.offsetHeight||1;return n!==1||i!==1}function Fj(t,e,n){n===void 0&&(n=!1);var i=zn(e),r=zn(e)&&$j(e),o=Xr(e),l=zo(t,r,n),u={scrollLeft:0,scrollTop:0},h={x:0,y:0};return(i||!i&&!n)&&(($i(e)!=="body"||Nm(o))&&(u=Mj(e)),zn(e)?(h=zo(e,!0),h.x+=e.clientLeft,h.y+=e.clientTop):o&&(h.x=Om(o))),{x:l.left+u.scrollLeft-h.x,y:l.top+u.scrollTop-h.y,width:l.width,height:l.height}}function Uj(t){var e=new Map,n=new Set,i=[];t.forEach(function(o){e.set(o.name,o)});function r(o){n.add(o.name);var l=[].concat(o.requires||[],o.requiresIfExists||[]);l.forEach(function(u){if(!n.has(u)){var h=e.get(u);h&&r(h)}}),i.push(o)}return t.forEach(function(o){n.has(o.name)||r(o)}),i}function Bj(t){var e=Uj(t);return mA.reduce(function(n,i){return n.concat(e.filter(function(r){return r.phase===i}))},[])}function Wj(t){var e;return function(){return e||(e=new Promise(function(n){Promise.resolve().then(function(){e=void 0,n(t())})})),e}}function Hj(t){var e=t.reduce(function(n,i){var r=n[i.name];return n[i.name]=r?Object.assign({},r,i,{options:Object.assign({},r.options,i.options),data:Object.assign({},r.data,i.data)}):i,n},{});return Object.keys(e).map(function(n){return e[n]})}var Cw={placement:"bottom",modifiers:[],strategy:"absolute"};function Iw(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return!e.some(function(i){return!(i&&typeof i.getBoundingClientRect=="function")})}function mf(t){t===void 0&&(t={});var e=t,n=e.defaultModifiers,i=n===void 0?[]:n,r=e.defaultOptions,o=r===void 0?Cw:r;return function(u,h,d){d===void 0&&(d=o);var p={placement:"bottom",orderedModifiers:[],options:Object.assign({},Cw,o),modifiersData:{},elements:{reference:u,popper:h},attributes:{},styles:{}},_=[],y=!1,E={state:p,setOptions:function(q){var oe=typeof q=="function"?q(p.options):q;O(),p.options=Object.assign({},o,p.options,oe),p.scrollParents={reference:Ws(u)?rl(u):u.contextElement?rl(u.contextElement):[],popper:rl(h)};var H=Bj(Hj([].concat(i,p.options.modifiers)));return p.orderedModifiers=H.filter(function(V){return V.enabled}),S(),E.update()},forceUpdate:function(){if(!y){var q=p.elements,oe=q.reference,H=q.popper;if(Iw(oe,H)){p.rects={reference:Fj(oe,Zl(H),p.options.strategy==="fixed"),popper:Tm(H)},p.reset=!1,p.placement=p.options.placement,p.orderedModifiers.forEach(function(pe){return p.modifiersData[pe.name]=Object.assign({},pe.data)});for(var V=0;V<p.orderedModifiers.length;V++){if(p.reset===!0){p.reset=!1,V=-1;continue}var Q=p.orderedModifiers[V],B=Q.fn,Z=Q.options,X=Z===void 0?{}:Z,de=Q.name;typeof B=="function"&&(p=B({state:p,options:X,name:de,instance:E})||p)}}}},update:Wj(function(){return new Promise(function(L){E.forceUpdate(),L(p)})}),destroy:function(){O(),y=!0}};if(!Iw(u,h))return E;E.setOptions(d).then(function(L){!y&&d.onFirstUpdate&&d.onFirstUpdate(L)});function S(){p.orderedModifiers.forEach(function(L){var q=L.name,oe=L.options,H=oe===void 0?{}:oe,V=L.effect;if(typeof V=="function"){var Q=V({state:p,name:q,instance:E,options:H}),B=function(){};_.push(Q||B)}})}function O(){_.forEach(function(L){return L()}),_=[]}return E}}var Vj=mf(),jj=[Am,Rm,Im,wm],qj=mf({defaultModifiers:jj}),Kj=[Am,Rm,Im,wm,OA,AA,NA,TA,SA],xm=mf({defaultModifiers:Kj});const RA=Object.freeze(Object.defineProperty({__proto__:null,popperGenerator:mf,detectOverflow:Xo,createPopperBase:Vj,createPopper:xm,createPopperLite:qj,top:an,bottom:xn,right:Dn,left:ln,auto:gf,basePlacements:fa,start:Bs,end:Ko,clippingParents:oA,viewport:ym,popper:bo,reference:aA,variationPlacements:Ng,placements:Em,beforeRead:lA,read:cA,afterRead:uA,beforeMain:hA,main:fA,afterMain:dA,beforeWrite:pA,write:gA,afterWrite:_A,modifierPhases:mA,applyStyles:wm,arrow:TA,computeStyles:Im,eventListeners:Am,flip:AA,hide:SA,offset:OA,popperOffsets:Rm,preventOverflow:NA},Symbol.toStringTag,{value:"Module"}));/*!
  * Bootstrap v5.2.3 (https://getbootstrap.com/)
  * Copyright 2011-2022 The Bootstrap Authors (https://github.com/twbs/bootstrap/graphs/contributors)
  * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)
  */const Gj=1e6,zj=1e3,Dg="transitionend",Yj=t=>t==null?`${t}`:Object.prototype.toString.call(t).match(/\s([a-z]+)/i)[1].toLowerCase(),Xj=t=>{do t+=Math.floor(Math.random()*Gj);while(document.getElementById(t));return t},xA=t=>{let e=t.getAttribute("data-bs-target");if(!e||e==="#"){let n=t.getAttribute("href");if(!n||!n.includes("#")&&!n.startsWith("."))return null;n.includes("#")&&!n.startsWith("#")&&(n=`#${n.split("#")[1]}`),e=n&&n!=="#"?n.trim():null}return e},DA=t=>{const e=xA(t);return e&&document.querySelector(e)?e:null},rr=t=>{const e=xA(t);return e?document.querySelector(e):null},Qj=t=>{if(!t)return 0;let{transitionDuration:e,transitionDelay:n}=window.getComputedStyle(t);const i=Number.parseFloat(e),r=Number.parseFloat(n);return!i&&!r?0:(e=e.split(",")[0],n=n.split(",")[0],(Number.parseFloat(e)+Number.parseFloat(n))*zj)},LA=t=>{t.dispatchEvent(new Event(Dg))},sr=t=>!t||typeof t!="object"?!1:(typeof t.jquery<"u"&&(t=t[0]),typeof t.nodeType<"u"),Kr=t=>sr(t)?t.jquery?t[0]:t:typeof t=="string"&&t.length>0?document.querySelector(t):null,da=t=>{if(!sr(t)||t.getClientRects().length===0)return!1;const e=getComputedStyle(t).getPropertyValue("visibility")==="visible",n=t.closest("details:not([open])");if(!n)return e;if(n!==t){const i=t.closest("summary");if(i&&i.parentNode!==n||i===null)return!1}return e},Gr=t=>!t||t.nodeType!==Node.ELEMENT_NODE||t.classList.contains("disabled")?!0:typeof t.disabled<"u"?t.disabled:t.hasAttribute("disabled")&&t.getAttribute("disabled")!=="false",PA=t=>{if(!document.documentElement.attachShadow)return null;if(typeof t.getRootNode=="function"){const e=t.getRootNode();return e instanceof ShadowRoot?e:null}return t instanceof ShadowRoot?t:t.parentNode?PA(t.parentNode):null},_h=()=>{},ec=t=>{t.offsetHeight},kA=()=>window.jQuery&&!document.body.hasAttribute("data-bs-no-jquery")?window.jQuery:null,mp=[],Jj=t=>{document.readyState==="loading"?(mp.length||document.addEventListener("DOMContentLoaded",()=>{for(const e of mp)e()}),mp.push(t)):t()},Qn=()=>document.documentElement.dir==="rtl",Zn=t=>{Jj(()=>{const e=kA();if(e){const n=t.NAME,i=e.fn[n];e.fn[n]=t.jQueryInterface,e.fn[n].Constructor=t,e.fn[n].noConflict=()=>(e.fn[n]=i,t.jQueryInterface)}})},er=t=>{typeof t=="function"&&t()},MA=(t,e,n=!0)=>{if(!n){er(t);return}const i=5,r=Qj(e)+i;let o=!1;const l=({target:u})=>{u===e&&(o=!0,e.removeEventListener(Dg,l),er(t))};e.addEventListener(Dg,l),setTimeout(()=>{o||LA(e)},r)},Dm=(t,e,n,i)=>{const r=t.length;let o=t.indexOf(e);return o===-1?!n&&i?t[r-1]:t[0]:(o+=n?1:-1,i&&(o=(o+r)%r),t[Math.max(0,Math.min(o,r-1))])},Zj=/[^.]*(?=\..*)\.|.*/,e3=/\..*/,t3=/::\d+$/,vp={};let Aw=1;const $A={mouseenter:"mouseover",mouseleave:"mouseout"},n3=new Set(["click","dblclick","mouseup","mousedown","contextmenu","mousewheel","DOMMouseScroll","mouseover","mouseout","mousemove","selectstart","selectend","keydown","keypress","keyup","orientationchange","touchstart","touchmove","touchend","touchcancel","pointerdown","pointermove","pointerup","pointerleave","pointercancel","gesturestart","gesturechange","gestureend","focus","blur","change","reset","select","submit","focusin","focusout","load","unload","beforeunload","resize","move","DOMContentLoaded","readystatechange","error","abort","scroll"]);function FA(t,e){return e&&`${e}::${Aw++}`||t.uidEvent||Aw++}function UA(t){const e=FA(t);return t.uidEvent=e,vp[e]=vp[e]||{},vp[e]}function i3(t,e){return function n(i){return Lm(i,{delegateTarget:t}),n.oneOff&&U.off(t,i.type,e),e.apply(t,[i])}}function r3(t,e,n){return function i(r){const o=t.querySelectorAll(e);for(let{target:l}=r;l&&l!==this;l=l.parentNode)for(const u of o)if(u===l)return Lm(r,{delegateTarget:l}),i.oneOff&&U.off(t,r.type,e,n),n.apply(l,[r])}}function BA(t,e,n=null){return Object.values(t).find(i=>i.callable===e&&i.delegationSelector===n)}function WA(t,e,n){const i=typeof e=="string",r=i?n:e||n;let o=HA(t);return n3.has(o)||(o=t),[i,r,o]}function Sw(t,e,n,i,r){if(typeof e!="string"||!t)return;let[o,l,u]=WA(e,n,i);e in $A&&(l=(S=>function(O){if(!O.relatedTarget||O.relatedTarget!==O.delegateTarget&&!O.delegateTarget.contains(O.relatedTarget))return S.call(this,O)})(l));const h=UA(t),d=h[u]||(h[u]={}),p=BA(d,l,o?n:null);if(p){p.oneOff=p.oneOff&&r;return}const _=FA(l,e.replace(Zj,"")),y=o?r3(t,n,l):i3(t,l);y.delegationSelector=o?n:null,y.callable=l,y.oneOff=r,y.uidEvent=_,d[_]=y,t.addEventListener(u,y,o)}function Lg(t,e,n,i,r){const o=BA(e[n],i,r);o&&(t.removeEventListener(n,o,Boolean(r)),delete e[n][o.uidEvent])}function s3(t,e,n,i){const r=e[n]||{};for(const o of Object.keys(r))if(o.includes(i)){const l=r[o];Lg(t,e,n,l.callable,l.delegationSelector)}}function HA(t){return t=t.replace(e3,""),$A[t]||t}const U={on(t,e,n,i){Sw(t,e,n,i,!1)},one(t,e,n,i){Sw(t,e,n,i,!0)},off(t,e,n,i){if(typeof e!="string"||!t)return;const[r,o,l]=WA(e,n,i),u=l!==e,h=UA(t),d=h[l]||{},p=e.startsWith(".");if(typeof o<"u"){if(!Object.keys(d).length)return;Lg(t,h,l,o,r?n:null);return}if(p)for(const _ of Object.keys(h))s3(t,h,_,e.slice(1));for(const _ of Object.keys(d)){const y=_.replace(t3,"");if(!u||e.includes(y)){const E=d[_];Lg(t,h,l,E.callable,E.delegationSelector)}}},trigger(t,e,n){if(typeof e!="string"||!t)return null;const i=kA(),r=HA(e),o=e!==r;let l=null,u=!0,h=!0,d=!1;o&&i&&(l=i.Event(e,n),i(t).trigger(l),u=!l.isPropagationStopped(),h=!l.isImmediatePropagationStopped(),d=l.isDefaultPrevented());let p=new Event(e,{bubbles:u,cancelable:!0});return p=Lm(p,n),d&&p.preventDefault(),h&&t.dispatchEvent(p),p.defaultPrevented&&l&&l.preventDefault(),p}};function Lm(t,e){for(const[n,i]of Object.entries(e||{}))try{t[n]=i}catch{Object.defineProperty(t,n,{configurable:!0,get(){return i}})}return t}const Sr=new Map,yp={set(t,e,n){Sr.has(t)||Sr.set(t,new Map);const i=Sr.get(t);if(!i.has(e)&&i.size!==0){console.error(`Bootstrap doesn't allow more than one instance per element. Bound instance: ${Array.from(i.keys())[0]}.`);return}i.set(e,n)},get(t,e){return Sr.has(t)&&Sr.get(t).get(e)||null},remove(t,e){if(!Sr.has(t))return;const n=Sr.get(t);n.delete(e),n.size===0&&Sr.delete(t)}};function Ow(t){if(t==="true")return!0;if(t==="false")return!1;if(t===Number(t).toString())return Number(t);if(t===""||t==="null")return null;if(typeof t!="string")return t;try{return JSON.parse(decodeURIComponent(t))}catch{return t}}function Ep(t){return t.replace(/[A-Z]/g,e=>`-${e.toLowerCase()}`)}const or={setDataAttribute(t,e,n){t.setAttribute(`data-bs-${Ep(e)}`,n)},removeDataAttribute(t,e){t.removeAttribute(`data-bs-${Ep(e)}`)},getDataAttributes(t){if(!t)return{};const e={},n=Object.keys(t.dataset).filter(i=>i.startsWith("bs")&&!i.startsWith("bsConfig"));for(const i of n){let r=i.replace(/^bs/,"");r=r.charAt(0).toLowerCase()+r.slice(1,r.length),e[r]=Ow(t.dataset[i])}return e},getDataAttribute(t,e){return Ow(t.getAttribute(`data-bs-${Ep(e)}`))}};class tc{static get Default(){return{}}static get DefaultType(){return{}}static get NAME(){throw new Error('You have to implement the static method "NAME", for each component!')}_getConfig(e){return e=this._mergeConfigObj(e),e=this._configAfterMerge(e),this._typeCheckConfig(e),e}_configAfterMerge(e){return e}_mergeConfigObj(e,n){const i=sr(n)?or.getDataAttribute(n,"config"):{};return{...this.constructor.Default,...typeof i=="object"?i:{},...sr(n)?or.getDataAttributes(n):{},...typeof e=="object"?e:{}}}_typeCheckConfig(e,n=this.constructor.DefaultType){for(const i of Object.keys(n)){const r=n[i],o=e[i],l=sr(o)?"element":Yj(o);if(!new RegExp(r).test(l))throw new TypeError(`${this.constructor.NAME.toUpperCase()}: Option "${i}" provided type "${l}" but expected type "${r}".`)}}}const o3="5.2.3";class _i extends tc{constructor(e,n){super(),e=Kr(e),e&&(this._element=e,this._config=this._getConfig(n),yp.set(this._element,this.constructor.DATA_KEY,this))}dispose(){yp.remove(this._element,this.constructor.DATA_KEY),U.off(this._element,this.constructor.EVENT_KEY);for(const e of Object.getOwnPropertyNames(this))this[e]=null}_queueCallback(e,n,i=!0){MA(e,n,i)}_getConfig(e){return e=this._mergeConfigObj(e,this._element),e=this._configAfterMerge(e),this._typeCheckConfig(e),e}static getInstance(e){return yp.get(Kr(e),this.DATA_KEY)}static getOrCreateInstance(e,n={}){return this.getInstance(e)||new this(e,typeof n=="object"?n:null)}static get VERSION(){return o3}static get DATA_KEY(){return`bs.${this.NAME}`}static get EVENT_KEY(){return`.${this.DATA_KEY}`}static eventName(e){return`${e}${this.EVENT_KEY}`}}const vf=(t,e="hide")=>{const n=`click.dismiss${t.EVENT_KEY}`,i=t.NAME;U.on(document,n,`[data-bs-dismiss="${i}"]`,function(r){if(["A","AREA"].includes(this.tagName)&&r.preventDefault(),Gr(this))return;const o=rr(this)||this.closest(`.${i}`);t.getOrCreateInstance(o)[e]()})},a3="alert",l3="bs.alert",VA=`.${l3}`,c3=`close${VA}`,u3=`closed${VA}`,h3="fade",f3="show";class yf extends _i{static get NAME(){return a3}close(){if(U.trigger(this._element,c3).defaultPrevented)return;this._element.classList.remove(f3);const n=this._element.classList.contains(h3);this._queueCallback(()=>this._destroyElement(),this._element,n)}_destroyElement(){this._element.remove(),U.trigger(this._element,u3),this.dispose()}static jQueryInterface(e){return this.each(function(){const n=yf.getOrCreateInstance(this);if(typeof e=="string"){if(n[e]===void 0||e.startsWith("_")||e==="constructor")throw new TypeError(`No method named "${e}"`);n[e](this)}})}}vf(yf,"close");Zn(yf);const d3="button",p3="bs.button",g3=`.${p3}`,_3=".data-api",m3="active",Nw='[data-bs-toggle="button"]',v3=`click${g3}${_3}`;class Ef extends _i{static get NAME(){return d3}toggle(){this._element.setAttribute("aria-pressed",this._element.classList.toggle(m3))}static jQueryInterface(e){return this.each(function(){const n=Ef.getOrCreateInstance(this);e==="toggle"&&n[e]()})}}U.on(document,v3,Nw,t=>{t.preventDefault();const e=t.target.closest(Nw);Ef.getOrCreateInstance(e).toggle()});Zn(Ef);const Ce={find(t,e=document.documentElement){return[].concat(...Element.prototype.querySelectorAll.call(e,t))},findOne(t,e=document.documentElement){return Element.prototype.querySelector.call(e,t)},children(t,e){return[].concat(...t.children).filter(n=>n.matches(e))},parents(t,e){const n=[];let i=t.parentNode.closest(e);for(;i;)n.push(i),i=i.parentNode.closest(e);return n},prev(t,e){let n=t.previousElementSibling;for(;n;){if(n.matches(e))return[n];n=n.previousElementSibling}return[]},next(t,e){let n=t.nextElementSibling;for(;n;){if(n.matches(e))return[n];n=n.nextElementSibling}return[]},focusableChildren(t){const e=["a","button","input","textarea","select","details","[tabindex]",'[contenteditable="true"]'].map(n=>`${n}:not([tabindex^="-"])`).join(",");return this.find(e,t).filter(n=>!Gr(n)&&da(n))}},y3="swipe",pa=".bs.swipe",E3=`touchstart${pa}`,b3=`touchmove${pa}`,w3=`touchend${pa}`,T3=`pointerdown${pa}`,C3=`pointerup${pa}`,I3="touch",A3="pen",S3="pointer-event",O3=40,N3={endCallback:null,leftCallback:null,rightCallback:null},R3={endCallback:"(function|null)",leftCallback:"(function|null)",rightCallback:"(function|null)"};class mh extends tc{constructor(e,n){super(),this._element=e,!(!e||!mh.isSupported())&&(this._config=this._getConfig(n),this._deltaX=0,this._supportPointerEvents=Boolean(window.PointerEvent),this._initEvents())}static get Default(){return N3}static get DefaultType(){return R3}static get NAME(){return y3}dispose(){U.off(this._element,pa)}_start(e){if(!this._supportPointerEvents){this._deltaX=e.touches[0].clientX;return}this._eventIsPointerPenTouch(e)&&(this._deltaX=e.clientX)}_end(e){this._eventIsPointerPenTouch(e)&&(this._deltaX=e.clientX-this._deltaX),this._handleSwipe(),er(this._config.endCallback)}_move(e){this._deltaX=e.touches&&e.touches.length>1?0:e.touches[0].clientX-this._deltaX}_handleSwipe(){const e=Math.abs(this._deltaX);if(e<=O3)return;const n=e/this._deltaX;this._deltaX=0,n&&er(n>0?this._config.rightCallback:this._config.leftCallback)}_initEvents(){this._supportPointerEvents?(U.on(this._element,T3,e=>this._start(e)),U.on(this._element,C3,e=>this._end(e)),this._element.classList.add(S3)):(U.on(this._element,E3,e=>this._start(e)),U.on(this._element,b3,e=>this._move(e)),U.on(this._element,w3,e=>this._end(e)))}_eventIsPointerPenTouch(e){return this._supportPointerEvents&&(e.pointerType===A3||e.pointerType===I3)}static isSupported(){return"ontouchstart"in document.documentElement||navigator.maxTouchPoints>0}}const x3="carousel",D3="bs.carousel",Qr=`.${D3}`,jA=".data-api",L3="ArrowLeft",P3="ArrowRight",k3=500,Ua="next",mo="prev",wo="left",Su="right",M3=`slide${Qr}`,bp=`slid${Qr}`,$3=`keydown${Qr}`,F3=`mouseenter${Qr}`,U3=`mouseleave${Qr}`,B3=`dragstart${Qr}`,W3=`load${Qr}${jA}`,H3=`click${Qr}${jA}`,qA="carousel",fu="active",V3="slide",j3="carousel-item-end",q3="carousel-item-start",K3="carousel-item-next",G3="carousel-item-prev",KA=".active",GA=".carousel-item",z3=KA+GA,Y3=".carousel-item img",X3=".carousel-indicators",Q3="[data-bs-slide], [data-bs-slide-to]",J3='[data-bs-ride="carousel"]',Z3={[L3]:Su,[P3]:wo},eq={interval:5e3,keyboard:!0,pause:"hover",ride:!1,touch:!0,wrap:!0},tq={interval:"(number|boolean)",keyboard:"boolean",pause:"(string|boolean)",ride:"(boolean|string)",touch:"boolean",wrap:"boolean"};class nc extends _i{constructor(e,n){super(e,n),this._interval=null,this._activeElement=null,this._isSliding=!1,this.touchTimeout=null,this._swipeHelper=null,this._indicatorsElement=Ce.findOne(X3,this._element),this._addEventListeners(),this._config.ride===qA&&this.cycle()}static get Default(){return eq}static get DefaultType(){return tq}static get NAME(){return x3}next(){this._slide(Ua)}nextWhenVisible(){!document.hidden&&da(this._element)&&this.next()}prev(){this._slide(mo)}pause(){this._isSliding&&LA(this._element),this._clearInterval()}cycle(){this._clearInterval(),this._updateInterval(),this._interval=setInterval(()=>this.nextWhenVisible(),this._config.interval)}_maybeEnableCycle(){if(this._config.ride){if(this._isSliding){U.one(this._element,bp,()=>this.cycle());return}this.cycle()}}to(e){const n=this._getItems();if(e>n.length-1||e<0)return;if(this._isSliding){U.one(this._element,bp,()=>this.to(e));return}const i=this._getItemIndex(this._getActive());if(i===e)return;const r=e>i?Ua:mo;this._slide(r,n[e])}dispose(){this._swipeHelper&&this._swipeHelper.dispose(),super.dispose()}_configAfterMerge(e){return e.defaultInterval=e.interval,e}_addEventListeners(){this._config.keyboard&&U.on(this._element,$3,e=>this._keydown(e)),this._config.pause==="hover"&&(U.on(this._element,F3,()=>this.pause()),U.on(this._element,U3,()=>this._maybeEnableCycle())),this._config.touch&&mh.isSupported()&&this._addTouchEventListeners()}_addTouchEventListeners(){for(const i of Ce.find(Y3,this._element))U.on(i,B3,r=>r.preventDefault());const n={leftCallback:()=>this._slide(this._directionToOrder(wo)),rightCallback:()=>this._slide(this._directionToOrder(Su)),endCallback:()=>{this._config.pause==="hover"&&(this.pause(),this.touchTimeout&&clearTimeout(this.touchTimeout),this.touchTimeout=setTimeout(()=>this._maybeEnableCycle(),k3+this._config.interval))}};this._swipeHelper=new mh(this._element,n)}_keydown(e){if(/input|textarea/i.test(e.target.tagName))return;const n=Z3[e.key];n&&(e.preventDefault(),this._slide(this._directionToOrder(n)))}_getItemIndex(e){return this._getItems().indexOf(e)}_setActiveIndicatorElement(e){if(!this._indicatorsElement)return;const n=Ce.findOne(KA,this._indicatorsElement);n.classList.remove(fu),n.removeAttribute("aria-current");const i=Ce.findOne(`[data-bs-slide-to="${e}"]`,this._indicatorsElement);i&&(i.classList.add(fu),i.setAttribute("aria-current","true"))}_updateInterval(){const e=this._activeElement||this._getActive();if(!e)return;const n=Number.parseInt(e.getAttribute("data-bs-interval"),10);this._config.interval=n||this._config.defaultInterval}_slide(e,n=null){if(this._isSliding)return;const i=this._getActive(),r=e===Ua,o=n||Dm(this._getItems(),i,r,this._config.wrap);if(o===i)return;const l=this._getItemIndex(o),u=E=>U.trigger(this._element,E,{relatedTarget:o,direction:this._orderToDirection(e),from:this._getItemIndex(i),to:l});if(u(M3).defaultPrevented||!i||!o)return;const d=Boolean(this._interval);this.pause(),this._isSliding=!0,this._setActiveIndicatorElement(l),this._activeElement=o;const p=r?q3:j3,_=r?K3:G3;o.classList.add(_),ec(o),i.classList.add(p),o.classList.add(p);const y=()=>{o.classList.remove(p,_),o.classList.add(fu),i.classList.remove(fu,_,p),this._isSliding=!1,u(bp)};this._queueCallback(y,i,this._isAnimated()),d&&this.cycle()}_isAnimated(){return this._element.classList.contains(V3)}_getActive(){return Ce.findOne(z3,this._element)}_getItems(){return Ce.find(GA,this._element)}_clearInterval(){this._interval&&(clearInterval(this._interval),this._interval=null)}_directionToOrder(e){return Qn()?e===wo?mo:Ua:e===wo?Ua:mo}_orderToDirection(e){return Qn()?e===mo?wo:Su:e===mo?Su:wo}static jQueryInterface(e){return this.each(function(){const n=nc.getOrCreateInstance(this,e);if(typeof e=="number"){n.to(e);return}if(typeof e=="string"){if(n[e]===void 0||e.startsWith("_")||e==="constructor")throw new TypeError(`No method named "${e}"`);n[e]()}})}}U.on(document,H3,Q3,function(t){const e=rr(this);if(!e||!e.classList.contains(qA))return;t.preventDefault();const n=nc.getOrCreateInstance(e),i=this.getAttribute("data-bs-slide-to");if(i){n.to(i),n._maybeEnableCycle();return}if(or.getDataAttribute(this,"slide")==="next"){n.next(),n._maybeEnableCycle();return}n.prev(),n._maybeEnableCycle()});U.on(window,W3,()=>{const t=Ce.find(J3);for(const e of t)nc.getOrCreateInstance(e)});Zn(nc);const nq="collapse",iq="bs.collapse",ic=`.${iq}`,rq=".data-api",sq=`show${ic}`,oq=`shown${ic}`,aq=`hide${ic}`,lq=`hidden${ic}`,cq=`click${ic}${rq}`,wp="show",Ao="collapse",du="collapsing",uq="collapsed",hq=`:scope .${Ao} .${Ao}`,fq="collapse-horizontal",dq="width",pq="height",gq=".collapse.show, .collapse.collapsing",Pg='[data-bs-toggle="collapse"]',_q={parent:null,toggle:!0},mq={parent:"(null|element)",toggle:"boolean"};class Rl extends _i{constructor(e,n){super(e,n),this._isTransitioning=!1,this._triggerArray=[];const i=Ce.find(Pg);for(const r of i){const o=DA(r),l=Ce.find(o).filter(u=>u===this._element);o!==null&&l.length&&this._triggerArray.push(r)}this._initializeChildren(),this._config.parent||this._addAriaAndCollapsedClass(this._triggerArray,this._isShown()),this._config.toggle&&this.toggle()}static get Default(){return _q}static get DefaultType(){return mq}static get NAME(){return nq}toggle(){this._isShown()?this.hide():this.show()}show(){if(this._isTransitioning||this._isShown())return;let e=[];if(this._config.parent&&(e=this._getFirstLevelChildren(gq).filter(u=>u!==this._element).map(u=>Rl.getOrCreateInstance(u,{toggle:!1}))),e.length&&e[0]._isTransitioning||U.trigger(this._element,sq).defaultPrevented)return;for(const u of e)u.hide();const i=this._getDimension();this._element.classList.remove(Ao),this._element.classList.add(du),this._element.style[i]=0,this._addAriaAndCollapsedClass(this._triggerArray,!0),this._isTransitioning=!0;const r=()=>{this._isTransitioning=!1,this._element.classList.remove(du),this._element.classList.add(Ao,wp),this._element.style[i]="",U.trigger(this._element,oq)},l=`scroll${i[0].toUpperCase()+i.slice(1)}`;this._queueCallback(r,this._element,!0),this._element.style[i]=`${this._element[l]}px`}hide(){if(this._isTransitioning||!this._isShown()||U.trigger(this._element,aq).defaultPrevented)return;const n=this._getDimension();this._element.style[n]=`${this._element.getBoundingClientRect()[n]}px`,ec(this._element),this._element.classList.add(du),this._element.classList.remove(Ao,wp);for(const r of this._triggerArray){const o=rr(r);o&&!this._isShown(o)&&this._addAriaAndCollapsedClass([r],!1)}this._isTransitioning=!0;const i=()=>{this._isTransitioning=!1,this._element.classList.remove(du),this._element.classList.add(Ao),U.trigger(this._element,lq)};this._element.style[n]="",this._queueCallback(i,this._element,!0)}_isShown(e=this._element){return e.classList.contains(wp)}_configAfterMerge(e){return e.toggle=Boolean(e.toggle),e.parent=Kr(e.parent),e}_getDimension(){return this._element.classList.contains(fq)?dq:pq}_initializeChildren(){if(!this._config.parent)return;const e=this._getFirstLevelChildren(Pg);for(const n of e){const i=rr(n);i&&this._addAriaAndCollapsedClass([n],this._isShown(i))}}_getFirstLevelChildren(e){const n=Ce.find(hq,this._config.parent);return Ce.find(e,this._config.parent).filter(i=>!n.includes(i))}_addAriaAndCollapsedClass(e,n){if(e.length)for(const i of e)i.classList.toggle(uq,!n),i.setAttribute("aria-expanded",n)}static jQueryInterface(e){const n={};return typeof e=="string"&&/show|hide/.test(e)&&(n.toggle=!1),this.each(function(){const i=Rl.getOrCreateInstance(this,n);if(typeof e=="string"){if(typeof i[e]>"u")throw new TypeError(`No method named "${e}"`);i[e]()}})}}U.on(document,cq,Pg,function(t){(t.target.tagName==="A"||t.delegateTarget&&t.delegateTarget.tagName==="A")&&t.preventDefault();const e=DA(this),n=Ce.find(e);for(const i of n)Rl.getOrCreateInstance(i,{toggle:!1}).toggle()});Zn(Rl);const Rw="dropdown",vq="bs.dropdown",Gs=`.${vq}`,Pm=".data-api",yq="Escape",xw="Tab",Eq="ArrowUp",Dw="ArrowDown",bq=2,wq=`hide${Gs}`,Tq=`hidden${Gs}`,Cq=`show${Gs}`,Iq=`shown${Gs}`,zA=`click${Gs}${Pm}`,YA=`keydown${Gs}${Pm}`,Aq=`keyup${Gs}${Pm}`,To="show",Sq="dropup",Oq="dropend",Nq="dropstart",Rq="dropup-center",xq="dropdown-center",Cs='[data-bs-toggle="dropdown"]:not(.disabled):not(:disabled)',Dq=`${Cs}.${To}`,Ou=".dropdown-menu",Lq=".navbar",Pq=".navbar-nav",kq=".dropdown-menu .dropdown-item:not(.disabled):not(:disabled)",Mq=Qn()?"top-end":"top-start",$q=Qn()?"top-start":"top-end",Fq=Qn()?"bottom-end":"bottom-start",Uq=Qn()?"bottom-start":"bottom-end",Bq=Qn()?"left-start":"right-start",Wq=Qn()?"right-start":"left-start",Hq="top",Vq="bottom",jq={autoClose:!0,boundary:"clippingParents",display:"dynamic",offset:[0,2],popperConfig:null,reference:"toggle"},qq={autoClose:"(boolean|string)",boundary:"(string|element)",display:"string",offset:"(array|string|function)",popperConfig:"(null|object|function)",reference:"(string|element|object)"};class Di extends _i{constructor(e,n){super(e,n),this._popper=null,this._parent=this._element.parentNode,this._menu=Ce.next(this._element,Ou)[0]||Ce.prev(this._element,Ou)[0]||Ce.findOne(Ou,this._parent),this._inNavbar=this._detectNavbar()}static get Default(){return jq}static get DefaultType(){return qq}static get NAME(){return Rw}toggle(){return this._isShown()?this.hide():this.show()}show(){if(Gr(this._element)||this._isShown())return;const e={relatedTarget:this._element};if(!U.trigger(this._element,Cq,e).defaultPrevented){if(this._createPopper(),"ontouchstart"in document.documentElement&&!this._parent.closest(Pq))for(const i of[].concat(...document.body.children))U.on(i,"mouseover",_h);this._element.focus(),this._element.setAttribute("aria-expanded",!0),this._menu.classList.add(To),this._element.classList.add(To),U.trigger(this._element,Iq,e)}}hide(){if(Gr(this._element)||!this._isShown())return;const e={relatedTarget:this._element};this._completeHide(e)}dispose(){this._popper&&this._popper.destroy(),super.dispose()}update(){this._inNavbar=this._detectNavbar(),this._popper&&this._popper.update()}_completeHide(e){if(!U.trigger(this._element,wq,e).defaultPrevented){if("ontouchstart"in document.documentElement)for(const i of[].concat(...document.body.children))U.off(i,"mouseover",_h);this._popper&&this._popper.destroy(),this._menu.classList.remove(To),this._element.classList.remove(To),this._element.setAttribute("aria-expanded","false"),or.removeDataAttribute(this._menu,"popper"),U.trigger(this._element,Tq,e)}}_getConfig(e){if(e=super._getConfig(e),typeof e.reference=="object"&&!sr(e.reference)&&typeof e.reference.getBoundingClientRect!="function")throw new TypeError(`${Rw.toUpperCase()}: Option "reference" provided type "object" without a required "getBoundingClientRect" method.`);return e}_createPopper(){if(typeof RA>"u")throw new TypeError("Bootstrap's dropdowns require Popper (https://popper.js.org)");let e=this._element;this._config.reference==="parent"?e=this._parent:sr(this._config.reference)?e=Kr(this._config.reference):typeof this._config.reference=="object"&&(e=this._config.reference);const n=this._getPopperConfig();this._popper=xm(e,this._menu,n)}_isShown(){return this._menu.classList.contains(To)}_getPlacement(){const e=this._parent;if(e.classList.contains(Oq))return Bq;if(e.classList.contains(Nq))return Wq;if(e.classList.contains(Rq))return Hq;if(e.classList.contains(xq))return Vq;const n=getComputedStyle(this._menu).getPropertyValue("--bs-position").trim()==="end";return e.classList.contains(Sq)?n?$q:Mq:n?Uq:Fq}_detectNavbar(){return this._element.closest(Lq)!==null}_getOffset(){const{offset:e}=this._config;return typeof e=="string"?e.split(",").map(n=>Number.parseInt(n,10)):typeof e=="function"?n=>e(n,this._element):e}_getPopperConfig(){const e={placement:this._getPlacement(),modifiers:[{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"offset",options:{offset:this._getOffset()}}]};return(this._inNavbar||this._config.display==="static")&&(or.setDataAttribute(this._menu,"popper","static"),e.modifiers=[{name:"applyStyles",enabled:!1}]),{...e,...typeof this._config.popperConfig=="function"?this._config.popperConfig(e):this._config.popperConfig}}_selectMenuItem({key:e,target:n}){const i=Ce.find(kq,this._menu).filter(r=>da(r));i.length&&Dm(i,n,e===Dw,!i.includes(n)).focus()}static jQueryInterface(e){return this.each(function(){const n=Di.getOrCreateInstance(this,e);if(typeof e=="string"){if(typeof n[e]>"u")throw new TypeError(`No method named "${e}"`);n[e]()}})}static clearMenus(e){if(e.button===bq||e.type==="keyup"&&e.key!==xw)return;const n=Ce.find(Dq);for(const i of n){const r=Di.getInstance(i);if(!r||r._config.autoClose===!1)continue;const o=e.composedPath(),l=o.includes(r._menu);if(o.includes(r._element)||r._config.autoClose==="inside"&&!l||r._config.autoClose==="outside"&&l||r._menu.contains(e.target)&&(e.type==="keyup"&&e.key===xw||/input|select|option|textarea|form/i.test(e.target.tagName)))continue;const u={relatedTarget:r._element};e.type==="click"&&(u.clickEvent=e),r._completeHide(u)}}static dataApiKeydownHandler(e){const n=/input|textarea/i.test(e.target.tagName),i=e.key===yq,r=[Eq,Dw].includes(e.key);if(!r&&!i||n&&!i)return;e.preventDefault();const o=this.matches(Cs)?this:Ce.prev(this,Cs)[0]||Ce.next(this,Cs)[0]||Ce.findOne(Cs,e.delegateTarget.parentNode),l=Di.getOrCreateInstance(o);if(r){e.stopPropagation(),l.show(),l._selectMenuItem(e);return}l._isShown()&&(e.stopPropagation(),l.hide(),o.focus())}}U.on(document,YA,Cs,Di.dataApiKeydownHandler);U.on(document,YA,Ou,Di.dataApiKeydownHandler);U.on(document,zA,Di.clearMenus);U.on(document,Aq,Di.clearMenus);U.on(document,zA,Cs,function(t){t.preventDefault(),Di.getOrCreateInstance(this).toggle()});Zn(Di);const Lw=".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",Pw=".sticky-top",pu="padding-right",kw="margin-right";class kg{constructor(){this._element=document.body}getWidth(){const e=document.documentElement.clientWidth;return Math.abs(window.innerWidth-e)}hide(){const e=this.getWidth();this._disableOverFlow(),this._setElementAttributes(this._element,pu,n=>n+e),this._setElementAttributes(Lw,pu,n=>n+e),this._setElementAttributes(Pw,kw,n=>n-e)}reset(){this._resetElementAttributes(this._element,"overflow"),this._resetElementAttributes(this._element,pu),this._resetElementAttributes(Lw,pu),this._resetElementAttributes(Pw,kw)}isOverflowing(){return this.getWidth()>0}_disableOverFlow(){this._saveInitialAttribute(this._element,"overflow"),this._element.style.overflow="hidden"}_setElementAttributes(e,n,i){const r=this.getWidth(),o=l=>{if(l!==this._element&&window.innerWidth>l.clientWidth+r)return;this._saveInitialAttribute(l,n);const u=window.getComputedStyle(l).getPropertyValue(n);l.style.setProperty(n,`${i(Number.parseFloat(u))}px`)};this._applyManipulationCallback(e,o)}_saveInitialAttribute(e,n){const i=e.style.getPropertyValue(n);i&&or.setDataAttribute(e,n,i)}_resetElementAttributes(e,n){const i=r=>{const o=or.getDataAttribute(r,n);if(o===null){r.style.removeProperty(n);return}or.removeDataAttribute(r,n),r.style.setProperty(n,o)};this._applyManipulationCallback(e,i)}_applyManipulationCallback(e,n){if(sr(e)){n(e);return}for(const i of Ce.find(e,this._element))n(i)}}const XA="backdrop",Kq="fade",Mw="show",$w=`mousedown.bs.${XA}`,Gq={className:"modal-backdrop",clickCallback:null,isAnimated:!1,isVisible:!0,rootElement:"body"},zq={className:"string",clickCallback:"(function|null)",isAnimated:"boolean",isVisible:"boolean",rootElement:"(element|string)"};class QA extends tc{constructor(e){super(),this._config=this._getConfig(e),this._isAppended=!1,this._element=null}static get Default(){return Gq}static get DefaultType(){return zq}static get NAME(){return XA}show(e){if(!this._config.isVisible){er(e);return}this._append();const n=this._getElement();this._config.isAnimated&&ec(n),n.classList.add(Mw),this._emulateAnimation(()=>{er(e)})}hide(e){if(!this._config.isVisible){er(e);return}this._getElement().classList.remove(Mw),this._emulateAnimation(()=>{this.dispose(),er(e)})}dispose(){this._isAppended&&(U.off(this._element,$w),this._element.remove(),this._isAppended=!1)}_getElement(){if(!this._element){const e=document.createElement("div");e.className=this._config.className,this._config.isAnimated&&e.classList.add(Kq),this._element=e}return this._element}_configAfterMerge(e){return e.rootElement=Kr(e.rootElement),e}_append(){if(this._isAppended)return;const e=this._getElement();this._config.rootElement.append(e),U.on(e,$w,()=>{er(this._config.clickCallback)}),this._isAppended=!0}_emulateAnimation(e){MA(e,this._getElement(),this._config.isAnimated)}}const Yq="focustrap",Xq="bs.focustrap",vh=`.${Xq}`,Qq=`focusin${vh}`,Jq=`keydown.tab${vh}`,Zq="Tab",eK="forward",Fw="backward",tK={autofocus:!0,trapElement:null},nK={autofocus:"boolean",trapElement:"element"};class JA extends tc{constructor(e){super(),this._config=this._getConfig(e),this._isActive=!1,this._lastTabNavDirection=null}static get Default(){return tK}static get DefaultType(){return nK}static get NAME(){return Yq}activate(){this._isActive||(this._config.autofocus&&this._config.trapElement.focus(),U.off(document,vh),U.on(document,Qq,e=>this._handleFocusin(e)),U.on(document,Jq,e=>this._handleKeydown(e)),this._isActive=!0)}deactivate(){this._isActive&&(this._isActive=!1,U.off(document,vh))}_handleFocusin(e){const{trapElement:n}=this._config;if(e.target===document||e.target===n||n.contains(e.target))return;const i=Ce.focusableChildren(n);i.length===0?n.focus():this._lastTabNavDirection===Fw?i[i.length-1].focus():i[0].focus()}_handleKeydown(e){e.key===Zq&&(this._lastTabNavDirection=e.shiftKey?Fw:eK)}}const iK="modal",rK="bs.modal",mi=`.${rK}`,sK=".data-api",oK="Escape",aK=`hide${mi}`,lK=`hidePrevented${mi}`,ZA=`hidden${mi}`,eS=`show${mi}`,cK=`shown${mi}`,uK=`resize${mi}`,hK=`click.dismiss${mi}`,fK=`mousedown.dismiss${mi}`,dK=`keydown.dismiss${mi}`,pK=`click${mi}${sK}`,Uw="modal-open",gK="fade",Bw="show",Tp="modal-static",_K=".modal.show",mK=".modal-dialog",vK=".modal-body",yK='[data-bs-toggle="modal"]',EK={backdrop:!0,focus:!0,keyboard:!0},bK={backdrop:"(boolean|string)",focus:"boolean",keyboard:"boolean"};class Hs extends _i{constructor(e,n){super(e,n),this._dialog=Ce.findOne(mK,this._element),this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._isShown=!1,this._isTransitioning=!1,this._scrollBar=new kg,this._addEventListeners()}static get Default(){return EK}static get DefaultType(){return bK}static get NAME(){return iK}toggle(e){return this._isShown?this.hide():this.show(e)}show(e){this._isShown||this._isTransitioning||U.trigger(this._element,eS,{relatedTarget:e}).defaultPrevented||(this._isShown=!0,this._isTransitioning=!0,this._scrollBar.hide(),document.body.classList.add(Uw),this._adjustDialog(),this._backdrop.show(()=>this._showElement(e)))}hide(){!this._isShown||this._isTransitioning||U.trigger(this._element,aK).defaultPrevented||(this._isShown=!1,this._isTransitioning=!0,this._focustrap.deactivate(),this._element.classList.remove(Bw),this._queueCallback(()=>this._hideModal(),this._element,this._isAnimated()))}dispose(){for(const e of[window,this._dialog])U.off(e,mi);this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}handleUpdate(){this._adjustDialog()}_initializeBackDrop(){return new QA({isVisible:Boolean(this._config.backdrop),isAnimated:this._isAnimated()})}_initializeFocusTrap(){return new JA({trapElement:this._element})}_showElement(e){document.body.contains(this._element)||document.body.append(this._element),this._element.style.display="block",this._element.removeAttribute("aria-hidden"),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.scrollTop=0;const n=Ce.findOne(vK,this._dialog);n&&(n.scrollTop=0),ec(this._element),this._element.classList.add(Bw);const i=()=>{this._config.focus&&this._focustrap.activate(),this._isTransitioning=!1,U.trigger(this._element,cK,{relatedTarget:e})};this._queueCallback(i,this._dialog,this._isAnimated())}_addEventListeners(){U.on(this._element,dK,e=>{if(e.key===oK){if(this._config.keyboard){e.preventDefault(),this.hide();return}this._triggerBackdropTransition()}}),U.on(window,uK,()=>{this._isShown&&!this._isTransitioning&&this._adjustDialog()}),U.on(this._element,fK,e=>{U.one(this._element,hK,n=>{if(!(this._element!==e.target||this._element!==n.target)){if(this._config.backdrop==="static"){this._triggerBackdropTransition();return}this._config.backdrop&&this.hide()}})})}_hideModal(){this._element.style.display="none",this._element.setAttribute("aria-hidden",!0),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._isTransitioning=!1,this._backdrop.hide(()=>{document.body.classList.remove(Uw),this._resetAdjustments(),this._scrollBar.reset(),U.trigger(this._element,ZA)})}_isAnimated(){return this._element.classList.contains(gK)}_triggerBackdropTransition(){if(U.trigger(this._element,lK).defaultPrevented)return;const n=this._element.scrollHeight>document.documentElement.clientHeight,i=this._element.style.overflowY;i==="hidden"||this._element.classList.contains(Tp)||(n||(this._element.style.overflowY="hidden"),this._element.classList.add(Tp),this._queueCallback(()=>{this._element.classList.remove(Tp),this._queueCallback(()=>{this._element.style.overflowY=i},this._dialog)},this._dialog),this._element.focus())}_adjustDialog(){const e=this._element.scrollHeight>document.documentElement.clientHeight,n=this._scrollBar.getWidth(),i=n>0;if(i&&!e){const r=Qn()?"paddingLeft":"paddingRight";this._element.style[r]=`${n}px`}if(!i&&e){const r=Qn()?"paddingRight":"paddingLeft";this._element.style[r]=`${n}px`}}_resetAdjustments(){this._element.style.paddingLeft="",this._element.style.paddingRight=""}static jQueryInterface(e,n){return this.each(function(){const i=Hs.getOrCreateInstance(this,e);if(typeof e=="string"){if(typeof i[e]>"u")throw new TypeError(`No method named "${e}"`);i[e](n)}})}}U.on(document,pK,yK,function(t){const e=rr(this);["A","AREA"].includes(this.tagName)&&t.preventDefault(),U.one(e,eS,r=>{r.defaultPrevented||U.one(e,ZA,()=>{da(this)&&this.focus()})});const n=Ce.findOne(_K);n&&Hs.getInstance(n).hide(),Hs.getOrCreateInstance(e).toggle(this)});vf(Hs);Zn(Hs);const wK="offcanvas",TK="bs.offcanvas",gr=`.${TK}`,tS=".data-api",CK=`load${gr}${tS}`,IK="Escape",Ww="show",Hw="showing",Vw="hiding",AK="offcanvas-backdrop",nS=".offcanvas.show",SK=`show${gr}`,OK=`shown${gr}`,NK=`hide${gr}`,jw=`hidePrevented${gr}`,iS=`hidden${gr}`,RK=`resize${gr}`,xK=`click${gr}${tS}`,DK=`keydown.dismiss${gr}`,LK='[data-bs-toggle="offcanvas"]',PK={backdrop:!0,keyboard:!0,scroll:!1},kK={backdrop:"(boolean|string)",keyboard:"boolean",scroll:"boolean"};class fr extends _i{constructor(e,n){super(e,n),this._isShown=!1,this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._addEventListeners()}static get Default(){return PK}static get DefaultType(){return kK}static get NAME(){return wK}toggle(e){return this._isShown?this.hide():this.show(e)}show(e){if(this._isShown||U.trigger(this._element,SK,{relatedTarget:e}).defaultPrevented)return;this._isShown=!0,this._backdrop.show(),this._config.scroll||new kg().hide(),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.classList.add(Hw);const i=()=>{(!this._config.scroll||this._config.backdrop)&&this._focustrap.activate(),this._element.classList.add(Ww),this._element.classList.remove(Hw),U.trigger(this._element,OK,{relatedTarget:e})};this._queueCallback(i,this._element,!0)}hide(){if(!this._isShown||U.trigger(this._element,NK).defaultPrevented)return;this._focustrap.deactivate(),this._element.blur(),this._isShown=!1,this._element.classList.add(Vw),this._backdrop.hide();const n=()=>{this._element.classList.remove(Ww,Vw),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._config.scroll||new kg().reset(),U.trigger(this._element,iS)};this._queueCallback(n,this._element,!0)}dispose(){this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}_initializeBackDrop(){const e=()=>{if(this._config.backdrop==="static"){U.trigger(this._element,jw);return}this.hide()},n=Boolean(this._config.backdrop);return new QA({className:AK,isVisible:n,isAnimated:!0,rootElement:this._element.parentNode,clickCallback:n?e:null})}_initializeFocusTrap(){return new JA({trapElement:this._element})}_addEventListeners(){U.on(this._element,DK,e=>{if(e.key===IK){if(!this._config.keyboard){U.trigger(this._element,jw);return}this.hide()}})}static jQueryInterface(e){return this.each(function(){const n=fr.getOrCreateInstance(this,e);if(typeof e=="string"){if(n[e]===void 0||e.startsWith("_")||e==="constructor")throw new TypeError(`No method named "${e}"`);n[e](this)}})}}U.on(document,xK,LK,function(t){const e=rr(this);if(["A","AREA"].includes(this.tagName)&&t.preventDefault(),Gr(this))return;U.one(e,iS,()=>{da(this)&&this.focus()});const n=Ce.findOne(nS);n&&n!==e&&fr.getInstance(n).hide(),fr.getOrCreateInstance(e).toggle(this)});U.on(window,CK,()=>{for(const t of Ce.find(nS))fr.getOrCreateInstance(t).show()});U.on(window,RK,()=>{for(const t of Ce.find("[aria-modal][class*=show][class*=offcanvas-]"))getComputedStyle(t).position!=="fixed"&&fr.getOrCreateInstance(t).hide()});vf(fr);Zn(fr);const MK=new Set(["background","cite","href","itemtype","longdesc","poster","src","xlink:href"]),$K=/^aria-[\w-]*$/i,FK=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^#&/:?]*(?:[#/?]|$))/i,UK=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[\d+/a-z]+=*$/i,BK=(t,e)=>{const n=t.nodeName.toLowerCase();return e.includes(n)?MK.has(n)?Boolean(FK.test(t.nodeValue)||UK.test(t.nodeValue)):!0:e.filter(i=>i instanceof RegExp).some(i=>i.test(n))},rS={"*":["class","dir","id","lang","role",$K],a:["target","href","title","rel"],area:[],b:[],br:[],col:[],code:[],div:[],em:[],hr:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],i:[],img:["src","srcset","alt","title","width","height"],li:[],ol:[],p:[],pre:[],s:[],small:[],span:[],sub:[],sup:[],strong:[],u:[],ul:[]};function WK(t,e,n){if(!t.length)return t;if(n&&typeof n=="function")return n(t);const r=new window.DOMParser().parseFromString(t,"text/html"),o=[].concat(...r.body.querySelectorAll("*"));for(const l of o){const u=l.nodeName.toLowerCase();if(!Object.keys(e).includes(u)){l.remove();continue}const h=[].concat(...l.attributes),d=[].concat(e["*"]||[],e[u]||[]);for(const p of h)BK(p,d)||l.removeAttribute(p.nodeName)}return r.body.innerHTML}const HK="TemplateFactory",VK={allowList:rS,content:{},extraClass:"",html:!1,sanitize:!0,sanitizeFn:null,template:"<div></div>"},jK={allowList:"object",content:"object",extraClass:"(string|function)",html:"boolean",sanitize:"boolean",sanitizeFn:"(null|function)",template:"string"},qK={entry:"(string|element|function|null)",selector:"(string|element)"};class KK extends tc{constructor(e){super(),this._config=this._getConfig(e)}static get Default(){return VK}static get DefaultType(){return jK}static get NAME(){return HK}getContent(){return Object.values(this._config.content).map(e=>this._resolvePossibleFunction(e)).filter(Boolean)}hasContent(){return this.getContent().length>0}changeContent(e){return this._checkContent(e),this._config.content={...this._config.content,...e},this}toHtml(){const e=document.createElement("div");e.innerHTML=this._maybeSanitize(this._config.template);for(const[r,o]of Object.entries(this._config.content))this._setContent(e,o,r);const n=e.children[0],i=this._resolvePossibleFunction(this._config.extraClass);return i&&n.classList.add(...i.split(" ")),n}_typeCheckConfig(e){super._typeCheckConfig(e),this._checkContent(e.content)}_checkContent(e){for(const[n,i]of Object.entries(e))super._typeCheckConfig({selector:n,entry:i},qK)}_setContent(e,n,i){const r=Ce.findOne(i,e);if(r){if(n=this._resolvePossibleFunction(n),!n){r.remove();return}if(sr(n)){this._putElementInTemplate(Kr(n),r);return}if(this._config.html){r.innerHTML=this._maybeSanitize(n);return}r.textContent=n}}_maybeSanitize(e){return this._config.sanitize?WK(e,this._config.allowList,this._config.sanitizeFn):e}_resolvePossibleFunction(e){return typeof e=="function"?e(this):e}_putElementInTemplate(e,n){if(this._config.html){n.innerHTML="",n.append(e);return}n.textContent=e.textContent}}const GK="tooltip",zK=new Set(["sanitize","allowList","sanitizeFn"]),Cp="fade",YK="modal",gu="show",XK=".tooltip-inner",qw=`.${YK}`,Kw="hide.bs.modal",Ba="hover",Ip="focus",QK="click",JK="manual",ZK="hide",eG="hidden",tG="show",nG="shown",iG="inserted",rG="click",sG="focusin",oG="focusout",aG="mouseenter",lG="mouseleave",cG={AUTO:"auto",TOP:"top",RIGHT:Qn()?"left":"right",BOTTOM:"bottom",LEFT:Qn()?"right":"left"},uG={allowList:rS,animation:!0,boundary:"clippingParents",container:!1,customClass:"",delay:0,fallbackPlacements:["top","right","bottom","left"],html:!1,offset:[0,0],placement:"top",popperConfig:null,sanitize:!0,sanitizeFn:null,selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',title:"",trigger:"hover focus"},hG={allowList:"object",animation:"boolean",boundary:"(string|element)",container:"(string|element|boolean)",customClass:"(string|function)",delay:"(number|object)",fallbackPlacements:"array",html:"boolean",offset:"(array|string|function)",placement:"(string|function)",popperConfig:"(null|object|function)",sanitize:"boolean",sanitizeFn:"(null|function)",selector:"(string|boolean)",template:"string",title:"(string|element|function)",trigger:"string"};class ga extends _i{constructor(e,n){if(typeof RA>"u")throw new TypeError("Bootstrap's tooltips require Popper (https://popper.js.org)");super(e,n),this._isEnabled=!0,this._timeout=0,this._isHovered=null,this._activeTrigger={},this._popper=null,this._templateFactory=null,this._newContent=null,this.tip=null,this._setListeners(),this._config.selector||this._fixTitle()}static get Default(){return uG}static get DefaultType(){return hG}static get NAME(){return GK}enable(){this._isEnabled=!0}disable(){this._isEnabled=!1}toggleEnabled(){this._isEnabled=!this._isEnabled}toggle(){if(this._isEnabled){if(this._activeTrigger.click=!this._activeTrigger.click,this._isShown()){this._leave();return}this._enter()}}dispose(){clearTimeout(this._timeout),U.off(this._element.closest(qw),Kw,this._hideModalHandler),this._element.getAttribute("data-bs-original-title")&&this._element.setAttribute("title",this._element.getAttribute("data-bs-original-title")),this._disposePopper(),super.dispose()}show(){if(this._element.style.display==="none")throw new Error("Please use show on visible elements");if(!(this._isWithContent()&&this._isEnabled))return;const e=U.trigger(this._element,this.constructor.eventName(tG)),i=(PA(this._element)||this._element.ownerDocument.documentElement).contains(this._element);if(e.defaultPrevented||!i)return;this._disposePopper();const r=this._getTipElement();this._element.setAttribute("aria-describedby",r.getAttribute("id"));const{container:o}=this._config;if(this._element.ownerDocument.documentElement.contains(this.tip)||(o.append(r),U.trigger(this._element,this.constructor.eventName(iG))),this._popper=this._createPopper(r),r.classList.add(gu),"ontouchstart"in document.documentElement)for(const u of[].concat(...document.body.children))U.on(u,"mouseover",_h);const l=()=>{U.trigger(this._element,this.constructor.eventName(nG)),this._isHovered===!1&&this._leave(),this._isHovered=!1};this._queueCallback(l,this.tip,this._isAnimated())}hide(){if(!this._isShown()||U.trigger(this._element,this.constructor.eventName(ZK)).defaultPrevented)return;if(this._getTipElement().classList.remove(gu),"ontouchstart"in document.documentElement)for(const r of[].concat(...document.body.children))U.off(r,"mouseover",_h);this._activeTrigger[QK]=!1,this._activeTrigger[Ip]=!1,this._activeTrigger[Ba]=!1,this._isHovered=null;const i=()=>{this._isWithActiveTrigger()||(this._isHovered||this._disposePopper(),this._element.removeAttribute("aria-describedby"),U.trigger(this._element,this.constructor.eventName(eG)))};this._queueCallback(i,this.tip,this._isAnimated())}update(){this._popper&&this._popper.update()}_isWithContent(){return Boolean(this._getTitle())}_getTipElement(){return this.tip||(this.tip=this._createTipElement(this._newContent||this._getContentForTemplate())),this.tip}_createTipElement(e){const n=this._getTemplateFactory(e).toHtml();if(!n)return null;n.classList.remove(Cp,gu),n.classList.add(`bs-${this.constructor.NAME}-auto`);const i=Xj(this.constructor.NAME).toString();return n.setAttribute("id",i),this._isAnimated()&&n.classList.add(Cp),n}setContent(e){this._newContent=e,this._isShown()&&(this._disposePopper(),this.show())}_getTemplateFactory(e){return this._templateFactory?this._templateFactory.changeContent(e):this._templateFactory=new KK({...this._config,content:e,extraClass:this._resolvePossibleFunction(this._config.customClass)}),this._templateFactory}_getContentForTemplate(){return{[XK]:this._getTitle()}}_getTitle(){return this._resolvePossibleFunction(this._config.title)||this._element.getAttribute("data-bs-original-title")}_initializeOnDelegatedTarget(e){return this.constructor.getOrCreateInstance(e.delegateTarget,this._getDelegateConfig())}_isAnimated(){return this._config.animation||this.tip&&this.tip.classList.contains(Cp)}_isShown(){return this.tip&&this.tip.classList.contains(gu)}_createPopper(e){const n=typeof this._config.placement=="function"?this._config.placement.call(this,e,this._element):this._config.placement,i=cG[n.toUpperCase()];return xm(this._element,e,this._getPopperConfig(i))}_getOffset(){const{offset:e}=this._config;return typeof e=="string"?e.split(",").map(n=>Number.parseInt(n,10)):typeof e=="function"?n=>e(n,this._element):e}_resolvePossibleFunction(e){return typeof e=="function"?e.call(this._element):e}_getPopperConfig(e){const n={placement:e,modifiers:[{name:"flip",options:{fallbackPlacements:this._config.fallbackPlacements}},{name:"offset",options:{offset:this._getOffset()}},{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"arrow",options:{element:`.${this.constructor.NAME}-arrow`}},{name:"preSetPlacement",enabled:!0,phase:"beforeMain",fn:i=>{this._getTipElement().setAttribute("data-popper-placement",i.state.placement)}}]};return{...n,...typeof this._config.popperConfig=="function"?this._config.popperConfig(n):this._config.popperConfig}}_setListeners(){const e=this._config.trigger.split(" ");for(const n of e)if(n==="click")U.on(this._element,this.constructor.eventName(rG),this._config.selector,i=>{this._initializeOnDelegatedTarget(i).toggle()});else if(n!==JK){const i=n===Ba?this.constructor.eventName(aG):this.constructor.eventName(sG),r=n===Ba?this.constructor.eventName(lG):this.constructor.eventName(oG);U.on(this._element,i,this._config.selector,o=>{const l=this._initializeOnDelegatedTarget(o);l._activeTrigger[o.type==="focusin"?Ip:Ba]=!0,l._enter()}),U.on(this._element,r,this._config.selector,o=>{const l=this._initializeOnDelegatedTarget(o);l._activeTrigger[o.type==="focusout"?Ip:Ba]=l._element.contains(o.relatedTarget),l._leave()})}this._hideModalHandler=()=>{this._element&&this.hide()},U.on(this._element.closest(qw),Kw,this._hideModalHandler)}_fixTitle(){const e=this._element.getAttribute("title");e&&(!this._element.getAttribute("aria-label")&&!this._element.textContent.trim()&&this._element.setAttribute("aria-label",e),this._element.setAttribute("data-bs-original-title",e),this._element.removeAttribute("title"))}_enter(){if(this._isShown()||this._isHovered){this._isHovered=!0;return}this._isHovered=!0,this._setTimeout(()=>{this._isHovered&&this.show()},this._config.delay.show)}_leave(){this._isWithActiveTrigger()||(this._isHovered=!1,this._setTimeout(()=>{this._isHovered||this.hide()},this._config.delay.hide))}_setTimeout(e,n){clearTimeout(this._timeout),this._timeout=setTimeout(e,n)}_isWithActiveTrigger(){return Object.values(this._activeTrigger).includes(!0)}_getConfig(e){const n=or.getDataAttributes(this._element);for(const i of Object.keys(n))zK.has(i)&&delete n[i];return e={...n,...typeof e=="object"&&e?e:{}},e=this._mergeConfigObj(e),e=this._configAfterMerge(e),this._typeCheckConfig(e),e}_configAfterMerge(e){return e.container=e.container===!1?document.body:Kr(e.container),typeof e.delay=="number"&&(e.delay={show:e.delay,hide:e.delay}),typeof e.title=="number"&&(e.title=e.title.toString()),typeof e.content=="number"&&(e.content=e.content.toString()),e}_getDelegateConfig(){const e={};for(const n in this._config)this.constructor.Default[n]!==this._config[n]&&(e[n]=this._config[n]);return e.selector=!1,e.trigger="manual",e}_disposePopper(){this._popper&&(this._popper.destroy(),this._popper=null),this.tip&&(this.tip.remove(),this.tip=null)}static jQueryInterface(e){return this.each(function(){const n=ga.getOrCreateInstance(this,e);if(typeof e=="string"){if(typeof n[e]>"u")throw new TypeError(`No method named "${e}"`);n[e]()}})}}Zn(ga);const fG="popover",dG=".popover-header",pG=".popover-body",gG={...ga.Default,content:"",offset:[0,8],placement:"right",template:'<div class="popover" role="tooltip"><div class="popover-arrow"></div><h3 class="popover-header"></h3><div class="popover-body"></div></div>',trigger:"click"},_G={...ga.DefaultType,content:"(null|string|element|function)"};class km extends ga{static get Default(){return gG}static get DefaultType(){return _G}static get NAME(){return fG}_isWithContent(){return this._getTitle()||this._getContent()}_getContentForTemplate(){return{[dG]:this._getTitle(),[pG]:this._getContent()}}_getContent(){return this._resolvePossibleFunction(this._config.content)}static jQueryInterface(e){return this.each(function(){const n=km.getOrCreateInstance(this,e);if(typeof e=="string"){if(typeof n[e]>"u")throw new TypeError(`No method named "${e}"`);n[e]()}})}}Zn(km);const mG="scrollspy",vG="bs.scrollspy",Mm=`.${vG}`,yG=".data-api",EG=`activate${Mm}`,Gw=`click${Mm}`,bG=`load${Mm}${yG}`,wG="dropdown-item",vo="active",TG='[data-bs-spy="scroll"]',Ap="[href]",CG=".nav, .list-group",zw=".nav-link",IG=".nav-item",AG=".list-group-item",SG=`${zw}, ${IG} > ${zw}, ${AG}`,OG=".dropdown",NG=".dropdown-toggle",RG={offset:null,rootMargin:"0px 0px -25%",smoothScroll:!1,target:null,threshold:[.1,.5,1]},xG={offset:"(number|null)",rootMargin:"string",smoothScroll:"boolean",target:"element",threshold:"array"};class bf extends _i{constructor(e,n){super(e,n),this._targetLinks=new Map,this._observableSections=new Map,this._rootElement=getComputedStyle(this._element).overflowY==="visible"?null:this._element,this._activeTarget=null,this._observer=null,this._previousScrollData={visibleEntryTop:0,parentScrollTop:0},this.refresh()}static get Default(){return RG}static get DefaultType(){return xG}static get NAME(){return mG}refresh(){this._initializeTargetsAndObservables(),this._maybeEnableSmoothScroll(),this._observer?this._observer.disconnect():this._observer=this._getNewObserver();for(const e of this._observableSections.values())this._observer.observe(e)}dispose(){this._observer.disconnect(),super.dispose()}_configAfterMerge(e){return e.target=Kr(e.target)||document.body,e.rootMargin=e.offset?`${e.offset}px 0px -30%`:e.rootMargin,typeof e.threshold=="string"&&(e.threshold=e.threshold.split(",").map(n=>Number.parseFloat(n))),e}_maybeEnableSmoothScroll(){this._config.smoothScroll&&(U.off(this._config.target,Gw),U.on(this._config.target,Gw,Ap,e=>{const n=this._observableSections.get(e.target.hash);if(n){e.preventDefault();const i=this._rootElement||window,r=n.offsetTop-this._element.offsetTop;if(i.scrollTo){i.scrollTo({top:r,behavior:"smooth"});return}i.scrollTop=r}}))}_getNewObserver(){const e={root:this._rootElement,threshold:this._config.threshold,rootMargin:this._config.rootMargin};return new IntersectionObserver(n=>this._observerCallback(n),e)}_observerCallback(e){const n=l=>this._targetLinks.get(`#${l.target.id}`),i=l=>{this._previousScrollData.visibleEntryTop=l.target.offsetTop,this._process(n(l))},r=(this._rootElement||document.documentElement).scrollTop,o=r>=this._previousScrollData.parentScrollTop;this._previousScrollData.parentScrollTop=r;for(const l of e){if(!l.isIntersecting){this._activeTarget=null,this._clearActiveClass(n(l));continue}const u=l.target.offsetTop>=this._previousScrollData.visibleEntryTop;if(o&&u){if(i(l),!r)return;continue}!o&&!u&&i(l)}}_initializeTargetsAndObservables(){this._targetLinks=new Map,this._observableSections=new Map;const e=Ce.find(Ap,this._config.target);for(const n of e){if(!n.hash||Gr(n))continue;const i=Ce.findOne(n.hash,this._element);da(i)&&(this._targetLinks.set(n.hash,n),this._observableSections.set(n.hash,i))}}_process(e){this._activeTarget!==e&&(this._clearActiveClass(this._config.target),this._activeTarget=e,e.classList.add(vo),this._activateParents(e),U.trigger(this._element,EG,{relatedTarget:e}))}_activateParents(e){if(e.classList.contains(wG)){Ce.findOne(NG,e.closest(OG)).classList.add(vo);return}for(const n of Ce.parents(e,CG))for(const i of Ce.prev(n,SG))i.classList.add(vo)}_clearActiveClass(e){e.classList.remove(vo);const n=Ce.find(`${Ap}.${vo}`,e);for(const i of n)i.classList.remove(vo)}static jQueryInterface(e){return this.each(function(){const n=bf.getOrCreateInstance(this,e);if(typeof e=="string"){if(n[e]===void 0||e.startsWith("_")||e==="constructor")throw new TypeError(`No method named "${e}"`);n[e]()}})}}U.on(window,bG,()=>{for(const t of Ce.find(TG))bf.getOrCreateInstance(t)});Zn(bf);const DG="tab",LG="bs.tab",zs=`.${LG}`,PG=`hide${zs}`,kG=`hidden${zs}`,MG=`show${zs}`,$G=`shown${zs}`,FG=`click${zs}`,UG=`keydown${zs}`,BG=`load${zs}`,WG="ArrowLeft",Yw="ArrowRight",HG="ArrowUp",Xw="ArrowDown",Is="active",Qw="fade",Sp="show",VG="dropdown",jG=".dropdown-toggle",qG=".dropdown-menu",Op=":not(.dropdown-toggle)",KG='.list-group, .nav, [role="tablist"]',GG=".nav-item, .list-group-item",zG=`.nav-link${Op}, .list-group-item${Op}, [role="tab"]${Op}`,sS='[data-bs-toggle="tab"], [data-bs-toggle="pill"], [data-bs-toggle="list"]',Np=`${zG}, ${sS}`,YG=`.${Is}[data-bs-toggle="tab"], .${Is}[data-bs-toggle="pill"], .${Is}[data-bs-toggle="list"]`;class Qo extends _i{constructor(e){super(e),this._parent=this._element.closest(KG),this._parent&&(this._setInitialAttributes(this._parent,this._getChildren()),U.on(this._element,UG,n=>this._keydown(n)))}static get NAME(){return DG}show(){const e=this._element;if(this._elemIsActive(e))return;const n=this._getActiveElem(),i=n?U.trigger(n,PG,{relatedTarget:e}):null;U.trigger(e,MG,{relatedTarget:n}).defaultPrevented||i&&i.defaultPrevented||(this._deactivate(n,e),this._activate(e,n))}_activate(e,n){if(!e)return;e.classList.add(Is),this._activate(rr(e));const i=()=>{if(e.getAttribute("role")!=="tab"){e.classList.add(Sp);return}e.removeAttribute("tabindex"),e.setAttribute("aria-selected",!0),this._toggleDropDown(e,!0),U.trigger(e,$G,{relatedTarget:n})};this._queueCallback(i,e,e.classList.contains(Qw))}_deactivate(e,n){if(!e)return;e.classList.remove(Is),e.blur(),this._deactivate(rr(e));const i=()=>{if(e.getAttribute("role")!=="tab"){e.classList.remove(Sp);return}e.setAttribute("aria-selected",!1),e.setAttribute("tabindex","-1"),this._toggleDropDown(e,!1),U.trigger(e,kG,{relatedTarget:n})};this._queueCallback(i,e,e.classList.contains(Qw))}_keydown(e){if(![WG,Yw,HG,Xw].includes(e.key))return;e.stopPropagation(),e.preventDefault();const n=[Yw,Xw].includes(e.key),i=Dm(this._getChildren().filter(r=>!Gr(r)),e.target,n,!0);i&&(i.focus({preventScroll:!0}),Qo.getOrCreateInstance(i).show())}_getChildren(){return Ce.find(Np,this._parent)}_getActiveElem(){return this._getChildren().find(e=>this._elemIsActive(e))||null}_setInitialAttributes(e,n){this._setAttributeIfNotExists(e,"role","tablist");for(const i of n)this._setInitialAttributesOnChild(i)}_setInitialAttributesOnChild(e){e=this._getInnerElement(e);const n=this._elemIsActive(e),i=this._getOuterElement(e);e.setAttribute("aria-selected",n),i!==e&&this._setAttributeIfNotExists(i,"role","presentation"),n||e.setAttribute("tabindex","-1"),this._setAttributeIfNotExists(e,"role","tab"),this._setInitialAttributesOnTargetPanel(e)}_setInitialAttributesOnTargetPanel(e){const n=rr(e);n&&(this._setAttributeIfNotExists(n,"role","tabpanel"),e.id&&this._setAttributeIfNotExists(n,"aria-labelledby",`#${e.id}`))}_toggleDropDown(e,n){const i=this._getOuterElement(e);if(!i.classList.contains(VG))return;const r=(o,l)=>{const u=Ce.findOne(o,i);u&&u.classList.toggle(l,n)};r(jG,Is),r(qG,Sp),i.setAttribute("aria-expanded",n)}_setAttributeIfNotExists(e,n,i){e.hasAttribute(n)||e.setAttribute(n,i)}_elemIsActive(e){return e.classList.contains(Is)}_getInnerElement(e){return e.matches(Np)?e:Ce.findOne(Np,e)}_getOuterElement(e){return e.closest(GG)||e}static jQueryInterface(e){return this.each(function(){const n=Qo.getOrCreateInstance(this);if(typeof e=="string"){if(n[e]===void 0||e.startsWith("_")||e==="constructor")throw new TypeError(`No method named "${e}"`);n[e]()}})}}U.on(document,FG,sS,function(t){["A","AREA"].includes(this.tagName)&&t.preventDefault(),!Gr(this)&&Qo.getOrCreateInstance(this).show()});U.on(window,BG,()=>{for(const t of Ce.find(YG))Qo.getOrCreateInstance(t)});Zn(Qo);const XG="toast",QG="bs.toast",Jr=`.${QG}`,JG=`mouseover${Jr}`,ZG=`mouseout${Jr}`,ez=`focusin${Jr}`,tz=`focusout${Jr}`,nz=`hide${Jr}`,iz=`hidden${Jr}`,rz=`show${Jr}`,sz=`shown${Jr}`,oz="fade",Jw="hide",_u="show",mu="showing",az={animation:"boolean",autohide:"boolean",delay:"number"},lz={animation:!0,autohide:!0,delay:5e3};class wf extends _i{constructor(e,n){super(e,n),this._timeout=null,this._hasMouseInteraction=!1,this._hasKeyboardInteraction=!1,this._setListeners()}static get Default(){return lz}static get DefaultType(){return az}static get NAME(){return XG}show(){if(U.trigger(this._element,rz).defaultPrevented)return;this._clearTimeout(),this._config.animation&&this._element.classList.add(oz);const n=()=>{this._element.classList.remove(mu),U.trigger(this._element,sz),this._maybeScheduleHide()};this._element.classList.remove(Jw),ec(this._element),this._element.classList.add(_u,mu),this._queueCallback(n,this._element,this._config.animation)}hide(){if(!this.isShown()||U.trigger(this._element,nz).defaultPrevented)return;const n=()=>{this._element.classList.add(Jw),this._element.classList.remove(mu,_u),U.trigger(this._element,iz)};this._element.classList.add(mu),this._queueCallback(n,this._element,this._config.animation)}dispose(){this._clearTimeout(),this.isShown()&&this._element.classList.remove(_u),super.dispose()}isShown(){return this._element.classList.contains(_u)}_maybeScheduleHide(){this._config.autohide&&(this._hasMouseInteraction||this._hasKeyboardInteraction||(this._timeout=setTimeout(()=>{this.hide()},this._config.delay)))}_onInteraction(e,n){switch(e.type){case"mouseover":case"mouseout":{this._hasMouseInteraction=n;break}case"focusin":case"focusout":{this._hasKeyboardInteraction=n;break}}if(n){this._clearTimeout();return}const i=e.relatedTarget;this._element===i||this._element.contains(i)||this._maybeScheduleHide()}_setListeners(){U.on(this._element,JG,e=>this._onInteraction(e,!0)),U.on(this._element,ZG,e=>this._onInteraction(e,!1)),U.on(this._element,ez,e=>this._onInteraction(e,!0)),U.on(this._element,tz,e=>this._onInteraction(e,!1))}_clearTimeout(){clearTimeout(this._timeout),this._timeout=null}static jQueryInterface(e){return this.each(function(){const n=wf.getOrCreateInstance(this,e);if(typeof e=="string"){if(typeof n[e]>"u")throw new TypeError(`No method named "${e}"`);n[e](this)}})}}vf(wf);Zn(wf);class cz{constructor(){}async Init(){await this.LoadUser()}async LoadUser(){let e=this.GetSessionId(),n=await(await Xh(li(ua,`users/${e}`))).val(),i,r;!e||!n?qn.emit("open-settings-modal",(o,l)=>{this.CacheUser(o,l,!0)}):(i=n.username,r=n.useGPS,se.commit("saveUseGPS",r),se.commit("saveUsername",i),se.commit("saveSessionId",e)),Ze.DataCheck()}GetSessionId(){let e=localStorage.getItem("sessionId");if(e&&e!="undefined")return e}CacheUser(e,n,i=!1){let r,o={};r=i?Ze.uuidv4():se.getters.sessionId;let l=se.getters.users[r];o=l?{...o,...l}:o,o.username=e,o.useGPS=n,Us(Rt(Br,r),o),localStorage.setItem("sessionId",r),se.commit("saveUseGPS",n),se.commit("saveUsername",e),se.commit("saveSessionId",r)}async Disconnect(){let e=se.getters.sessionId,n=se.getters.currentSquad;await Ns(Rt(qa,`${n}/userIds/${e}`)),await Ns(Rt(Br,`${e}/squadId`)),await Ns(Rt(Br,`${e}/teamId`))}currentTeamSquad(){let e=se.getters.user;if(!(e.squadId==null||e.teamId==null))return{squadId:e.squadId,teamId:e.teamId}}}const sl=new cz;class uz{constructor(){$d(this,"location",{});$d(this,"lastCoord",{lat:0,long:0})}Init(){se.commit("saveLocation",location),this.Update()}async Update(){if(console.log("tick"),se.getters.useGPS){let e=await this.ScanLocation(!0);e&&(this.location=e,se.commit("saveLocation",this.location),sl.currentTeamSquad()&&this.UpdateUserLocation())}this.CleanSpotMarkers(),setTimeout(()=>this.Update(),Ii.tickRateMS)}async UpdateUserLocation(){Ze.CoordDistance(this.location.lat,this.location.long,this.lastCoord.lat,this.lastCoord.long)>Ii.updateMeters&&se.getters.user&&await Us(Rt(Br,se.getters.sessionId+"/location"),this.location)}async GetLocation(){return new Promise((e,n)=>{navigator.geolocation.getCurrentPosition(i=>{let r={lat:i.coords.latitude,long:i.coords.longitude};return e(r)},i=>console.log(i),Ii.geoLocationOptions)})}async ScanLocation(e=!1){let n={lat:0,long:0};if(e){let i=[36.16360240464562,-115.18453981692234],r=Ze.randomGeo({lat:i[0],long:i[1]},2e4);return n={lat:Number.parseFloat(r.latitude),long:Number.parseFloat(r.longitude)},n}else return await this.GetLocation()}async createSpotMarker(e,n){let i=Ze.uuidv4(),r={teamId:se.getters.user.teamId,markerType:n,lat:e.lat,long:e.long,owner:se.getters.sessionId,createTime:new Date().getTime()};return await Us(Rt(gp,i),r),i}async removeSpotMarker(e){await Ns(Rt(gp,e))}async CleanSpotMarkers(){let e=new Date().getTime(),n=se.getters.spotDurationMS,i=se.getters.markers;!se.getters.markers||!n||Object.keys(i).forEach(async r=>{let o=i[r];e-o.createTime>n&&await Ns(Rt(gp,r))})}}const Mg=new uz,hz={data(){return{teams:[],squads:{},users:{}}},methods:{openModal(){qn.emit("open-settings-modal",(t,e)=>{sl.CacheUser(t,e)})},async joinSquad(t,e){let n=se.getters.sessionId,i=se.getters.users.isSquadLeader,r=sl.currentTeamSquad();r&&await Ns(Rt(qa,`${r.squadId}/userIds/${n}`));let o=this.squads[e],l=(o==null?void 0:o.userIds)==null;if(await Us(Rt(qa,`${e}/userIds/${n}`),{joinTime:new Date().getTime(),userId:n,isSquadLeader:l}),await Iu(Rt(Br,n),{teamId:t,squadId:e,isSquadLeader:l}),r&&i){let u=r.squadId,h=this.sortByJoinTime(this.squads[u].userIds);if(h&&h[0]!=null){let d=h[0];console.log(d),await Iu(Rt(qa,`${u}/userIds/${d.userId}`),{joinTime:new Date().getTime(),userId:d.userId,isSquadLeader:!0}),await Iu(Rt(Br,d.userId),{isSquadLeader:!0})}}},sortByJoinTime(t){if(!t)return[];let n=Object.keys(t).map(i=>t[i]);return Nl.orderBy(n,"joinTime")},Disconnect(){sl.Disconnect()},usernameColor(t,e,n){if(se.getters.sessionId){if(t==se.getters.sessionId)return"isMe";if(e==se.getters.user.squadId)return"isSquad";if(n==se.getters.user.teamId)return"isTeam"}},GoToUser(t){qn.emit("go-to-user",t),qn.emit("toggle-sidebar")}},mounted(){let t=document.getElementById("offcanvasExample"),e=new fr(t);qn.on("toggle-sidebar",()=>{e.toggle()}),this.squads=pw(qa),this.teams=vV(EV),this.users=pw(Br)},computed:{orderedTeams:function(){return Nl.orderBy(this.teams,"index")}}};const rc=t=>(Oh("data-v-5df9c3e0"),t=t(),Nh(),t),fz={class:"offcanvas offcanvas-start",tabindex:"-1",id:"offcanvasExample","aria-labelledby":"offcanvasExampleLabel"},dz={class:"offcanvas-body"},pz=rc(()=>be("div",{class:"offcanvas-title"},"TEAMS",-1)),gz={class:"team-header"},_z=["onClick"],mz=rc(()=>be("i",{class:"bi bi-box-arrow-in-down-right float-end"},null,-1)),vz=["onClick"],yz={key:0,class:"bi bi-star-fill me-1"},Ez={class:"ps-3 pt-2 pb-2"},bz=rc(()=>be("div",{class:"offcanvas-title"},"Playing As",-1)),wz=rc(()=>be("i",{class:"bi bi-box-arrow-right"},null,-1)),Tz=[wz],Cz={key:0,class:"btn btn-sm btn-outline-primary d-inline float-end me-2 dev-only",id:"log-button",type:"button","data-bs-toggle":"offcanvas",href:"#logOffCanvas",role:"button","aria-controls":"logOffCanvas"},Iz=rc(()=>be("i",{class:"bi bi-code-square"},null,-1)),Az=[Iz];function Sz(t,e,n,i,r,o){return Ve(),Je("div",fz,[be("div",dz,[pz,(Ve(!0),Je(Ot,null,Ga(o.orderedTeams,l=>(Ve(),Je("div",{class:"team",key:l.id},[be("h2",gz,vs(l.teamName),1),(Ve(!0),Je(Ot,null,Ga(l.squadIds,u=>(Ve(),Je("div",{class:"squad ms-4 mb-2",id:"squad-{{squad.id}}",key:u},[be("div",{class:"squad-header",onClick:h=>o.joinSquad(l.id,u)},[Vp(vs(r.squads[u].squadName)+" ",1),mz],8,_z),(Ve(!0),Je(Ot,null,Ga(o.sortByJoinTime(r.squads[u].userIds),h=>(Ve(),Je("div",{class:"squad-member ms-4 mt-2 mb-2",key:h.userId},[r.users!=null&&r.users[h.userId]!=null?(Ve(),Je("div",{key:0,class:xl(o.usernameColor(h.userId,u,l.id)),onClick:d=>o.GoToUser(h.userId)},[r.users[h.userId].isSquadLeader?(Ve(),Je("i",yz)):An("",!0),Vp(" "+vs(r.users[h.userId].username),1)],10,vz)):An("",!0)]))),128))]))),128))]))),128))]),be("footer",Ez,[bz,be("div",null,[be("h5",{class:"d-inline align-middle",onClick:e[0]||(e[0]=(...l)=>o.openModal&&o.openModal(...l)),id:"username-display"},vs(r.users&&r.users[t.$store.getters.sessionId]?r.users[t.$store.getters.sessionId].username:"unde"),1),be("button",{class:"btn btn-sm btn-outline-primary d-inline float-end me-2",id:"disconnect-button",type:"button",onClick:e[1]||(e[1]=l=>o.Disconnect())},Tz),t.$store.getters.isAdmin?(Ve(),Je("button",Cz,Az)):An("",!0)])])])}const Oz=Jl(hz,[["render",Sz],["__scopeId","data-v-5df9c3e0"]]);let Rp,Zw;const Nz={data(){return{username:"",useGPS:!1,error:!1,onCloseCallback:void 0}},methods:{Save(t){t.stopPropagation(),this.error=!1,!this.username||this.username.length==0?this.error=!0:(Zw(this.username,this.useGPS==null?!1:this.useGPS),Rp.hide())}},mounted(){this.$refs.modalRef&&(Rp=new Hs(this.$refs.modalRef)),qn.on("open-settings-modal",t=>{Zw=t,this.username=se.getters.username,this.useGPS=se.getters.useGPS,Rp.show()})}};const sc=t=>(Oh("data-v-e77368fd"),t=t(),Nh(),t),Rz={class:"modal fade",tabindex:"-1","aria-hidden":"true",ref:"modalRef"},xz={class:"modal-dialog"},Dz={class:"modal-content"},Lz=sc(()=>be("div",{class:"modal-header"},[be("h5",{class:"modal-title",id:"exampleModalLabel"},"Settings"),be("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1)),Pz={class:"modal-body"},kz={ref:"form",class:"needs-validation"},Mz={class:"mb-4"},$z=sc(()=>be("label",{for:"validationDefaultUsername",class:"form-label"},"Username",-1)),Fz={class:"input-group"},Uz=sc(()=>be("div",{class:"invalid-feedback"},"Please choose a username.",-1)),Bz={class:"mb-2"},Wz=sc(()=>be("label",{for:"validationDefaultUsername",class:"form-label"},"GPS Tracking",-1)),Hz={class:"form-check form-switch"},Vz=sc(()=>be("label",{class:"form-check-label",for:"flexSwitchCheckDefault"},"By turning on GPS tracking, you will be able to share your device location with your teammates.",-1)),jz={class:"modal-footer"};function qz(t,e,n,i,r,o){return Ve(),Je("div",Rz,[be("div",xz,[be("div",Dz,[Lz,be("div",Pz,[be("form",kz,[be("div",Mz,[$z,be("div",Fz,[AE(be("input",{type:"text",class:xl(["form-control",{"is-invalid":r.error}]),id:"validationDefaultUsername","onUpdate:modelValue":e[0]||(e[0]=l=>r.username=l),required:""},null,2),[[mM,r.username]])]),Uz]),be("div",Bz,[Wz,be("div",Hz,[AE(be("input",{class:"form-check-input",type:"checkbox",id:"flexSwitchCheckDefault","onUpdate:modelValue":e[1]||(e[1]=l=>r.useGPS=l)},null,512),[[vM,r.useGPS]]),Vz])])],512)]),be("div",jz,[yk(t.$slots,"footer",{},void 0,!0),be("button",{class:"btn btn-secondary",type:"submit",onClick:e[2]||(e[2]=(...l)=>o.Save&&o.Save(...l))}," Save ")])])])],512)}const Kz=Jl(Nz,[["render",qz],["__scopeId","data-v-e77368fd"]]);const Gz="modulepreload",zz=function(t){return"/"+t},eT={},ar=function(e,n,i){if(!n||n.length===0)return e();const r=document.getElementsByTagName("link");return Promise.all(n.map(o=>{if(o=zz(o),o in eT)return;eT[o]=!0;const l=o.endsWith(".css"),u=l?'[rel="stylesheet"]':"";if(!!i)for(let p=r.length-1;p>=0;p--){const _=r[p];if(_.href===o&&(!l||_.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${o}"]${u}`))return;const d=document.createElement("link");if(d.rel=l?"stylesheet":Gz,l||(d.as="script",d.crossOrigin=""),d.href=o,document.head.appendChild(d),l)return new Promise((p,_)=>{d.addEventListener("load",p),d.addEventListener("error",()=>_(new Error(`Unable to preload CSS for ${o}`)))})})).then(()=>e())},oS=(t,e)=>{let n;return function(...i){const r=this;n&&clearTimeout(n),n=setTimeout(()=>{t.apply(r,i),n=null},e)}},Yz=t=>!t||typeof t.charAt!="function"?t:t.charAt(0).toUpperCase()+t.slice(1),yo=t=>typeof t=="function",oc=(t,e,n)=>{for(const i in n){const r="set"+Yz(i);t[r]?kr(()=>n[i],(o,l)=>{t[r](o,l)}):e[r]&&kr(()=>n[i],o=>{e[r](o)})}},ac=t=>{const e={};for(const n in t)if(n.startsWith("on")&&!n.startsWith("onUpdate")&&n!=="onReady"){const i=n.slice(2).toLocaleLowerCase();e[i]=t[n]}return e},Xz=async t=>{const e=await Promise.all([ar(()=>import("./marker-icon-2x.js"),[]),ar(()=>import("./marker-icon.js"),[]),ar(()=>import("./marker-shadow.js"),[])]);delete t.Default.prototype._getIconUrl,t.Default.mergeOptions({iconRetinaUrl:e[0].default,iconUrl:e[1].default,shadowUrl:e[2].default})},vu=t=>{const e=On(()=>console.warn(`Method ${t} has been invoked without being replaced`)),n=(...i)=>e.value(...i);return n.wrapped=e,Oi(t,n),n},yu=(t,e)=>t.wrapped.value=e,Ds=typeof self=="object"&&self.self===self&&self||typeof global=="object"&&global.global===global&&global||void 0,lc="useGlobalLeaflet",Tf={options:{type:Object,default:()=>({})}},Cf=t=>({options:t.options,methods:{}}),$m={...Tf,pane:{type:String,default:"overlayPane"},attribution:{type:String,default:null},name:{type:String,custom:!0,default:void 0},layerType:{type:String,custom:!0,default:void 0},visible:{type:Boolean,custom:!0,default:!0}},Fm=(t,e,n)=>{const i=wt("addLayer"),r=wt("removeLayer"),{options:o,methods:l}=Cf(t),u={...o,attribution:t.attribution,pane:t.pane},h=()=>i({leafletObject:e.value}),d=()=>r({leafletObject:e.value}),p={...l,setAttribution(_,y){this.$parent.leafletObject.attributionControl.removeAttribution(y).addAttribution(_)},setName(){d(),t.visible&&h()},setLayerType(){d(),t.visible&&h()},setVisible(_){e.value&&(_?h():d())},bindPopup({leafletObject:_}){if(!e.value||!yo(e.value.bindPopup)){console.warn("Attempt to bind popup before bindPopup method available on layer.");return}e.value.bindPopup(_)},bindTooltip({leafletObject:_}){if(!e.value||!yo(e.value.bindTooltip)){console.warn("Attempt to bind tooltip before bindTooltip method available on layer.");return}e.value.bindTooltip(_)},unbindTooltip(){const _=e.value&&yo(e.value.getTooltip)?e.value.getTooltip():null;_&&yo(_.unbindTooltip)&&_.unbindTooltip()},unbindPopup(){const _=e.value&&yo(e.value.getPopup)?e.value.getPopup():null;_&&yo(_.unbindPopup)&&_.unbindPopup()},updateVisibleProp(_){n.emit("update:visible",_)}};return Oi("bindPopup",p.bindPopup),Oi("bindTooltip",p.bindTooltip),Oi("unbindTooltip",p.unbindTooltip),Oi("unbindPopup",p.unbindPopup),Qg(()=>{p.unbindPopup(),p.unbindTooltip(),d()}),{options:u,methods:p}},aS=(t,e)=>{if(t&&e.default)return t_("div",{style:{display:"none"}},e.default())},Qz={...Tf,interactive:{type:Boolean,default:!0},bubblingMouseEvents:{type:Boolean,default:!0}},Jz=t=>{const{options:e,methods:n}=Cf(t);return{options:{...e,interactive:t.interactive,bubblingMouseEvents:t.bubblingMouseEvents},methods:n}},Zz={...$m,...Qz,stroke:{type:Boolean,custom:!0,default:!0},color:{type:String,custom:!0,default:"#3388ff"},weight:{type:Number,custom:!0,default:3},opacity:{type:Number,custom:!0,default:1},lineCap:{type:String,custom:!0,default:"round"},lineJoin:{type:String,custom:!0,default:"round"},dashArray:{type:String,custom:!0,default:null},dashOffset:{type:String,custom:!0,default:null},fill:{type:Boolean,custom:!0,default:!1},fillColor:{type:String,custom:!0,default:"#3388ff"},fillOpacity:{type:Number,custom:!0,default:.2},fillRule:{type:String,custom:!0,default:"evenodd"},className:{type:String,custom:!0,default:null}},e4=(t,e,n)=>{const{options:i,methods:r}=Fm(t,e,n),{options:o,methods:l}=Jz(t),u=wt("removeLayer"),h={...i,...o,stroke:t.stroke,color:t.color,weight:t.weight,opacity:t.opacity,lineCap:t.lineCap,lineJoin:t.lineJoin,dashArray:t.dashArray,dashOffset:t.dashOffset,fill:t.fill,fillColor:t.fillColor,fillOpacity:t.fillOpacity,fillRule:t.fillRule,className:t.className},d={...r,...l,setStroke(p){e.value.setStyle({stroke:p})},setColor(p){e.value.setStyle({color:p})},setWeight(p){e.value.setStyle({weight:p})},setOpacity(p){e.value.setStyle({opacity:p})},setLineCap(p){e.value.setStyle({lineCap:p})},setLineJoin(p){e.value.setStyle({lineJoin:p})},setDashArray(p){e.value.setStyle({dashArray:p})},setDashOffset(p){e.value.setStyle({dashOffset:p})},setFill(p){e.value.setStyle({fill:p})},setFillColor(p){e.value.setStyle({fillColor:p})},setFillOpacity(p){e.value.setStyle({fillOpacity:p})},setFillRule(p){e.value.setStyle({fillRule:p})},setClassName(p){e.value.setStyle({className:p})}};return Dh(()=>{u({leafletObject:e.value})}),{options:h,methods:d}},t4={...$m,pane:{type:String,default:"tilePane"},opacity:{type:Number,custom:!1,default:1},zIndex:{type:Number,default:1},tileSize:{type:Number,default:256},noWrap:{type:Boolean,default:!1},minZoom:{type:Number,default:0},maxZoom:{type:Number,default:void 0}},n4=(t,e,n)=>{const{options:i,methods:r}=Fm(t,e,n);return{options:{...i,pane:t.pane,opacity:t.opacity,zIndex:t.zIndex,tileSize:t.tileSize,noWrap:t.noWrap,minZoom:t.minZoom,maxZoom:t.maxZoom},methods:{...r}}},i4={iconUrl:{type:String,custom:!0,default:null},iconRetinaUrl:{type:String,custom:!0,default:null},iconSize:{type:[Object,Array],custom:!0,default:null},iconAnchor:{type:[Object,Array],custom:!0,default:null},popupAnchor:{type:[Object,Array],custom:!0,default:()=>[0,0]},tooltipAnchor:{type:[Object,Array],custom:!0,default:()=>[0,0]},shadowUrl:{type:String,custom:!0,default:null},shadowRetinaUrl:{type:String,custom:!0,default:null},shadowSize:{type:[Object,Array],custom:!0,default:null},shadowAnchor:{type:[Object,Array],custom:!0,default:null},bgPos:{type:[Object,Array],custom:!0,default:()=>[0,0]},className:{type:String,custom:!0,default:""},options:{type:Object,custom:!0,default:()=>({})}};var lS={name:"LIcon",props:{...i4,...Tf},setup(t,e){const n=On(null),i=wt(lc),r=wt("canSetParentHtml"),o=wt("setParentHtml"),l=wt("setIcon");let u,h,d,p,_;const y=(L,q,oe)=>{const H=L&&L.innerHTML;if(!q){oe&&_&&r()&&o(H);return}const V=ac(e.attrs);_&&h(_,V);const{options:Q}=Cf(t),B={...Q,iconUrl:t.iconUrl,iconRetinaUrl:t.iconRetinaUrl,iconSize:t.iconSize,iconAnchor:t.iconAnchor,popupAnchor:t.popupAnchor,tooltipAnchor:t.tooltipAnchor,shadowUrl:t.shadowUrl,shadowRetinaUrl:t.shadowRetinaUrl,shadowSize:t.shadowSize,shadowAnchor:t.shadowAnchor,bgPos:t.bgPos,className:t.className,html:H||t.html};_=B.html?d(B):p(B),u(_,V),l(_)},E=()=>{Ls(()=>y(n.value,!0,!1))},S=()=>{Ls(()=>y(n.value,!1,!0))},O={setIconUrl:E,setIconRetinaUrl:E,setIconSize:E,setIconAnchor:E,setPopupAnchor:E,setTooltipAnchor:E,setShadowUrl:E,setShadowRetinaUrl:E,setShadowAnchor:E,setBgPos:E,setClassName:E,setHtml:E};return Vs(async()=>{const{DomEvent:L,divIcon:q,icon:oe}=i?Ds.L:await ar(()=>import("./leaflet-src.esm.js"),[]);u=L.on,h=L.off,d=q,p=oe,oc(O,{},t),new MutationObserver(S).observe(n.value,{attributes:!0,childList:!0,characterData:!0,subtree:!0}),E()}),{root:n}},render(){const t=this.$slots.default?this.$slots.default():void 0;return t_("div",{ref:"root"},t)}};lS.__file="src/components/LIcon.vue";var cS={emits:["ready","update:zoom","update:center","update:bounds"],props:{...Tf,center:{type:[Object,Array],default:()=>[0,0]},bounds:{type:[Array,Object],default:void 0},maxBounds:{type:[Array,Object],default:void 0},zoom:{type:Number,default:0},minZoom:{type:Number,default:void 0},maxZoom:{type:Number,default:void 0},paddingBottomRight:{type:Array,default:void 0},paddingTopLeft:{type:Array,default:void 0},padding:{type:Array,default:void 0},worldCopyJump:{type:Boolean,default:!1},crs:{type:[String,Object],default:"EPSG3857"},maxBoundsViscosity:{type:Number,default:void 0},inertia:{type:Boolean,default:void 0},inertiaDeceleration:{type:Number,default:void 0},inertiaMaxSpeed:{type:Number,default:void 0},easeLinearity:{type:Number,default:void 0},zoomAnimation:{type:Boolean,default:void 0},zoomAnimationThreshold:{type:Number,default:void 0},fadeAnimation:{type:Boolean,default:void 0},markerZoomAnimation:{type:Boolean,default:void 0},noBlockingAnimations:{type:Boolean,default:!1},useGlobalLeaflet:{type:Boolean,default:!0}},setup(t,e){const n=On(null),i=Ll({ready:!1,leafletRef:{},layersToAdd:[],layersInControl:[]}),{options:r}=Cf(t),o={...r,minZoom:t.minZoom,maxZoom:t.maxZoom,maxBounds:t.maxBounds,maxBoundsViscosity:t.maxBoundsViscosity,worldCopyJump:t.worldCopyJump,crs:t.crs,center:t.center,zoom:t.zoom,inertia:t.inertia,inertiaDeceleration:t.inertiaDeceleration,inertiaMaxSpeed:t.inertiaMaxSpeed,easeLinearity:t.easeLinearity,zoomAnimation:t.zoomAnimation,zoomAnimationThreshold:t.zoomAnimationThreshold,fadeAnimation:t.fadeAnimation,markerZoomAnimation:t.markerZoomAnimation},l=vu("addLayer"),u=vu("removeLayer"),h=vu("registerControl"),d=vu("registerLayerControl");Oi(lc,t.useGlobalLeaflet);const p={moveEndHandler(){e.emit("update:zoom",i.leafletRef.getZoom()),e.emit("update:center",i.leafletRef.getCenter()),e.emit("update:bounds",i.leafletRef.getBounds())},overlayAddHandler(E){const S=i.layersInControl.find(O=>O.name===E.name);S&&S.updateVisibleProp(!0)},overlayRemoveHandler(E){const S=i.layersInControl.find(O=>O.name===E.name);S&&S.updateVisibleProp(!1)}};Vs(async()=>{t.useGlobalLeaflet&&(Ds.L=Ds.L||await ar(()=>import("./leaflet-src.js").then(B=>B.l),[]));const{map:E,CRS:S,Icon:O,latLngBounds:L,latLng:q,DomEvent:oe}=t.useGlobalLeaflet?Ds.L:await ar(()=>import("./leaflet-src.esm.js"),[]);try{o.beforeMapMount&&await o.beforeMapMount()}catch(B){console.error(`The following error occurred running the provided beforeMapMount hook ${B.message}`)}await Xz(O);const H=typeof o.crs=="string"?S[o.crs]:o.crs;o.crs=H||S.EPSG3857;const V={addLayer(B){B.layerType!==void 0&&(i.layerControl===void 0?i.layersToAdd.push(B):i.layersInControl.find(X=>X.leafletObject._leaflet_id===B.leafletObject._leaflet_id)||(i.layerControl.addLayer(B),i.layersInControl.push(B))),B.visible!==!1&&i.leafletRef.addLayer(B.leafletObject)},removeLayer(B){B.layerType!==void 0&&(i.layerControl===void 0?i.layersToAdd=i.layersToAdd.filter(Z=>Z.name!==B.name):(i.layerControl.removeLayer(B.leafletObject),i.layersInControl=i.layersInControl.filter(Z=>Z.leafletObject._leaflet_id!==B.leafletObject._leaflet_id))),i.leafletRef.removeLayer(B.leafletObject)},registerLayerControl(B){i.layerControl=B,i.layersToAdd.forEach(Z=>{i.layerControl.addLayer(Z)}),i.layersToAdd=[],h(B)},registerControl(B){i.leafletRef.addControl(B.leafletObject)},setZoom(B){const Z=i.leafletRef.getZoom();B!==Z&&i.leafletRef.setZoom(B,{animate:t.noBlockingAnimations?!1:null})},setPaddingBottomRight(B){i.paddingBottomRight=B},setPaddingTopLeft(B){i.paddingTopLeft=B},setPadding(B){i.padding=B},setCrs(B){const Z=i.leafletRef.getBounds();i.leafletRef.options.crs=B,i.leafletRef.fitBounds(Z,{animate:!1,padding:[0,0]})},fitBounds(B){i.leafletRef.fitBounds(B,{animate:this.noBlockingAnimations?!1:null})},setBounds(B){if(!B)return;const Z=L(B);if(!Z.isValid())return;!(i.lastSetBounds||i.leafletRef.getBounds()).equals(Z,0)&&(i.lastSetBounds=Z,i.leafletRef.fitBounds(Z,this.fitBoundsOptions))},setCenter(B){if(B==null)return;const Z=q(B),X=i.lastSetCenter||i.leafletRef.getCenter();(X.lat!==Z.lat||X.lng!==Z.lng)&&(i.lastSetCenter=Z,i.leafletRef.panTo(Z,{animate:this.noBlockingAnimations?!1:null}))}};yu(l,V.addLayer),yu(u,V.removeLayer),yu(h,V.registerControl),yu(d,V.registerLayerControl),i.leafletRef=E(n.value,o),oc(V,i.leafletRef,t);const Q=ac(e.attrs);i.leafletRef.on("moveend",oS(p.moveEndHandler,100)),i.leafletRef.on("overlayadd",p.overlayAddHandler),i.leafletRef.on("overlayremove",p.overlayRemoveHandler),oe.on(i.leafletRef,Q),i.ready=!0,Ls(()=>e.emit("ready",i.leafletRef))}),Dh(()=>{i.leafletRef&&i.leafletRef.remove()});const _=jp(()=>i.leafletRef),y=jp(()=>i.ready);return{root:n,ready:y,leafletObject:_}},render(){return t_("div",{style:{width:"100%",height:"100%"},ref:"root"},this.ready?this.$slots.default():{})}};cS.__file="src/components/LMap.vue";const r4={...$m,pane:{type:String,default:"markerPane"},draggable:{type:Boolean,custom:!0,default:!1},latLng:{type:[Object,Array],custom:!0,default:null},icon:{type:[Object],default:()=>{},custom:!1},zIndexOffset:{type:Number,custom:!1,default:null}},s4=(t,e,n)=>{const{options:i,methods:r}=Fm(t,e,n),o={...i,...t},l={...r,setDraggable(u){e.value.dragging&&(u?e.value.dragging.enable():e.value.dragging.disable())},latLngSync(u){n.emit("update:latLng",u.latlng),n.emit("update:lat-lng",u.latlng)},setLatLng(u){if(u!=null&&e.value){const h=e.value.getLatLng();(!h||!h.equals(u))&&e.value.setLatLng(u)}}};return{options:o,methods:l}};var uS={name:"LMarker",props:r4,setup(t,e){const n=On({}),i=On(!1),r=wt(lc),o=wt("addLayer");Oi("canSetParentHtml",()=>!!n.value.getElement()),Oi("setParentHtml",h=>n.value.getElement().innerHTML=h),Oi("setIcon",h=>n.value.setIcon&&n.value.setIcon(h));const{options:l,methods:u}=s4(t,n,e);return l.icon===void 0&&delete l.icon,Vs(async()=>{const{marker:h,DomEvent:d}=r?Ds.L:await ar(()=>import("./leaflet-src.esm.js"),[]);n.value=h(t.latLng,l);const p=ac(e.attrs);d.on(n.value,p),n.value.on("move",oS(u.latLngSync,100)),oc(u,n.value,t),o({...t,...u,leafletObject:n.value}),i.value=!0,Ls(()=>e.emit("ready",n.value))}),{ready:i,leafletObject:n}},render(){return aS(this.ready,this.$slots)}};uS.__file="src/components/LMarker.vue";const hS={...Zz,latLngs:{type:Array,default:()=>[]},smoothFactor:{type:Number,custom:!0,default:1},noClip:{type:Boolean,custom:!0,default:!1}},o4=(t,e,n)=>{const{options:i,methods:r}=e4(t,e,n),o={...i,...t},l={...r,setSmoothFactor(u){e.value.setStyle({smoothFactor:u})},setNoClip(u){e.value.setStyle({noClip:u})},addLatLng(u){e.value.addLatLng(u)}};return{options:o,methods:l}};({...hS});var fS={name:"LPolyline",props:hS,setup(t,e){const n=On({}),i=On(!1),r=wt(lc),o=wt("addLayer"),{options:l,methods:u}=o4(t,n,e);return Vs(async()=>{const{polyline:h,DomEvent:d}=r?Ds.L:await ar(()=>import("./leaflet-src.esm.js"),[]);n.value=h(t.latLngs,l);const p=ac(e.attrs);d.on(n.value,p),oc(u,n.value,t),o({...t,...u,leafletObject:n.value}),i.value=!0,Ls(()=>e.emit("ready",n.value))}),{ready:i,leafletObject:n}},render(){return aS(this.ready,this.$slots)}};fS.__file="src/components/LPolyline.vue";const dS={...t4,tms:{type:Boolean,default:!1},subdomains:{type:String,default:"abc"},detectRetina:{type:Boolean,default:!1},url:{type:String,default:null}},a4=(t,e,n)=>{const{options:i,methods:r}=n4(t,e,n);return{options:{...i,tms:t.tms,subdomains:t.subdomains,detectRetina:t.detectRetina},methods:{...r}}};var pS={props:dS,setup(t,e){const n=On({}),i=wt(lc),r=wt("addLayer"),{options:o,methods:l}=a4(t,n,e);return Vs(async()=>{const{tileLayer:u,DomEvent:h}=i?Ds.L:await ar(()=>import("./leaflet-src.esm.js"),[]);n.value=u(t.url,o);const d=ac(e.attrs);h.on(n.value,d),oc(l,n.value,t),r({...t,...l,leafletObject:n.value}),Ls(()=>e.emit("ready",n.value))}),{leafletObject:n}},render(){return null}};pS.__file="src/components/LTileLayer.vue";({...dS});const l4={components:{LMap:cS,LTileLayer:pS,LMarker:uS,LIcon:lS,LPolyline:fS},data(){return{map:null,zoom:10,location:{lat:0,long:0},playerMarkers:[],distLine:[],mapCenter:{},watchCenter:!1,midPoint:{lat:0,long:0},distanceToCenter:""}},methods:{onCenterUpdate(){let t=se.getters.user.location;if(t){let e=this.map.getCenter();this.distanceToCenter=Ze.formatDistance(Ze.CoordDistance(e.lat,e.lng,t.lat,t.long)*3.28084)+"ft"}setTimeout(()=>this.onCenterUpdate(),5)},async addSpotMarker(t){if(t.latlng&&se.getters.currentSquad){let e={lat:t.latlng.lat,long:t.latlng.lng};console.log(e);let n=await Mg.createSpotMarker(e,"spottedEnemy");setTimeout(async()=>{await Mg.removeSpotMarker(n)},se.getters.spotDurationMS)}}},mounted(){qn.on("data-ready",()=>{console.log("data-ready"),this.mapCenter,this.location=se.getters.mapCenter,this.playerMarkers=se.getters.getTeamMarkers,this.map=this.$refs.map.leafletObject,this.watchCenter=!0,this.onCenterUpdate()}),qn.on("set-location",()=>{let t=this.map.getCenter();console.log(t);let e={lat:t.lat,long:t.lng};Us(Rt(Br,`${se.getters.sessionId}/location`),e)}),qn.on("go-to-user",t=>{let e=se.getters.users,n=t;if(!e||!se.getters.users[n]||!se.getters.users[n].location)return;let i=se.getters.users[n].location;this.map&&this.map.flyTo([i.lat,i.long],18)})}},c4="/assets/me.svg",u4="/assets/me-squad-leader.svg",h4="/assets/squad-leader.svg",f4="/assets/squadmate-squad-leader.svg",d4="/assets/squad-member.svg",gS="/assets/team-member.svg",p4="/assets/enemy.svg";const g4=t=>(Oh("data-v-04045ed2"),t=t(),Nh(),t),_4={class:"distance"},m4=Bk('<div id="crosshair" data-v-04045ed2><div class="lines dot" data-v-04045ed2></div><div class="lines left" data-v-04045ed2></div><div class="lines right" data-v-04045ed2></div><div class="lines top" data-v-04045ed2></div><div class="lines bottom" data-v-04045ed2></div></div>',1),v4={class:"icon"},y4={key:0,class:"pulse",src:c4},E4={key:1,class:"pulse",src:u4},b4={key:2,src:h4},w4={key:3,src:f4},T4={key:4,src:d4},C4={key:5,src:gS},I4={key:6,src:gS},A4={key:7,class:"squadNumber"},S4=g4(()=>be("img",{class:"enemy-marker",src:p4},null,-1));function O4(t,e,n,i,r,o){const l=xr("l-tile-layer"),u=xr("l-icon"),h=xr("l-marker"),d=xr("l-map");return Ve(),Je("div",null,[be("div",_4,vs(r.distanceToCenter),1),m4,ct(d,{id:"map",ref:"map",zoom:10,onClick:o.addSpotMarker,center:[r.location.lat,r.location.long],minZoom:3,maxZoom:20,useGlobalLeaflet:!1,options:{attributionControl:!1,zoomControl:!1}},{default:Eo(()=>[ct(l,{url:"https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}","layer-type":"base",name:"OpenStreetMap"}),(Ve(!0),Je(Ot,null,Ga(t.$store.getters.getTeamMarkers,p=>(Ve(),Pu(h,{"lat-lng":[p.lat,p.long],key:p.id},{default:Eo(()=>[ct(u,null,{default:Eo(()=>[be("div",v4,[p.markerType=="me"?(Ve(),Je("img",y4)):An("",!0),p.markerType=="me-squad-leader"?(Ve(),Je("img",E4)):An("",!0),p.markerType=="squad-leader"?(Ve(),Je("img",b4)):An("",!0),p.markerType=="squadmate-squad-leader"?(Ve(),Je("img",w4)):An("",!0),p.markerType=="squad-member"?(Ve(),Je("img",T4)):An("",!0),p.markerType=="team-member"?(Ve(),Je("img",C4)):An("",!0),p.markerType=="team-squad-leader"?(Ve(),Je("img",I4)):An("",!0),p.markerType.includes("leader")?(Ve(),Je("span",A4,vs(p.squadNumber),1)):An("",!0)])]),_:2},1024)]),_:2},1032,["lat-lng"]))),128)),(Ve(!0),Je(Ot,null,Ga(t.$store.getters.getSpotMarkers,p=>(Ve(),Pu(h,{"lat-lng":[p.lat,p.long],key:p.id},{default:Eo(()=>[ct(u,null,{default:Eo(()=>[S4]),_:1})]),_:2},1032,["lat-lng"]))),128))]),_:1},8,["onClick","center"])])}const N4=Jl(l4,[["render",O4],["__scopeId","data-v-04045ed2"]]),R4={methods:{DataCheck(){}},async mounted(){sl.Init(),Mg.Init(),Nr.Subscribe("rooms",async n=>{se.commit("saveRooms",n),Ze.DataCheck()}),Nr.Subscribe("teams",async n=>{se.commit("saveTeams",n),Ze.DataCheck()}),Nr.Subscribe("squads",async n=>{se.commit("saveSquads",n),Ze.DataCheck()}),Nr.Subscribe("markers",async n=>{se.commit("saveMarkers",n),Ze.DataCheck()}),Nr.Subscribe("users",async n=>{se.commit("saveUsers",n),Ze.DataCheck()}),Nr.Subscribe("markers",async n=>{se.commit("saveMarkers",n),Ze.DataCheck()}),new URLSearchParams(window.location.search).get("isAdmin")=="true"&&se.commit("saveAdminState",!0)}};function x4(t,e,n,i,r,o){const l=xr("NavBar"),u=xr("SideBar"),h=xr("Map"),d=xr("SettingsModal");return Ve(),Je(Ot,null,[ct(l),ct(u),ct(h),ct(d)],64)}const D4=Jl(R4,[["render",x4]]);const Ys=wM(D4);Ys.component("NavBar",oj);Ys.component("SideBar",Oz);Ys.component("Map",N4);Ys.component("SettingsModal",Kz);Ys.use(se);Ys.use(yV,{firebaseApp:YI,modules:[]});Ys.mount("#app");export{$a as c};
