var LL=Object.defineProperty;var kL=(t,e,n)=>e in t?LL(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var $d=(t,e,n)=>(kL(t,typeof e!="symbol"?e+"":e,n),n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&i(l)}).observe(document,{childList:!0,subtree:!0});function n(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerpolicy&&(o.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?o.credentials="include":r.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(r){if(r.ep)return;r.ep=!0;const o=n(r);fetch(r.href,o)}})();function k_(t,e){const n=Object.create(null),i=t.split(",");for(let r=0;r<i.length;r++)n[i[r]]=!0;return e?r=>!!n[r.toLowerCase()]:r=>!!n[r]}function P_(t){if(de(t)){const e={};for(let n=0;n<t.length;n++){const i=t[n],r=St(i)?FL(i):P_(i);if(r)for(const o in r)e[o]=r[o]}return e}else{if(St(t))return t;if(it(t))return t}}const PL=/;(?![^(]*\))/g,ML=/:([^]+)/,$L=/\/\*.*?\*\//gs;function FL(t){const e={};return t.replace($L,"").split(PL).forEach(n=>{if(n){const i=n.split(ML);i.length>1&&(e[i[0].trim()]=i[1].trim())}}),e}function Mo(t){let e="";if(St(t))e=t;else if(de(t))for(let n=0;n<t.length;n++){const i=Mo(t[n]);i&&(e+=i+" ")}else if(it(t))for(const n in t)t[n]&&(e+=n+" ");return e.trim()}const UL="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",BL=k_(UL);function zw(t){return!!t||t===""}function WL(t,e){if(t.length!==e.length)return!1;let n=!0;for(let i=0;n&&i<t.length;i++)n=bh(t[i],e[i]);return n}function bh(t,e){if(t===e)return!0;let n=lE(t),i=lE(e);if(n||i)return n&&i?t.getTime()===e.getTime():!1;if(n=hl(t),i=hl(e),n||i)return t===e;if(n=de(t),i=de(e),n||i)return n&&i?WL(t,e):!1;if(n=it(t),i=it(e),n||i){if(!n||!i)return!1;const r=Object.keys(t).length,o=Object.keys(e).length;if(r!==o)return!1;for(const l in t){const u=t.hasOwnProperty(l),h=e.hasOwnProperty(l);if(u&&!h||!u&&h||!bh(t[l],e[l]))return!1}}return String(t)===String(e)}function Yw(t,e){return t.findIndex(n=>bh(n,e))}const xr=t=>St(t)?t:t==null?"":de(t)||it(t)&&(t.toString===Jw||!Ae(t.toString))?JSON.stringify(t,Xw,2):String(t),Xw=(t,e)=>e&&e.__v_isRef?Xw(t,e.value):So(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((n,[i,r])=>(n[`${i} =>`]=r,n),{})}:Th(e)?{[`Set(${e.size})`]:[...e.values()]}:it(e)&&!de(e)&&!Zw(e)?String(e):e,st={},Ao=[],hi=()=>{},HL=()=>!1,VL=/^on[^a-z]/,wh=t=>VL.test(t),M_=t=>t.startsWith("onUpdate:"),tn=Object.assign,$_=(t,e)=>{const n=t.indexOf(e);n>-1&&t.splice(n,1)},jL=Object.prototype.hasOwnProperty,$e=(t,e)=>jL.call(t,e),de=Array.isArray,So=t=>Ml(t)==="[object Map]",Th=t=>Ml(t)==="[object Set]",lE=t=>Ml(t)==="[object Date]",Ae=t=>typeof t=="function",St=t=>typeof t=="string",hl=t=>typeof t=="symbol",it=t=>t!==null&&typeof t=="object",Qw=t=>it(t)&&Ae(t.then)&&Ae(t.catch),Jw=Object.prototype.toString,Ml=t=>Jw.call(t),qL=t=>Ml(t).slice(8,-1),Zw=t=>Ml(t)==="[object Object]",F_=t=>St(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,wu=k_(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Ch=t=>{const e=Object.create(null);return n=>e[n]||(e[n]=t(n))},KL=/-(\w)/g,Li=Ch(t=>t.replace(KL,(e,n)=>n?n.toUpperCase():"")),GL=/\B([A-Z])/g,ea=Ch(t=>t.replace(GL,"-$1").toLowerCase()),Ih=Ch(t=>t.charAt(0).toUpperCase()+t.slice(1)),Fd=Ch(t=>t?`on${Ih(t)}`:""),fl=(t,e)=>!Object.is(t,e),Tu=(t,e)=>{for(let n=0;n<t.length;n++)t[n](e)},Du=(t,e,n)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,value:n})},Lu=t=>{const e=parseFloat(t);return isNaN(e)?t:e};let cE;const zL=()=>cE||(cE=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});let Ti;class YL{constructor(e=!1){this.detached=e,this.active=!0,this.effects=[],this.cleanups=[],this.parent=Ti,!e&&Ti&&(this.index=(Ti.scopes||(Ti.scopes=[])).push(this)-1)}run(e){if(this.active){const n=Ti;try{return Ti=this,e()}finally{Ti=n}}}on(){Ti=this}off(){Ti=this.parent}stop(e){if(this.active){let n,i;for(n=0,i=this.effects.length;n<i;n++)this.effects[n].stop();for(n=0,i=this.cleanups.length;n<i;n++)this.cleanups[n]();if(this.scopes)for(n=0,i=this.scopes.length;n<i;n++)this.scopes[n].stop(!0);if(!this.detached&&this.parent&&!e){const r=this.parent.scopes.pop();r&&r!==this&&(this.parent.scopes[this.index]=r,r.index=this.index)}this.parent=void 0,this.active=!1}}}function XL(t,e=Ti){e&&e.active&&e.effects.push(t)}const U_=t=>{const e=new Set(t);return e.w=0,e.n=0,e},eT=t=>(t.w&Hr)>0,tT=t=>(t.n&Hr)>0,QL=({deps:t})=>{if(t.length)for(let e=0;e<t.length;e++)t[e].w|=Hr},JL=t=>{const{deps:e}=t;if(e.length){let n=0;for(let i=0;i<e.length;i++){const r=e[i];eT(r)&&!tT(r)?r.delete(t):e[n++]=r,r.w&=~Hr,r.n&=~Hr}e.length=n}},Np=new WeakMap;let Ka=0,Hr=1;const Rp=30;let si;const Ns=Symbol(""),xp=Symbol("");class B_{constructor(e,n=null,i){this.fn=e,this.scheduler=n,this.active=!0,this.deps=[],this.parent=void 0,XL(this,i)}run(){if(!this.active)return this.fn();let e=si,n=Pr;for(;e;){if(e===this)return;e=e.parent}try{return this.parent=si,si=this,Pr=!0,Hr=1<<++Ka,Ka<=Rp?QL(this):uE(this),this.fn()}finally{Ka<=Rp&&JL(this),Hr=1<<--Ka,si=this.parent,Pr=n,this.parent=void 0,this.deferStop&&this.stop()}}stop(){si===this?this.deferStop=!0:this.active&&(uE(this),this.onStop&&this.onStop(),this.active=!1)}}function uE(t){const{deps:e}=t;if(e.length){for(let n=0;n<e.length;n++)e[n].delete(t);e.length=0}}let Pr=!0;const nT=[];function ta(){nT.push(Pr),Pr=!1}function na(){const t=nT.pop();Pr=t===void 0?!0:t}function xn(t,e,n){if(Pr&&si){let i=Np.get(t);i||Np.set(t,i=new Map);let r=i.get(n);r||i.set(n,r=U_()),iT(r)}}function iT(t,e){let n=!1;Ka<=Rp?tT(t)||(t.n|=Hr,n=!eT(t)):n=!t.has(si),n&&(t.add(si),si.deps.push(t))}function ur(t,e,n,i,r,o){const l=Np.get(t);if(!l)return;let u=[];if(e==="clear")u=[...l.values()];else if(n==="length"&&de(t)){const h=Lu(i);l.forEach((d,p)=>{(p==="length"||p>=h)&&u.push(d)})}else switch(n!==void 0&&u.push(l.get(n)),e){case"add":de(t)?F_(n)&&u.push(l.get("length")):(u.push(l.get(Ns)),So(t)&&u.push(l.get(xp)));break;case"delete":de(t)||(u.push(l.get(Ns)),So(t)&&u.push(l.get(xp)));break;case"set":So(t)&&u.push(l.get(Ns));break}if(u.length===1)u[0]&&Dp(u[0]);else{const h=[];for(const d of u)d&&h.push(...d);Dp(U_(h))}}function Dp(t,e){const n=de(t)?t:[...t];for(const i of n)i.computed&&hE(i);for(const i of n)i.computed||hE(i)}function hE(t,e){(t!==si||t.allowRecurse)&&(t.scheduler?t.scheduler():t.run())}const ZL=k_("__proto__,__v_isRef,__isVue"),rT=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(hl)),ek=W_(),tk=W_(!1,!0),nk=W_(!0),fE=ik();function ik(){const t={};return["includes","indexOf","lastIndexOf"].forEach(e=>{t[e]=function(...n){const i=Ve(this);for(let o=0,l=this.length;o<l;o++)xn(i,"get",o+"");const r=i[e](...n);return r===-1||r===!1?i[e](...n.map(Ve)):r}}),["push","pop","shift","unshift","splice"].forEach(e=>{t[e]=function(...n){ta();const i=Ve(this)[e].apply(this,n);return na(),i}}),t}function W_(t=!1,e=!1){return function(i,r,o){if(r==="__v_isReactive")return!t;if(r==="__v_isReadonly")return t;if(r==="__v_isShallow")return e;if(r==="__v_raw"&&o===(t?e?yk:cT:e?lT:aT).get(i))return i;const l=de(i);if(!t&&l&&$e(fE,r))return Reflect.get(fE,r,o);const u=Reflect.get(i,r,o);return(hl(r)?rT.has(r):ZL(r))||(t||xn(i,"get",r),e)?u:Jt(u)?l&&F_(r)?u:u.value:it(u)?t?uT(u):$l(u):u}}const rk=sT(),sk=sT(!0);function sT(t=!1){return function(n,i,r,o){let l=n[i];if($o(l)&&Jt(l)&&!Jt(r))return!1;if(!t&&(!ku(r)&&!$o(r)&&(l=Ve(l),r=Ve(r)),!de(n)&&Jt(l)&&!Jt(r)))return l.value=r,!0;const u=de(n)&&F_(i)?Number(i)<n.length:$e(n,i),h=Reflect.set(n,i,r,o);return n===Ve(o)&&(u?fl(r,l)&&ur(n,"set",i,r):ur(n,"add",i,r)),h}}function ok(t,e){const n=$e(t,e);t[e];const i=Reflect.deleteProperty(t,e);return i&&n&&ur(t,"delete",e,void 0),i}function ak(t,e){const n=Reflect.has(t,e);return(!hl(e)||!rT.has(e))&&xn(t,"has",e),n}function lk(t){return xn(t,"iterate",de(t)?"length":Ns),Reflect.ownKeys(t)}const oT={get:ek,set:rk,deleteProperty:ok,has:ak,ownKeys:lk},ck={get:nk,set(t,e){return!0},deleteProperty(t,e){return!0}},uk=tn({},oT,{get:tk,set:sk}),H_=t=>t,Ah=t=>Reflect.getPrototypeOf(t);function Zc(t,e,n=!1,i=!1){t=t.__v_raw;const r=Ve(t),o=Ve(e);n||(e!==o&&xn(r,"get",e),xn(r,"get",o));const{has:l}=Ah(r),u=i?H_:n?q_:dl;if(l.call(r,e))return u(t.get(e));if(l.call(r,o))return u(t.get(o));t!==r&&t.get(e)}function eu(t,e=!1){const n=this.__v_raw,i=Ve(n),r=Ve(t);return e||(t!==r&&xn(i,"has",t),xn(i,"has",r)),t===r?n.has(t):n.has(t)||n.has(r)}function tu(t,e=!1){return t=t.__v_raw,!e&&xn(Ve(t),"iterate",Ns),Reflect.get(t,"size",t)}function dE(t){t=Ve(t);const e=Ve(this);return Ah(e).has.call(e,t)||(e.add(t),ur(e,"add",t,t)),this}function pE(t,e){e=Ve(e);const n=Ve(this),{has:i,get:r}=Ah(n);let o=i.call(n,t);o||(t=Ve(t),o=i.call(n,t));const l=r.call(n,t);return n.set(t,e),o?fl(e,l)&&ur(n,"set",t,e):ur(n,"add",t,e),this}function _E(t){const e=Ve(this),{has:n,get:i}=Ah(e);let r=n.call(e,t);r||(t=Ve(t),r=n.call(e,t)),i&&i.call(e,t);const o=e.delete(t);return r&&ur(e,"delete",t,void 0),o}function gE(){const t=Ve(this),e=t.size!==0,n=t.clear();return e&&ur(t,"clear",void 0,void 0),n}function nu(t,e){return function(i,r){const o=this,l=o.__v_raw,u=Ve(l),h=e?H_:t?q_:dl;return!t&&xn(u,"iterate",Ns),l.forEach((d,p)=>i.call(r,h(d),h(p),o))}}function iu(t,e,n){return function(...i){const r=this.__v_raw,o=Ve(r),l=So(o),u=t==="entries"||t===Symbol.iterator&&l,h=t==="keys"&&l,d=r[t](...i),p=n?H_:e?q_:dl;return!e&&xn(o,"iterate",h?xp:Ns),{next(){const{value:g,done:y}=d.next();return y?{value:g,done:y}:{value:u?[p(g[0]),p(g[1])]:p(g),done:y}},[Symbol.iterator](){return this}}}}function Or(t){return function(...e){return t==="delete"?!1:this}}function hk(){const t={get(o){return Zc(this,o)},get size(){return tu(this)},has:eu,add:dE,set:pE,delete:_E,clear:gE,forEach:nu(!1,!1)},e={get(o){return Zc(this,o,!1,!0)},get size(){return tu(this)},has:eu,add:dE,set:pE,delete:_E,clear:gE,forEach:nu(!1,!0)},n={get(o){return Zc(this,o,!0)},get size(){return tu(this,!0)},has(o){return eu.call(this,o,!0)},add:Or("add"),set:Or("set"),delete:Or("delete"),clear:Or("clear"),forEach:nu(!0,!1)},i={get(o){return Zc(this,o,!0,!0)},get size(){return tu(this,!0)},has(o){return eu.call(this,o,!0)},add:Or("add"),set:Or("set"),delete:Or("delete"),clear:Or("clear"),forEach:nu(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(o=>{t[o]=iu(o,!1,!1),n[o]=iu(o,!0,!1),e[o]=iu(o,!1,!0),i[o]=iu(o,!0,!0)}),[t,n,e,i]}const[fk,dk,pk,_k]=hk();function V_(t,e){const n=e?t?_k:pk:t?dk:fk;return(i,r,o)=>r==="__v_isReactive"?!t:r==="__v_isReadonly"?t:r==="__v_raw"?i:Reflect.get($e(n,r)&&r in i?n:i,r,o)}const gk={get:V_(!1,!1)},mk={get:V_(!1,!0)},vk={get:V_(!0,!1)},aT=new WeakMap,lT=new WeakMap,cT=new WeakMap,yk=new WeakMap;function Ek(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function bk(t){return t.__v_skip||!Object.isExtensible(t)?0:Ek(qL(t))}function $l(t){return $o(t)?t:j_(t,!1,oT,gk,aT)}function wk(t){return j_(t,!1,uk,mk,lT)}function uT(t){return j_(t,!0,ck,vk,cT)}function j_(t,e,n,i,r){if(!it(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const o=r.get(t);if(o)return o;const l=bk(t);if(l===0)return t;const u=new Proxy(t,l===2?i:n);return r.set(t,u),u}function Oo(t){return $o(t)?Oo(t.__v_raw):!!(t&&t.__v_isReactive)}function $o(t){return!!(t&&t.__v_isReadonly)}function ku(t){return!!(t&&t.__v_isShallow)}function hT(t){return Oo(t)||$o(t)}function Ve(t){const e=t&&t.__v_raw;return e?Ve(e):t}function fT(t){return Du(t,"__v_skip",!0),t}const dl=t=>it(t)?$l(t):t,q_=t=>it(t)?uT(t):t;function dT(t){Pr&&si&&(t=Ve(t),iT(t.dep||(t.dep=U_())))}function pT(t,e){t=Ve(t),t.dep&&Dp(t.dep)}function Jt(t){return!!(t&&t.__v_isRef===!0)}function ki(t){return Tk(t,!1)}function Tk(t,e){return Jt(t)?t:new Ck(t,e)}class Ck{constructor(e,n){this.__v_isShallow=n,this.dep=void 0,this.__v_isRef=!0,this._rawValue=n?e:Ve(e),this._value=n?e:dl(e)}get value(){return dT(this),this._value}set value(e){const n=this.__v_isShallow||ku(e)||$o(e);e=n?e:Ve(e),fl(e,this._rawValue)&&(this._rawValue=e,this._value=n?e:dl(e),pT(this))}}function Ik(t){return Jt(t)?t.value:t}const Ak={get:(t,e,n)=>Ik(Reflect.get(t,e,n)),set:(t,e,n,i)=>{const r=t[e];return Jt(r)&&!Jt(n)?(r.value=n,!0):Reflect.set(t,e,n,i)}};function _T(t){return Oo(t)?t:new Proxy(t,Ak)}var gT;class Sk{constructor(e,n,i,r){this._setter=n,this.dep=void 0,this.__v_isRef=!0,this[gT]=!1,this._dirty=!0,this.effect=new B_(e,()=>{this._dirty||(this._dirty=!0,pT(this))}),this.effect.computed=this,this.effect.active=this._cacheable=!r,this.__v_isReadonly=i}get value(){const e=Ve(this);return dT(e),(e._dirty||!e._cacheable)&&(e._dirty=!1,e._value=e.effect.run()),e._value}set value(e){this._setter(e)}}gT="__v_isReadonly";function Ok(t,e,n=!1){let i,r;const o=Ae(t);return o?(i=t,r=hi):(i=t.get,r=t.set),new Sk(i,r,o||!r,n)}function Mr(t,e,n,i){let r;try{r=i?t(...i):t()}catch(o){Sh(o,e,n)}return r}function Kn(t,e,n,i){if(Ae(t)){const o=Mr(t,e,n,i);return o&&Qw(o)&&o.catch(l=>{Sh(l,e,n)}),o}const r=[];for(let o=0;o<t.length;o++)r.push(Kn(t[o],e,n,i));return r}function Sh(t,e,n,i=!0){const r=e?e.vnode:null;if(e){let o=e.parent;const l=e.proxy,u=n;for(;o;){const d=o.ec;if(d){for(let p=0;p<d.length;p++)if(d[p](t,l,u)===!1)return}o=o.parent}const h=e.appContext.config.errorHandler;if(h){Mr(h,null,10,[t,l,u]);return}}Nk(t,n,r,i)}function Nk(t,e,n,i=!0){console.error(t)}let pl=!1,Lp=!1;const Qt=[];let Ii=0;const No=[];let tr=null,vs=0;const mT=Promise.resolve();let K_=null;function Vr(t){const e=K_||mT;return t?e.then(this?t.bind(this):t):e}function Rk(t){let e=Ii+1,n=Qt.length;for(;e<n;){const i=e+n>>>1;_l(Qt[i])<t?e=i+1:n=i}return e}function G_(t){(!Qt.length||!Qt.includes(t,pl&&t.allowRecurse?Ii+1:Ii))&&(t.id==null?Qt.push(t):Qt.splice(Rk(t.id),0,t),vT())}function vT(){!pl&&!Lp&&(Lp=!0,K_=mT.then(ET))}function xk(t){const e=Qt.indexOf(t);e>Ii&&Qt.splice(e,1)}function Dk(t){de(t)?No.push(...t):(!tr||!tr.includes(t,t.allowRecurse?vs+1:vs))&&No.push(t),vT()}function mE(t,e=pl?Ii+1:0){for(;e<Qt.length;e++){const n=Qt[e];n&&n.pre&&(Qt.splice(e,1),e--,n())}}function yT(t){if(No.length){const e=[...new Set(No)];if(No.length=0,tr){tr.push(...e);return}for(tr=e,tr.sort((n,i)=>_l(n)-_l(i)),vs=0;vs<tr.length;vs++)tr[vs]();tr=null,vs=0}}const _l=t=>t.id==null?1/0:t.id,Lk=(t,e)=>{const n=_l(t)-_l(e);if(n===0){if(t.pre&&!e.pre)return-1;if(e.pre&&!t.pre)return 1}return n};function ET(t){Lp=!1,pl=!0,Qt.sort(Lk);const e=hi;try{for(Ii=0;Ii<Qt.length;Ii++){const n=Qt[Ii];n&&n.active!==!1&&Mr(n,null,14)}}finally{Ii=0,Qt.length=0,yT(),pl=!1,K_=null,(Qt.length||No.length)&&ET()}}function kk(t,e,...n){if(t.isUnmounted)return;const i=t.vnode.props||st;let r=n;const o=e.startsWith("update:"),l=o&&e.slice(7);if(l&&l in i){const p=`${l==="modelValue"?"model":l}Modifiers`,{number:g,trim:y}=i[p]||st;y&&(r=n.map(b=>St(b)?b.trim():b)),g&&(r=n.map(Lu))}let u,h=i[u=Fd(e)]||i[u=Fd(Li(e))];!h&&o&&(h=i[u=Fd(ea(e))]),h&&Kn(h,t,6,r);const d=i[u+"Once"];if(d){if(!t.emitted)t.emitted={};else if(t.emitted[u])return;t.emitted[u]=!0,Kn(d,t,6,r)}}function bT(t,e,n=!1){const i=e.emitsCache,r=i.get(t);if(r!==void 0)return r;const o=t.emits;let l={},u=!1;if(!Ae(t)){const h=d=>{const p=bT(d,e,!0);p&&(u=!0,tn(l,p))};!n&&e.mixins.length&&e.mixins.forEach(h),t.extends&&h(t.extends),t.mixins&&t.mixins.forEach(h)}return!o&&!u?(it(t)&&i.set(t,null),null):(de(o)?o.forEach(h=>l[h]=null):tn(l,o),it(t)&&i.set(t,l),l)}function Oh(t,e){return!t||!wh(e)?!1:(e=e.slice(2).replace(/Once$/,""),$e(t,e[0].toLowerCase()+e.slice(1))||$e(t,ea(e))||$e(t,e))}let Wt=null,Nh=null;function Pu(t){const e=Wt;return Wt=t,Nh=t&&t.type.__scopeId||null,e}function Fl(t){Nh=t}function Ul(){Nh=null}function Fo(t,e=Wt,n){if(!e||t._n)return t;const i=(...r)=>{i._d&&OE(-1);const o=Pu(e);let l;try{l=t(...r)}finally{Pu(o),i._d&&OE(1)}return l};return i._n=!0,i._c=!0,i._d=!0,i}function Ud(t){const{type:e,vnode:n,proxy:i,withProxy:r,props:o,propsOptions:[l],slots:u,attrs:h,emit:d,render:p,renderCache:g,data:y,setupState:b,ctx:S,inheritAttrs:N}=t;let P,G;const oe=Pu(t);try{if(n.shapeFlag&4){const V=r||i;P=Ci(p.call(V,V,g,o,b,y,S)),G=h}else{const V=e;P=Ci(V.length>1?V(o,{attrs:h,slots:u,emit:d}):V(o,null)),G=e.props?h:Pk(h)}}catch(V){el.length=0,Sh(V,t,1),P=nt(Gn)}let H=P;if(G&&N!==!1){const V=Object.keys(G),{shapeFlag:Q}=H;V.length&&Q&7&&(l&&V.some(M_)&&(G=Mk(G,l)),H=jr(H,G))}return n.dirs&&(H=jr(H),H.dirs=H.dirs?H.dirs.concat(n.dirs):n.dirs),n.transition&&(H.transition=n.transition),P=H,Pu(oe),P}const Pk=t=>{let e;for(const n in t)(n==="class"||n==="style"||wh(n))&&((e||(e={}))[n]=t[n]);return e},Mk=(t,e)=>{const n={};for(const i in t)(!M_(i)||!(i.slice(9)in e))&&(n[i]=t[i]);return n};function $k(t,e,n){const{props:i,children:r,component:o}=t,{props:l,children:u,patchFlag:h}=e,d=o.emitsOptions;if(e.dirs||e.transition)return!0;if(n&&h>=0){if(h&1024)return!0;if(h&16)return i?vE(i,l,d):!!l;if(h&8){const p=e.dynamicProps;for(let g=0;g<p.length;g++){const y=p[g];if(l[y]!==i[y]&&!Oh(d,y))return!0}}}else return(r||u)&&(!u||!u.$stable)?!0:i===l?!1:i?l?vE(i,l,d):!0:!!l;return!1}function vE(t,e,n){const i=Object.keys(e);if(i.length!==Object.keys(t).length)return!0;for(let r=0;r<i.length;r++){const o=i[r];if(e[o]!==t[o]&&!Oh(n,o))return!0}return!1}function Fk({vnode:t,parent:e},n){for(;e&&e.subTree===t;)(t=e.vnode).el=n,e=e.parent}const Uk=t=>t.__isSuspense;function Bk(t,e){e&&e.pendingBranch?de(t)?e.effects.push(...t):e.effects.push(t):Dk(t)}function Si(t,e){if(Dt){let n=Dt.provides;const i=Dt.parent&&Dt.parent.provides;i===n&&(n=Dt.provides=Object.create(i)),n[t]=e}}function At(t,e,n=!1){const i=Dt||Wt;if(i){const r=i.parent==null?i.vnode.appContext&&i.vnode.appContext.provides:i.parent.provides;if(r&&t in r)return r[t];if(arguments.length>1)return n&&Ae(e)?e.call(i.proxy):e}}const ru={};function Rs(t,e,n){return wT(t,e,n)}function wT(t,e,{immediate:n,deep:i,flush:r,onTrack:o,onTrigger:l}=st){const u=Dt;let h,d=!1,p=!1;if(Jt(t)?(h=()=>t.value,d=ku(t)):Oo(t)?(h=()=>t,i=!0):de(t)?(p=!0,d=t.some(H=>Oo(H)||ku(H)),h=()=>t.map(H=>{if(Jt(H))return H.value;if(Oo(H))return ws(H);if(Ae(H))return Mr(H,u,2)})):Ae(t)?e?h=()=>Mr(t,u,2):h=()=>{if(!(u&&u.isUnmounted))return g&&g(),Kn(t,u,3,[y])}:h=hi,e&&i){const H=h;h=()=>ws(H())}let g,y=H=>{g=G.onStop=()=>{Mr(H,u,4)}},b;if(ml)if(y=hi,e?n&&Kn(e,u,3,[h(),p?[]:void 0,y]):h(),r==="sync"){const H=$P();b=H.__watcherHandles||(H.__watcherHandles=[])}else return hi;let S=p?new Array(t.length).fill(ru):ru;const N=()=>{if(G.active)if(e){const H=G.run();(i||d||(p?H.some((V,Q)=>fl(V,S[Q])):fl(H,S)))&&(g&&g(),Kn(e,u,3,[H,S===ru?void 0:p&&S[0]===ru?[]:S,y]),S=H)}else G.run()};N.allowRecurse=!!e;let P;r==="sync"?P=N:r==="post"?P=()=>yn(N,u&&u.suspense):(N.pre=!0,u&&(N.id=u.uid),P=()=>G_(N));const G=new B_(h,P);e?n?N():S=G.run():r==="post"?yn(G.run.bind(G),u&&u.suspense):G.run();const oe=()=>{G.stop(),u&&u.scope&&$_(u.scope.effects,G)};return b&&b.push(oe),oe}function Wk(t,e,n){const i=this.proxy,r=St(t)?t.includes(".")?TT(i,t):()=>i[t]:t.bind(i,i);let o;Ae(e)?o=e:(o=e.handler,n=e);const l=Dt;Bo(this);const u=wT(r,o.bind(i),n);return l?Bo(l):xs(),u}function TT(t,e){const n=e.split(".");return()=>{let i=t;for(let r=0;r<n.length&&i;r++)i=i[n[r]];return i}}function ws(t,e){if(!it(t)||t.__v_skip||(e=e||new Set,e.has(t)))return t;if(e.add(t),Jt(t))ws(t.value,e);else if(de(t))for(let n=0;n<t.length;n++)ws(t[n],e);else if(Th(t)||So(t))t.forEach(n=>{ws(n,e)});else if(Zw(t))for(const n in t)ws(t[n],e);return t}function Hk(){const t={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return Xr(()=>{t.isMounted=!0}),Dh(()=>{t.isUnmounting=!0}),t}const jn=[Function,Array],Vk={name:"BaseTransition",props:{mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:jn,onEnter:jn,onAfterEnter:jn,onEnterCancelled:jn,onBeforeLeave:jn,onLeave:jn,onAfterLeave:jn,onLeaveCancelled:jn,onBeforeAppear:jn,onAppear:jn,onAfterAppear:jn,onAppearCancelled:jn},setup(t,{slots:e}){const n=NP(),i=Hk();let r;return()=>{const o=e.default&&IT(e.default(),!0);if(!o||!o.length)return;let l=o[0];if(o.length>1){for(const N of o)if(N.type!==Gn){l=N;break}}const u=Ve(t),{mode:h}=u;if(i.isLeaving)return Bd(l);const d=yE(l);if(!d)return Bd(l);const p=kp(d,u,i,n);Pp(d,p);const g=n.subTree,y=g&&yE(g);let b=!1;const{getTransitionKey:S}=d.type;if(S){const N=S();r===void 0?r=N:N!==r&&(r=N,b=!0)}if(y&&y.type!==Gn&&(!ys(d,y)||b)){const N=kp(y,u,i,n);if(Pp(y,N),h==="out-in")return i.isLeaving=!0,N.afterLeave=()=>{i.isLeaving=!1,n.update.active!==!1&&n.update()},Bd(l);h==="in-out"&&d.type!==Gn&&(N.delayLeave=(P,G,oe)=>{const H=CT(i,y);H[String(y.key)]=y,P._leaveCb=()=>{G(),P._leaveCb=void 0,delete p.delayedLeave},p.delayedLeave=oe})}return l}}},jk=Vk;function CT(t,e){const{leavingVNodes:n}=t;let i=n.get(e.type);return i||(i=Object.create(null),n.set(e.type,i)),i}function kp(t,e,n,i){const{appear:r,mode:o,persisted:l=!1,onBeforeEnter:u,onEnter:h,onAfterEnter:d,onEnterCancelled:p,onBeforeLeave:g,onLeave:y,onAfterLeave:b,onLeaveCancelled:S,onBeforeAppear:N,onAppear:P,onAfterAppear:G,onAppearCancelled:oe}=e,H=String(t.key),V=CT(n,t),Q=(X,pe)=>{X&&Kn(X,i,9,pe)},B=(X,pe)=>{const _e=pe[1];Q(X,pe),de(X)?X.every(Fe=>Fe.length<=1)&&_e():X.length<=1&&_e()},Z={mode:o,persisted:l,beforeEnter(X){let pe=u;if(!n.isMounted)if(r)pe=N||u;else return;X._leaveCb&&X._leaveCb(!0);const _e=V[H];_e&&ys(t,_e)&&_e.el._leaveCb&&_e.el._leaveCb(),Q(pe,[X])},enter(X){let pe=h,_e=d,Fe=p;if(!n.isMounted)if(r)pe=P||h,_e=G||d,Fe=oe||p;else return;let ot=!1;const Xe=X._enterCb=qt=>{ot||(ot=!0,qt?Q(Fe,[X]):Q(_e,[X]),Z.delayedLeave&&Z.delayedLeave(),X._enterCb=void 0)};pe?B(pe,[X,Xe]):Xe()},leave(X,pe){const _e=String(t.key);if(X._enterCb&&X._enterCb(!0),n.isUnmounting)return pe();Q(g,[X]);let Fe=!1;const ot=X._leaveCb=Xe=>{Fe||(Fe=!0,pe(),Xe?Q(S,[X]):Q(b,[X]),X._leaveCb=void 0,V[_e]===t&&delete V[_e])};V[_e]=t,y?B(y,[X,ot]):ot()},clone(X){return kp(X,e,n,i)}};return Z}function Bd(t){if(Rh(t))return t=jr(t),t.children=null,t}function yE(t){return Rh(t)?t.children?t.children[0]:void 0:t}function Pp(t,e){t.shapeFlag&6&&t.component?Pp(t.component.subTree,e):t.shapeFlag&128?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}function IT(t,e=!1,n){let i=[],r=0;for(let o=0;o<t.length;o++){let l=t[o];const u=n==null?l.key:String(n)+String(l.key!=null?l.key:o);l.type===Tt?(l.patchFlag&128&&r++,i=i.concat(IT(l.children,e,u))):(e||l.type!==Gn)&&i.push(u!=null?jr(l,{key:u}):l)}if(r>1)for(let o=0;o<i.length;o++)i[o].patchFlag=-2;return i}const Qa=t=>!!t.type.__asyncLoader,Rh=t=>t.type.__isKeepAlive;function qk(t,e){AT(t,"a",e)}function Kk(t,e){AT(t,"da",e)}function AT(t,e,n=Dt){const i=t.__wdc||(t.__wdc=()=>{let r=n;for(;r;){if(r.isDeactivated)return;r=r.parent}return t()});if(xh(e,i,n),n){let r=n.parent;for(;r&&r.parent;)Rh(r.parent.vnode)&&Gk(i,e,n,r),r=r.parent}}function Gk(t,e,n,i){const r=xh(e,t,i,!0);z_(()=>{$_(i[e],r)},n)}function xh(t,e,n=Dt,i=!1){if(n){const r=n[t]||(n[t]=[]),o=e.__weh||(e.__weh=(...l)=>{if(n.isUnmounted)return;ta(),Bo(n);const u=Kn(e,n,t,l);return xs(),na(),u});return i?r.unshift(o):r.push(o),o}}const gr=t=>(e,n=Dt)=>(!ml||t==="sp")&&xh(t,(...i)=>e(...i),n),zk=gr("bm"),Xr=gr("m"),Yk=gr("bu"),Xk=gr("u"),Dh=gr("bum"),z_=gr("um"),Qk=gr("sp"),Jk=gr("rtg"),Zk=gr("rtc");function eP(t,e=Dt){xh("ec",t,e)}function EE(t,e){const n=Wt;if(n===null)return t;const i=Ph(n)||n.proxy,r=t.dirs||(t.dirs=[]);for(let o=0;o<e.length;o++){let[l,u,h,d=st]=e[o];l&&(Ae(l)&&(l={mounted:l,updated:l}),l.deep&&ws(u),r.push({dir:l,instance:i,value:u,oldValue:void 0,arg:h,modifiers:d}))}return t}function ds(t,e,n,i){const r=t.dirs,o=e&&e.dirs;for(let l=0;l<r.length;l++){const u=r[l];o&&(u.oldValue=o[l].value);let h=u.dir[i];h&&(ta(),Kn(h,n,8,[t.el,u,t,e]),na())}}const ST="components";function Ut(t,e){return nP(ST,t,!0,e)||t}const tP=Symbol();function nP(t,e,n=!0,i=!1){const r=Wt||Dt;if(r){const o=r.type;if(t===ST){const u=kP(o,!1);if(u&&(u===e||u===Li(e)||u===Ih(Li(e))))return o}const l=bE(r[t]||o[t],e)||bE(r.appContext[t],e);return!l&&i?o:l}}function bE(t,e){return t&&(t[e]||t[Li(e)]||t[Ih(Li(e))])}function Ja(t,e,n,i){let r;const o=n&&n[i];if(de(t)||St(t)){r=new Array(t.length);for(let l=0,u=t.length;l<u;l++)r[l]=e(t[l],l,void 0,o&&o[l])}else if(typeof t=="number"){r=new Array(t);for(let l=0;l<t;l++)r[l]=e(l+1,l,void 0,o&&o[l])}else if(it(t))if(t[Symbol.iterator])r=Array.from(t,(l,u)=>e(l,u,void 0,o&&o[u]));else{const l=Object.keys(t);r=new Array(l.length);for(let u=0,h=l.length;u<h;u++){const d=l[u];r[u]=e(t[d],d,u,o&&o[u])}}else r=[];return n&&(n[i]=r),r}function iP(t,e,n={},i,r){if(Wt.isCE||Wt.parent&&Qa(Wt.parent)&&Wt.parent.isCE)return e!=="default"&&(n.name=e),nt("slot",n,i&&i());let o=t[e];o&&o._c&&(o._d=!1),we();const l=o&&OT(o(n)),u=sr(Tt,{key:n.key||l&&l.key||`_${e}`},l||(i?i():[]),l&&t._===1?64:-2);return!r&&u.scopeId&&(u.slotScopeIds=[u.scopeId+"-s"]),o&&o._c&&(o._d=!0),u}function OT(t){return t.some(e=>$u(e)?!(e.type===Gn||e.type===Tt&&!OT(e.children)):!0)?t:null}const Mp=t=>t?UT(t)?Ph(t)||t.proxy:Mp(t.parent):null,Za=tn(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>Mp(t.parent),$root:t=>Mp(t.root),$emit:t=>t.emit,$options:t=>Y_(t),$forceUpdate:t=>t.f||(t.f=()=>G_(t.update)),$nextTick:t=>t.n||(t.n=Vr.bind(t.proxy)),$watch:t=>Wk.bind(t)}),Wd=(t,e)=>t!==st&&!t.__isScriptSetup&&$e(t,e),rP={get({_:t},e){const{ctx:n,setupState:i,data:r,props:o,accessCache:l,type:u,appContext:h}=t;let d;if(e[0]!=="$"){const b=l[e];if(b!==void 0)switch(b){case 1:return i[e];case 2:return r[e];case 4:return n[e];case 3:return o[e]}else{if(Wd(i,e))return l[e]=1,i[e];if(r!==st&&$e(r,e))return l[e]=2,r[e];if((d=t.propsOptions[0])&&$e(d,e))return l[e]=3,o[e];if(n!==st&&$e(n,e))return l[e]=4,n[e];$p&&(l[e]=0)}}const p=Za[e];let g,y;if(p)return e==="$attrs"&&xn(t,"get",e),p(t);if((g=u.__cssModules)&&(g=g[e]))return g;if(n!==st&&$e(n,e))return l[e]=4,n[e];if(y=h.config.globalProperties,$e(y,e))return y[e]},set({_:t},e,n){const{data:i,setupState:r,ctx:o}=t;return Wd(r,e)?(r[e]=n,!0):i!==st&&$e(i,e)?(i[e]=n,!0):$e(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(o[e]=n,!0)},has({_:{data:t,setupState:e,accessCache:n,ctx:i,appContext:r,propsOptions:o}},l){let u;return!!n[l]||t!==st&&$e(t,l)||Wd(e,l)||(u=o[0])&&$e(u,l)||$e(i,l)||$e(Za,l)||$e(r.config.globalProperties,l)},defineProperty(t,e,n){return n.get!=null?t._.accessCache[e]=0:$e(n,"value")&&this.set(t,e,n.value,null),Reflect.defineProperty(t,e,n)}};let $p=!0;function sP(t){const e=Y_(t),n=t.proxy,i=t.ctx;$p=!1,e.beforeCreate&&wE(e.beforeCreate,t,"bc");const{data:r,computed:o,methods:l,watch:u,provide:h,inject:d,created:p,beforeMount:g,mounted:y,beforeUpdate:b,updated:S,activated:N,deactivated:P,beforeDestroy:G,beforeUnmount:oe,destroyed:H,unmounted:V,render:Q,renderTracked:B,renderTriggered:Z,errorCaptured:X,serverPrefetch:pe,expose:_e,inheritAttrs:Fe,components:ot,directives:Xe,filters:qt}=e;if(d&&oP(d,i,null,t.appContext.config.unwrapInjectedRef),l)for(const ye in l){const Te=l[ye];Ae(Te)&&(i[ye]=Te.bind(n))}if(r){const ye=r.call(n,n);it(ye)&&(t.data=$l(ye))}if($p=!0,o)for(const ye in o){const Te=o[ye],kt=Ae(Te)?Te.bind(n,n):Ae(Te.get)?Te.get.bind(n,n):hi,dn=!Ae(Te)&&Ae(Te.set)?Te.set.bind(n):hi,ht=Wp({get:kt,set:dn});Object.defineProperty(i,ye,{enumerable:!0,configurable:!0,get:()=>ht.value,set:Ot=>ht.value=Ot})}if(u)for(const ye in u)NT(u[ye],i,n,ye);if(h){const ye=Ae(h)?h.call(n):h;Reflect.ownKeys(ye).forEach(Te=>{Si(Te,ye[Te])})}p&&wE(p,t,"c");function We(ye,Te){de(Te)?Te.forEach(kt=>ye(kt.bind(n))):Te&&ye(Te.bind(n))}if(We(zk,g),We(Xr,y),We(Yk,b),We(Xk,S),We(qk,N),We(Kk,P),We(eP,X),We(Zk,B),We(Jk,Z),We(Dh,oe),We(z_,V),We(Qk,pe),de(_e))if(_e.length){const ye=t.exposed||(t.exposed={});_e.forEach(Te=>{Object.defineProperty(ye,Te,{get:()=>n[Te],set:kt=>n[Te]=kt})})}else t.exposed||(t.exposed={});Q&&t.render===hi&&(t.render=Q),Fe!=null&&(t.inheritAttrs=Fe),ot&&(t.components=ot),Xe&&(t.directives=Xe)}function oP(t,e,n=hi,i=!1){de(t)&&(t=Fp(t));for(const r in t){const o=t[r];let l;it(o)?"default"in o?l=At(o.from||r,o.default,!0):l=At(o.from||r):l=At(o),Jt(l)&&i?Object.defineProperty(e,r,{enumerable:!0,configurable:!0,get:()=>l.value,set:u=>l.value=u}):e[r]=l}}function wE(t,e,n){Kn(de(t)?t.map(i=>i.bind(e.proxy)):t.bind(e.proxy),e,n)}function NT(t,e,n,i){const r=i.includes(".")?TT(n,i):()=>n[i];if(St(t)){const o=e[t];Ae(o)&&Rs(r,o)}else if(Ae(t))Rs(r,t.bind(n));else if(it(t))if(de(t))t.forEach(o=>NT(o,e,n,i));else{const o=Ae(t.handler)?t.handler.bind(n):e[t.handler];Ae(o)&&Rs(r,o,t)}}function Y_(t){const e=t.type,{mixins:n,extends:i}=e,{mixins:r,optionsCache:o,config:{optionMergeStrategies:l}}=t.appContext,u=o.get(e);let h;return u?h=u:!r.length&&!n&&!i?h=e:(h={},r.length&&r.forEach(d=>Mu(h,d,l,!0)),Mu(h,e,l)),it(e)&&o.set(e,h),h}function Mu(t,e,n,i=!1){const{mixins:r,extends:o}=e;o&&Mu(t,o,n,!0),r&&r.forEach(l=>Mu(t,l,n,!0));for(const l in e)if(!(i&&l==="expose")){const u=aP[l]||n&&n[l];t[l]=u?u(t[l],e[l]):e[l]}return t}const aP={data:TE,props:_s,emits:_s,methods:_s,computed:_s,beforeCreate:an,created:an,beforeMount:an,mounted:an,beforeUpdate:an,updated:an,beforeDestroy:an,beforeUnmount:an,destroyed:an,unmounted:an,activated:an,deactivated:an,errorCaptured:an,serverPrefetch:an,components:_s,directives:_s,watch:cP,provide:TE,inject:lP};function TE(t,e){return e?t?function(){return tn(Ae(t)?t.call(this,this):t,Ae(e)?e.call(this,this):e)}:e:t}function lP(t,e){return _s(Fp(t),Fp(e))}function Fp(t){if(de(t)){const e={};for(let n=0;n<t.length;n++)e[t[n]]=t[n];return e}return t}function an(t,e){return t?[...new Set([].concat(t,e))]:e}function _s(t,e){return t?tn(tn(Object.create(null),t),e):e}function cP(t,e){if(!t)return e;if(!e)return t;const n=tn(Object.create(null),t);for(const i in e)n[i]=an(t[i],e[i]);return n}function uP(t,e,n,i=!1){const r={},o={};Du(o,kh,1),t.propsDefaults=Object.create(null),RT(t,e,r,o);for(const l in t.propsOptions[0])l in r||(r[l]=void 0);n?t.props=i?r:wk(r):t.type.props?t.props=r:t.props=o,t.attrs=o}function hP(t,e,n,i){const{props:r,attrs:o,vnode:{patchFlag:l}}=t,u=Ve(r),[h]=t.propsOptions;let d=!1;if((i||l>0)&&!(l&16)){if(l&8){const p=t.vnode.dynamicProps;for(let g=0;g<p.length;g++){let y=p[g];if(Oh(t.emitsOptions,y))continue;const b=e[y];if(h)if($e(o,y))b!==o[y]&&(o[y]=b,d=!0);else{const S=Li(y);r[S]=Up(h,u,S,b,t,!1)}else b!==o[y]&&(o[y]=b,d=!0)}}}else{RT(t,e,r,o)&&(d=!0);let p;for(const g in u)(!e||!$e(e,g)&&((p=ea(g))===g||!$e(e,p)))&&(h?n&&(n[g]!==void 0||n[p]!==void 0)&&(r[g]=Up(h,u,g,void 0,t,!0)):delete r[g]);if(o!==u)for(const g in o)(!e||!$e(e,g))&&(delete o[g],d=!0)}d&&ur(t,"set","$attrs")}function RT(t,e,n,i){const[r,o]=t.propsOptions;let l=!1,u;if(e)for(let h in e){if(wu(h))continue;const d=e[h];let p;r&&$e(r,p=Li(h))?!o||!o.includes(p)?n[p]=d:(u||(u={}))[p]=d:Oh(t.emitsOptions,h)||(!(h in i)||d!==i[h])&&(i[h]=d,l=!0)}if(o){const h=Ve(n),d=u||st;for(let p=0;p<o.length;p++){const g=o[p];n[g]=Up(r,h,g,d[g],t,!$e(d,g))}}return l}function Up(t,e,n,i,r,o){const l=t[n];if(l!=null){const u=$e(l,"default");if(u&&i===void 0){const h=l.default;if(l.type!==Function&&Ae(h)){const{propsDefaults:d}=r;n in d?i=d[n]:(Bo(r),i=d[n]=h.call(null,e),xs())}else i=h}l[0]&&(o&&!u?i=!1:l[1]&&(i===""||i===ea(n))&&(i=!0))}return i}function xT(t,e,n=!1){const i=e.propsCache,r=i.get(t);if(r)return r;const o=t.props,l={},u=[];let h=!1;if(!Ae(t)){const p=g=>{h=!0;const[y,b]=xT(g,e,!0);tn(l,y),b&&u.push(...b)};!n&&e.mixins.length&&e.mixins.forEach(p),t.extends&&p(t.extends),t.mixins&&t.mixins.forEach(p)}if(!o&&!h)return it(t)&&i.set(t,Ao),Ao;if(de(o))for(let p=0;p<o.length;p++){const g=Li(o[p]);CE(g)&&(l[g]=st)}else if(o)for(const p in o){const g=Li(p);if(CE(g)){const y=o[p],b=l[g]=de(y)||Ae(y)?{type:y}:Object.assign({},y);if(b){const S=SE(Boolean,b.type),N=SE(String,b.type);b[0]=S>-1,b[1]=N<0||S<N,(S>-1||$e(b,"default"))&&u.push(g)}}}const d=[l,u];return it(t)&&i.set(t,d),d}function CE(t){return t[0]!=="$"}function IE(t){const e=t&&t.toString().match(/^\s*function (\w+)/);return e?e[1]:t===null?"null":""}function AE(t,e){return IE(t)===IE(e)}function SE(t,e){return de(e)?e.findIndex(n=>AE(n,t)):Ae(e)&&AE(e,t)?0:-1}const DT=t=>t[0]==="_"||t==="$stable",X_=t=>de(t)?t.map(Ci):[Ci(t)],fP=(t,e,n)=>{if(e._n)return e;const i=Fo((...r)=>X_(e(...r)),n);return i._c=!1,i},LT=(t,e,n)=>{const i=t._ctx;for(const r in t){if(DT(r))continue;const o=t[r];if(Ae(o))e[r]=fP(r,o,i);else if(o!=null){const l=X_(o);e[r]=()=>l}}},kT=(t,e)=>{const n=X_(e);t.slots.default=()=>n},dP=(t,e)=>{if(t.vnode.shapeFlag&32){const n=e._;n?(t.slots=Ve(e),Du(e,"_",n)):LT(e,t.slots={})}else t.slots={},e&&kT(t,e);Du(t.slots,kh,1)},pP=(t,e,n)=>{const{vnode:i,slots:r}=t;let o=!0,l=st;if(i.shapeFlag&32){const u=e._;u?n&&u===1?o=!1:(tn(r,e),!n&&u===1&&delete r._):(o=!e.$stable,LT(e,r)),l=e}else e&&(kT(t,e),l={default:1});if(o)for(const u in r)!DT(u)&&!(u in l)&&delete r[u]};function PT(){return{app:null,config:{isNativeTag:HL,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let _P=0;function gP(t,e){return function(i,r=null){Ae(i)||(i=Object.assign({},i)),r!=null&&!it(r)&&(r=null);const o=PT(),l=new Set;let u=!1;const h=o.app={_uid:_P++,_component:i,_props:r,_container:null,_context:o,_instance:null,version:FP,get config(){return o.config},set config(d){},use(d,...p){return l.has(d)||(d&&Ae(d.install)?(l.add(d),d.install(h,...p)):Ae(d)&&(l.add(d),d(h,...p))),h},mixin(d){return o.mixins.includes(d)||o.mixins.push(d),h},component(d,p){return p?(o.components[d]=p,h):o.components[d]},directive(d,p){return p?(o.directives[d]=p,h):o.directives[d]},mount(d,p,g){if(!u){const y=nt(i,r);return y.appContext=o,p&&e?e(y,d):t(y,d,g),u=!0,h._container=d,d.__vue_app__=h,Ph(y.component)||y.component.proxy}},unmount(){u&&(t(null,h._container),delete h._container.__vue_app__)},provide(d,p){return o.provides[d]=p,h}};return h}}function Bp(t,e,n,i,r=!1){if(de(t)){t.forEach((y,b)=>Bp(y,e&&(de(e)?e[b]:e),n,i,r));return}if(Qa(i)&&!r)return;const o=i.shapeFlag&4?Ph(i.component)||i.component.proxy:i.el,l=r?null:o,{i:u,r:h}=t,d=e&&e.r,p=u.refs===st?u.refs={}:u.refs,g=u.setupState;if(d!=null&&d!==h&&(St(d)?(p[d]=null,$e(g,d)&&(g[d]=null)):Jt(d)&&(d.value=null)),Ae(h))Mr(h,u,12,[l,p]);else{const y=St(h),b=Jt(h);if(y||b){const S=()=>{if(t.f){const N=y?$e(g,h)?g[h]:p[h]:h.value;r?de(N)&&$_(N,o):de(N)?N.includes(o)||N.push(o):y?(p[h]=[o],$e(g,h)&&(g[h]=p[h])):(h.value=[o],t.k&&(p[t.k]=h.value))}else y?(p[h]=l,$e(g,h)&&(g[h]=l)):b&&(h.value=l,t.k&&(p[t.k]=l))};l?(S.id=-1,yn(S,n)):S()}}}const yn=Bk;function mP(t){return vP(t)}function vP(t,e){const n=zL();n.__VUE__=!0;const{insert:i,remove:r,patchProp:o,createElement:l,createText:u,createComment:h,setText:d,setElementText:p,parentNode:g,nextSibling:y,setScopeId:b=hi,insertStaticContent:S}=t,N=(w,C,R,M=null,$=null,W=null,z=!1,q=null,j=!!C.dynamicChildren)=>{if(w===C)return;w&&!ys(w,C)&&(M=ei(w),Ot(w,$,W,!0),w=null),C.patchFlag===-2&&(j=!1,C.dynamicChildren=null);const{type:k,ref:ne,shapeFlag:J}=C;switch(k){case Lh:P(w,C,R,M);break;case Gn:G(w,C,R,M);break;case Cu:w==null&&oe(C,R,M,z);break;case Tt:ot(w,C,R,M,$,W,z,q,j);break;default:J&1?Q(w,C,R,M,$,W,z,q,j):J&6?Xe(w,C,R,M,$,W,z,q,j):(J&64||J&128)&&k.process(w,C,R,M,$,W,z,q,j,Gt)}ne!=null&&$&&Bp(ne,w&&w.ref,W,C||w,!C)},P=(w,C,R,M)=>{if(w==null)i(C.el=u(C.children),R,M);else{const $=C.el=w.el;C.children!==w.children&&d($,C.children)}},G=(w,C,R,M)=>{w==null?i(C.el=h(C.children||""),R,M):C.el=w.el},oe=(w,C,R,M)=>{[w.el,w.anchor]=S(w.children,C,R,M,w.el,w.anchor)},H=({el:w,anchor:C},R,M)=>{let $;for(;w&&w!==C;)$=y(w),i(w,R,M),w=$;i(C,R,M)},V=({el:w,anchor:C})=>{let R;for(;w&&w!==C;)R=y(w),r(w),w=R;r(C)},Q=(w,C,R,M,$,W,z,q,j)=>{z=z||C.type==="svg",w==null?B(C,R,M,$,W,z,q,j):pe(w,C,$,W,z,q,j)},B=(w,C,R,M,$,W,z,q)=>{let j,k;const{type:ne,props:J,shapeFlag:se,transition:ae,dirs:Ee}=w;if(j=w.el=l(w.type,W,J&&J.is,J),se&8?p(j,w.children):se&16&&X(w.children,j,null,M,$,W&&ne!=="foreignObject",z,q),Ee&&ds(w,null,M,"created"),J){for(const Oe in J)Oe!=="value"&&!wu(Oe)&&o(j,Oe,null,J[Oe],W,w.children,M,$,yt);"value"in J&&o(j,"value",null,J.value),(k=J.onVnodeBeforeMount)&&wi(k,M,w)}Z(j,w,w.scopeId,z,M),Ee&&ds(w,null,M,"beforeMount");const ke=(!$||$&&!$.pendingBranch)&&ae&&!ae.persisted;ke&&ae.beforeEnter(j),i(j,C,R),((k=J&&J.onVnodeMounted)||ke||Ee)&&yn(()=>{k&&wi(k,M,w),ke&&ae.enter(j),Ee&&ds(w,null,M,"mounted")},$)},Z=(w,C,R,M,$)=>{if(R&&b(w,R),M)for(let W=0;W<M.length;W++)b(w,M[W]);if($){let W=$.subTree;if(C===W){const z=$.vnode;Z(w,z,z.scopeId,z.slotScopeIds,$.parent)}}},X=(w,C,R,M,$,W,z,q,j=0)=>{for(let k=j;k<w.length;k++){const ne=w[k]=q?Dr(w[k]):Ci(w[k]);N(null,ne,C,R,M,$,W,z,q)}},pe=(w,C,R,M,$,W,z)=>{const q=C.el=w.el;let{patchFlag:j,dynamicChildren:k,dirs:ne}=C;j|=w.patchFlag&16;const J=w.props||st,se=C.props||st;let ae;R&&ps(R,!1),(ae=se.onVnodeBeforeUpdate)&&wi(ae,R,C,w),ne&&ds(C,w,R,"beforeUpdate"),R&&ps(R,!0);const Ee=$&&C.type!=="foreignObject";if(k?_e(w.dynamicChildren,k,q,R,M,Ee,W):z||Te(w,C,q,null,R,M,Ee,W,!1),j>0){if(j&16)Fe(q,C,J,se,R,M,$);else if(j&2&&J.class!==se.class&&o(q,"class",null,se.class,$),j&4&&o(q,"style",J.style,se.style,$),j&8){const ke=C.dynamicProps;for(let Oe=0;Oe<ke.length;Oe++){const at=ke[Oe],nn=J[at],vi=se[at];(vi!==nn||at==="value")&&o(q,at,nn,vi,$,w.children,R,M,yt)}}j&1&&w.children!==C.children&&p(q,C.children)}else!z&&k==null&&Fe(q,C,J,se,R,M,$);((ae=se.onVnodeUpdated)||ne)&&yn(()=>{ae&&wi(ae,R,C,w),ne&&ds(C,w,R,"updated")},M)},_e=(w,C,R,M,$,W,z)=>{for(let q=0;q<C.length;q++){const j=w[q],k=C[q],ne=j.el&&(j.type===Tt||!ys(j,k)||j.shapeFlag&70)?g(j.el):R;N(j,k,ne,null,M,$,W,z,!0)}},Fe=(w,C,R,M,$,W,z)=>{if(R!==M){if(R!==st)for(const q in R)!wu(q)&&!(q in M)&&o(w,q,R[q],null,z,C.children,$,W,yt);for(const q in M){if(wu(q))continue;const j=M[q],k=R[q];j!==k&&q!=="value"&&o(w,q,k,j,z,C.children,$,W,yt)}"value"in M&&o(w,"value",R.value,M.value)}},ot=(w,C,R,M,$,W,z,q,j)=>{const k=C.el=w?w.el:u(""),ne=C.anchor=w?w.anchor:u("");let{patchFlag:J,dynamicChildren:se,slotScopeIds:ae}=C;ae&&(q=q?q.concat(ae):ae),w==null?(i(k,R,M),i(ne,R,M),X(C.children,R,ne,$,W,z,q,j)):J>0&&J&64&&se&&w.dynamicChildren?(_e(w.dynamicChildren,se,R,$,W,z,q),(C.key!=null||$&&C===$.subTree)&&MT(w,C,!0)):Te(w,C,R,ne,$,W,z,q,j)},Xe=(w,C,R,M,$,W,z,q,j)=>{C.slotScopeIds=q,w==null?C.shapeFlag&512?$.ctx.activate(C,R,M,z,j):qt(C,R,M,$,W,z,j):kn(w,C,j)},qt=(w,C,R,M,$,W,z)=>{const q=w.component=OP(w,M,$);if(Rh(w)&&(q.ctx.renderer=Gt),RP(q),q.asyncDep){if($&&$.registerDep(q,We),!w.el){const j=q.subTree=nt(Gn);G(null,j,C,R)}return}We(q,w,C,R,$,W,z)},kn=(w,C,R)=>{const M=C.component=w.component;if($k(w,C,R))if(M.asyncDep&&!M.asyncResolved){ye(M,C,R);return}else M.next=C,xk(M.update),M.update();else C.el=w.el,M.vnode=C},We=(w,C,R,M,$,W,z)=>{const q=()=>{if(w.isMounted){let{next:ne,bu:J,u:se,parent:ae,vnode:Ee}=w,ke=ne,Oe;ps(w,!1),ne?(ne.el=Ee.el,ye(w,ne,z)):ne=Ee,J&&Tu(J),(Oe=ne.props&&ne.props.onVnodeBeforeUpdate)&&wi(Oe,ae,ne,Ee),ps(w,!0);const at=Ud(w),nn=w.subTree;w.subTree=at,N(nn,at,g(nn.el),ei(nn),w,$,W),ne.el=at.el,ke===null&&Fk(w,at.el),se&&yn(se,$),(Oe=ne.props&&ne.props.onVnodeUpdated)&&yn(()=>wi(Oe,ae,ne,Ee),$)}else{let ne;const{el:J,props:se}=C,{bm:ae,m:Ee,parent:ke}=w,Oe=Qa(C);if(ps(w,!1),ae&&Tu(ae),!Oe&&(ne=se&&se.onVnodeBeforeMount)&&wi(ne,ke,C),ps(w,!0),J&&Pn){const at=()=>{w.subTree=Ud(w),Pn(J,w.subTree,w,$,null)};Oe?C.type.__asyncLoader().then(()=>!w.isUnmounted&&at()):at()}else{const at=w.subTree=Ud(w);N(null,at,R,M,w,$,W),C.el=at.el}if(Ee&&yn(Ee,$),!Oe&&(ne=se&&se.onVnodeMounted)){const at=C;yn(()=>wi(ne,ke,at),$)}(C.shapeFlag&256||ke&&Qa(ke.vnode)&&ke.vnode.shapeFlag&256)&&w.a&&yn(w.a,$),w.isMounted=!0,C=R=M=null}},j=w.effect=new B_(q,()=>G_(k),w.scope),k=w.update=()=>j.run();k.id=w.uid,ps(w,!0),k()},ye=(w,C,R)=>{C.component=w;const M=w.vnode.props;w.vnode=C,w.next=null,hP(w,C.props,M,R),pP(w,C.children,R),ta(),mE(),na()},Te=(w,C,R,M,$,W,z,q,j=!1)=>{const k=w&&w.children,ne=w?w.shapeFlag:0,J=C.children,{patchFlag:se,shapeFlag:ae}=C;if(se>0){if(se&128){dn(k,J,R,M,$,W,z,q,j);return}else if(se&256){kt(k,J,R,M,$,W,z,q,j);return}}ae&8?(ne&16&&yt(k,$,W),J!==k&&p(R,J)):ne&16?ae&16?dn(k,J,R,M,$,W,z,q,j):yt(k,$,W,!0):(ne&8&&p(R,""),ae&16&&X(J,R,M,$,W,z,q,j))},kt=(w,C,R,M,$,W,z,q,j)=>{w=w||Ao,C=C||Ao;const k=w.length,ne=C.length,J=Math.min(k,ne);let se;for(se=0;se<J;se++){const ae=C[se]=j?Dr(C[se]):Ci(C[se]);N(w[se],ae,R,null,$,W,z,q,j)}k>ne?yt(w,$,W,!0,!1,J):X(C,R,M,$,W,z,q,j,J)},dn=(w,C,R,M,$,W,z,q,j)=>{let k=0;const ne=C.length;let J=w.length-1,se=ne-1;for(;k<=J&&k<=se;){const ae=w[k],Ee=C[k]=j?Dr(C[k]):Ci(C[k]);if(ys(ae,Ee))N(ae,Ee,R,null,$,W,z,q,j);else break;k++}for(;k<=J&&k<=se;){const ae=w[J],Ee=C[se]=j?Dr(C[se]):Ci(C[se]);if(ys(ae,Ee))N(ae,Ee,R,null,$,W,z,q,j);else break;J--,se--}if(k>J){if(k<=se){const ae=se+1,Ee=ae<ne?C[ae].el:M;for(;k<=se;)N(null,C[k]=j?Dr(C[k]):Ci(C[k]),R,Ee,$,W,z,q,j),k++}}else if(k>se)for(;k<=J;)Ot(w[k],$,W,!0),k++;else{const ae=k,Ee=k,ke=new Map;for(k=Ee;k<=se;k++){const Mt=C[k]=j?Dr(C[k]):Ci(C[k]);Mt.key!=null&&ke.set(Mt.key,k)}let Oe,at=0;const nn=se-Ee+1;let vi=!1,Xs=0;const qi=new Array(nn);for(k=0;k<nn;k++)qi[k]=0;for(k=ae;k<=J;k++){const Mt=w[k];if(at>=nn){Ot(Mt,$,W,!0);continue}let pn;if(Mt.key!=null)pn=ke.get(Mt.key);else for(Oe=Ee;Oe<=se;Oe++)if(qi[Oe-Ee]===0&&ys(Mt,C[Oe])){pn=Oe;break}pn===void 0?Ot(Mt,$,W,!0):(qi[pn-Ee]=k+1,pn>=Xs?Xs=pn:vi=!0,N(Mt,C[pn],R,null,$,W,z,q,j),at++)}const Qs=vi?yP(qi):Ao;for(Oe=Qs.length-1,k=nn-1;k>=0;k--){const Mt=Ee+k,pn=C[Mt],Js=Mt+1<ne?C[Mt+1].el:M;qi[k]===0?N(null,pn,R,Js,$,W,z,q,j):vi&&(Oe<0||k!==Qs[Oe]?ht(pn,R,Js,2):Oe--)}}},ht=(w,C,R,M,$=null)=>{const{el:W,type:z,transition:q,children:j,shapeFlag:k}=w;if(k&6){ht(w.component.subTree,C,R,M);return}if(k&128){w.suspense.move(C,R,M);return}if(k&64){z.move(w,C,R,Gt);return}if(z===Tt){i(W,C,R);for(let J=0;J<j.length;J++)ht(j[J],C,R,M);i(w.anchor,C,R);return}if(z===Cu){H(w,C,R);return}if(M!==2&&k&1&&q)if(M===0)q.beforeEnter(W),i(W,C,R),yn(()=>q.enter(W),$);else{const{leave:J,delayLeave:se,afterLeave:ae}=q,Ee=()=>i(W,C,R),ke=()=>{J(W,()=>{Ee(),ae&&ae()})};se?se(W,Ee,ke):ke()}else i(W,C,R)},Ot=(w,C,R,M=!1,$=!1)=>{const{type:W,props:z,ref:q,children:j,dynamicChildren:k,shapeFlag:ne,patchFlag:J,dirs:se}=w;if(q!=null&&Bp(q,null,R,w,!0),ne&256){C.ctx.deactivate(w);return}const ae=ne&1&&se,Ee=!Qa(w);let ke;if(Ee&&(ke=z&&z.onVnodeBeforeUnmount)&&wi(ke,C,w),ne&6)Pt(w.component,R,M);else{if(ne&128){w.suspense.unmount(R,M);return}ae&&ds(w,null,C,"beforeUnmount"),ne&64?w.type.remove(w,C,R,$,Gt,M):k&&(W!==Tt||J>0&&J&64)?yt(k,C,R,!1,!0):(W===Tt&&J&384||!$&&ne&16)&&yt(j,C,R),M&&ji(w)}(Ee&&(ke=z&&z.onVnodeUnmounted)||ae)&&yn(()=>{ke&&wi(ke,C,w),ae&&ds(w,null,C,"unmounted")},R)},ji=w=>{const{type:C,el:R,anchor:M,transition:$}=w;if(C===Tt){mi(R,M);return}if(C===Cu){V(w);return}const W=()=>{r(R),$&&!$.persisted&&$.afterLeave&&$.afterLeave()};if(w.shapeFlag&1&&$&&!$.persisted){const{leave:z,delayLeave:q}=$,j=()=>z(R,W);q?q(w.el,W,j):j()}else W()},mi=(w,C)=>{let R;for(;w!==C;)R=y(w),r(w),w=R;r(C)},Pt=(w,C,R)=>{const{bum:M,scope:$,update:W,subTree:z,um:q}=w;M&&Tu(M),$.stop(),W&&(W.active=!1,Ot(z,w,C,R)),q&&yn(q,C),yn(()=>{w.isUnmounted=!0},C),C&&C.pendingBranch&&!C.isUnmounted&&w.asyncDep&&!w.asyncResolved&&w.suspenseId===C.pendingId&&(C.deps--,C.deps===0&&C.resolve())},yt=(w,C,R,M=!1,$=!1,W=0)=>{for(let z=W;z<w.length;z++)Ot(w[z],C,R,M,$)},ei=w=>w.shapeFlag&6?ei(w.component.subTree):w.shapeFlag&128?w.suspense.next():y(w.anchor||w.el),Kt=(w,C,R)=>{w==null?C._vnode&&Ot(C._vnode,null,null,!0):N(C._vnode||null,w,C,null,null,null,R),mE(),yT(),C._vnode=w},Gt={p:N,um:Ot,m:ht,r:ji,mt:qt,mc:X,pc:Te,pbc:_e,n:ei,o:t};let is,Pn;return e&&([is,Pn]=e(Gt)),{render:Kt,hydrate:is,createApp:gP(Kt,is)}}function ps({effect:t,update:e},n){t.allowRecurse=e.allowRecurse=n}function MT(t,e,n=!1){const i=t.children,r=e.children;if(de(i)&&de(r))for(let o=0;o<i.length;o++){const l=i[o];let u=r[o];u.shapeFlag&1&&!u.dynamicChildren&&((u.patchFlag<=0||u.patchFlag===32)&&(u=r[o]=Dr(r[o]),u.el=l.el),n||MT(l,u)),u.type===Lh&&(u.el=l.el)}}function yP(t){const e=t.slice(),n=[0];let i,r,o,l,u;const h=t.length;for(i=0;i<h;i++){const d=t[i];if(d!==0){if(r=n[n.length-1],t[r]<d){e[i]=r,n.push(i);continue}for(o=0,l=n.length-1;o<l;)u=o+l>>1,t[n[u]]<d?o=u+1:l=u;d<t[n[o]]&&(o>0&&(e[i]=n[o-1]),n[o]=i)}}for(o=n.length,l=n[o-1];o-- >0;)n[o]=l,l=e[l];return n}const EP=t=>t.__isTeleport,Tt=Symbol(void 0),Lh=Symbol(void 0),Gn=Symbol(void 0),Cu=Symbol(void 0),el=[];let li=null;function we(t=!1){el.push(li=t?null:[])}function bP(){el.pop(),li=el[el.length-1]||null}let gl=1;function OE(t){gl+=t}function $T(t){return t.dynamicChildren=gl>0?li||Ao:null,bP(),gl>0&&li&&li.push(t),t}function Ue(t,e,n,i,r,o){return $T(le(t,e,n,i,r,o,!0))}function sr(t,e,n,i,r){return $T(nt(t,e,n,i,r,!0))}function $u(t){return t?t.__v_isVNode===!0:!1}function ys(t,e){return t.type===e.type&&t.key===e.key}const kh="__vInternal",FT=({key:t})=>t??null,Iu=({ref:t,ref_key:e,ref_for:n})=>t!=null?St(t)||Jt(t)||Ae(t)?{i:Wt,r:t,k:e,f:!!n}:t:null;function le(t,e=null,n=null,i=0,r=null,o=t===Tt?0:1,l=!1,u=!1){const h={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&FT(e),ref:e&&Iu(e),scopeId:Nh,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:o,patchFlag:i,dynamicProps:r,dynamicChildren:null,appContext:null,ctx:Wt};return u?(Q_(h,n),o&128&&t.normalize(h)):n&&(h.shapeFlag|=St(n)?8:16),gl>0&&!l&&li&&(h.patchFlag>0||o&6)&&h.patchFlag!==32&&li.push(h),h}const nt=wP;function wP(t,e=null,n=null,i=0,r=null,o=!1){if((!t||t===tP)&&(t=Gn),$u(t)){const u=jr(t,e,!0);return n&&Q_(u,n),gl>0&&!o&&li&&(u.shapeFlag&6?li[li.indexOf(t)]=u:li.push(u)),u.patchFlag|=-2,u}if(PP(t)&&(t=t.__vccOpts),e){e=TP(e);let{class:u,style:h}=e;u&&!St(u)&&(e.class=Mo(u)),it(h)&&(hT(h)&&!de(h)&&(h=tn({},h)),e.style=P_(h))}const l=St(t)?1:Uk(t)?128:EP(t)?64:it(t)?4:Ae(t)?2:0;return le(t,e,n,i,r,l,o,!0)}function TP(t){return t?hT(t)||kh in t?tn({},t):t:null}function jr(t,e,n=!1){const{props:i,ref:r,patchFlag:o,children:l}=t,u=e?IP(i||{},e):i;return{__v_isVNode:!0,__v_skip:!0,type:t.type,props:u,key:u&&FT(u),ref:e&&e.ref?n&&r?de(r)?r.concat(Iu(e)):[r,Iu(e)]:Iu(e):r,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:l,target:t.target,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==Tt?o===-1?16:o|16:o,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:t.transition,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&jr(t.ssContent),ssFallback:t.ssFallback&&jr(t.ssFallback),el:t.el,anchor:t.anchor,ctx:t.ctx}}function Uo(t=" ",e=0){return nt(Lh,null,t,e)}function CP(t,e){const n=nt(Cu,null,t);return n.staticCount=e,n}function mt(t="",e=!1){return e?(we(),sr(Gn,null,t)):nt(Gn,null,t)}function Ci(t){return t==null||typeof t=="boolean"?nt(Gn):de(t)?nt(Tt,null,t.slice()):typeof t=="object"?Dr(t):nt(Lh,null,String(t))}function Dr(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:jr(t)}function Q_(t,e){let n=0;const{shapeFlag:i}=t;if(e==null)e=null;else if(de(e))n=16;else if(typeof e=="object")if(i&65){const r=e.default;r&&(r._c&&(r._d=!1),Q_(t,r()),r._c&&(r._d=!0));return}else{n=32;const r=e._;!r&&!(kh in e)?e._ctx=Wt:r===3&&Wt&&(Wt.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else Ae(e)?(e={default:e,_ctx:Wt},n=32):(e=String(e),i&64?(n=16,e=[Uo(e)]):n=8);t.children=e,t.shapeFlag|=n}function IP(...t){const e={};for(let n=0;n<t.length;n++){const i=t[n];for(const r in i)if(r==="class")e.class!==i.class&&(e.class=Mo([e.class,i.class]));else if(r==="style")e.style=P_([e.style,i.style]);else if(wh(r)){const o=e[r],l=i[r];l&&o!==l&&!(de(o)&&o.includes(l))&&(e[r]=o?[].concat(o,l):l)}else r!==""&&(e[r]=i[r])}return e}function wi(t,e,n,i=null){Kn(t,e,7,[n,i])}const AP=PT();let SP=0;function OP(t,e,n){const i=t.type,r=(e?e.appContext:t.appContext)||AP,o={uid:SP++,vnode:t,type:i,parent:e,appContext:r,root:null,next:null,subTree:null,effect:null,update:null,scope:new YL(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(r.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:xT(i,r),emitsOptions:bT(i,r),emit:null,emitted:null,propsDefaults:st,inheritAttrs:i.inheritAttrs,ctx:st,data:st,props:st,attrs:st,slots:st,refs:st,setupState:st,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return o.ctx={_:o},o.root=e?e.root:o,o.emit=kk.bind(null,o),t.ce&&t.ce(o),o}let Dt=null;const NP=()=>Dt||Wt,Bo=t=>{Dt=t,t.scope.on()},xs=()=>{Dt&&Dt.scope.off(),Dt=null};function UT(t){return t.vnode.shapeFlag&4}let ml=!1;function RP(t,e=!1){ml=e;const{props:n,children:i}=t.vnode,r=UT(t);uP(t,n,r,e),dP(t,i);const o=r?xP(t,e):void 0;return ml=!1,o}function xP(t,e){const n=t.type;t.accessCache=Object.create(null),t.proxy=fT(new Proxy(t.ctx,rP));const{setup:i}=n;if(i){const r=t.setupContext=i.length>1?LP(t):null;Bo(t),ta();const o=Mr(i,t,0,[t.props,r]);if(na(),xs(),Qw(o)){if(o.then(xs,xs),e)return o.then(l=>{NE(t,l,e)}).catch(l=>{Sh(l,t,0)});t.asyncDep=o}else NE(t,o,e)}else BT(t,e)}function NE(t,e,n){Ae(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:it(e)&&(t.setupState=_T(e)),BT(t,n)}let RE;function BT(t,e,n){const i=t.type;if(!t.render){if(!e&&RE&&!i.render){const r=i.template||Y_(t).template;if(r){const{isCustomElement:o,compilerOptions:l}=t.appContext.config,{delimiters:u,compilerOptions:h}=i,d=tn(tn({isCustomElement:o,delimiters:u},l),h);i.render=RE(r,d)}}t.render=i.render||hi}Bo(t),ta(),sP(t),na(),xs()}function DP(t){return new Proxy(t.attrs,{get(e,n){return xn(t,"get","$attrs"),e[n]}})}function LP(t){const e=i=>{t.exposed=i||{}};let n;return{get attrs(){return n||(n=DP(t))},slots:t.slots,emit:t.emit,expose:e}}function Ph(t){if(t.exposed)return t.exposeProxy||(t.exposeProxy=new Proxy(_T(fT(t.exposed)),{get(e,n){if(n in e)return e[n];if(n in Za)return Za[n](t)},has(e,n){return n in e||n in Za}}))}function kP(t,e=!0){return Ae(t)?t.displayName||t.name:t.name||e&&t.__name}function PP(t){return Ae(t)&&"__vccOpts"in t}const Wp=(t,e)=>Ok(t,e,ml);function J_(t,e,n){const i=arguments.length;return i===2?it(e)&&!de(e)?$u(e)?nt(t,null,[e]):nt(t,e):nt(t,null,e):(i>3?n=Array.prototype.slice.call(arguments,2):i===3&&$u(n)&&(n=[n]),nt(t,e,n))}const MP=Symbol(""),$P=()=>At(MP),FP="3.2.45",UP="http://www.w3.org/2000/svg",Es=typeof document<"u"?document:null,xE=Es&&Es.createElement("template"),BP={insert:(t,e,n)=>{e.insertBefore(t,n||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,n,i)=>{const r=e?Es.createElementNS(UP,t):Es.createElement(t,n?{is:n}:void 0);return t==="select"&&i&&i.multiple!=null&&r.setAttribute("multiple",i.multiple),r},createText:t=>Es.createTextNode(t),createComment:t=>Es.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>Es.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,n,i,r,o){const l=n?n.previousSibling:e.lastChild;if(r&&(r===o||r.nextSibling))for(;e.insertBefore(r.cloneNode(!0),n),!(r===o||!(r=r.nextSibling)););else{xE.innerHTML=i?`<svg>${t}</svg>`:t;const u=xE.content;if(i){const h=u.firstChild;for(;h.firstChild;)u.appendChild(h.firstChild);u.removeChild(h)}e.insertBefore(u,n)}return[l?l.nextSibling:e.firstChild,n?n.previousSibling:e.lastChild]}};function WP(t,e,n){const i=t._vtc;i&&(e=(e?[e,...i]:[...i]).join(" ")),e==null?t.removeAttribute("class"):n?t.setAttribute("class",e):t.className=e}function HP(t,e,n){const i=t.style,r=St(n);if(n&&!r){for(const o in n)Hp(i,o,n[o]);if(e&&!St(e))for(const o in e)n[o]==null&&Hp(i,o,"")}else{const o=i.display;r?e!==n&&(i.cssText=n):e&&t.removeAttribute("style"),"_vod"in t&&(i.display=o)}}const DE=/\s*!important$/;function Hp(t,e,n){if(de(n))n.forEach(i=>Hp(t,e,i));else if(n==null&&(n=""),e.startsWith("--"))t.setProperty(e,n);else{const i=VP(t,e);DE.test(n)?t.setProperty(ea(i),n.replace(DE,""),"important"):t[i]=n}}const LE=["Webkit","Moz","ms"],Hd={};function VP(t,e){const n=Hd[e];if(n)return n;let i=Li(e);if(i!=="filter"&&i in t)return Hd[e]=i;i=Ih(i);for(let r=0;r<LE.length;r++){const o=LE[r]+i;if(o in t)return Hd[e]=o}return e}const kE="http://www.w3.org/1999/xlink";function jP(t,e,n,i,r){if(i&&e.startsWith("xlink:"))n==null?t.removeAttributeNS(kE,e.slice(6,e.length)):t.setAttributeNS(kE,e,n);else{const o=BL(e);n==null||o&&!zw(n)?t.removeAttribute(e):t.setAttribute(e,o?"":n)}}function qP(t,e,n,i,r,o,l){if(e==="innerHTML"||e==="textContent"){i&&l(i,r,o),t[e]=n??"";return}if(e==="value"&&t.tagName!=="PROGRESS"&&!t.tagName.includes("-")){t._value=n;const h=n??"";(t.value!==h||t.tagName==="OPTION")&&(t.value=h),n==null&&t.removeAttribute(e);return}let u=!1;if(n===""||n==null){const h=typeof t[e];h==="boolean"?n=zw(n):n==null&&h==="string"?(n="",u=!0):h==="number"&&(n=0,u=!0)}try{t[e]=n}catch{}u&&t.removeAttribute(e)}function bs(t,e,n,i){t.addEventListener(e,n,i)}function KP(t,e,n,i){t.removeEventListener(e,n,i)}function GP(t,e,n,i,r=null){const o=t._vei||(t._vei={}),l=o[e];if(i&&l)l.value=i;else{const[u,h]=zP(e);if(i){const d=o[e]=QP(i,r);bs(t,u,d,h)}else l&&(KP(t,u,l,h),o[e]=void 0)}}const PE=/(?:Once|Passive|Capture)$/;function zP(t){let e;if(PE.test(t)){e={};let i;for(;i=t.match(PE);)t=t.slice(0,t.length-i[0].length),e[i[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):ea(t.slice(2)),e]}let Vd=0;const YP=Promise.resolve(),XP=()=>Vd||(YP.then(()=>Vd=0),Vd=Date.now());function QP(t,e){const n=i=>{if(!i._vts)i._vts=Date.now();else if(i._vts<=n.attached)return;Kn(JP(i,n.value),e,5,[i])};return n.value=t,n.attached=XP(),n}function JP(t,e){if(de(e)){const n=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{n.call(t),t._stopped=!0},e.map(i=>r=>!r._stopped&&i&&i(r))}else return e}const ME=/^on[a-z]/,ZP=(t,e,n,i,r=!1,o,l,u,h)=>{e==="class"?WP(t,i,r):e==="style"?HP(t,n,i):wh(e)?M_(e)||GP(t,e,n,i,l):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):eM(t,e,i,r))?qP(t,e,i,o,l,u,h):(e==="true-value"?t._trueValue=i:e==="false-value"&&(t._falseValue=i),jP(t,e,i,r))};function eM(t,e,n,i){return i?!!(e==="innerHTML"||e==="textContent"||e in t&&ME.test(e)&&Ae(n)):e==="spellcheck"||e==="draggable"||e==="translate"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA"||ME.test(e)&&St(n)?!1:e in t}const tM={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String};jk.props;const Fu=t=>{const e=t.props["onUpdate:modelValue"]||!1;return de(e)?n=>Tu(e,n):e};function nM(t){t.target.composing=!0}function $E(t){const e=t.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const iM={created(t,{modifiers:{lazy:e,trim:n,number:i}},r){t._assign=Fu(r);const o=i||r.props&&r.props.type==="number";bs(t,e?"change":"input",l=>{if(l.target.composing)return;let u=t.value;n&&(u=u.trim()),o&&(u=Lu(u)),t._assign(u)}),n&&bs(t,"change",()=>{t.value=t.value.trim()}),e||(bs(t,"compositionstart",nM),bs(t,"compositionend",$E),bs(t,"change",$E))},mounted(t,{value:e}){t.value=e??""},beforeUpdate(t,{value:e,modifiers:{lazy:n,trim:i,number:r}},o){if(t._assign=Fu(o),t.composing||document.activeElement===t&&t.type!=="range"&&(n||i&&t.value.trim()===e||(r||t.type==="number")&&Lu(t.value)===e))return;const l=e??"";t.value!==l&&(t.value=l)}},rM={deep:!0,created(t,e,n){t._assign=Fu(n),bs(t,"change",()=>{const i=t._modelValue,r=sM(t),o=t.checked,l=t._assign;if(de(i)){const u=Yw(i,r),h=u!==-1;if(o&&!h)l(i.concat(r));else if(!o&&h){const d=[...i];d.splice(u,1),l(d)}}else if(Th(i)){const u=new Set(i);o?u.add(r):u.delete(r),l(u)}else l(WT(t,o))})},mounted:FE,beforeUpdate(t,e,n){t._assign=Fu(n),FE(t,e,n)}};function FE(t,{value:e,oldValue:n},i){t._modelValue=e,de(e)?t.checked=Yw(e,i.props.value)>-1:Th(e)?t.checked=e.has(i.props.value):e!==n&&(t.checked=bh(e,WT(t,!0)))}function sM(t){return"_value"in t?t._value:t.value}function WT(t,e){const n=e?"_trueValue":"_falseValue";return n in t?t[n]:e}const oM=tn({patchProp:ZP},BP);let UE;function aM(){return UE||(UE=mP(oM))}const lM=(...t)=>{const e=aM().createApp(...t),{mount:n}=e;return e.mount=i=>{const r=cM(i);if(!r)return;const o=e._component;!Ae(o)&&!o.render&&!o.template&&(o.template=r.innerHTML),r.innerHTML="";const l=n(r,!1,r instanceof SVGElement);return r instanceof Element&&(r.removeAttribute("v-cloak"),r.setAttribute("data-v-app","")),l},e};function cM(t){return St(t)?document.querySelector(t):t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HT={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K=function(t,e){if(!t)throw ia(e)},ia=function(t){return new Error("Firebase Database ("+HT.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VT=function(t){const e=[];let n=0;for(let i=0;i<t.length;i++){let r=t.charCodeAt(i);r<128?e[n++]=r:r<2048?(e[n++]=r>>6|192,e[n++]=r&63|128):(r&64512)===55296&&i+1<t.length&&(t.charCodeAt(i+1)&64512)===56320?(r=65536+((r&1023)<<10)+(t.charCodeAt(++i)&1023),e[n++]=r>>18|240,e[n++]=r>>12&63|128,e[n++]=r>>6&63|128,e[n++]=r&63|128):(e[n++]=r>>12|224,e[n++]=r>>6&63|128,e[n++]=r&63|128)}return e},uM=function(t){const e=[];let n=0,i=0;for(;n<t.length;){const r=t[n++];if(r<128)e[i++]=String.fromCharCode(r);else if(r>191&&r<224){const o=t[n++];e[i++]=String.fromCharCode((r&31)<<6|o&63)}else if(r>239&&r<365){const o=t[n++],l=t[n++],u=t[n++],h=((r&7)<<18|(o&63)<<12|(l&63)<<6|u&63)-65536;e[i++]=String.fromCharCode(55296+(h>>10)),e[i++]=String.fromCharCode(56320+(h&1023))}else{const o=t[n++],l=t[n++];e[i++]=String.fromCharCode((r&15)<<12|(o&63)<<6|l&63)}}return e.join("")},Mh={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let r=0;r<t.length;r+=3){const o=t[r],l=r+1<t.length,u=l?t[r+1]:0,h=r+2<t.length,d=h?t[r+2]:0,p=o>>2,g=(o&3)<<4|u>>4;let y=(u&15)<<2|d>>6,b=d&63;h||(b=64,l||(y=64)),i.push(n[p],n[g],n[y],n[b])}return i.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(VT(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):uM(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let r=0;r<t.length;){const o=n[t.charAt(r++)],u=r<t.length?n[t.charAt(r)]:0;++r;const d=r<t.length?n[t.charAt(r)]:64;++r;const g=r<t.length?n[t.charAt(r)]:64;if(++r,o==null||u==null||d==null||g==null)throw Error();const y=o<<2|u>>4;if(i.push(y),d!==64){const b=u<<4&240|d>>2;if(i.push(b),g!==64){const S=d<<6&192|g;i.push(S)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},jT=function(t){const e=VT(t);return Mh.encodeByteArray(e,!0)},Uu=function(t){return jT(t).replace(/\./g,"")},Bu=function(t){try{return Mh.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hM(t){return qT(void 0,t)}function qT(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(const n in e)!e.hasOwnProperty(n)||!fM(n)||(t[n]=qT(t[n],e[n]));return t}function fM(t){return t!=="__proto__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pi(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Z_(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Pi())}function dM(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function KT(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function GT(){return HT.NODE_ADMIN===!0}function zT(){try{return typeof indexedDB=="object"}catch{return!1}}function pM(){return new Promise((t,e)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(i);r.onsuccess=()=>{r.result.close(),n||self.indexedDB.deleteDatabase(i),t(!0)},r.onupgradeneeded=()=>{n=!1},r.onerror=()=>{var o;e(((o=r.error)===null||o===void 0?void 0:o.message)||"")}}catch(n){e(n)}})}function _M(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gM=()=>_M().__FIREBASE_DEFAULTS__,mM=()=>{if(typeof process>"u"||typeof process.env>"u")return;const t={}.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},vM=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&Bu(t[1]);return e&&JSON.parse(e)},eg=()=>{try{return gM()||mM()||vM()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},yM=t=>{var e,n;return(n=(e=eg())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},EM=t=>{const e=yM(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),i]:[e.substring(0,n),i]},bM=()=>{var t;return(t=eg())===null||t===void 0?void 0:t.config},wM=t=>{var e;return(e=eg())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $s{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,i)=>{n?this.reject(n):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,i))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TM(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},i=e||"demo-project",r=t.iat||0,o=t.sub||t.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const l=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:r,exp:r+3600,auth_time:r,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},t),u="";return[Uu(JSON.stringify(n)),Uu(JSON.stringify(l)),u].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CM="FirebaseError";class mr extends Error{constructor(e,n,i){super(n),this.code=e,this.customData=i,this.name=CM,Object.setPrototypeOf(this,mr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ra.prototype.create)}}class ra{constructor(e,n,i){this.service=e,this.serviceName=n,this.errors=i}create(e,...n){const i=n[0]||{},r=`${this.service}/${e}`,o=this.errors[e],l=o?IM(o,i):"Error",u=`${this.serviceName}: ${l} (${r}).`;return new mr(r,u,i)}}function IM(t,e){return t.replace(AM,(n,i)=>{const r=e[i];return r!=null?String(r):`<${i}?>`})}const AM=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vl(t){return JSON.parse(t)}function It(t){return JSON.stringify(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YT=function(t){let e={},n={},i={},r="";try{const o=t.split(".");e=vl(Bu(o[0])||""),n=vl(Bu(o[1])||""),r=o[2],i=n.d||{},delete n.d}catch{}return{header:e,claims:n,data:i,signature:r}},SM=function(t){const e=YT(t),n=e.claims;return!!n&&typeof n=="object"&&n.hasOwnProperty("iat")},OM=function(t){const e=YT(t).claims;return typeof e=="object"&&e.admin===!0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ui(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function Wo(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]}function BE(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Wu(t,e,n){const i={};for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&(i[r]=e.call(n,t[r],r,t));return i}function Vp(t,e){if(t===e)return!0;const n=Object.keys(t),i=Object.keys(e);for(const r of n){if(!i.includes(r))return!1;const o=t[r],l=e[r];if(WE(o)&&WE(l)){if(!Vp(o,l))return!1}else if(o!==l)return!1}for(const r of i)if(!n.includes(r))return!1;return!0}function WE(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tg(t){const e=[];for(const[n,i]of Object.entries(t))Array.isArray(i)?i.forEach(r=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(r))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NM{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,n){n||(n=0);const i=this.W_;if(typeof e=="string")for(let g=0;g<16;g++)i[g]=e.charCodeAt(n)<<24|e.charCodeAt(n+1)<<16|e.charCodeAt(n+2)<<8|e.charCodeAt(n+3),n+=4;else for(let g=0;g<16;g++)i[g]=e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3],n+=4;for(let g=16;g<80;g++){const y=i[g-3]^i[g-8]^i[g-14]^i[g-16];i[g]=(y<<1|y>>>31)&4294967295}let r=this.chain_[0],o=this.chain_[1],l=this.chain_[2],u=this.chain_[3],h=this.chain_[4],d,p;for(let g=0;g<80;g++){g<40?g<20?(d=u^o&(l^u),p=1518500249):(d=o^l^u,p=1859775393):g<60?(d=o&l|u&(o|l),p=2400959708):(d=o^l^u,p=3395469782);const y=(r<<5|r>>>27)+d+h+p+i[g]&4294967295;h=u,u=l,l=(o<<30|o>>>2)&4294967295,o=r,r=y}this.chain_[0]=this.chain_[0]+r&4294967295,this.chain_[1]=this.chain_[1]+o&4294967295,this.chain_[2]=this.chain_[2]+l&4294967295,this.chain_[3]=this.chain_[3]+u&4294967295,this.chain_[4]=this.chain_[4]+h&4294967295}update(e,n){if(e==null)return;n===void 0&&(n=e.length);const i=n-this.blockSize;let r=0;const o=this.buf_;let l=this.inbuf_;for(;r<n;){if(l===0)for(;r<=i;)this.compress_(e,r),r+=this.blockSize;if(typeof e=="string"){for(;r<n;)if(o[l]=e.charCodeAt(r),++l,++r,l===this.blockSize){this.compress_(o),l=0;break}}else for(;r<n;)if(o[l]=e[r],++l,++r,l===this.blockSize){this.compress_(o),l=0;break}}this.inbuf_=l,this.total_+=n}digest(){const e=[];let n=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let r=this.blockSize-1;r>=56;r--)this.buf_[r]=n&255,n/=256;this.compress_(this.buf_);let i=0;for(let r=0;r<5;r++)for(let o=24;o>=0;o-=8)e[i]=this.chain_[r]>>o&255,++i;return e}}function RM(t,e){const n=new xM(t,e);return n.subscribe.bind(n)}class xM{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,i){let r;if(e===void 0&&n===void 0&&i===void 0)throw new Error("Missing Observer.");DM(e,["next","error","complete"])?r=e:r={next:e,error:n,complete:i},r.next===void 0&&(r.next=jd),r.error===void 0&&(r.error=jd),r.complete===void 0&&(r.complete=jd);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function DM(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function jd(){}function $h(t,e){return`${t} failed: ${e} argument `}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LM=function(t){const e=[];let n=0;for(let i=0;i<t.length;i++){let r=t.charCodeAt(i);if(r>=55296&&r<=56319){const o=r-55296;i++,K(i<t.length,"Surrogate pair missing trail surrogate.");const l=t.charCodeAt(i)-56320;r=65536+(o<<10)+l}r<128?e[n++]=r:r<2048?(e[n++]=r>>6|192,e[n++]=r&63|128):r<65536?(e[n++]=r>>12|224,e[n++]=r>>6&63|128,e[n++]=r&63|128):(e[n++]=r>>18|240,e[n++]=r>>12&63|128,e[n++]=r>>6&63|128,e[n++]=r&63|128)}return e},Fh=function(t){let e=0;for(let n=0;n<t.length;n++){const i=t.charCodeAt(n);i<128?e++:i<2048?e+=2:i>=55296&&i<=56319?(e+=4,n++):e+=3}return e};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bi(t){return t&&t._delegate?t._delegate:t}class di{constructor(e,n,i){this.name=e,this.instanceFactory=n,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gs="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kM{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const i=new $s;if(this.instancesDeferred.set(n,i),this.isInitialized(n)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:n});r&&i.resolve(r)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const i=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(o){if(r)return null;throw o}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(MM(e))try{this.getOrInitializeService({instanceIdentifier:gs})}catch{}for(const[n,i]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(n);try{const o=this.getOrInitializeService({instanceIdentifier:r});i.resolve(o)}catch{}}}}clearInstance(e=gs){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=gs){return this.instances.has(e)}getOptions(e=gs){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:i,options:n});for(const[o,l]of this.instancesDeferred.entries()){const u=this.normalizeInstanceIdentifier(o);i===u&&l.resolve(r)}return r}onInit(e,n){var i;const r=this.normalizeInstanceIdentifier(n),o=(i=this.onInitCallbacks.get(r))!==null&&i!==void 0?i:new Set;o.add(e),this.onInitCallbacks.set(r,o);const l=this.instances.get(r);return l&&e(l,r),()=>{o.delete(e)}}invokeOnInitCallbacks(e,n){const i=this.onInitCallbacks.get(n);if(i)for(const r of i)try{r(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:PM(e),options:n}),this.instances.set(e,i),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=gs){return this.component?this.component.multipleInstances?e:gs:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function PM(t){return t===gs?void 0:t}function MM(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $M{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new kM(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ge;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Ge||(Ge={}));const FM={debug:Ge.DEBUG,verbose:Ge.VERBOSE,info:Ge.INFO,warn:Ge.WARN,error:Ge.ERROR,silent:Ge.SILENT},UM=Ge.INFO,BM={[Ge.DEBUG]:"log",[Ge.VERBOSE]:"log",[Ge.INFO]:"info",[Ge.WARN]:"warn",[Ge.ERROR]:"error"},WM=(t,e,...n)=>{if(e<t.logLevel)return;const i=new Date().toISOString(),r=BM[e];if(r)console[r](`[${i}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Bl{constructor(e){this.name=e,this._logLevel=UM,this._logHandler=WM,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ge))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?FM[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ge.DEBUG,...e),this._logHandler(this,Ge.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ge.VERBOSE,...e),this._logHandler(this,Ge.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ge.INFO,...e),this._logHandler(this,Ge.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ge.WARN,...e),this._logHandler(this,Ge.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ge.ERROR,...e),this._logHandler(this,Ge.ERROR,...e)}}const HM=(t,e)=>e.some(n=>t instanceof n);let HE,VE;function VM(){return HE||(HE=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function jM(){return VE||(VE=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const XT=new WeakMap,jp=new WeakMap,QT=new WeakMap,qd=new WeakMap,ng=new WeakMap;function qM(t){const e=new Promise((n,i)=>{const r=()=>{t.removeEventListener("success",o),t.removeEventListener("error",l)},o=()=>{n($r(t.result)),r()},l=()=>{i(t.error),r()};t.addEventListener("success",o),t.addEventListener("error",l)});return e.then(n=>{n instanceof IDBCursor&&XT.set(n,t)}).catch(()=>{}),ng.set(e,t),e}function KM(t){if(jp.has(t))return;const e=new Promise((n,i)=>{const r=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",l),t.removeEventListener("abort",l)},o=()=>{n(),r()},l=()=>{i(t.error||new DOMException("AbortError","AbortError")),r()};t.addEventListener("complete",o),t.addEventListener("error",l),t.addEventListener("abort",l)});jp.set(t,e)}let qp={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return jp.get(t);if(e==="objectStoreNames")return t.objectStoreNames||QT.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return $r(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function GM(t){qp=t(qp)}function zM(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const i=t.call(Kd(this),e,...n);return QT.set(i,e.sort?e.sort():[e]),$r(i)}:jM().includes(t)?function(...e){return t.apply(Kd(this),e),$r(XT.get(this))}:function(...e){return $r(t.apply(Kd(this),e))}}function YM(t){return typeof t=="function"?zM(t):(t instanceof IDBTransaction&&KM(t),HM(t,VM())?new Proxy(t,qp):t)}function $r(t){if(t instanceof IDBRequest)return qM(t);if(qd.has(t))return qd.get(t);const e=YM(t);return e!==t&&(qd.set(t,e),ng.set(e,t)),e}const Kd=t=>ng.get(t);function XM(t,e,{blocked:n,upgrade:i,blocking:r,terminated:o}={}){const l=indexedDB.open(t,e),u=$r(l);return i&&l.addEventListener("upgradeneeded",h=>{i($r(l.result),h.oldVersion,h.newVersion,$r(l.transaction))}),n&&l.addEventListener("blocked",()=>n()),u.then(h=>{o&&h.addEventListener("close",()=>o()),r&&h.addEventListener("versionchange",()=>r())}).catch(()=>{}),u}const QM=["get","getKey","getAll","getAllKeys","count"],JM=["put","add","delete","clear"],Gd=new Map;function jE(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Gd.get(e))return Gd.get(e);const n=e.replace(/FromIndex$/,""),i=e!==n,r=JM.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!(r||QM.includes(n)))return;const o=async function(l,...u){const h=this.transaction(l,r?"readwrite":"readonly");let d=h.store;return i&&(d=d.index(u.shift())),(await Promise.all([d[n](...u),r&&h.done]))[0]};return Gd.set(e,o),o}GM(t=>({...t,get:(e,n,i)=>jE(e,n)||t.get(e,n,i),has:(e,n)=>!!jE(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZM{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(e$(n)){const i=n.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(n=>n).join(" ")}}function e$(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Kp="@firebase/app",qE="0.9.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fs=new Bl("@firebase/app"),t$="@firebase/app-compat",n$="@firebase/analytics-compat",i$="@firebase/analytics",r$="@firebase/app-check-compat",s$="@firebase/app-check",o$="@firebase/auth",a$="@firebase/auth-compat",l$="@firebase/database",c$="@firebase/database-compat",u$="@firebase/functions",h$="@firebase/functions-compat",f$="@firebase/installations",d$="@firebase/installations-compat",p$="@firebase/messaging",_$="@firebase/messaging-compat",g$="@firebase/performance",m$="@firebase/performance-compat",v$="@firebase/remote-config",y$="@firebase/remote-config-compat",E$="@firebase/storage",b$="@firebase/storage-compat",w$="@firebase/firestore",T$="@firebase/firestore-compat",C$="firebase",I$="9.15.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gp="[DEFAULT]",A$={[Kp]:"fire-core",[t$]:"fire-core-compat",[i$]:"fire-analytics",[n$]:"fire-analytics-compat",[s$]:"fire-app-check",[r$]:"fire-app-check-compat",[o$]:"fire-auth",[a$]:"fire-auth-compat",[l$]:"fire-rtdb",[c$]:"fire-rtdb-compat",[u$]:"fire-fn",[h$]:"fire-fn-compat",[f$]:"fire-iid",[d$]:"fire-iid-compat",[p$]:"fire-fcm",[_$]:"fire-fcm-compat",[g$]:"fire-perf",[m$]:"fire-perf-compat",[v$]:"fire-rc",[y$]:"fire-rc-compat",[E$]:"fire-gcs",[b$]:"fire-gcs-compat",[w$]:"fire-fst",[T$]:"fire-fst-compat","fire-js":"fire-js",[C$]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hu=new Map,zp=new Map;function S$(t,e){try{t.container.addComponent(e)}catch(n){Fs.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Mi(t){const e=t.name;if(zp.has(e))return Fs.debug(`There were multiple attempts to register component ${e}.`),!1;zp.set(e,t);for(const n of Hu.values())S$(n,t);return!0}function O$(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N$={["no-app"]:"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",["bad-app-name"]:"Illegal App name: '{$appName}",["duplicate-app"]:"Firebase App named '{$appName}' already exists with different options or config",["app-deleted"]:"Firebase App named '{$appName}' already deleted",["no-options"]:"Need to provide options, when not being deployed to hosting via source.",["invalid-app-argument"]:"firebase.{$appName}() takes either no argument or a Firebase App instance.",["invalid-log-argument"]:"First argument to `onLog` must be null or a function.",["idb-open"]:"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.",["idb-get"]:"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.",["idb-set"]:"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.",["idb-delete"]:"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."},Fr=new ra("app","Firebase",N$);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R${constructor(e,n,i){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new di("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Fr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wl=I$;function ig(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const i=Object.assign({name:Gp,automaticDataCollectionEnabled:!1},e),r=i.name;if(typeof r!="string"||!r)throw Fr.create("bad-app-name",{appName:String(r)});if(n||(n=bM()),!n)throw Fr.create("no-options");const o=Hu.get(r);if(o){if(Vp(n,o.options)&&Vp(i,o.config))return o;throw Fr.create("duplicate-app",{appName:r})}const l=new $M(r);for(const h of zp.values())l.addComponent(h);const u=new R$(n,i,l);return Hu.set(r,u),u}function x$(t=Gp){const e=Hu.get(t);if(!e&&t===Gp)return ig();if(!e)throw Fr.create("no-app",{appName:t});return e}function Rn(t,e,n){var i;let r=(i=A$[t])!==null&&i!==void 0?i:t;n&&(r+=`-${n}`);const o=r.match(/\s|\//),l=e.match(/\s|\//);if(o||l){const u=[`Unable to register library "${r}" with version "${e}":`];o&&u.push(`library name "${r}" contains illegal characters (whitespace or "/")`),o&&l&&u.push("and"),l&&u.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Fs.warn(u.join(" "));return}Mi(new di(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D$="firebase-heartbeat-database",L$=1,yl="firebase-heartbeat-store";let zd=null;function JT(){return zd||(zd=XM(D$,L$,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(yl)}}}).catch(t=>{throw Fr.create("idb-open",{originalErrorMessage:t.message})})),zd}async function k$(t){try{return(await JT()).transaction(yl).objectStore(yl).get(ZT(t))}catch(e){if(e instanceof mr)Fs.warn(e.message);else{const n=Fr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Fs.warn(n.message)}}}async function KE(t,e){try{const i=(await JT()).transaction(yl,"readwrite");return await i.objectStore(yl).put(e,ZT(t)),i.done}catch(n){if(n instanceof mr)Fs.warn(n.message);else{const i=Fr.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Fs.warn(i.message)}}}function ZT(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P$=1024,M$=30*24*60*60*1e3;class $${constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new U$(n),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=GE();if(this._heartbeatsCache===null&&(this._heartbeatsCache=await this._heartbeatsCachePromise),!(this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(r=>r.date===i)))return this._heartbeatsCache.heartbeats.push({date:i,agent:n}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(r=>{const o=new Date(r.date).valueOf();return Date.now()-o<=M$}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache===null||this._heartbeatsCache.heartbeats.length===0)return"";const e=GE(),{heartbeatsToSend:n,unsentEntries:i}=F$(this._heartbeatsCache.heartbeats),r=Uu(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),r}}function GE(){return new Date().toISOString().substring(0,10)}function F$(t,e=P$){const n=[];let i=t.slice();for(const r of t){const o=n.find(l=>l.agent===r.agent);if(o){if(o.dates.push(r.date),zE(n)>e){o.dates.pop();break}}else if(n.push({agent:r.agent,dates:[r.date]}),zE(n)>e){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}class U${constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return zT()?pM().then(()=>!0).catch(()=>!1):!1}async read(){return await this._canUseIndexedDBPromise?await k$(this.app)||{heartbeats:[]}:{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const r=await this.read();return KE(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const r=await this.read();return KE(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function zE(t){return Uu(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B$(t){Mi(new di("platform-logger",e=>new ZM(e),"PRIVATE")),Mi(new di("heartbeat",e=>new $$(e),"PRIVATE")),Rn(Kp,qE,t),Rn(Kp,qE,"esm2017"),Rn("fire-js","")}B$("");function e0(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(t);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(n[i[r]]=t[i[r]]);return n}function t0(){return{["dependent-sdk-initialized-before-auth"]:"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const W$=t0,n0=new ra("auth","Firebase",t0());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YE=new Bl("@firebase/auth");function Au(t,...e){YE.logLevel<=Ge.ERROR&&YE.error(`Auth (${Wl}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XE(t,...e){throw rg(t,...e)}function i0(t,...e){return rg(t,...e)}function H$(t,e,n){const i=Object.assign(Object.assign({},W$()),{[e]:n});return new ra("auth","Firebase",i).create(e,{appName:t.name})}function rg(t,...e){if(typeof t!="string"){const n=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=t.name),t._errorFactory.create(n,...i)}return n0.create(t,...e)}function qe(t,e,...n){if(!t)throw rg(e,...n)}function tl(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Au(e),new Error(e)}function Vu(t,e){t||tl(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QE=new Map;function Ts(t){Vu(t instanceof Function,"Expected a class definition");let e=QE.get(t);return e?(Vu(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,QE.set(t,e),e)}function V$(t,e){const n=(e==null?void 0:e.persistence)||[],i=(Array.isArray(n)?n:[n]).map(Ts);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(i,e==null?void 0:e.popupRedirectResolver)}function j$(){return JE()==="http:"||JE()==="https:"}function JE(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function q$(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(j$()||dM()||"connection"in navigator)?navigator.onLine:!0}function K$(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hl{constructor(e,n){this.shortDelay=e,this.longDelay=n,Vu(n>e,"Short delay should be less than long delay!"),this.isMobile=Z_()||KT()}get(){return q$()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G$(t,e){Vu(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r0{static initialize(e,n,i){this.fetchImpl=e,n&&(this.headersImpl=n),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;tl("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;tl("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;tl("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z$={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y$=new Hl(3e4,6e4);async function s0(t,e,n,i,r={}){return o0(t,r,async()=>{let o={},l={};i&&(e==="GET"?l=i:o={body:JSON.stringify(i)});const u=tg(Object.assign({key:t.config.apiKey},l)).slice(1),h=await t._getAdditionalHeaders();return h["Content-Type"]="application/json",t.languageCode&&(h["X-Firebase-Locale"]=t.languageCode),r0.fetch()(a0(t,t.config.apiHost,n,u),Object.assign({method:e,headers:h,referrerPolicy:"no-referrer"},o))})}async function o0(t,e,n){t._canInitEmulator=!1;const i=Object.assign(Object.assign({},z$),e);try{const r=new X$(t),o=await Promise.race([n(),r.promise]);r.clearNetworkTimeout();const l=await o.json();if("needConfirmation"in l)throw su(t,"account-exists-with-different-credential",l);if(o.ok&&!("errorMessage"in l))return l;{const u=o.ok?l.errorMessage:l.error.message,[h,d]=u.split(" : ");if(h==="FEDERATED_USER_ID_ALREADY_LINKED")throw su(t,"credential-already-in-use",l);if(h==="EMAIL_EXISTS")throw su(t,"email-already-in-use",l);if(h==="USER_DISABLED")throw su(t,"user-disabled",l);const p=i[h]||h.toLowerCase().replace(/[_\s]+/g,"-");if(d)throw H$(t,p,d);XE(t,p)}}catch(r){if(r instanceof mr)throw r;XE(t,"network-request-failed")}}function a0(t,e,n,i){const r=`${e}${n}?${i}`;return t.config.emulator?G$(t.config,r):`${t.config.apiScheme}://${r}`}class X${constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,i)=>{this.timer=setTimeout(()=>i(i0(this.auth,"network-request-failed")),Y$.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function su(t,e,n){const i={appName:t.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);const r=i0(t,e,i);return r.customData._tokenResponse=n,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Q$(t,e){return s0(t,"POST","/v1/accounts:delete",e)}async function J$(t,e){return s0(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nl(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function Z$(t,e=!1){const n=Bi(t),i=await n.getIdToken(e),r=l0(i);qe(r&&r.exp&&r.auth_time&&r.iat,n.auth,"internal-error");const o=typeof r.firebase=="object"?r.firebase:void 0,l=o==null?void 0:o.sign_in_provider;return{claims:r,token:i,authTime:nl(Yd(r.auth_time)),issuedAtTime:nl(Yd(r.iat)),expirationTime:nl(Yd(r.exp)),signInProvider:l||null,signInSecondFactor:(o==null?void 0:o.sign_in_second_factor)||null}}function Yd(t){return Number(t)*1e3}function l0(t){const[e,n,i]=t.split(".");if(e===void 0||n===void 0||i===void 0)return Au("JWT malformed, contained fewer than 3 sections"),null;try{const r=Bu(n);return r?JSON.parse(r):(Au("Failed to decode base64 JWT payload"),null)}catch(r){return Au("Caught error parsing JWT payload as JSON",r==null?void 0:r.toString()),null}}function eF(t){const e=l0(t);return qe(e,"internal-error"),qe(typeof e.exp<"u","internal-error"),qe(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Yp(t,e,n=!1){if(n)return e;try{return await e}catch(i){throw i instanceof mr&&tF(i)&&t.auth.currentUser===t&&await t.auth.signOut(),i}}function tF({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nF{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;const r=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c0{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=nl(this.lastLoginAt),this.creationTime=nl(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ju(t){var e;const n=t.auth,i=await t.getIdToken(),r=await Yp(t,J$(n,{idToken:i}));qe(r==null?void 0:r.users.length,n,"internal-error");const o=r.users[0];t._notifyReloadListener(o);const l=!((e=o.providerUserInfo)===null||e===void 0)&&e.length?sF(o.providerUserInfo):[],u=rF(t.providerData,l),h=t.isAnonymous,d=!(t.email&&o.passwordHash)&&!(u!=null&&u.length),p=h?d:!1,g={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:u,metadata:new c0(o.createdAt,o.lastLoginAt),isAnonymous:p};Object.assign(t,g)}async function iF(t){const e=Bi(t);await ju(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function rF(t,e){return[...t.filter(i=>!e.some(r=>r.providerId===i.providerId)),...e]}function sF(t){return t.map(e=>{var{providerId:n}=e,i=e0(e,["providerId"]);return{providerId:n,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oF(t,e){const n=await o0(t,{},async()=>{const i=tg({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:r,apiKey:o}=t.config,l=a0(t,r,"/v1/token",`key=${o}`),u=await t._getAdditionalHeaders();return u["Content-Type"]="application/x-www-form-urlencoded",r0.fetch()(l,{method:"POST",headers:u,body:i})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class El{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){qe(e.idToken,"internal-error"),qe(typeof e.idToken<"u","internal-error"),qe(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):eF(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}async getToken(e,n=!1){return qe(!this.accessToken||this.refreshToken,e,"user-token-expired"),!n&&this.accessToken&&!this.isExpired?this.accessToken:this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:i,refreshToken:r,expiresIn:o}=await oF(e,n);this.updateTokensAndExpiration(i,r,Number(o))}updateTokensAndExpiration(e,n,i){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,n){const{refreshToken:i,accessToken:r,expirationTime:o}=n,l=new El;return i&&(qe(typeof i=="string","internal-error",{appName:e}),l.refreshToken=i),r&&(qe(typeof r=="string","internal-error",{appName:e}),l.accessToken=r),o&&(qe(typeof o=="number","internal-error",{appName:e}),l.expirationTime=o),l}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new El,this.toJSON())}_performRefresh(){return tl("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nr(t,e){qe(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Ro{constructor(e){var{uid:n,auth:i,stsTokenManager:r}=e,o=e0(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new nF(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=i,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new c0(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const n=await Yp(this,this.stsTokenManager.getToken(this.auth,e));return qe(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return Z$(this,e)}reload(){return iF(this)}_assign(e){this!==e&&(qe(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){return new Ro(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(e){qe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),n&&await ju(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){const e=await this.getIdToken();return await Yp(this,Q$(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var i,r,o,l,u,h,d,p;const g=(i=n.displayName)!==null&&i!==void 0?i:void 0,y=(r=n.email)!==null&&r!==void 0?r:void 0,b=(o=n.phoneNumber)!==null&&o!==void 0?o:void 0,S=(l=n.photoURL)!==null&&l!==void 0?l:void 0,N=(u=n.tenantId)!==null&&u!==void 0?u:void 0,P=(h=n._redirectEventId)!==null&&h!==void 0?h:void 0,G=(d=n.createdAt)!==null&&d!==void 0?d:void 0,oe=(p=n.lastLoginAt)!==null&&p!==void 0?p:void 0,{uid:H,emailVerified:V,isAnonymous:Q,providerData:B,stsTokenManager:Z}=n;qe(H&&Z,e,"internal-error");const X=El.fromJSON(this.name,Z);qe(typeof H=="string",e,"internal-error"),Nr(g,e.name),Nr(y,e.name),qe(typeof V=="boolean",e,"internal-error"),qe(typeof Q=="boolean",e,"internal-error"),Nr(b,e.name),Nr(S,e.name),Nr(N,e.name),Nr(P,e.name),Nr(G,e.name),Nr(oe,e.name);const pe=new Ro({uid:H,auth:e,email:y,emailVerified:V,displayName:g,isAnonymous:Q,photoURL:S,phoneNumber:b,tenantId:N,stsTokenManager:X,createdAt:G,lastLoginAt:oe});return B&&Array.isArray(B)&&(pe.providerData=B.map(_e=>Object.assign({},_e))),P&&(pe._redirectEventId=P),pe}static async _fromIdTokenResponse(e,n,i=!1){const r=new El;r.updateFromServerResponse(n);const o=new Ro({uid:n.localId,auth:e,stsTokenManager:r,isAnonymous:i});return await ju(o),o}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u0{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}u0.type="NONE";const ZE=u0;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xd(t,e,n){return`firebase:${t}:${e}:${n}`}class xo{constructor(e,n,i){this.persistence=e,this.auth=n,this.userKey=i;const{config:r,name:o}=this.auth;this.fullUserKey=Xd(this.userKey,r.apiKey,o),this.fullPersistenceKey=Xd("persistence",r.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Ro._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,i="authUser"){if(!n.length)return new xo(Ts(ZE),e,i);const r=(await Promise.all(n.map(async d=>{if(await d._isAvailable())return d}))).filter(d=>d);let o=r[0]||Ts(ZE);const l=Xd(i,e.config.apiKey,e.name);let u=null;for(const d of n)try{const p=await d._get(l);if(p){const g=Ro._fromJSON(e,p);d!==o&&(u=g),o=d;break}}catch{}const h=r.filter(d=>d._shouldAllowMigration);return!o._shouldAllowMigration||!h.length?new xo(o,e,i):(o=h[0],u&&await o._set(l,u.toJSON()),await Promise.all(n.map(async d=>{if(d!==o)try{await d._remove(l)}catch{}})),new xo(o,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eb(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(uF(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(aF(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(fF(e))return"Blackberry";if(dF(e))return"Webos";if(lF(e))return"Safari";if((e.includes("chrome/")||cF(e))&&!e.includes("edge/"))return"Chrome";if(hF(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=t.match(n);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function aF(t=Pi()){return/firefox\//i.test(t)}function lF(t=Pi()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function cF(t=Pi()){return/crios\//i.test(t)}function uF(t=Pi()){return/iemobile/i.test(t)}function hF(t=Pi()){return/android/i.test(t)}function fF(t=Pi()){return/blackberry/i.test(t)}function dF(t=Pi()){return/webos/i.test(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function h0(t,e=[]){let n;switch(t){case"Browser":n=eb(Pi());break;case"Worker":n=`${eb(Pi())}-${t}`;break;default:n=t}const i=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Wl}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pF{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const i=o=>new Promise((l,u)=>{try{const h=e(o);l(h)}catch(h){u(h)}});i.onAbort=n,this.queue.push(i);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const i of this.queue)await i(e),i.onAbort&&n.push(i.onAbort)}catch(i){n.reverse();for(const r of n)try{r()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _F{constructor(e,n,i){this.app=e,this.heartbeatServiceProvider=n,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new tb(this),this.idTokenSubscription=new tb(this),this.beforeStateQueue=new pF(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=n0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Ts(n)),this._initializationPromise=this.queue(async()=>{var i,r;if(!this._deleted&&(this.persistenceManager=await xo.create(this,e),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((r=this.currentUser)===null||r===void 0?void 0:r.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUser(e){var n;const i=await this.assertedPersistence.getCurrentUser();let r=i,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const l=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,u=r==null?void 0:r._redirectEventId,h=await this.tryRedirectSignIn(e);(!l||l===u)&&(h!=null&&h.user)&&(r=h.user,o=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(r)}catch(l){r=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(l))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return qe(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await ju(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=K$()}async _delete(){this._deleted=!0}async updateCurrentUser(e){const n=e?Bi(e):null;return n&&qe(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&qe(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0)}setPersistence(e){return this.queue(async()=>{await this.assertedPersistence.setPersistence(Ts(e))})}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new ra("auth","Firebase",e())}onAuthStateChanged(e,n,i){return this.registerStateListener(this.authStateSubscription,e,n,i)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,i){return this.registerStateListener(this.idTokenSubscription,e,n,i)}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const i=await this.getOrInitRedirectPersistenceManager(n);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Ts(e)||this._popupRedirectResolver;qe(n,this,"argument-error"),this.redirectPersistenceManager=await xo.create(this,[Ts(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,i;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((i=this.redirectUser)===null||i===void 0?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const i=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==i&&(this.lastNotifiedUid=i,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,i,r){if(this._deleted)return()=>{};const o=typeof n=="function"?n:n.next.bind(n),l=this._isInitialized?Promise.resolve():this._initializationPromise;return qe(l,this,"internal-error"),l.then(()=>o(this.currentUser)),typeof n=="function"?e.addObserver(n,i,r):e.addObserver(n)}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return qe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=h0(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={["X-Client-Version"]:this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const i=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());return i&&(n["X-Firebase-Client"]=i),n}}function gF(t){return Bi(t)}class tb{constructor(e){this.auth=e,this.observer=null,this.addObserver=RM(n=>this.observer=n)}get next(){return qe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}new Hl(3e4,6e4);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */new Hl(2e3,1e4);/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */new Hl(3e4,6e4);/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */new Hl(5e3,15e3);var nb="@firebase/auth",ib="0.21.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mF{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(i=>{e((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){qe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vF(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}function yF(t){Mi(new di("auth",(e,{options:n})=>{const i=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),{apiKey:o,authDomain:l}=i.options;return((u,h)=>{qe(o&&!o.includes(":"),"invalid-api-key",{appName:u.name}),qe(!(l!=null&&l.includes(":")),"argument-error",{appName:u.name});const d={apiKey:o,authDomain:l,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:h0(t)},p=new _F(u,h,d);return V$(p,n),p})(i,r)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,i)=>{e.getProvider("auth-internal").initialize()})),Mi(new di("auth-internal",e=>{const n=gF(e.getProvider("auth").getImmediate());return(i=>new mF(i))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Rn(nb,ib,vF(t)),Rn(nb,ib,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EF=5*60;wM("authIdTokenMaxAge");yF("Browser");/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bF=new Map,wF={activated:!1,tokenObservers:[]};function $i(t){return bF.get(t)||Object.assign({},wF)}const rb={OFFSET_DURATION:5*60*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:16*60*1e3};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TF{constructor(e,n,i,r,o){if(this.operation=e,this.retryPolicy=n,this.getWaitDuration=i,this.lowerBound=r,this.upperBound=o,this.pending=null,this.nextErrorWaitInterval=r,r>o)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}async process(e){this.stop();try{this.pending=new $s,await CF(this.getNextRun(e)),this.pending.resolve(),await this.pending.promise,this.pending=new $s,await this.operation(),this.pending.resolve(),await this.pending.promise,this.process(!0).catch(()=>{})}catch(n){this.retryPolicy(n)?this.process(!1).catch(()=>{}):this.stop()}}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const n=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),n}}}function CF(t){return new Promise(e=>{setTimeout(e,t)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IF={["already-initialized"]:"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.",["use-before-activation"]:"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.",["fetch-network-error"]:"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.",["fetch-parse-error"]:"Fetch client could not parse response. Original error: {$originalErrorMessage}.",["fetch-status-error"]:"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.",["storage-open"]:"Error thrown when opening storage. Original error: {$originalErrorMessage}.",["storage-get"]:"Error thrown when reading from storage. Original error: {$originalErrorMessage}.",["storage-set"]:"Error thrown when writing to storage. Original error: {$originalErrorMessage}.",["recaptcha-error"]:"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"},qu=new ra("appCheck","AppCheck",IF);function AF(t){if(!$i(t).activated)throw qu.create("use-before-activation",{appName:t.name})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SF="firebase-app-check-database",OF=1,Xp="firebase-app-check-store";let ou=null;function NF(){return ou||(ou=new Promise((t,e)=>{try{const n=indexedDB.open(SF,OF);n.onsuccess=i=>{t(i.target.result)},n.onerror=i=>{var r;e(qu.create("storage-open",{originalErrorMessage:(r=i.target.error)===null||r===void 0?void 0:r.message}))},n.onupgradeneeded=i=>{const r=i.target.result;switch(i.oldVersion){case 0:r.createObjectStore(Xp,{keyPath:"compositeKey"})}}}catch(n){e(qu.create("storage-open",{originalErrorMessage:n==null?void 0:n.message}))}}),ou)}function RF(t,e){return xF(DF(t),e)}async function xF(t,e){const i=(await NF()).transaction(Xp,"readwrite"),o=i.objectStore(Xp).put({compositeKey:t,value:e});return new Promise((l,u)=>{o.onsuccess=h=>{l()},i.onerror=h=>{var d;u(qu.create("storage-set",{originalErrorMessage:(d=h.target.error)===null||d===void 0?void 0:d.message}))}})}function DF(t){return`${t.options.appId}-${t.name}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qp=new Bl("@firebase/app-check");function sb(t,e){return zT()?RF(t,e).catch(n=>{Qp.warn(`Failed to write token to IndexedDB. Error: ${n}`)}):Promise.resolve()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LF={error:"UNKNOWN_ERROR"};function kF(t){return Mh.encodeString(JSON.stringify(t),!1)}async function Jp(t,e=!1){const n=t.app;AF(n);const i=$i(n);let r=i.token,o;if(r&&!Ga(r)&&(i.token=void 0,r=void 0),!r){const h=await i.cachedTokenPromise;h&&(Ga(h)?r=h:await sb(n,void 0))}if(!e&&r&&Ga(r))return{token:r.token};let l=!1;try{i.exchangeTokenPromise||(i.exchangeTokenPromise=i.provider.getToken().finally(()=>{i.exchangeTokenPromise=void 0}),l=!0),r=await $i(n).exchangeTokenPromise}catch(h){h.code==="appCheck/throttled"?Qp.warn(h.message):Qp.error(h),o=h}let u;return r?o?Ga(r)?u={token:r.token,internalError:o}:u=ab(o):(u={token:r.token},i.token=r,await sb(n,r)):u=ab(o),l&&$F(n,u),u}function PF(t,e,n,i){const{app:r}=t,o=$i(r),l={next:n,error:i,type:e};if(o.tokenObservers=[...o.tokenObservers,l],o.token&&Ga(o.token)){const u=o.token;Promise.resolve().then(()=>{n({token:u.token}),ob(t)}).catch(()=>{})}o.cachedTokenPromise.then(()=>ob(t))}function f0(t,e){const n=$i(t),i=n.tokenObservers.filter(r=>r.next!==e);i.length===0&&n.tokenRefresher&&n.tokenRefresher.isRunning()&&n.tokenRefresher.stop(),n.tokenObservers=i}function ob(t){const{app:e}=t,n=$i(e);let i=n.tokenRefresher;i||(i=MF(t),n.tokenRefresher=i),!i.isRunning()&&n.isTokenAutoRefreshEnabled&&i.start()}function MF(t){const{app:e}=t;return new TF(async()=>{const n=$i(e);let i;if(n.token?i=await Jp(t,!0):i=await Jp(t),i.error)throw i.error;if(i.internalError)throw i.internalError},()=>!0,()=>{const n=$i(e);if(n.token){let i=n.token.issuedAtTimeMillis+(n.token.expireTimeMillis-n.token.issuedAtTimeMillis)*.5+3e5;const r=n.token.expireTimeMillis-5*60*1e3;return i=Math.min(i,r),Math.max(0,i-Date.now())}else return 0},rb.RETRIAL_MIN_WAIT,rb.RETRIAL_MAX_WAIT)}function $F(t,e){const n=$i(t).tokenObservers;for(const i of n)try{i.type==="EXTERNAL"&&e.error!=null?i.error(e.error):i.next(e)}catch{}}function Ga(t){return t.expireTimeMillis-Date.now()>0}function ab(t){return{token:kF(LF),error:t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FF{constructor(e,n){this.app=e,this.heartbeatServiceProvider=n}_delete(){const{tokenObservers:e}=$i(this.app);for(const n of e)f0(this.app,n.next);return Promise.resolve()}}function UF(t,e){return new FF(t,e)}function BF(t){return{getToken:e=>Jp(t,e),addTokenListener:e=>PF(t,"INTERNAL",e),removeTokenListener:e=>f0(t.app,e)}}const WF="@firebase/app-check",HF="0.6.0",VF="app-check",lb="app-check-internal";function jF(){Mi(new di(VF,t=>{const e=t.getProvider("app").getImmediate(),n=t.getProvider("heartbeat");return UF(e,n)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,e,n)=>{t.getProvider(lb).initialize()})),Mi(new di(lb,t=>{const e=t.getProvider("app-check").getImmediate();return BF(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),Rn(WF,HF)}jF();var qF="firebase",KF="9.15.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Rn(qF,KF,"app");const GF=Symbol("firebaseApp"),cb="@firebase/database",ub="0.14.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let d0="";function zF(t){d0=t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YF{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,n){n==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),It(n))}get(e){const n=this.domStorage_.getItem(this.prefixedName_(e));return n==null?null:vl(n)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XF{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,n){n==null?delete this.cache_[e]:this.cache_[e]=n}get(e){return Ui(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p0=function(t){try{if(typeof window<"u"&&typeof window[t]<"u"){const e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new YF(e)}}catch{}return new XF},Cs=p0("localStorage"),Zp=p0("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Do=new Bl("@firebase/database"),QF=function(){let t=1;return function(){return t++}}(),_0=function(t){const e=LM(t),n=new NM;n.update(e);const i=n.digest();return Mh.encodeByteArray(i)},Vl=function(...t){let e="";for(let n=0;n<t.length;n++){const i=t[n];Array.isArray(i)||i&&typeof i=="object"&&typeof i.length=="number"?e+=Vl.apply(null,i):typeof i=="object"?e+=It(i):e+=i,e+=" "}return e};let Ds=null,hb=!0;const JF=function(t,e){K(!e||t===!0||t===!1,"Can't turn on custom loggers persistently."),t===!0?(Do.logLevel=Ge.VERBOSE,Ds=Do.log.bind(Do),e&&Zp.set("logging_enabled",!0)):typeof t=="function"?Ds=t:(Ds=null,Zp.remove("logging_enabled"))},Bt=function(...t){if(hb===!0&&(hb=!1,Ds===null&&Zp.get("logging_enabled")===!0&&JF(!0)),Ds){const e=Vl.apply(null,t);Ds(e)}},jl=function(t){return function(...e){Bt(t,...e)}},e_=function(...t){const e="FIREBASE INTERNAL ERROR: "+Vl(...t);Do.error(e)},hr=function(...t){const e=`FIREBASE FATAL ERROR: ${Vl(...t)}`;throw Do.error(e),new Error(e)},un=function(...t){const e="FIREBASE WARNING: "+Vl(...t);Do.warn(e)},ZF=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&un("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},sg=function(t){return typeof t=="number"&&(t!==t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},eU=function(t){if(document.readyState==="complete")t();else{let e=!1;const n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}e||(e=!0,t())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},Ho="[MIN_NAME]",Us="[MAX_NAME]",qs=function(t,e){if(t===e)return 0;if(t===Ho||e===Us)return-1;if(e===Ho||t===Us)return 1;{const n=fb(t),i=fb(e);return n!==null?i!==null?n-i===0?t.length-e.length:n-i:-1:i!==null?1:t<e?-1:1}},tU=function(t,e){return t===e?0:t<e?-1:1},$a=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+It(e))},og=function(t){if(typeof t!="object"||t===null)return It(t);const e=[];for(const i in t)e.push(i);e.sort();let n="{";for(let i=0;i<e.length;i++)i!==0&&(n+=","),n+=It(e[i]),n+=":",n+=og(t[e[i]]);return n+="}",n},g0=function(t,e){const n=t.length;if(n<=e)return[t];const i=[];for(let r=0;r<n;r+=e)r+e>n?i.push(t.substring(r,n)):i.push(t.substring(r,r+e));return i};function Vt(t,e){for(const n in t)t.hasOwnProperty(n)&&e(n,t[n])}const m0=function(t){K(!sg(t),"Invalid JSON number");const e=11,n=52,i=(1<<e-1)-1;let r,o,l,u,h;t===0?(o=0,l=0,r=1/t===-1/0?1:0):(r=t<0,t=Math.abs(t),t>=Math.pow(2,1-i)?(u=Math.min(Math.floor(Math.log(t)/Math.LN2),i),o=u+i,l=Math.round(t*Math.pow(2,n-u)-Math.pow(2,n))):(o=0,l=Math.round(t/Math.pow(2,1-i-n))));const d=[];for(h=n;h;h-=1)d.push(l%2?1:0),l=Math.floor(l/2);for(h=e;h;h-=1)d.push(o%2?1:0),o=Math.floor(o/2);d.push(r?1:0),d.reverse();const p=d.join("");let g="";for(h=0;h<64;h+=8){let y=parseInt(p.substr(h,8),2).toString(16);y.length===1&&(y="0"+y),g=g+y}return g.toLowerCase()},nU=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},iU=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function rU(t,e){let n="Unknown Error";t==="too_big"?n="The data requested exceeds the maximum size that can be accessed with a single request.":t==="permission_denied"?n="Client doesn't have permission to access the desired data.":t==="unavailable"&&(n="The service is unavailable");const i=new Error(t+" at "+e._path.toString()+": "+n);return i.code=t.toUpperCase(),i}const sU=new RegExp("^-?(0*)\\d{1,10}$"),oU=-2147483648,aU=2147483647,fb=function(t){if(sU.test(t)){const e=Number(t);if(e>=oU&&e<=aU)return e}return null},sa=function(t){try{t()}catch(e){setTimeout(()=>{const n=e.stack||"";throw un("Exception was thrown by user callback.",n),e},Math.floor(0))}},lU=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},il=function(t,e){const n=setTimeout(t,e);return typeof n=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):typeof n=="object"&&n.unref&&n.unref(),n};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cU{constructor(e,n){this.appName_=e,this.appCheckProvider=n,this.appCheck=n==null?void 0:n.getImmediate({optional:!0}),this.appCheck||n==null||n.get().then(i=>this.appCheck=i)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((n,i)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(n,i):n(null)},0)})}addTokenChangeListener(e){var n;(n=this.appCheckProvider)===null||n===void 0||n.get().then(i=>i.addTokenListener(e))}notifyForInvalidToken(){un(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uU{constructor(e,n,i){this.appName_=e,this.firebaseOptions_=n,this.authProvider_=i,this.auth_=null,this.auth_=i.getImmediate({optional:!0}),this.auth_||i.onInit(r=>this.auth_=r)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(n=>n&&n.code==="auth/token-not-initialized"?(Bt("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,i)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(n,i):n(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(n=>n.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(n=>n.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',un(e)}}class Lo{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}Lo.OWNER="owner";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ag="5",v0="v",y0="s",E0="r",b0="f",w0=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,T0="ls",C0="p",t_="ac",I0="websocket",A0="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S0{constructor(e,n,i,r,o=!1,l="",u=!1){this.secure=n,this.namespace=i,this.webSocketOnly=r,this.nodeAdmin=o,this.persistenceKey=l,this.includeNamespaceInQueryParams=u,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Cs.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&Cs.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${n}`}}function hU(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams}function O0(t,e,n){K(typeof e=="string","typeof type must == string"),K(typeof n=="object","typeof params must == object");let i;if(e===I0)i=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else if(e===A0)i=(t.secure?"https://":"http://")+t.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);hU(t)&&(n.ns=t.namespace);const r=[];return Vt(n,(o,l)=>{r.push(o+"="+l)}),i+r.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fU{constructor(){this.counters_={}}incrementCounter(e,n=1){Ui(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=n}get(){return hM(this.counters_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qd={},Jd={};function lg(t){const e=t.toString();return Qd[e]||(Qd[e]=new fU),Qd[e]}function dU(t,e){const n=t.toString();return Jd[n]||(Jd[n]=e()),Jd[n]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pU{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,n){this.closeAfterResponse=e,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,n){for(this.pendingResponses[e]=n;this.pendingResponses[this.currentResponseNum];){const i=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let r=0;r<i.length;++r)i[r]&&sa(()=>{this.onMessage_(i[r])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const db="start",_U="close",gU="pLPCommand",mU="pRTLPCB",N0="id",R0="pw",x0="ser",vU="cb",yU="seg",EU="ts",bU="d",wU="dframe",D0=1870,L0=30,TU=D0-L0,CU=25e3,IU=3e4;class To{constructor(e,n,i,r,o,l,u){this.connId=e,this.repoInfo=n,this.applicationId=i,this.appCheckToken=r,this.authToken=o,this.transportSessionId=l,this.lastSessionId=u,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=jl(e),this.stats_=lg(n),this.urlFn=h=>(this.appCheckToken&&(h[t_]=this.appCheckToken),O0(n,A0,h))}open(e,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new pU(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(IU)),eU(()=>{if(this.isClosed_)return;this.scriptTagHolder=new cg((...o)=>{const[l,u,h,d,p]=o;if(this.incrementIncomingBytes_(o),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,l===db)this.id=u,this.password=h;else if(l===_U)u?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(u,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+l)},(...o)=>{const[l,u]=o;this.incrementIncomingBytes_(o),this.myPacketOrderer.handleResponse(l,u)},()=>{this.onClosed_()},this.urlFn);const i={};i[db]="t",i[x0]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(i[vU]=this.scriptTagHolder.uniqueCallbackIdentifier),i[v0]=ag,this.transportSessionId&&(i[y0]=this.transportSessionId),this.lastSessionId&&(i[T0]=this.lastSessionId),this.applicationId&&(i[C0]=this.applicationId),this.appCheckToken&&(i[t_]=this.appCheckToken),typeof location<"u"&&location.hostname&&w0.test(location.hostname)&&(i[E0]=b0);const r=this.urlFn(i);this.log_("Connecting via long-poll to "+r),this.scriptTagHolder.addTag(r,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){To.forceAllow_=!0}static forceDisallow(){To.forceDisallow_=!0}static isAvailable(){return To.forceAllow_?!0:!To.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!nU()&&!iU()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const n=It(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const i=jT(n),r=g0(i,TU);for(let o=0;o<r.length;o++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[o]),this.curSegmentNum++}addDisconnectPingFrame(e,n){this.myDisconnFrame=document.createElement("iframe");const i={};i[wU]="t",i[N0]=e,i[R0]=n,this.myDisconnFrame.src=this.urlFn(i),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const n=It(e).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}}class cg{constructor(e,n,i,r){this.onDisconnect=i,this.urlFn=r,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=QF(),window[gU+this.uniqueCallbackIdentifier]=e,window[mU+this.uniqueCallbackIdentifier]=n,this.myIFrame=cg.createIFrame_();let o="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(o='<script>document.domain="'+document.domain+'";<\/script>');const l="<html><body>"+o+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(l),this.myIFrame.doc.close()}catch(u){Bt("frame writing exception"),u.stack&&Bt(u.stack),Bt(u)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||Bt("No IE domain setting required")}catch{const i=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+i+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,n){for(this.myID=e,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e[N0]=this.myID,e[R0]=this.myPW,e[x0]=this.currentSerial;let n=this.urlFn(e),i="",r=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+L0+i.length<=D0;){const l=this.pendingSegs.shift();i=i+"&"+yU+r+"="+l.seg+"&"+EU+r+"="+l.ts+"&"+bU+r+"="+l.d,r++}return n=n+i,this.addLongPollTag_(n,this.currentSerial),!0}else return!1}enqueueSegment(e,n,i){this.pendingSegs.push({seg:e,ts:n,d:i}),this.alive&&this.newRequest_()}addLongPollTag_(e,n){this.outstandingRequests.add(n);const i=()=>{this.outstandingRequests.delete(n),this.newRequest_()},r=setTimeout(i,Math.floor(CU)),o=()=>{clearTimeout(r),i()};this.addTag(e,o)}addTag(e,n){setTimeout(()=>{try{if(!this.sendNewPolls)return;const i=this.myIFrame.doc.createElement("script");i.type="text/javascript",i.async=!0,i.src=e,i.onload=i.onreadystatechange=function(){const r=i.readyState;(!r||r==="loaded"||r==="complete")&&(i.onload=i.onreadystatechange=null,i.parentNode&&i.parentNode.removeChild(i),n())},i.onerror=()=>{Bt("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(i)}catch{}},Math.floor(1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AU=16384,SU=45e3;let Ku=null;typeof MozWebSocket<"u"?Ku=MozWebSocket:typeof WebSocket<"u"&&(Ku=WebSocket);class oi{constructor(e,n,i,r,o,l,u){this.connId=e,this.applicationId=i,this.appCheckToken=r,this.authToken=o,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=jl(this.connId),this.stats_=lg(n),this.connURL=oi.connectionURL_(n,l,u,r,i),this.nodeAdmin=n.nodeAdmin}static connectionURL_(e,n,i,r,o){const l={};return l[v0]=ag,typeof location<"u"&&location.hostname&&w0.test(location.hostname)&&(l[E0]=b0),n&&(l[y0]=n),i&&(l[T0]=i),r&&(l[t_]=r),o&&(l[C0]=o),O0(e,I0,l)}open(e,n){this.onDisconnect=n,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Cs.set("previous_websocket_failure",!0);try{let i;GT(),this.mySock=new Ku(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");const r=i.message||i.data;r&&this.log_(r),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");const r=i.message||i.data;r&&this.log_(r),this.onClosed_()}}start(){}static forceDisallow(){oi.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){const n=/Android ([0-9]{0,}\.[0-9]{0,})/,i=navigator.userAgent.match(n);i&&i.length>1&&parseFloat(i[1])<4.4&&(e=!0)}return!e&&Ku!==null&&!oi.forceDisallow_}static previouslyFailed(){return Cs.isInMemoryStorage||Cs.get("previous_websocket_failure")===!0}markConnectionHealthy(){Cs.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const n=this.frames.join("");this.frames=null;const i=vl(n);this.onMessage(i)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(K(this.frames===null,"We already have a frame buffer"),e.length<=6){const n=Number(e);if(!isNaN(n))return this.handleNewFrameCount_(n),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(this.mySock===null)return;const n=e.data;if(this.bytesReceived+=n.length,this.stats_.incrementCounter("bytes_received",n.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(n);else{const i=this.extractFrameCount_(n);i!==null&&this.appendFrame_(i)}}send(e){this.resetKeepAlive();const n=It(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const i=g0(n,AU);i.length>1&&this.sendString_(String(i.length));for(let r=0;r<i.length;r++)this.sendString_(i[r])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(SU))}sendString_(e){try{this.mySock.send(e)}catch(n){this.log_("Exception thrown from WebSocket.send():",n.message||n.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}oi.responsesRequiredToBeHealthy=2;oi.healthyTimeout=3e4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bl{constructor(e){this.initTransports_(e)}static get ALL_TRANSPORTS(){return[To,oi]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(e){const n=oi&&oi.isAvailable();let i=n&&!oi.previouslyFailed();if(e.webSocketOnly&&(n||un("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[oi];else{const r=this.transports_=[];for(const o of bl.ALL_TRANSPORTS)o&&o.isAvailable()&&r.push(o);bl.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}bl.globalTransportInitialized_=!1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OU=6e4,NU=5e3,RU=10*1024,xU=100*1024,Zd="t",pb="d",DU="s",_b="r",LU="e",gb="o",mb="a",vb="n",yb="p",kU="h";class PU{constructor(e,n,i,r,o,l,u,h,d,p){this.id=e,this.repoInfo_=n,this.applicationId_=i,this.appCheckToken_=r,this.authToken_=o,this.onMessage_=l,this.onReady_=u,this.onDisconnect_=h,this.onKill_=d,this.lastSessionId=p,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=jl("c:"+this.id+":"),this.transportManager_=new bl(n),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.conn_),i=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,i)},Math.floor(0));const r=e.healthyTimeout||0;r>0&&(this.healthyTimeout_=il(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>xU?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>RU?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(r)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return n=>{e===this.conn_?this.onConnectionLost_(n):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return n=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(n):e===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(e){const n={t:"d",d:e};this.sendData_(n)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(Zd in e){const n=e[Zd];n===mb?this.upgradeIfSecondaryHealthy_():n===_b?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===gb&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const n=$a("t",e),i=$a("d",e);if(n==="c")this.onSecondaryControl_(i);else if(n==="d")this.pendingDataMessages.push(i);else throw new Error("Unknown protocol layer: "+n)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:yb,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:mb,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:vb,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const n=$a("t",e),i=$a("d",e);n==="c"?this.onControl_(i):n==="d"&&this.onDataMessage_(i)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const n=$a(Zd,e);if(pb in e){const i=e[pb];if(n===kU)this.onHandshake_(i);else if(n===vb){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let r=0;r<this.pendingDataMessages.length;++r)this.onDataMessage_(this.pendingDataMessages[r]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===DU?this.onConnectionShutdown_(i):n===_b?this.onReset_(i):n===LU?e_("Server Error: "+i):n===gb?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):e_("Unknown control packet command: "+n)}}onHandshake_(e){const n=e.ts,i=e.v,r=e.h;this.sessionId=e.s,this.repoInfo_.host=r,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),ag!==i&&un("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.secondaryConn_),i=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,i),il(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(OU))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,n){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):il(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(NU))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:yb,d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Cs.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k0{put(e,n,i,r){}merge(e,n,i,r){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,n,i){}onDisconnectMerge(e,n,i){}onDisconnectCancel(e,n){}reportStats(e){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P0{constructor(e){this.allowedEvents_=e,this.listeners_={},K(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...n){if(Array.isArray(this.listeners_[e])){const i=[...this.listeners_[e]];for(let r=0;r<i.length;r++)i[r].callback.apply(i[r].context,n)}}on(e,n,i){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:n,context:i});const r=this.getInitialEvent(e);r&&n.apply(i,r)}off(e,n,i){this.validateEventType_(e);const r=this.listeners_[e]||[];for(let o=0;o<r.length;o++)if(r[o].callback===n&&(!i||i===r[o].context)){r.splice(o,1);return}}validateEventType_(e){K(this.allowedEvents_.find(n=>n===e),"Unknown event: "+e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gu extends P0{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!Z_()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new Gu}getInitialEvent(e){return K(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Eb=32,bb=768;class Ye{constructor(e,n){if(n===void 0){this.pieces_=e.split("/");let i=0;for(let r=0;r<this.pieces_.length;r++)this.pieces_[r].length>0&&(this.pieces_[i]=this.pieces_[r],i++);this.pieces_.length=i,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=n}toString(){let e="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(e+="/"+this.pieces_[n]);return e||"/"}}function Be(){return new Ye("")}function Ne(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function qr(t){return t.pieces_.length-t.pieceNum_}function tt(t){let e=t.pieceNum_;return e<t.pieces_.length&&e++,new Ye(t.pieces_,e)}function ug(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function MU(t){let e="";for(let n=t.pieceNum_;n<t.pieces_.length;n++)t.pieces_[n]!==""&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}function wl(t,e=0){return t.pieces_.slice(t.pieceNum_+e)}function M0(t){if(t.pieceNum_>=t.pieces_.length)return null;const e=[];for(let n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new Ye(e,0)}function dt(t,e){const n=[];for(let i=t.pieceNum_;i<t.pieces_.length;i++)n.push(t.pieces_[i]);if(e instanceof Ye)for(let i=e.pieceNum_;i<e.pieces_.length;i++)n.push(e.pieces_[i]);else{const i=e.split("/");for(let r=0;r<i.length;r++)i[r].length>0&&n.push(i[r])}return new Ye(n,0)}function De(t){return t.pieceNum_>=t.pieces_.length}function ln(t,e){const n=Ne(t),i=Ne(e);if(n===null)return e;if(n===i)return ln(tt(t),tt(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function $U(t,e){const n=wl(t,0),i=wl(e,0);for(let r=0;r<n.length&&r<i.length;r++){const o=qs(n[r],i[r]);if(o!==0)return o}return n.length===i.length?0:n.length<i.length?-1:1}function hg(t,e){if(qr(t)!==qr(e))return!1;for(let n=t.pieceNum_,i=e.pieceNum_;n<=t.pieces_.length;n++,i++)if(t.pieces_[n]!==e.pieces_[i])return!1;return!0}function qn(t,e){let n=t.pieceNum_,i=e.pieceNum_;if(qr(t)>qr(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[i])return!1;++n,++i}return!0}class FU{constructor(e,n){this.errorPrefix_=n,this.parts_=wl(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let i=0;i<this.parts_.length;i++)this.byteLength_+=Fh(this.parts_[i]);$0(this)}}function UU(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=Fh(e),$0(t)}function BU(t){const e=t.parts_.pop();t.byteLength_-=Fh(e),t.parts_.length>0&&(t.byteLength_-=1)}function $0(t){if(t.byteLength_>bb)throw new Error(t.errorPrefix_+"has a key path longer than "+bb+" bytes ("+t.byteLength_+").");if(t.parts_.length>Eb)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+Eb+") or object contains a cycle "+ms(t))}function ms(t){return t.parts_.length===0?"":"in property '"+t.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fg extends P0{constructor(){super(["visible"]);let e,n;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{const i=!document[e];i!==this.visible_&&(this.visible_=i,this.trigger("visible",i))},!1)}static getInstance(){return new fg}getInitialEvent(e){return K(e==="visible","Unknown event type: "+e),[this.visible_]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fa=1e3,WU=60*5*1e3,wb=30*1e3,HU=1.3,VU=3e4,jU="server_kill",Tb=3;class or extends k0{constructor(e,n,i,r,o,l,u,h){if(super(),this.repoInfo_=e,this.applicationId_=n,this.onDataUpdate_=i,this.onConnectStatus_=r,this.onServerInfoUpdate_=o,this.authTokenProvider_=l,this.appCheckTokenProvider_=u,this.authOverride_=h,this.id=or.nextPersistentConnectionId_++,this.log_=jl("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Fa,this.maxReconnectDelay_=WU,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,h&&!GT())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");fg.getInstance().on("visible",this.onVisible_,this),e.host.indexOf("fblocal")===-1&&Gu.getInstance().on("online",this.onOnline_,this)}sendRequest(e,n,i){const r=++this.requestNumber_,o={r,a:e,b:n};this.log_(It(o)),K(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(o),i&&(this.requestCBHash_[r]=i)}get(e){this.initConnection_();const n=new $s,r={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:l=>{const u=l.d;l.s==="ok"?n.resolve(u):n.reject(u)}};this.outstandingGets_.push(r),this.outstandingGetCount_++;const o=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(o),n.promise}listen(e,n,i,r){this.initConnection_();const o=e._queryIdentifier,l=e._path.toString();this.log_("Listen called for "+l+" "+o),this.listens.has(l)||this.listens.set(l,new Map),K(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),K(!this.listens.get(l).has(o),"listen() called twice for same path/queryId.");const u={onComplete:r,hashFn:n,query:e,tag:i};this.listens.get(l).set(o,u),this.connected_&&this.sendListen_(u)}sendGet_(e){const n=this.outstandingGets_[e];this.sendRequest("g",n.request,i=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),n.onComplete&&n.onComplete(i)})}sendListen_(e){const n=e.query,i=n._path.toString(),r=n._queryIdentifier;this.log_("Listen on "+i+" for "+r);const o={p:i},l="q";e.tag&&(o.q=n._queryObject,o.t=e.tag),o.h=e.hashFn(),this.sendRequest(l,o,u=>{const h=u.d,d=u.s;or.warnOnListenWarnings_(h,n),(this.listens.get(i)&&this.listens.get(i).get(r))===e&&(this.log_("listen response",u),d!=="ok"&&this.removeListen_(i,r),e.onComplete&&e.onComplete(d,h))})}static warnOnListenWarnings_(e,n){if(e&&typeof e=="object"&&Ui(e,"w")){const i=Wo(e,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){const r='".indexOn": "'+n._queryParams.getIndex().toString()+'"',o=n._path.toString();un(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${r} at ${o} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&e.length===40||OM(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=wb)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,n=SM(e)?"auth":"gauth",i={cred:e};this.authOverride_===null?i.noauth=!0:typeof this.authOverride_=="object"&&(i.authvar=this.authOverride_),this.sendRequest(n,i,r=>{const o=r.s,l=r.d||"error";this.authToken_===e&&(o==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(o,l))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const n=e.s,i=e.d||"error";n==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(n,i)})}unlisten(e,n){const i=e._path.toString(),r=e._queryIdentifier;this.log_("Unlisten called for "+i+" "+r),K(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,r)&&this.connected_&&this.sendUnlisten_(i,r,e._queryObject,n)}sendUnlisten_(e,n,i,r){this.log_("Unlisten on "+e+" for "+n);const o={p:e},l="n";r&&(o.q=i,o.t=r),this.sendRequest(l,o)}onDisconnectPut(e,n,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,n,i):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:n,onComplete:i})}onDisconnectMerge(e,n,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,n,i):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:n,onComplete:i})}onDisconnectCancel(e,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:n})}sendOnDisconnect_(e,n,i,r){const o={p:n,d:i};this.log_("onDisconnect "+e,o),this.sendRequest(e,o,l=>{r&&setTimeout(()=>{r(l.s,l.d)},Math.floor(0))})}put(e,n,i,r){this.putInternal("p",e,n,i,r)}merge(e,n,i,r){this.putInternal("m",e,n,i,r)}putInternal(e,n,i,r,o){this.initConnection_();const l={p:n,d:i};o!==void 0&&(l.h=o),this.outstandingPuts_.push({action:e,request:l,onComplete:r}),this.outstandingPutCount_++;const u=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(u):this.log_("Buffering put: "+n)}sendPut_(e){const n=this.outstandingPuts_[e].action,i=this.outstandingPuts_[e].request,r=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(n,i,o=>{this.log_(n+" response",o),delete this.outstandingPuts_[e],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),r&&r(o.s,o.d)})}reportStats(e){if(this.connected_){const n={c:e};this.log_("reportStats",n),this.sendRequest("s",n,i=>{if(i.s!=="ok"){const o=i.d;this.log_("reportStats","Error sending stats: "+o)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+It(e));const n=e.r,i=this.requestCBHash_[n];i&&(delete this.requestCBHash_[n],i(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,n){this.log_("handleServerMessage",e,n),e==="d"?this.onDataUpdate_(n.p,n.d,!1,n.t):e==="m"?this.onDataUpdate_(n.p,n.d,!0,n.t):e==="c"?this.onListenRevoked_(n.p,n.q):e==="ac"?this.onAuthRevoked_(n.s,n.d):e==="apc"?this.onAppCheckRevoked_(n.s,n.d):e==="sd"?this.onSecurityDebugPacket_(n):e_("Unrecognized action received from server: "+It(e)+`
Are you using the latest client?`)}onReady_(e,n){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(e),this.lastSessionId=n,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){K(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Fa,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=Fa,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>VU&&(this.reconnectDelay_=Fa),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const e=new Date().getTime()-this.lastConnectionAttemptTime_;let n=Math.max(0,this.reconnectDelay_-e);n=Math.random()*n,this.log_("Trying to reconnect in "+n+"ms"),this.scheduleConnect_(n),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*HU)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),i=this.onRealtimeDisconnect_.bind(this),r=this.id+":"+or.nextConnectionId_++,o=this.lastSessionId;let l=!1,u=null;const h=function(){u?u.close():(l=!0,i())},d=function(g){K(u,"sendRequest call when we're not connected not allowed."),u.sendRequest(g)};this.realtime_={close:h,sendRequest:d};const p=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[g,y]=await Promise.all([this.authTokenProvider_.getToken(p),this.appCheckTokenProvider_.getToken(p)]);l?Bt("getToken() completed but was canceled"):(Bt("getToken() completed. Creating connection."),this.authToken_=g&&g.accessToken,this.appCheckToken_=y&&y.token,u=new PU(r,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,n,i,b=>{un(b+" ("+this.repoInfo_.toString()+")"),this.interrupt(jU)},o))}catch(g){this.log_("Failed to get token: "+g),l||(this.repoInfo_.nodeAdmin&&un(g),h())}}}interrupt(e){Bt("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){Bt("Resuming connection for reason: "+e),delete this.interruptReasons_[e],BE(this.interruptReasons_)&&(this.reconnectDelay_=Fa,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const n=e-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:n})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const n=this.outstandingPuts_[e];n&&"h"in n.request&&n.queued&&(n.onComplete&&n.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(e,n){let i;n?i=n.map(o=>og(o)).join("$"):i="default";const r=this.removeListen_(e,i);r&&r.onComplete&&r.onComplete("permission_denied")}removeListen_(e,n){const i=new Ye(e).toString();let r;if(this.listens.has(i)){const o=this.listens.get(i);r=o.get(n),o.delete(n),o.size===0&&this.listens.delete(i)}else r=void 0;return r}onAuthRevoked_(e,n){Bt("Auth token revoked: "+e+"/"+n),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(e==="invalid_token"||e==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=Tb&&(this.reconnectDelay_=wb,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,n){Bt("App check token revoked: "+e+"/"+n),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(e==="invalid_token"||e==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=Tb&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const n of e.values())this.sendListen_(n);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let n="js";e["sdk."+n+"."+d0.replace(/\./g,"-")]=1,Z_()?e["framework.cordova"]=1:KT()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=Gu.getInstance().currentlyOnline();return BE(this.interruptReasons_)&&e}}or.nextPersistentConnectionId_=0;or.nextConnectionId_=0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Re{constructor(e,n){this.name=e,this.node=n}static Wrap(e,n){return new Re(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uh{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,n){const i=new Re(Ho,e),r=new Re(Ho,n);return this.compare(i,r)!==0}minPost(){return Re.MIN}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let au;class F0 extends Uh{static get __EMPTY_NODE(){return au}static set __EMPTY_NODE(e){au=e}compare(e,n){return qs(e.name,n.name)}isDefinedOn(e){throw ia("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,n){return!1}minPost(){return Re.MIN}maxPost(){return new Re(Us,au)}makePost(e,n){return K(typeof e=="string","KeyIndex indexValue must always be a string."),new Re(e,au)}toString(){return".key"}}const ko=new F0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lu{constructor(e,n,i,r,o=null){this.isReverse_=r,this.resultGenerator_=o,this.nodeStack_=[];let l=1;for(;!e.isEmpty();)if(e=e,l=n?i(e.key,n):1,r&&(l*=-1),l<0)this.isReverse_?e=e.left:e=e.right;else if(l===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(e.key,e.value):n={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}class xt{constructor(e,n,i,r,o){this.key=e,this.value=n,this.color=i??xt.RED,this.left=r??bn.EMPTY_NODE,this.right=o??bn.EMPTY_NODE}copy(e,n,i,r,o){return new xt(e??this.key,n??this.value,i??this.color,r??this.left,o??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,i){let r=this;const o=i(e,r.key);return o<0?r=r.copy(null,null,null,r.left.insert(e,n,i),null):o===0?r=r.copy(null,n,null,null,null):r=r.copy(null,null,null,null,r.right.insert(e,n,i)),r.fixUp_()}removeMin_(){if(this.left.isEmpty())return bn.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,n){let i,r;if(i=this,n(e,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),n(e,i.key)===0){if(i.right.isEmpty())return bn.EMPTY_NODE;r=i.right.min_(),i=i.copy(r.key,r.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,xt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,xt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}xt.RED=!0;xt.BLACK=!1;class qU{copy(e,n,i,r,o){return this}insert(e,n,i){return new xt(e,n,null)}remove(e,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}class bn{constructor(e,n=bn.EMPTY_NODE){this.comparator_=e,this.root_=n}insert(e,n){return new bn(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,xt.BLACK,null,null))}remove(e){return new bn(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,xt.BLACK,null,null))}get(e){let n,i=this.root_;for(;!i.isEmpty();){if(n=this.comparator_(e,i.key),n===0)return i.value;n<0?i=i.left:n>0&&(i=i.right)}return null}getPredecessorKey(e){let n,i=this.root_,r=null;for(;!i.isEmpty();)if(n=this.comparator_(e,i.key),n===0){if(i.left.isEmpty())return r?r.key:null;for(i=i.left;!i.right.isEmpty();)i=i.right;return i.key}else n<0?i=i.left:n>0&&(r=i,i=i.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new lu(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,n){return new lu(this.root_,e,this.comparator_,!1,n)}getReverseIteratorFrom(e,n){return new lu(this.root_,e,this.comparator_,!0,n)}getReverseIterator(e){return new lu(this.root_,null,this.comparator_,!0,e)}}bn.EMPTY_NODE=new qU;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KU(t,e){return qs(t.name,e.name)}function dg(t,e){return qs(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let n_;function GU(t){n_=t}const U0=function(t){return typeof t=="number"?"number:"+m0(t):"string:"+t},B0=function(t){if(t.isLeafNode()){const e=t.val();K(typeof e=="string"||typeof e=="number"||typeof e=="object"&&Ui(e,".sv"),"Priority must be a string or number.")}else K(t===n_||t.isEmpty(),"priority of unexpected type.");K(t===n_||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Cb;class Rt{constructor(e,n=Rt.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=n,this.lazyHash_=null,K(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),B0(this.priorityNode_)}static set __childrenNodeConstructor(e){Cb=e}static get __childrenNodeConstructor(){return Cb}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new Rt(this.value_,e)}getImmediateChild(e){return e===".priority"?this.priorityNode_:Rt.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return De(e)?this:Ne(e)===".priority"?this.priorityNode_:Rt.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,n){return null}updateImmediateChild(e,n){return e===".priority"?this.updatePriority(n):n.isEmpty()&&e!==".priority"?this:Rt.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)}updateChild(e,n){const i=Ne(e);return i===null?n:n.isEmpty()&&i!==".priority"?this:(K(i!==".priority"||qr(e)===1,".priority must be the last token in a path"),this.updateImmediateChild(i,Rt.__childrenNodeConstructor.EMPTY_NODE.updateChild(tt(e),n)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,n){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+U0(this.priorityNode_.val())+":");const n=typeof this.value_;e+=n+":",n==="number"?e+=m0(this.value_):e+=this.value_,this.lazyHash_=_0(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===Rt.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof Rt.__childrenNodeConstructor?-1:(K(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const n=typeof e.value_,i=typeof this.value_,r=Rt.VALUE_TYPE_ORDER.indexOf(n),o=Rt.VALUE_TYPE_ORDER.indexOf(i);return K(r>=0,"Unknown leaf type: "+n),K(o>=0,"Unknown leaf type: "+i),r===o?i==="object"?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:o-r}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const n=e;return this.value_===n.value_&&this.priorityNode_.equals(n.priorityNode_)}else return!1}}Rt.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let W0,H0;function zU(t){W0=t}function YU(t){H0=t}class XU extends Uh{compare(e,n){const i=e.node.getPriority(),r=n.node.getPriority(),o=i.compareTo(r);return o===0?qs(e.name,n.name):o}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,n){return!e.getPriority().equals(n.getPriority())}minPost(){return Re.MIN}maxPost(){return new Re(Us,new Rt("[PRIORITY-POST]",H0))}makePost(e,n){const i=W0(e);return new Re(n,new Rt("[PRIORITY-POST]",i))}toString(){return".priority"}}const pt=new XU;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QU=Math.log(2);class JU{constructor(e){const n=o=>parseInt(Math.log(o)/QU,10),i=o=>parseInt(Array(o+1).join("1"),2);this.count=n(e+1),this.current_=this.count-1;const r=i(this.count);this.bits_=e+1&r}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const zu=function(t,e,n,i){t.sort(e);const r=function(h,d){const p=d-h;let g,y;if(p===0)return null;if(p===1)return g=t[h],y=n?n(g):g,new xt(y,g.node,xt.BLACK,null,null);{const b=parseInt(p/2,10)+h,S=r(h,b),N=r(b+1,d);return g=t[b],y=n?n(g):g,new xt(y,g.node,xt.BLACK,S,N)}},o=function(h){let d=null,p=null,g=t.length;const y=function(S,N){const P=g-S,G=g;g-=S;const oe=r(P+1,G),H=t[P],V=n?n(H):H;b(new xt(V,H.node,N,null,oe))},b=function(S){d?(d.left=S,d=S):(p=S,d=S)};for(let S=0;S<h.count;++S){const N=h.nextBitIsOne(),P=Math.pow(2,h.count-(S+1));N?y(P,xt.BLACK):(y(P,xt.BLACK),y(P,xt.RED))}return p},l=new JU(t.length),u=o(l);return new bn(i||e,u)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ep;const po={};class ir{constructor(e,n){this.indexes_=e,this.indexSet_=n}static get Default(){return K(po&&pt,"ChildrenNode.ts has not been loaded"),ep=ep||new ir({".priority":po},{".priority":pt}),ep}get(e){const n=Wo(this.indexes_,e);if(!n)throw new Error("No index defined for "+e);return n instanceof bn?n:null}hasIndex(e){return Ui(this.indexSet_,e.toString())}addIndex(e,n){K(e!==ko,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const i=[];let r=!1;const o=n.getIterator(Re.Wrap);let l=o.getNext();for(;l;)r=r||e.isDefinedOn(l.node),i.push(l),l=o.getNext();let u;r?u=zu(i,e.getCompare()):u=po;const h=e.toString(),d=Object.assign({},this.indexSet_);d[h]=e;const p=Object.assign({},this.indexes_);return p[h]=u,new ir(p,d)}addToIndexes(e,n){const i=Wu(this.indexes_,(r,o)=>{const l=Wo(this.indexSet_,o);if(K(l,"Missing index implementation for "+o),r===po)if(l.isDefinedOn(e.node)){const u=[],h=n.getIterator(Re.Wrap);let d=h.getNext();for(;d;)d.name!==e.name&&u.push(d),d=h.getNext();return u.push(e),zu(u,l.getCompare())}else return po;else{const u=n.get(e.name);let h=r;return u&&(h=h.remove(new Re(e.name,u))),h.insert(e,e.node)}});return new ir(i,this.indexSet_)}removeFromIndexes(e,n){const i=Wu(this.indexes_,r=>{if(r===po)return r;{const o=n.get(e.name);return o?r.remove(new Re(e.name,o)):r}});return new ir(i,this.indexSet_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ua;class fe{constructor(e,n,i){this.children_=e,this.priorityNode_=n,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&B0(this.priorityNode_),this.children_.isEmpty()&&K(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return Ua||(Ua=new fe(new bn(dg),null,ir.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Ua}updatePriority(e){return this.children_.isEmpty()?this:new fe(this.children_,e,this.indexMap_)}getImmediateChild(e){if(e===".priority")return this.getPriority();{const n=this.children_.get(e);return n===null?Ua:n}}getChild(e){const n=Ne(e);return n===null?this:this.getImmediateChild(n).getChild(tt(e))}hasChild(e){return this.children_.get(e)!==null}updateImmediateChild(e,n){if(K(n,"We should always be passing snapshot nodes"),e===".priority")return this.updatePriority(n);{const i=new Re(e,n);let r,o;n.isEmpty()?(r=this.children_.remove(e),o=this.indexMap_.removeFromIndexes(i,this.children_)):(r=this.children_.insert(e,n),o=this.indexMap_.addToIndexes(i,this.children_));const l=r.isEmpty()?Ua:this.priorityNode_;return new fe(r,l,o)}}updateChild(e,n){const i=Ne(e);if(i===null)return n;{K(Ne(e)!==".priority"||qr(e)===1,".priority must be the last token in a path");const r=this.getImmediateChild(i).updateChild(tt(e),n);return this.updateImmediateChild(i,r)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const n={};let i=0,r=0,o=!0;if(this.forEachChild(pt,(l,u)=>{n[l]=u.val(e),i++,o&&fe.INTEGER_REGEXP_.test(l)?r=Math.max(r,Number(l)):o=!1}),!e&&o&&r<2*i){const l=[];for(const u in n)l[u]=n[u];return l}else return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}hash(){if(this.lazyHash_===null){let e="";this.getPriority().isEmpty()||(e+="priority:"+U0(this.getPriority().val())+":"),this.forEachChild(pt,(n,i)=>{const r=i.hash();r!==""&&(e+=":"+n+":"+r)}),this.lazyHash_=e===""?"":_0(e)}return this.lazyHash_}getPredecessorChildName(e,n,i){const r=this.resolveIndex_(i);if(r){const o=r.getPredecessorKey(new Re(e,n));return o?o.name:null}else return this.children_.getPredecessorKey(e)}getFirstChildName(e){const n=this.resolveIndex_(e);if(n){const i=n.minKey();return i&&i.name}else return this.children_.minKey()}getFirstChild(e){const n=this.getFirstChildName(e);return n?new Re(n,this.children_.get(n)):null}getLastChildName(e){const n=this.resolveIndex_(e);if(n){const i=n.maxKey();return i&&i.name}else return this.children_.maxKey()}getLastChild(e){const n=this.getLastChildName(e);return n?new Re(n,this.children_.get(n)):null}forEachChild(e,n){const i=this.resolveIndex_(e);return i?i.inorderTraversal(r=>n(r.name,r.node)):this.children_.inorderTraversal(n)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,n){const i=this.resolveIndex_(n);if(i)return i.getIteratorFrom(e,r=>r);{const r=this.children_.getIteratorFrom(e.name,Re.Wrap);let o=r.peek();for(;o!=null&&n.compare(o,e)<0;)r.getNext(),o=r.peek();return r}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,n){const i=this.resolveIndex_(n);if(i)return i.getReverseIteratorFrom(e,r=>r);{const r=this.children_.getReverseIteratorFrom(e.name,Re.Wrap);let o=r.peek();for(;o!=null&&n.compare(o,e)>0;)r.getNext(),o=r.peek();return r}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===ql?-1:0}withIndex(e){if(e===ko||this.indexMap_.hasIndex(e))return this;{const n=this.indexMap_.addIndex(e,this.children_);return new fe(this.children_,this.priorityNode_,n)}}isIndexed(e){return e===ko||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const n=e;if(this.getPriority().equals(n.getPriority()))if(this.children_.count()===n.children_.count()){const i=this.getIterator(pt),r=n.getIterator(pt);let o=i.getNext(),l=r.getNext();for(;o&&l;){if(o.name!==l.name||!o.node.equals(l.node))return!1;o=i.getNext(),l=r.getNext()}return o===null&&l===null}else return!1;else return!1}}resolveIndex_(e){return e===ko?null:this.indexMap_.get(e.toString())}}fe.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class ZU extends fe{constructor(){super(new bn(dg),fe.EMPTY_NODE,ir.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return fe.EMPTY_NODE}isEmpty(){return!1}}const ql=new ZU;Object.defineProperties(Re,{MIN:{value:new Re(Ho,fe.EMPTY_NODE)},MAX:{value:new Re(Us,ql)}});F0.__EMPTY_NODE=fe.EMPTY_NODE;Rt.__childrenNodeConstructor=fe;GU(ql);YU(ql);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eB=!0;function Ct(t,e=null){if(t===null)return fe.EMPTY_NODE;if(typeof t=="object"&&".priority"in t&&(e=t[".priority"]),K(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof t=="object"&&".value"in t&&t[".value"]!==null&&(t=t[".value"]),typeof t!="object"||".sv"in t){const n=t;return new Rt(n,Ct(e))}if(!(t instanceof Array)&&eB){const n=[];let i=!1;if(Vt(t,(l,u)=>{if(l.substring(0,1)!=="."){const h=Ct(u);h.isEmpty()||(i=i||!h.getPriority().isEmpty(),n.push(new Re(l,h)))}}),n.length===0)return fe.EMPTY_NODE;const o=zu(n,KU,l=>l.name,dg);if(i){const l=zu(n,pt.getCompare());return new fe(o,Ct(e),new ir({".priority":l},{".priority":pt}))}else return new fe(o,Ct(e),ir.Default)}else{let n=fe.EMPTY_NODE;return Vt(t,(i,r)=>{if(Ui(t,i)&&i.substring(0,1)!=="."){const o=Ct(r);(o.isLeafNode()||!o.isEmpty())&&(n=n.updateImmediateChild(i,o))}}),n.updatePriority(Ct(e))}}zU(Ct);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tB extends Uh{constructor(e){super(),this.indexPath_=e,K(!De(e)&&Ne(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,n){const i=this.extractChild(e.node),r=this.extractChild(n.node),o=i.compareTo(r);return o===0?qs(e.name,n.name):o}makePost(e,n){const i=Ct(e),r=fe.EMPTY_NODE.updateChild(this.indexPath_,i);return new Re(n,r)}maxPost(){const e=fe.EMPTY_NODE.updateChild(this.indexPath_,ql);return new Re(Us,e)}toString(){return wl(this.indexPath_,0).join("/")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nB extends Uh{compare(e,n){const i=e.node.compareTo(n.node);return i===0?qs(e.name,n.name):i}isDefinedOn(e){return!0}indexedValueChanged(e,n){return!e.equals(n)}minPost(){return Re.MIN}maxPost(){return Re.MAX}makePost(e,n){const i=Ct(e);return new Re(n,i)}toString(){return".value"}}const iB=new nB;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function V0(t){return{type:"value",snapshotNode:t}}function Vo(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function Tl(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function Cl(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}function rB(t,e){return{type:"child_moved",snapshotNode:e,childName:t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pg{constructor(e){this.index_=e}updateChild(e,n,i,r,o,l){K(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const u=e.getImmediateChild(n);return u.getChild(r).equals(i.getChild(r))&&u.isEmpty()===i.isEmpty()||(l!=null&&(i.isEmpty()?e.hasChild(n)?l.trackChildChange(Tl(n,u)):K(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):u.isEmpty()?l.trackChildChange(Vo(n,i)):l.trackChildChange(Cl(n,i,u))),e.isLeafNode()&&i.isEmpty())?e:e.updateImmediateChild(n,i).withIndex(this.index_)}updateFullNode(e,n,i){return i!=null&&(e.isLeafNode()||e.forEachChild(pt,(r,o)=>{n.hasChild(r)||i.trackChildChange(Tl(r,o))}),n.isLeafNode()||n.forEachChild(pt,(r,o)=>{if(e.hasChild(r)){const l=e.getImmediateChild(r);l.equals(o)||i.trackChildChange(Cl(r,o,l))}else i.trackChildChange(Vo(r,o))})),n.withIndex(this.index_)}updatePriority(e,n){return e.isEmpty()?fe.EMPTY_NODE:e.updatePriority(n)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Il{constructor(e){this.indexedFilter_=new pg(e.getIndex()),this.index_=e.getIndex(),this.startPost_=Il.getStartPost_(e),this.endPost_=Il.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const n=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,i=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return n&&i}updateChild(e,n,i,r,o,l){return this.matches(new Re(n,i))||(i=fe.EMPTY_NODE),this.indexedFilter_.updateChild(e,n,i,r,o,l)}updateFullNode(e,n,i){n.isLeafNode()&&(n=fe.EMPTY_NODE);let r=n.withIndex(this.index_);r=r.updatePriority(fe.EMPTY_NODE);const o=this;return n.forEachChild(pt,(l,u)=>{o.matches(new Re(l,u))||(r=r.updateImmediateChild(l,fe.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,r,i)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const n=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),n)}else return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const n=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),n)}else return e.getIndex().maxPost()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sB{constructor(e){this.withinDirectionalStart=n=>this.reverse_?this.withinEndPost(n):this.withinStartPost(n),this.withinDirectionalEnd=n=>this.reverse_?this.withinStartPost(n):this.withinEndPost(n),this.withinStartPost=n=>{const i=this.index_.compare(this.rangedFilter_.getStartPost(),n);return this.startIsInclusive_?i<=0:i<0},this.withinEndPost=n=>{const i=this.index_.compare(n,this.rangedFilter_.getEndPost());return this.endIsInclusive_?i<=0:i<0},this.rangedFilter_=new Il(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,n,i,r,o,l){return this.rangedFilter_.matches(new Re(n,i))||(i=fe.EMPTY_NODE),e.getImmediateChild(n).equals(i)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,n,i,r,o,l):this.fullLimitUpdateChild_(e,n,i,o,l)}updateFullNode(e,n,i){let r;if(n.isLeafNode()||n.isEmpty())r=fe.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<n.numChildren()&&n.isIndexed(this.index_)){r=fe.EMPTY_NODE.withIndex(this.index_);let o;this.reverse_?o=n.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):o=n.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let l=0;for(;o.hasNext()&&l<this.limit_;){const u=o.getNext();if(this.withinDirectionalStart(u))if(this.withinDirectionalEnd(u))r=r.updateImmediateChild(u.name,u.node),l++;else break;else continue}}else{r=n.withIndex(this.index_),r=r.updatePriority(fe.EMPTY_NODE);let o;this.reverse_?o=r.getReverseIterator(this.index_):o=r.getIterator(this.index_);let l=0;for(;o.hasNext();){const u=o.getNext();l<this.limit_&&this.withinDirectionalStart(u)&&this.withinDirectionalEnd(u)?l++:r=r.updateImmediateChild(u.name,fe.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,r,i)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,n,i,r,o){let l;if(this.reverse_){const g=this.index_.getCompare();l=(y,b)=>g(b,y)}else l=this.index_.getCompare();const u=e;K(u.numChildren()===this.limit_,"");const h=new Re(n,i),d=this.reverse_?u.getFirstChild(this.index_):u.getLastChild(this.index_),p=this.rangedFilter_.matches(h);if(u.hasChild(n)){const g=u.getImmediateChild(n);let y=r.getChildAfterChild(this.index_,d,this.reverse_);for(;y!=null&&(y.name===n||u.hasChild(y.name));)y=r.getChildAfterChild(this.index_,y,this.reverse_);const b=y==null?1:l(y,h);if(p&&!i.isEmpty()&&b>=0)return o!=null&&o.trackChildChange(Cl(n,i,g)),u.updateImmediateChild(n,i);{o!=null&&o.trackChildChange(Tl(n,g));const N=u.updateImmediateChild(n,fe.EMPTY_NODE);return y!=null&&this.rangedFilter_.matches(y)?(o!=null&&o.trackChildChange(Vo(y.name,y.node)),N.updateImmediateChild(y.name,y.node)):N}}else return i.isEmpty()?e:p&&l(d,h)>=0?(o!=null&&(o.trackChildChange(Tl(d.name,d.node)),o.trackChildChange(Vo(n,i))),u.updateImmediateChild(n,i).updateImmediateChild(d.name,fe.EMPTY_NODE)):e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _g{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=pt}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return K(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return K(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Ho}hasEnd(){return this.endSet_}getIndexEndValue(){return K(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return K(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Us}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return K(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===pt}copy(){const e=new _g;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function oB(t){return t.loadsAllData()?new pg(t.getIndex()):t.hasLimit()?new sB(t):new Il(t)}function Ib(t){const e={};if(t.isDefault())return e;let n;if(t.index_===pt?n="$priority":t.index_===iB?n="$value":t.index_===ko?n="$key":(K(t.index_ instanceof tB,"Unrecognized index type!"),n=t.index_.toString()),e.orderBy=It(n),t.startSet_){const i=t.startAfterSet_?"startAfter":"startAt";e[i]=It(t.indexStartValue_),t.startNameSet_&&(e[i]+=","+It(t.indexStartName_))}if(t.endSet_){const i=t.endBeforeSet_?"endBefore":"endAt";e[i]=It(t.indexEndValue_),t.endNameSet_&&(e[i]+=","+It(t.indexEndName_))}return t.limitSet_&&(t.isViewFromLeft()?e.limitToFirst=t.limit_:e.limitToLast=t.limit_),e}function Ab(t){const e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_),e.sin=!t.startAfterSet_),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_),e.ein=!t.endBeforeSet_),t.limitSet_){e.l=t.limit_;let n=t.viewFrom_;n===""&&(t.isViewFromLeft()?n="l":n="r"),e.vf=n}return t.index_!==pt&&(e.i=t.index_.toString()),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yu extends k0{constructor(e,n,i,r){super(),this.repoInfo_=e,this.onDataUpdate_=n,this.authTokenProvider_=i,this.appCheckTokenProvider_=r,this.log_=jl("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,n){return n!==void 0?"tag$"+n:(K(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,n,i,r){const o=e._path.toString();this.log_("Listen called for "+o+" "+e._queryIdentifier);const l=Yu.getListenId_(e,i),u={};this.listens_[l]=u;const h=Ib(e._queryParams);this.restRequest_(o+".json",h,(d,p)=>{let g=p;if(d===404&&(g=null,d=null),d===null&&this.onDataUpdate_(o,g,!1,i),Wo(this.listens_,l)===u){let y;d?d===401?y="permission_denied":y="rest_error:"+d:y="ok",r(y,null)}})}unlisten(e,n){const i=Yu.getListenId_(e,n);delete this.listens_[i]}get(e){const n=Ib(e._queryParams),i=e._path.toString(),r=new $s;return this.restRequest_(i+".json",n,(o,l)=>{let u=l;o===404&&(u=null,o=null),o===null?(this.onDataUpdate_(i,u,!1,null),r.resolve(u)):r.reject(new Error(u))}),r.promise}refreshAuthToken(e){}restRequest_(e,n={},i){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([r,o])=>{r&&r.accessToken&&(n.auth=r.accessToken),o&&o.token&&(n.ac=o.token);const l=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+tg(n);this.log_("Sending REST request for "+l);const u=new XMLHttpRequest;u.onreadystatechange=()=>{if(i&&u.readyState===4){this.log_("REST Response for "+l+" received. status:",u.status,"response:",u.responseText);let h=null;if(u.status>=200&&u.status<300){try{h=vl(u.responseText)}catch{un("Failed to parse JSON response for "+l+": "+u.responseText)}i(null,h)}else u.status!==401&&u.status!==404&&un("Got unsuccessful REST response for "+l+" Status: "+u.status),i(u.status);i=null}},u.open("GET",l,!0),u.send()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aB{constructor(){this.rootNode_=fe.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,n){this.rootNode_=this.rootNode_.updateChild(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xu(){return{value:null,children:new Map}}function j0(t,e,n){if(De(e))t.value=n,t.children.clear();else if(t.value!==null)t.value=t.value.updateChild(e,n);else{const i=Ne(e);t.children.has(i)||t.children.set(i,Xu());const r=t.children.get(i);e=tt(e),j0(r,e,n)}}function i_(t,e,n){t.value!==null?n(e,t.value):lB(t,(i,r)=>{const o=new Ye(e.toString()+"/"+i);i_(r,o,n)})}function lB(t,e){t.children.forEach((n,i)=>{e(i,n)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cB{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),n=Object.assign({},e);return this.last_&&Vt(this.last_,(i,r)=>{n[i]=n[i]-r}),this.last_=e,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sb=10*1e3,uB=30*1e3,hB=5*60*1e3;class fB{constructor(e,n){this.server_=n,this.statsToReport_={},this.statsListener_=new cB(e);const i=Sb+(uB-Sb)*Math.random();il(this.reportStats_.bind(this),Math.floor(i))}reportStats_(){const e=this.statsListener_.get(),n={};let i=!1;Vt(e,(r,o)=>{o>0&&Ui(this.statsToReport_,r)&&(n[r]=o,i=!0)}),i&&this.server_.reportStats(n),il(this.reportStats_.bind(this),Math.floor(Math.random()*2*hB))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ci;(function(t){t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(ci||(ci={}));function gg(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function mg(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function vg(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qu{constructor(e,n,i){this.path=e,this.affectedTree=n,this.revert=i,this.type=ci.ACK_USER_WRITE,this.source=gg()}operationForChild(e){if(De(this.path)){if(this.affectedTree.value!=null)return K(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const n=this.affectedTree.subtree(new Ye(e));return new Qu(Be(),n,this.revert)}}else return K(Ne(this.path)===e,"operationForChild called for unrelated child."),new Qu(tt(this.path),this.affectedTree,this.revert)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Al{constructor(e,n){this.source=e,this.path=n,this.type=ci.LISTEN_COMPLETE}operationForChild(e){return De(this.path)?new Al(this.source,Be()):new Al(this.source,tt(this.path))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bs{constructor(e,n,i){this.source=e,this.path=n,this.snap=i,this.type=ci.OVERWRITE}operationForChild(e){return De(this.path)?new Bs(this.source,Be(),this.snap.getImmediateChild(e)):new Bs(this.source,tt(this.path),this.snap)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jo{constructor(e,n,i){this.source=e,this.path=n,this.children=i,this.type=ci.MERGE}operationForChild(e){if(De(this.path)){const n=this.children.subtree(new Ye(e));return n.isEmpty()?null:n.value?new Bs(this.source,Be(),n.value):new jo(this.source,Be(),n)}else return K(Ne(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new jo(this.source,tt(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kr{constructor(e,n,i){this.node_=e,this.fullyInitialized_=n,this.filtered_=i}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(De(e))return this.isFullyInitialized()&&!this.filtered_;const n=Ne(e);return this.isCompleteForChild(n)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dB{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function pB(t,e,n,i){const r=[],o=[];return e.forEach(l=>{l.type==="child_changed"&&t.index_.indexedValueChanged(l.oldSnap,l.snapshotNode)&&o.push(rB(l.childName,l.snapshotNode))}),Ba(t,r,"child_removed",e,i,n),Ba(t,r,"child_added",e,i,n),Ba(t,r,"child_moved",o,i,n),Ba(t,r,"child_changed",e,i,n),Ba(t,r,"value",e,i,n),r}function Ba(t,e,n,i,r,o){const l=i.filter(u=>u.type===n);l.sort((u,h)=>gB(t,u,h)),l.forEach(u=>{const h=_B(t,u,o);r.forEach(d=>{d.respondsTo(u.type)&&e.push(d.createEvent(h,t.query_))})})}function _B(t,e,n){return e.type==="value"||e.type==="child_removed"||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}function gB(t,e,n){if(e.childName==null||n.childName==null)throw ia("Should only compare child_ events.");const i=new Re(e.childName,e.snapshotNode),r=new Re(n.childName,n.snapshotNode);return t.index_.compare(i,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bh(t,e){return{eventCache:t,serverCache:e}}function rl(t,e,n,i){return Bh(new Kr(e,n,i),t.serverCache)}function q0(t,e,n,i){return Bh(t.eventCache,new Kr(e,n,i))}function Ju(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function Ws(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let tp;const mB=()=>(tp||(tp=new bn(tU)),tp);class Ze{constructor(e,n=mB()){this.value=e,this.children=n}static fromObject(e){let n=new Ze(null);return Vt(e,(i,r)=>{n=n.set(new Ye(i),r)}),n}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,n){if(this.value!=null&&n(this.value))return{path:Be(),value:this.value};if(De(e))return null;{const i=Ne(e),r=this.children.get(i);if(r!==null){const o=r.findRootMostMatchingPathAndValue(tt(e),n);return o!=null?{path:dt(new Ye(i),o.path),value:o.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(De(e))return this;{const n=Ne(e),i=this.children.get(n);return i!==null?i.subtree(tt(e)):new Ze(null)}}set(e,n){if(De(e))return new Ze(n,this.children);{const i=Ne(e),o=(this.children.get(i)||new Ze(null)).set(tt(e),n),l=this.children.insert(i,o);return new Ze(this.value,l)}}remove(e){if(De(e))return this.children.isEmpty()?new Ze(null):new Ze(null,this.children);{const n=Ne(e),i=this.children.get(n);if(i){const r=i.remove(tt(e));let o;return r.isEmpty()?o=this.children.remove(n):o=this.children.insert(n,r),this.value===null&&o.isEmpty()?new Ze(null):new Ze(this.value,o)}else return this}}get(e){if(De(e))return this.value;{const n=Ne(e),i=this.children.get(n);return i?i.get(tt(e)):null}}setTree(e,n){if(De(e))return n;{const i=Ne(e),o=(this.children.get(i)||new Ze(null)).setTree(tt(e),n);let l;return o.isEmpty()?l=this.children.remove(i):l=this.children.insert(i,o),new Ze(this.value,l)}}fold(e){return this.fold_(Be(),e)}fold_(e,n){const i={};return this.children.inorderTraversal((r,o)=>{i[r]=o.fold_(dt(e,r),n)}),n(e,this.value,i)}findOnPath(e,n){return this.findOnPath_(e,Be(),n)}findOnPath_(e,n,i){const r=this.value?i(n,this.value):!1;if(r)return r;if(De(e))return null;{const o=Ne(e),l=this.children.get(o);return l?l.findOnPath_(tt(e),dt(n,o),i):null}}foreachOnPath(e,n){return this.foreachOnPath_(e,Be(),n)}foreachOnPath_(e,n,i){if(De(e))return this;{this.value&&i(n,this.value);const r=Ne(e),o=this.children.get(r);return o?o.foreachOnPath_(tt(e),dt(n,r),i):new Ze(null)}}foreach(e){this.foreach_(Be(),e)}foreach_(e,n){this.children.inorderTraversal((i,r)=>{r.foreach_(dt(e,i),n)}),this.value&&n(e,this.value)}foreachChild(e){this.children.inorderTraversal((n,i)=>{i.value&&e(n,i.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fi{constructor(e){this.writeTree_=e}static empty(){return new fi(new Ze(null))}}function sl(t,e,n){if(De(e))return new fi(new Ze(n));{const i=t.writeTree_.findRootMostValueAndPath(e);if(i!=null){const r=i.path;let o=i.value;const l=ln(r,e);return o=o.updateChild(l,n),new fi(t.writeTree_.set(r,o))}else{const r=new Ze(n),o=t.writeTree_.setTree(e,r);return new fi(o)}}}function r_(t,e,n){let i=t;return Vt(n,(r,o)=>{i=sl(i,dt(e,r),o)}),i}function Ob(t,e){if(De(e))return fi.empty();{const n=t.writeTree_.setTree(e,new Ze(null));return new fi(n)}}function s_(t,e){return Ks(t,e)!=null}function Ks(t,e){const n=t.writeTree_.findRootMostValueAndPath(e);return n!=null?t.writeTree_.get(n.path).getChild(ln(n.path,e)):null}function Nb(t){const e=[],n=t.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild(pt,(i,r)=>{e.push(new Re(i,r))}):t.writeTree_.children.inorderTraversal((i,r)=>{r.value!=null&&e.push(new Re(i,r.value))}),e}function Ur(t,e){if(De(e))return t;{const n=Ks(t,e);return n!=null?new fi(new Ze(n)):new fi(t.writeTree_.subtree(e))}}function o_(t){return t.writeTree_.isEmpty()}function qo(t,e){return K0(Be(),t.writeTree_,e)}function K0(t,e,n){if(e.value!=null)return n.updateChild(t,e.value);{let i=null;return e.children.inorderTraversal((r,o)=>{r===".priority"?(K(o.value!==null,"Priority writes must always be leaf nodes"),i=o.value):n=K0(dt(t,r),o,n)}),!n.getChild(t).isEmpty()&&i!==null&&(n=n.updateChild(dt(t,".priority"),i)),n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wh(t,e){return X0(e,t)}function vB(t,e,n,i,r){K(i>t.lastWriteId,"Stacking an older write on top of newer ones"),r===void 0&&(r=!0),t.allWrites.push({path:e,snap:n,writeId:i,visible:r}),r&&(t.visibleWrites=sl(t.visibleWrites,e,n)),t.lastWriteId=i}function yB(t,e,n,i){K(i>t.lastWriteId,"Stacking an older merge on top of newer ones"),t.allWrites.push({path:e,children:n,writeId:i,visible:!0}),t.visibleWrites=r_(t.visibleWrites,e,n),t.lastWriteId=i}function EB(t,e){for(let n=0;n<t.allWrites.length;n++){const i=t.allWrites[n];if(i.writeId===e)return i}return null}function bB(t,e){const n=t.allWrites.findIndex(u=>u.writeId===e);K(n>=0,"removeWrite called with nonexistent writeId.");const i=t.allWrites[n];t.allWrites.splice(n,1);let r=i.visible,o=!1,l=t.allWrites.length-1;for(;r&&l>=0;){const u=t.allWrites[l];u.visible&&(l>=n&&wB(u,i.path)?r=!1:qn(i.path,u.path)&&(o=!0)),l--}if(r){if(o)return TB(t),!0;if(i.snap)t.visibleWrites=Ob(t.visibleWrites,i.path);else{const u=i.children;Vt(u,h=>{t.visibleWrites=Ob(t.visibleWrites,dt(i.path,h))})}return!0}else return!1}function wB(t,e){if(t.snap)return qn(t.path,e);for(const n in t.children)if(t.children.hasOwnProperty(n)&&qn(dt(t.path,n),e))return!0;return!1}function TB(t){t.visibleWrites=G0(t.allWrites,CB,Be()),t.allWrites.length>0?t.lastWriteId=t.allWrites[t.allWrites.length-1].writeId:t.lastWriteId=-1}function CB(t){return t.visible}function G0(t,e,n){let i=fi.empty();for(let r=0;r<t.length;++r){const o=t[r];if(e(o)){const l=o.path;let u;if(o.snap)qn(n,l)?(u=ln(n,l),i=sl(i,u,o.snap)):qn(l,n)&&(u=ln(l,n),i=sl(i,Be(),o.snap.getChild(u)));else if(o.children){if(qn(n,l))u=ln(n,l),i=r_(i,u,o.children);else if(qn(l,n))if(u=ln(l,n),De(u))i=r_(i,Be(),o.children);else{const h=Wo(o.children,Ne(u));if(h){const d=h.getChild(tt(u));i=sl(i,Be(),d)}}}else throw ia("WriteRecord should have .snap or .children")}}return i}function z0(t,e,n,i,r){if(!i&&!r){const o=Ks(t.visibleWrites,e);if(o!=null)return o;{const l=Ur(t.visibleWrites,e);if(o_(l))return n;if(n==null&&!s_(l,Be()))return null;{const u=n||fe.EMPTY_NODE;return qo(l,u)}}}else{const o=Ur(t.visibleWrites,e);if(!r&&o_(o))return n;if(!r&&n==null&&!s_(o,Be()))return null;{const l=function(d){return(d.visible||r)&&(!i||!~i.indexOf(d.writeId))&&(qn(d.path,e)||qn(e,d.path))},u=G0(t.allWrites,l,e),h=n||fe.EMPTY_NODE;return qo(u,h)}}}function IB(t,e,n){let i=fe.EMPTY_NODE;const r=Ks(t.visibleWrites,e);if(r)return r.isLeafNode()||r.forEachChild(pt,(o,l)=>{i=i.updateImmediateChild(o,l)}),i;if(n){const o=Ur(t.visibleWrites,e);return n.forEachChild(pt,(l,u)=>{const h=qo(Ur(o,new Ye(l)),u);i=i.updateImmediateChild(l,h)}),Nb(o).forEach(l=>{i=i.updateImmediateChild(l.name,l.node)}),i}else{const o=Ur(t.visibleWrites,e);return Nb(o).forEach(l=>{i=i.updateImmediateChild(l.name,l.node)}),i}}function AB(t,e,n,i,r){K(i||r,"Either existingEventSnap or existingServerSnap must exist");const o=dt(e,n);if(s_(t.visibleWrites,o))return null;{const l=Ur(t.visibleWrites,o);return o_(l)?r.getChild(n):qo(l,r.getChild(n))}}function SB(t,e,n,i){const r=dt(e,n),o=Ks(t.visibleWrites,r);if(o!=null)return o;if(i.isCompleteForChild(n)){const l=Ur(t.visibleWrites,r);return qo(l,i.getNode().getImmediateChild(n))}else return null}function OB(t,e){return Ks(t.visibleWrites,e)}function NB(t,e,n,i,r,o,l){let u;const h=Ur(t.visibleWrites,e),d=Ks(h,Be());if(d!=null)u=d;else if(n!=null)u=qo(h,n);else return[];if(u=u.withIndex(l),!u.isEmpty()&&!u.isLeafNode()){const p=[],g=l.getCompare(),y=o?u.getReverseIteratorFrom(i,l):u.getIteratorFrom(i,l);let b=y.getNext();for(;b&&p.length<r;)g(b,i)!==0&&p.push(b),b=y.getNext();return p}else return[]}function RB(){return{visibleWrites:fi.empty(),allWrites:[],lastWriteId:-1}}function Zu(t,e,n,i){return z0(t.writeTree,t.treePath,e,n,i)}function yg(t,e){return IB(t.writeTree,t.treePath,e)}function Rb(t,e,n,i){return AB(t.writeTree,t.treePath,e,n,i)}function eh(t,e){return OB(t.writeTree,dt(t.treePath,e))}function xB(t,e,n,i,r,o){return NB(t.writeTree,t.treePath,e,n,i,r,o)}function Eg(t,e,n){return SB(t.writeTree,t.treePath,e,n)}function Y0(t,e){return X0(dt(t.treePath,e),t.writeTree)}function X0(t,e){return{treePath:t,writeTree:e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DB{constructor(){this.changeMap=new Map}trackChildChange(e){const n=e.type,i=e.childName;K(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),K(i!==".priority","Only non-priority child changes can be tracked.");const r=this.changeMap.get(i);if(r){const o=r.type;if(n==="child_added"&&o==="child_removed")this.changeMap.set(i,Cl(i,e.snapshotNode,r.snapshotNode));else if(n==="child_removed"&&o==="child_added")this.changeMap.delete(i);else if(n==="child_removed"&&o==="child_changed")this.changeMap.set(i,Tl(i,r.oldSnap));else if(n==="child_changed"&&o==="child_added")this.changeMap.set(i,Vo(i,e.snapshotNode));else if(n==="child_changed"&&o==="child_changed")this.changeMap.set(i,Cl(i,e.snapshotNode,r.oldSnap));else throw ia("Illegal combination of changes: "+e+" occurred after "+r)}else this.changeMap.set(i,e)}getChanges(){return Array.from(this.changeMap.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LB{getCompleteChild(e){return null}getChildAfterChild(e,n,i){return null}}const Q0=new LB;class bg{constructor(e,n,i=null){this.writes_=e,this.viewCache_=n,this.optCompleteServerCache_=i}getCompleteChild(e){const n=this.viewCache_.eventCache;if(n.isCompleteForChild(e))return n.getNode().getImmediateChild(e);{const i=this.optCompleteServerCache_!=null?new Kr(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return Eg(this.writes_,e,i)}}getChildAfterChild(e,n,i){const r=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:Ws(this.viewCache_),o=xB(this.writes_,r,n,1,i,e);return o.length===0?null:o[0]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kB(t){return{filter:t}}function PB(t,e){K(e.eventCache.getNode().isIndexed(t.filter.getIndex()),"Event snap not indexed"),K(e.serverCache.getNode().isIndexed(t.filter.getIndex()),"Server snap not indexed")}function MB(t,e,n,i,r){const o=new DB;let l,u;if(n.type===ci.OVERWRITE){const d=n;d.source.fromUser?l=a_(t,e,d.path,d.snap,i,r,o):(K(d.source.fromServer,"Unknown source."),u=d.source.tagged||e.serverCache.isFiltered()&&!De(d.path),l=th(t,e,d.path,d.snap,i,r,u,o))}else if(n.type===ci.MERGE){const d=n;d.source.fromUser?l=FB(t,e,d.path,d.children,i,r,o):(K(d.source.fromServer,"Unknown source."),u=d.source.tagged||e.serverCache.isFiltered(),l=l_(t,e,d.path,d.children,i,r,u,o))}else if(n.type===ci.ACK_USER_WRITE){const d=n;d.revert?l=WB(t,e,d.path,i,r,o):l=UB(t,e,d.path,d.affectedTree,i,r,o)}else if(n.type===ci.LISTEN_COMPLETE)l=BB(t,e,n.path,i,o);else throw ia("Unknown operation type: "+n.type);const h=o.getChanges();return $B(e,l,h),{viewCache:l,changes:h}}function $B(t,e,n){const i=e.eventCache;if(i.isFullyInitialized()){const r=i.getNode().isLeafNode()||i.getNode().isEmpty(),o=Ju(t);(n.length>0||!t.eventCache.isFullyInitialized()||r&&!i.getNode().equals(o)||!i.getNode().getPriority().equals(o.getPriority()))&&n.push(V0(Ju(e)))}}function J0(t,e,n,i,r,o){const l=e.eventCache;if(eh(i,n)!=null)return e;{let u,h;if(De(n))if(K(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const d=Ws(e),p=d instanceof fe?d:fe.EMPTY_NODE,g=yg(i,p);u=t.filter.updateFullNode(e.eventCache.getNode(),g,o)}else{const d=Zu(i,Ws(e));u=t.filter.updateFullNode(e.eventCache.getNode(),d,o)}else{const d=Ne(n);if(d===".priority"){K(qr(n)===1,"Can't have a priority with additional path components");const p=l.getNode();h=e.serverCache.getNode();const g=Rb(i,n,p,h);g!=null?u=t.filter.updatePriority(p,g):u=l.getNode()}else{const p=tt(n);let g;if(l.isCompleteForChild(d)){h=e.serverCache.getNode();const y=Rb(i,n,l.getNode(),h);y!=null?g=l.getNode().getImmediateChild(d).updateChild(p,y):g=l.getNode().getImmediateChild(d)}else g=Eg(i,d,e.serverCache);g!=null?u=t.filter.updateChild(l.getNode(),d,g,p,r,o):u=l.getNode()}}return rl(e,u,l.isFullyInitialized()||De(n),t.filter.filtersNodes())}}function th(t,e,n,i,r,o,l,u){const h=e.serverCache;let d;const p=l?t.filter:t.filter.getIndexedFilter();if(De(n))d=p.updateFullNode(h.getNode(),i,null);else if(p.filtersNodes()&&!h.isFiltered()){const b=h.getNode().updateChild(n,i);d=p.updateFullNode(h.getNode(),b,null)}else{const b=Ne(n);if(!h.isCompleteForPath(n)&&qr(n)>1)return e;const S=tt(n),P=h.getNode().getImmediateChild(b).updateChild(S,i);b===".priority"?d=p.updatePriority(h.getNode(),P):d=p.updateChild(h.getNode(),b,P,S,Q0,null)}const g=q0(e,d,h.isFullyInitialized()||De(n),p.filtersNodes()),y=new bg(r,g,o);return J0(t,g,n,r,y,u)}function a_(t,e,n,i,r,o,l){const u=e.eventCache;let h,d;const p=new bg(r,e,o);if(De(n))d=t.filter.updateFullNode(e.eventCache.getNode(),i,l),h=rl(e,d,!0,t.filter.filtersNodes());else{const g=Ne(n);if(g===".priority")d=t.filter.updatePriority(e.eventCache.getNode(),i),h=rl(e,d,u.isFullyInitialized(),u.isFiltered());else{const y=tt(n),b=u.getNode().getImmediateChild(g);let S;if(De(y))S=i;else{const N=p.getCompleteChild(g);N!=null?ug(y)===".priority"&&N.getChild(M0(y)).isEmpty()?S=N:S=N.updateChild(y,i):S=fe.EMPTY_NODE}if(b.equals(S))h=e;else{const N=t.filter.updateChild(u.getNode(),g,S,y,p,l);h=rl(e,N,u.isFullyInitialized(),t.filter.filtersNodes())}}}return h}function xb(t,e){return t.eventCache.isCompleteForChild(e)}function FB(t,e,n,i,r,o,l){let u=e;return i.foreach((h,d)=>{const p=dt(n,h);xb(e,Ne(p))&&(u=a_(t,u,p,d,r,o,l))}),i.foreach((h,d)=>{const p=dt(n,h);xb(e,Ne(p))||(u=a_(t,u,p,d,r,o,l))}),u}function Db(t,e,n){return n.foreach((i,r)=>{e=e.updateChild(i,r)}),e}function l_(t,e,n,i,r,o,l,u){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let h=e,d;De(n)?d=i:d=new Ze(null).setTree(n,i);const p=e.serverCache.getNode();return d.children.inorderTraversal((g,y)=>{if(p.hasChild(g)){const b=e.serverCache.getNode().getImmediateChild(g),S=Db(t,b,y);h=th(t,h,new Ye(g),S,r,o,l,u)}}),d.children.inorderTraversal((g,y)=>{const b=!e.serverCache.isCompleteForChild(g)&&y.value===null;if(!p.hasChild(g)&&!b){const S=e.serverCache.getNode().getImmediateChild(g),N=Db(t,S,y);h=th(t,h,new Ye(g),N,r,o,l,u)}}),h}function UB(t,e,n,i,r,o,l){if(eh(r,n)!=null)return e;const u=e.serverCache.isFiltered(),h=e.serverCache;if(i.value!=null){if(De(n)&&h.isFullyInitialized()||h.isCompleteForPath(n))return th(t,e,n,h.getNode().getChild(n),r,o,u,l);if(De(n)){let d=new Ze(null);return h.getNode().forEachChild(ko,(p,g)=>{d=d.set(new Ye(p),g)}),l_(t,e,n,d,r,o,u,l)}else return e}else{let d=new Ze(null);return i.foreach((p,g)=>{const y=dt(n,p);h.isCompleteForPath(y)&&(d=d.set(p,h.getNode().getChild(y)))}),l_(t,e,n,d,r,o,u,l)}}function BB(t,e,n,i,r){const o=e.serverCache,l=q0(e,o.getNode(),o.isFullyInitialized()||De(n),o.isFiltered());return J0(t,l,n,i,Q0,r)}function WB(t,e,n,i,r,o){let l;if(eh(i,n)!=null)return e;{const u=new bg(i,e,r),h=e.eventCache.getNode();let d;if(De(n)||Ne(n)===".priority"){let p;if(e.serverCache.isFullyInitialized())p=Zu(i,Ws(e));else{const g=e.serverCache.getNode();K(g instanceof fe,"serverChildren would be complete if leaf node"),p=yg(i,g)}p=p,d=t.filter.updateFullNode(h,p,o)}else{const p=Ne(n);let g=Eg(i,p,e.serverCache);g==null&&e.serverCache.isCompleteForChild(p)&&(g=h.getImmediateChild(p)),g!=null?d=t.filter.updateChild(h,p,g,tt(n),u,o):e.eventCache.getNode().hasChild(p)?d=t.filter.updateChild(h,p,fe.EMPTY_NODE,tt(n),u,o):d=h,d.isEmpty()&&e.serverCache.isFullyInitialized()&&(l=Zu(i,Ws(e)),l.isLeafNode()&&(d=t.filter.updateFullNode(d,l,o)))}return l=e.serverCache.isFullyInitialized()||eh(i,Be())!=null,rl(e,d,l,t.filter.filtersNodes())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HB{constructor(e,n){this.query_=e,this.eventRegistrations_=[];const i=this.query_._queryParams,r=new pg(i.getIndex()),o=oB(i);this.processor_=kB(o);const l=n.serverCache,u=n.eventCache,h=r.updateFullNode(fe.EMPTY_NODE,l.getNode(),null),d=o.updateFullNode(fe.EMPTY_NODE,u.getNode(),null),p=new Kr(h,l.isFullyInitialized(),r.filtersNodes()),g=new Kr(d,u.isFullyInitialized(),o.filtersNodes());this.viewCache_=Bh(g,p),this.eventGenerator_=new dB(this.query_)}get query(){return this.query_}}function VB(t){return t.viewCache_.serverCache.getNode()}function jB(t){return Ju(t.viewCache_)}function qB(t,e){const n=Ws(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!De(e)&&!n.getImmediateChild(Ne(e)).isEmpty())?n.getChild(e):null}function Lb(t){return t.eventRegistrations_.length===0}function KB(t,e){t.eventRegistrations_.push(e)}function kb(t,e,n){const i=[];if(n){K(e==null,"A cancel should cancel all event registrations.");const r=t.query._path;t.eventRegistrations_.forEach(o=>{const l=o.createCancelEvent(n,r);l&&i.push(l)})}if(e){let r=[];for(let o=0;o<t.eventRegistrations_.length;++o){const l=t.eventRegistrations_[o];if(!l.matches(e))r.push(l);else if(e.hasAnyCallback()){r=r.concat(t.eventRegistrations_.slice(o+1));break}}t.eventRegistrations_=r}else t.eventRegistrations_=[];return i}function Pb(t,e,n,i){e.type===ci.MERGE&&e.source.queryId!==null&&(K(Ws(t.viewCache_),"We should always have a full cache before handling merges"),K(Ju(t.viewCache_),"Missing event cache, even though we have a server cache"));const r=t.viewCache_,o=MB(t.processor_,r,e,n,i);return PB(t.processor_,o.viewCache),K(o.viewCache.serverCache.isFullyInitialized()||!r.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=o.viewCache,Z0(t,o.changes,o.viewCache.eventCache.getNode(),null)}function GB(t,e){const n=t.viewCache_.eventCache,i=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(pt,(o,l)=>{i.push(Vo(o,l))}),n.isFullyInitialized()&&i.push(V0(n.getNode())),Z0(t,i,n.getNode(),e)}function Z0(t,e,n,i){const r=i?[i]:t.eventRegistrations_;return pB(t.eventGenerator_,e,n,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let nh;class eC{constructor(){this.views=new Map}}function zB(t){K(!nh,"__referenceConstructor has already been defined"),nh=t}function YB(){return K(nh,"Reference.ts has not been loaded"),nh}function XB(t){return t.views.size===0}function wg(t,e,n,i){const r=e.source.queryId;if(r!==null){const o=t.views.get(r);return K(o!=null,"SyncTree gave us an op for an invalid query."),Pb(o,e,n,i)}else{let o=[];for(const l of t.views.values())o=o.concat(Pb(l,e,n,i));return o}}function tC(t,e,n,i,r){const o=e._queryIdentifier,l=t.views.get(o);if(!l){let u=Zu(n,r?i:null),h=!1;u?h=!0:i instanceof fe?(u=yg(n,i),h=!1):(u=fe.EMPTY_NODE,h=!1);const d=Bh(new Kr(u,h,!1),new Kr(i,r,!1));return new HB(e,d)}return l}function QB(t,e,n,i,r,o){const l=tC(t,e,i,r,o);return t.views.has(e._queryIdentifier)||t.views.set(e._queryIdentifier,l),KB(l,n),GB(l,n)}function JB(t,e,n,i){const r=e._queryIdentifier,o=[];let l=[];const u=Gr(t);if(r==="default")for(const[h,d]of t.views.entries())l=l.concat(kb(d,n,i)),Lb(d)&&(t.views.delete(h),d.query._queryParams.loadsAllData()||o.push(d.query));else{const h=t.views.get(r);h&&(l=l.concat(kb(h,n,i)),Lb(h)&&(t.views.delete(r),h.query._queryParams.loadsAllData()||o.push(h.query)))}return u&&!Gr(t)&&o.push(new(YB())(e._repo,e._path)),{removed:o,events:l}}function nC(t){const e=[];for(const n of t.views.values())n.query._queryParams.loadsAllData()||e.push(n);return e}function Br(t,e){let n=null;for(const i of t.views.values())n=n||qB(i,e);return n}function iC(t,e){if(e._queryParams.loadsAllData())return Hh(t);{const i=e._queryIdentifier;return t.views.get(i)}}function rC(t,e){return iC(t,e)!=null}function Gr(t){return Hh(t)!=null}function Hh(t){for(const e of t.views.values())if(e.query._queryParams.loadsAllData())return e;return null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ih;function ZB(t){K(!ih,"__referenceConstructor has already been defined"),ih=t}function eW(){return K(ih,"Reference.ts has not been loaded"),ih}let tW=1;class Mb{constructor(e){this.listenProvider_=e,this.syncPointTree_=new Ze(null),this.pendingWriteTree_=RB(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function sC(t,e,n,i,r){return vB(t.pendingWriteTree_,e,n,i,r),r?oa(t,new Bs(gg(),e,n)):[]}function nW(t,e,n,i){yB(t.pendingWriteTree_,e,n,i);const r=Ze.fromObject(n);return oa(t,new jo(gg(),e,r))}function kr(t,e,n=!1){const i=EB(t.pendingWriteTree_,e);if(bB(t.pendingWriteTree_,e)){let o=new Ze(null);return i.snap!=null?o=o.set(Be(),!0):Vt(i.children,l=>{o=o.set(new Ye(l),!0)}),oa(t,new Qu(i.path,o,n))}else return[]}function Kl(t,e,n){return oa(t,new Bs(mg(),e,n))}function iW(t,e,n){const i=Ze.fromObject(n);return oa(t,new jo(mg(),e,i))}function rW(t,e){return oa(t,new Al(mg(),e))}function sW(t,e,n){const i=Cg(t,n);if(i){const r=Ig(i),o=r.path,l=r.queryId,u=ln(o,e),h=new Al(vg(l),u);return Ag(t,o,h)}else return[]}function rh(t,e,n,i,r=!1){const o=e._path,l=t.syncPointTree_.get(o);let u=[];if(l&&(e._queryIdentifier==="default"||rC(l,e))){const h=JB(l,e,n,i);XB(l)&&(t.syncPointTree_=t.syncPointTree_.remove(o));const d=h.removed;if(u=h.events,!r){const p=d.findIndex(y=>y._queryParams.loadsAllData())!==-1,g=t.syncPointTree_.findOnPath(o,(y,b)=>Gr(b));if(p&&!g){const y=t.syncPointTree_.subtree(o);if(!y.isEmpty()){const b=lW(y);for(let S=0;S<b.length;++S){const N=b[S],P=N.query,G=cC(t,N);t.listenProvider_.startListening(ol(P),Sl(t,P),G.hashFn,G.onComplete)}}}!g&&d.length>0&&!i&&(p?t.listenProvider_.stopListening(ol(e),null):d.forEach(y=>{const b=t.queryToTagMap.get(Vh(y));t.listenProvider_.stopListening(ol(y),b)}))}cW(t,d)}return u}function oC(t,e,n,i){const r=Cg(t,i);if(r!=null){const o=Ig(r),l=o.path,u=o.queryId,h=ln(l,e),d=new Bs(vg(u),h,n);return Ag(t,l,d)}else return[]}function oW(t,e,n,i){const r=Cg(t,i);if(r){const o=Ig(r),l=o.path,u=o.queryId,h=ln(l,e),d=Ze.fromObject(n),p=new jo(vg(u),h,d);return Ag(t,l,p)}else return[]}function c_(t,e,n,i=!1){const r=e._path;let o=null,l=!1;t.syncPointTree_.foreachOnPath(r,(y,b)=>{const S=ln(y,r);o=o||Br(b,S),l=l||Gr(b)});let u=t.syncPointTree_.get(r);u?(l=l||Gr(u),o=o||Br(u,Be())):(u=new eC,t.syncPointTree_=t.syncPointTree_.set(r,u));let h;o!=null?h=!0:(h=!1,o=fe.EMPTY_NODE,t.syncPointTree_.subtree(r).foreachChild((b,S)=>{const N=Br(S,Be());N&&(o=o.updateImmediateChild(b,N))}));const d=rC(u,e);if(!d&&!e._queryParams.loadsAllData()){const y=Vh(e);K(!t.queryToTagMap.has(y),"View does not exist, but we have a tag");const b=uW();t.queryToTagMap.set(y,b),t.tagToQueryMap.set(b,y)}const p=Wh(t.pendingWriteTree_,r);let g=QB(u,e,n,p,o,h);if(!d&&!l&&!i){const y=iC(u,e);g=g.concat(hW(t,e,y))}return g}function Tg(t,e,n){const r=t.pendingWriteTree_,o=t.syncPointTree_.findOnPath(e,(l,u)=>{const h=ln(l,e),d=Br(u,h);if(d)return d});return z0(r,e,o,n,!0)}function aW(t,e){const n=e._path;let i=null;t.syncPointTree_.foreachOnPath(n,(d,p)=>{const g=ln(d,n);i=i||Br(p,g)});let r=t.syncPointTree_.get(n);r?i=i||Br(r,Be()):(r=new eC,t.syncPointTree_=t.syncPointTree_.set(n,r));const o=i!=null,l=o?new Kr(i,!0,!1):null,u=Wh(t.pendingWriteTree_,e._path),h=tC(r,e,u,o?l.getNode():fe.EMPTY_NODE,o);return jB(h)}function oa(t,e){return aC(e,t.syncPointTree_,null,Wh(t.pendingWriteTree_,Be()))}function aC(t,e,n,i){if(De(t.path))return lC(t,e,n,i);{const r=e.get(Be());n==null&&r!=null&&(n=Br(r,Be()));let o=[];const l=Ne(t.path),u=t.operationForChild(l),h=e.children.get(l);if(h&&u){const d=n?n.getImmediateChild(l):null,p=Y0(i,l);o=o.concat(aC(u,h,d,p))}return r&&(o=o.concat(wg(r,t,i,n))),o}}function lC(t,e,n,i){const r=e.get(Be());n==null&&r!=null&&(n=Br(r,Be()));let o=[];return e.children.inorderTraversal((l,u)=>{const h=n?n.getImmediateChild(l):null,d=Y0(i,l),p=t.operationForChild(l);p&&(o=o.concat(lC(p,u,h,d)))}),r&&(o=o.concat(wg(r,t,i,n))),o}function cC(t,e){const n=e.query,i=Sl(t,n);return{hashFn:()=>(VB(e)||fe.EMPTY_NODE).hash(),onComplete:r=>{if(r==="ok")return i?sW(t,n._path,i):rW(t,n._path);{const o=rU(r,n);return rh(t,n,null,o)}}}}function Sl(t,e){const n=Vh(e);return t.queryToTagMap.get(n)}function Vh(t){return t._path.toString()+"$"+t._queryIdentifier}function Cg(t,e){return t.tagToQueryMap.get(e)}function Ig(t){const e=t.indexOf("$");return K(e!==-1&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new Ye(t.substr(0,e))}}function Ag(t,e,n){const i=t.syncPointTree_.get(e);K(i,"Missing sync point for query tag that we're tracking");const r=Wh(t.pendingWriteTree_,e);return wg(i,n,r,null)}function lW(t){return t.fold((e,n,i)=>{if(n&&Gr(n))return[Hh(n)];{let r=[];return n&&(r=nC(n)),Vt(i,(o,l)=>{r=r.concat(l)}),r}})}function ol(t){return t._queryParams.loadsAllData()&&!t._queryParams.isDefault()?new(eW())(t._repo,t._path):t}function cW(t,e){for(let n=0;n<e.length;++n){const i=e[n];if(!i._queryParams.loadsAllData()){const r=Vh(i),o=t.queryToTagMap.get(r);t.queryToTagMap.delete(r),t.tagToQueryMap.delete(o)}}}function uW(){return tW++}function hW(t,e,n){const i=e._path,r=Sl(t,e),o=cC(t,n),l=t.listenProvider_.startListening(ol(e),r,o.hashFn,o.onComplete),u=t.syncPointTree_.subtree(i);if(r)K(!Gr(u.value),"If we're adding a query, it shouldn't be shadowed");else{const h=u.fold((d,p,g)=>{if(!De(d)&&p&&Gr(p))return[Hh(p).query];{let y=[];return p&&(y=y.concat(nC(p).map(b=>b.query))),Vt(g,(b,S)=>{y=y.concat(S)}),y}});for(let d=0;d<h.length;++d){const p=h[d];t.listenProvider_.stopListening(ol(p),Sl(t,p))}}return l}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sg{constructor(e){this.node_=e}getImmediateChild(e){const n=this.node_.getImmediateChild(e);return new Sg(n)}node(){return this.node_}}class Og{constructor(e,n){this.syncTree_=e,this.path_=n}getImmediateChild(e){const n=dt(this.path_,e);return new Og(this.syncTree_,n)}node(){return Tg(this.syncTree_,this.path_)}}const fW=function(t){return t=t||{},t.timestamp=t.timestamp||new Date().getTime(),t},$b=function(t,e,n){if(!t||typeof t!="object")return t;if(K(".sv"in t,"Unexpected leaf node or priority contents"),typeof t[".sv"]=="string")return dW(t[".sv"],e,n);if(typeof t[".sv"]=="object")return pW(t[".sv"],e);K(!1,"Unexpected server value: "+JSON.stringify(t,null,2))},dW=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:K(!1,"Unexpected server value: "+t)}},pW=function(t,e,n){t.hasOwnProperty("increment")||K(!1,"Unexpected server value: "+JSON.stringify(t,null,2));const i=t.increment;typeof i!="number"&&K(!1,"Unexpected increment value: "+i);const r=e.node();if(K(r!==null&&typeof r<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!r.isLeafNode())return i;const l=r.getValue();return typeof l!="number"?i:l+i},uC=function(t,e,n,i){return Ng(e,new Og(n,t),i)},hC=function(t,e,n){return Ng(t,new Sg(e),n)};function Ng(t,e,n){const i=t.getPriority().val(),r=$b(i,e.getImmediateChild(".priority"),n);let o;if(t.isLeafNode()){const l=t,u=$b(l.getValue(),e,n);return u!==l.getValue()||r!==l.getPriority().val()?new Rt(u,Ct(r)):t}else{const l=t;return o=l,r!==l.getPriority().val()&&(o=o.updatePriority(new Rt(r))),l.forEachChild(pt,(u,h)=>{const d=Ng(h,e.getImmediateChild(u),n);d!==h&&(o=o.updateImmediateChild(u,d))}),o}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rg{constructor(e="",n=null,i={children:{},childCount:0}){this.name=e,this.parent=n,this.node=i}}function xg(t,e){let n=e instanceof Ye?e:new Ye(e),i=t,r=Ne(n);for(;r!==null;){const o=Wo(i.node.children,r)||{children:{},childCount:0};i=new Rg(r,i,o),n=tt(n),r=Ne(n)}return i}function aa(t){return t.node.value}function fC(t,e){t.node.value=e,u_(t)}function dC(t){return t.node.childCount>0}function _W(t){return aa(t)===void 0&&!dC(t)}function jh(t,e){Vt(t.node.children,(n,i)=>{e(new Rg(n,t,i))})}function pC(t,e,n,i){n&&!i&&e(t),jh(t,r=>{pC(r,e,!0,i)}),n&&i&&e(t)}function gW(t,e,n){let i=n?t:t.parent;for(;i!==null;){if(e(i))return!0;i=i.parent}return!1}function Gl(t){return new Ye(t.parent===null?t.name:Gl(t.parent)+"/"+t.name)}function u_(t){t.parent!==null&&mW(t.parent,t.name,t)}function mW(t,e,n){const i=_W(n),r=Ui(t.node.children,e);i&&r?(delete t.node.children[e],t.node.childCount--,u_(t)):!i&&!r&&(t.node.children[e]=n.node,t.node.childCount++,u_(t))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vW=/[\[\].#$\/\u0000-\u001F\u007F]/,yW=/[\[\].#$\u0000-\u001F\u007F]/,np=10*1024*1024,Dg=function(t){return typeof t=="string"&&t.length!==0&&!vW.test(t)},_C=function(t){return typeof t=="string"&&t.length!==0&&!yW.test(t)},EW=function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),_C(t)},bW=function(t){return t===null||typeof t=="string"||typeof t=="number"&&!sg(t)||t&&typeof t=="object"&&Ui(t,".sv")},wW=function(t,e,n,i){i&&e===void 0||qh($h(t,"value"),e,n)},qh=function(t,e,n){const i=n instanceof Ye?new FU(n,t):n;if(e===void 0)throw new Error(t+"contains undefined "+ms(i));if(typeof e=="function")throw new Error(t+"contains a function "+ms(i)+" with contents = "+e.toString());if(sg(e))throw new Error(t+"contains "+e.toString()+" "+ms(i));if(typeof e=="string"&&e.length>np/3&&Fh(e)>np)throw new Error(t+"contains a string greater than "+np+" utf8 bytes "+ms(i)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let r=!1,o=!1;if(Vt(e,(l,u)=>{if(l===".value")r=!0;else if(l!==".priority"&&l!==".sv"&&(o=!0,!Dg(l)))throw new Error(t+" contains an invalid key ("+l+") "+ms(i)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);UU(i,l),qh(t,u,i),BU(i)}),r&&o)throw new Error(t+' contains ".value" child '+ms(i)+" in addition to actual children.")}},TW=function(t,e){let n,i;for(n=0;n<e.length;n++){i=e[n];const o=wl(i);for(let l=0;l<o.length;l++)if(!(o[l]===".priority"&&l===o.length-1)){if(!Dg(o[l]))throw new Error(t+"contains an invalid key ("+o[l]+") in path "+i.toString()+`. Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`)}}e.sort($U);let r=null;for(n=0;n<e.length;n++){if(i=e[n],r!==null&&qn(r,i))throw new Error(t+"contains a path "+r.toString()+" that is ancestor of another path "+i.toString());r=i}},CW=function(t,e,n,i){if(i&&e===void 0)return;const r=$h(t,"values");if(!(e&&typeof e=="object")||Array.isArray(e))throw new Error(r+" must be an object containing the children to replace.");const o=[];Vt(e,(l,u)=>{const h=new Ye(l);if(qh(r,u,dt(n,h)),ug(h)===".priority"&&!bW(u))throw new Error(r+"contains an invalid value for '"+h.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");o.push(h)}),TW(r,o)},gC=function(t,e,n,i){if(!(i&&n===void 0)&&!_C(n))throw new Error($h(t,e)+'was an invalid path = "'+n+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},IW=function(t,e,n,i){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),gC(t,e,n,i)},mC=function(t,e){if(Ne(e)===".info")throw new Error(t+" failed = Can't modify data under /.info/")},AW=function(t,e){const n=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!Dg(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!EW(n))throw new Error($h(t,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SW{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function Kh(t,e){let n=null;for(let i=0;i<e.length;i++){const r=e[i],o=r.getPath();n!==null&&!hg(o,n.path)&&(t.eventLists_.push(n),n=null),n===null&&(n={events:[],path:o}),n.events.push(r)}n&&t.eventLists_.push(n)}function vC(t,e,n){Kh(t,n),yC(t,i=>hg(i,e))}function Yn(t,e,n){Kh(t,n),yC(t,i=>qn(i,e)||qn(e,i))}function yC(t,e){t.recursionDepth_++;let n=!0;for(let i=0;i<t.eventLists_.length;i++){const r=t.eventLists_[i];if(r){const o=r.path;e(o)?(OW(t.eventLists_[i]),t.eventLists_[i]=null):n=!1}}n&&(t.eventLists_=[]),t.recursionDepth_--}function OW(t){for(let e=0;e<t.events.length;e++){const n=t.events[e];if(n!==null){t.events[e]=null;const i=n.getEventRunner();Ds&&Bt("event: "+n.toString()),sa(i)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NW="repo_interrupt",RW=25;class xW{constructor(e,n,i,r){this.repoInfo_=e,this.forceRestClient_=n,this.authTokenProvider_=i,this.appCheckProvider_=r,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new SW,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Xu(),this.transactionQueueTree_=new Rg,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function DW(t,e,n){if(t.stats_=lg(t.repoInfo_),t.forceRestClient_||lU())t.server_=new Yu(t.repoInfo_,(i,r,o,l)=>{Fb(t,i,r,o,l)},t.authTokenProvider_,t.appCheckProvider_),setTimeout(()=>Ub(t,!0),0);else{if(typeof n<"u"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{It(n)}catch(i){throw new Error("Invalid authOverride provided: "+i)}}t.persistentConnection_=new or(t.repoInfo_,e,(i,r,o,l)=>{Fb(t,i,r,o,l)},i=>{Ub(t,i)},i=>{kW(t,i)},t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}t.authTokenProvider_.addTokenChangeListener(i=>{t.server_.refreshAuthToken(i)}),t.appCheckProvider_.addTokenChangeListener(i=>{t.server_.refreshAppCheckToken(i.token)}),t.statsReporter_=dU(t.repoInfo_,()=>new fB(t.stats_,t.server_)),t.infoData_=new aB,t.infoSyncTree_=new Mb({startListening:(i,r,o,l)=>{let u=[];const h=t.infoData_.getNode(i._path);return h.isEmpty()||(u=Kl(t.infoSyncTree_,i._path,h),setTimeout(()=>{l("ok")},0)),u},stopListening:()=>{}}),Lg(t,"connected",!1),t.serverSyncTree_=new Mb({startListening:(i,r,o,l)=>(t.server_.listen(i,o,r,(u,h)=>{const d=l(u,h);Yn(t.eventQueue_,i._path,d)}),[]),stopListening:(i,r)=>{t.server_.unlisten(i,r)}})}function LW(t){const n=t.infoData_.getNode(new Ye(".info/serverTimeOffset")).val()||0;return new Date().getTime()+n}function Gh(t){return fW({timestamp:LW(t)})}function Fb(t,e,n,i,r){t.dataUpdateCount++;const o=new Ye(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;let l=[];if(r)if(i){const h=Wu(n,d=>Ct(d));l=oW(t.serverSyncTree_,o,h,r)}else{const h=Ct(n);l=oC(t.serverSyncTree_,o,h,r)}else if(i){const h=Wu(n,d=>Ct(d));l=iW(t.serverSyncTree_,o,h)}else{const h=Ct(n);l=Kl(t.serverSyncTree_,o,h)}let u=o;l.length>0&&(u=Ko(t,o)),Yn(t.eventQueue_,u,l)}function Ub(t,e){Lg(t,"connected",e),e===!1&&FW(t)}function kW(t,e){Vt(e,(n,i)=>{Lg(t,n,i)})}function Lg(t,e,n){const i=new Ye("/.info/"+e),r=Ct(n);t.infoData_.updateSnapshot(i,r);const o=Kl(t.infoSyncTree_,i,r);Yn(t.eventQueue_,i,o)}function kg(t){return t.nextWriteId_++}function PW(t,e,n){const i=aW(t.serverSyncTree_,e);return i!=null?Promise.resolve(i):t.server_.get(e).then(r=>{const o=Ct(r).withIndex(e._queryParams.getIndex());c_(t.serverSyncTree_,e,n,!0);let l;if(e._queryParams.loadsAllData())l=Kl(t.serverSyncTree_,e._path,o);else{const u=Sl(t.serverSyncTree_,e);l=oC(t.serverSyncTree_,e._path,o,u)}return Yn(t.eventQueue_,e._path,l),rh(t.serverSyncTree_,e,n,null,!0),o},r=>(zl(t,"get for query "+It(e)+" failed: "+r),Promise.reject(new Error(r))))}function MW(t,e,n,i,r){zl(t,"set",{path:e.toString(),value:n,priority:i});const o=Gh(t),l=Ct(n,i),u=Tg(t.serverSyncTree_,e),h=hC(l,u,o),d=kg(t),p=sC(t.serverSyncTree_,e,h,d,!0);Kh(t.eventQueue_,p),t.server_.put(e.toString(),l.val(!0),(y,b)=>{const S=y==="ok";S||un("set at "+e+" failed: "+y);const N=kr(t.serverSyncTree_,d,!S);Yn(t.eventQueue_,e,N),h_(t,r,y,b)});const g=Mg(t,e);Ko(t,g),Yn(t.eventQueue_,g,[])}function $W(t,e,n,i){zl(t,"update",{path:e.toString(),value:n});let r=!0;const o=Gh(t),l={};if(Vt(n,(u,h)=>{r=!1,l[u]=uC(dt(e,u),Ct(h),t.serverSyncTree_,o)}),r)Bt("update() called with empty data.  Don't do anything."),h_(t,i,"ok",void 0);else{const u=kg(t),h=nW(t.serverSyncTree_,e,l,u);Kh(t.eventQueue_,h),t.server_.merge(e.toString(),n,(d,p)=>{const g=d==="ok";g||un("update at "+e+" failed: "+d);const y=kr(t.serverSyncTree_,u,!g),b=y.length>0?Ko(t,e):e;Yn(t.eventQueue_,b,y),h_(t,i,d,p)}),Vt(n,d=>{const p=Mg(t,dt(e,d));Ko(t,p)}),Yn(t.eventQueue_,e,[])}}function FW(t){zl(t,"onDisconnectEvents");const e=Gh(t),n=Xu();i_(t.onDisconnect_,Be(),(r,o)=>{const l=uC(r,o,t.serverSyncTree_,e);j0(n,r,l)});let i=[];i_(n,Be(),(r,o)=>{i=i.concat(Kl(t.serverSyncTree_,r,o));const l=Mg(t,r);Ko(t,l)}),t.onDisconnect_=Xu(),Yn(t.eventQueue_,Be(),i)}function UW(t,e,n){let i;Ne(e._path)===".info"?i=c_(t.infoSyncTree_,e,n):i=c_(t.serverSyncTree_,e,n),vC(t.eventQueue_,e._path,i)}function Bb(t,e,n){let i;Ne(e._path)===".info"?i=rh(t.infoSyncTree_,e,n):i=rh(t.serverSyncTree_,e,n),vC(t.eventQueue_,e._path,i)}function BW(t){t.persistentConnection_&&t.persistentConnection_.interrupt(NW)}function zl(t,...e){let n="";t.persistentConnection_&&(n=t.persistentConnection_.id+":"),Bt(n,...e)}function h_(t,e,n,i){e&&sa(()=>{if(n==="ok")e(null);else{const r=(n||"error").toUpperCase();let o=r;i&&(o+=": "+i);const l=new Error(o);l.code=r,e(l)}})}function EC(t,e,n){return Tg(t.serverSyncTree_,e,n)||fe.EMPTY_NODE}function Pg(t,e=t.transactionQueueTree_){if(e||zh(t,e),aa(e)){const n=wC(t,e);K(n.length>0,"Sending zero length transaction queue"),n.every(r=>r.status===0)&&WW(t,Gl(e),n)}else dC(e)&&jh(e,n=>{Pg(t,n)})}function WW(t,e,n){const i=n.map(d=>d.currentWriteId),r=EC(t,e,i);let o=r;const l=r.hash();for(let d=0;d<n.length;d++){const p=n[d];K(p.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),p.status=1,p.retryCount++;const g=ln(e,p.path);o=o.updateChild(g,p.currentOutputSnapshotRaw)}const u=o.val(!0),h=e;t.server_.put(h.toString(),u,d=>{zl(t,"transaction put response",{path:h.toString(),status:d});let p=[];if(d==="ok"){const g=[];for(let y=0;y<n.length;y++)n[y].status=2,p=p.concat(kr(t.serverSyncTree_,n[y].currentWriteId)),n[y].onComplete&&g.push(()=>n[y].onComplete(null,!0,n[y].currentOutputSnapshotResolved)),n[y].unwatcher();zh(t,xg(t.transactionQueueTree_,e)),Pg(t,t.transactionQueueTree_),Yn(t.eventQueue_,e,p);for(let y=0;y<g.length;y++)sa(g[y])}else{if(d==="datastale")for(let g=0;g<n.length;g++)n[g].status===3?n[g].status=4:n[g].status=0;else{un("transaction at "+h.toString()+" failed: "+d);for(let g=0;g<n.length;g++)n[g].status=4,n[g].abortReason=d}Ko(t,e)}},l)}function Ko(t,e){const n=bC(t,e),i=Gl(n),r=wC(t,n);return HW(t,r,i),i}function HW(t,e,n){if(e.length===0)return;const i=[];let r=[];const l=e.filter(u=>u.status===0).map(u=>u.currentWriteId);for(let u=0;u<e.length;u++){const h=e[u],d=ln(n,h.path);let p=!1,g;if(K(d!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),h.status===4)p=!0,g=h.abortReason,r=r.concat(kr(t.serverSyncTree_,h.currentWriteId,!0));else if(h.status===0)if(h.retryCount>=RW)p=!0,g="maxretry",r=r.concat(kr(t.serverSyncTree_,h.currentWriteId,!0));else{const y=EC(t,h.path,l);h.currentInputSnapshot=y;const b=e[u].update(y.val());if(b!==void 0){qh("transaction failed: Data returned ",b,h.path);let S=Ct(b);typeof b=="object"&&b!=null&&Ui(b,".priority")||(S=S.updatePriority(y.getPriority()));const P=h.currentWriteId,G=Gh(t),oe=hC(S,y,G);h.currentOutputSnapshotRaw=S,h.currentOutputSnapshotResolved=oe,h.currentWriteId=kg(t),l.splice(l.indexOf(P),1),r=r.concat(sC(t.serverSyncTree_,h.path,oe,h.currentWriteId,h.applyLocally)),r=r.concat(kr(t.serverSyncTree_,P,!0))}else p=!0,g="nodata",r=r.concat(kr(t.serverSyncTree_,h.currentWriteId,!0))}Yn(t.eventQueue_,n,r),r=[],p&&(e[u].status=2,function(y){setTimeout(y,Math.floor(0))}(e[u].unwatcher),e[u].onComplete&&(g==="nodata"?i.push(()=>e[u].onComplete(null,!1,e[u].currentInputSnapshot)):i.push(()=>e[u].onComplete(new Error(g),!1,null))))}zh(t,t.transactionQueueTree_);for(let u=0;u<i.length;u++)sa(i[u]);Pg(t,t.transactionQueueTree_)}function bC(t,e){let n,i=t.transactionQueueTree_;for(n=Ne(e);n!==null&&aa(i)===void 0;)i=xg(i,n),e=tt(e),n=Ne(e);return i}function wC(t,e){const n=[];return TC(t,e,n),n.sort((i,r)=>i.order-r.order),n}function TC(t,e,n){const i=aa(e);if(i)for(let r=0;r<i.length;r++)n.push(i[r]);jh(e,r=>{TC(t,r,n)})}function zh(t,e){const n=aa(e);if(n){let i=0;for(let r=0;r<n.length;r++)n[r].status!==2&&(n[i]=n[r],i++);n.length=i,fC(e,n.length>0?n:void 0)}jh(e,i=>{zh(t,i)})}function Mg(t,e){const n=Gl(bC(t,e)),i=xg(t.transactionQueueTree_,e);return gW(i,r=>{ip(t,r)}),ip(t,i),pC(i,r=>{ip(t,r)}),n}function ip(t,e){const n=aa(e);if(n){const i=[];let r=[],o=-1;for(let l=0;l<n.length;l++)n[l].status===3||(n[l].status===1?(K(o===l-1,"All SENT items should be at beginning of queue."),o=l,n[l].status=3,n[l].abortReason="set"):(K(n[l].status===0,"Unexpected transaction status in abort"),n[l].unwatcher(),r=r.concat(kr(t.serverSyncTree_,n[l].currentWriteId,!0)),n[l].onComplete&&i.push(n[l].onComplete.bind(null,new Error("set"),!1,null))));o===-1?fC(e,void 0):n.length=o+1,Yn(t.eventQueue_,Gl(e),r);for(let l=0;l<i.length;l++)sa(i[l])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VW(t){let e="";const n=t.split("/");for(let i=0;i<n.length;i++)if(n[i].length>0){let r=n[i];try{r=decodeURIComponent(r.replace(/\+/g," "))}catch{}e+="/"+r}return e}function jW(t){const e={};t.charAt(0)==="?"&&(t=t.substring(1));for(const n of t.split("&")){if(n.length===0)continue;const i=n.split("=");i.length===2?e[decodeURIComponent(i[0])]=decodeURIComponent(i[1]):un(`Invalid query segment '${n}' in query '${t}'`)}return e}const Wb=function(t,e){const n=qW(t),i=n.namespace;n.domain==="firebase.com"&&hr(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!i||i==="undefined")&&n.domain!=="localhost"&&hr("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||ZF();const r=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new S0(n.host,n.secure,i,r,e,"",i!==n.subdomain),path:new Ye(n.pathString)}},qW=function(t){let e="",n="",i="",r="",o="",l=!0,u="https",h=443;if(typeof t=="string"){let d=t.indexOf("//");d>=0&&(u=t.substring(0,d-1),t=t.substring(d+2));let p=t.indexOf("/");p===-1&&(p=t.length);let g=t.indexOf("?");g===-1&&(g=t.length),e=t.substring(0,Math.min(p,g)),p<g&&(r=VW(t.substring(p,g)));const y=jW(t.substring(Math.min(t.length,g)));d=e.indexOf(":"),d>=0?(l=u==="https"||u==="wss",h=parseInt(e.substring(d+1),10)):d=e.length;const b=e.slice(0,d);if(b.toLowerCase()==="localhost")n="localhost";else if(b.split(".").length<=2)n=b;else{const S=e.indexOf(".");i=e.substring(0,S).toLowerCase(),n=e.substring(S+1),o=i}"ns"in y&&(o=y.ns)}return{host:e,port:h,domain:n,subdomain:i,secure:l,scheme:u,pathString:r,namespace:o}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CC{constructor(e,n,i,r){this.eventType=e,this.eventRegistration=n,this.snapshot=i,this.prevName=r}getPath(){const e=this.snapshot.ref;return this.eventType==="value"?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+It(this.snapshot.exportVal())}}class IC{constructor(e,n,i){this.eventRegistration=e,this.error=n,this.path=i}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AC{constructor(e,n){this.snapshotCallback=e,this.cancelCallback=n}onValue(e,n){this.snapshotCallback.call(null,e,n)}onCancel(e){return K(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $g{constructor(e,n,i,r){this._repo=e,this._path=n,this._queryParams=i,this._orderByCalled=r}get key(){return De(this._path)?null:ug(this._path)}get ref(){return new Wi(this._repo,this._path)}get _queryIdentifier(){const e=Ab(this._queryParams),n=og(e);return n==="{}"?"default":n}get _queryObject(){return Ab(this._queryParams)}isEqual(e){if(e=Bi(e),!(e instanceof $g))return!1;const n=this._repo===e._repo,i=hg(this._path,e._path),r=this._queryIdentifier===e._queryIdentifier;return n&&i&&r}toJSON(){return this.toString()}toString(){return this._repo.toString()+MU(this._path)}}class Wi extends $g{constructor(e,n){super(e,n,new _g,!1)}get parent(){const e=M0(this._path);return e===null?null:new Wi(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}}class Go{constructor(e,n,i){this._node=e,this.ref=n,this._index=i}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const n=new Ye(e),i=Et(this.ref,e);return new Go(this._node.getChild(n),i,pt)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(i,r)=>e(new Go(r,Et(this.ref,i),pt)))}hasChild(e){const n=new Ye(e);return!this._node.getChild(n).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function ai(t,e){return t=Bi(t),t._checkNotDeleted("ref"),e!==void 0?Et(t._root,e):t._root}function Et(t,e){return t=Bi(t),Ne(t._path)===null?IW("child","path",e,!1):gC("child","path",e,!1),new Wi(t._repo,dt(t._path,e))}function Ls(t){return mC("remove",t._path),fr(t,null)}function fr(t,e){t=Bi(t),mC("set",t._path),wW("set",e,t._path,!1);const n=new $s;return MW(t._repo,t._path,e,null,n.wrapCallback(()=>{})),n.promise}function Su(t,e){CW("update",e,t._path,!1);const n=new $s;return $W(t._repo,t._path,e,n.wrapCallback(()=>{})),n.promise}function SC(t){t=Bi(t);const e=new AC(()=>{}),n=new Yh(e);return PW(t._repo,t,n).then(i=>new Go(i,new Wi(t._repo,t._path),t._queryParams.getIndex()))}class Yh{constructor(e){this.callbackContext=e}respondsTo(e){return e==="value"}createEvent(e,n){const i=n._queryParams.getIndex();return new CC("value",this,new Go(e.snapshotNode,new Wi(n._repo,n._path),i))}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,n){return this.callbackContext.hasCancelCallback?new IC(this,e,n):null}matches(e){return e instanceof Yh?!e.callbackContext||!this.callbackContext?!0:e.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}}class Fg{constructor(e,n){this.eventType=e,this.callbackContext=n}respondsTo(e){let n=e==="children_added"?"child_added":e;return n=n==="children_removed"?"child_removed":n,this.eventType===n}createCancelEvent(e,n){return this.callbackContext.hasCancelCallback?new IC(this,e,n):null}createEvent(e,n){K(e.childName!=null,"Child events should have a childName.");const i=Et(new Wi(n._repo,n._path),e.childName),r=n._queryParams.getIndex();return new CC(e.type,this,new Go(e.snapshotNode,i,r),e.prevName)}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof Fg?this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext)):!1}hasAnyCallback(){return!!this.callbackContext}}function KW(t,e,n,i,r){let o;if(typeof i=="object"&&(o=void 0,r=i),typeof i=="function"&&(o=i),r&&r.onlyOnce){const h=n,d=(p,g)=>{Bb(t._repo,t,u),h(p,g)};d.userCallback=n.userCallback,d.context=n.context,n=d}const l=new AC(n,o||void 0),u=e==="value"?new Yh(l):new Fg(e,l);return UW(t._repo,t,u),()=>Bb(t._repo,t,u)}function GW(t,e,n,i){return KW(t,"value",e,n,i)}zB(Wi);ZB(Wi);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zW="FIREBASE_DATABASE_EMULATOR_HOST",f_={};let YW=!1;function XW(t,e,n,i){t.repoInfo_=new S0(`${e}:${n}`,!1,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams),i&&(t.authTokenProvider_=i)}function QW(t,e,n,i,r){let o=i||t.options.databaseURL;o===void 0&&(t.options.projectId||hr("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Bt("Using default host for project ",t.options.projectId),o=`${t.options.projectId}-default-rtdb.firebaseio.com`);let l=Wb(o,r),u=l.repoInfo,h,d;typeof process<"u"&&process.env&&(d=process.env[zW]),d?(h=!0,o=`http://${d}?ns=${u.namespace}`,l=Wb(o,r),u=l.repoInfo):h=!l.repoInfo.secure;const p=r&&h?new Lo(Lo.OWNER):new uU(t.name,t.options,e);AW("Invalid Firebase Database URL",l),De(l.path)||hr("Database URL must point to the root of a Firebase Database (not including a child path).");const g=ZW(u,t,p,new cU(t.name,n));return new eH(g,t)}function JW(t,e){const n=f_[e];(!n||n[t.key]!==t)&&hr(`Database ${e}(${t.repoInfo_}) has already been deleted.`),BW(t),delete n[t.key]}function ZW(t,e,n,i){let r=f_[e.name];r||(r={},f_[e.name]=r);let o=r[t.toURLString()];return o&&hr("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),o=new xW(t,YW,n,i),r[t.toURLString()]=o,o}class eH{constructor(e,n){this._repoInternal=e,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(DW(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Wi(this._repo,Be())),this._rootInternal}_delete(){return this._rootInternal!==null&&(JW(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&hr("Cannot call "+e+" on a deleted database.")}}function OC(t=x$(),e){const n=O$(t,"database").getImmediate({identifier:e}),i=EM("database");return i&&tH(n,...i),n}function tH(t,e,n,i={}){t=Bi(t),t._checkNotDeleted("useEmulator"),t._instanceStarted&&hr("Cannot call useEmulator() after instance has already been initialized.");const r=t._repoInternal;let o;if(r.repoInfo_.nodeAdmin)i.mockUserToken&&hr('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),o=new Lo(Lo.OWNER);else if(i.mockUserToken){const l=typeof i.mockUserToken=="string"?i.mockUserToken:TM(i.mockUserToken,t.app.options.projectId);o=new Lo(l)}XW(r,e,n,o)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nH(t){zF(Wl),Mi(new di("database",(e,{instanceIdentifier:n})=>{const i=e.getProvider("app").getImmediate(),r=e.getProvider("auth-internal"),o=e.getProvider("app-check-internal");return QW(i,r,o,n)},"PUBLIC").setMultipleInstances(!0)),Rn(cb,ub,t),Rn(cb,ub,"esm2017")}or.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)};or.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};nH();var iH=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},re,Ug=Ug||{},ge=iH||self;function sh(){}function Xh(t){var e=typeof t;return e=e!="object"?e:t?Array.isArray(t)?"array":e:"null",e=="array"||e=="object"&&typeof t.length=="number"}function Yl(t){var e=typeof t;return e=="object"&&t!=null||e=="function"}function rH(t){return Object.prototype.hasOwnProperty.call(t,rp)&&t[rp]||(t[rp]=++sH)}var rp="closure_uid_"+(1e9*Math.random()>>>0),sH=0;function oH(t,e,n){return t.call.apply(t.bind,arguments)}function aH(t,e,n){if(!t)throw Error();if(2<arguments.length){var i=Array.prototype.slice.call(arguments,2);return function(){var r=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(r,i),t.apply(e,r)}}return function(){return t.apply(e,arguments)}}function Zt(t,e,n){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?Zt=oH:Zt=aH,Zt.apply(null,arguments)}function cu(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var i=n.slice();return i.push.apply(i,arguments),t.apply(this,i)}}function jt(t,e){function n(){}n.prototype=e.prototype,t.X=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.Wb=function(i,r,o){for(var l=Array(arguments.length-2),u=2;u<arguments.length;u++)l[u-2]=arguments[u];return e.prototype[r].apply(i,l)}}function Qr(){this.s=this.s,this.o=this.o}var lH=0;Qr.prototype.s=!1;Qr.prototype.na=function(){!this.s&&(this.s=!0,this.M(),lH!=0)&&rH(this)};Qr.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const NC=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if(typeof t=="string")return typeof e!="string"||e.length!=1?-1:t.indexOf(e,0);for(let n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1};function Bg(t){const e=t.length;if(0<e){const n=Array(e);for(let i=0;i<e;i++)n[i]=t[i];return n}return[]}function Hb(t,e){for(let n=1;n<arguments.length;n++){const i=arguments[n];if(Xh(i)){const r=t.length||0,o=i.length||0;t.length=r+o;for(let l=0;l<o;l++)t[r+l]=i[l]}else t.push(i)}}function en(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}en.prototype.h=function(){this.defaultPrevented=!0};var cH=function(){if(!ge.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{ge.addEventListener("test",sh,e),ge.removeEventListener("test",sh,e)}catch{}return t}();function oh(t){return/^[\s\xa0]*$/.test(t)}var Vb=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function sp(t,e){return t<e?-1:t>e?1:0}function Qh(){var t=ge.navigator;return t&&(t=t.userAgent)?t:""}function Ai(t){return Qh().indexOf(t)!=-1}function Wg(t){return Wg[" "](t),t}Wg[" "]=sh;function uH(t){var e=dH;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=t(9)}var hH=Ai("Opera"),Ol=Ai("Trident")||Ai("MSIE"),RC=Ai("Edge"),d_=RC||Ol,xC=Ai("Gecko")&&!(Qh().toLowerCase().indexOf("webkit")!=-1&&!Ai("Edge"))&&!(Ai("Trident")||Ai("MSIE"))&&!Ai("Edge"),fH=Qh().toLowerCase().indexOf("webkit")!=-1&&!Ai("Edge");function DC(){var t=ge.document;return t?t.documentMode:void 0}var p_;e:{var op="",ap=function(){var t=Qh();if(xC)return/rv:([^\);]+)(\)|;)/.exec(t);if(RC)return/Edge\/([\d\.]+)/.exec(t);if(Ol)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t);if(fH)return/WebKit\/(\S+)/.exec(t);if(hH)return/(?:Version)[ \/]?(\S+)/.exec(t)}();if(ap&&(op=ap?ap[1]:""),Ol){var lp=DC();if(lp!=null&&lp>parseFloat(op)){p_=String(lp);break e}}p_=op}var dH={};function pH(){return uH(function(){let t=0;const e=Vb(String(p_)).split("."),n=Vb("9").split("."),i=Math.max(e.length,n.length);for(let l=0;t==0&&l<i;l++){var r=e[l]||"",o=n[l]||"";do{if(r=/(\d*)(\D*)(.*)/.exec(r)||["","","",""],o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],r[0].length==0&&o[0].length==0)break;t=sp(r[1].length==0?0:parseInt(r[1],10),o[1].length==0?0:parseInt(o[1],10))||sp(r[2].length==0,o[2].length==0)||sp(r[2],o[2]),r=r[3],o=o[3]}while(t==0)}return 0<=t})}ge.document&&Ol&&DC();function Nl(t,e){if(en.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,i=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(xC){e:{try{Wg(e.nodeName);var r=!0;break e}catch{}r=!1}r||(e=null)}}else n=="mouseover"?e=t.fromElement:n=="mouseout"&&(e=t.toElement);this.relatedTarget=e,i?(this.clientX=i.clientX!==void 0?i.clientX:i.pageX,this.clientY=i.clientY!==void 0?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0):(this.clientX=t.clientX!==void 0?t.clientX:t.pageX,this.clientY=t.clientY!==void 0?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType=typeof t.pointerType=="string"?t.pointerType:_H[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&Nl.X.h.call(this)}}jt(Nl,en);var _H={2:"touch",3:"pen",4:"mouse"};Nl.prototype.h=function(){Nl.X.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var Xl="closure_listenable_"+(1e6*Math.random()|0),gH=0;function mH(t,e,n,i,r){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!i,this.ha=r,this.key=++gH,this.ba=this.ea=!1}function Jh(t){t.ba=!0,t.listener=null,t.proxy=null,t.src=null,t.ha=null}function Hg(t,e,n){for(const i in t)e.call(n,t[i],i,t)}function LC(t){const e={};for(const n in t)e[n]=t[n];return e}const jb="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function kC(t,e){let n,i;for(let r=1;r<arguments.length;r++){i=arguments[r];for(n in i)t[n]=i[n];for(let o=0;o<jb.length;o++)n=jb[o],Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}}function Zh(t){this.src=t,this.g={},this.h=0}Zh.prototype.add=function(t,e,n,i,r){var o=t.toString();t=this.g[o],t||(t=this.g[o]=[],this.h++);var l=g_(t,e,i,r);return-1<l?(e=t[l],n||(e.ea=!1)):(e=new mH(e,this.src,o,!!i,r),e.ea=n,t.push(e)),e};function __(t,e){var n=e.type;if(n in t.g){var i=t.g[n],r=NC(i,e),o;(o=0<=r)&&Array.prototype.splice.call(i,r,1),o&&(Jh(e),t.g[n].length==0&&(delete t.g[n],t.h--))}}function g_(t,e,n,i){for(var r=0;r<t.length;++r){var o=t[r];if(!o.ba&&o.listener==e&&o.capture==!!n&&o.ha==i)return r}return-1}var Vg="closure_lm_"+(1e6*Math.random()|0),cp={};function PC(t,e,n,i,r){if(i&&i.once)return $C(t,e,n,i,r);if(Array.isArray(e)){for(var o=0;o<e.length;o++)PC(t,e[o],n,i,r);return null}return n=Kg(n),t&&t[Xl]?t.N(e,n,Yl(i)?!!i.capture:!!i,r):MC(t,e,n,!1,i,r)}function MC(t,e,n,i,r,o){if(!e)throw Error("Invalid event type");var l=Yl(r)?!!r.capture:!!r,u=qg(t);if(u||(t[Vg]=u=new Zh(t)),n=u.add(e,n,i,l,o),n.proxy)return n;if(i=vH(),n.proxy=i,i.src=t,i.listener=n,t.addEventListener)cH||(r=l),r===void 0&&(r=!1),t.addEventListener(e.toString(),i,r);else if(t.attachEvent)t.attachEvent(UC(e.toString()),i);else if(t.addListener&&t.removeListener)t.addListener(i);else throw Error("addEventListener and attachEvent are unavailable.");return n}function vH(){function t(n){return e.call(t.src,t.listener,n)}const e=yH;return t}function $C(t,e,n,i,r){if(Array.isArray(e)){for(var o=0;o<e.length;o++)$C(t,e[o],n,i,r);return null}return n=Kg(n),t&&t[Xl]?t.O(e,n,Yl(i)?!!i.capture:!!i,r):MC(t,e,n,!0,i,r)}function FC(t,e,n,i,r){if(Array.isArray(e))for(var o=0;o<e.length;o++)FC(t,e[o],n,i,r);else i=Yl(i)?!!i.capture:!!i,n=Kg(n),t&&t[Xl]?(t=t.i,e=String(e).toString(),e in t.g&&(o=t.g[e],n=g_(o,n,i,r),-1<n&&(Jh(o[n]),Array.prototype.splice.call(o,n,1),o.length==0&&(delete t.g[e],t.h--)))):t&&(t=qg(t))&&(e=t.g[e.toString()],t=-1,e&&(t=g_(e,n,i,r)),(n=-1<t?e[t]:null)&&jg(n))}function jg(t){if(typeof t!="number"&&t&&!t.ba){var e=t.src;if(e&&e[Xl])__(e.i,t);else{var n=t.type,i=t.proxy;e.removeEventListener?e.removeEventListener(n,i,t.capture):e.detachEvent?e.detachEvent(UC(n),i):e.addListener&&e.removeListener&&e.removeListener(i),(n=qg(e))?(__(n,t),n.h==0&&(n.src=null,e[Vg]=null)):Jh(t)}}}function UC(t){return t in cp?cp[t]:cp[t]="on"+t}function yH(t,e){if(t.ba)t=!0;else{e=new Nl(e,this);var n=t.listener,i=t.ha||t.src;t.ea&&jg(t),t=n.call(i,e)}return t}function qg(t){return t=t[Vg],t instanceof Zh?t:null}var up="__closure_events_fn_"+(1e9*Math.random()>>>0);function Kg(t){return typeof t=="function"?t:(t[up]||(t[up]=function(e){return t.handleEvent(e)}),t[up])}function Lt(){Qr.call(this),this.i=new Zh(this),this.P=this,this.I=null}jt(Lt,Qr);Lt.prototype[Xl]=!0;Lt.prototype.removeEventListener=function(t,e,n,i){FC(this,t,e,n,i)};function Ht(t,e){var n,i=t.I;if(i)for(n=[];i;i=i.I)n.push(i);if(t=t.P,i=e.type||e,typeof e=="string")e=new en(e,t);else if(e instanceof en)e.target=e.target||t;else{var r=e;e=new en(i,t),kC(e,r)}if(r=!0,n)for(var o=n.length-1;0<=o;o--){var l=e.g=n[o];r=uu(l,i,!0,e)&&r}if(l=e.g=t,r=uu(l,i,!0,e)&&r,r=uu(l,i,!1,e)&&r,n)for(o=0;o<n.length;o++)l=e.g=n[o],r=uu(l,i,!1,e)&&r}Lt.prototype.M=function(){if(Lt.X.M.call(this),this.i){var t=this.i,e;for(e in t.g){for(var n=t.g[e],i=0;i<n.length;i++)Jh(n[i]);delete t.g[e],t.h--}}this.I=null};Lt.prototype.N=function(t,e,n,i){return this.i.add(String(t),e,!1,n,i)};Lt.prototype.O=function(t,e,n,i){return this.i.add(String(t),e,!0,n,i)};function uu(t,e,n,i){if(e=t.i.g[String(e)],!e)return!0;e=e.concat();for(var r=!0,o=0;o<e.length;++o){var l=e[o];if(l&&!l.ba&&l.capture==n){var u=l.listener,h=l.ha||l.src;l.ea&&__(t.i,l),r=u.call(h,i)!==!1&&r}}return r&&!i.defaultPrevented}var Gg=ge.JSON.stringify;function EH(){var t=HC;let e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}class bH{constructor(){this.h=this.g=null}add(e,n){const i=BC.get();i.set(e,n),this.h?this.h.next=i:this.g=i,this.h=i}}var BC=new class{constructor(t,e){this.i=t,this.j=e,this.h=0,this.g=null}get(){let t;return 0<this.h?(this.h--,t=this.g,this.g=t.next,t.next=null):t=this.i(),t}}(()=>new wH,t=>t.reset());class wH{constructor(){this.next=this.g=this.h=null}set(e,n){this.h=e,this.g=n,this.next=null}reset(){this.next=this.g=this.h=null}}function TH(t){ge.setTimeout(()=>{throw t},0)}function WC(t,e){m_||CH(),v_||(m_(),v_=!0),HC.add(t,e)}var m_;function CH(){var t=ge.Promise.resolve(void 0);m_=function(){t.then(IH)}}var v_=!1,HC=new bH;function IH(){for(var t;t=EH();){try{t.h.call(t.g)}catch(n){TH(n)}var e=BC;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}v_=!1}function ef(t,e){Lt.call(this),this.h=t||1,this.g=e||ge,this.j=Zt(this.lb,this),this.l=Date.now()}jt(ef,Lt);re=ef.prototype;re.ca=!1;re.R=null;re.lb=function(){if(this.ca){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.R=this.g.setTimeout(this.j,this.h-t):(this.R&&(this.g.clearTimeout(this.R),this.R=null),Ht(this,"tick"),this.ca&&(zg(this),this.start()))}};re.start=function(){this.ca=!0,this.R||(this.R=this.g.setTimeout(this.j,this.h),this.l=Date.now())};function zg(t){t.ca=!1,t.R&&(t.g.clearTimeout(t.R),t.R=null)}re.M=function(){ef.X.M.call(this),zg(this),delete this.g};function Yg(t,e,n){if(typeof t=="function")n&&(t=Zt(t,n));else if(t&&typeof t.handleEvent=="function")t=Zt(t.handleEvent,t);else throw Error("Invalid listener argument");return 2147483647<Number(e)?-1:ge.setTimeout(t,e||0)}function VC(t){t.g=Yg(()=>{t.g=null,t.i&&(t.i=!1,VC(t))},t.j);const e=t.h;t.h=null,t.m.apply(null,e)}class AH extends Qr{constructor(e,n){super(),this.m=e,this.j=n,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:VC(this)}M(){super.M(),this.g&&(ge.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Rl(t){Qr.call(this),this.h=t,this.g={}}jt(Rl,Qr);var qb=[];function jC(t,e,n,i){Array.isArray(n)||(n&&(qb[0]=n.toString()),n=qb);for(var r=0;r<n.length;r++){var o=PC(e,n[r],i||t.handleEvent,!1,t.h||t);if(!o)break;t.g[o.key]=o}}function qC(t){Hg(t.g,function(e,n){this.g.hasOwnProperty(n)&&jg(e)},t),t.g={}}Rl.prototype.M=function(){Rl.X.M.call(this),qC(this)};Rl.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};function tf(){this.g=!0}tf.prototype.Aa=function(){this.g=!1};function SH(t,e,n,i,r,o){t.info(function(){if(t.g)if(o)for(var l="",u=o.split("&"),h=0;h<u.length;h++){var d=u[h].split("=");if(1<d.length){var p=d[0];d=d[1];var g=p.split("_");l=2<=g.length&&g[1]=="type"?l+(p+"="+d+"&"):l+(p+"=redacted&")}}else l=null;else l=o;return"XMLHTTP REQ ("+i+") [attempt "+r+"]: "+e+`
`+n+`
`+l})}function OH(t,e,n,i,r,o,l){t.info(function(){return"XMLHTTP RESP ("+i+") [ attempt "+r+"]: "+e+`
`+n+`
`+o+" "+l})}function Co(t,e,n,i){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+RH(t,n)+(i?" "+i:"")})}function NH(t,e){t.info(function(){return"TIMEOUT: "+e})}tf.prototype.info=function(){};function RH(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n){for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var i=n[t];if(!(2>i.length)){var r=i[1];if(Array.isArray(r)&&!(1>r.length)){var o=r[0];if(o!="noop"&&o!="stop"&&o!="close")for(var l=1;l<r.length;l++)r[l]=""}}}}return Gg(n)}catch{return e}}var la={},Kb=null;function Xg(){return Kb=Kb||new Lt}la.Pa="serverreachability";function KC(t){en.call(this,la.Pa,t)}jt(KC,en);function xl(t){const e=Xg();Ht(e,new KC(e))}la.STAT_EVENT="statevent";function GC(t,e){en.call(this,la.STAT_EVENT,t),this.stat=e}jt(GC,en);function cn(t){const e=Xg();Ht(e,new GC(e,t))}la.Qa="timingevent";function zC(t,e){en.call(this,la.Qa,t),this.size=e}jt(zC,en);function Ql(t,e){if(typeof t!="function")throw Error("Fn must not be null and must be a function");return ge.setTimeout(function(){t()},e)}var Qg={NO_ERROR:0,mb:1,zb:2,yb:3,tb:4,xb:5,Ab:6,Ma:7,TIMEOUT:8,Db:9},xH={rb:"complete",Nb:"success",Na:"error",Ma:"abort",Fb:"ready",Gb:"readystatechange",TIMEOUT:"timeout",Bb:"incrementaldata",Eb:"progress",ub:"downloadprogress",Vb:"uploadprogress"};function Jg(){}Jg.prototype.h=null;function Gb(t){return t.h||(t.h=t.i())}function DH(){}var Jl={OPEN:"a",qb:"b",Na:"c",Cb:"d"};function Zg(){en.call(this,"d")}jt(Zg,en);function em(){en.call(this,"c")}jt(em,en);var y_;function nf(){}jt(nf,Jg);nf.prototype.g=function(){return new XMLHttpRequest};nf.prototype.i=function(){return{}};y_=new nf;function Zl(t,e,n,i){this.l=t,this.j=e,this.m=n,this.U=i||1,this.S=new Rl(this),this.O=LH,t=d_?125:void 0,this.T=new ef(t),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.V=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.Y=-1,this.I=!1,this.N=0,this.L=null,this.$=this.J=this.Z=this.P=!1,this.h=new YC}function YC(){this.i=null,this.g="",this.h=!1}var LH=45e3,E_={},ah={};re=Zl.prototype;re.setTimeout=function(t){this.O=t};function b_(t,e,n){t.K=1,t.v=sf(dr(e)),t.s=n,t.P=!0,XC(t,null)}function XC(t,e){t.F=Date.now(),ec(t),t.A=dr(t.v);var n=t.A,i=t.U;Array.isArray(i)||(i=[String(i)]),rI(n.i,"t",i),t.C=0,n=t.l.H,t.h=new YC,t.g=II(t.l,n?e:null,!t.s),0<t.N&&(t.L=new AH(Zt(t.La,t,t.g),t.N)),jC(t.S,t.g,"readystatechange",t.ib),e=t.H?LC(t.H):{},t.s?(t.u||(t.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.da(t.A,t.u,t.s,e)):(t.u="GET",t.g.da(t.A,t.u,null,e)),xl(),SH(t.j,t.u,t.A,t.m,t.U,t.s)}re.ib=function(t){t=t.target;const e=this.L;e&&rr(t)==3?e.l():this.La(t)};re.La=function(t){try{if(t==this.g)e:{const p=rr(this.g);var e=this.g.Ea();const g=this.g.aa();if(!(3>p)&&(p!=3||d_||this.g&&(this.h.h||this.g.fa()||Qb(this.g)))){this.I||p!=4||e==7||(e==8||0>=g?xl(3):xl(2)),rf(this);var n=this.g.aa();this.Y=n;t:if(QC(this)){var i=Qb(this.g);t="";var r=i.length,o=rr(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Is(this),al(this);var l="";break t}this.h.i=new ge.TextDecoder}for(e=0;e<r;e++)this.h.h=!0,t+=this.h.i.decode(i[e],{stream:o&&e==r-1});i.splice(0,r),this.h.g+=t,this.C=0,l=this.h.g}else l=this.g.fa();if(this.i=n==200,OH(this.j,this.u,this.A,this.m,this.U,p,n),this.i){if(this.Z&&!this.J){t:{if(this.g){var u,h=this.g;if((u=h.g?h.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!oh(u)){var d=u;break t}}d=null}if(n=d)Co(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,w_(this,n);else{this.i=!1,this.o=3,cn(12),Is(this),al(this);break e}}this.P?(JC(this,p,l),d_&&this.i&&p==3&&(jC(this.S,this.T,"tick",this.hb),this.T.start())):(Co(this.j,this.m,l,null),w_(this,l)),p==4&&Is(this),this.i&&!this.I&&(p==4?bI(this.l,this):(this.i=!1,ec(this)))}else n==400&&0<l.indexOf("Unknown SID")?(this.o=3,cn(12)):(this.o=0,cn(13)),Is(this),al(this)}}}catch{}finally{}};function QC(t){return t.g?t.u=="GET"&&t.K!=2&&t.l.Da:!1}function JC(t,e,n){let i=!0,r;for(;!t.I&&t.C<n.length;)if(r=kH(t,n),r==ah){e==4&&(t.o=4,cn(14),i=!1),Co(t.j,t.m,null,"[Incomplete Response]");break}else if(r==E_){t.o=4,cn(15),Co(t.j,t.m,n,"[Invalid Chunk]"),i=!1;break}else Co(t.j,t.m,r,null),w_(t,r);QC(t)&&r!=ah&&r!=E_&&(t.h.g="",t.C=0),e!=4||n.length!=0||t.h.h||(t.o=1,cn(16),i=!1),t.i=t.i&&i,i?0<n.length&&!t.$&&(t.$=!0,e=t.l,e.g==t&&e.$&&!e.K&&(e.j.info("Great, no buffering proxy detected. Bytes received: "+n.length),am(e),e.K=!0,cn(11))):(Co(t.j,t.m,n,"[Invalid Chunked Response]"),Is(t),al(t))}re.hb=function(){if(this.g){var t=rr(this.g),e=this.g.fa();this.C<e.length&&(rf(this),JC(this,t,e),this.i&&t!=4&&ec(this))}};function kH(t,e){var n=t.C,i=e.indexOf(`
`,n);return i==-1?ah:(n=Number(e.substring(n,i)),isNaN(n)?E_:(i+=1,i+n>e.length?ah:(e=e.substr(i,n),t.C=i+n,e)))}re.cancel=function(){this.I=!0,Is(this)};function ec(t){t.V=Date.now()+t.O,ZC(t,t.O)}function ZC(t,e){if(t.B!=null)throw Error("WatchDog timer not null");t.B=Ql(Zt(t.gb,t),e)}function rf(t){t.B&&(ge.clearTimeout(t.B),t.B=null)}re.gb=function(){this.B=null;const t=Date.now();0<=t-this.V?(NH(this.j,this.A),this.K!=2&&(xl(),cn(17)),Is(this),this.o=2,al(this)):ZC(this,this.V-t)};function al(t){t.l.G==0||t.I||bI(t.l,t)}function Is(t){rf(t);var e=t.L;e&&typeof e.na=="function"&&e.na(),t.L=null,zg(t.T),qC(t.S),t.g&&(e=t.g,t.g=null,e.abort(),e.na())}function w_(t,e){try{var n=t.l;if(n.G!=0&&(n.g==t||T_(n.h,t))){if(!t.J&&T_(n.h,t)&&n.G==3){try{var i=n.Fa.g.parse(e)}catch{i=null}if(Array.isArray(i)&&i.length==3){var r=i;if(r[0]==0){e:if(!n.u){if(n.g)if(n.g.F+3e3<t.F)uh(n),cf(n);else break e;om(n),cn(18)}}else n.Ba=r[1],0<n.Ba-n.T&&37500>r[2]&&n.L&&n.A==0&&!n.v&&(n.v=Ql(Zt(n.cb,n),6e3));if(1>=aI(n.h)&&n.ja){try{n.ja()}catch{}n.ja=void 0}}else As(n,11)}else if((t.J||n.g==t)&&uh(n),!oh(e))for(r=n.Fa.g.parse(e),e=0;e<r.length;e++){let d=r[e];if(n.T=d[0],d=d[1],n.G==2)if(d[0]=="c"){n.I=d[1],n.ka=d[2];const p=d[3];p!=null&&(n.ma=p,n.j.info("VER="+n.ma));const g=d[4];g!=null&&(n.Ca=g,n.j.info("SVER="+n.Ca));const y=d[5];y!=null&&typeof y=="number"&&0<y&&(i=1.5*y,n.J=i,n.j.info("backChannelRequestTimeoutMs_="+i)),i=n;const b=t.g;if(b){const S=b.g?b.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(S){var o=i.h;o.g||S.indexOf("spdy")==-1&&S.indexOf("quic")==-1&&S.indexOf("h2")==-1||(o.j=o.l,o.g=new Set,o.h&&(tm(o,o.h),o.h=null))}if(i.D){const N=b.g?b.g.getResponseHeader("X-HTTP-Session-Id"):null;N&&(i.za=N,ct(i.F,i.D,N))}}n.G=3,n.l&&n.l.xa(),n.$&&(n.P=Date.now()-t.F,n.j.info("Handshake RTT: "+n.P+"ms")),i=n;var l=t;if(i.sa=CI(i,i.H?i.ka:null,i.V),l.J){lI(i.h,l);var u=l,h=i.J;h&&u.setTimeout(h),u.B&&(rf(u),ec(u)),i.g=l}else yI(i);0<n.i.length&&uf(n)}else d[0]!="stop"&&d[0]!="close"||As(n,7);else n.G==3&&(d[0]=="stop"||d[0]=="close"?d[0]=="stop"?As(n,7):sm(n):d[0]!="noop"&&n.l&&n.l.wa(d),n.A=0)}}xl(4)}catch{}}function PH(t){if(t.W&&typeof t.W=="function")return t.W();if(typeof Map<"u"&&t instanceof Map||typeof Set<"u"&&t instanceof Set)return Array.from(t.values());if(typeof t=="string")return t.split("");if(Xh(t)){for(var e=[],n=t.length,i=0;i<n;i++)e.push(t[i]);return e}e=[],n=0;for(i in t)e[n++]=t[i];return e}function MH(t){if(t.oa&&typeof t.oa=="function")return t.oa();if(!t.W||typeof t.W!="function"){if(typeof Map<"u"&&t instanceof Map)return Array.from(t.keys());if(!(typeof Set<"u"&&t instanceof Set)){if(Xh(t)||typeof t=="string"){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}e=[],n=0;for(const i in t)e[n++]=i;return e}}}function eI(t,e){if(t.forEach&&typeof t.forEach=="function")t.forEach(e,void 0);else if(Xh(t)||typeof t=="string")Array.prototype.forEach.call(t,e,void 0);else for(var n=MH(t),i=PH(t),r=i.length,o=0;o<r;o++)e.call(void 0,i[o],n&&n[o],t)}var tI=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function $H(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var i=t[n].indexOf("="),r=null;if(0<=i){var o=t[n].substring(0,i);r=t[n].substring(i+1)}else o=t[n];e(o,r?decodeURIComponent(r.replace(/\+/g," ")):"")}}}function ks(t,e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,t instanceof ks){this.h=e!==void 0?e:t.h,lh(this,t.j),this.s=t.s,this.g=t.g,ch(this,t.m),this.l=t.l,e=t.i;var n=new Dl;n.i=e.i,e.g&&(n.g=new Map(e.g),n.h=e.h),zb(this,n),this.o=t.o}else t&&(n=String(t).match(tI))?(this.h=!!e,lh(this,n[1]||"",!0),this.s=za(n[2]||""),this.g=za(n[3]||"",!0),ch(this,n[4]),this.l=za(n[5]||"",!0),zb(this,n[6]||"",!0),this.o=za(n[7]||"")):(this.h=!!e,this.i=new Dl(null,this.h))}ks.prototype.toString=function(){var t=[],e=this.j;e&&t.push(Ya(e,Yb,!0),":");var n=this.g;return(n||e=="file")&&(t.push("//"),(e=this.s)&&t.push(Ya(e,Yb,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n=this.m,n!=null&&t.push(":",String(n))),(n=this.l)&&(this.g&&n.charAt(0)!="/"&&t.push("/"),t.push(Ya(n,n.charAt(0)=="/"?BH:UH,!0))),(n=this.i.toString())&&t.push("?",n),(n=this.o)&&t.push("#",Ya(n,HH)),t.join("")};function dr(t){return new ks(t)}function lh(t,e,n){t.j=n?za(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function ch(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function zb(t,e,n){e instanceof Dl?(t.i=e,VH(t.i,t.h)):(n||(e=Ya(e,WH)),t.i=new Dl(e,t.h))}function ct(t,e,n){t.i.set(e,n)}function sf(t){return ct(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function za(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Ya(t,e,n){return typeof t=="string"?(t=encodeURI(t).replace(e,FH),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function FH(t){return t=t.charCodeAt(0),"%"+(t>>4&15).toString(16)+(t&15).toString(16)}var Yb=/[#\/\?@]/g,UH=/[#\?:]/g,BH=/[#\?]/g,WH=/[#\?@]/g,HH=/#/g;function Dl(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function Jr(t){t.g||(t.g=new Map,t.h=0,t.i&&$H(t.i,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}re=Dl.prototype;re.add=function(t,e){Jr(this),this.i=null,t=ca(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this};function nI(t,e){Jr(t),e=ca(t,e),t.g.has(e)&&(t.i=null,t.h-=t.g.get(e).length,t.g.delete(e))}function iI(t,e){return Jr(t),e=ca(t,e),t.g.has(e)}re.forEach=function(t,e){Jr(this),this.g.forEach(function(n,i){n.forEach(function(r){t.call(e,r,i,this)},this)},this)};re.oa=function(){Jr(this);const t=Array.from(this.g.values()),e=Array.from(this.g.keys()),n=[];for(let i=0;i<e.length;i++){const r=t[i];for(let o=0;o<r.length;o++)n.push(e[i])}return n};re.W=function(t){Jr(this);let e=[];if(typeof t=="string")iI(this,t)&&(e=e.concat(this.g.get(ca(this,t))));else{t=Array.from(this.g.values());for(let n=0;n<t.length;n++)e=e.concat(t[n])}return e};re.set=function(t,e){return Jr(this),this.i=null,t=ca(this,t),iI(this,t)&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this};re.get=function(t,e){return t?(t=this.W(t),0<t.length?String(t[0]):e):e};function rI(t,e,n){nI(t,e),0<n.length&&(t.i=null,t.g.set(ca(t,e),Bg(n)),t.h+=n.length)}re.toString=function(){if(this.i)return this.i;if(!this.g)return"";const t=[],e=Array.from(this.g.keys());for(var n=0;n<e.length;n++){var i=e[n];const o=encodeURIComponent(String(i)),l=this.W(i);for(i=0;i<l.length;i++){var r=o;l[i]!==""&&(r+="="+encodeURIComponent(String(l[i]))),t.push(r)}}return this.i=t.join("&")};function ca(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}function VH(t,e){e&&!t.j&&(Jr(t),t.i=null,t.g.forEach(function(n,i){var r=i.toLowerCase();i!=r&&(nI(this,i),rI(this,r,n))},t)),t.j=e}var jH=class{constructor(t,e){this.h=t,this.g=e}};function sI(t){this.l=t||qH,ge.PerformanceNavigationTiming?(t=ge.performance.getEntriesByType("navigation"),t=0<t.length&&(t[0].nextHopProtocol=="hq"||t[0].nextHopProtocol=="h2")):t=!!(ge.g&&ge.g.Ga&&ge.g.Ga()&&ge.g.Ga().$b),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var qH=10;function oI(t){return t.h?!0:t.g?t.g.size>=t.j:!1}function aI(t){return t.h?1:t.g?t.g.size:0}function T_(t,e){return t.h?t.h==e:t.g?t.g.has(e):!1}function tm(t,e){t.g?t.g.add(e):t.h=e}function lI(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}sI.prototype.cancel=function(){if(this.i=cI(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const t of this.g.values())t.cancel();this.g.clear()}};function cI(t){if(t.h!=null)return t.i.concat(t.h.D);if(t.g!=null&&t.g.size!==0){let e=t.i;for(const n of t.g.values())e=e.concat(n.D);return e}return Bg(t.i)}function nm(){}nm.prototype.stringify=function(t){return ge.JSON.stringify(t,void 0)};nm.prototype.parse=function(t){return ge.JSON.parse(t,void 0)};function KH(){this.g=new nm}function GH(t,e,n){const i=n||"";try{eI(t,function(r,o){let l=r;Yl(r)&&(l=Gg(r)),e.push(i+o+"="+encodeURIComponent(l))})}catch(r){throw e.push(i+"type="+encodeURIComponent("_badmap")),r}}function zH(t,e){const n=new tf;if(ge.Image){const i=new Image;i.onload=cu(hu,n,i,"TestLoadImage: loaded",!0,e),i.onerror=cu(hu,n,i,"TestLoadImage: error",!1,e),i.onabort=cu(hu,n,i,"TestLoadImage: abort",!1,e),i.ontimeout=cu(hu,n,i,"TestLoadImage: timeout",!1,e),ge.setTimeout(function(){i.ontimeout&&i.ontimeout()},1e4),i.src=t}else e(!1)}function hu(t,e,n,i,r){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,r(i)}catch{}}function of(t){this.l=t.ac||null,this.j=t.jb||!1}jt(of,Jg);of.prototype.g=function(){return new af(this.l,this.j)};of.prototype.i=function(t){return function(){return t}}({});function af(t,e){Lt.call(this),this.D=t,this.u=e,this.m=void 0,this.readyState=im,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}jt(af,Lt);var im=0;re=af.prototype;re.open=function(t,e){if(this.readyState!=im)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,Ll(this)};re.send=function(t){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.D||ge).fetch(new Request(this.B,e)).then(this.Wa.bind(this),this.ga.bind(this))};re.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,tc(this)),this.readyState=im};re.Wa=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,Ll(this)),this.g&&(this.readyState=3,Ll(this),this.g)))if(this.responseType==="arraybuffer")t.arrayBuffer().then(this.Ua.bind(this),this.ga.bind(this));else if(typeof ge.ReadableStream<"u"&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;uI(this)}else t.text().then(this.Va.bind(this),this.ga.bind(this))};function uI(t){t.j.read().then(t.Ta.bind(t)).catch(t.ga.bind(t))}re.Ta=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?tc(this):Ll(this),this.readyState==3&&uI(this)}};re.Va=function(t){this.g&&(this.response=this.responseText=t,tc(this))};re.Ua=function(t){this.g&&(this.response=t,tc(this))};re.ga=function(){this.g&&tc(this)};function tc(t){t.readyState=4,t.l=null,t.j=null,t.A=null,Ll(t)}re.setRequestHeader=function(t,e){this.v.append(t,e)};re.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""};re.getAllResponseHeaders=function(){if(!this.h)return"";const t=[],e=this.h.entries();for(var n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join(`\r
`)};function Ll(t){t.onreadystatechange&&t.onreadystatechange.call(t)}Object.defineProperty(af.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(t){this.m=t?"include":"same-origin"}});var YH=ge.JSON.parse;function vt(t){Lt.call(this),this.headers=new Map,this.u=t||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=hI,this.K=this.L=!1}jt(vt,Lt);var hI="",XH=/^https?$/i,QH=["POST","PUT"];re=vt.prototype;re.Ka=function(t){this.L=t};re.da=function(t,e,n,i){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+t);e=e?e.toUpperCase():"GET",this.H=t,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():y_.g(),this.C=this.u?Gb(this.u):Gb(y_),this.g.onreadystatechange=Zt(this.Ha,this);try{this.F=!0,this.g.open(e,String(t),!0),this.F=!1}catch(o){Xb(this,o);return}if(t=n||"",n=new Map(this.headers),i)if(Object.getPrototypeOf(i)===Object.prototype)for(var r in i)n.set(r,i[r]);else if(typeof i.keys=="function"&&typeof i.get=="function")for(const o of i.keys())n.set(o,i.get(o));else throw Error("Unknown input type for opt_headers: "+String(i));i=Array.from(n.keys()).find(o=>o.toLowerCase()=="content-type"),r=ge.FormData&&t instanceof ge.FormData,!(0<=NC(QH,e))||i||r||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[o,l]of n)this.g.setRequestHeader(o,l);this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{pI(this),0<this.B&&((this.K=JH(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Zt(this.qa,this)):this.A=Yg(this.qa,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(o){Xb(this,o)}};function JH(t){return Ol&&pH()&&typeof t.timeout=="number"&&t.ontimeout!==void 0}re.qa=function(){typeof Ug<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Ht(this,"timeout"),this.abort(8))};function Xb(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,fI(t),lf(t)}function fI(t){t.D||(t.D=!0,Ht(t,"complete"),Ht(t,"error"))}re.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,Ht(this,"complete"),Ht(this,"abort"),lf(this))};re.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),lf(this,!0)),vt.X.M.call(this)};re.Ha=function(){this.s||(this.F||this.v||this.l?dI(this):this.fb())};re.fb=function(){dI(this)};function dI(t){if(t.h&&typeof Ug<"u"&&(!t.C[1]||rr(t)!=4||t.aa()!=2)){if(t.v&&rr(t)==4)Yg(t.Ha,0,t);else if(Ht(t,"readystatechange"),rr(t)==4){t.h=!1;try{const u=t.aa();e:switch(u){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var n;if(!(n=e)){var i;if(i=u===0){var r=String(t.H).match(tI)[1]||null;if(!r&&ge.self&&ge.self.location){var o=ge.self.location.protocol;r=o.substr(0,o.length-1)}i=!XH.test(r?r.toLowerCase():"")}n=i}if(n)Ht(t,"complete"),Ht(t,"success");else{t.m=6;try{var l=2<rr(t)?t.g.statusText:""}catch{l=""}t.j=l+" ["+t.aa()+"]",fI(t)}}finally{lf(t)}}}}function lf(t,e){if(t.g){pI(t);const n=t.g,i=t.C[0]?sh:null;t.g=null,t.C=null,e||Ht(t,"ready");try{n.onreadystatechange=i}catch{}}}function pI(t){t.g&&t.K&&(t.g.ontimeout=null),t.A&&(ge.clearTimeout(t.A),t.A=null)}function rr(t){return t.g?t.g.readyState:0}re.aa=function(){try{return 2<rr(this)?this.g.status:-1}catch{return-1}};re.fa=function(){try{return this.g?this.g.responseText:""}catch{return""}};re.Sa=function(t){if(this.g){var e=this.g.responseText;return t&&e.indexOf(t)==0&&(e=e.substring(t.length)),YH(e)}};function Qb(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.J){case hI:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch{return null}}re.Ea=function(){return this.m};re.Oa=function(){return typeof this.j=="string"?this.j:String(this.j)};function _I(t){let e="";return Hg(t,function(n,i){e+=i,e+=":",e+=n,e+=`\r
`}),e}function rm(t,e,n){e:{for(i in n){var i=!1;break e}i=!0}i||(n=_I(n),typeof t=="string"?n!=null&&encodeURIComponent(String(n)):ct(t,e,n))}function Wa(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function gI(t){this.Ca=0,this.i=[],this.j=new tf,this.ka=this.sa=this.F=this.V=this.g=this.za=this.D=this.ia=this.o=this.S=this.s=null,this.ab=this.U=0,this.Za=Wa("failFast",!1,t),this.L=this.v=this.u=this.m=this.l=null,this.Y=!0,this.pa=this.Ba=this.T=-1,this.Z=this.A=this.C=0,this.Xa=Wa("baseRetryDelayMs",5e3,t),this.bb=Wa("retryDelaySeedMs",1e4,t),this.$a=Wa("forwardChannelMaxRetries",2,t),this.ta=Wa("forwardChannelRequestTimeoutMs",2e4,t),this.ra=t&&t.xmlHttpFactory||void 0,this.Da=t&&t.Zb||!1,this.J=void 0,this.H=t&&t.supportsCrossDomainXhr||!1,this.I="",this.h=new sI(t&&t.concurrentRequestLimit),this.Fa=new KH,this.O=t&&t.fastHandshake||!1,this.N=t&&t.encodeInitMessageHeaders||!1,this.O&&this.N&&(this.N=!1),this.Ya=t&&t.Xb||!1,t&&t.Aa&&this.j.Aa(),t&&t.forceLongPolling&&(this.Y=!1),this.$=!this.O&&this.Y&&t&&t.detectBufferingProxy||!1,this.ja=void 0,this.P=0,this.K=!1,this.la=this.B=null}re=gI.prototype;re.ma=8;re.G=1;function sm(t){if(mI(t),t.G==3){var e=t.U++,n=dr(t.F);ct(n,"SID",t.I),ct(n,"RID",e),ct(n,"TYPE","terminate"),nc(t,n),e=new Zl(t,t.j,e,void 0),e.K=2,e.v=sf(dr(n)),n=!1,ge.navigator&&ge.navigator.sendBeacon&&(n=ge.navigator.sendBeacon(e.v.toString(),"")),!n&&ge.Image&&(new Image().src=e.v,n=!0),n||(e.g=II(e.l,null),e.g.da(e.v)),e.F=Date.now(),ec(e)}TI(t)}function cf(t){t.g&&(am(t),t.g.cancel(),t.g=null)}function mI(t){cf(t),t.u&&(ge.clearTimeout(t.u),t.u=null),uh(t),t.h.cancel(),t.m&&(typeof t.m=="number"&&ge.clearTimeout(t.m),t.m=null)}function uf(t){oI(t.h)||t.m||(t.m=!0,WC(t.Ja,t),t.C=0)}function ZH(t,e){return aI(t.h)>=t.h.j-(t.m?1:0)?!1:t.m?(t.i=e.D.concat(t.i),!0):t.G==1||t.G==2||t.C>=(t.Za?0:t.$a)?!1:(t.m=Ql(Zt(t.Ja,t,e),wI(t,t.C)),t.C++,!0)}re.Ja=function(t){if(this.m)if(this.m=null,this.G==1){if(!t){this.U=Math.floor(1e5*Math.random()),t=this.U++;const r=new Zl(this,this.j,t,void 0);let o=this.s;if(this.S&&(o?(o=LC(o),kC(o,this.S)):o=this.S),this.o!==null||this.N||(r.H=o,o=null),this.O)e:{for(var e=0,n=0;n<this.i.length;n++){t:{var i=this.i[n];if("__data__"in i.g&&(i=i.g.__data__,typeof i=="string")){i=i.length;break t}i=void 0}if(i===void 0)break;if(e+=i,4096<e){e=n;break e}if(e===4096||n===this.i.length-1){e=n+1;break e}}e=1e3}else e=1e3;e=vI(this,r,e),n=dr(this.F),ct(n,"RID",t),ct(n,"CVER",22),this.D&&ct(n,"X-HTTP-Session-Id",this.D),nc(this,n),o&&(this.N?e="headers="+encodeURIComponent(String(_I(o)))+"&"+e:this.o&&rm(n,this.o,o)),tm(this.h,r),this.Ya&&ct(n,"TYPE","init"),this.O?(ct(n,"$req",e),ct(n,"SID","null"),r.Z=!0,b_(r,n,null)):b_(r,n,e),this.G=2}}else this.G==3&&(t?Jb(this,t):this.i.length==0||oI(this.h)||Jb(this))};function Jb(t,e){var n;e?n=e.m:n=t.U++;const i=dr(t.F);ct(i,"SID",t.I),ct(i,"RID",n),ct(i,"AID",t.T),nc(t,i),t.o&&t.s&&rm(i,t.o,t.s),n=new Zl(t,t.j,n,t.C+1),t.o===null&&(n.H=t.s),e&&(t.i=e.D.concat(t.i)),e=vI(t,n,1e3),n.setTimeout(Math.round(.5*t.ta)+Math.round(.5*t.ta*Math.random())),tm(t.h,n),b_(n,i,e)}function nc(t,e){t.ia&&Hg(t.ia,function(n,i){ct(e,i,n)}),t.l&&eI({},function(n,i){ct(e,i,n)})}function vI(t,e,n){n=Math.min(t.i.length,n);var i=t.l?Zt(t.l.Ra,t.l,t):null;e:{var r=t.i;let o=-1;for(;;){const l=["count="+n];o==-1?0<n?(o=r[0].h,l.push("ofs="+o)):o=0:l.push("ofs="+o);let u=!0;for(let h=0;h<n;h++){let d=r[h].h;const p=r[h].g;if(d-=o,0>d)o=Math.max(0,r[h].h-100),u=!1;else try{GH(p,l,"req"+d+"_")}catch{i&&i(p)}}if(u){i=l.join("&");break e}}}return t=t.i.splice(0,n),e.D=t,i}function yI(t){t.g||t.u||(t.Z=1,WC(t.Ia,t),t.A=0)}function om(t){return t.g||t.u||3<=t.A?!1:(t.Z++,t.u=Ql(Zt(t.Ia,t),wI(t,t.A)),t.A++,!0)}re.Ia=function(){if(this.u=null,EI(this),this.$&&!(this.K||this.g==null||0>=this.P)){var t=2*this.P;this.j.info("BP detection timer enabled: "+t),this.B=Ql(Zt(this.eb,this),t)}};re.eb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.L=!1,this.K=!0,cn(10),cf(this),EI(this))};function am(t){t.B!=null&&(ge.clearTimeout(t.B),t.B=null)}function EI(t){t.g=new Zl(t,t.j,"rpc",t.Z),t.o===null&&(t.g.H=t.s),t.g.N=0;var e=dr(t.sa);ct(e,"RID","rpc"),ct(e,"SID",t.I),ct(e,"CI",t.L?"0":"1"),ct(e,"AID",t.T),ct(e,"TYPE","xmlhttp"),nc(t,e),t.o&&t.s&&rm(e,t.o,t.s),t.J&&t.g.setTimeout(t.J);var n=t.g;t=t.ka,n.K=1,n.v=sf(dr(e)),n.s=null,n.P=!0,XC(n,t)}re.cb=function(){this.v!=null&&(this.v=null,cf(this),om(this),cn(19))};function uh(t){t.v!=null&&(ge.clearTimeout(t.v),t.v=null)}function bI(t,e){var n=null;if(t.g==e){uh(t),am(t),t.g=null;var i=2}else if(T_(t.h,e))n=e.D,lI(t.h,e),i=1;else return;if(t.G!=0){if(t.pa=e.Y,e.i)if(i==1){n=e.s?e.s.length:0,e=Date.now()-e.F;var r=t.C;i=Xg(),Ht(i,new zC(i,n)),uf(t)}else yI(t);else if(r=e.o,r==3||r==0&&0<t.pa||!(i==1&&ZH(t,e)||i==2&&om(t)))switch(n&&0<n.length&&(e=t.h,e.i=e.i.concat(n)),r){case 1:As(t,5);break;case 4:As(t,10);break;case 3:As(t,6);break;default:As(t,2)}}}function wI(t,e){let n=t.Xa+Math.floor(Math.random()*t.bb);return t.l||(n*=2),n*e}function As(t,e){if(t.j.info("Error code "+e),e==2){var n=null;t.l&&(n=null);var i=Zt(t.kb,t);n||(n=new ks("//www.google.com/images/cleardot.gif"),ge.location&&ge.location.protocol=="http"||lh(n,"https"),sf(n)),zH(n.toString(),i)}else cn(2);t.G=0,t.l&&t.l.va(e),TI(t),mI(t)}re.kb=function(t){t?(this.j.info("Successfully pinged google.com"),cn(2)):(this.j.info("Failed to ping google.com"),cn(1))};function TI(t){if(t.G=0,t.la=[],t.l){const e=cI(t.h);(e.length!=0||t.i.length!=0)&&(Hb(t.la,e),Hb(t.la,t.i),t.h.i.length=0,Bg(t.i),t.i.length=0),t.l.ua()}}function CI(t,e,n){var i=n instanceof ks?dr(n):new ks(n,void 0);if(i.g!="")e&&(i.g=e+"."+i.g),ch(i,i.m);else{var r=ge.location;i=r.protocol,e=e?e+"."+r.hostname:r.hostname,r=+r.port;var o=new ks(null,void 0);i&&lh(o,i),e&&(o.g=e),r&&ch(o,r),n&&(o.l=n),i=o}return n=t.D,e=t.za,n&&e&&ct(i,n,e),ct(i,"VER",t.ma),nc(t,i),i}function II(t,e,n){if(e&&!t.H)throw Error("Can't create secondary domain capable XhrIo object.");return e=n&&t.Da&&!t.ra?new vt(new of({jb:!0})):new vt(t.ra),e.Ka(t.H),e}function AI(){}re=AI.prototype;re.xa=function(){};re.wa=function(){};re.va=function(){};re.ua=function(){};re.Ra=function(){};function Xn(t,e){Lt.call(this),this.g=new gI(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(t?t["X-WebChannel-Client-Profile"]=e.ya:t={"X-WebChannel-Client-Profile":e.ya}),this.g.S=t,(t=e&&e.Yb)&&!oh(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!oh(e)&&(this.g.D=e,t=this.h,t!==null&&e in t&&(t=this.h,e in t&&delete t[e])),this.j=new ua(this)}jt(Xn,Lt);Xn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.H=!0);var t=this.g,e=this.l,n=this.h||void 0;cn(0),t.V=e,t.ia=n||{},t.L=t.Y,t.F=CI(t,null,t.V),uf(t)};Xn.prototype.close=function(){sm(this.g)};Xn.prototype.u=function(t){var e=this.g;if(typeof t=="string"){var n={};n.__data__=t,t=n}else this.v&&(n={},n.__data__=Gg(t),t=n);e.i.push(new jH(e.ab++,t)),e.G==3&&uf(e)};Xn.prototype.M=function(){this.g.l=null,delete this.j,sm(this.g),delete this.g,Xn.X.M.call(this)};function SI(t){Zg.call(this);var e=t.__sm__;if(e){e:{for(const n in e){t=n;break e}t=void 0}(this.i=t)&&(t=this.i,e=e!==null&&t in e?e[t]:void 0),this.data=e}else this.data=t}jt(SI,Zg);function OI(){em.call(this),this.status=1}jt(OI,em);function ua(t){this.g=t}jt(ua,AI);ua.prototype.xa=function(){Ht(this.g,"a")};ua.prototype.wa=function(t){Ht(this.g,new SI(t))};ua.prototype.va=function(t){Ht(this.g,new OI)};ua.prototype.ua=function(){Ht(this.g,"b")};Xn.prototype.send=Xn.prototype.u;Xn.prototype.open=Xn.prototype.m;Xn.prototype.close=Xn.prototype.close;Qg.NO_ERROR=0;Qg.TIMEOUT=8;Qg.HTTP_ERROR=6;xH.COMPLETE="complete";DH.EventType=Jl;Jl.OPEN="a";Jl.CLOSE="b";Jl.ERROR="c";Jl.MESSAGE="d";Lt.prototype.listen=Lt.prototype.N;vt.prototype.listenOnce=vt.prototype.O;vt.prototype.getLastError=vt.prototype.Oa;vt.prototype.getLastErrorCode=vt.prototype.Ea;vt.prototype.getStatus=vt.prototype.aa;vt.prototype.getResponseJson=vt.prototype.Sa;vt.prototype.getResponseText=vt.prototype.fa;vt.prototype.send=vt.prototype.da;vt.prototype.setWithCredentials=vt.prototype.Ka;const Zb="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class En{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}En.UNAUTHENTICATED=new En(null),En.GOOGLE_CREDENTIALS=new En("google-credentials-uid"),En.FIRST_PARTY=new En("first-party-uid"),En.MOCK_USER=new En("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let hf="9.15.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hh=new Bl("@firebase/firestore");function Nn(t,...e){if(hh.logLevel<=Ge.DEBUG){const n=e.map(NI);hh.debug(`Firestore (${hf}): ${t}`,...n)}}function lm(t,...e){if(hh.logLevel<=Ge.ERROR){const n=e.map(NI);hh.error(`Firestore (${hf}): ${t}`,...n)}}function NI(t){if(typeof t=="string")return t;try{return e=t,JSON.stringify(e)}catch{return t}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RI(t="Unexpected state"){const e=`FIRESTORE (${hf}) INTERNAL ASSERTION FAILED: `+t;throw lm(e),new Error(e)}function fh(t,e){t||RI()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oi={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ni extends mr{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Po{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e2{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class t2{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(En.UNAUTHENTICATED))}shutdown(){}}class n2{constructor(e){this.t=e,this.currentUser=En.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){let i=this.i;const r=h=>this.i!==i?(i=this.i,n(h)):Promise.resolve();let o=new Po;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Po,e.enqueueRetryable(()=>r(this.currentUser))};const l=()=>{const h=o;e.enqueueRetryable(async()=>{await h.promise,await r(this.currentUser)})},u=h=>{Nn("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=h,this.auth.addAuthTokenListener(this.o),l()};this.t.onInit(h=>u(h)),setTimeout(()=>{if(!this.auth){const h=this.t.getImmediate({optional:!0});h?u(h):(Nn("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Po)}},0),l()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(i=>this.i!==e?(Nn("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(fh(typeof i.accessToken=="string"),new e2(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return fh(e===null||typeof e=="string"),new En(e)}}class i2{constructor(e,n,i,r){this.h=e,this.l=n,this.m=i,this.g=r,this.type="FirstParty",this.user=En.FIRST_PARTY,this.p=new Map}I(){return this.g?this.g():(fh(!(typeof this.h!="object"||this.h===null||!this.h.auth||!this.h.auth.getAuthHeaderValueForFirstParty)),this.h.auth.getAuthHeaderValueForFirstParty([]))}get headers(){this.p.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.p.set("Authorization",e),this.m&&this.p.set("X-Goog-Iam-Authorization-Token",this.m),this.p}}class r2{constructor(e,n,i,r){this.h=e,this.l=n,this.m=i,this.g=r}getToken(){return Promise.resolve(new i2(this.h,this.l,this.m,this.g))}start(e,n){e.enqueueRetryable(()=>n(En.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class s2{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class o2{constructor(e){this.T=e,this.forceRefresh=!1,this.appCheck=null,this.A=null}start(e,n){const i=o=>{o.error!=null&&Nn("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const l=o.token!==this.A;return this.A=o.token,Nn("FirebaseAppCheckTokenProvider",`Received ${l?"new":"existing"} token.`),l?n(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>i(o))};const r=o=>{Nn("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.appCheck.addTokenListener(this.o)};this.T.onInit(o=>r(o)),setTimeout(()=>{if(!this.appCheck){const o=this.T.getImmediate({optional:!0});o?r(o):Nn("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(fh(typeof n.token=="string"),this.A=n.token,new s2(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function a2(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let i=0;i<t;i++)n[i]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l2{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let i="";for(;i.length<20;){const r=a2(40);for(let o=0;o<r.length;++o)i.length<20&&r[o]<n&&(i+=e.charAt(r[o]%e.length))}return i}}function xI(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c2{constructor(e,n,i,r,o,l,u,h){this.databaseId=e,this.appId=n,this.persistenceKey=i,this.host=r,this.ssl=o,this.forceLongPolling=l,this.autoDetectLongPolling=u,this.useFetchStreams=h}}class dh{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new dh("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof dh&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ew,Me;(Me=ew||(ew={}))[Me.OK=0]="OK",Me[Me.CANCELLED=1]="CANCELLED",Me[Me.UNKNOWN=2]="UNKNOWN",Me[Me.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Me[Me.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Me[Me.NOT_FOUND=5]="NOT_FOUND",Me[Me.ALREADY_EXISTS=6]="ALREADY_EXISTS",Me[Me.PERMISSION_DENIED=7]="PERMISSION_DENIED",Me[Me.UNAUTHENTICATED=16]="UNAUTHENTICATED",Me[Me.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Me[Me.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Me[Me.ABORTED=10]="ABORTED",Me[Me.OUT_OF_RANGE=11]="OUT_OF_RANGE",Me[Me.UNIMPLEMENTED=12]="UNIMPLEMENTED",Me[Me.INTERNAL=13]="INTERNAL",Me[Me.UNAVAILABLE=14]="UNAVAILABLE",Me[Me.DATA_LOSS=15]="DATA_LOSS";function hp(){return typeof document<"u"?document:null}class u2{constructor(e,n,i=1e3,r=1.5,o=6e4){this.Hs=e,this.timerId=n,this.mo=i,this.yo=r,this.po=o,this.Io=0,this.To=null,this.Eo=Date.now(),this.reset()}reset(){this.Io=0}Ao(){this.Io=this.po}Ro(e){this.cancel();const n=Math.floor(this.Io+this.bo()),i=Math.max(0,Date.now()-this.Eo),r=Math.max(0,n-i);r>0&&Nn("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.Io} ms, delay with jitter: ${n} ms, last attempt: ${i} ms ago)`),this.To=this.Hs.enqueueAfterDelay(this.timerId,r,()=>(this.Eo=Date.now(),e())),this.Io*=this.yo,this.Io<this.mo&&(this.Io=this.mo),this.Io>this.po&&(this.Io=this.po)}Po(){this.To!==null&&(this.To.skipDelay(),this.To=null)}cancel(){this.To!==null&&(this.To.cancel(),this.To=null)}bo(){return(Math.random()-.5)*this.Io}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cm{constructor(e,n,i,r,o){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=i,this.op=r,this.removalCallback=o,this.deferred=new Po,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(l=>{})}static createAndSchedule(e,n,i,r,o){const l=Date.now()+i,u=new cm(e,n,l,r,o);return u.start(i),u}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Ni(Oi.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function h2(t,e){if(lm("AsyncQueue",`${e}: ${t}`),xI(t))return new Ni(Oi.UNAVAILABLE,`${e}: ${t}`);throw t}function f2(t,e,n,i){if(e===!0&&i===!0)throw new Ni(Oi.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tw=new Map;class nw{constructor(e){var n;if(e.host===void 0){if(e.ssl!==void 0)throw new Ni(Oi.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new Ni(Oi.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,f2("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d2{constructor(e,n,i,r){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=i,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new nw({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Ni(Oi.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new Ni(Oi.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new nw(e),e.credentials!==void 0&&(this._authCredentials=function(n){if(!n)return new t2;switch(n.type){case"gapi":const i=n.client;return new r2(i,n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new Ni(Oi.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const n=tw.get(e);n&&(Nn("ComponentProvider","Removing Datastore"),tw.delete(e),n.terminate())}(this),Promise.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p2{constructor(e,n,i,r){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=i,this.databaseInfo=r,this.user=En.UNAUTHENTICATED,this.clientId=l2.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(i,async o=>{Nn("FirestoreClient","Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(i,o=>(Nn("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}async getConfiguration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Ni(Oi.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Po;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this.onlineComponents&&await this.onlineComponents.terminate(),this.offlineComponents&&await this.offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const i=h2(n,"Failed to shutdown persistence");e.reject(i)}}),e.promise}}class _2{constructor(){this.Bc=Promise.resolve(),this.Lc=[],this.qc=!1,this.Uc=[],this.Kc=null,this.Gc=!1,this.Qc=!1,this.jc=[],this.xo=new u2(this,"async_queue_retry"),this.Wc=()=>{const n=hp();n&&Nn("AsyncQueue","Visibility state changed to "+n.visibilityState),this.xo.Po()};const e=hp();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.Wc)}get isShuttingDown(){return this.qc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.zc(),this.Hc(e)}enterRestrictedMode(e){if(!this.qc){this.qc=!0,this.Qc=e||!1;const n=hp();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Wc)}}enqueue(e){if(this.zc(),this.qc)return new Promise(()=>{});const n=new Po;return this.Hc(()=>this.qc&&this.Qc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Lc.push(e),this.Jc()))}async Jc(){if(this.Lc.length!==0){try{await this.Lc[0](),this.Lc.shift(),this.xo.reset()}catch(e){if(!xI(e))throw e;Nn("AsyncQueue","Operation failed with retryable error: "+e)}this.Lc.length>0&&this.xo.Ro(()=>this.Jc())}}Hc(e){const n=this.Bc.then(()=>(this.Gc=!0,e().catch(i=>{this.Kc=i,this.Gc=!1;const r=function(o){let l=o.message||"";return o.stack&&(l=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),l}(i);throw lm("INTERNAL UNHANDLED ERROR: ",r),i}).then(i=>(this.Gc=!1,i))));return this.Bc=n,n}enqueueAfterDelay(e,n,i){this.zc(),this.jc.indexOf(e)>-1&&(n=0);const r=cm.createAndSchedule(this,e,n,i,o=>this.Yc(o));return this.Uc.push(r),r}zc(){this.Kc&&RI()}verifyOperationInProgress(){}async Xc(){let e;do e=this.Bc,await e;while(e!==this.Bc)}Zc(e){for(const n of this.Uc)if(n.timerId===e)return!0;return!1}ta(e){return this.Xc().then(()=>{this.Uc.sort((n,i)=>n.targetTimeMs-i.targetTimeMs);for(const n of this.Uc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Xc()})}ea(e){this.jc.push(e)}Yc(e){const n=this.Uc.indexOf(e);this.Uc.splice(n,1)}}class g2 extends d2{constructor(e,n,i,r){super(e,n,i,r),this.type="firestore",this._queue=new _2,this._persistenceKey=(r==null?void 0:r.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||m2(this),this._firestoreClient.terminate()}}function m2(t){var e;const n=t._freezeSettings(),i=function(r,o,l,u){return new c2(r,o,l,u.host,u.ssl,u.experimentalForceLongPolling,u.experimentalAutoDetectLongPolling,u.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,n);t._firestoreClient=new p2(t._authCredentials,t._appCheckCredentials,t._queue,i)}(function(t,e=!0){(function(n){hf=n})(Wl),Mi(new di("firestore",(n,{instanceIdentifier:i,options:r})=>{const o=n.getProvider("app").getImmediate(),l=new g2(new n2(n.getProvider("auth-internal")),new o2(n.getProvider("app-check-internal")),function(u,h){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new Ni(Oi.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new dh(u.options.projectId,h)}(o,i),o);return r=Object.assign({useFetchStreams:e},r),l._setSettings(r),l},"PUBLIC").setMultipleInstances(!0)),Rn(Zb,"3.8.0",t),Rn(Zb,"3.8.0","esm2017")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DI="firebasestorage.googleapis.com",v2="storageBucket",y2=2*60*1e3,E2=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hi extends mr{constructor(e,n,i=0){super(fp(e),`Firebase Storage: ${n} (${fp(e)})`),this.status_=i,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Hi.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return fp(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}function fp(t){return"storage/"+t}function b2(){const t="An unknown error occurred, please check the error payload for server response.";return new Hi("unknown",t)}function w2(){return new Hi("retry-limit-exceeded","Max retry time for operation exceeded, please try again.")}function T2(){return new Hi("canceled","User canceled the upload/download.")}function C2(t){return new Hi("invalid-url","Invalid URL '"+t+"'.")}function I2(t){return new Hi("invalid-default-bucket","Invalid default bucket '"+t+"'.")}function iw(t){return new Hi("invalid-argument",t)}function LI(){return new Hi("app-deleted","The Firebase app was deleted.")}function A2(t){return new Hi("invalid-root-operation","The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ui{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let i;try{i=ui.makeFromUrl(e,n)}catch{return new ui(e,"")}if(i.path==="")return i;throw I2(e)}static makeFromUrl(e,n){let i=null;const r="([A-Za-z0-9.\\-_]+)";function o(V){V.path.charAt(V.path.length-1)==="/"&&(V.path_=V.path_.slice(0,-1))}const l="(/(.*))?$",u=new RegExp("^gs://"+r+l,"i"),h={bucket:1,path:3};function d(V){V.path_=decodeURIComponent(V.path)}const p="v[A-Za-z0-9_]+",g=n.replace(/[.]/g,"\\."),y="(/([^?#]*).*)?$",b=new RegExp(`^https?://${g}/${p}/b/${r}/o${y}`,"i"),S={bucket:1,path:3},N=n===DI?"(?:storage.googleapis.com|storage.cloud.google.com)":n,P="([^?#]*)",G=new RegExp(`^https?://${N}/${r}/${P}`,"i"),H=[{regex:u,indices:h,postModify:o},{regex:b,indices:S,postModify:d},{regex:G,indices:{bucket:1,path:2},postModify:d}];for(let V=0;V<H.length;V++){const Q=H[V],B=Q.regex.exec(e);if(B){const Z=B[Q.indices.bucket];let X=B[Q.indices.path];X||(X=""),i=new ui(Z,X),Q.postModify(i);break}}if(i==null)throw C2(e);return i}}class S2{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function O2(t,e,n){let i=1,r=null,o=null,l=!1,u=0;function h(){return u===2}let d=!1;function p(...P){d||(d=!0,e.apply(null,P))}function g(P){r=setTimeout(()=>{r=null,t(b,h())},P)}function y(){o&&clearTimeout(o)}function b(P,...G){if(d){y();return}if(P){y(),p.call(null,P,...G);return}if(h()||l){y(),p.call(null,P,...G);return}i<64&&(i*=2);let H;u===1?(u=2,H=0):H=(i+Math.random())*1e3,g(H)}let S=!1;function N(P){S||(S=!0,y(),!d&&(r!==null?(P||(u=2),clearTimeout(r),g(0)):P||(u=1)))}return g(0),o=setTimeout(()=>{l=!0,N(!0)},n),N}function N2(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function R2(t){return t!==void 0}function rw(t,e,n,i){if(i<e)throw iw(`Invalid value for '${t}'. Expected ${e} or greater.`);if(i>n)throw iw(`Invalid value for '${t}'. Expected ${n} or less.`)}function x2(t){const e=encodeURIComponent;let n="?";for(const i in t)if(t.hasOwnProperty(i)){const r=e(i)+"="+e(t[i]);n=n+r+"&"}return n=n.slice(0,-1),n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ph;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(ph||(ph={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function D2(t,e){const n=t>=500&&t<600,r=[408,429].indexOf(t)!==-1,o=e.indexOf(t)!==-1;return n||r||o}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L2{constructor(e,n,i,r,o,l,u,h,d,p,g,y=!0){this.url_=e,this.method_=n,this.headers_=i,this.body_=r,this.successCodes_=o,this.additionalRetryCodes_=l,this.callback_=u,this.errorCallback_=h,this.timeout_=d,this.progressCallback_=p,this.connectionFactory_=g,this.retry=y,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((b,S)=>{this.resolve_=b,this.reject_=S,this.start_()})}start_(){const e=(i,r)=>{if(r){i(!1,new fu(!1,null,!0));return}const o=this.connectionFactory_();this.pendingConnection_=o;const l=u=>{const h=u.loaded,d=u.lengthComputable?u.total:-1;this.progressCallback_!==null&&this.progressCallback_(h,d)};this.progressCallback_!==null&&o.addUploadProgressListener(l),o.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&o.removeUploadProgressListener(l),this.pendingConnection_=null;const u=o.getErrorCode()===ph.NO_ERROR,h=o.getStatus();if((!u||D2(h,this.additionalRetryCodes_))&&this.retry){const p=o.getErrorCode()===ph.ABORT;i(!1,new fu(!1,null,p));return}const d=this.successCodes_.indexOf(h)!==-1;i(!0,new fu(d,o))})},n=(i,r)=>{const o=this.resolve_,l=this.reject_,u=r.connection;if(r.wasSuccessCode)try{const h=this.callback_(u,u.getResponse());R2(h)?o(h):o()}catch(h){l(h)}else if(u!==null){const h=b2();h.serverResponse=u.getErrorText(),this.errorCallback_?l(this.errorCallback_(u,h)):l(h)}else if(r.canceled){const h=this.appDelete_?LI():T2();l(h)}else{const h=w2();l(h)}};this.canceled_?n(!1,new fu(!1,null,!0)):this.backoffId_=O2(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&N2(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class fu{constructor(e,n,i){this.wasSuccessCode=e,this.connection=n,this.canceled=!!i}}function k2(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function P2(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function M2(t,e){e&&(t["X-Firebase-GMPID"]=e)}function $2(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function F2(t,e,n,i,r,o,l=!0){const u=x2(t.urlParams),h=t.url+u,d=Object.assign({},t.headers);return M2(d,e),k2(d,n),P2(d,o),$2(d,i),new L2(h,t.method,d,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,r,l)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function U2(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function B2(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _h{constructor(e,n){this._service=e,n instanceof ui?this._location=n:this._location=ui.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new _h(e,n)}get root(){const e=new ui(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return B2(this._location.path)}get storage(){return this._service}get parent(){const e=U2(this._location.path);if(e===null)return null;const n=new ui(this._location.bucket,e);return new _h(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw A2(e)}}function sw(t,e){const n=e==null?void 0:e[v2];return n==null?null:ui.makeFromBucketSpec(n,t)}class W2{constructor(e,n,i,r,o){this.app=e,this._authProvider=n,this._appCheckProvider=i,this._url=r,this._firebaseVersion=o,this._bucket=null,this._host=DI,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=y2,this._maxUploadRetryTime=E2,this._requests=new Set,r!=null?this._bucket=ui.makeFromBucketSpec(r,this._host):this._bucket=sw(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=ui.makeFromBucketSpec(this._url,e):this._bucket=sw(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){rw("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){rw("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new _h(this,e)}_makeRequest(e,n,i,r,o=!0){if(this._deleted)return new S2(LI());{const l=F2(e,this._appId,i,r,n,this._firebaseVersion,o);return this._requests.add(l),l.getPromise().then(()=>this._requests.delete(l),()=>this._requests.delete(l)),l}}async makeRequestWithTokens(e,n){const[i,r]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,i,r).getPromise()}}const ow="@firebase/storage",aw="0.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H2="storage";function V2(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),i=t.getProvider("auth-internal"),r=t.getProvider("app-check-internal");return new W2(n,i,r,e,Wl)}function j2(){Mi(new di(H2,V2,"PUBLIC").setMultipleInstances(!0)),Rn(ow,aw,""),Rn(ow,aw,"esm2017")}j2();function q2(t,{firebaseApp:e,modules:n=[]}){t.provide(GF,e);for(const i of n)t.use(i.bind(null,e))}const kI=ig({apiKey:"AIzaSyBJsQeWbln9lR9B-W7jQZVCy9AWZyoe9pQ",authDomain:"tacmap-dev.firebaseapp.com",projectId:"tacmap-dev",storageBucket:"tacmap-dev.appspot.com",messagingSenderId:"278955153095",appId:"1:278955153095:web:dc491f9539c91be1e0d0e2"}),ha=OC(kI),PI=ai(ha,"rooms");ai(ha,"teams");const Ou=ai(ha,"squads"),Ps=ai(ha,"users"),dp=ai(ha,"markers");function K2(t){return{all:t=t||new Map,on:function(e,n){var i=t.get(e);i?i.push(n):t.set(e,[n])},off:function(e,n){var i=t.get(e);i&&(n?i.splice(i.indexOf(n)>>>0,1):t.set(e,[]))},emit:function(e,n){var i=t.get(e);i&&i.slice().map(function(r){r(n)}),(i=t.get("*"))&&i.slice().map(function(r){r(e,n)})}}}const ze=K2(),Xt={firebaseVars:{live:{apiKey:"AIzaSyB1eJwaJojvqt3WvJ4pEv5rLZmI-kFhojA",authDomain:"tacmap-b51b4.firebaseapp.com",databaseURL:"https://tacmap-b51b4-default-rtdb.firebaseio.com",projectId:"tacmap-b51b4",storageBucket:"tacmap-b51b4.appspot.com",messagingSenderId:"967896842326",appId:"1:967896842326:web:5c2e93fc457c2aa8febbf7"},dev:{apiKey:"AIzaSyBJsQeWbln9lR9B-W7jQZVCy9AWZyoe9pQ",authDomain:"tacmap-dev.firebaseapp.com",projectId:"tacmap-dev",storageBucket:"tacmap-dev.appspot.com",messagingSenderId:"278955153095",appId:"1:278955153095:web:dc491f9539c91be1e0d0e2"}},geoLocationOptions:{enableHighAccuracy:!0,timeout:5e3,maximumAge:0},tickRateMS:1e4,updateMeters:3,roomId:"b4196e99-b3eb-489a-b2fe-41c3bc74dd13"};function G2(){return MI().__VUE_DEVTOOLS_GLOBAL_HOOK__}function MI(){return typeof navigator<"u"&&typeof window<"u"?window:typeof global<"u"?global:{}}const z2=typeof Proxy=="function",Y2="devtools-plugin:setup",X2="plugin:settings:set";let _o,C_;function Q2(){var t;return _o!==void 0||(typeof window<"u"&&window.performance?(_o=!0,C_=window.performance):typeof global<"u"&&(!((t=global.perf_hooks)===null||t===void 0)&&t.performance)?(_o=!0,C_=global.perf_hooks.performance):_o=!1),_o}function J2(){return Q2()?C_.now():Date.now()}class Z2{constructor(e,n){this.target=null,this.targetQueue=[],this.onQueue=[],this.plugin=e,this.hook=n;const i={};if(e.settings)for(const l in e.settings){const u=e.settings[l];i[l]=u.defaultValue}const r=`__vue-devtools-plugin-settings__${e.id}`;let o=Object.assign({},i);try{const l=localStorage.getItem(r),u=JSON.parse(l);Object.assign(o,u)}catch{}this.fallbacks={getSettings(){return o},setSettings(l){try{localStorage.setItem(r,JSON.stringify(l))}catch{}o=l},now(){return J2()}},n&&n.on(X2,(l,u)=>{l===this.plugin.id&&this.fallbacks.setSettings(u)}),this.proxiedOn=new Proxy({},{get:(l,u)=>this.target?this.target.on[u]:(...h)=>{this.onQueue.push({method:u,args:h})}}),this.proxiedTarget=new Proxy({},{get:(l,u)=>this.target?this.target[u]:u==="on"?this.proxiedOn:Object.keys(this.fallbacks).includes(u)?(...h)=>(this.targetQueue.push({method:u,args:h,resolve:()=>{}}),this.fallbacks[u](...h)):(...h)=>new Promise(d=>{this.targetQueue.push({method:u,args:h,resolve:d})})})}async setRealTarget(e){this.target=e;for(const n of this.onQueue)this.target.on[n.method](...n.args);for(const n of this.targetQueue)n.resolve(await this.target[n.method](...n.args))}}function eV(t,e){const n=t,i=MI(),r=G2(),o=z2&&n.enableEarlyProxy;if(r&&(i.__VUE_DEVTOOLS_PLUGIN_API_AVAILABLE__||!o))r.emit(Y2,t,e);else{const l=o?new Z2(n,r):null;(i.__VUE_DEVTOOLS_PLUGINS__=i.__VUE_DEVTOOLS_PLUGINS__||[]).push({pluginDescriptor:n,setupFn:e,proxy:l}),l&&e(l.proxiedTarget)}}/*!
 * vuex v4.0.2
 * (c) 2021 Evan You
 * @license MIT
 */var tV="store";function fa(t,e){Object.keys(t).forEach(function(n){return e(t[n],n)})}function nV(t){return t!==null&&typeof t=="object"}function iV(t){return t&&typeof t.then=="function"}function rV(t,e){return function(){return t(e)}}function $I(t,e,n){return e.indexOf(t)<0&&(n&&n.prepend?e.unshift(t):e.push(t)),function(){var i=e.indexOf(t);i>-1&&e.splice(i,1)}}function FI(t,e){t._actions=Object.create(null),t._mutations=Object.create(null),t._wrappedGetters=Object.create(null),t._modulesNamespaceMap=Object.create(null);var n=t.state;ff(t,n,[],t._modules.root,!0),um(t,n,e)}function um(t,e,n){var i=t._state;t.getters={},t._makeLocalGettersCache=Object.create(null);var r=t._wrappedGetters,o={};fa(r,function(l,u){o[u]=rV(l,t),Object.defineProperty(t.getters,u,{get:function(){return o[u]()},enumerable:!0})}),t._state=$l({data:e}),t.strict&&cV(t),i&&n&&t._withCommit(function(){i.data=null})}function ff(t,e,n,i,r){var o=!n.length,l=t._modules.getNamespace(n);if(i.namespaced&&(t._modulesNamespaceMap[l],t._modulesNamespaceMap[l]=i),!o&&!r){var u=hm(e,n.slice(0,-1)),h=n[n.length-1];t._withCommit(function(){u[h]=i.state})}var d=i.context=sV(t,l,n);i.forEachMutation(function(p,g){var y=l+g;oV(t,y,p,d)}),i.forEachAction(function(p,g){var y=p.root?g:l+g,b=p.handler||p;aV(t,y,b,d)}),i.forEachGetter(function(p,g){var y=l+g;lV(t,y,p,d)}),i.forEachChild(function(p,g){ff(t,e,n.concat(g),p,r)})}function sV(t,e,n){var i=e==="",r={dispatch:i?t.dispatch:function(o,l,u){var h=gh(o,l,u),d=h.payload,p=h.options,g=h.type;return(!p||!p.root)&&(g=e+g),t.dispatch(g,d)},commit:i?t.commit:function(o,l,u){var h=gh(o,l,u),d=h.payload,p=h.options,g=h.type;(!p||!p.root)&&(g=e+g),t.commit(g,d,p)}};return Object.defineProperties(r,{getters:{get:i?function(){return t.getters}:function(){return UI(t,e)}},state:{get:function(){return hm(t.state,n)}}}),r}function UI(t,e){if(!t._makeLocalGettersCache[e]){var n={},i=e.length;Object.keys(t.getters).forEach(function(r){if(r.slice(0,i)===e){var o=r.slice(i);Object.defineProperty(n,o,{get:function(){return t.getters[r]},enumerable:!0})}}),t._makeLocalGettersCache[e]=n}return t._makeLocalGettersCache[e]}function oV(t,e,n,i){var r=t._mutations[e]||(t._mutations[e]=[]);r.push(function(l){n.call(t,i.state,l)})}function aV(t,e,n,i){var r=t._actions[e]||(t._actions[e]=[]);r.push(function(l){var u=n.call(t,{dispatch:i.dispatch,commit:i.commit,getters:i.getters,state:i.state,rootGetters:t.getters,rootState:t.state},l);return iV(u)||(u=Promise.resolve(u)),t._devtoolHook?u.catch(function(h){throw t._devtoolHook.emit("vuex:error",h),h}):u})}function lV(t,e,n,i){t._wrappedGetters[e]||(t._wrappedGetters[e]=function(o){return n(i.state,i.getters,o.state,o.getters)})}function cV(t){Rs(function(){return t._state.data},function(){},{deep:!0,flush:"sync"})}function hm(t,e){return e.reduce(function(n,i){return n[i]},t)}function gh(t,e,n){return nV(t)&&t.type&&(n=e,e=t,t=t.type),{type:t,payload:e,options:n}}var uV="vuex bindings",lw="vuex:mutations",pp="vuex:actions",go="vuex",hV=0;function fV(t,e){eV({id:"org.vuejs.vuex",app:t,label:"Vuex",homepage:"https://next.vuex.vuejs.org/",logo:"https://vuejs.org/images/icons/favicon-96x96.png",packageName:"vuex",componentStateTypes:[uV]},function(n){n.addTimelineLayer({id:lw,label:"Vuex Mutations",color:cw}),n.addTimelineLayer({id:pp,label:"Vuex Actions",color:cw}),n.addInspector({id:go,label:"Vuex",icon:"storage",treeFilterPlaceholder:"Filter stores..."}),n.on.getInspectorTree(function(i){if(i.app===t&&i.inspectorId===go)if(i.filter){var r=[];VI(r,e._modules.root,i.filter,""),i.rootNodes=r}else i.rootNodes=[HI(e._modules.root,"")]}),n.on.getInspectorState(function(i){if(i.app===t&&i.inspectorId===go){var r=i.nodeId;UI(e,r),i.state=_V(mV(e._modules,r),r==="root"?e.getters:e._makeLocalGettersCache,r)}}),n.on.editInspectorState(function(i){if(i.app===t&&i.inspectorId===go){var r=i.nodeId,o=i.path;r!=="root"&&(o=r.split("/").filter(Boolean).concat(o)),e._withCommit(function(){i.set(e._state.data,o,i.state.value)})}}),e.subscribe(function(i,r){var o={};i.payload&&(o.payload=i.payload),o.state=r,n.notifyComponentUpdate(),n.sendInspectorTree(go),n.sendInspectorState(go),n.addTimelineEvent({layerId:lw,event:{time:Date.now(),title:i.type,data:o}})}),e.subscribeAction({before:function(i,r){var o={};i.payload&&(o.payload=i.payload),i._id=hV++,i._time=Date.now(),o.state=r,n.addTimelineEvent({layerId:pp,event:{time:i._time,title:i.type,groupId:i._id,subtitle:"start",data:o}})},after:function(i,r){var o={},l=Date.now()-i._time;o.duration={_custom:{type:"duration",display:l+"ms",tooltip:"Action duration",value:l}},i.payload&&(o.payload=i.payload),o.state=r,n.addTimelineEvent({layerId:pp,event:{time:Date.now(),title:i.type,groupId:i._id,subtitle:"end",data:o}})}})})}var cw=8702998,dV=6710886,pV=16777215,BI={label:"namespaced",textColor:pV,backgroundColor:dV};function WI(t){return t&&t!=="root"?t.split("/").slice(-2,-1)[0]:"Root"}function HI(t,e){return{id:e||"root",label:WI(e),tags:t.namespaced?[BI]:[],children:Object.keys(t._children).map(function(n){return HI(t._children[n],e+n+"/")})}}function VI(t,e,n,i){i.includes(n)&&t.push({id:i||"root",label:i.endsWith("/")?i.slice(0,i.length-1):i||"Root",tags:e.namespaced?[BI]:[]}),Object.keys(e._children).forEach(function(r){VI(t,e._children[r],n,i+r+"/")})}function _V(t,e,n){e=n==="root"?e:e[n];var i=Object.keys(e),r={state:Object.keys(t.state).map(function(l){return{key:l,editable:!0,value:t.state[l]}})};if(i.length){var o=gV(e);r.getters=Object.keys(o).map(function(l){return{key:l.endsWith("/")?WI(l):l,editable:!1,value:I_(function(){return o[l]})}})}return r}function gV(t){var e={};return Object.keys(t).forEach(function(n){var i=n.split("/");if(i.length>1){var r=e,o=i.pop();i.forEach(function(l){r[l]||(r[l]={_custom:{value:{},display:l,tooltip:"Module",abstract:!0}}),r=r[l]._custom.value}),r[o]=I_(function(){return t[n]})}else e[n]=I_(function(){return t[n]})}),e}function mV(t,e){var n=e.split("/").filter(function(i){return i});return n.reduce(function(i,r,o){var l=i[r];if(!l)throw new Error('Missing module "'+r+'" for path "'+e+'".');return o===n.length-1?l:l._children},e==="root"?t:t.root._children)}function I_(t){try{return t()}catch(e){return e}}var pi=function(e,n){this.runtime=n,this._children=Object.create(null),this._rawModule=e;var i=e.state;this.state=(typeof i=="function"?i():i)||{}},jI={namespaced:{configurable:!0}};jI.namespaced.get=function(){return!!this._rawModule.namespaced};pi.prototype.addChild=function(e,n){this._children[e]=n};pi.prototype.removeChild=function(e){delete this._children[e]};pi.prototype.getChild=function(e){return this._children[e]};pi.prototype.hasChild=function(e){return e in this._children};pi.prototype.update=function(e){this._rawModule.namespaced=e.namespaced,e.actions&&(this._rawModule.actions=e.actions),e.mutations&&(this._rawModule.mutations=e.mutations),e.getters&&(this._rawModule.getters=e.getters)};pi.prototype.forEachChild=function(e){fa(this._children,e)};pi.prototype.forEachGetter=function(e){this._rawModule.getters&&fa(this._rawModule.getters,e)};pi.prototype.forEachAction=function(e){this._rawModule.actions&&fa(this._rawModule.actions,e)};pi.prototype.forEachMutation=function(e){this._rawModule.mutations&&fa(this._rawModule.mutations,e)};Object.defineProperties(pi.prototype,jI);var Gs=function(e){this.register([],e,!1)};Gs.prototype.get=function(e){return e.reduce(function(n,i){return n.getChild(i)},this.root)};Gs.prototype.getNamespace=function(e){var n=this.root;return e.reduce(function(i,r){return n=n.getChild(r),i+(n.namespaced?r+"/":"")},"")};Gs.prototype.update=function(e){qI([],this.root,e)};Gs.prototype.register=function(e,n,i){var r=this;i===void 0&&(i=!0);var o=new pi(n,i);if(e.length===0)this.root=o;else{var l=this.get(e.slice(0,-1));l.addChild(e[e.length-1],o)}n.modules&&fa(n.modules,function(u,h){r.register(e.concat(h),u,i)})};Gs.prototype.unregister=function(e){var n=this.get(e.slice(0,-1)),i=e[e.length-1],r=n.getChild(i);r&&r.runtime&&n.removeChild(i)};Gs.prototype.isRegistered=function(e){var n=this.get(e.slice(0,-1)),i=e[e.length-1];return n?n.hasChild(i):!1};function qI(t,e,n){if(e.update(n),n.modules)for(var i in n.modules){if(!e.getChild(i))return;qI(t.concat(i),e.getChild(i),n.modules[i])}}function vV(t){return new wn(t)}var wn=function(e){var n=this;e===void 0&&(e={});var i=e.plugins;i===void 0&&(i=[]);var r=e.strict;r===void 0&&(r=!1);var o=e.devtools;this._committing=!1,this._actions=Object.create(null),this._actionSubscribers=[],this._mutations=Object.create(null),this._wrappedGetters=Object.create(null),this._modules=new Gs(e),this._modulesNamespaceMap=Object.create(null),this._subscribers=[],this._makeLocalGettersCache=Object.create(null),this._devtools=o;var l=this,u=this,h=u.dispatch,d=u.commit;this.dispatch=function(y,b){return h.call(l,y,b)},this.commit=function(y,b,S){return d.call(l,y,b,S)},this.strict=r;var p=this._modules.root.state;ff(this,p,[],this._modules.root),um(this,p),i.forEach(function(g){return g(n)})},fm={state:{configurable:!0}};wn.prototype.install=function(e,n){e.provide(n||tV,this),e.config.globalProperties.$store=this;var i=this._devtools!==void 0?this._devtools:!1;i&&fV(e,this)};fm.state.get=function(){return this._state.data};fm.state.set=function(t){};wn.prototype.commit=function(e,n,i){var r=this,o=gh(e,n,i),l=o.type,u=o.payload,h={type:l,payload:u},d=this._mutations[l];d&&(this._withCommit(function(){d.forEach(function(g){g(u)})}),this._subscribers.slice().forEach(function(p){return p(h,r.state)}))};wn.prototype.dispatch=function(e,n){var i=this,r=gh(e,n),o=r.type,l=r.payload,u={type:o,payload:l},h=this._actions[o];if(h){try{this._actionSubscribers.slice().filter(function(p){return p.before}).forEach(function(p){return p.before(u,i.state)})}catch{}var d=h.length>1?Promise.all(h.map(function(p){return p(l)})):h[0](l);return new Promise(function(p,g){d.then(function(y){try{i._actionSubscribers.filter(function(b){return b.after}).forEach(function(b){return b.after(u,i.state)})}catch{}p(y)},function(y){try{i._actionSubscribers.filter(function(b){return b.error}).forEach(function(b){return b.error(u,i.state,y)})}catch{}g(y)})})}};wn.prototype.subscribe=function(e,n){return $I(e,this._subscribers,n)};wn.prototype.subscribeAction=function(e,n){var i=typeof e=="function"?{before:e}:e;return $I(i,this._actionSubscribers,n)};wn.prototype.watch=function(e,n,i){var r=this;return Rs(function(){return e(r.state,r.getters)},n,Object.assign({},i))};wn.prototype.replaceState=function(e){var n=this;this._withCommit(function(){n._state.data=e})};wn.prototype.registerModule=function(e,n,i){i===void 0&&(i={}),typeof e=="string"&&(e=[e]),this._modules.register(e,n),ff(this,this.state,e,this._modules.get(e),i.preserveState),um(this,this.state)};wn.prototype.unregisterModule=function(e){var n=this;typeof e=="string"&&(e=[e]),this._modules.unregister(e),this._withCommit(function(){var i=hm(n.state,e.slice(0,-1));delete i[e[e.length-1]]}),FI(this)};wn.prototype.hasModule=function(e){return typeof e=="string"&&(e=[e]),this._modules.isRegistered(e)};wn.prototype.hotUpdate=function(e){this._modules.update(e),FI(this,!0)};wn.prototype._withCommit=function(e){var n=this._committing;this._committing=!0,e(),this._committing=n};Object.defineProperties(wn.prototype,fm);const te=vV({state:{rooms:void 0,teams:void 0,users:void 0,squads:void 0,markers:void 0,roomsReady:!1,teamsReady:!1,usersReady:!1,squadsReady:!1,sessionId:void 0,username:void 0,useGPS:!1,gameData:{},currentUser:{},location:{},markerData:{},isAdmin:!1},mutations:{saveRooms(t,e){t.rooms=e,t.roomsReady=!0},saveUsers(t,e){t.users=e,t.usersReady=!0},saveTeams(t,e){t.teams=e,t.teamsReady=!0},saveSquads(t,e){t.squads=e,t.squadsReady=!0},saveMarkers(t,e){t.markers=e},saveUseGPS(t,e){t.useGPS=e},saveSessionId(t,e){t.sessionId=e},saveData(t,e){t.gameData=e},saveUsername(t,e){t.username=e},saveLocation(t,e){t.location=e},saveMarkerData(t,e){t.markerData.markers=e},saveAdminState(t,e){t.isAdmin=e}},actions:{},getters:{dataReady(t){return t.roomsReady&&t.teamsReady&&t.squadsReady&&t.sessionId!=null&&t.usersReady},username(t){return t.username},currentSquad(t){let e=te.getters.sessionId;if(t.squads&&t.users&&t.users[e])return t.users[e].squadId},sessionId(t){return t.sessionId},user(t){if(t.users)return t.users[t.sessionId]},mapCenter(t){if(t.rooms&&t.rooms[Xt.roomId]&&t.rooms[Xt.roomId].map&&t.rooms[Xt.roomId].map.location)return t.rooms[Xt.roomId].map.location},markers(t){return t.markers},spotDurationMS(t){if(!(!t.rooms||!t.rooms[Xt.roomId]))return t.rooms[Xt.roomId].spotDurationMS},useGPS(t){return t.useGPS},isAdmin(t){return t.isAdmin},rooms(t){return t.rooms},users(t){return t.users},teams(t){return t.teams},squads(t){return t.squads},squadsInTeam(t,e){},getSpotMarkers(t){let e=[];if(!te.getters.user||!te.getters.markers)return e;let n=te.getters.user.teamId;return e=Object.keys(te.getters.markers).map(r=>te.getters.markers[r]).filter(r=>r.teamId==n),e},getTeamMarkers(t){let e=[],n=te.getters.sessionId,i=te.getters.user;if(!n||!t.users||!t.users[n]||!t.squads||!t.users)return e;if(te.getters.sessionId){let r=t.users[n].teamId;if(!r||!t.teams)return e;let o=t.teams[r].squadIds;Object.keys(o).forEach(l=>{let u=o[l];if(!t.squads)return;let h=t.squads[u].userIds;h&&Object.keys(h).forEach(d=>{if(!t.squads||!t.users)return;let p=t.users[d];if(p.location){let g=d==n,y=i.squadId==u,b=p.isSquadLeader,S={markerType:"team-member",lat:p.location.lat,long:p.location.long,squadNumber:t.squads[u].squadName.replace("Squad ","")};b&&(S.markerType="squad-leader"),y&&(S.markerType="squad-member"),y&&b&&(S.markerType="squadmate-squad-leader"),g&&(S.markerType="me"),g&&b&&(S.markerType="me-squad-leader"),e.push(S)}})})}return e}}});let uw=!1;const et={uuidv4:()=>{var t=new Date().getTime(),e=typeof performance<"u"&&performance.now&&performance.now()*1e3||0;return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(n){var i=Math.random()*16;return t>0?(i=(t+i)%16|0,t=Math.floor(t/16)):(i=(e+i)%16|0,e=Math.floor(e/16)),(n==="x"?i:i&3|8).toString(16)})},distance:(t,e,n,i,r)=>{if(t==n&&e==i)return 0;var o=Math.PI*t/180,l=Math.PI*n/180,u=e-i,h=Math.PI*u/180,d=Math.sin(o)*Math.sin(l)+Math.cos(o)*Math.cos(l)*Math.cos(h);return d>1&&(d=1),d=Math.acos(d),d=d*180/Math.PI,d=d*60*1.1515,r=="K"&&(d=d*1.609344),r=="N"&&(d=d*.8684),d},getCircularReplacer:()=>{const t=new WeakSet;return(e,n)=>{if(typeof n=="object"&&n!==null){if(t.has(n))return;t.add(n)}return n}},randomRange:(t,e)=>Math.floor(Math.random()*(e-t+1)+t),randomGeo:(t,e)=>{var n=t.lat,i=t.long,r=e/111300,o=Math.random(),l=Math.random(),u=r*Math.sqrt(o),h=2*Math.PI*l,d=u*Math.cos(h),p=u*Math.sin(h),g=d/Math.cos(n),y=p+n,b=d+i,S=g+i;return{latitude:y.toFixed(5),longitude:b.toFixed(5),longitude2:S.toFixed(5),distance:et.CoordDistance(t.lat,t.long,y,b).toFixed(2),distance2:et.CoordDistance(t.lat,t.long,y,S).toFixed(2)}},CoordDistance:(t,e,n,i)=>{var r=6371e3,o=.5-Math.cos((n-t)*Math.PI/180)/2+Math.cos(t*Math.PI/180)*Math.cos(n*Math.PI/180)*(1-Math.cos((i-e)*Math.PI/180))/2;return r*2*Math.asin(Math.sqrt(o))},pathToIndex:t=>{let e=t.split("/"),n={r:e[1],t:e[3],s:e[5]};return e[7]&&(n.p=e[7]),n},error:t=>{console.trace(),console.error(t)},DataCheck:()=>{let t=te.getters.dataReady;t&&!uw&&(ze.emit("data-ready"),uw=!0),t&&ze.emit("data-updated")},formatDistance(t){return t<500?Math.round(t/10)*10:t>=500?Math.round(t/100)*100:t}};var Ha=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},kl={},yV={get exports(){return kl},set exports(t){kl=t}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */(function(t,e){(function(){var n,i="4.17.21",r=200,o="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",l="Expected a function",u="Invalid `variable` option passed into `_.template`",h="__lodash_hash_undefined__",d=500,p="__lodash_placeholder__",g=1,y=2,b=4,S=1,N=2,P=1,G=2,oe=4,H=8,V=16,Q=32,B=64,Z=128,X=256,pe=512,_e=30,Fe="...",ot=800,Xe=16,qt=1,kn=2,We=3,ye=1/0,Te=9007199254740991,kt=17976931348623157e292,dn=0/0,ht=4294967295,Ot=ht-1,ji=ht>>>1,mi=[["ary",Z],["bind",P],["bindKey",G],["curry",H],["curryRight",V],["flip",pe],["partial",Q],["partialRight",B],["rearg",X]],Pt="[object Arguments]",yt="[object Array]",ei="[object AsyncFunction]",Kt="[object Boolean]",Gt="[object Date]",is="[object DOMException]",Pn="[object Error]",w="[object Function]",C="[object GeneratorFunction]",R="[object Map]",M="[object Number]",$="[object Null]",W="[object Object]",z="[object Promise]",q="[object Proxy]",j="[object RegExp]",k="[object Set]",ne="[object String]",J="[object Symbol]",se="[object Undefined]",ae="[object WeakMap]",Ee="[object WeakSet]",ke="[object ArrayBuffer]",Oe="[object DataView]",at="[object Float32Array]",nn="[object Float64Array]",vi="[object Int8Array]",Xs="[object Int16Array]",qi="[object Int32Array]",Qs="[object Uint8Array]",Mt="[object Uint8ClampedArray]",pn="[object Uint16Array]",Js="[object Uint32Array]",eS=/\b__p \+= '';/g,tS=/\b(__p \+=) '' \+/g,nS=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Lm=/&(?:amp|lt|gt|quot|#39);/g,km=/[&<>"']/g,iS=RegExp(Lm.source),rS=RegExp(km.source),sS=/<%-([\s\S]+?)%>/g,oS=/<%([\s\S]+?)%>/g,Pm=/<%=([\s\S]+?)%>/g,aS=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,lS=/^\w*$/,cS=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,If=/[\\^$.*+?()[\]{}|]/g,uS=RegExp(If.source),Af=/^\s+/,hS=/\s/,fS=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,dS=/\{\n\/\* \[wrapped with (.+)\] \*/,pS=/,? & /,_S=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,gS=/[()=,{}\[\]\/\s]/,mS=/\\(\\)?/g,vS=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Mm=/\w*$/,yS=/^[-+]0x[0-9a-f]+$/i,ES=/^0b[01]+$/i,bS=/^\[object .+?Constructor\]$/,wS=/^0o[0-7]+$/i,TS=/^(?:0|[1-9]\d*)$/,CS=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,hc=/($^)/,IS=/['\n\r\u2028\u2029\\]/g,fc="\\ud800-\\udfff",AS="\\u0300-\\u036f",SS="\\ufe20-\\ufe2f",OS="\\u20d0-\\u20ff",$m=AS+SS+OS,Fm="\\u2700-\\u27bf",Um="a-z\\xdf-\\xf6\\xf8-\\xff",NS="\\xac\\xb1\\xd7\\xf7",RS="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",xS="\\u2000-\\u206f",DS=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Bm="A-Z\\xc0-\\xd6\\xd8-\\xde",Wm="\\ufe0e\\ufe0f",Hm=NS+RS+xS+DS,Sf="['’]",LS="["+fc+"]",Vm="["+Hm+"]",dc="["+$m+"]",jm="\\d+",kS="["+Fm+"]",qm="["+Um+"]",Km="[^"+fc+Hm+jm+Fm+Um+Bm+"]",Of="\\ud83c[\\udffb-\\udfff]",PS="(?:"+dc+"|"+Of+")",Gm="[^"+fc+"]",Nf="(?:\\ud83c[\\udde6-\\uddff]){2}",Rf="[\\ud800-\\udbff][\\udc00-\\udfff]",Zs="["+Bm+"]",zm="\\u200d",Ym="(?:"+qm+"|"+Km+")",MS="(?:"+Zs+"|"+Km+")",Xm="(?:"+Sf+"(?:d|ll|m|re|s|t|ve))?",Qm="(?:"+Sf+"(?:D|LL|M|RE|S|T|VE))?",Jm=PS+"?",Zm="["+Wm+"]?",$S="(?:"+zm+"(?:"+[Gm,Nf,Rf].join("|")+")"+Zm+Jm+")*",FS="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",US="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",ev=Zm+Jm+$S,BS="(?:"+[kS,Nf,Rf].join("|")+")"+ev,WS="(?:"+[Gm+dc+"?",dc,Nf,Rf,LS].join("|")+")",HS=RegExp(Sf,"g"),VS=RegExp(dc,"g"),xf=RegExp(Of+"(?="+Of+")|"+WS+ev,"g"),jS=RegExp([Zs+"?"+qm+"+"+Xm+"(?="+[Vm,Zs,"$"].join("|")+")",MS+"+"+Qm+"(?="+[Vm,Zs+Ym,"$"].join("|")+")",Zs+"?"+Ym+"+"+Xm,Zs+"+"+Qm,US,FS,jm,BS].join("|"),"g"),qS=RegExp("["+zm+fc+$m+Wm+"]"),KS=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,GS=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],zS=-1,rt={};rt[at]=rt[nn]=rt[vi]=rt[Xs]=rt[qi]=rt[Qs]=rt[Mt]=rt[pn]=rt[Js]=!0,rt[Pt]=rt[yt]=rt[ke]=rt[Kt]=rt[Oe]=rt[Gt]=rt[Pn]=rt[w]=rt[R]=rt[M]=rt[W]=rt[j]=rt[k]=rt[ne]=rt[ae]=!1;var Je={};Je[Pt]=Je[yt]=Je[ke]=Je[Oe]=Je[Kt]=Je[Gt]=Je[at]=Je[nn]=Je[vi]=Je[Xs]=Je[qi]=Je[R]=Je[M]=Je[W]=Je[j]=Je[k]=Je[ne]=Je[J]=Je[Qs]=Je[Mt]=Je[pn]=Je[Js]=!0,Je[Pn]=Je[w]=Je[ae]=!1;var YS={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"},XS={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},QS={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},JS={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},ZS=parseFloat,eO=parseInt,tv=typeof Ha=="object"&&Ha&&Ha.Object===Object&&Ha,tO=typeof self=="object"&&self&&self.Object===Object&&self,$t=tv||tO||Function("return this")(),Df=e&&!e.nodeType&&e,rs=Df&&!0&&t&&!t.nodeType&&t,nv=rs&&rs.exports===Df,Lf=nv&&tv.process,Mn=function(){try{var I=rs&&rs.require&&rs.require("util").types;return I||Lf&&Lf.binding&&Lf.binding("util")}catch{}}(),iv=Mn&&Mn.isArrayBuffer,rv=Mn&&Mn.isDate,sv=Mn&&Mn.isMap,ov=Mn&&Mn.isRegExp,av=Mn&&Mn.isSet,lv=Mn&&Mn.isTypedArray;function Tn(I,x,O){switch(O.length){case 0:return I.call(x);case 1:return I.call(x,O[0]);case 2:return I.call(x,O[0],O[1]);case 3:return I.call(x,O[0],O[1],O[2])}return I.apply(x,O)}function nO(I,x,O,ee){for(var me=-1,He=I==null?0:I.length;++me<He;){var bt=I[me];x(ee,bt,O(bt),I)}return ee}function $n(I,x){for(var O=-1,ee=I==null?0:I.length;++O<ee&&x(I[O],O,I)!==!1;);return I}function iO(I,x){for(var O=I==null?0:I.length;O--&&x(I[O],O,I)!==!1;);return I}function cv(I,x){for(var O=-1,ee=I==null?0:I.length;++O<ee;)if(!x(I[O],O,I))return!1;return!0}function yr(I,x){for(var O=-1,ee=I==null?0:I.length,me=0,He=[];++O<ee;){var bt=I[O];x(bt,O,I)&&(He[me++]=bt)}return He}function pc(I,x){var O=I==null?0:I.length;return!!O&&eo(I,x,0)>-1}function kf(I,x,O){for(var ee=-1,me=I==null?0:I.length;++ee<me;)if(O(x,I[ee]))return!0;return!1}function lt(I,x){for(var O=-1,ee=I==null?0:I.length,me=Array(ee);++O<ee;)me[O]=x(I[O],O,I);return me}function Er(I,x){for(var O=-1,ee=x.length,me=I.length;++O<ee;)I[me+O]=x[O];return I}function Pf(I,x,O,ee){var me=-1,He=I==null?0:I.length;for(ee&&He&&(O=I[++me]);++me<He;)O=x(O,I[me],me,I);return O}function rO(I,x,O,ee){var me=I==null?0:I.length;for(ee&&me&&(O=I[--me]);me--;)O=x(O,I[me],me,I);return O}function Mf(I,x){for(var O=-1,ee=I==null?0:I.length;++O<ee;)if(x(I[O],O,I))return!0;return!1}var sO=$f("length");function oO(I){return I.split("")}function aO(I){return I.match(_S)||[]}function uv(I,x,O){var ee;return O(I,function(me,He,bt){if(x(me,He,bt))return ee=He,!1}),ee}function _c(I,x,O,ee){for(var me=I.length,He=O+(ee?1:-1);ee?He--:++He<me;)if(x(I[He],He,I))return He;return-1}function eo(I,x,O){return x===x?yO(I,x,O):_c(I,hv,O)}function lO(I,x,O,ee){for(var me=O-1,He=I.length;++me<He;)if(ee(I[me],x))return me;return-1}function hv(I){return I!==I}function fv(I,x){var O=I==null?0:I.length;return O?Uf(I,x)/O:dn}function $f(I){return function(x){return x==null?n:x[I]}}function Ff(I){return function(x){return I==null?n:I[x]}}function dv(I,x,O,ee,me){return me(I,function(He,bt,Qe){O=ee?(ee=!1,He):x(O,He,bt,Qe)}),O}function cO(I,x){var O=I.length;for(I.sort(x);O--;)I[O]=I[O].value;return I}function Uf(I,x){for(var O,ee=-1,me=I.length;++ee<me;){var He=x(I[ee]);He!==n&&(O=O===n?He:O+He)}return O}function Bf(I,x){for(var O=-1,ee=Array(I);++O<I;)ee[O]=x(O);return ee}function uO(I,x){return lt(x,function(O){return[O,I[O]]})}function pv(I){return I&&I.slice(0,vv(I)+1).replace(Af,"")}function Cn(I){return function(x){return I(x)}}function Wf(I,x){return lt(x,function(O){return I[O]})}function wa(I,x){return I.has(x)}function _v(I,x){for(var O=-1,ee=I.length;++O<ee&&eo(x,I[O],0)>-1;);return O}function gv(I,x){for(var O=I.length;O--&&eo(x,I[O],0)>-1;);return O}function hO(I,x){for(var O=I.length,ee=0;O--;)I[O]===x&&++ee;return ee}var fO=Ff(YS),dO=Ff(XS);function pO(I){return"\\"+JS[I]}function _O(I,x){return I==null?n:I[x]}function to(I){return qS.test(I)}function gO(I){return KS.test(I)}function mO(I){for(var x,O=[];!(x=I.next()).done;)O.push(x.value);return O}function Hf(I){var x=-1,O=Array(I.size);return I.forEach(function(ee,me){O[++x]=[me,ee]}),O}function mv(I,x){return function(O){return I(x(O))}}function br(I,x){for(var O=-1,ee=I.length,me=0,He=[];++O<ee;){var bt=I[O];(bt===x||bt===p)&&(I[O]=p,He[me++]=O)}return He}function gc(I){var x=-1,O=Array(I.size);return I.forEach(function(ee){O[++x]=ee}),O}function vO(I){var x=-1,O=Array(I.size);return I.forEach(function(ee){O[++x]=[ee,ee]}),O}function yO(I,x,O){for(var ee=O-1,me=I.length;++ee<me;)if(I[ee]===x)return ee;return-1}function EO(I,x,O){for(var ee=O+1;ee--;)if(I[ee]===x)return ee;return ee}function no(I){return to(I)?wO(I):sO(I)}function ti(I){return to(I)?TO(I):oO(I)}function vv(I){for(var x=I.length;x--&&hS.test(I.charAt(x)););return x}var bO=Ff(QS);function wO(I){for(var x=xf.lastIndex=0;xf.test(I);)++x;return x}function TO(I){return I.match(xf)||[]}function CO(I){return I.match(jS)||[]}var IO=function I(x){x=x==null?$t:io.defaults($t.Object(),x,io.pick($t,GS));var O=x.Array,ee=x.Date,me=x.Error,He=x.Function,bt=x.Math,Qe=x.Object,Vf=x.RegExp,AO=x.String,Fn=x.TypeError,mc=O.prototype,SO=He.prototype,ro=Qe.prototype,vc=x["__core-js_shared__"],yc=SO.toString,Ke=ro.hasOwnProperty,OO=0,yv=function(){var s=/[^.]+$/.exec(vc&&vc.keys&&vc.keys.IE_PROTO||"");return s?"Symbol(src)_1."+s:""}(),Ec=ro.toString,NO=yc.call(Qe),RO=$t._,xO=Vf("^"+yc.call(Ke).replace(If,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),bc=nv?x.Buffer:n,wr=x.Symbol,wc=x.Uint8Array,Ev=bc?bc.allocUnsafe:n,Tc=mv(Qe.getPrototypeOf,Qe),bv=Qe.create,wv=ro.propertyIsEnumerable,Cc=mc.splice,Tv=wr?wr.isConcatSpreadable:n,Ta=wr?wr.iterator:n,ss=wr?wr.toStringTag:n,Ic=function(){try{var s=us(Qe,"defineProperty");return s({},"",{}),s}catch{}}(),DO=x.clearTimeout!==$t.clearTimeout&&x.clearTimeout,LO=ee&&ee.now!==$t.Date.now&&ee.now,kO=x.setTimeout!==$t.setTimeout&&x.setTimeout,Ac=bt.ceil,Sc=bt.floor,jf=Qe.getOwnPropertySymbols,PO=bc?bc.isBuffer:n,Cv=x.isFinite,MO=mc.join,$O=mv(Qe.keys,Qe),wt=bt.max,zt=bt.min,FO=ee.now,UO=x.parseInt,Iv=bt.random,BO=mc.reverse,qf=us(x,"DataView"),Ca=us(x,"Map"),Kf=us(x,"Promise"),so=us(x,"Set"),Ia=us(x,"WeakMap"),Aa=us(Qe,"create"),Oc=Ia&&new Ia,oo={},WO=hs(qf),HO=hs(Ca),VO=hs(Kf),jO=hs(so),qO=hs(Ia),Nc=wr?wr.prototype:n,Sa=Nc?Nc.valueOf:n,Av=Nc?Nc.toString:n;function m(s){if(ft(s)&&!ve(s)&&!(s instanceof Le)){if(s instanceof Un)return s;if(Ke.call(s,"__wrapped__"))return Sy(s)}return new Un(s)}var ao=function(){function s(){}return function(a){if(!ut(a))return{};if(bv)return bv(a);s.prototype=a;var c=new s;return s.prototype=n,c}}();function Rc(){}function Un(s,a){this.__wrapped__=s,this.__actions__=[],this.__chain__=!!a,this.__index__=0,this.__values__=n}m.templateSettings={escape:sS,evaluate:oS,interpolate:Pm,variable:"",imports:{_:m}},m.prototype=Rc.prototype,m.prototype.constructor=m,Un.prototype=ao(Rc.prototype),Un.prototype.constructor=Un;function Le(s){this.__wrapped__=s,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=ht,this.__views__=[]}function KO(){var s=new Le(this.__wrapped__);return s.__actions__=_n(this.__actions__),s.__dir__=this.__dir__,s.__filtered__=this.__filtered__,s.__iteratees__=_n(this.__iteratees__),s.__takeCount__=this.__takeCount__,s.__views__=_n(this.__views__),s}function GO(){if(this.__filtered__){var s=new Le(this);s.__dir__=-1,s.__filtered__=!0}else s=this.clone(),s.__dir__*=-1;return s}function zO(){var s=this.__wrapped__.value(),a=this.__dir__,c=ve(s),f=a<0,_=c?s.length:0,v=o1(0,_,this.__views__),E=v.start,T=v.end,A=T-E,D=f?T:E-1,L=this.__iteratees__,F=L.length,Y=0,ie=zt(A,this.__takeCount__);if(!c||!f&&_==A&&ie==A)return Xv(s,this.__actions__);var ue=[];e:for(;A--&&Y<ie;){D+=a;for(var Ce=-1,he=s[D];++Ce<F;){var xe=L[Ce],Pe=xe.iteratee,Sn=xe.type,on=Pe(he);if(Sn==kn)he=on;else if(!on){if(Sn==qt)continue e;break e}}ue[Y++]=he}return ue}Le.prototype=ao(Rc.prototype),Le.prototype.constructor=Le;function os(s){var a=-1,c=s==null?0:s.length;for(this.clear();++a<c;){var f=s[a];this.set(f[0],f[1])}}function YO(){this.__data__=Aa?Aa(null):{},this.size=0}function XO(s){var a=this.has(s)&&delete this.__data__[s];return this.size-=a?1:0,a}function QO(s){var a=this.__data__;if(Aa){var c=a[s];return c===h?n:c}return Ke.call(a,s)?a[s]:n}function JO(s){var a=this.__data__;return Aa?a[s]!==n:Ke.call(a,s)}function ZO(s,a){var c=this.__data__;return this.size+=this.has(s)?0:1,c[s]=Aa&&a===n?h:a,this}os.prototype.clear=YO,os.prototype.delete=XO,os.prototype.get=QO,os.prototype.has=JO,os.prototype.set=ZO;function Ki(s){var a=-1,c=s==null?0:s.length;for(this.clear();++a<c;){var f=s[a];this.set(f[0],f[1])}}function eN(){this.__data__=[],this.size=0}function tN(s){var a=this.__data__,c=xc(a,s);if(c<0)return!1;var f=a.length-1;return c==f?a.pop():Cc.call(a,c,1),--this.size,!0}function nN(s){var a=this.__data__,c=xc(a,s);return c<0?n:a[c][1]}function iN(s){return xc(this.__data__,s)>-1}function rN(s,a){var c=this.__data__,f=xc(c,s);return f<0?(++this.size,c.push([s,a])):c[f][1]=a,this}Ki.prototype.clear=eN,Ki.prototype.delete=tN,Ki.prototype.get=nN,Ki.prototype.has=iN,Ki.prototype.set=rN;function Gi(s){var a=-1,c=s==null?0:s.length;for(this.clear();++a<c;){var f=s[a];this.set(f[0],f[1])}}function sN(){this.size=0,this.__data__={hash:new os,map:new(Ca||Ki),string:new os}}function oN(s){var a=Vc(this,s).delete(s);return this.size-=a?1:0,a}function aN(s){return Vc(this,s).get(s)}function lN(s){return Vc(this,s).has(s)}function cN(s,a){var c=Vc(this,s),f=c.size;return c.set(s,a),this.size+=c.size==f?0:1,this}Gi.prototype.clear=sN,Gi.prototype.delete=oN,Gi.prototype.get=aN,Gi.prototype.has=lN,Gi.prototype.set=cN;function as(s){var a=-1,c=s==null?0:s.length;for(this.__data__=new Gi;++a<c;)this.add(s[a])}function uN(s){return this.__data__.set(s,h),this}function hN(s){return this.__data__.has(s)}as.prototype.add=as.prototype.push=uN,as.prototype.has=hN;function ni(s){var a=this.__data__=new Ki(s);this.size=a.size}function fN(){this.__data__=new Ki,this.size=0}function dN(s){var a=this.__data__,c=a.delete(s);return this.size=a.size,c}function pN(s){return this.__data__.get(s)}function _N(s){return this.__data__.has(s)}function gN(s,a){var c=this.__data__;if(c instanceof Ki){var f=c.__data__;if(!Ca||f.length<r-1)return f.push([s,a]),this.size=++c.size,this;c=this.__data__=new Gi(f)}return c.set(s,a),this.size=c.size,this}ni.prototype.clear=fN,ni.prototype.delete=dN,ni.prototype.get=pN,ni.prototype.has=_N,ni.prototype.set=gN;function Sv(s,a){var c=ve(s),f=!c&&fs(s),_=!c&&!f&&Sr(s),v=!c&&!f&&!_&&ho(s),E=c||f||_||v,T=E?Bf(s.length,AO):[],A=T.length;for(var D in s)(a||Ke.call(s,D))&&!(E&&(D=="length"||_&&(D=="offset"||D=="parent")||v&&(D=="buffer"||D=="byteLength"||D=="byteOffset")||Qi(D,A)))&&T.push(D);return T}function Ov(s){var a=s.length;return a?s[id(0,a-1)]:n}function mN(s,a){return jc(_n(s),ls(a,0,s.length))}function vN(s){return jc(_n(s))}function Gf(s,a,c){(c!==n&&!ii(s[a],c)||c===n&&!(a in s))&&zi(s,a,c)}function Oa(s,a,c){var f=s[a];(!(Ke.call(s,a)&&ii(f,c))||c===n&&!(a in s))&&zi(s,a,c)}function xc(s,a){for(var c=s.length;c--;)if(ii(s[c][0],a))return c;return-1}function yN(s,a,c,f){return Tr(s,function(_,v,E){a(f,_,c(_),E)}),f}function Nv(s,a){return s&&Ei(a,Nt(a),s)}function EN(s,a){return s&&Ei(a,mn(a),s)}function zi(s,a,c){a=="__proto__"&&Ic?Ic(s,a,{configurable:!0,enumerable:!0,value:c,writable:!0}):s[a]=c}function zf(s,a){for(var c=-1,f=a.length,_=O(f),v=s==null;++c<f;)_[c]=v?n:Od(s,a[c]);return _}function ls(s,a,c){return s===s&&(c!==n&&(s=s<=c?s:c),a!==n&&(s=s>=a?s:a)),s}function Bn(s,a,c,f,_,v){var E,T=a&g,A=a&y,D=a&b;if(c&&(E=_?c(s,f,_,v):c(s)),E!==n)return E;if(!ut(s))return s;var L=ve(s);if(L){if(E=l1(s),!T)return _n(s,E)}else{var F=Yt(s),Y=F==w||F==C;if(Sr(s))return Zv(s,T);if(F==W||F==Pt||Y&&!_){if(E=A||Y?{}:vy(s),!T)return A?QN(s,EN(E,s)):XN(s,Nv(E,s))}else{if(!Je[F])return _?s:{};E=c1(s,F,T)}}v||(v=new ni);var ie=v.get(s);if(ie)return ie;v.set(s,E),Gy(s)?s.forEach(function(he){E.add(Bn(he,a,c,he,s,v))}):qy(s)&&s.forEach(function(he,xe){E.set(xe,Bn(he,a,c,xe,s,v))});var ue=D?A?pd:dd:A?mn:Nt,Ce=L?n:ue(s);return $n(Ce||s,function(he,xe){Ce&&(xe=he,he=s[xe]),Oa(E,xe,Bn(he,a,c,xe,s,v))}),E}function bN(s){var a=Nt(s);return function(c){return Rv(c,s,a)}}function Rv(s,a,c){var f=c.length;if(s==null)return!f;for(s=Qe(s);f--;){var _=c[f],v=a[_],E=s[_];if(E===n&&!(_ in s)||!v(E))return!1}return!0}function xv(s,a,c){if(typeof s!="function")throw new Fn(l);return Pa(function(){s.apply(n,c)},a)}function Na(s,a,c,f){var _=-1,v=pc,E=!0,T=s.length,A=[],D=a.length;if(!T)return A;c&&(a=lt(a,Cn(c))),f?(v=kf,E=!1):a.length>=r&&(v=wa,E=!1,a=new as(a));e:for(;++_<T;){var L=s[_],F=c==null?L:c(L);if(L=f||L!==0?L:0,E&&F===F){for(var Y=D;Y--;)if(a[Y]===F)continue e;A.push(L)}else v(a,F,f)||A.push(L)}return A}var Tr=ry(yi),Dv=ry(Xf,!0);function wN(s,a){var c=!0;return Tr(s,function(f,_,v){return c=!!a(f,_,v),c}),c}function Dc(s,a,c){for(var f=-1,_=s.length;++f<_;){var v=s[f],E=a(v);if(E!=null&&(T===n?E===E&&!An(E):c(E,T)))var T=E,A=v}return A}function TN(s,a,c,f){var _=s.length;for(c=be(c),c<0&&(c=-c>_?0:_+c),f=f===n||f>_?_:be(f),f<0&&(f+=_),f=c>f?0:Yy(f);c<f;)s[c++]=a;return s}function Lv(s,a){var c=[];return Tr(s,function(f,_,v){a(f,_,v)&&c.push(f)}),c}function Ft(s,a,c,f,_){var v=-1,E=s.length;for(c||(c=h1),_||(_=[]);++v<E;){var T=s[v];a>0&&c(T)?a>1?Ft(T,a-1,c,f,_):Er(_,T):f||(_[_.length]=T)}return _}var Yf=sy(),kv=sy(!0);function yi(s,a){return s&&Yf(s,a,Nt)}function Xf(s,a){return s&&kv(s,a,Nt)}function Lc(s,a){return yr(a,function(c){return Ji(s[c])})}function cs(s,a){a=Ir(a,s);for(var c=0,f=a.length;s!=null&&c<f;)s=s[bi(a[c++])];return c&&c==f?s:n}function Pv(s,a,c){var f=a(s);return ve(s)?f:Er(f,c(s))}function rn(s){return s==null?s===n?se:$:ss&&ss in Qe(s)?s1(s):v1(s)}function Qf(s,a){return s>a}function CN(s,a){return s!=null&&Ke.call(s,a)}function IN(s,a){return s!=null&&a in Qe(s)}function AN(s,a,c){return s>=zt(a,c)&&s<wt(a,c)}function Jf(s,a,c){for(var f=c?kf:pc,_=s[0].length,v=s.length,E=v,T=O(v),A=1/0,D=[];E--;){var L=s[E];E&&a&&(L=lt(L,Cn(a))),A=zt(L.length,A),T[E]=!c&&(a||_>=120&&L.length>=120)?new as(E&&L):n}L=s[0];var F=-1,Y=T[0];e:for(;++F<_&&D.length<A;){var ie=L[F],ue=a?a(ie):ie;if(ie=c||ie!==0?ie:0,!(Y?wa(Y,ue):f(D,ue,c))){for(E=v;--E;){var Ce=T[E];if(!(Ce?wa(Ce,ue):f(s[E],ue,c)))continue e}Y&&Y.push(ue),D.push(ie)}}return D}function SN(s,a,c,f){return yi(s,function(_,v,E){a(f,c(_),v,E)}),f}function Ra(s,a,c){a=Ir(a,s),s=wy(s,a);var f=s==null?s:s[bi(Hn(a))];return f==null?n:Tn(f,s,c)}function Mv(s){return ft(s)&&rn(s)==Pt}function ON(s){return ft(s)&&rn(s)==ke}function NN(s){return ft(s)&&rn(s)==Gt}function xa(s,a,c,f,_){return s===a?!0:s==null||a==null||!ft(s)&&!ft(a)?s!==s&&a!==a:RN(s,a,c,f,xa,_)}function RN(s,a,c,f,_,v){var E=ve(s),T=ve(a),A=E?yt:Yt(s),D=T?yt:Yt(a);A=A==Pt?W:A,D=D==Pt?W:D;var L=A==W,F=D==W,Y=A==D;if(Y&&Sr(s)){if(!Sr(a))return!1;E=!0,L=!1}if(Y&&!L)return v||(v=new ni),E||ho(s)?_y(s,a,c,f,_,v):i1(s,a,A,c,f,_,v);if(!(c&S)){var ie=L&&Ke.call(s,"__wrapped__"),ue=F&&Ke.call(a,"__wrapped__");if(ie||ue){var Ce=ie?s.value():s,he=ue?a.value():a;return v||(v=new ni),_(Ce,he,c,f,v)}}return Y?(v||(v=new ni),r1(s,a,c,f,_,v)):!1}function xN(s){return ft(s)&&Yt(s)==R}function Zf(s,a,c,f){var _=c.length,v=_,E=!f;if(s==null)return!v;for(s=Qe(s);_--;){var T=c[_];if(E&&T[2]?T[1]!==s[T[0]]:!(T[0]in s))return!1}for(;++_<v;){T=c[_];var A=T[0],D=s[A],L=T[1];if(E&&T[2]){if(D===n&&!(A in s))return!1}else{var F=new ni;if(f)var Y=f(D,L,A,s,a,F);if(!(Y===n?xa(L,D,S|N,f,F):Y))return!1}}return!0}function $v(s){if(!ut(s)||d1(s))return!1;var a=Ji(s)?xO:bS;return a.test(hs(s))}function DN(s){return ft(s)&&rn(s)==j}function LN(s){return ft(s)&&Yt(s)==k}function kN(s){return ft(s)&&Xc(s.length)&&!!rt[rn(s)]}function Fv(s){return typeof s=="function"?s:s==null?vn:typeof s=="object"?ve(s)?Wv(s[0],s[1]):Bv(s):oE(s)}function ed(s){if(!ka(s))return $O(s);var a=[];for(var c in Qe(s))Ke.call(s,c)&&c!="constructor"&&a.push(c);return a}function PN(s){if(!ut(s))return m1(s);var a=ka(s),c=[];for(var f in s)f=="constructor"&&(a||!Ke.call(s,f))||c.push(f);return c}function td(s,a){return s<a}function Uv(s,a){var c=-1,f=gn(s)?O(s.length):[];return Tr(s,function(_,v,E){f[++c]=a(_,v,E)}),f}function Bv(s){var a=gd(s);return a.length==1&&a[0][2]?Ey(a[0][0],a[0][1]):function(c){return c===s||Zf(c,s,a)}}function Wv(s,a){return vd(s)&&yy(a)?Ey(bi(s),a):function(c){var f=Od(c,s);return f===n&&f===a?Nd(c,s):xa(a,f,S|N)}}function kc(s,a,c,f,_){s!==a&&Yf(a,function(v,E){if(_||(_=new ni),ut(v))MN(s,a,E,c,kc,f,_);else{var T=f?f(Ed(s,E),v,E+"",s,a,_):n;T===n&&(T=v),Gf(s,E,T)}},mn)}function MN(s,a,c,f,_,v,E){var T=Ed(s,c),A=Ed(a,c),D=E.get(A);if(D){Gf(s,c,D);return}var L=v?v(T,A,c+"",s,a,E):n,F=L===n;if(F){var Y=ve(A),ie=!Y&&Sr(A),ue=!Y&&!ie&&ho(A);L=A,Y||ie||ue?ve(T)?L=T:_t(T)?L=_n(T):ie?(F=!1,L=Zv(A,!0)):ue?(F=!1,L=ey(A,!0)):L=[]:Ma(A)||fs(A)?(L=T,fs(T)?L=Xy(T):(!ut(T)||Ji(T))&&(L=vy(A))):F=!1}F&&(E.set(A,L),_(L,A,f,v,E),E.delete(A)),Gf(s,c,L)}function Hv(s,a){var c=s.length;if(c)return a+=a<0?c:0,Qi(a,c)?s[a]:n}function Vv(s,a,c){a.length?a=lt(a,function(v){return ve(v)?function(E){return cs(E,v.length===1?v[0]:v)}:v}):a=[vn];var f=-1;a=lt(a,Cn(ce()));var _=Uv(s,function(v,E,T){var A=lt(a,function(D){return D(v)});return{criteria:A,index:++f,value:v}});return cO(_,function(v,E){return YN(v,E,c)})}function $N(s,a){return jv(s,a,function(c,f){return Nd(s,f)})}function jv(s,a,c){for(var f=-1,_=a.length,v={};++f<_;){var E=a[f],T=cs(s,E);c(T,E)&&Da(v,Ir(E,s),T)}return v}function FN(s){return function(a){return cs(a,s)}}function nd(s,a,c,f){var _=f?lO:eo,v=-1,E=a.length,T=s;for(s===a&&(a=_n(a)),c&&(T=lt(s,Cn(c)));++v<E;)for(var A=0,D=a[v],L=c?c(D):D;(A=_(T,L,A,f))>-1;)T!==s&&Cc.call(T,A,1),Cc.call(s,A,1);return s}function qv(s,a){for(var c=s?a.length:0,f=c-1;c--;){var _=a[c];if(c==f||_!==v){var v=_;Qi(_)?Cc.call(s,_,1):od(s,_)}}return s}function id(s,a){return s+Sc(Iv()*(a-s+1))}function UN(s,a,c,f){for(var _=-1,v=wt(Ac((a-s)/(c||1)),0),E=O(v);v--;)E[f?v:++_]=s,s+=c;return E}function rd(s,a){var c="";if(!s||a<1||a>Te)return c;do a%2&&(c+=s),a=Sc(a/2),a&&(s+=s);while(a);return c}function Se(s,a){return bd(by(s,a,vn),s+"")}function BN(s){return Ov(fo(s))}function WN(s,a){var c=fo(s);return jc(c,ls(a,0,c.length))}function Da(s,a,c,f){if(!ut(s))return s;a=Ir(a,s);for(var _=-1,v=a.length,E=v-1,T=s;T!=null&&++_<v;){var A=bi(a[_]),D=c;if(A==="__proto__"||A==="constructor"||A==="prototype")return s;if(_!=E){var L=T[A];D=f?f(L,A,T):n,D===n&&(D=ut(L)?L:Qi(a[_+1])?[]:{})}Oa(T,A,D),T=T[A]}return s}var Kv=Oc?function(s,a){return Oc.set(s,a),s}:vn,HN=Ic?function(s,a){return Ic(s,"toString",{configurable:!0,enumerable:!1,value:xd(a),writable:!0})}:vn;function VN(s){return jc(fo(s))}function Wn(s,a,c){var f=-1,_=s.length;a<0&&(a=-a>_?0:_+a),c=c>_?_:c,c<0&&(c+=_),_=a>c?0:c-a>>>0,a>>>=0;for(var v=O(_);++f<_;)v[f]=s[f+a];return v}function jN(s,a){var c;return Tr(s,function(f,_,v){return c=a(f,_,v),!c}),!!c}function Pc(s,a,c){var f=0,_=s==null?f:s.length;if(typeof a=="number"&&a===a&&_<=ji){for(;f<_;){var v=f+_>>>1,E=s[v];E!==null&&!An(E)&&(c?E<=a:E<a)?f=v+1:_=v}return _}return sd(s,a,vn,c)}function sd(s,a,c,f){var _=0,v=s==null?0:s.length;if(v===0)return 0;a=c(a);for(var E=a!==a,T=a===null,A=An(a),D=a===n;_<v;){var L=Sc((_+v)/2),F=c(s[L]),Y=F!==n,ie=F===null,ue=F===F,Ce=An(F);if(E)var he=f||ue;else D?he=ue&&(f||Y):T?he=ue&&Y&&(f||!ie):A?he=ue&&Y&&!ie&&(f||!Ce):ie||Ce?he=!1:he=f?F<=a:F<a;he?_=L+1:v=L}return zt(v,Ot)}function Gv(s,a){for(var c=-1,f=s.length,_=0,v=[];++c<f;){var E=s[c],T=a?a(E):E;if(!c||!ii(T,A)){var A=T;v[_++]=E===0?0:E}}return v}function zv(s){return typeof s=="number"?s:An(s)?dn:+s}function In(s){if(typeof s=="string")return s;if(ve(s))return lt(s,In)+"";if(An(s))return Av?Av.call(s):"";var a=s+"";return a=="0"&&1/s==-ye?"-0":a}function Cr(s,a,c){var f=-1,_=pc,v=s.length,E=!0,T=[],A=T;if(c)E=!1,_=kf;else if(v>=r){var D=a?null:t1(s);if(D)return gc(D);E=!1,_=wa,A=new as}else A=a?[]:T;e:for(;++f<v;){var L=s[f],F=a?a(L):L;if(L=c||L!==0?L:0,E&&F===F){for(var Y=A.length;Y--;)if(A[Y]===F)continue e;a&&A.push(F),T.push(L)}else _(A,F,c)||(A!==T&&A.push(F),T.push(L))}return T}function od(s,a){return a=Ir(a,s),s=wy(s,a),s==null||delete s[bi(Hn(a))]}function Yv(s,a,c,f){return Da(s,a,c(cs(s,a)),f)}function Mc(s,a,c,f){for(var _=s.length,v=f?_:-1;(f?v--:++v<_)&&a(s[v],v,s););return c?Wn(s,f?0:v,f?v+1:_):Wn(s,f?v+1:0,f?_:v)}function Xv(s,a){var c=s;return c instanceof Le&&(c=c.value()),Pf(a,function(f,_){return _.func.apply(_.thisArg,Er([f],_.args))},c)}function ad(s,a,c){var f=s.length;if(f<2)return f?Cr(s[0]):[];for(var _=-1,v=O(f);++_<f;)for(var E=s[_],T=-1;++T<f;)T!=_&&(v[_]=Na(v[_]||E,s[T],a,c));return Cr(Ft(v,1),a,c)}function Qv(s,a,c){for(var f=-1,_=s.length,v=a.length,E={};++f<_;){var T=f<v?a[f]:n;c(E,s[f],T)}return E}function ld(s){return _t(s)?s:[]}function cd(s){return typeof s=="function"?s:vn}function Ir(s,a){return ve(s)?s:vd(s,a)?[s]:Ay(je(s))}var qN=Se;function Ar(s,a,c){var f=s.length;return c=c===n?f:c,!a&&c>=f?s:Wn(s,a,c)}var Jv=DO||function(s){return $t.clearTimeout(s)};function Zv(s,a){if(a)return s.slice();var c=s.length,f=Ev?Ev(c):new s.constructor(c);return s.copy(f),f}function ud(s){var a=new s.constructor(s.byteLength);return new wc(a).set(new wc(s)),a}function KN(s,a){var c=a?ud(s.buffer):s.buffer;return new s.constructor(c,s.byteOffset,s.byteLength)}function GN(s){var a=new s.constructor(s.source,Mm.exec(s));return a.lastIndex=s.lastIndex,a}function zN(s){return Sa?Qe(Sa.call(s)):{}}function ey(s,a){var c=a?ud(s.buffer):s.buffer;return new s.constructor(c,s.byteOffset,s.length)}function ty(s,a){if(s!==a){var c=s!==n,f=s===null,_=s===s,v=An(s),E=a!==n,T=a===null,A=a===a,D=An(a);if(!T&&!D&&!v&&s>a||v&&E&&A&&!T&&!D||f&&E&&A||!c&&A||!_)return 1;if(!f&&!v&&!D&&s<a||D&&c&&_&&!f&&!v||T&&c&&_||!E&&_||!A)return-1}return 0}function YN(s,a,c){for(var f=-1,_=s.criteria,v=a.criteria,E=_.length,T=c.length;++f<E;){var A=ty(_[f],v[f]);if(A){if(f>=T)return A;var D=c[f];return A*(D=="desc"?-1:1)}}return s.index-a.index}function ny(s,a,c,f){for(var _=-1,v=s.length,E=c.length,T=-1,A=a.length,D=wt(v-E,0),L=O(A+D),F=!f;++T<A;)L[T]=a[T];for(;++_<E;)(F||_<v)&&(L[c[_]]=s[_]);for(;D--;)L[T++]=s[_++];return L}function iy(s,a,c,f){for(var _=-1,v=s.length,E=-1,T=c.length,A=-1,D=a.length,L=wt(v-T,0),F=O(L+D),Y=!f;++_<L;)F[_]=s[_];for(var ie=_;++A<D;)F[ie+A]=a[A];for(;++E<T;)(Y||_<v)&&(F[ie+c[E]]=s[_++]);return F}function _n(s,a){var c=-1,f=s.length;for(a||(a=O(f));++c<f;)a[c]=s[c];return a}function Ei(s,a,c,f){var _=!c;c||(c={});for(var v=-1,E=a.length;++v<E;){var T=a[v],A=f?f(c[T],s[T],T,c,s):n;A===n&&(A=s[T]),_?zi(c,T,A):Oa(c,T,A)}return c}function XN(s,a){return Ei(s,md(s),a)}function QN(s,a){return Ei(s,gy(s),a)}function $c(s,a){return function(c,f){var _=ve(c)?nO:yN,v=a?a():{};return _(c,s,ce(f,2),v)}}function lo(s){return Se(function(a,c){var f=-1,_=c.length,v=_>1?c[_-1]:n,E=_>2?c[2]:n;for(v=s.length>3&&typeof v=="function"?(_--,v):n,E&&sn(c[0],c[1],E)&&(v=_<3?n:v,_=1),a=Qe(a);++f<_;){var T=c[f];T&&s(a,T,f,v)}return a})}function ry(s,a){return function(c,f){if(c==null)return c;if(!gn(c))return s(c,f);for(var _=c.length,v=a?_:-1,E=Qe(c);(a?v--:++v<_)&&f(E[v],v,E)!==!1;);return c}}function sy(s){return function(a,c,f){for(var _=-1,v=Qe(a),E=f(a),T=E.length;T--;){var A=E[s?T:++_];if(c(v[A],A,v)===!1)break}return a}}function JN(s,a,c){var f=a&P,_=La(s);function v(){var E=this&&this!==$t&&this instanceof v?_:s;return E.apply(f?c:this,arguments)}return v}function oy(s){return function(a){a=je(a);var c=to(a)?ti(a):n,f=c?c[0]:a.charAt(0),_=c?Ar(c,1).join(""):a.slice(1);return f[s]()+_}}function co(s){return function(a){return Pf(rE(iE(a).replace(HS,"")),s,"")}}function La(s){return function(){var a=arguments;switch(a.length){case 0:return new s;case 1:return new s(a[0]);case 2:return new s(a[0],a[1]);case 3:return new s(a[0],a[1],a[2]);case 4:return new s(a[0],a[1],a[2],a[3]);case 5:return new s(a[0],a[1],a[2],a[3],a[4]);case 6:return new s(a[0],a[1],a[2],a[3],a[4],a[5]);case 7:return new s(a[0],a[1],a[2],a[3],a[4],a[5],a[6])}var c=ao(s.prototype),f=s.apply(c,a);return ut(f)?f:c}}function ZN(s,a,c){var f=La(s);function _(){for(var v=arguments.length,E=O(v),T=v,A=uo(_);T--;)E[T]=arguments[T];var D=v<3&&E[0]!==A&&E[v-1]!==A?[]:br(E,A);if(v-=D.length,v<c)return hy(s,a,Fc,_.placeholder,n,E,D,n,n,c-v);var L=this&&this!==$t&&this instanceof _?f:s;return Tn(L,this,E)}return _}function ay(s){return function(a,c,f){var _=Qe(a);if(!gn(a)){var v=ce(c,3);a=Nt(a),c=function(T){return v(_[T],T,_)}}var E=s(a,c,f);return E>-1?_[v?a[E]:E]:n}}function ly(s){return Xi(function(a){var c=a.length,f=c,_=Un.prototype.thru;for(s&&a.reverse();f--;){var v=a[f];if(typeof v!="function")throw new Fn(l);if(_&&!E&&Hc(v)=="wrapper")var E=new Un([],!0)}for(f=E?f:c;++f<c;){v=a[f];var T=Hc(v),A=T=="wrapper"?_d(v):n;A&&yd(A[0])&&A[1]==(Z|H|Q|X)&&!A[4].length&&A[9]==1?E=E[Hc(A[0])].apply(E,A[3]):E=v.length==1&&yd(v)?E[T]():E.thru(v)}return function(){var D=arguments,L=D[0];if(E&&D.length==1&&ve(L))return E.plant(L).value();for(var F=0,Y=c?a[F].apply(this,D):L;++F<c;)Y=a[F].call(this,Y);return Y}})}function Fc(s,a,c,f,_,v,E,T,A,D){var L=a&Z,F=a&P,Y=a&G,ie=a&(H|V),ue=a&pe,Ce=Y?n:La(s);function he(){for(var xe=arguments.length,Pe=O(xe),Sn=xe;Sn--;)Pe[Sn]=arguments[Sn];if(ie)var on=uo(he),On=hO(Pe,on);if(f&&(Pe=ny(Pe,f,_,ie)),v&&(Pe=iy(Pe,v,E,ie)),xe-=On,ie&&xe<D){var gt=br(Pe,on);return hy(s,a,Fc,he.placeholder,c,Pe,gt,T,A,D-xe)}var ri=F?c:this,er=Y?ri[s]:s;return xe=Pe.length,T?Pe=y1(Pe,T):ue&&xe>1&&Pe.reverse(),L&&A<xe&&(Pe.length=A),this&&this!==$t&&this instanceof he&&(er=Ce||La(er)),er.apply(ri,Pe)}return he}function cy(s,a){return function(c,f){return SN(c,s,a(f),{})}}function Uc(s,a){return function(c,f){var _;if(c===n&&f===n)return a;if(c!==n&&(_=c),f!==n){if(_===n)return f;typeof c=="string"||typeof f=="string"?(c=In(c),f=In(f)):(c=zv(c),f=zv(f)),_=s(c,f)}return _}}function hd(s){return Xi(function(a){return a=lt(a,Cn(ce())),Se(function(c){var f=this;return s(a,function(_){return Tn(_,f,c)})})})}function Bc(s,a){a=a===n?" ":In(a);var c=a.length;if(c<2)return c?rd(a,s):a;var f=rd(a,Ac(s/no(a)));return to(a)?Ar(ti(f),0,s).join(""):f.slice(0,s)}function e1(s,a,c,f){var _=a&P,v=La(s);function E(){for(var T=-1,A=arguments.length,D=-1,L=f.length,F=O(L+A),Y=this&&this!==$t&&this instanceof E?v:s;++D<L;)F[D]=f[D];for(;A--;)F[D++]=arguments[++T];return Tn(Y,_?c:this,F)}return E}function uy(s){return function(a,c,f){return f&&typeof f!="number"&&sn(a,c,f)&&(c=f=n),a=Zi(a),c===n?(c=a,a=0):c=Zi(c),f=f===n?a<c?1:-1:Zi(f),UN(a,c,f,s)}}function Wc(s){return function(a,c){return typeof a=="string"&&typeof c=="string"||(a=Vn(a),c=Vn(c)),s(a,c)}}function hy(s,a,c,f,_,v,E,T,A,D){var L=a&H,F=L?E:n,Y=L?n:E,ie=L?v:n,ue=L?n:v;a|=L?Q:B,a&=~(L?B:Q),a&oe||(a&=~(P|G));var Ce=[s,a,_,ie,F,ue,Y,T,A,D],he=c.apply(n,Ce);return yd(s)&&Ty(he,Ce),he.placeholder=f,Cy(he,s,a)}function fd(s){var a=bt[s];return function(c,f){if(c=Vn(c),f=f==null?0:zt(be(f),292),f&&Cv(c)){var _=(je(c)+"e").split("e"),v=a(_[0]+"e"+(+_[1]+f));return _=(je(v)+"e").split("e"),+(_[0]+"e"+(+_[1]-f))}return a(c)}}var t1=so&&1/gc(new so([,-0]))[1]==ye?function(s){return new so(s)}:kd;function fy(s){return function(a){var c=Yt(a);return c==R?Hf(a):c==k?vO(a):uO(a,s(a))}}function Yi(s,a,c,f,_,v,E,T){var A=a&G;if(!A&&typeof s!="function")throw new Fn(l);var D=f?f.length:0;if(D||(a&=~(Q|B),f=_=n),E=E===n?E:wt(be(E),0),T=T===n?T:be(T),D-=_?_.length:0,a&B){var L=f,F=_;f=_=n}var Y=A?n:_d(s),ie=[s,a,c,f,_,L,F,v,E,T];if(Y&&g1(ie,Y),s=ie[0],a=ie[1],c=ie[2],f=ie[3],_=ie[4],T=ie[9]=ie[9]===n?A?0:s.length:wt(ie[9]-D,0),!T&&a&(H|V)&&(a&=~(H|V)),!a||a==P)var ue=JN(s,a,c);else a==H||a==V?ue=ZN(s,a,T):(a==Q||a==(P|Q))&&!_.length?ue=e1(s,a,c,f):ue=Fc.apply(n,ie);var Ce=Y?Kv:Ty;return Cy(Ce(ue,ie),s,a)}function dy(s,a,c,f){return s===n||ii(s,ro[c])&&!Ke.call(f,c)?a:s}function py(s,a,c,f,_,v){return ut(s)&&ut(a)&&(v.set(a,s),kc(s,a,n,py,v),v.delete(a)),s}function n1(s){return Ma(s)?n:s}function _y(s,a,c,f,_,v){var E=c&S,T=s.length,A=a.length;if(T!=A&&!(E&&A>T))return!1;var D=v.get(s),L=v.get(a);if(D&&L)return D==a&&L==s;var F=-1,Y=!0,ie=c&N?new as:n;for(v.set(s,a),v.set(a,s);++F<T;){var ue=s[F],Ce=a[F];if(f)var he=E?f(Ce,ue,F,a,s,v):f(ue,Ce,F,s,a,v);if(he!==n){if(he)continue;Y=!1;break}if(ie){if(!Mf(a,function(xe,Pe){if(!wa(ie,Pe)&&(ue===xe||_(ue,xe,c,f,v)))return ie.push(Pe)})){Y=!1;break}}else if(!(ue===Ce||_(ue,Ce,c,f,v))){Y=!1;break}}return v.delete(s),v.delete(a),Y}function i1(s,a,c,f,_,v,E){switch(c){case Oe:if(s.byteLength!=a.byteLength||s.byteOffset!=a.byteOffset)return!1;s=s.buffer,a=a.buffer;case ke:return!(s.byteLength!=a.byteLength||!v(new wc(s),new wc(a)));case Kt:case Gt:case M:return ii(+s,+a);case Pn:return s.name==a.name&&s.message==a.message;case j:case ne:return s==a+"";case R:var T=Hf;case k:var A=f&S;if(T||(T=gc),s.size!=a.size&&!A)return!1;var D=E.get(s);if(D)return D==a;f|=N,E.set(s,a);var L=_y(T(s),T(a),f,_,v,E);return E.delete(s),L;case J:if(Sa)return Sa.call(s)==Sa.call(a)}return!1}function r1(s,a,c,f,_,v){var E=c&S,T=dd(s),A=T.length,D=dd(a),L=D.length;if(A!=L&&!E)return!1;for(var F=A;F--;){var Y=T[F];if(!(E?Y in a:Ke.call(a,Y)))return!1}var ie=v.get(s),ue=v.get(a);if(ie&&ue)return ie==a&&ue==s;var Ce=!0;v.set(s,a),v.set(a,s);for(var he=E;++F<A;){Y=T[F];var xe=s[Y],Pe=a[Y];if(f)var Sn=E?f(Pe,xe,Y,a,s,v):f(xe,Pe,Y,s,a,v);if(!(Sn===n?xe===Pe||_(xe,Pe,c,f,v):Sn)){Ce=!1;break}he||(he=Y=="constructor")}if(Ce&&!he){var on=s.constructor,On=a.constructor;on!=On&&"constructor"in s&&"constructor"in a&&!(typeof on=="function"&&on instanceof on&&typeof On=="function"&&On instanceof On)&&(Ce=!1)}return v.delete(s),v.delete(a),Ce}function Xi(s){return bd(by(s,n,Ry),s+"")}function dd(s){return Pv(s,Nt,md)}function pd(s){return Pv(s,mn,gy)}var _d=Oc?function(s){return Oc.get(s)}:kd;function Hc(s){for(var a=s.name+"",c=oo[a],f=Ke.call(oo,a)?c.length:0;f--;){var _=c[f],v=_.func;if(v==null||v==s)return _.name}return a}function uo(s){var a=Ke.call(m,"placeholder")?m:s;return a.placeholder}function ce(){var s=m.iteratee||Dd;return s=s===Dd?Fv:s,arguments.length?s(arguments[0],arguments[1]):s}function Vc(s,a){var c=s.__data__;return f1(a)?c[typeof a=="string"?"string":"hash"]:c.map}function gd(s){for(var a=Nt(s),c=a.length;c--;){var f=a[c],_=s[f];a[c]=[f,_,yy(_)]}return a}function us(s,a){var c=_O(s,a);return $v(c)?c:n}function s1(s){var a=Ke.call(s,ss),c=s[ss];try{s[ss]=n;var f=!0}catch{}var _=Ec.call(s);return f&&(a?s[ss]=c:delete s[ss]),_}var md=jf?function(s){return s==null?[]:(s=Qe(s),yr(jf(s),function(a){return wv.call(s,a)}))}:Pd,gy=jf?function(s){for(var a=[];s;)Er(a,md(s)),s=Tc(s);return a}:Pd,Yt=rn;(qf&&Yt(new qf(new ArrayBuffer(1)))!=Oe||Ca&&Yt(new Ca)!=R||Kf&&Yt(Kf.resolve())!=z||so&&Yt(new so)!=k||Ia&&Yt(new Ia)!=ae)&&(Yt=function(s){var a=rn(s),c=a==W?s.constructor:n,f=c?hs(c):"";if(f)switch(f){case WO:return Oe;case HO:return R;case VO:return z;case jO:return k;case qO:return ae}return a});function o1(s,a,c){for(var f=-1,_=c.length;++f<_;){var v=c[f],E=v.size;switch(v.type){case"drop":s+=E;break;case"dropRight":a-=E;break;case"take":a=zt(a,s+E);break;case"takeRight":s=wt(s,a-E);break}}return{start:s,end:a}}function a1(s){var a=s.match(dS);return a?a[1].split(pS):[]}function my(s,a,c){a=Ir(a,s);for(var f=-1,_=a.length,v=!1;++f<_;){var E=bi(a[f]);if(!(v=s!=null&&c(s,E)))break;s=s[E]}return v||++f!=_?v:(_=s==null?0:s.length,!!_&&Xc(_)&&Qi(E,_)&&(ve(s)||fs(s)))}function l1(s){var a=s.length,c=new s.constructor(a);return a&&typeof s[0]=="string"&&Ke.call(s,"index")&&(c.index=s.index,c.input=s.input),c}function vy(s){return typeof s.constructor=="function"&&!ka(s)?ao(Tc(s)):{}}function c1(s,a,c){var f=s.constructor;switch(a){case ke:return ud(s);case Kt:case Gt:return new f(+s);case Oe:return KN(s,c);case at:case nn:case vi:case Xs:case qi:case Qs:case Mt:case pn:case Js:return ey(s,c);case R:return new f;case M:case ne:return new f(s);case j:return GN(s);case k:return new f;case J:return zN(s)}}function u1(s,a){var c=a.length;if(!c)return s;var f=c-1;return a[f]=(c>1?"& ":"")+a[f],a=a.join(c>2?", ":" "),s.replace(fS,`{
/* [wrapped with `+a+`] */
`)}function h1(s){return ve(s)||fs(s)||!!(Tv&&s&&s[Tv])}function Qi(s,a){var c=typeof s;return a=a??Te,!!a&&(c=="number"||c!="symbol"&&TS.test(s))&&s>-1&&s%1==0&&s<a}function sn(s,a,c){if(!ut(c))return!1;var f=typeof a;return(f=="number"?gn(c)&&Qi(a,c.length):f=="string"&&a in c)?ii(c[a],s):!1}function vd(s,a){if(ve(s))return!1;var c=typeof s;return c=="number"||c=="symbol"||c=="boolean"||s==null||An(s)?!0:lS.test(s)||!aS.test(s)||a!=null&&s in Qe(a)}function f1(s){var a=typeof s;return a=="string"||a=="number"||a=="symbol"||a=="boolean"?s!=="__proto__":s===null}function yd(s){var a=Hc(s),c=m[a];if(typeof c!="function"||!(a in Le.prototype))return!1;if(s===c)return!0;var f=_d(c);return!!f&&s===f[0]}function d1(s){return!!yv&&yv in s}var p1=vc?Ji:Md;function ka(s){var a=s&&s.constructor,c=typeof a=="function"&&a.prototype||ro;return s===c}function yy(s){return s===s&&!ut(s)}function Ey(s,a){return function(c){return c==null?!1:c[s]===a&&(a!==n||s in Qe(c))}}function _1(s){var a=zc(s,function(f){return c.size===d&&c.clear(),f}),c=a.cache;return a}function g1(s,a){var c=s[1],f=a[1],_=c|f,v=_<(P|G|Z),E=f==Z&&c==H||f==Z&&c==X&&s[7].length<=a[8]||f==(Z|X)&&a[7].length<=a[8]&&c==H;if(!(v||E))return s;f&P&&(s[2]=a[2],_|=c&P?0:oe);var T=a[3];if(T){var A=s[3];s[3]=A?ny(A,T,a[4]):T,s[4]=A?br(s[3],p):a[4]}return T=a[5],T&&(A=s[5],s[5]=A?iy(A,T,a[6]):T,s[6]=A?br(s[5],p):a[6]),T=a[7],T&&(s[7]=T),f&Z&&(s[8]=s[8]==null?a[8]:zt(s[8],a[8])),s[9]==null&&(s[9]=a[9]),s[0]=a[0],s[1]=_,s}function m1(s){var a=[];if(s!=null)for(var c in Qe(s))a.push(c);return a}function v1(s){return Ec.call(s)}function by(s,a,c){return a=wt(a===n?s.length-1:a,0),function(){for(var f=arguments,_=-1,v=wt(f.length-a,0),E=O(v);++_<v;)E[_]=f[a+_];_=-1;for(var T=O(a+1);++_<a;)T[_]=f[_];return T[a]=c(E),Tn(s,this,T)}}function wy(s,a){return a.length<2?s:cs(s,Wn(a,0,-1))}function y1(s,a){for(var c=s.length,f=zt(a.length,c),_=_n(s);f--;){var v=a[f];s[f]=Qi(v,c)?_[v]:n}return s}function Ed(s,a){if(!(a==="constructor"&&typeof s[a]=="function")&&a!="__proto__")return s[a]}var Ty=Iy(Kv),Pa=kO||function(s,a){return $t.setTimeout(s,a)},bd=Iy(HN);function Cy(s,a,c){var f=a+"";return bd(s,u1(f,E1(a1(f),c)))}function Iy(s){var a=0,c=0;return function(){var f=FO(),_=Xe-(f-c);if(c=f,_>0){if(++a>=ot)return arguments[0]}else a=0;return s.apply(n,arguments)}}function jc(s,a){var c=-1,f=s.length,_=f-1;for(a=a===n?f:a;++c<a;){var v=id(c,_),E=s[v];s[v]=s[c],s[c]=E}return s.length=a,s}var Ay=_1(function(s){var a=[];return s.charCodeAt(0)===46&&a.push(""),s.replace(cS,function(c,f,_,v){a.push(_?v.replace(mS,"$1"):f||c)}),a});function bi(s){if(typeof s=="string"||An(s))return s;var a=s+"";return a=="0"&&1/s==-ye?"-0":a}function hs(s){if(s!=null){try{return yc.call(s)}catch{}try{return s+""}catch{}}return""}function E1(s,a){return $n(mi,function(c){var f="_."+c[0];a&c[1]&&!pc(s,f)&&s.push(f)}),s.sort()}function Sy(s){if(s instanceof Le)return s.clone();var a=new Un(s.__wrapped__,s.__chain__);return a.__actions__=_n(s.__actions__),a.__index__=s.__index__,a.__values__=s.__values__,a}function b1(s,a,c){(c?sn(s,a,c):a===n)?a=1:a=wt(be(a),0);var f=s==null?0:s.length;if(!f||a<1)return[];for(var _=0,v=0,E=O(Ac(f/a));_<f;)E[v++]=Wn(s,_,_+=a);return E}function w1(s){for(var a=-1,c=s==null?0:s.length,f=0,_=[];++a<c;){var v=s[a];v&&(_[f++]=v)}return _}function T1(){var s=arguments.length;if(!s)return[];for(var a=O(s-1),c=arguments[0],f=s;f--;)a[f-1]=arguments[f];return Er(ve(c)?_n(c):[c],Ft(a,1))}var C1=Se(function(s,a){return _t(s)?Na(s,Ft(a,1,_t,!0)):[]}),I1=Se(function(s,a){var c=Hn(a);return _t(c)&&(c=n),_t(s)?Na(s,Ft(a,1,_t,!0),ce(c,2)):[]}),A1=Se(function(s,a){var c=Hn(a);return _t(c)&&(c=n),_t(s)?Na(s,Ft(a,1,_t,!0),n,c):[]});function S1(s,a,c){var f=s==null?0:s.length;return f?(a=c||a===n?1:be(a),Wn(s,a<0?0:a,f)):[]}function O1(s,a,c){var f=s==null?0:s.length;return f?(a=c||a===n?1:be(a),a=f-a,Wn(s,0,a<0?0:a)):[]}function N1(s,a){return s&&s.length?Mc(s,ce(a,3),!0,!0):[]}function R1(s,a){return s&&s.length?Mc(s,ce(a,3),!0):[]}function x1(s,a,c,f){var _=s==null?0:s.length;return _?(c&&typeof c!="number"&&sn(s,a,c)&&(c=0,f=_),TN(s,a,c,f)):[]}function Oy(s,a,c){var f=s==null?0:s.length;if(!f)return-1;var _=c==null?0:be(c);return _<0&&(_=wt(f+_,0)),_c(s,ce(a,3),_)}function Ny(s,a,c){var f=s==null?0:s.length;if(!f)return-1;var _=f-1;return c!==n&&(_=be(c),_=c<0?wt(f+_,0):zt(_,f-1)),_c(s,ce(a,3),_,!0)}function Ry(s){var a=s==null?0:s.length;return a?Ft(s,1):[]}function D1(s){var a=s==null?0:s.length;return a?Ft(s,ye):[]}function L1(s,a){var c=s==null?0:s.length;return c?(a=a===n?1:be(a),Ft(s,a)):[]}function k1(s){for(var a=-1,c=s==null?0:s.length,f={};++a<c;){var _=s[a];f[_[0]]=_[1]}return f}function xy(s){return s&&s.length?s[0]:n}function P1(s,a,c){var f=s==null?0:s.length;if(!f)return-1;var _=c==null?0:be(c);return _<0&&(_=wt(f+_,0)),eo(s,a,_)}function M1(s){var a=s==null?0:s.length;return a?Wn(s,0,-1):[]}var $1=Se(function(s){var a=lt(s,ld);return a.length&&a[0]===s[0]?Jf(a):[]}),F1=Se(function(s){var a=Hn(s),c=lt(s,ld);return a===Hn(c)?a=n:c.pop(),c.length&&c[0]===s[0]?Jf(c,ce(a,2)):[]}),U1=Se(function(s){var a=Hn(s),c=lt(s,ld);return a=typeof a=="function"?a:n,a&&c.pop(),c.length&&c[0]===s[0]?Jf(c,n,a):[]});function B1(s,a){return s==null?"":MO.call(s,a)}function Hn(s){var a=s==null?0:s.length;return a?s[a-1]:n}function W1(s,a,c){var f=s==null?0:s.length;if(!f)return-1;var _=f;return c!==n&&(_=be(c),_=_<0?wt(f+_,0):zt(_,f-1)),a===a?EO(s,a,_):_c(s,hv,_,!0)}function H1(s,a){return s&&s.length?Hv(s,be(a)):n}var V1=Se(Dy);function Dy(s,a){return s&&s.length&&a&&a.length?nd(s,a):s}function j1(s,a,c){return s&&s.length&&a&&a.length?nd(s,a,ce(c,2)):s}function q1(s,a,c){return s&&s.length&&a&&a.length?nd(s,a,n,c):s}var K1=Xi(function(s,a){var c=s==null?0:s.length,f=zf(s,a);return qv(s,lt(a,function(_){return Qi(_,c)?+_:_}).sort(ty)),f});function G1(s,a){var c=[];if(!(s&&s.length))return c;var f=-1,_=[],v=s.length;for(a=ce(a,3);++f<v;){var E=s[f];a(E,f,s)&&(c.push(E),_.push(f))}return qv(s,_),c}function wd(s){return s==null?s:BO.call(s)}function z1(s,a,c){var f=s==null?0:s.length;return f?(c&&typeof c!="number"&&sn(s,a,c)?(a=0,c=f):(a=a==null?0:be(a),c=c===n?f:be(c)),Wn(s,a,c)):[]}function Y1(s,a){return Pc(s,a)}function X1(s,a,c){return sd(s,a,ce(c,2))}function Q1(s,a){var c=s==null?0:s.length;if(c){var f=Pc(s,a);if(f<c&&ii(s[f],a))return f}return-1}function J1(s,a){return Pc(s,a,!0)}function Z1(s,a,c){return sd(s,a,ce(c,2),!0)}function eR(s,a){var c=s==null?0:s.length;if(c){var f=Pc(s,a,!0)-1;if(ii(s[f],a))return f}return-1}function tR(s){return s&&s.length?Gv(s):[]}function nR(s,a){return s&&s.length?Gv(s,ce(a,2)):[]}function iR(s){var a=s==null?0:s.length;return a?Wn(s,1,a):[]}function rR(s,a,c){return s&&s.length?(a=c||a===n?1:be(a),Wn(s,0,a<0?0:a)):[]}function sR(s,a,c){var f=s==null?0:s.length;return f?(a=c||a===n?1:be(a),a=f-a,Wn(s,a<0?0:a,f)):[]}function oR(s,a){return s&&s.length?Mc(s,ce(a,3),!1,!0):[]}function aR(s,a){return s&&s.length?Mc(s,ce(a,3)):[]}var lR=Se(function(s){return Cr(Ft(s,1,_t,!0))}),cR=Se(function(s){var a=Hn(s);return _t(a)&&(a=n),Cr(Ft(s,1,_t,!0),ce(a,2))}),uR=Se(function(s){var a=Hn(s);return a=typeof a=="function"?a:n,Cr(Ft(s,1,_t,!0),n,a)});function hR(s){return s&&s.length?Cr(s):[]}function fR(s,a){return s&&s.length?Cr(s,ce(a,2)):[]}function dR(s,a){return a=typeof a=="function"?a:n,s&&s.length?Cr(s,n,a):[]}function Td(s){if(!(s&&s.length))return[];var a=0;return s=yr(s,function(c){if(_t(c))return a=wt(c.length,a),!0}),Bf(a,function(c){return lt(s,$f(c))})}function Ly(s,a){if(!(s&&s.length))return[];var c=Td(s);return a==null?c:lt(c,function(f){return Tn(a,n,f)})}var pR=Se(function(s,a){return _t(s)?Na(s,a):[]}),_R=Se(function(s){return ad(yr(s,_t))}),gR=Se(function(s){var a=Hn(s);return _t(a)&&(a=n),ad(yr(s,_t),ce(a,2))}),mR=Se(function(s){var a=Hn(s);return a=typeof a=="function"?a:n,ad(yr(s,_t),n,a)}),vR=Se(Td);function yR(s,a){return Qv(s||[],a||[],Oa)}function ER(s,a){return Qv(s||[],a||[],Da)}var bR=Se(function(s){var a=s.length,c=a>1?s[a-1]:n;return c=typeof c=="function"?(s.pop(),c):n,Ly(s,c)});function ky(s){var a=m(s);return a.__chain__=!0,a}function wR(s,a){return a(s),s}function qc(s,a){return a(s)}var TR=Xi(function(s){var a=s.length,c=a?s[0]:0,f=this.__wrapped__,_=function(v){return zf(v,s)};return a>1||this.__actions__.length||!(f instanceof Le)||!Qi(c)?this.thru(_):(f=f.slice(c,+c+(a?1:0)),f.__actions__.push({func:qc,args:[_],thisArg:n}),new Un(f,this.__chain__).thru(function(v){return a&&!v.length&&v.push(n),v}))});function CR(){return ky(this)}function IR(){return new Un(this.value(),this.__chain__)}function AR(){this.__values__===n&&(this.__values__=zy(this.value()));var s=this.__index__>=this.__values__.length,a=s?n:this.__values__[this.__index__++];return{done:s,value:a}}function SR(){return this}function OR(s){for(var a,c=this;c instanceof Rc;){var f=Sy(c);f.__index__=0,f.__values__=n,a?_.__wrapped__=f:a=f;var _=f;c=c.__wrapped__}return _.__wrapped__=s,a}function NR(){var s=this.__wrapped__;if(s instanceof Le){var a=s;return this.__actions__.length&&(a=new Le(this)),a=a.reverse(),a.__actions__.push({func:qc,args:[wd],thisArg:n}),new Un(a,this.__chain__)}return this.thru(wd)}function RR(){return Xv(this.__wrapped__,this.__actions__)}var xR=$c(function(s,a,c){Ke.call(s,c)?++s[c]:zi(s,c,1)});function DR(s,a,c){var f=ve(s)?cv:wN;return c&&sn(s,a,c)&&(a=n),f(s,ce(a,3))}function LR(s,a){var c=ve(s)?yr:Lv;return c(s,ce(a,3))}var kR=ay(Oy),PR=ay(Ny);function MR(s,a){return Ft(Kc(s,a),1)}function $R(s,a){return Ft(Kc(s,a),ye)}function FR(s,a,c){return c=c===n?1:be(c),Ft(Kc(s,a),c)}function Py(s,a){var c=ve(s)?$n:Tr;return c(s,ce(a,3))}function My(s,a){var c=ve(s)?iO:Dv;return c(s,ce(a,3))}var UR=$c(function(s,a,c){Ke.call(s,c)?s[c].push(a):zi(s,c,[a])});function BR(s,a,c,f){s=gn(s)?s:fo(s),c=c&&!f?be(c):0;var _=s.length;return c<0&&(c=wt(_+c,0)),Qc(s)?c<=_&&s.indexOf(a,c)>-1:!!_&&eo(s,a,c)>-1}var WR=Se(function(s,a,c){var f=-1,_=typeof a=="function",v=gn(s)?O(s.length):[];return Tr(s,function(E){v[++f]=_?Tn(a,E,c):Ra(E,a,c)}),v}),HR=$c(function(s,a,c){zi(s,c,a)});function Kc(s,a){var c=ve(s)?lt:Uv;return c(s,ce(a,3))}function VR(s,a,c,f){return s==null?[]:(ve(a)||(a=a==null?[]:[a]),c=f?n:c,ve(c)||(c=c==null?[]:[c]),Vv(s,a,c))}var jR=$c(function(s,a,c){s[c?0:1].push(a)},function(){return[[],[]]});function qR(s,a,c){var f=ve(s)?Pf:dv,_=arguments.length<3;return f(s,ce(a,4),c,_,Tr)}function KR(s,a,c){var f=ve(s)?rO:dv,_=arguments.length<3;return f(s,ce(a,4),c,_,Dv)}function GR(s,a){var c=ve(s)?yr:Lv;return c(s,Yc(ce(a,3)))}function zR(s){var a=ve(s)?Ov:BN;return a(s)}function YR(s,a,c){(c?sn(s,a,c):a===n)?a=1:a=be(a);var f=ve(s)?mN:WN;return f(s,a)}function XR(s){var a=ve(s)?vN:VN;return a(s)}function QR(s){if(s==null)return 0;if(gn(s))return Qc(s)?no(s):s.length;var a=Yt(s);return a==R||a==k?s.size:ed(s).length}function JR(s,a,c){var f=ve(s)?Mf:jN;return c&&sn(s,a,c)&&(a=n),f(s,ce(a,3))}var ZR=Se(function(s,a){if(s==null)return[];var c=a.length;return c>1&&sn(s,a[0],a[1])?a=[]:c>2&&sn(a[0],a[1],a[2])&&(a=[a[0]]),Vv(s,Ft(a,1),[])}),Gc=LO||function(){return $t.Date.now()};function ex(s,a){if(typeof a!="function")throw new Fn(l);return s=be(s),function(){if(--s<1)return a.apply(this,arguments)}}function $y(s,a,c){return a=c?n:a,a=s&&a==null?s.length:a,Yi(s,Z,n,n,n,n,a)}function Fy(s,a){var c;if(typeof a!="function")throw new Fn(l);return s=be(s),function(){return--s>0&&(c=a.apply(this,arguments)),s<=1&&(a=n),c}}var Cd=Se(function(s,a,c){var f=P;if(c.length){var _=br(c,uo(Cd));f|=Q}return Yi(s,f,a,c,_)}),Uy=Se(function(s,a,c){var f=P|G;if(c.length){var _=br(c,uo(Uy));f|=Q}return Yi(a,f,s,c,_)});function By(s,a,c){a=c?n:a;var f=Yi(s,H,n,n,n,n,n,a);return f.placeholder=By.placeholder,f}function Wy(s,a,c){a=c?n:a;var f=Yi(s,V,n,n,n,n,n,a);return f.placeholder=Wy.placeholder,f}function Hy(s,a,c){var f,_,v,E,T,A,D=0,L=!1,F=!1,Y=!0;if(typeof s!="function")throw new Fn(l);a=Vn(a)||0,ut(c)&&(L=!!c.leading,F="maxWait"in c,v=F?wt(Vn(c.maxWait)||0,a):v,Y="trailing"in c?!!c.trailing:Y);function ie(gt){var ri=f,er=_;return f=_=n,D=gt,E=s.apply(er,ri),E}function ue(gt){return D=gt,T=Pa(xe,a),L?ie(gt):E}function Ce(gt){var ri=gt-A,er=gt-D,aE=a-ri;return F?zt(aE,v-er):aE}function he(gt){var ri=gt-A,er=gt-D;return A===n||ri>=a||ri<0||F&&er>=v}function xe(){var gt=Gc();if(he(gt))return Pe(gt);T=Pa(xe,Ce(gt))}function Pe(gt){return T=n,Y&&f?ie(gt):(f=_=n,E)}function Sn(){T!==n&&Jv(T),D=0,f=A=_=T=n}function on(){return T===n?E:Pe(Gc())}function On(){var gt=Gc(),ri=he(gt);if(f=arguments,_=this,A=gt,ri){if(T===n)return ue(A);if(F)return Jv(T),T=Pa(xe,a),ie(A)}return T===n&&(T=Pa(xe,a)),E}return On.cancel=Sn,On.flush=on,On}var tx=Se(function(s,a){return xv(s,1,a)}),nx=Se(function(s,a,c){return xv(s,Vn(a)||0,c)});function ix(s){return Yi(s,pe)}function zc(s,a){if(typeof s!="function"||a!=null&&typeof a!="function")throw new Fn(l);var c=function(){var f=arguments,_=a?a.apply(this,f):f[0],v=c.cache;if(v.has(_))return v.get(_);var E=s.apply(this,f);return c.cache=v.set(_,E)||v,E};return c.cache=new(zc.Cache||Gi),c}zc.Cache=Gi;function Yc(s){if(typeof s!="function")throw new Fn(l);return function(){var a=arguments;switch(a.length){case 0:return!s.call(this);case 1:return!s.call(this,a[0]);case 2:return!s.call(this,a[0],a[1]);case 3:return!s.call(this,a[0],a[1],a[2])}return!s.apply(this,a)}}function rx(s){return Fy(2,s)}var sx=qN(function(s,a){a=a.length==1&&ve(a[0])?lt(a[0],Cn(ce())):lt(Ft(a,1),Cn(ce()));var c=a.length;return Se(function(f){for(var _=-1,v=zt(f.length,c);++_<v;)f[_]=a[_].call(this,f[_]);return Tn(s,this,f)})}),Id=Se(function(s,a){var c=br(a,uo(Id));return Yi(s,Q,n,a,c)}),Vy=Se(function(s,a){var c=br(a,uo(Vy));return Yi(s,B,n,a,c)}),ox=Xi(function(s,a){return Yi(s,X,n,n,n,a)});function ax(s,a){if(typeof s!="function")throw new Fn(l);return a=a===n?a:be(a),Se(s,a)}function lx(s,a){if(typeof s!="function")throw new Fn(l);return a=a==null?0:wt(be(a),0),Se(function(c){var f=c[a],_=Ar(c,0,a);return f&&Er(_,f),Tn(s,this,_)})}function cx(s,a,c){var f=!0,_=!0;if(typeof s!="function")throw new Fn(l);return ut(c)&&(f="leading"in c?!!c.leading:f,_="trailing"in c?!!c.trailing:_),Hy(s,a,{leading:f,maxWait:a,trailing:_})}function ux(s){return $y(s,1)}function hx(s,a){return Id(cd(a),s)}function fx(){if(!arguments.length)return[];var s=arguments[0];return ve(s)?s:[s]}function dx(s){return Bn(s,b)}function px(s,a){return a=typeof a=="function"?a:n,Bn(s,b,a)}function _x(s){return Bn(s,g|b)}function gx(s,a){return a=typeof a=="function"?a:n,Bn(s,g|b,a)}function mx(s,a){return a==null||Rv(s,a,Nt(a))}function ii(s,a){return s===a||s!==s&&a!==a}var vx=Wc(Qf),yx=Wc(function(s,a){return s>=a}),fs=Mv(function(){return arguments}())?Mv:function(s){return ft(s)&&Ke.call(s,"callee")&&!wv.call(s,"callee")},ve=O.isArray,Ex=iv?Cn(iv):ON;function gn(s){return s!=null&&Xc(s.length)&&!Ji(s)}function _t(s){return ft(s)&&gn(s)}function bx(s){return s===!0||s===!1||ft(s)&&rn(s)==Kt}var Sr=PO||Md,wx=rv?Cn(rv):NN;function Tx(s){return ft(s)&&s.nodeType===1&&!Ma(s)}function Cx(s){if(s==null)return!0;if(gn(s)&&(ve(s)||typeof s=="string"||typeof s.splice=="function"||Sr(s)||ho(s)||fs(s)))return!s.length;var a=Yt(s);if(a==R||a==k)return!s.size;if(ka(s))return!ed(s).length;for(var c in s)if(Ke.call(s,c))return!1;return!0}function Ix(s,a){return xa(s,a)}function Ax(s,a,c){c=typeof c=="function"?c:n;var f=c?c(s,a):n;return f===n?xa(s,a,n,c):!!f}function Ad(s){if(!ft(s))return!1;var a=rn(s);return a==Pn||a==is||typeof s.message=="string"&&typeof s.name=="string"&&!Ma(s)}function Sx(s){return typeof s=="number"&&Cv(s)}function Ji(s){if(!ut(s))return!1;var a=rn(s);return a==w||a==C||a==ei||a==q}function jy(s){return typeof s=="number"&&s==be(s)}function Xc(s){return typeof s=="number"&&s>-1&&s%1==0&&s<=Te}function ut(s){var a=typeof s;return s!=null&&(a=="object"||a=="function")}function ft(s){return s!=null&&typeof s=="object"}var qy=sv?Cn(sv):xN;function Ox(s,a){return s===a||Zf(s,a,gd(a))}function Nx(s,a,c){return c=typeof c=="function"?c:n,Zf(s,a,gd(a),c)}function Rx(s){return Ky(s)&&s!=+s}function xx(s){if(p1(s))throw new me(o);return $v(s)}function Dx(s){return s===null}function Lx(s){return s==null}function Ky(s){return typeof s=="number"||ft(s)&&rn(s)==M}function Ma(s){if(!ft(s)||rn(s)!=W)return!1;var a=Tc(s);if(a===null)return!0;var c=Ke.call(a,"constructor")&&a.constructor;return typeof c=="function"&&c instanceof c&&yc.call(c)==NO}var Sd=ov?Cn(ov):DN;function kx(s){return jy(s)&&s>=-Te&&s<=Te}var Gy=av?Cn(av):LN;function Qc(s){return typeof s=="string"||!ve(s)&&ft(s)&&rn(s)==ne}function An(s){return typeof s=="symbol"||ft(s)&&rn(s)==J}var ho=lv?Cn(lv):kN;function Px(s){return s===n}function Mx(s){return ft(s)&&Yt(s)==ae}function $x(s){return ft(s)&&rn(s)==Ee}var Fx=Wc(td),Ux=Wc(function(s,a){return s<=a});function zy(s){if(!s)return[];if(gn(s))return Qc(s)?ti(s):_n(s);if(Ta&&s[Ta])return mO(s[Ta]());var a=Yt(s),c=a==R?Hf:a==k?gc:fo;return c(s)}function Zi(s){if(!s)return s===0?s:0;if(s=Vn(s),s===ye||s===-ye){var a=s<0?-1:1;return a*kt}return s===s?s:0}function be(s){var a=Zi(s),c=a%1;return a===a?c?a-c:a:0}function Yy(s){return s?ls(be(s),0,ht):0}function Vn(s){if(typeof s=="number")return s;if(An(s))return dn;if(ut(s)){var a=typeof s.valueOf=="function"?s.valueOf():s;s=ut(a)?a+"":a}if(typeof s!="string")return s===0?s:+s;s=pv(s);var c=ES.test(s);return c||wS.test(s)?eO(s.slice(2),c?2:8):yS.test(s)?dn:+s}function Xy(s){return Ei(s,mn(s))}function Bx(s){return s?ls(be(s),-Te,Te):s===0?s:0}function je(s){return s==null?"":In(s)}var Wx=lo(function(s,a){if(ka(a)||gn(a)){Ei(a,Nt(a),s);return}for(var c in a)Ke.call(a,c)&&Oa(s,c,a[c])}),Qy=lo(function(s,a){Ei(a,mn(a),s)}),Jc=lo(function(s,a,c,f){Ei(a,mn(a),s,f)}),Hx=lo(function(s,a,c,f){Ei(a,Nt(a),s,f)}),Vx=Xi(zf);function jx(s,a){var c=ao(s);return a==null?c:Nv(c,a)}var qx=Se(function(s,a){s=Qe(s);var c=-1,f=a.length,_=f>2?a[2]:n;for(_&&sn(a[0],a[1],_)&&(f=1);++c<f;)for(var v=a[c],E=mn(v),T=-1,A=E.length;++T<A;){var D=E[T],L=s[D];(L===n||ii(L,ro[D])&&!Ke.call(s,D))&&(s[D]=v[D])}return s}),Kx=Se(function(s){return s.push(n,py),Tn(Jy,n,s)});function Gx(s,a){return uv(s,ce(a,3),yi)}function zx(s,a){return uv(s,ce(a,3),Xf)}function Yx(s,a){return s==null?s:Yf(s,ce(a,3),mn)}function Xx(s,a){return s==null?s:kv(s,ce(a,3),mn)}function Qx(s,a){return s&&yi(s,ce(a,3))}function Jx(s,a){return s&&Xf(s,ce(a,3))}function Zx(s){return s==null?[]:Lc(s,Nt(s))}function eD(s){return s==null?[]:Lc(s,mn(s))}function Od(s,a,c){var f=s==null?n:cs(s,a);return f===n?c:f}function tD(s,a){return s!=null&&my(s,a,CN)}function Nd(s,a){return s!=null&&my(s,a,IN)}var nD=cy(function(s,a,c){a!=null&&typeof a.toString!="function"&&(a=Ec.call(a)),s[a]=c},xd(vn)),iD=cy(function(s,a,c){a!=null&&typeof a.toString!="function"&&(a=Ec.call(a)),Ke.call(s,a)?s[a].push(c):s[a]=[c]},ce),rD=Se(Ra);function Nt(s){return gn(s)?Sv(s):ed(s)}function mn(s){return gn(s)?Sv(s,!0):PN(s)}function sD(s,a){var c={};return a=ce(a,3),yi(s,function(f,_,v){zi(c,a(f,_,v),f)}),c}function oD(s,a){var c={};return a=ce(a,3),yi(s,function(f,_,v){zi(c,_,a(f,_,v))}),c}var aD=lo(function(s,a,c){kc(s,a,c)}),Jy=lo(function(s,a,c,f){kc(s,a,c,f)}),lD=Xi(function(s,a){var c={};if(s==null)return c;var f=!1;a=lt(a,function(v){return v=Ir(v,s),f||(f=v.length>1),v}),Ei(s,pd(s),c),f&&(c=Bn(c,g|y|b,n1));for(var _=a.length;_--;)od(c,a[_]);return c});function cD(s,a){return Zy(s,Yc(ce(a)))}var uD=Xi(function(s,a){return s==null?{}:$N(s,a)});function Zy(s,a){if(s==null)return{};var c=lt(pd(s),function(f){return[f]});return a=ce(a),jv(s,c,function(f,_){return a(f,_[0])})}function hD(s,a,c){a=Ir(a,s);var f=-1,_=a.length;for(_||(_=1,s=n);++f<_;){var v=s==null?n:s[bi(a[f])];v===n&&(f=_,v=c),s=Ji(v)?v.call(s):v}return s}function fD(s,a,c){return s==null?s:Da(s,a,c)}function dD(s,a,c,f){return f=typeof f=="function"?f:n,s==null?s:Da(s,a,c,f)}var eE=fy(Nt),tE=fy(mn);function pD(s,a,c){var f=ve(s),_=f||Sr(s)||ho(s);if(a=ce(a,4),c==null){var v=s&&s.constructor;_?c=f?new v:[]:ut(s)?c=Ji(v)?ao(Tc(s)):{}:c={}}return(_?$n:yi)(s,function(E,T,A){return a(c,E,T,A)}),c}function _D(s,a){return s==null?!0:od(s,a)}function gD(s,a,c){return s==null?s:Yv(s,a,cd(c))}function mD(s,a,c,f){return f=typeof f=="function"?f:n,s==null?s:Yv(s,a,cd(c),f)}function fo(s){return s==null?[]:Wf(s,Nt(s))}function vD(s){return s==null?[]:Wf(s,mn(s))}function yD(s,a,c){return c===n&&(c=a,a=n),c!==n&&(c=Vn(c),c=c===c?c:0),a!==n&&(a=Vn(a),a=a===a?a:0),ls(Vn(s),a,c)}function ED(s,a,c){return a=Zi(a),c===n?(c=a,a=0):c=Zi(c),s=Vn(s),AN(s,a,c)}function bD(s,a,c){if(c&&typeof c!="boolean"&&sn(s,a,c)&&(a=c=n),c===n&&(typeof a=="boolean"?(c=a,a=n):typeof s=="boolean"&&(c=s,s=n)),s===n&&a===n?(s=0,a=1):(s=Zi(s),a===n?(a=s,s=0):a=Zi(a)),s>a){var f=s;s=a,a=f}if(c||s%1||a%1){var _=Iv();return zt(s+_*(a-s+ZS("1e-"+((_+"").length-1))),a)}return id(s,a)}var wD=co(function(s,a,c){return a=a.toLowerCase(),s+(c?nE(a):a)});function nE(s){return Rd(je(s).toLowerCase())}function iE(s){return s=je(s),s&&s.replace(CS,fO).replace(VS,"")}function TD(s,a,c){s=je(s),a=In(a);var f=s.length;c=c===n?f:ls(be(c),0,f);var _=c;return c-=a.length,c>=0&&s.slice(c,_)==a}function CD(s){return s=je(s),s&&rS.test(s)?s.replace(km,dO):s}function ID(s){return s=je(s),s&&uS.test(s)?s.replace(If,"\\$&"):s}var AD=co(function(s,a,c){return s+(c?"-":"")+a.toLowerCase()}),SD=co(function(s,a,c){return s+(c?" ":"")+a.toLowerCase()}),OD=oy("toLowerCase");function ND(s,a,c){s=je(s),a=be(a);var f=a?no(s):0;if(!a||f>=a)return s;var _=(a-f)/2;return Bc(Sc(_),c)+s+Bc(Ac(_),c)}function RD(s,a,c){s=je(s),a=be(a);var f=a?no(s):0;return a&&f<a?s+Bc(a-f,c):s}function xD(s,a,c){s=je(s),a=be(a);var f=a?no(s):0;return a&&f<a?Bc(a-f,c)+s:s}function DD(s,a,c){return c||a==null?a=0:a&&(a=+a),UO(je(s).replace(Af,""),a||0)}function LD(s,a,c){return(c?sn(s,a,c):a===n)?a=1:a=be(a),rd(je(s),a)}function kD(){var s=arguments,a=je(s[0]);return s.length<3?a:a.replace(s[1],s[2])}var PD=co(function(s,a,c){return s+(c?"_":"")+a.toLowerCase()});function MD(s,a,c){return c&&typeof c!="number"&&sn(s,a,c)&&(a=c=n),c=c===n?ht:c>>>0,c?(s=je(s),s&&(typeof a=="string"||a!=null&&!Sd(a))&&(a=In(a),!a&&to(s))?Ar(ti(s),0,c):s.split(a,c)):[]}var $D=co(function(s,a,c){return s+(c?" ":"")+Rd(a)});function FD(s,a,c){return s=je(s),c=c==null?0:ls(be(c),0,s.length),a=In(a),s.slice(c,c+a.length)==a}function UD(s,a,c){var f=m.templateSettings;c&&sn(s,a,c)&&(a=n),s=je(s),a=Jc({},a,f,dy);var _=Jc({},a.imports,f.imports,dy),v=Nt(_),E=Wf(_,v),T,A,D=0,L=a.interpolate||hc,F="__p += '",Y=Vf((a.escape||hc).source+"|"+L.source+"|"+(L===Pm?vS:hc).source+"|"+(a.evaluate||hc).source+"|$","g"),ie="//# sourceURL="+(Ke.call(a,"sourceURL")?(a.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++zS+"]")+`
`;s.replace(Y,function(he,xe,Pe,Sn,on,On){return Pe||(Pe=Sn),F+=s.slice(D,On).replace(IS,pO),xe&&(T=!0,F+=`' +
__e(`+xe+`) +
'`),on&&(A=!0,F+=`';
`+on+`;
__p += '`),Pe&&(F+=`' +
((__t = (`+Pe+`)) == null ? '' : __t) +
'`),D=On+he.length,he}),F+=`';
`;var ue=Ke.call(a,"variable")&&a.variable;if(!ue)F=`with (obj) {
`+F+`
}
`;else if(gS.test(ue))throw new me(u);F=(A?F.replace(eS,""):F).replace(tS,"$1").replace(nS,"$1;"),F="function("+(ue||"obj")+`) {
`+(ue?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(T?", __e = _.escape":"")+(A?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+F+`return __p
}`;var Ce=sE(function(){return He(v,ie+"return "+F).apply(n,E)});if(Ce.source=F,Ad(Ce))throw Ce;return Ce}function BD(s){return je(s).toLowerCase()}function WD(s){return je(s).toUpperCase()}function HD(s,a,c){if(s=je(s),s&&(c||a===n))return pv(s);if(!s||!(a=In(a)))return s;var f=ti(s),_=ti(a),v=_v(f,_),E=gv(f,_)+1;return Ar(f,v,E).join("")}function VD(s,a,c){if(s=je(s),s&&(c||a===n))return s.slice(0,vv(s)+1);if(!s||!(a=In(a)))return s;var f=ti(s),_=gv(f,ti(a))+1;return Ar(f,0,_).join("")}function jD(s,a,c){if(s=je(s),s&&(c||a===n))return s.replace(Af,"");if(!s||!(a=In(a)))return s;var f=ti(s),_=_v(f,ti(a));return Ar(f,_).join("")}function qD(s,a){var c=_e,f=Fe;if(ut(a)){var _="separator"in a?a.separator:_;c="length"in a?be(a.length):c,f="omission"in a?In(a.omission):f}s=je(s);var v=s.length;if(to(s)){var E=ti(s);v=E.length}if(c>=v)return s;var T=c-no(f);if(T<1)return f;var A=E?Ar(E,0,T).join(""):s.slice(0,T);if(_===n)return A+f;if(E&&(T+=A.length-T),Sd(_)){if(s.slice(T).search(_)){var D,L=A;for(_.global||(_=Vf(_.source,je(Mm.exec(_))+"g")),_.lastIndex=0;D=_.exec(L);)var F=D.index;A=A.slice(0,F===n?T:F)}}else if(s.indexOf(In(_),T)!=T){var Y=A.lastIndexOf(_);Y>-1&&(A=A.slice(0,Y))}return A+f}function KD(s){return s=je(s),s&&iS.test(s)?s.replace(Lm,bO):s}var GD=co(function(s,a,c){return s+(c?" ":"")+a.toUpperCase()}),Rd=oy("toUpperCase");function rE(s,a,c){return s=je(s),a=c?n:a,a===n?gO(s)?CO(s):aO(s):s.match(a)||[]}var sE=Se(function(s,a){try{return Tn(s,n,a)}catch(c){return Ad(c)?c:new me(c)}}),zD=Xi(function(s,a){return $n(a,function(c){c=bi(c),zi(s,c,Cd(s[c],s))}),s});function YD(s){var a=s==null?0:s.length,c=ce();return s=a?lt(s,function(f){if(typeof f[1]!="function")throw new Fn(l);return[c(f[0]),f[1]]}):[],Se(function(f){for(var _=-1;++_<a;){var v=s[_];if(Tn(v[0],this,f))return Tn(v[1],this,f)}})}function XD(s){return bN(Bn(s,g))}function xd(s){return function(){return s}}function QD(s,a){return s==null||s!==s?a:s}var JD=ly(),ZD=ly(!0);function vn(s){return s}function Dd(s){return Fv(typeof s=="function"?s:Bn(s,g))}function eL(s){return Bv(Bn(s,g))}function tL(s,a){return Wv(s,Bn(a,g))}var nL=Se(function(s,a){return function(c){return Ra(c,s,a)}}),iL=Se(function(s,a){return function(c){return Ra(s,c,a)}});function Ld(s,a,c){var f=Nt(a),_=Lc(a,f);c==null&&!(ut(a)&&(_.length||!f.length))&&(c=a,a=s,s=this,_=Lc(a,Nt(a)));var v=!(ut(c)&&"chain"in c)||!!c.chain,E=Ji(s);return $n(_,function(T){var A=a[T];s[T]=A,E&&(s.prototype[T]=function(){var D=this.__chain__;if(v||D){var L=s(this.__wrapped__),F=L.__actions__=_n(this.__actions__);return F.push({func:A,args:arguments,thisArg:s}),L.__chain__=D,L}return A.apply(s,Er([this.value()],arguments))})}),s}function rL(){return $t._===this&&($t._=RO),this}function kd(){}function sL(s){return s=be(s),Se(function(a){return Hv(a,s)})}var oL=hd(lt),aL=hd(cv),lL=hd(Mf);function oE(s){return vd(s)?$f(bi(s)):FN(s)}function cL(s){return function(a){return s==null?n:cs(s,a)}}var uL=uy(),hL=uy(!0);function Pd(){return[]}function Md(){return!1}function fL(){return{}}function dL(){return""}function pL(){return!0}function _L(s,a){if(s=be(s),s<1||s>Te)return[];var c=ht,f=zt(s,ht);a=ce(a),s-=ht;for(var _=Bf(f,a);++c<s;)a(c);return _}function gL(s){return ve(s)?lt(s,bi):An(s)?[s]:_n(Ay(je(s)))}function mL(s){var a=++OO;return je(s)+a}var vL=Uc(function(s,a){return s+a},0),yL=fd("ceil"),EL=Uc(function(s,a){return s/a},1),bL=fd("floor");function wL(s){return s&&s.length?Dc(s,vn,Qf):n}function TL(s,a){return s&&s.length?Dc(s,ce(a,2),Qf):n}function CL(s){return fv(s,vn)}function IL(s,a){return fv(s,ce(a,2))}function AL(s){return s&&s.length?Dc(s,vn,td):n}function SL(s,a){return s&&s.length?Dc(s,ce(a,2),td):n}var OL=Uc(function(s,a){return s*a},1),NL=fd("round"),RL=Uc(function(s,a){return s-a},0);function xL(s){return s&&s.length?Uf(s,vn):0}function DL(s,a){return s&&s.length?Uf(s,ce(a,2)):0}return m.after=ex,m.ary=$y,m.assign=Wx,m.assignIn=Qy,m.assignInWith=Jc,m.assignWith=Hx,m.at=Vx,m.before=Fy,m.bind=Cd,m.bindAll=zD,m.bindKey=Uy,m.castArray=fx,m.chain=ky,m.chunk=b1,m.compact=w1,m.concat=T1,m.cond=YD,m.conforms=XD,m.constant=xd,m.countBy=xR,m.create=jx,m.curry=By,m.curryRight=Wy,m.debounce=Hy,m.defaults=qx,m.defaultsDeep=Kx,m.defer=tx,m.delay=nx,m.difference=C1,m.differenceBy=I1,m.differenceWith=A1,m.drop=S1,m.dropRight=O1,m.dropRightWhile=N1,m.dropWhile=R1,m.fill=x1,m.filter=LR,m.flatMap=MR,m.flatMapDeep=$R,m.flatMapDepth=FR,m.flatten=Ry,m.flattenDeep=D1,m.flattenDepth=L1,m.flip=ix,m.flow=JD,m.flowRight=ZD,m.fromPairs=k1,m.functions=Zx,m.functionsIn=eD,m.groupBy=UR,m.initial=M1,m.intersection=$1,m.intersectionBy=F1,m.intersectionWith=U1,m.invert=nD,m.invertBy=iD,m.invokeMap=WR,m.iteratee=Dd,m.keyBy=HR,m.keys=Nt,m.keysIn=mn,m.map=Kc,m.mapKeys=sD,m.mapValues=oD,m.matches=eL,m.matchesProperty=tL,m.memoize=zc,m.merge=aD,m.mergeWith=Jy,m.method=nL,m.methodOf=iL,m.mixin=Ld,m.negate=Yc,m.nthArg=sL,m.omit=lD,m.omitBy=cD,m.once=rx,m.orderBy=VR,m.over=oL,m.overArgs=sx,m.overEvery=aL,m.overSome=lL,m.partial=Id,m.partialRight=Vy,m.partition=jR,m.pick=uD,m.pickBy=Zy,m.property=oE,m.propertyOf=cL,m.pull=V1,m.pullAll=Dy,m.pullAllBy=j1,m.pullAllWith=q1,m.pullAt=K1,m.range=uL,m.rangeRight=hL,m.rearg=ox,m.reject=GR,m.remove=G1,m.rest=ax,m.reverse=wd,m.sampleSize=YR,m.set=fD,m.setWith=dD,m.shuffle=XR,m.slice=z1,m.sortBy=ZR,m.sortedUniq=tR,m.sortedUniqBy=nR,m.split=MD,m.spread=lx,m.tail=iR,m.take=rR,m.takeRight=sR,m.takeRightWhile=oR,m.takeWhile=aR,m.tap=wR,m.throttle=cx,m.thru=qc,m.toArray=zy,m.toPairs=eE,m.toPairsIn=tE,m.toPath=gL,m.toPlainObject=Xy,m.transform=pD,m.unary=ux,m.union=lR,m.unionBy=cR,m.unionWith=uR,m.uniq=hR,m.uniqBy=fR,m.uniqWith=dR,m.unset=_D,m.unzip=Td,m.unzipWith=Ly,m.update=gD,m.updateWith=mD,m.values=fo,m.valuesIn=vD,m.without=pR,m.words=rE,m.wrap=hx,m.xor=_R,m.xorBy=gR,m.xorWith=mR,m.zip=vR,m.zipObject=yR,m.zipObjectDeep=ER,m.zipWith=bR,m.entries=eE,m.entriesIn=tE,m.extend=Qy,m.extendWith=Jc,Ld(m,m),m.add=vL,m.attempt=sE,m.camelCase=wD,m.capitalize=nE,m.ceil=yL,m.clamp=yD,m.clone=dx,m.cloneDeep=_x,m.cloneDeepWith=gx,m.cloneWith=px,m.conformsTo=mx,m.deburr=iE,m.defaultTo=QD,m.divide=EL,m.endsWith=TD,m.eq=ii,m.escape=CD,m.escapeRegExp=ID,m.every=DR,m.find=kR,m.findIndex=Oy,m.findKey=Gx,m.findLast=PR,m.findLastIndex=Ny,m.findLastKey=zx,m.floor=bL,m.forEach=Py,m.forEachRight=My,m.forIn=Yx,m.forInRight=Xx,m.forOwn=Qx,m.forOwnRight=Jx,m.get=Od,m.gt=vx,m.gte=yx,m.has=tD,m.hasIn=Nd,m.head=xy,m.identity=vn,m.includes=BR,m.indexOf=P1,m.inRange=ED,m.invoke=rD,m.isArguments=fs,m.isArray=ve,m.isArrayBuffer=Ex,m.isArrayLike=gn,m.isArrayLikeObject=_t,m.isBoolean=bx,m.isBuffer=Sr,m.isDate=wx,m.isElement=Tx,m.isEmpty=Cx,m.isEqual=Ix,m.isEqualWith=Ax,m.isError=Ad,m.isFinite=Sx,m.isFunction=Ji,m.isInteger=jy,m.isLength=Xc,m.isMap=qy,m.isMatch=Ox,m.isMatchWith=Nx,m.isNaN=Rx,m.isNative=xx,m.isNil=Lx,m.isNull=Dx,m.isNumber=Ky,m.isObject=ut,m.isObjectLike=ft,m.isPlainObject=Ma,m.isRegExp=Sd,m.isSafeInteger=kx,m.isSet=Gy,m.isString=Qc,m.isSymbol=An,m.isTypedArray=ho,m.isUndefined=Px,m.isWeakMap=Mx,m.isWeakSet=$x,m.join=B1,m.kebabCase=AD,m.last=Hn,m.lastIndexOf=W1,m.lowerCase=SD,m.lowerFirst=OD,m.lt=Fx,m.lte=Ux,m.max=wL,m.maxBy=TL,m.mean=CL,m.meanBy=IL,m.min=AL,m.minBy=SL,m.stubArray=Pd,m.stubFalse=Md,m.stubObject=fL,m.stubString=dL,m.stubTrue=pL,m.multiply=OL,m.nth=H1,m.noConflict=rL,m.noop=kd,m.now=Gc,m.pad=ND,m.padEnd=RD,m.padStart=xD,m.parseInt=DD,m.random=bD,m.reduce=qR,m.reduceRight=KR,m.repeat=LD,m.replace=kD,m.result=hD,m.round=NL,m.runInContext=I,m.sample=zR,m.size=QR,m.snakeCase=PD,m.some=JR,m.sortedIndex=Y1,m.sortedIndexBy=X1,m.sortedIndexOf=Q1,m.sortedLastIndex=J1,m.sortedLastIndexBy=Z1,m.sortedLastIndexOf=eR,m.startCase=$D,m.startsWith=FD,m.subtract=RL,m.sum=xL,m.sumBy=DL,m.template=UD,m.times=_L,m.toFinite=Zi,m.toInteger=be,m.toLength=Yy,m.toLower=BD,m.toNumber=Vn,m.toSafeInteger=Bx,m.toString=je,m.toUpper=WD,m.trim=HD,m.trimEnd=VD,m.trimStart=jD,m.truncate=qD,m.unescape=KD,m.uniqueId=mL,m.upperCase=GD,m.upperFirst=Rd,m.each=Py,m.eachRight=My,m.first=xy,Ld(m,function(){var s={};return yi(m,function(a,c){Ke.call(m.prototype,c)||(s[c]=a)}),s}(),{chain:!1}),m.VERSION=i,$n(["bind","bindKey","curry","curryRight","partial","partialRight"],function(s){m[s].placeholder=m}),$n(["drop","take"],function(s,a){Le.prototype[s]=function(c){c=c===n?1:wt(be(c),0);var f=this.__filtered__&&!a?new Le(this):this.clone();return f.__filtered__?f.__takeCount__=zt(c,f.__takeCount__):f.__views__.push({size:zt(c,ht),type:s+(f.__dir__<0?"Right":"")}),f},Le.prototype[s+"Right"]=function(c){return this.reverse()[s](c).reverse()}}),$n(["filter","map","takeWhile"],function(s,a){var c=a+1,f=c==qt||c==We;Le.prototype[s]=function(_){var v=this.clone();return v.__iteratees__.push({iteratee:ce(_,3),type:c}),v.__filtered__=v.__filtered__||f,v}}),$n(["head","last"],function(s,a){var c="take"+(a?"Right":"");Le.prototype[s]=function(){return this[c](1).value()[0]}}),$n(["initial","tail"],function(s,a){var c="drop"+(a?"":"Right");Le.prototype[s]=function(){return this.__filtered__?new Le(this):this[c](1)}}),Le.prototype.compact=function(){return this.filter(vn)},Le.prototype.find=function(s){return this.filter(s).head()},Le.prototype.findLast=function(s){return this.reverse().find(s)},Le.prototype.invokeMap=Se(function(s,a){return typeof s=="function"?new Le(this):this.map(function(c){return Ra(c,s,a)})}),Le.prototype.reject=function(s){return this.filter(Yc(ce(s)))},Le.prototype.slice=function(s,a){s=be(s);var c=this;return c.__filtered__&&(s>0||a<0)?new Le(c):(s<0?c=c.takeRight(-s):s&&(c=c.drop(s)),a!==n&&(a=be(a),c=a<0?c.dropRight(-a):c.take(a-s)),c)},Le.prototype.takeRightWhile=function(s){return this.reverse().takeWhile(s).reverse()},Le.prototype.toArray=function(){return this.take(ht)},yi(Le.prototype,function(s,a){var c=/^(?:filter|find|map|reject)|While$/.test(a),f=/^(?:head|last)$/.test(a),_=m[f?"take"+(a=="last"?"Right":""):a],v=f||/^find/.test(a);_&&(m.prototype[a]=function(){var E=this.__wrapped__,T=f?[1]:arguments,A=E instanceof Le,D=T[0],L=A||ve(E),F=function(xe){var Pe=_.apply(m,Er([xe],T));return f&&Y?Pe[0]:Pe};L&&c&&typeof D=="function"&&D.length!=1&&(A=L=!1);var Y=this.__chain__,ie=!!this.__actions__.length,ue=v&&!Y,Ce=A&&!ie;if(!v&&L){E=Ce?E:new Le(this);var he=s.apply(E,T);return he.__actions__.push({func:qc,args:[F],thisArg:n}),new Un(he,Y)}return ue&&Ce?s.apply(this,T):(he=this.thru(F),ue?f?he.value()[0]:he.value():he)})}),$n(["pop","push","shift","sort","splice","unshift"],function(s){var a=mc[s],c=/^(?:push|sort|unshift)$/.test(s)?"tap":"thru",f=/^(?:pop|shift)$/.test(s);m.prototype[s]=function(){var _=arguments;if(f&&!this.__chain__){var v=this.value();return a.apply(ve(v)?v:[],_)}return this[c](function(E){return a.apply(ve(E)?E:[],_)})}}),yi(Le.prototype,function(s,a){var c=m[a];if(c){var f=c.name+"";Ke.call(oo,f)||(oo[f]=[]),oo[f].push({name:a,func:c})}}),oo[Fc(n,G).name]=[{name:"wrapper",func:n}],Le.prototype.clone=KO,Le.prototype.reverse=GO,Le.prototype.value=zO,m.prototype.at=TR,m.prototype.chain=CR,m.prototype.commit=IR,m.prototype.next=AR,m.prototype.plant=OR,m.prototype.reverse=NR,m.prototype.toJSON=m.prototype.valueOf=m.prototype.value=RR,m.prototype.first=m.prototype.head,Ta&&(m.prototype[Ta]=SR),m},io=IO();rs?((rs.exports=io)._=io,Df._=io):$t._=io}).call(Ha)})(yV,kl);const EV=ig({apiKey:"AIzaSyBJsQeWbln9lR9B-W7jQZVCy9AWZyoe9pQ",authDomain:"tacmap-dev.firebaseapp.com",projectId:"tacmap-dev",storageBucket:"tacmap-dev.appspot.com",messagingSenderId:"278955153095",appId:"1:278955153095:web:dc491f9539c91be1e0d0e2"}),Va=OC(EV),Lr={GetValue:async t=>(await SC(ai(Va,t))).val(),Subscribe:(t,e)=>GW(ai(Va,t),n=>{e(n.val())}),UpdateValues:async t=>{await Su(ai(Va),t)},SetValue:async(t,e)=>{const n=ai(Va,t);await fr(n,e)},DeleteValue:async t=>{await Ls(ai(Va,t))},resetDB:async()=>{console.log("reset");let t=et.uuidv4(),e=et.uuidv4(),n=et.uuidv4(),i=et.uuidv4(),r=et.uuidv4(),o=et.uuidv4(),l=et.uuidv4(),u=et.uuidv4();await Lr.SetValue("/",{rooms:{[Xt.roomId]:{gameMode:"TDM",roomName:"Cement Factory",password:"test",image:"cement-factory.png",map:{location:{lat:36.6508794278,long:-114.501887496},zoom:18,bounds:[[36.65305168185297,-114.50459216419664],[36.64879837009076,-114.49938038551329]]},spotDurationMS:5e3,teamIds:{[et.uuidv4()]:t,[et.uuidv4()]:e}}},teams:{[e]:{id:e,index:1,teamName:"OPFOR",squadIds:[n,i,r]},[t]:{id:t,index:0,teamName:"BLUFOR",squadIds:[o,l,u]}},squads:{[n]:{squadName:"Squad 1"},[i]:{squadName:"Squad 2"},[r]:{squadName:"Squad 3"},[o]:{squadName:"Squad 1"},[l]:{squadName:"Squad 2"},[u]:{squadName:"Squad 3"}},users:{[et.uuidv4()]:{username:"emptyUser"}}})}},bV={data(){return{time:"",calibrateMap:!1}},methods:{openOffCanvas(){ze.emit("toggle-sidebar")},SetLocation(){ze.emit("set-location")},resetDB(){Lr.resetDB()},toggleCalibrateMap(){this.calibrateMap=!this.calibrateMap,ze.emit("calibrate-map",this.calibrateMap)},toggleMap(){ze.emit("toggle-map")},saveMap(){ze.emit("save-map")},setSpotExpireMS(){let t=Number(prompt("SetSpot Timer",te.getters.rooms[Xt.roomId].spotDurationMS));!isNaN(t)&&t>0&&fr(Et(PI,`${Xt.roomId}/spotDurationMS`),t)}},created(){setInterval(()=>{let t=new Date;this.time=`${t.toLocaleTimeString("it-IT")}`},1e3)},mounted(){ze.on("map-saved",()=>{this.calibrateMap=!1})}};const Vi=(t,e)=>{const n=t.__vccOpts||t;for(const[i,r]of e)n[i]=r;return n},ic=t=>(Fl("data-v-f3195ccb"),t=t(),Ul(),t),wV={class:"container-fluid"},TV=ic(()=>le("i",{class:"bi bi-plus-circle text-danger"},null,-1)),CV=[TV],IV=ic(()=>le("i",{class:"bi bi-database-gear"},null,-1)),AV=[IV],SV=ic(()=>le("i",{class:"bi bi-globe"},null,-1)),OV=[SV],NV=ic(()=>le("i",{class:"bi bi-map"},null,-1)),RV=[NV],xV=ic(()=>le("i",{class:"bi bi-cloud-arrow-up"},null,-1)),DV=[xV];function LV(t,e,n,i,r,o){return we(),Ue("div",wV,[t.$store.getters.isAdmin?(we(),Ue("button",{key:0,class:"btn btn-sm btn-primary m-1 d-inline",type:"button",onClick:e[0]||(e[0]=l=>o.setSpotExpireMS())},CV)):mt("",!0),t.$store.getters.isAdmin?(we(),Ue("button",{key:1,class:"btn btn-sm btn-primary m-1 d-inline",type:"button",onClick:e[1]||(e[1]=l=>o.resetDB())},AV)):mt("",!0),t.$store.getters.isAdmin?(we(),Ue("button",{key:2,class:"btn btn-sm btn-primary m-1 d-inline",type:"button",onClick:e[2]||(e[2]=l=>o.toggleMap())},OV)):mt("",!0),t.$store.getters.isAdmin?(we(),Ue("button",{key:3,class:"btn btn-sm btn-primary m-1 d-inline",type:"button",onClick:e[3]||(e[3]=l=>o.toggleCalibrateMap())},RV)):mt("",!0),t.$store.getters.isAdmin&&r.calibrateMap?(we(),Ue("button",{key:4,class:"btn btn-sm btn-primary m-1 d-inline",type:"button",onClick:e[4]||(e[4]=l=>o.saveMap())},DV)):mt("",!0)])}const kV=Vi(bV,[["render",LV],["__scopeId","data-v-f3195ccb"]]);var hn="top",Dn="bottom",Ln="right",fn="left",df="auto",da=[hn,Dn,Ln,fn],Hs="start",zo="end",KI="clippingParents",dm="viewport",Eo="popper",GI="reference",A_=da.reduce(function(t,e){return t.concat([e+"-"+Hs,e+"-"+zo])},[]),pm=[].concat(da,[df]).reduce(function(t,e){return t.concat([e,e+"-"+Hs,e+"-"+zo])},[]),zI="beforeRead",YI="read",XI="afterRead",QI="beforeMain",JI="main",ZI="afterMain",eA="beforeWrite",tA="write",nA="afterWrite",iA=[zI,YI,XI,QI,JI,ZI,eA,tA,nA];function Fi(t){return t?(t.nodeName||"").toLowerCase():null}function Jn(t){if(t==null)return window;if(t.toString()!=="[object Window]"){var e=t.ownerDocument;return e&&e.defaultView||window}return t}function Vs(t){var e=Jn(t).Element;return t instanceof e||t instanceof Element}function zn(t){var e=Jn(t).HTMLElement;return t instanceof e||t instanceof HTMLElement}function _m(t){if(typeof ShadowRoot>"u")return!1;var e=Jn(t).ShadowRoot;return t instanceof e||t instanceof ShadowRoot}function PV(t){var e=t.state;Object.keys(e.elements).forEach(function(n){var i=e.styles[n]||{},r=e.attributes[n]||{},o=e.elements[n];!zn(o)||!Fi(o)||(Object.assign(o.style,i),Object.keys(r).forEach(function(l){var u=r[l];u===!1?o.removeAttribute(l):o.setAttribute(l,u===!0?"":u)}))})}function MV(t){var e=t.state,n={popper:{position:e.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(e.elements.popper.style,n.popper),e.styles=n,e.elements.arrow&&Object.assign(e.elements.arrow.style,n.arrow),function(){Object.keys(e.elements).forEach(function(i){var r=e.elements[i],o=e.attributes[i]||{},l=Object.keys(e.styles.hasOwnProperty(i)?e.styles[i]:n[i]),u=l.reduce(function(h,d){return h[d]="",h},{});!zn(r)||!Fi(r)||(Object.assign(r.style,u),Object.keys(o).forEach(function(h){r.removeAttribute(h)}))})}}const gm={name:"applyStyles",enabled:!0,phase:"write",fn:PV,effect:MV,requires:["computeStyles"]};function Ri(t){return t.split("-")[0]}var Ms=Math.max,mh=Math.min,Yo=Math.round;function S_(){var t=navigator.userAgentData;return t!=null&&t.brands?t.brands.map(function(e){return e.brand+"/"+e.version}).join(" "):navigator.userAgent}function rA(){return!/^((?!chrome|android).)*safari/i.test(S_())}function Xo(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!1);var i=t.getBoundingClientRect(),r=1,o=1;e&&zn(t)&&(r=t.offsetWidth>0&&Yo(i.width)/t.offsetWidth||1,o=t.offsetHeight>0&&Yo(i.height)/t.offsetHeight||1);var l=Vs(t)?Jn(t):window,u=l.visualViewport,h=!rA()&&n,d=(i.left+(h&&u?u.offsetLeft:0))/r,p=(i.top+(h&&u?u.offsetTop:0))/o,g=i.width/r,y=i.height/o;return{width:g,height:y,top:p,right:d+g,bottom:p+y,left:d,x:d,y:p}}function mm(t){var e=Xo(t),n=t.offsetWidth,i=t.offsetHeight;return Math.abs(e.width-n)<=1&&(n=e.width),Math.abs(e.height-i)<=1&&(i=e.height),{x:t.offsetLeft,y:t.offsetTop,width:n,height:i}}function sA(t,e){var n=e.getRootNode&&e.getRootNode();if(t.contains(e))return!0;if(n&&_m(n)){var i=e;do{if(i&&t.isSameNode(i))return!0;i=i.parentNode||i.host}while(i)}return!1}function pr(t){return Jn(t).getComputedStyle(t)}function $V(t){return["table","td","th"].indexOf(Fi(t))>=0}function Zr(t){return((Vs(t)?t.ownerDocument:t.document)||window.document).documentElement}function pf(t){return Fi(t)==="html"?t:t.assignedSlot||t.parentNode||(_m(t)?t.host:null)||Zr(t)}function hw(t){return!zn(t)||pr(t).position==="fixed"?null:t.offsetParent}function FV(t){var e=/firefox/i.test(S_()),n=/Trident/i.test(S_());if(n&&zn(t)){var i=pr(t);if(i.position==="fixed")return null}var r=pf(t);for(_m(r)&&(r=r.host);zn(r)&&["html","body"].indexOf(Fi(r))<0;){var o=pr(r);if(o.transform!=="none"||o.perspective!=="none"||o.contain==="paint"||["transform","perspective"].indexOf(o.willChange)!==-1||e&&o.willChange==="filter"||e&&o.filter&&o.filter!=="none")return r;r=r.parentNode}return null}function rc(t){for(var e=Jn(t),n=hw(t);n&&$V(n)&&pr(n).position==="static";)n=hw(n);return n&&(Fi(n)==="html"||Fi(n)==="body"&&pr(n).position==="static")?e:n||FV(t)||e}function vm(t){return["top","bottom"].indexOf(t)>=0?"x":"y"}function ll(t,e,n){return Ms(t,mh(e,n))}function UV(t,e,n){var i=ll(t,e,n);return i>n?n:i}function oA(){return{top:0,right:0,bottom:0,left:0}}function aA(t){return Object.assign({},oA(),t)}function lA(t,e){return e.reduce(function(n,i){return n[i]=t,n},{})}var BV=function(e,n){return e=typeof e=="function"?e(Object.assign({},n.rects,{placement:n.placement})):e,aA(typeof e!="number"?e:lA(e,da))};function WV(t){var e,n=t.state,i=t.name,r=t.options,o=n.elements.arrow,l=n.modifiersData.popperOffsets,u=Ri(n.placement),h=vm(u),d=[fn,Ln].indexOf(u)>=0,p=d?"height":"width";if(!(!o||!l)){var g=BV(r.padding,n),y=mm(o),b=h==="y"?hn:fn,S=h==="y"?Dn:Ln,N=n.rects.reference[p]+n.rects.reference[h]-l[h]-n.rects.popper[p],P=l[h]-n.rects.reference[h],G=rc(o),oe=G?h==="y"?G.clientHeight||0:G.clientWidth||0:0,H=N/2-P/2,V=g[b],Q=oe-y[p]-g[S],B=oe/2-y[p]/2+H,Z=ll(V,B,Q),X=h;n.modifiersData[i]=(e={},e[X]=Z,e.centerOffset=Z-B,e)}}function HV(t){var e=t.state,n=t.options,i=n.element,r=i===void 0?"[data-popper-arrow]":i;r!=null&&(typeof r=="string"&&(r=e.elements.popper.querySelector(r),!r)||sA(e.elements.popper,r)&&(e.elements.arrow=r))}const cA={name:"arrow",enabled:!0,phase:"main",fn:WV,effect:HV,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function Qo(t){return t.split("-")[1]}var VV={top:"auto",right:"auto",bottom:"auto",left:"auto"};function jV(t){var e=t.x,n=t.y,i=window,r=i.devicePixelRatio||1;return{x:Yo(e*r)/r||0,y:Yo(n*r)/r||0}}function fw(t){var e,n=t.popper,i=t.popperRect,r=t.placement,o=t.variation,l=t.offsets,u=t.position,h=t.gpuAcceleration,d=t.adaptive,p=t.roundOffsets,g=t.isFixed,y=l.x,b=y===void 0?0:y,S=l.y,N=S===void 0?0:S,P=typeof p=="function"?p({x:b,y:N}):{x:b,y:N};b=P.x,N=P.y;var G=l.hasOwnProperty("x"),oe=l.hasOwnProperty("y"),H=fn,V=hn,Q=window;if(d){var B=rc(n),Z="clientHeight",X="clientWidth";if(B===Jn(n)&&(B=Zr(n),pr(B).position!=="static"&&u==="absolute"&&(Z="scrollHeight",X="scrollWidth")),B=B,r===hn||(r===fn||r===Ln)&&o===zo){V=Dn;var pe=g&&B===Q&&Q.visualViewport?Q.visualViewport.height:B[Z];N-=pe-i.height,N*=h?1:-1}if(r===fn||(r===hn||r===Dn)&&o===zo){H=Ln;var _e=g&&B===Q&&Q.visualViewport?Q.visualViewport.width:B[X];b-=_e-i.width,b*=h?1:-1}}var Fe=Object.assign({position:u},d&&VV),ot=p===!0?jV({x:b,y:N}):{x:b,y:N};if(b=ot.x,N=ot.y,h){var Xe;return Object.assign({},Fe,(Xe={},Xe[V]=oe?"0":"",Xe[H]=G?"0":"",Xe.transform=(Q.devicePixelRatio||1)<=1?"translate("+b+"px, "+N+"px)":"translate3d("+b+"px, "+N+"px, 0)",Xe))}return Object.assign({},Fe,(e={},e[V]=oe?N+"px":"",e[H]=G?b+"px":"",e.transform="",e))}function qV(t){var e=t.state,n=t.options,i=n.gpuAcceleration,r=i===void 0?!0:i,o=n.adaptive,l=o===void 0?!0:o,u=n.roundOffsets,h=u===void 0?!0:u,d={placement:Ri(e.placement),variation:Qo(e.placement),popper:e.elements.popper,popperRect:e.rects.popper,gpuAcceleration:r,isFixed:e.options.strategy==="fixed"};e.modifiersData.popperOffsets!=null&&(e.styles.popper=Object.assign({},e.styles.popper,fw(Object.assign({},d,{offsets:e.modifiersData.popperOffsets,position:e.options.strategy,adaptive:l,roundOffsets:h})))),e.modifiersData.arrow!=null&&(e.styles.arrow=Object.assign({},e.styles.arrow,fw(Object.assign({},d,{offsets:e.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:h})))),e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-placement":e.placement})}const ym={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:qV,data:{}};var du={passive:!0};function KV(t){var e=t.state,n=t.instance,i=t.options,r=i.scroll,o=r===void 0?!0:r,l=i.resize,u=l===void 0?!0:l,h=Jn(e.elements.popper),d=[].concat(e.scrollParents.reference,e.scrollParents.popper);return o&&d.forEach(function(p){p.addEventListener("scroll",n.update,du)}),u&&h.addEventListener("resize",n.update,du),function(){o&&d.forEach(function(p){p.removeEventListener("scroll",n.update,du)}),u&&h.removeEventListener("resize",n.update,du)}}const Em={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:KV,data:{}};var GV={left:"right",right:"left",bottom:"top",top:"bottom"};function Nu(t){return t.replace(/left|right|bottom|top/g,function(e){return GV[e]})}var zV={start:"end",end:"start"};function dw(t){return t.replace(/start|end/g,function(e){return zV[e]})}function bm(t){var e=Jn(t),n=e.pageXOffset,i=e.pageYOffset;return{scrollLeft:n,scrollTop:i}}function wm(t){return Xo(Zr(t)).left+bm(t).scrollLeft}function YV(t,e){var n=Jn(t),i=Zr(t),r=n.visualViewport,o=i.clientWidth,l=i.clientHeight,u=0,h=0;if(r){o=r.width,l=r.height;var d=rA();(d||!d&&e==="fixed")&&(u=r.offsetLeft,h=r.offsetTop)}return{width:o,height:l,x:u+wm(t),y:h}}function XV(t){var e,n=Zr(t),i=bm(t),r=(e=t.ownerDocument)==null?void 0:e.body,o=Ms(n.scrollWidth,n.clientWidth,r?r.scrollWidth:0,r?r.clientWidth:0),l=Ms(n.scrollHeight,n.clientHeight,r?r.scrollHeight:0,r?r.clientHeight:0),u=-i.scrollLeft+wm(t),h=-i.scrollTop;return pr(r||n).direction==="rtl"&&(u+=Ms(n.clientWidth,r?r.clientWidth:0)-o),{width:o,height:l,x:u,y:h}}function Tm(t){var e=pr(t),n=e.overflow,i=e.overflowX,r=e.overflowY;return/auto|scroll|overlay|hidden/.test(n+r+i)}function uA(t){return["html","body","#document"].indexOf(Fi(t))>=0?t.ownerDocument.body:zn(t)&&Tm(t)?t:uA(pf(t))}function cl(t,e){var n;e===void 0&&(e=[]);var i=uA(t),r=i===((n=t.ownerDocument)==null?void 0:n.body),o=Jn(i),l=r?[o].concat(o.visualViewport||[],Tm(i)?i:[]):i,u=e.concat(l);return r?u:u.concat(cl(pf(l)))}function O_(t){return Object.assign({},t,{left:t.x,top:t.y,right:t.x+t.width,bottom:t.y+t.height})}function QV(t,e){var n=Xo(t,!1,e==="fixed");return n.top=n.top+t.clientTop,n.left=n.left+t.clientLeft,n.bottom=n.top+t.clientHeight,n.right=n.left+t.clientWidth,n.width=t.clientWidth,n.height=t.clientHeight,n.x=n.left,n.y=n.top,n}function pw(t,e,n){return e===dm?O_(YV(t,n)):Vs(e)?QV(e,n):O_(XV(Zr(t)))}function JV(t){var e=cl(pf(t)),n=["absolute","fixed"].indexOf(pr(t).position)>=0,i=n&&zn(t)?rc(t):t;return Vs(i)?e.filter(function(r){return Vs(r)&&sA(r,i)&&Fi(r)!=="body"}):[]}function ZV(t,e,n,i){var r=e==="clippingParents"?JV(t):[].concat(e),o=[].concat(r,[n]),l=o[0],u=o.reduce(function(h,d){var p=pw(t,d,i);return h.top=Ms(p.top,h.top),h.right=mh(p.right,h.right),h.bottom=mh(p.bottom,h.bottom),h.left=Ms(p.left,h.left),h},pw(t,l,i));return u.width=u.right-u.left,u.height=u.bottom-u.top,u.x=u.left,u.y=u.top,u}function hA(t){var e=t.reference,n=t.element,i=t.placement,r=i?Ri(i):null,o=i?Qo(i):null,l=e.x+e.width/2-n.width/2,u=e.y+e.height/2-n.height/2,h;switch(r){case hn:h={x:l,y:e.y-n.height};break;case Dn:h={x:l,y:e.y+e.height};break;case Ln:h={x:e.x+e.width,y:u};break;case fn:h={x:e.x-n.width,y:u};break;default:h={x:e.x,y:e.y}}var d=r?vm(r):null;if(d!=null){var p=d==="y"?"height":"width";switch(o){case Hs:h[d]=h[d]-(e[p]/2-n[p]/2);break;case zo:h[d]=h[d]+(e[p]/2-n[p]/2);break}}return h}function Jo(t,e){e===void 0&&(e={});var n=e,i=n.placement,r=i===void 0?t.placement:i,o=n.strategy,l=o===void 0?t.strategy:o,u=n.boundary,h=u===void 0?KI:u,d=n.rootBoundary,p=d===void 0?dm:d,g=n.elementContext,y=g===void 0?Eo:g,b=n.altBoundary,S=b===void 0?!1:b,N=n.padding,P=N===void 0?0:N,G=aA(typeof P!="number"?P:lA(P,da)),oe=y===Eo?GI:Eo,H=t.rects.popper,V=t.elements[S?oe:y],Q=ZV(Vs(V)?V:V.contextElement||Zr(t.elements.popper),h,p,l),B=Xo(t.elements.reference),Z=hA({reference:B,element:H,strategy:"absolute",placement:r}),X=O_(Object.assign({},H,Z)),pe=y===Eo?X:B,_e={top:Q.top-pe.top+G.top,bottom:pe.bottom-Q.bottom+G.bottom,left:Q.left-pe.left+G.left,right:pe.right-Q.right+G.right},Fe=t.modifiersData.offset;if(y===Eo&&Fe){var ot=Fe[r];Object.keys(_e).forEach(function(Xe){var qt=[Ln,Dn].indexOf(Xe)>=0?1:-1,kn=[hn,Dn].indexOf(Xe)>=0?"y":"x";_e[Xe]+=ot[kn]*qt})}return _e}function e3(t,e){e===void 0&&(e={});var n=e,i=n.placement,r=n.boundary,o=n.rootBoundary,l=n.padding,u=n.flipVariations,h=n.allowedAutoPlacements,d=h===void 0?pm:h,p=Qo(i),g=p?u?A_:A_.filter(function(S){return Qo(S)===p}):da,y=g.filter(function(S){return d.indexOf(S)>=0});y.length===0&&(y=g);var b=y.reduce(function(S,N){return S[N]=Jo(t,{placement:N,boundary:r,rootBoundary:o,padding:l})[Ri(N)],S},{});return Object.keys(b).sort(function(S,N){return b[S]-b[N]})}function t3(t){if(Ri(t)===df)return[];var e=Nu(t);return[dw(t),e,dw(e)]}function n3(t){var e=t.state,n=t.options,i=t.name;if(!e.modifiersData[i]._skip){for(var r=n.mainAxis,o=r===void 0?!0:r,l=n.altAxis,u=l===void 0?!0:l,h=n.fallbackPlacements,d=n.padding,p=n.boundary,g=n.rootBoundary,y=n.altBoundary,b=n.flipVariations,S=b===void 0?!0:b,N=n.allowedAutoPlacements,P=e.options.placement,G=Ri(P),oe=G===P,H=h||(oe||!S?[Nu(P)]:t3(P)),V=[P].concat(H).reduce(function(mi,Pt){return mi.concat(Ri(Pt)===df?e3(e,{placement:Pt,boundary:p,rootBoundary:g,padding:d,flipVariations:S,allowedAutoPlacements:N}):Pt)},[]),Q=e.rects.reference,B=e.rects.popper,Z=new Map,X=!0,pe=V[0],_e=0;_e<V.length;_e++){var Fe=V[_e],ot=Ri(Fe),Xe=Qo(Fe)===Hs,qt=[hn,Dn].indexOf(ot)>=0,kn=qt?"width":"height",We=Jo(e,{placement:Fe,boundary:p,rootBoundary:g,altBoundary:y,padding:d}),ye=qt?Xe?Ln:fn:Xe?Dn:hn;Q[kn]>B[kn]&&(ye=Nu(ye));var Te=Nu(ye),kt=[];if(o&&kt.push(We[ot]<=0),u&&kt.push(We[ye]<=0,We[Te]<=0),kt.every(function(mi){return mi})){pe=Fe,X=!1;break}Z.set(Fe,kt)}if(X)for(var dn=S?3:1,ht=function(Pt){var yt=V.find(function(ei){var Kt=Z.get(ei);if(Kt)return Kt.slice(0,Pt).every(function(Gt){return Gt})});if(yt)return pe=yt,"break"},Ot=dn;Ot>0;Ot--){var ji=ht(Ot);if(ji==="break")break}e.placement!==pe&&(e.modifiersData[i]._skip=!0,e.placement=pe,e.reset=!0)}}const fA={name:"flip",enabled:!0,phase:"main",fn:n3,requiresIfExists:["offset"],data:{_skip:!1}};function _w(t,e,n){return n===void 0&&(n={x:0,y:0}),{top:t.top-e.height-n.y,right:t.right-e.width+n.x,bottom:t.bottom-e.height+n.y,left:t.left-e.width-n.x}}function gw(t){return[hn,Ln,Dn,fn].some(function(e){return t[e]>=0})}function i3(t){var e=t.state,n=t.name,i=e.rects.reference,r=e.rects.popper,o=e.modifiersData.preventOverflow,l=Jo(e,{elementContext:"reference"}),u=Jo(e,{altBoundary:!0}),h=_w(l,i),d=_w(u,r,o),p=gw(h),g=gw(d);e.modifiersData[n]={referenceClippingOffsets:h,popperEscapeOffsets:d,isReferenceHidden:p,hasPopperEscaped:g},e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-reference-hidden":p,"data-popper-escaped":g})}const dA={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:i3};function r3(t,e,n){var i=Ri(t),r=[fn,hn].indexOf(i)>=0?-1:1,o=typeof n=="function"?n(Object.assign({},e,{placement:t})):n,l=o[0],u=o[1];return l=l||0,u=(u||0)*r,[fn,Ln].indexOf(i)>=0?{x:u,y:l}:{x:l,y:u}}function s3(t){var e=t.state,n=t.options,i=t.name,r=n.offset,o=r===void 0?[0,0]:r,l=pm.reduce(function(p,g){return p[g]=r3(g,e.rects,o),p},{}),u=l[e.placement],h=u.x,d=u.y;e.modifiersData.popperOffsets!=null&&(e.modifiersData.popperOffsets.x+=h,e.modifiersData.popperOffsets.y+=d),e.modifiersData[i]=l}const pA={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:s3};function o3(t){var e=t.state,n=t.name;e.modifiersData[n]=hA({reference:e.rects.reference,element:e.rects.popper,strategy:"absolute",placement:e.placement})}const Cm={name:"popperOffsets",enabled:!0,phase:"read",fn:o3,data:{}};function a3(t){return t==="x"?"y":"x"}function l3(t){var e=t.state,n=t.options,i=t.name,r=n.mainAxis,o=r===void 0?!0:r,l=n.altAxis,u=l===void 0?!1:l,h=n.boundary,d=n.rootBoundary,p=n.altBoundary,g=n.padding,y=n.tether,b=y===void 0?!0:y,S=n.tetherOffset,N=S===void 0?0:S,P=Jo(e,{boundary:h,rootBoundary:d,padding:g,altBoundary:p}),G=Ri(e.placement),oe=Qo(e.placement),H=!oe,V=vm(G),Q=a3(V),B=e.modifiersData.popperOffsets,Z=e.rects.reference,X=e.rects.popper,pe=typeof N=="function"?N(Object.assign({},e.rects,{placement:e.placement})):N,_e=typeof pe=="number"?{mainAxis:pe,altAxis:pe}:Object.assign({mainAxis:0,altAxis:0},pe),Fe=e.modifiersData.offset?e.modifiersData.offset[e.placement]:null,ot={x:0,y:0};if(B){if(o){var Xe,qt=V==="y"?hn:fn,kn=V==="y"?Dn:Ln,We=V==="y"?"height":"width",ye=B[V],Te=ye+P[qt],kt=ye-P[kn],dn=b?-X[We]/2:0,ht=oe===Hs?Z[We]:X[We],Ot=oe===Hs?-X[We]:-Z[We],ji=e.elements.arrow,mi=b&&ji?mm(ji):{width:0,height:0},Pt=e.modifiersData["arrow#persistent"]?e.modifiersData["arrow#persistent"].padding:oA(),yt=Pt[qt],ei=Pt[kn],Kt=ll(0,Z[We],mi[We]),Gt=H?Z[We]/2-dn-Kt-yt-_e.mainAxis:ht-Kt-yt-_e.mainAxis,is=H?-Z[We]/2+dn+Kt+ei+_e.mainAxis:Ot+Kt+ei+_e.mainAxis,Pn=e.elements.arrow&&rc(e.elements.arrow),w=Pn?V==="y"?Pn.clientTop||0:Pn.clientLeft||0:0,C=(Xe=Fe==null?void 0:Fe[V])!=null?Xe:0,R=ye+Gt-C-w,M=ye+is-C,$=ll(b?mh(Te,R):Te,ye,b?Ms(kt,M):kt);B[V]=$,ot[V]=$-ye}if(u){var W,z=V==="x"?hn:fn,q=V==="x"?Dn:Ln,j=B[Q],k=Q==="y"?"height":"width",ne=j+P[z],J=j-P[q],se=[hn,fn].indexOf(G)!==-1,ae=(W=Fe==null?void 0:Fe[Q])!=null?W:0,Ee=se?ne:j-Z[k]-X[k]-ae+_e.altAxis,ke=se?j+Z[k]+X[k]-ae-_e.altAxis:J,Oe=b&&se?UV(Ee,j,ke):ll(b?Ee:ne,j,b?ke:J);B[Q]=Oe,ot[Q]=Oe-j}e.modifiersData[i]=ot}}const _A={name:"preventOverflow",enabled:!0,phase:"main",fn:l3,requiresIfExists:["offset"]};function c3(t){return{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}}function u3(t){return t===Jn(t)||!zn(t)?bm(t):c3(t)}function h3(t){var e=t.getBoundingClientRect(),n=Yo(e.width)/t.offsetWidth||1,i=Yo(e.height)/t.offsetHeight||1;return n!==1||i!==1}function f3(t,e,n){n===void 0&&(n=!1);var i=zn(e),r=zn(e)&&h3(e),o=Zr(e),l=Xo(t,r,n),u={scrollLeft:0,scrollTop:0},h={x:0,y:0};return(i||!i&&!n)&&((Fi(e)!=="body"||Tm(o))&&(u=u3(e)),zn(e)?(h=Xo(e,!0),h.x+=e.clientLeft,h.y+=e.clientTop):o&&(h.x=wm(o))),{x:l.left+u.scrollLeft-h.x,y:l.top+u.scrollTop-h.y,width:l.width,height:l.height}}function d3(t){var e=new Map,n=new Set,i=[];t.forEach(function(o){e.set(o.name,o)});function r(o){n.add(o.name);var l=[].concat(o.requires||[],o.requiresIfExists||[]);l.forEach(function(u){if(!n.has(u)){var h=e.get(u);h&&r(h)}}),i.push(o)}return t.forEach(function(o){n.has(o.name)||r(o)}),i}function p3(t){var e=d3(t);return iA.reduce(function(n,i){return n.concat(e.filter(function(r){return r.phase===i}))},[])}function _3(t){var e;return function(){return e||(e=new Promise(function(n){Promise.resolve().then(function(){e=void 0,n(t())})})),e}}function g3(t){var e=t.reduce(function(n,i){var r=n[i.name];return n[i.name]=r?Object.assign({},r,i,{options:Object.assign({},r.options,i.options),data:Object.assign({},r.data,i.data)}):i,n},{});return Object.keys(e).map(function(n){return e[n]})}var mw={placement:"bottom",modifiers:[],strategy:"absolute"};function vw(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return!e.some(function(i){return!(i&&typeof i.getBoundingClientRect=="function")})}function _f(t){t===void 0&&(t={});var e=t,n=e.defaultModifiers,i=n===void 0?[]:n,r=e.defaultOptions,o=r===void 0?mw:r;return function(u,h,d){d===void 0&&(d=o);var p={placement:"bottom",orderedModifiers:[],options:Object.assign({},mw,o),modifiersData:{},elements:{reference:u,popper:h},attributes:{},styles:{}},g=[],y=!1,b={state:p,setOptions:function(G){var oe=typeof G=="function"?G(p.options):G;N(),p.options=Object.assign({},o,p.options,oe),p.scrollParents={reference:Vs(u)?cl(u):u.contextElement?cl(u.contextElement):[],popper:cl(h)};var H=p3(g3([].concat(i,p.options.modifiers)));return p.orderedModifiers=H.filter(function(V){return V.enabled}),S(),b.update()},forceUpdate:function(){if(!y){var G=p.elements,oe=G.reference,H=G.popper;if(vw(oe,H)){p.rects={reference:f3(oe,rc(H),p.options.strategy==="fixed"),popper:mm(H)},p.reset=!1,p.placement=p.options.placement,p.orderedModifiers.forEach(function(_e){return p.modifiersData[_e.name]=Object.assign({},_e.data)});for(var V=0;V<p.orderedModifiers.length;V++){if(p.reset===!0){p.reset=!1,V=-1;continue}var Q=p.orderedModifiers[V],B=Q.fn,Z=Q.options,X=Z===void 0?{}:Z,pe=Q.name;typeof B=="function"&&(p=B({state:p,options:X,name:pe,instance:b})||p)}}}},update:_3(function(){return new Promise(function(P){b.forceUpdate(),P(p)})}),destroy:function(){N(),y=!0}};if(!vw(u,h))return b;b.setOptions(d).then(function(P){!y&&d.onFirstUpdate&&d.onFirstUpdate(P)});function S(){p.orderedModifiers.forEach(function(P){var G=P.name,oe=P.options,H=oe===void 0?{}:oe,V=P.effect;if(typeof V=="function"){var Q=V({state:p,name:G,instance:b,options:H}),B=function(){};g.push(Q||B)}})}function N(){g.forEach(function(P){return P()}),g=[]}return b}}var m3=_f(),v3=[Em,Cm,ym,gm],y3=_f({defaultModifiers:v3}),E3=[Em,Cm,ym,gm,pA,fA,_A,cA,dA],Im=_f({defaultModifiers:E3});const gA=Object.freeze(Object.defineProperty({__proto__:null,popperGenerator:_f,detectOverflow:Jo,createPopperBase:m3,createPopper:Im,createPopperLite:y3,top:hn,bottom:Dn,right:Ln,left:fn,auto:df,basePlacements:da,start:Hs,end:zo,clippingParents:KI,viewport:dm,popper:Eo,reference:GI,variationPlacements:A_,placements:pm,beforeRead:zI,read:YI,afterRead:XI,beforeMain:QI,main:JI,afterMain:ZI,beforeWrite:eA,write:tA,afterWrite:nA,modifierPhases:iA,applyStyles:gm,arrow:cA,computeStyles:ym,eventListeners:Em,flip:fA,hide:dA,offset:pA,popperOffsets:Cm,preventOverflow:_A},Symbol.toStringTag,{value:"Module"}));/*!
  * Bootstrap v5.2.3 (https://getbootstrap.com/)
  * Copyright 2011-2022 The Bootstrap Authors (https://github.com/twbs/bootstrap/graphs/contributors)
  * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)
  */const b3=1e6,w3=1e3,N_="transitionend",T3=t=>t==null?`${t}`:Object.prototype.toString.call(t).match(/\s([a-z]+)/i)[1].toLowerCase(),C3=t=>{do t+=Math.floor(Math.random()*b3);while(document.getElementById(t));return t},mA=t=>{let e=t.getAttribute("data-bs-target");if(!e||e==="#"){let n=t.getAttribute("href");if(!n||!n.includes("#")&&!n.startsWith("."))return null;n.includes("#")&&!n.startsWith("#")&&(n=`#${n.split("#")[1]}`),e=n&&n!=="#"?n.trim():null}return e},vA=t=>{const e=mA(t);return e&&document.querySelector(e)?e:null},ar=t=>{const e=mA(t);return e?document.querySelector(e):null},I3=t=>{if(!t)return 0;let{transitionDuration:e,transitionDelay:n}=window.getComputedStyle(t);const i=Number.parseFloat(e),r=Number.parseFloat(n);return!i&&!r?0:(e=e.split(",")[0],n=n.split(",")[0],(Number.parseFloat(e)+Number.parseFloat(n))*w3)},yA=t=>{t.dispatchEvent(new Event(N_))},lr=t=>!t||typeof t!="object"?!1:(typeof t.jquery<"u"&&(t=t[0]),typeof t.nodeType<"u"),zr=t=>lr(t)?t.jquery?t[0]:t:typeof t=="string"&&t.length>0?document.querySelector(t):null,pa=t=>{if(!lr(t)||t.getClientRects().length===0)return!1;const e=getComputedStyle(t).getPropertyValue("visibility")==="visible",n=t.closest("details:not([open])");if(!n)return e;if(n!==t){const i=t.closest("summary");if(i&&i.parentNode!==n||i===null)return!1}return e},Yr=t=>!t||t.nodeType!==Node.ELEMENT_NODE||t.classList.contains("disabled")?!0:typeof t.disabled<"u"?t.disabled:t.hasAttribute("disabled")&&t.getAttribute("disabled")!=="false",EA=t=>{if(!document.documentElement.attachShadow)return null;if(typeof t.getRootNode=="function"){const e=t.getRootNode();return e instanceof ShadowRoot?e:null}return t instanceof ShadowRoot?t:t.parentNode?EA(t.parentNode):null},vh=()=>{},sc=t=>{t.offsetHeight},bA=()=>window.jQuery&&!document.body.hasAttribute("data-bs-no-jquery")?window.jQuery:null,_p=[],A3=t=>{document.readyState==="loading"?(_p.length||document.addEventListener("DOMContentLoaded",()=>{for(const e of _p)e()}),_p.push(t)):t()},Qn=()=>document.documentElement.dir==="rtl",Zn=t=>{A3(()=>{const e=bA();if(e){const n=t.NAME,i=e.fn[n];e.fn[n]=t.jQueryInterface,e.fn[n].Constructor=t,e.fn[n].noConflict=()=>(e.fn[n]=i,t.jQueryInterface)}})},nr=t=>{typeof t=="function"&&t()},wA=(t,e,n=!0)=>{if(!n){nr(t);return}const i=5,r=I3(e)+i;let o=!1;const l=({target:u})=>{u===e&&(o=!0,e.removeEventListener(N_,l),nr(t))};e.addEventListener(N_,l),setTimeout(()=>{o||yA(e)},r)},Am=(t,e,n,i)=>{const r=t.length;let o=t.indexOf(e);return o===-1?!n&&i?t[r-1]:t[0]:(o+=n?1:-1,i&&(o=(o+r)%r),t[Math.max(0,Math.min(o,r-1))])},S3=/[^.]*(?=\..*)\.|.*/,O3=/\..*/,N3=/::\d+$/,gp={};let yw=1;const TA={mouseenter:"mouseover",mouseleave:"mouseout"},R3=new Set(["click","dblclick","mouseup","mousedown","contextmenu","mousewheel","DOMMouseScroll","mouseover","mouseout","mousemove","selectstart","selectend","keydown","keypress","keyup","orientationchange","touchstart","touchmove","touchend","touchcancel","pointerdown","pointermove","pointerup","pointerleave","pointercancel","gesturestart","gesturechange","gestureend","focus","blur","change","reset","select","submit","focusin","focusout","load","unload","beforeunload","resize","move","DOMContentLoaded","readystatechange","error","abort","scroll"]);function CA(t,e){return e&&`${e}::${yw++}`||t.uidEvent||yw++}function IA(t){const e=CA(t);return t.uidEvent=e,gp[e]=gp[e]||{},gp[e]}function x3(t,e){return function n(i){return Sm(i,{delegateTarget:t}),n.oneOff&&U.off(t,i.type,e),e.apply(t,[i])}}function D3(t,e,n){return function i(r){const o=t.querySelectorAll(e);for(let{target:l}=r;l&&l!==this;l=l.parentNode)for(const u of o)if(u===l)return Sm(r,{delegateTarget:l}),i.oneOff&&U.off(t,r.type,e,n),n.apply(l,[r])}}function AA(t,e,n=null){return Object.values(t).find(i=>i.callable===e&&i.delegationSelector===n)}function SA(t,e,n){const i=typeof e=="string",r=i?n:e||n;let o=OA(t);return R3.has(o)||(o=t),[i,r,o]}function Ew(t,e,n,i,r){if(typeof e!="string"||!t)return;let[o,l,u]=SA(e,n,i);e in TA&&(l=(S=>function(N){if(!N.relatedTarget||N.relatedTarget!==N.delegateTarget&&!N.delegateTarget.contains(N.relatedTarget))return S.call(this,N)})(l));const h=IA(t),d=h[u]||(h[u]={}),p=AA(d,l,o?n:null);if(p){p.oneOff=p.oneOff&&r;return}const g=CA(l,e.replace(S3,"")),y=o?D3(t,n,l):x3(t,l);y.delegationSelector=o?n:null,y.callable=l,y.oneOff=r,y.uidEvent=g,d[g]=y,t.addEventListener(u,y,o)}function R_(t,e,n,i,r){const o=AA(e[n],i,r);o&&(t.removeEventListener(n,o,Boolean(r)),delete e[n][o.uidEvent])}function L3(t,e,n,i){const r=e[n]||{};for(const o of Object.keys(r))if(o.includes(i)){const l=r[o];R_(t,e,n,l.callable,l.delegationSelector)}}function OA(t){return t=t.replace(O3,""),TA[t]||t}const U={on(t,e,n,i){Ew(t,e,n,i,!1)},one(t,e,n,i){Ew(t,e,n,i,!0)},off(t,e,n,i){if(typeof e!="string"||!t)return;const[r,o,l]=SA(e,n,i),u=l!==e,h=IA(t),d=h[l]||{},p=e.startsWith(".");if(typeof o<"u"){if(!Object.keys(d).length)return;R_(t,h,l,o,r?n:null);return}if(p)for(const g of Object.keys(h))L3(t,h,g,e.slice(1));for(const g of Object.keys(d)){const y=g.replace(N3,"");if(!u||e.includes(y)){const b=d[g];R_(t,h,l,b.callable,b.delegationSelector)}}},trigger(t,e,n){if(typeof e!="string"||!t)return null;const i=bA(),r=OA(e),o=e!==r;let l=null,u=!0,h=!0,d=!1;o&&i&&(l=i.Event(e,n),i(t).trigger(l),u=!l.isPropagationStopped(),h=!l.isImmediatePropagationStopped(),d=l.isDefaultPrevented());let p=new Event(e,{bubbles:u,cancelable:!0});return p=Sm(p,n),d&&p.preventDefault(),h&&t.dispatchEvent(p),p.defaultPrevented&&l&&l.preventDefault(),p}};function Sm(t,e){for(const[n,i]of Object.entries(e||{}))try{t[n]=i}catch{Object.defineProperty(t,n,{configurable:!0,get(){return i}})}return t}const Rr=new Map,mp={set(t,e,n){Rr.has(t)||Rr.set(t,new Map);const i=Rr.get(t);if(!i.has(e)&&i.size!==0){console.error(`Bootstrap doesn't allow more than one instance per element. Bound instance: ${Array.from(i.keys())[0]}.`);return}i.set(e,n)},get(t,e){return Rr.has(t)&&Rr.get(t).get(e)||null},remove(t,e){if(!Rr.has(t))return;const n=Rr.get(t);n.delete(e),n.size===0&&Rr.delete(t)}};function bw(t){if(t==="true")return!0;if(t==="false")return!1;if(t===Number(t).toString())return Number(t);if(t===""||t==="null")return null;if(typeof t!="string")return t;try{return JSON.parse(decodeURIComponent(t))}catch{return t}}function vp(t){return t.replace(/[A-Z]/g,e=>`-${e.toLowerCase()}`)}const cr={setDataAttribute(t,e,n){t.setAttribute(`data-bs-${vp(e)}`,n)},removeDataAttribute(t,e){t.removeAttribute(`data-bs-${vp(e)}`)},getDataAttributes(t){if(!t)return{};const e={},n=Object.keys(t.dataset).filter(i=>i.startsWith("bs")&&!i.startsWith("bsConfig"));for(const i of n){let r=i.replace(/^bs/,"");r=r.charAt(0).toLowerCase()+r.slice(1,r.length),e[r]=bw(t.dataset[i])}return e},getDataAttribute(t,e){return bw(t.getAttribute(`data-bs-${vp(e)}`))}};class oc{static get Default(){return{}}static get DefaultType(){return{}}static get NAME(){throw new Error('You have to implement the static method "NAME", for each component!')}_getConfig(e){return e=this._mergeConfigObj(e),e=this._configAfterMerge(e),this._typeCheckConfig(e),e}_configAfterMerge(e){return e}_mergeConfigObj(e,n){const i=lr(n)?cr.getDataAttribute(n,"config"):{};return{...this.constructor.Default,...typeof i=="object"?i:{},...lr(n)?cr.getDataAttributes(n):{},...typeof e=="object"?e:{}}}_typeCheckConfig(e,n=this.constructor.DefaultType){for(const i of Object.keys(n)){const r=n[i],o=e[i],l=lr(o)?"element":T3(o);if(!new RegExp(r).test(l))throw new TypeError(`${this.constructor.NAME.toUpperCase()}: Option "${i}" provided type "${l}" but expected type "${r}".`)}}}const k3="5.2.3";class _i extends oc{constructor(e,n){super(),e=zr(e),e&&(this._element=e,this._config=this._getConfig(n),mp.set(this._element,this.constructor.DATA_KEY,this))}dispose(){mp.remove(this._element,this.constructor.DATA_KEY),U.off(this._element,this.constructor.EVENT_KEY);for(const e of Object.getOwnPropertyNames(this))this[e]=null}_queueCallback(e,n,i=!0){wA(e,n,i)}_getConfig(e){return e=this._mergeConfigObj(e,this._element),e=this._configAfterMerge(e),this._typeCheckConfig(e),e}static getInstance(e){return mp.get(zr(e),this.DATA_KEY)}static getOrCreateInstance(e,n={}){return this.getInstance(e)||new this(e,typeof n=="object"?n:null)}static get VERSION(){return k3}static get DATA_KEY(){return`bs.${this.NAME}`}static get EVENT_KEY(){return`.${this.DATA_KEY}`}static eventName(e){return`${e}${this.EVENT_KEY}`}}const gf=(t,e="hide")=>{const n=`click.dismiss${t.EVENT_KEY}`,i=t.NAME;U.on(document,n,`[data-bs-dismiss="${i}"]`,function(r){if(["A","AREA"].includes(this.tagName)&&r.preventDefault(),Yr(this))return;const o=ar(this)||this.closest(`.${i}`);t.getOrCreateInstance(o)[e]()})},P3="alert",M3="bs.alert",NA=`.${M3}`,$3=`close${NA}`,F3=`closed${NA}`,U3="fade",B3="show";class mf extends _i{static get NAME(){return P3}close(){if(U.trigger(this._element,$3).defaultPrevented)return;this._element.classList.remove(B3);const n=this._element.classList.contains(U3);this._queueCallback(()=>this._destroyElement(),this._element,n)}_destroyElement(){this._element.remove(),U.trigger(this._element,F3),this.dispose()}static jQueryInterface(e){return this.each(function(){const n=mf.getOrCreateInstance(this);if(typeof e=="string"){if(n[e]===void 0||e.startsWith("_")||e==="constructor")throw new TypeError(`No method named "${e}"`);n[e](this)}})}}gf(mf,"close");Zn(mf);const W3="button",H3="bs.button",V3=`.${H3}`,j3=".data-api",q3="active",ww='[data-bs-toggle="button"]',K3=`click${V3}${j3}`;class vf extends _i{static get NAME(){return W3}toggle(){this._element.setAttribute("aria-pressed",this._element.classList.toggle(q3))}static jQueryInterface(e){return this.each(function(){const n=vf.getOrCreateInstance(this);e==="toggle"&&n[e]()})}}U.on(document,K3,ww,t=>{t.preventDefault();const e=t.target.closest(ww);vf.getOrCreateInstance(e).toggle()});Zn(vf);const Ie={find(t,e=document.documentElement){return[].concat(...Element.prototype.querySelectorAll.call(e,t))},findOne(t,e=document.documentElement){return Element.prototype.querySelector.call(e,t)},children(t,e){return[].concat(...t.children).filter(n=>n.matches(e))},parents(t,e){const n=[];let i=t.parentNode.closest(e);for(;i;)n.push(i),i=i.parentNode.closest(e);return n},prev(t,e){let n=t.previousElementSibling;for(;n;){if(n.matches(e))return[n];n=n.previousElementSibling}return[]},next(t,e){let n=t.nextElementSibling;for(;n;){if(n.matches(e))return[n];n=n.nextElementSibling}return[]},focusableChildren(t){const e=["a","button","input","textarea","select","details","[tabindex]",'[contenteditable="true"]'].map(n=>`${n}:not([tabindex^="-"])`).join(",");return this.find(e,t).filter(n=>!Yr(n)&&pa(n))}},G3="swipe",_a=".bs.swipe",z3=`touchstart${_a}`,Y3=`touchmove${_a}`,X3=`touchend${_a}`,Q3=`pointerdown${_a}`,J3=`pointerup${_a}`,Z3="touch",ej="pen",tj="pointer-event",nj=40,ij={endCallback:null,leftCallback:null,rightCallback:null},rj={endCallback:"(function|null)",leftCallback:"(function|null)",rightCallback:"(function|null)"};class yh extends oc{constructor(e,n){super(),this._element=e,!(!e||!yh.isSupported())&&(this._config=this._getConfig(n),this._deltaX=0,this._supportPointerEvents=Boolean(window.PointerEvent),this._initEvents())}static get Default(){return ij}static get DefaultType(){return rj}static get NAME(){return G3}dispose(){U.off(this._element,_a)}_start(e){if(!this._supportPointerEvents){this._deltaX=e.touches[0].clientX;return}this._eventIsPointerPenTouch(e)&&(this._deltaX=e.clientX)}_end(e){this._eventIsPointerPenTouch(e)&&(this._deltaX=e.clientX-this._deltaX),this._handleSwipe(),nr(this._config.endCallback)}_move(e){this._deltaX=e.touches&&e.touches.length>1?0:e.touches[0].clientX-this._deltaX}_handleSwipe(){const e=Math.abs(this._deltaX);if(e<=nj)return;const n=e/this._deltaX;this._deltaX=0,n&&nr(n>0?this._config.rightCallback:this._config.leftCallback)}_initEvents(){this._supportPointerEvents?(U.on(this._element,Q3,e=>this._start(e)),U.on(this._element,J3,e=>this._end(e)),this._element.classList.add(tj)):(U.on(this._element,z3,e=>this._start(e)),U.on(this._element,Y3,e=>this._move(e)),U.on(this._element,X3,e=>this._end(e)))}_eventIsPointerPenTouch(e){return this._supportPointerEvents&&(e.pointerType===ej||e.pointerType===Z3)}static isSupported(){return"ontouchstart"in document.documentElement||navigator.maxTouchPoints>0}}const sj="carousel",oj="bs.carousel",es=`.${oj}`,RA=".data-api",aj="ArrowLeft",lj="ArrowRight",cj=500,ja="next",mo="prev",bo="left",Ru="right",uj=`slide${es}`,yp=`slid${es}`,hj=`keydown${es}`,fj=`mouseenter${es}`,dj=`mouseleave${es}`,pj=`dragstart${es}`,_j=`load${es}${RA}`,gj=`click${es}${RA}`,xA="carousel",pu="active",mj="slide",vj="carousel-item-end",yj="carousel-item-start",Ej="carousel-item-next",bj="carousel-item-prev",DA=".active",LA=".carousel-item",wj=DA+LA,Tj=".carousel-item img",Cj=".carousel-indicators",Ij="[data-bs-slide], [data-bs-slide-to]",Aj='[data-bs-ride="carousel"]',Sj={[aj]:Ru,[lj]:bo},Oj={interval:5e3,keyboard:!0,pause:"hover",ride:!1,touch:!0,wrap:!0},Nj={interval:"(number|boolean)",keyboard:"boolean",pause:"(string|boolean)",ride:"(boolean|string)",touch:"boolean",wrap:"boolean"};class ac extends _i{constructor(e,n){super(e,n),this._interval=null,this._activeElement=null,this._isSliding=!1,this.touchTimeout=null,this._swipeHelper=null,this._indicatorsElement=Ie.findOne(Cj,this._element),this._addEventListeners(),this._config.ride===xA&&this.cycle()}static get Default(){return Oj}static get DefaultType(){return Nj}static get NAME(){return sj}next(){this._slide(ja)}nextWhenVisible(){!document.hidden&&pa(this._element)&&this.next()}prev(){this._slide(mo)}pause(){this._isSliding&&yA(this._element),this._clearInterval()}cycle(){this._clearInterval(),this._updateInterval(),this._interval=setInterval(()=>this.nextWhenVisible(),this._config.interval)}_maybeEnableCycle(){if(this._config.ride){if(this._isSliding){U.one(this._element,yp,()=>this.cycle());return}this.cycle()}}to(e){const n=this._getItems();if(e>n.length-1||e<0)return;if(this._isSliding){U.one(this._element,yp,()=>this.to(e));return}const i=this._getItemIndex(this._getActive());if(i===e)return;const r=e>i?ja:mo;this._slide(r,n[e])}dispose(){this._swipeHelper&&this._swipeHelper.dispose(),super.dispose()}_configAfterMerge(e){return e.defaultInterval=e.interval,e}_addEventListeners(){this._config.keyboard&&U.on(this._element,hj,e=>this._keydown(e)),this._config.pause==="hover"&&(U.on(this._element,fj,()=>this.pause()),U.on(this._element,dj,()=>this._maybeEnableCycle())),this._config.touch&&yh.isSupported()&&this._addTouchEventListeners()}_addTouchEventListeners(){for(const i of Ie.find(Tj,this._element))U.on(i,pj,r=>r.preventDefault());const n={leftCallback:()=>this._slide(this._directionToOrder(bo)),rightCallback:()=>this._slide(this._directionToOrder(Ru)),endCallback:()=>{this._config.pause==="hover"&&(this.pause(),this.touchTimeout&&clearTimeout(this.touchTimeout),this.touchTimeout=setTimeout(()=>this._maybeEnableCycle(),cj+this._config.interval))}};this._swipeHelper=new yh(this._element,n)}_keydown(e){if(/input|textarea/i.test(e.target.tagName))return;const n=Sj[e.key];n&&(e.preventDefault(),this._slide(this._directionToOrder(n)))}_getItemIndex(e){return this._getItems().indexOf(e)}_setActiveIndicatorElement(e){if(!this._indicatorsElement)return;const n=Ie.findOne(DA,this._indicatorsElement);n.classList.remove(pu),n.removeAttribute("aria-current");const i=Ie.findOne(`[data-bs-slide-to="${e}"]`,this._indicatorsElement);i&&(i.classList.add(pu),i.setAttribute("aria-current","true"))}_updateInterval(){const e=this._activeElement||this._getActive();if(!e)return;const n=Number.parseInt(e.getAttribute("data-bs-interval"),10);this._config.interval=n||this._config.defaultInterval}_slide(e,n=null){if(this._isSliding)return;const i=this._getActive(),r=e===ja,o=n||Am(this._getItems(),i,r,this._config.wrap);if(o===i)return;const l=this._getItemIndex(o),u=b=>U.trigger(this._element,b,{relatedTarget:o,direction:this._orderToDirection(e),from:this._getItemIndex(i),to:l});if(u(uj).defaultPrevented||!i||!o)return;const d=Boolean(this._interval);this.pause(),this._isSliding=!0,this._setActiveIndicatorElement(l),this._activeElement=o;const p=r?yj:vj,g=r?Ej:bj;o.classList.add(g),sc(o),i.classList.add(p),o.classList.add(p);const y=()=>{o.classList.remove(p,g),o.classList.add(pu),i.classList.remove(pu,g,p),this._isSliding=!1,u(yp)};this._queueCallback(y,i,this._isAnimated()),d&&this.cycle()}_isAnimated(){return this._element.classList.contains(mj)}_getActive(){return Ie.findOne(wj,this._element)}_getItems(){return Ie.find(LA,this._element)}_clearInterval(){this._interval&&(clearInterval(this._interval),this._interval=null)}_directionToOrder(e){return Qn()?e===bo?mo:ja:e===bo?ja:mo}_orderToDirection(e){return Qn()?e===mo?bo:Ru:e===mo?Ru:bo}static jQueryInterface(e){return this.each(function(){const n=ac.getOrCreateInstance(this,e);if(typeof e=="number"){n.to(e);return}if(typeof e=="string"){if(n[e]===void 0||e.startsWith("_")||e==="constructor")throw new TypeError(`No method named "${e}"`);n[e]()}})}}U.on(document,gj,Ij,function(t){const e=ar(this);if(!e||!e.classList.contains(xA))return;t.preventDefault();const n=ac.getOrCreateInstance(e),i=this.getAttribute("data-bs-slide-to");if(i){n.to(i),n._maybeEnableCycle();return}if(cr.getDataAttribute(this,"slide")==="next"){n.next(),n._maybeEnableCycle();return}n.prev(),n._maybeEnableCycle()});U.on(window,_j,()=>{const t=Ie.find(Aj);for(const e of t)ac.getOrCreateInstance(e)});Zn(ac);const Rj="collapse",xj="bs.collapse",lc=`.${xj}`,Dj=".data-api",Lj=`show${lc}`,kj=`shown${lc}`,Pj=`hide${lc}`,Mj=`hidden${lc}`,$j=`click${lc}${Dj}`,Ep="show",Io="collapse",_u="collapsing",Fj="collapsed",Uj=`:scope .${Io} .${Io}`,Bj="collapse-horizontal",Wj="width",Hj="height",Vj=".collapse.show, .collapse.collapsing",x_='[data-bs-toggle="collapse"]',jj={parent:null,toggle:!0},qj={parent:"(null|element)",toggle:"boolean"};class Pl extends _i{constructor(e,n){super(e,n),this._isTransitioning=!1,this._triggerArray=[];const i=Ie.find(x_);for(const r of i){const o=vA(r),l=Ie.find(o).filter(u=>u===this._element);o!==null&&l.length&&this._triggerArray.push(r)}this._initializeChildren(),this._config.parent||this._addAriaAndCollapsedClass(this._triggerArray,this._isShown()),this._config.toggle&&this.toggle()}static get Default(){return jj}static get DefaultType(){return qj}static get NAME(){return Rj}toggle(){this._isShown()?this.hide():this.show()}show(){if(this._isTransitioning||this._isShown())return;let e=[];if(this._config.parent&&(e=this._getFirstLevelChildren(Vj).filter(u=>u!==this._element).map(u=>Pl.getOrCreateInstance(u,{toggle:!1}))),e.length&&e[0]._isTransitioning||U.trigger(this._element,Lj).defaultPrevented)return;for(const u of e)u.hide();const i=this._getDimension();this._element.classList.remove(Io),this._element.classList.add(_u),this._element.style[i]=0,this._addAriaAndCollapsedClass(this._triggerArray,!0),this._isTransitioning=!0;const r=()=>{this._isTransitioning=!1,this._element.classList.remove(_u),this._element.classList.add(Io,Ep),this._element.style[i]="",U.trigger(this._element,kj)},l=`scroll${i[0].toUpperCase()+i.slice(1)}`;this._queueCallback(r,this._element,!0),this._element.style[i]=`${this._element[l]}px`}hide(){if(this._isTransitioning||!this._isShown()||U.trigger(this._element,Pj).defaultPrevented)return;const n=this._getDimension();this._element.style[n]=`${this._element.getBoundingClientRect()[n]}px`,sc(this._element),this._element.classList.add(_u),this._element.classList.remove(Io,Ep);for(const r of this._triggerArray){const o=ar(r);o&&!this._isShown(o)&&this._addAriaAndCollapsedClass([r],!1)}this._isTransitioning=!0;const i=()=>{this._isTransitioning=!1,this._element.classList.remove(_u),this._element.classList.add(Io),U.trigger(this._element,Mj)};this._element.style[n]="",this._queueCallback(i,this._element,!0)}_isShown(e=this._element){return e.classList.contains(Ep)}_configAfterMerge(e){return e.toggle=Boolean(e.toggle),e.parent=zr(e.parent),e}_getDimension(){return this._element.classList.contains(Bj)?Wj:Hj}_initializeChildren(){if(!this._config.parent)return;const e=this._getFirstLevelChildren(x_);for(const n of e){const i=ar(n);i&&this._addAriaAndCollapsedClass([n],this._isShown(i))}}_getFirstLevelChildren(e){const n=Ie.find(Uj,this._config.parent);return Ie.find(e,this._config.parent).filter(i=>!n.includes(i))}_addAriaAndCollapsedClass(e,n){if(e.length)for(const i of e)i.classList.toggle(Fj,!n),i.setAttribute("aria-expanded",n)}static jQueryInterface(e){const n={};return typeof e=="string"&&/show|hide/.test(e)&&(n.toggle=!1),this.each(function(){const i=Pl.getOrCreateInstance(this,n);if(typeof e=="string"){if(typeof i[e]>"u")throw new TypeError(`No method named "${e}"`);i[e]()}})}}U.on(document,$j,x_,function(t){(t.target.tagName==="A"||t.delegateTarget&&t.delegateTarget.tagName==="A")&&t.preventDefault();const e=vA(this),n=Ie.find(e);for(const i of n)Pl.getOrCreateInstance(i,{toggle:!1}).toggle()});Zn(Pl);const Tw="dropdown",Kj="bs.dropdown",zs=`.${Kj}`,Om=".data-api",Gj="Escape",Cw="Tab",zj="ArrowUp",Iw="ArrowDown",Yj=2,Xj=`hide${zs}`,Qj=`hidden${zs}`,Jj=`show${zs}`,Zj=`shown${zs}`,kA=`click${zs}${Om}`,PA=`keydown${zs}${Om}`,eq=`keyup${zs}${Om}`,wo="show",tq="dropup",nq="dropend",iq="dropstart",rq="dropup-center",sq="dropdown-center",Ss='[data-bs-toggle="dropdown"]:not(.disabled):not(:disabled)',oq=`${Ss}.${wo}`,xu=".dropdown-menu",aq=".navbar",lq=".navbar-nav",cq=".dropdown-menu .dropdown-item:not(.disabled):not(:disabled)",uq=Qn()?"top-end":"top-start",hq=Qn()?"top-start":"top-end",fq=Qn()?"bottom-end":"bottom-start",dq=Qn()?"bottom-start":"bottom-end",pq=Qn()?"left-start":"right-start",_q=Qn()?"right-start":"left-start",gq="top",mq="bottom",vq={autoClose:!0,boundary:"clippingParents",display:"dynamic",offset:[0,2],popperConfig:null,reference:"toggle"},yq={autoClose:"(boolean|string)",boundary:"(string|element)",display:"string",offset:"(array|string|function)",popperConfig:"(null|object|function)",reference:"(string|element|object)"};class xi extends _i{constructor(e,n){super(e,n),this._popper=null,this._parent=this._element.parentNode,this._menu=Ie.next(this._element,xu)[0]||Ie.prev(this._element,xu)[0]||Ie.findOne(xu,this._parent),this._inNavbar=this._detectNavbar()}static get Default(){return vq}static get DefaultType(){return yq}static get NAME(){return Tw}toggle(){return this._isShown()?this.hide():this.show()}show(){if(Yr(this._element)||this._isShown())return;const e={relatedTarget:this._element};if(!U.trigger(this._element,Jj,e).defaultPrevented){if(this._createPopper(),"ontouchstart"in document.documentElement&&!this._parent.closest(lq))for(const i of[].concat(...document.body.children))U.on(i,"mouseover",vh);this._element.focus(),this._element.setAttribute("aria-expanded",!0),this._menu.classList.add(wo),this._element.classList.add(wo),U.trigger(this._element,Zj,e)}}hide(){if(Yr(this._element)||!this._isShown())return;const e={relatedTarget:this._element};this._completeHide(e)}dispose(){this._popper&&this._popper.destroy(),super.dispose()}update(){this._inNavbar=this._detectNavbar(),this._popper&&this._popper.update()}_completeHide(e){if(!U.trigger(this._element,Xj,e).defaultPrevented){if("ontouchstart"in document.documentElement)for(const i of[].concat(...document.body.children))U.off(i,"mouseover",vh);this._popper&&this._popper.destroy(),this._menu.classList.remove(wo),this._element.classList.remove(wo),this._element.setAttribute("aria-expanded","false"),cr.removeDataAttribute(this._menu,"popper"),U.trigger(this._element,Qj,e)}}_getConfig(e){if(e=super._getConfig(e),typeof e.reference=="object"&&!lr(e.reference)&&typeof e.reference.getBoundingClientRect!="function")throw new TypeError(`${Tw.toUpperCase()}: Option "reference" provided type "object" without a required "getBoundingClientRect" method.`);return e}_createPopper(){if(typeof gA>"u")throw new TypeError("Bootstrap's dropdowns require Popper (https://popper.js.org)");let e=this._element;this._config.reference==="parent"?e=this._parent:lr(this._config.reference)?e=zr(this._config.reference):typeof this._config.reference=="object"&&(e=this._config.reference);const n=this._getPopperConfig();this._popper=Im(e,this._menu,n)}_isShown(){return this._menu.classList.contains(wo)}_getPlacement(){const e=this._parent;if(e.classList.contains(nq))return pq;if(e.classList.contains(iq))return _q;if(e.classList.contains(rq))return gq;if(e.classList.contains(sq))return mq;const n=getComputedStyle(this._menu).getPropertyValue("--bs-position").trim()==="end";return e.classList.contains(tq)?n?hq:uq:n?dq:fq}_detectNavbar(){return this._element.closest(aq)!==null}_getOffset(){const{offset:e}=this._config;return typeof e=="string"?e.split(",").map(n=>Number.parseInt(n,10)):typeof e=="function"?n=>e(n,this._element):e}_getPopperConfig(){const e={placement:this._getPlacement(),modifiers:[{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"offset",options:{offset:this._getOffset()}}]};return(this._inNavbar||this._config.display==="static")&&(cr.setDataAttribute(this._menu,"popper","static"),e.modifiers=[{name:"applyStyles",enabled:!1}]),{...e,...typeof this._config.popperConfig=="function"?this._config.popperConfig(e):this._config.popperConfig}}_selectMenuItem({key:e,target:n}){const i=Ie.find(cq,this._menu).filter(r=>pa(r));i.length&&Am(i,n,e===Iw,!i.includes(n)).focus()}static jQueryInterface(e){return this.each(function(){const n=xi.getOrCreateInstance(this,e);if(typeof e=="string"){if(typeof n[e]>"u")throw new TypeError(`No method named "${e}"`);n[e]()}})}static clearMenus(e){if(e.button===Yj||e.type==="keyup"&&e.key!==Cw)return;const n=Ie.find(oq);for(const i of n){const r=xi.getInstance(i);if(!r||r._config.autoClose===!1)continue;const o=e.composedPath(),l=o.includes(r._menu);if(o.includes(r._element)||r._config.autoClose==="inside"&&!l||r._config.autoClose==="outside"&&l||r._menu.contains(e.target)&&(e.type==="keyup"&&e.key===Cw||/input|select|option|textarea|form/i.test(e.target.tagName)))continue;const u={relatedTarget:r._element};e.type==="click"&&(u.clickEvent=e),r._completeHide(u)}}static dataApiKeydownHandler(e){const n=/input|textarea/i.test(e.target.tagName),i=e.key===Gj,r=[zj,Iw].includes(e.key);if(!r&&!i||n&&!i)return;e.preventDefault();const o=this.matches(Ss)?this:Ie.prev(this,Ss)[0]||Ie.next(this,Ss)[0]||Ie.findOne(Ss,e.delegateTarget.parentNode),l=xi.getOrCreateInstance(o);if(r){e.stopPropagation(),l.show(),l._selectMenuItem(e);return}l._isShown()&&(e.stopPropagation(),l.hide(),o.focus())}}U.on(document,PA,Ss,xi.dataApiKeydownHandler);U.on(document,PA,xu,xi.dataApiKeydownHandler);U.on(document,kA,xi.clearMenus);U.on(document,eq,xi.clearMenus);U.on(document,kA,Ss,function(t){t.preventDefault(),xi.getOrCreateInstance(this).toggle()});Zn(xi);const Aw=".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",Sw=".sticky-top",gu="padding-right",Ow="margin-right";class D_{constructor(){this._element=document.body}getWidth(){const e=document.documentElement.clientWidth;return Math.abs(window.innerWidth-e)}hide(){const e=this.getWidth();this._disableOverFlow(),this._setElementAttributes(this._element,gu,n=>n+e),this._setElementAttributes(Aw,gu,n=>n+e),this._setElementAttributes(Sw,Ow,n=>n-e)}reset(){this._resetElementAttributes(this._element,"overflow"),this._resetElementAttributes(this._element,gu),this._resetElementAttributes(Aw,gu),this._resetElementAttributes(Sw,Ow)}isOverflowing(){return this.getWidth()>0}_disableOverFlow(){this._saveInitialAttribute(this._element,"overflow"),this._element.style.overflow="hidden"}_setElementAttributes(e,n,i){const r=this.getWidth(),o=l=>{if(l!==this._element&&window.innerWidth>l.clientWidth+r)return;this._saveInitialAttribute(l,n);const u=window.getComputedStyle(l).getPropertyValue(n);l.style.setProperty(n,`${i(Number.parseFloat(u))}px`)};this._applyManipulationCallback(e,o)}_saveInitialAttribute(e,n){const i=e.style.getPropertyValue(n);i&&cr.setDataAttribute(e,n,i)}_resetElementAttributes(e,n){const i=r=>{const o=cr.getDataAttribute(r,n);if(o===null){r.style.removeProperty(n);return}cr.removeDataAttribute(r,n),r.style.setProperty(n,o)};this._applyManipulationCallback(e,i)}_applyManipulationCallback(e,n){if(lr(e)){n(e);return}for(const i of Ie.find(e,this._element))n(i)}}const MA="backdrop",Eq="fade",Nw="show",Rw=`mousedown.bs.${MA}`,bq={className:"modal-backdrop",clickCallback:null,isAnimated:!1,isVisible:!0,rootElement:"body"},wq={className:"string",clickCallback:"(function|null)",isAnimated:"boolean",isVisible:"boolean",rootElement:"(element|string)"};class $A extends oc{constructor(e){super(),this._config=this._getConfig(e),this._isAppended=!1,this._element=null}static get Default(){return bq}static get DefaultType(){return wq}static get NAME(){return MA}show(e){if(!this._config.isVisible){nr(e);return}this._append();const n=this._getElement();this._config.isAnimated&&sc(n),n.classList.add(Nw),this._emulateAnimation(()=>{nr(e)})}hide(e){if(!this._config.isVisible){nr(e);return}this._getElement().classList.remove(Nw),this._emulateAnimation(()=>{this.dispose(),nr(e)})}dispose(){this._isAppended&&(U.off(this._element,Rw),this._element.remove(),this._isAppended=!1)}_getElement(){if(!this._element){const e=document.createElement("div");e.className=this._config.className,this._config.isAnimated&&e.classList.add(Eq),this._element=e}return this._element}_configAfterMerge(e){return e.rootElement=zr(e.rootElement),e}_append(){if(this._isAppended)return;const e=this._getElement();this._config.rootElement.append(e),U.on(e,Rw,()=>{nr(this._config.clickCallback)}),this._isAppended=!0}_emulateAnimation(e){wA(e,this._getElement(),this._config.isAnimated)}}const Tq="focustrap",Cq="bs.focustrap",Eh=`.${Cq}`,Iq=`focusin${Eh}`,Aq=`keydown.tab${Eh}`,Sq="Tab",Oq="forward",xw="backward",Nq={autofocus:!0,trapElement:null},Rq={autofocus:"boolean",trapElement:"element"};class FA extends oc{constructor(e){super(),this._config=this._getConfig(e),this._isActive=!1,this._lastTabNavDirection=null}static get Default(){return Nq}static get DefaultType(){return Rq}static get NAME(){return Tq}activate(){this._isActive||(this._config.autofocus&&this._config.trapElement.focus(),U.off(document,Eh),U.on(document,Iq,e=>this._handleFocusin(e)),U.on(document,Aq,e=>this._handleKeydown(e)),this._isActive=!0)}deactivate(){this._isActive&&(this._isActive=!1,U.off(document,Eh))}_handleFocusin(e){const{trapElement:n}=this._config;if(e.target===document||e.target===n||n.contains(e.target))return;const i=Ie.focusableChildren(n);i.length===0?n.focus():this._lastTabNavDirection===xw?i[i.length-1].focus():i[0].focus()}_handleKeydown(e){e.key===Sq&&(this._lastTabNavDirection=e.shiftKey?xw:Oq)}}const xq="modal",Dq="bs.modal",gi=`.${Dq}`,Lq=".data-api",kq="Escape",Pq=`hide${gi}`,Mq=`hidePrevented${gi}`,UA=`hidden${gi}`,BA=`show${gi}`,$q=`shown${gi}`,Fq=`resize${gi}`,Uq=`click.dismiss${gi}`,Bq=`mousedown.dismiss${gi}`,Wq=`keydown.dismiss${gi}`,Hq=`click${gi}${Lq}`,Dw="modal-open",Vq="fade",Lw="show",bp="modal-static",jq=".modal.show",qq=".modal-dialog",Kq=".modal-body",Gq='[data-bs-toggle="modal"]',zq={backdrop:!0,focus:!0,keyboard:!0},Yq={backdrop:"(boolean|string)",focus:"boolean",keyboard:"boolean"};class js extends _i{constructor(e,n){super(e,n),this._dialog=Ie.findOne(qq,this._element),this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._isShown=!1,this._isTransitioning=!1,this._scrollBar=new D_,this._addEventListeners()}static get Default(){return zq}static get DefaultType(){return Yq}static get NAME(){return xq}toggle(e){return this._isShown?this.hide():this.show(e)}show(e){this._isShown||this._isTransitioning||U.trigger(this._element,BA,{relatedTarget:e}).defaultPrevented||(this._isShown=!0,this._isTransitioning=!0,this._scrollBar.hide(),document.body.classList.add(Dw),this._adjustDialog(),this._backdrop.show(()=>this._showElement(e)))}hide(){!this._isShown||this._isTransitioning||U.trigger(this._element,Pq).defaultPrevented||(this._isShown=!1,this._isTransitioning=!0,this._focustrap.deactivate(),this._element.classList.remove(Lw),this._queueCallback(()=>this._hideModal(),this._element,this._isAnimated()))}dispose(){for(const e of[window,this._dialog])U.off(e,gi);this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}handleUpdate(){this._adjustDialog()}_initializeBackDrop(){return new $A({isVisible:Boolean(this._config.backdrop),isAnimated:this._isAnimated()})}_initializeFocusTrap(){return new FA({trapElement:this._element})}_showElement(e){document.body.contains(this._element)||document.body.append(this._element),this._element.style.display="block",this._element.removeAttribute("aria-hidden"),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.scrollTop=0;const n=Ie.findOne(Kq,this._dialog);n&&(n.scrollTop=0),sc(this._element),this._element.classList.add(Lw);const i=()=>{this._config.focus&&this._focustrap.activate(),this._isTransitioning=!1,U.trigger(this._element,$q,{relatedTarget:e})};this._queueCallback(i,this._dialog,this._isAnimated())}_addEventListeners(){U.on(this._element,Wq,e=>{if(e.key===kq){if(this._config.keyboard){e.preventDefault(),this.hide();return}this._triggerBackdropTransition()}}),U.on(window,Fq,()=>{this._isShown&&!this._isTransitioning&&this._adjustDialog()}),U.on(this._element,Bq,e=>{U.one(this._element,Uq,n=>{if(!(this._element!==e.target||this._element!==n.target)){if(this._config.backdrop==="static"){this._triggerBackdropTransition();return}this._config.backdrop&&this.hide()}})})}_hideModal(){this._element.style.display="none",this._element.setAttribute("aria-hidden",!0),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._isTransitioning=!1,this._backdrop.hide(()=>{document.body.classList.remove(Dw),this._resetAdjustments(),this._scrollBar.reset(),U.trigger(this._element,UA)})}_isAnimated(){return this._element.classList.contains(Vq)}_triggerBackdropTransition(){if(U.trigger(this._element,Mq).defaultPrevented)return;const n=this._element.scrollHeight>document.documentElement.clientHeight,i=this._element.style.overflowY;i==="hidden"||this._element.classList.contains(bp)||(n||(this._element.style.overflowY="hidden"),this._element.classList.add(bp),this._queueCallback(()=>{this._element.classList.remove(bp),this._queueCallback(()=>{this._element.style.overflowY=i},this._dialog)},this._dialog),this._element.focus())}_adjustDialog(){const e=this._element.scrollHeight>document.documentElement.clientHeight,n=this._scrollBar.getWidth(),i=n>0;if(i&&!e){const r=Qn()?"paddingLeft":"paddingRight";this._element.style[r]=`${n}px`}if(!i&&e){const r=Qn()?"paddingRight":"paddingLeft";this._element.style[r]=`${n}px`}}_resetAdjustments(){this._element.style.paddingLeft="",this._element.style.paddingRight=""}static jQueryInterface(e,n){return this.each(function(){const i=js.getOrCreateInstance(this,e);if(typeof e=="string"){if(typeof i[e]>"u")throw new TypeError(`No method named "${e}"`);i[e](n)}})}}U.on(document,Hq,Gq,function(t){const e=ar(this);["A","AREA"].includes(this.tagName)&&t.preventDefault(),U.one(e,BA,r=>{r.defaultPrevented||U.one(e,UA,()=>{pa(this)&&this.focus()})});const n=Ie.findOne(jq);n&&js.getInstance(n).hide(),js.getOrCreateInstance(e).toggle(this)});gf(js);Zn(js);const Xq="offcanvas",Qq="bs.offcanvas",vr=`.${Qq}`,WA=".data-api",Jq=`load${vr}${WA}`,Zq="Escape",kw="show",Pw="showing",Mw="hiding",eK="offcanvas-backdrop",HA=".offcanvas.show",tK=`show${vr}`,nK=`shown${vr}`,iK=`hide${vr}`,$w=`hidePrevented${vr}`,VA=`hidden${vr}`,rK=`resize${vr}`,sK=`click${vr}${WA}`,oK=`keydown.dismiss${vr}`,aK='[data-bs-toggle="offcanvas"]',lK={backdrop:!0,keyboard:!0,scroll:!1},cK={backdrop:"(boolean|string)",keyboard:"boolean",scroll:"boolean"};class _r extends _i{constructor(e,n){super(e,n),this._isShown=!1,this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._addEventListeners()}static get Default(){return lK}static get DefaultType(){return cK}static get NAME(){return Xq}toggle(e){return this._isShown?this.hide():this.show(e)}show(e){if(this._isShown||U.trigger(this._element,tK,{relatedTarget:e}).defaultPrevented)return;this._isShown=!0,this._backdrop.show(),this._config.scroll||new D_().hide(),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.classList.add(Pw);const i=()=>{(!this._config.scroll||this._config.backdrop)&&this._focustrap.activate(),this._element.classList.add(kw),this._element.classList.remove(Pw),U.trigger(this._element,nK,{relatedTarget:e})};this._queueCallback(i,this._element,!0)}hide(){if(!this._isShown||U.trigger(this._element,iK).defaultPrevented)return;this._focustrap.deactivate(),this._element.blur(),this._isShown=!1,this._element.classList.add(Mw),this._backdrop.hide();const n=()=>{this._element.classList.remove(kw,Mw),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._config.scroll||new D_().reset(),U.trigger(this._element,VA)};this._queueCallback(n,this._element,!0)}dispose(){this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}_initializeBackDrop(){const e=()=>{if(this._config.backdrop==="static"){U.trigger(this._element,$w);return}this.hide()},n=Boolean(this._config.backdrop);return new $A({className:eK,isVisible:n,isAnimated:!0,rootElement:this._element.parentNode,clickCallback:n?e:null})}_initializeFocusTrap(){return new FA({trapElement:this._element})}_addEventListeners(){U.on(this._element,oK,e=>{if(e.key===Zq){if(!this._config.keyboard){U.trigger(this._element,$w);return}this.hide()}})}static jQueryInterface(e){return this.each(function(){const n=_r.getOrCreateInstance(this,e);if(typeof e=="string"){if(n[e]===void 0||e.startsWith("_")||e==="constructor")throw new TypeError(`No method named "${e}"`);n[e](this)}})}}U.on(document,sK,aK,function(t){const e=ar(this);if(["A","AREA"].includes(this.tagName)&&t.preventDefault(),Yr(this))return;U.one(e,VA,()=>{pa(this)&&this.focus()});const n=Ie.findOne(HA);n&&n!==e&&_r.getInstance(n).hide(),_r.getOrCreateInstance(e).toggle(this)});U.on(window,Jq,()=>{for(const t of Ie.find(HA))_r.getOrCreateInstance(t).show()});U.on(window,rK,()=>{for(const t of Ie.find("[aria-modal][class*=show][class*=offcanvas-]"))getComputedStyle(t).position!=="fixed"&&_r.getOrCreateInstance(t).hide()});gf(_r);Zn(_r);const uK=new Set(["background","cite","href","itemtype","longdesc","poster","src","xlink:href"]),hK=/^aria-[\w-]*$/i,fK=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^#&/:?]*(?:[#/?]|$))/i,dK=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[\d+/a-z]+=*$/i,pK=(t,e)=>{const n=t.nodeName.toLowerCase();return e.includes(n)?uK.has(n)?Boolean(fK.test(t.nodeValue)||dK.test(t.nodeValue)):!0:e.filter(i=>i instanceof RegExp).some(i=>i.test(n))},jA={"*":["class","dir","id","lang","role",hK],a:["target","href","title","rel"],area:[],b:[],br:[],col:[],code:[],div:[],em:[],hr:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],i:[],img:["src","srcset","alt","title","width","height"],li:[],ol:[],p:[],pre:[],s:[],small:[],span:[],sub:[],sup:[],strong:[],u:[],ul:[]};function _K(t,e,n){if(!t.length)return t;if(n&&typeof n=="function")return n(t);const r=new window.DOMParser().parseFromString(t,"text/html"),o=[].concat(...r.body.querySelectorAll("*"));for(const l of o){const u=l.nodeName.toLowerCase();if(!Object.keys(e).includes(u)){l.remove();continue}const h=[].concat(...l.attributes),d=[].concat(e["*"]||[],e[u]||[]);for(const p of h)pK(p,d)||l.removeAttribute(p.nodeName)}return r.body.innerHTML}const gK="TemplateFactory",mK={allowList:jA,content:{},extraClass:"",html:!1,sanitize:!0,sanitizeFn:null,template:"<div></div>"},vK={allowList:"object",content:"object",extraClass:"(string|function)",html:"boolean",sanitize:"boolean",sanitizeFn:"(null|function)",template:"string"},yK={entry:"(string|element|function|null)",selector:"(string|element)"};class EK extends oc{constructor(e){super(),this._config=this._getConfig(e)}static get Default(){return mK}static get DefaultType(){return vK}static get NAME(){return gK}getContent(){return Object.values(this._config.content).map(e=>this._resolvePossibleFunction(e)).filter(Boolean)}hasContent(){return this.getContent().length>0}changeContent(e){return this._checkContent(e),this._config.content={...this._config.content,...e},this}toHtml(){const e=document.createElement("div");e.innerHTML=this._maybeSanitize(this._config.template);for(const[r,o]of Object.entries(this._config.content))this._setContent(e,o,r);const n=e.children[0],i=this._resolvePossibleFunction(this._config.extraClass);return i&&n.classList.add(...i.split(" ")),n}_typeCheckConfig(e){super._typeCheckConfig(e),this._checkContent(e.content)}_checkContent(e){for(const[n,i]of Object.entries(e))super._typeCheckConfig({selector:n,entry:i},yK)}_setContent(e,n,i){const r=Ie.findOne(i,e);if(r){if(n=this._resolvePossibleFunction(n),!n){r.remove();return}if(lr(n)){this._putElementInTemplate(zr(n),r);return}if(this._config.html){r.innerHTML=this._maybeSanitize(n);return}r.textContent=n}}_maybeSanitize(e){return this._config.sanitize?_K(e,this._config.allowList,this._config.sanitizeFn):e}_resolvePossibleFunction(e){return typeof e=="function"?e(this):e}_putElementInTemplate(e,n){if(this._config.html){n.innerHTML="",n.append(e);return}n.textContent=e.textContent}}const bK="tooltip",wK=new Set(["sanitize","allowList","sanitizeFn"]),wp="fade",TK="modal",mu="show",CK=".tooltip-inner",Fw=`.${TK}`,Uw="hide.bs.modal",qa="hover",Tp="focus",IK="click",AK="manual",SK="hide",OK="hidden",NK="show",RK="shown",xK="inserted",DK="click",LK="focusin",kK="focusout",PK="mouseenter",MK="mouseleave",$K={AUTO:"auto",TOP:"top",RIGHT:Qn()?"left":"right",BOTTOM:"bottom",LEFT:Qn()?"right":"left"},FK={allowList:jA,animation:!0,boundary:"clippingParents",container:!1,customClass:"",delay:0,fallbackPlacements:["top","right","bottom","left"],html:!1,offset:[0,0],placement:"top",popperConfig:null,sanitize:!0,sanitizeFn:null,selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',title:"",trigger:"hover focus"},UK={allowList:"object",animation:"boolean",boundary:"(string|element)",container:"(string|element|boolean)",customClass:"(string|function)",delay:"(number|object)",fallbackPlacements:"array",html:"boolean",offset:"(array|string|function)",placement:"(string|function)",popperConfig:"(null|object|function)",sanitize:"boolean",sanitizeFn:"(null|function)",selector:"(string|boolean)",template:"string",title:"(string|element|function)",trigger:"string"};class ga extends _i{constructor(e,n){if(typeof gA>"u")throw new TypeError("Bootstrap's tooltips require Popper (https://popper.js.org)");super(e,n),this._isEnabled=!0,this._timeout=0,this._isHovered=null,this._activeTrigger={},this._popper=null,this._templateFactory=null,this._newContent=null,this.tip=null,this._setListeners(),this._config.selector||this._fixTitle()}static get Default(){return FK}static get DefaultType(){return UK}static get NAME(){return bK}enable(){this._isEnabled=!0}disable(){this._isEnabled=!1}toggleEnabled(){this._isEnabled=!this._isEnabled}toggle(){if(this._isEnabled){if(this._activeTrigger.click=!this._activeTrigger.click,this._isShown()){this._leave();return}this._enter()}}dispose(){clearTimeout(this._timeout),U.off(this._element.closest(Fw),Uw,this._hideModalHandler),this._element.getAttribute("data-bs-original-title")&&this._element.setAttribute("title",this._element.getAttribute("data-bs-original-title")),this._disposePopper(),super.dispose()}show(){if(this._element.style.display==="none")throw new Error("Please use show on visible elements");if(!(this._isWithContent()&&this._isEnabled))return;const e=U.trigger(this._element,this.constructor.eventName(NK)),i=(EA(this._element)||this._element.ownerDocument.documentElement).contains(this._element);if(e.defaultPrevented||!i)return;this._disposePopper();const r=this._getTipElement();this._element.setAttribute("aria-describedby",r.getAttribute("id"));const{container:o}=this._config;if(this._element.ownerDocument.documentElement.contains(this.tip)||(o.append(r),U.trigger(this._element,this.constructor.eventName(xK))),this._popper=this._createPopper(r),r.classList.add(mu),"ontouchstart"in document.documentElement)for(const u of[].concat(...document.body.children))U.on(u,"mouseover",vh);const l=()=>{U.trigger(this._element,this.constructor.eventName(RK)),this._isHovered===!1&&this._leave(),this._isHovered=!1};this._queueCallback(l,this.tip,this._isAnimated())}hide(){if(!this._isShown()||U.trigger(this._element,this.constructor.eventName(SK)).defaultPrevented)return;if(this._getTipElement().classList.remove(mu),"ontouchstart"in document.documentElement)for(const r of[].concat(...document.body.children))U.off(r,"mouseover",vh);this._activeTrigger[IK]=!1,this._activeTrigger[Tp]=!1,this._activeTrigger[qa]=!1,this._isHovered=null;const i=()=>{this._isWithActiveTrigger()||(this._isHovered||this._disposePopper(),this._element.removeAttribute("aria-describedby"),U.trigger(this._element,this.constructor.eventName(OK)))};this._queueCallback(i,this.tip,this._isAnimated())}update(){this._popper&&this._popper.update()}_isWithContent(){return Boolean(this._getTitle())}_getTipElement(){return this.tip||(this.tip=this._createTipElement(this._newContent||this._getContentForTemplate())),this.tip}_createTipElement(e){const n=this._getTemplateFactory(e).toHtml();if(!n)return null;n.classList.remove(wp,mu),n.classList.add(`bs-${this.constructor.NAME}-auto`);const i=C3(this.constructor.NAME).toString();return n.setAttribute("id",i),this._isAnimated()&&n.classList.add(wp),n}setContent(e){this._newContent=e,this._isShown()&&(this._disposePopper(),this.show())}_getTemplateFactory(e){return this._templateFactory?this._templateFactory.changeContent(e):this._templateFactory=new EK({...this._config,content:e,extraClass:this._resolvePossibleFunction(this._config.customClass)}),this._templateFactory}_getContentForTemplate(){return{[CK]:this._getTitle()}}_getTitle(){return this._resolvePossibleFunction(this._config.title)||this._element.getAttribute("data-bs-original-title")}_initializeOnDelegatedTarget(e){return this.constructor.getOrCreateInstance(e.delegateTarget,this._getDelegateConfig())}_isAnimated(){return this._config.animation||this.tip&&this.tip.classList.contains(wp)}_isShown(){return this.tip&&this.tip.classList.contains(mu)}_createPopper(e){const n=typeof this._config.placement=="function"?this._config.placement.call(this,e,this._element):this._config.placement,i=$K[n.toUpperCase()];return Im(this._element,e,this._getPopperConfig(i))}_getOffset(){const{offset:e}=this._config;return typeof e=="string"?e.split(",").map(n=>Number.parseInt(n,10)):typeof e=="function"?n=>e(n,this._element):e}_resolvePossibleFunction(e){return typeof e=="function"?e.call(this._element):e}_getPopperConfig(e){const n={placement:e,modifiers:[{name:"flip",options:{fallbackPlacements:this._config.fallbackPlacements}},{name:"offset",options:{offset:this._getOffset()}},{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"arrow",options:{element:`.${this.constructor.NAME}-arrow`}},{name:"preSetPlacement",enabled:!0,phase:"beforeMain",fn:i=>{this._getTipElement().setAttribute("data-popper-placement",i.state.placement)}}]};return{...n,...typeof this._config.popperConfig=="function"?this._config.popperConfig(n):this._config.popperConfig}}_setListeners(){const e=this._config.trigger.split(" ");for(const n of e)if(n==="click")U.on(this._element,this.constructor.eventName(DK),this._config.selector,i=>{this._initializeOnDelegatedTarget(i).toggle()});else if(n!==AK){const i=n===qa?this.constructor.eventName(PK):this.constructor.eventName(LK),r=n===qa?this.constructor.eventName(MK):this.constructor.eventName(kK);U.on(this._element,i,this._config.selector,o=>{const l=this._initializeOnDelegatedTarget(o);l._activeTrigger[o.type==="focusin"?Tp:qa]=!0,l._enter()}),U.on(this._element,r,this._config.selector,o=>{const l=this._initializeOnDelegatedTarget(o);l._activeTrigger[o.type==="focusout"?Tp:qa]=l._element.contains(o.relatedTarget),l._leave()})}this._hideModalHandler=()=>{this._element&&this.hide()},U.on(this._element.closest(Fw),Uw,this._hideModalHandler)}_fixTitle(){const e=this._element.getAttribute("title");e&&(!this._element.getAttribute("aria-label")&&!this._element.textContent.trim()&&this._element.setAttribute("aria-label",e),this._element.setAttribute("data-bs-original-title",e),this._element.removeAttribute("title"))}_enter(){if(this._isShown()||this._isHovered){this._isHovered=!0;return}this._isHovered=!0,this._setTimeout(()=>{this._isHovered&&this.show()},this._config.delay.show)}_leave(){this._isWithActiveTrigger()||(this._isHovered=!1,this._setTimeout(()=>{this._isHovered||this.hide()},this._config.delay.hide))}_setTimeout(e,n){clearTimeout(this._timeout),this._timeout=setTimeout(e,n)}_isWithActiveTrigger(){return Object.values(this._activeTrigger).includes(!0)}_getConfig(e){const n=cr.getDataAttributes(this._element);for(const i of Object.keys(n))wK.has(i)&&delete n[i];return e={...n,...typeof e=="object"&&e?e:{}},e=this._mergeConfigObj(e),e=this._configAfterMerge(e),this._typeCheckConfig(e),e}_configAfterMerge(e){return e.container=e.container===!1?document.body:zr(e.container),typeof e.delay=="number"&&(e.delay={show:e.delay,hide:e.delay}),typeof e.title=="number"&&(e.title=e.title.toString()),typeof e.content=="number"&&(e.content=e.content.toString()),e}_getDelegateConfig(){const e={};for(const n in this._config)this.constructor.Default[n]!==this._config[n]&&(e[n]=this._config[n]);return e.selector=!1,e.trigger="manual",e}_disposePopper(){this._popper&&(this._popper.destroy(),this._popper=null),this.tip&&(this.tip.remove(),this.tip=null)}static jQueryInterface(e){return this.each(function(){const n=ga.getOrCreateInstance(this,e);if(typeof e=="string"){if(typeof n[e]>"u")throw new TypeError(`No method named "${e}"`);n[e]()}})}}Zn(ga);const BK="popover",WK=".popover-header",HK=".popover-body",VK={...ga.Default,content:"",offset:[0,8],placement:"right",template:'<div class="popover" role="tooltip"><div class="popover-arrow"></div><h3 class="popover-header"></h3><div class="popover-body"></div></div>',trigger:"click"},jK={...ga.DefaultType,content:"(null|string|element|function)"};class Nm extends ga{static get Default(){return VK}static get DefaultType(){return jK}static get NAME(){return BK}_isWithContent(){return this._getTitle()||this._getContent()}_getContentForTemplate(){return{[WK]:this._getTitle(),[HK]:this._getContent()}}_getContent(){return this._resolvePossibleFunction(this._config.content)}static jQueryInterface(e){return this.each(function(){const n=Nm.getOrCreateInstance(this,e);if(typeof e=="string"){if(typeof n[e]>"u")throw new TypeError(`No method named "${e}"`);n[e]()}})}}Zn(Nm);const qK="scrollspy",KK="bs.scrollspy",Rm=`.${KK}`,GK=".data-api",zK=`activate${Rm}`,Bw=`click${Rm}`,YK=`load${Rm}${GK}`,XK="dropdown-item",vo="active",QK='[data-bs-spy="scroll"]',Cp="[href]",JK=".nav, .list-group",Ww=".nav-link",ZK=".nav-item",eG=".list-group-item",tG=`${Ww}, ${ZK} > ${Ww}, ${eG}`,nG=".dropdown",iG=".dropdown-toggle",rG={offset:null,rootMargin:"0px 0px -25%",smoothScroll:!1,target:null,threshold:[.1,.5,1]},sG={offset:"(number|null)",rootMargin:"string",smoothScroll:"boolean",target:"element",threshold:"array"};class yf extends _i{constructor(e,n){super(e,n),this._targetLinks=new Map,this._observableSections=new Map,this._rootElement=getComputedStyle(this._element).overflowY==="visible"?null:this._element,this._activeTarget=null,this._observer=null,this._previousScrollData={visibleEntryTop:0,parentScrollTop:0},this.refresh()}static get Default(){return rG}static get DefaultType(){return sG}static get NAME(){return qK}refresh(){this._initializeTargetsAndObservables(),this._maybeEnableSmoothScroll(),this._observer?this._observer.disconnect():this._observer=this._getNewObserver();for(const e of this._observableSections.values())this._observer.observe(e)}dispose(){this._observer.disconnect(),super.dispose()}_configAfterMerge(e){return e.target=zr(e.target)||document.body,e.rootMargin=e.offset?`${e.offset}px 0px -30%`:e.rootMargin,typeof e.threshold=="string"&&(e.threshold=e.threshold.split(",").map(n=>Number.parseFloat(n))),e}_maybeEnableSmoothScroll(){this._config.smoothScroll&&(U.off(this._config.target,Bw),U.on(this._config.target,Bw,Cp,e=>{const n=this._observableSections.get(e.target.hash);if(n){e.preventDefault();const i=this._rootElement||window,r=n.offsetTop-this._element.offsetTop;if(i.scrollTo){i.scrollTo({top:r,behavior:"smooth"});return}i.scrollTop=r}}))}_getNewObserver(){const e={root:this._rootElement,threshold:this._config.threshold,rootMargin:this._config.rootMargin};return new IntersectionObserver(n=>this._observerCallback(n),e)}_observerCallback(e){const n=l=>this._targetLinks.get(`#${l.target.id}`),i=l=>{this._previousScrollData.visibleEntryTop=l.target.offsetTop,this._process(n(l))},r=(this._rootElement||document.documentElement).scrollTop,o=r>=this._previousScrollData.parentScrollTop;this._previousScrollData.parentScrollTop=r;for(const l of e){if(!l.isIntersecting){this._activeTarget=null,this._clearActiveClass(n(l));continue}const u=l.target.offsetTop>=this._previousScrollData.visibleEntryTop;if(o&&u){if(i(l),!r)return;continue}!o&&!u&&i(l)}}_initializeTargetsAndObservables(){this._targetLinks=new Map,this._observableSections=new Map;const e=Ie.find(Cp,this._config.target);for(const n of e){if(!n.hash||Yr(n))continue;const i=Ie.findOne(n.hash,this._element);pa(i)&&(this._targetLinks.set(n.hash,n),this._observableSections.set(n.hash,i))}}_process(e){this._activeTarget!==e&&(this._clearActiveClass(this._config.target),this._activeTarget=e,e.classList.add(vo),this._activateParents(e),U.trigger(this._element,zK,{relatedTarget:e}))}_activateParents(e){if(e.classList.contains(XK)){Ie.findOne(iG,e.closest(nG)).classList.add(vo);return}for(const n of Ie.parents(e,JK))for(const i of Ie.prev(n,tG))i.classList.add(vo)}_clearActiveClass(e){e.classList.remove(vo);const n=Ie.find(`${Cp}.${vo}`,e);for(const i of n)i.classList.remove(vo)}static jQueryInterface(e){return this.each(function(){const n=yf.getOrCreateInstance(this,e);if(typeof e=="string"){if(n[e]===void 0||e.startsWith("_")||e==="constructor")throw new TypeError(`No method named "${e}"`);n[e]()}})}}U.on(window,YK,()=>{for(const t of Ie.find(QK))yf.getOrCreateInstance(t)});Zn(yf);const oG="tab",aG="bs.tab",Ys=`.${aG}`,lG=`hide${Ys}`,cG=`hidden${Ys}`,uG=`show${Ys}`,hG=`shown${Ys}`,fG=`click${Ys}`,dG=`keydown${Ys}`,pG=`load${Ys}`,_G="ArrowLeft",Hw="ArrowRight",gG="ArrowUp",Vw="ArrowDown",Os="active",jw="fade",Ip="show",mG="dropdown",vG=".dropdown-toggle",yG=".dropdown-menu",Ap=":not(.dropdown-toggle)",EG='.list-group, .nav, [role="tablist"]',bG=".nav-item, .list-group-item",wG=`.nav-link${Ap}, .list-group-item${Ap}, [role="tab"]${Ap}`,qA='[data-bs-toggle="tab"], [data-bs-toggle="pill"], [data-bs-toggle="list"]',Sp=`${wG}, ${qA}`,TG=`.${Os}[data-bs-toggle="tab"], .${Os}[data-bs-toggle="pill"], .${Os}[data-bs-toggle="list"]`;class Zo extends _i{constructor(e){super(e),this._parent=this._element.closest(EG),this._parent&&(this._setInitialAttributes(this._parent,this._getChildren()),U.on(this._element,dG,n=>this._keydown(n)))}static get NAME(){return oG}show(){const e=this._element;if(this._elemIsActive(e))return;const n=this._getActiveElem(),i=n?U.trigger(n,lG,{relatedTarget:e}):null;U.trigger(e,uG,{relatedTarget:n}).defaultPrevented||i&&i.defaultPrevented||(this._deactivate(n,e),this._activate(e,n))}_activate(e,n){if(!e)return;e.classList.add(Os),this._activate(ar(e));const i=()=>{if(e.getAttribute("role")!=="tab"){e.classList.add(Ip);return}e.removeAttribute("tabindex"),e.setAttribute("aria-selected",!0),this._toggleDropDown(e,!0),U.trigger(e,hG,{relatedTarget:n})};this._queueCallback(i,e,e.classList.contains(jw))}_deactivate(e,n){if(!e)return;e.classList.remove(Os),e.blur(),this._deactivate(ar(e));const i=()=>{if(e.getAttribute("role")!=="tab"){e.classList.remove(Ip);return}e.setAttribute("aria-selected",!1),e.setAttribute("tabindex","-1"),this._toggleDropDown(e,!1),U.trigger(e,cG,{relatedTarget:n})};this._queueCallback(i,e,e.classList.contains(jw))}_keydown(e){if(![_G,Hw,gG,Vw].includes(e.key))return;e.stopPropagation(),e.preventDefault();const n=[Hw,Vw].includes(e.key),i=Am(this._getChildren().filter(r=>!Yr(r)),e.target,n,!0);i&&(i.focus({preventScroll:!0}),Zo.getOrCreateInstance(i).show())}_getChildren(){return Ie.find(Sp,this._parent)}_getActiveElem(){return this._getChildren().find(e=>this._elemIsActive(e))||null}_setInitialAttributes(e,n){this._setAttributeIfNotExists(e,"role","tablist");for(const i of n)this._setInitialAttributesOnChild(i)}_setInitialAttributesOnChild(e){e=this._getInnerElement(e);const n=this._elemIsActive(e),i=this._getOuterElement(e);e.setAttribute("aria-selected",n),i!==e&&this._setAttributeIfNotExists(i,"role","presentation"),n||e.setAttribute("tabindex","-1"),this._setAttributeIfNotExists(e,"role","tab"),this._setInitialAttributesOnTargetPanel(e)}_setInitialAttributesOnTargetPanel(e){const n=ar(e);n&&(this._setAttributeIfNotExists(n,"role","tabpanel"),e.id&&this._setAttributeIfNotExists(n,"aria-labelledby",`#${e.id}`))}_toggleDropDown(e,n){const i=this._getOuterElement(e);if(!i.classList.contains(mG))return;const r=(o,l)=>{const u=Ie.findOne(o,i);u&&u.classList.toggle(l,n)};r(vG,Os),r(yG,Ip),i.setAttribute("aria-expanded",n)}_setAttributeIfNotExists(e,n,i){e.hasAttribute(n)||e.setAttribute(n,i)}_elemIsActive(e){return e.classList.contains(Os)}_getInnerElement(e){return e.matches(Sp)?e:Ie.findOne(Sp,e)}_getOuterElement(e){return e.closest(bG)||e}static jQueryInterface(e){return this.each(function(){const n=Zo.getOrCreateInstance(this);if(typeof e=="string"){if(n[e]===void 0||e.startsWith("_")||e==="constructor")throw new TypeError(`No method named "${e}"`);n[e]()}})}}U.on(document,fG,qA,function(t){["A","AREA"].includes(this.tagName)&&t.preventDefault(),!Yr(this)&&Zo.getOrCreateInstance(this).show()});U.on(window,pG,()=>{for(const t of Ie.find(TG))Zo.getOrCreateInstance(t)});Zn(Zo);const CG="toast",IG="bs.toast",ts=`.${IG}`,AG=`mouseover${ts}`,SG=`mouseout${ts}`,OG=`focusin${ts}`,NG=`focusout${ts}`,RG=`hide${ts}`,xG=`hidden${ts}`,DG=`show${ts}`,LG=`shown${ts}`,kG="fade",qw="hide",vu="show",yu="showing",PG={animation:"boolean",autohide:"boolean",delay:"number"},MG={animation:!0,autohide:!0,delay:5e3};class Ef extends _i{constructor(e,n){super(e,n),this._timeout=null,this._hasMouseInteraction=!1,this._hasKeyboardInteraction=!1,this._setListeners()}static get Default(){return MG}static get DefaultType(){return PG}static get NAME(){return CG}show(){if(U.trigger(this._element,DG).defaultPrevented)return;this._clearTimeout(),this._config.animation&&this._element.classList.add(kG);const n=()=>{this._element.classList.remove(yu),U.trigger(this._element,LG),this._maybeScheduleHide()};this._element.classList.remove(qw),sc(this._element),this._element.classList.add(vu,yu),this._queueCallback(n,this._element,this._config.animation)}hide(){if(!this.isShown()||U.trigger(this._element,RG).defaultPrevented)return;const n=()=>{this._element.classList.add(qw),this._element.classList.remove(yu,vu),U.trigger(this._element,xG)};this._element.classList.add(yu),this._queueCallback(n,this._element,this._config.animation)}dispose(){this._clearTimeout(),this.isShown()&&this._element.classList.remove(vu),super.dispose()}isShown(){return this._element.classList.contains(vu)}_maybeScheduleHide(){this._config.autohide&&(this._hasMouseInteraction||this._hasKeyboardInteraction||(this._timeout=setTimeout(()=>{this.hide()},this._config.delay)))}_onInteraction(e,n){switch(e.type){case"mouseover":case"mouseout":{this._hasMouseInteraction=n;break}case"focusin":case"focusout":{this._hasKeyboardInteraction=n;break}}if(n){this._clearTimeout();return}const i=e.relatedTarget;this._element===i||this._element.contains(i)||this._maybeScheduleHide()}_setListeners(){U.on(this._element,AG,e=>this._onInteraction(e,!0)),U.on(this._element,SG,e=>this._onInteraction(e,!1)),U.on(this._element,OG,e=>this._onInteraction(e,!0)),U.on(this._element,NG,e=>this._onInteraction(e,!1))}_clearTimeout(){clearTimeout(this._timeout),this._timeout=null}static jQueryInterface(e){return this.each(function(){const n=Ef.getOrCreateInstance(this,e);if(typeof e=="string"){if(typeof n[e]>"u")throw new TypeError(`No method named "${e}"`);n[e](this)}})}}gf(Ef);Zn(Ef);class $G{constructor(){}async Init(){await this.LoadUser()}async LoadUser(){let e=this.GetSessionId(),n=await(await SC(ai(ha,`users/${e}`))).val(),i,r;!e||!n?ze.emit("open-settings-modal",(o,l)=>{this.CacheUser(o,l,!0),location.reload()}):(i=n.username,r=n.useGPS,te.commit("saveUseGPS",r),te.commit("saveUsername",i),te.commit("saveSessionId",e)),et.DataCheck()}GetSessionId(){let e=localStorage.getItem("sessionId");if(e&&e!="undefined")return e}CacheUser(e,n,i=!1){let r,o={};r=i?et.uuidv4():te.getters.sessionId;let l=te.getters.users[r];o=l?{...o,...l}:o,o.username=e,o.useGPS=n,fr(Et(Ps,r),o),localStorage.setItem("sessionId",r),te.commit("saveUseGPS",n),te.commit("saveUsername",e),te.commit("saveSessionId",r)}async Disconnect(){let e=te.getters.sessionId,n=te.getters.currentSquad;await Ls(Et(Ou,`${n}/userIds/${e}`)),await Ls(Et(Ps,`${e}/squadId`)),await Ls(Et(Ps,`${e}/teamId`))}currentTeamSquad(){let e=te.getters.user;if(!(e.squadId==null||e.teamId==null))return{squadId:e.squadId,teamId:e.teamId}}}const ul=new $G;class FG{constructor(){$d(this,"location",{});$d(this,"lastCoord",{lat:0,long:0})}Init(){te.commit("saveLocation",location),this.Update()}async Update(){if(console.log("tick"),te.getters.useGPS){let e=await this.ScanLocation(!1);e&&(this.location=e,te.commit("saveLocation",this.location),ul.currentTeamSquad()&&this.UpdateUserLocation())}this.CleanSpotMarkers(),setTimeout(()=>this.Update(),Xt.tickRateMS)}async UpdateUserLocation(){et.CoordDistance(this.location.lat,this.location.long,this.lastCoord.lat,this.lastCoord.long)>Xt.updateMeters&&te.getters.user&&await fr(Et(Ps,te.getters.sessionId+"/location"),this.location)}async GetLocation(){return new Promise((e,n)=>{navigator.geolocation.getCurrentPosition(i=>{let r={lat:i.coords.latitude,long:i.coords.longitude};return e(r)},i=>console.log(i),Xt.geoLocationOptions)})}async ScanLocation(e=!1){let n={lat:0,long:0};if(e){let i=[36.16360240464562,-115.18453981692234],r=et.randomGeo({lat:i[0],long:i[1]},2e4);return n={lat:Number.parseFloat(r.latitude),long:Number.parseFloat(r.longitude)},n}else return await this.GetLocation()}async createSpotMarker(e,n){let i=et.uuidv4(),r={teamId:te.getters.user.teamId,markerType:n,lat:e.lat,long:e.long,owner:te.getters.sessionId,createTime:new Date().getTime()};return await fr(Et(dp,i),r),i}async removeSpotMarker(e){await Ls(Et(dp,e))}async CleanSpotMarkers(){let e=new Date().getTime(),n=te.getters.spotDurationMS,i=te.getters.markers;!te.getters.markers||!n||Object.keys(i).forEach(async r=>{let o=i[r];e-o.createTime>n&&await Ls(Et(dp,r))})}}const L_=new FG,UG={data(){return{rooms:{},teams:{},squads:{},users:{},roomId:Xt.roomId}},methods:{SetLocation(){ze.emit("set-location")},openModal(){ze.emit("open-settings-modal",(t,e)=>{ul.CacheUser(t,e)})},async joinSquad(t,e){let n=te.getters.sessionId;te.getters.users.isSquadLeader;let i=ul.currentTeamSquad();i&&await Ls(Et(Ou,`${i.squadId}/userIds/${n}`));let r=this.squads[e],o=(r==null?void 0:r.userIds)==null;await fr(Et(Ou,`${e}/userIds/${n}`),{joinTime:new Date().getTime(),userId:n,isSquadLeader:o}),console.log(t,e),await Su(Et(Ps,n),{teamId:t,squadId:e,isSquadLeader:o});let l=i.squadId,u=this.sortByJoinTime(this.squads[l].userIds);if(u&&u[0]!=null){let h=u[0];console.log(h),await Su(Et(Ou,`${l}/userIds/${h.userId}`),{joinTime:new Date().getTime(),userId:h.userId,isSquadLeader:!0}),await Su(Et(Ps,h.userId),{isSquadLeader:!0})}},sortByJoinTime(t){if(!t)return[];let n=Object.keys(t).map(i=>t[i]);return kl.orderBy(n,"joinTime")},Disconnect(){ul.Disconnect()},usernameColor(t,e,n){if(te.getters.sessionId){if(t==te.getters.sessionId)return"isMe";if(e==te.getters.user.squadId)return"isSquad";if(n==te.getters.user.teamId)return"isTeam"}},GoToUser(t){ze.emit("go-to-user",t),ze.emit("toggle-sidebar")},openOffCanvas(){ze.emit("toggle-sidebar")}},async mounted(){let t=document.getElementById("offcanvasExample"),e=new _r(t);ze.on("toggle-sidebar",()=>{e.toggle()}),ze.on("data-updated",()=>{this.squads=te.getters.squads,this.teams=te.getters.teams,this.users=te.getters.users,this.rooms=te.getters.rooms})},computed:{orderedTeams:function(){return kl.orderBy(this.teams,"index")}}};const ma=t=>(Fl("data-v-2d401c67"),t=t(),Ul(),t),BG={class:"offcanvas offcanvas-start",tabindex:"-1",id:"offcanvasExample","aria-labelledby":"offcanvasExampleLabel"},WG={class:"pull-tab"},HG=ma(()=>le("span",{class:"tab"},"=",-1)),VG=[HG],jG={class:"offcanvas-body"},qG={class:"offcanvas-title"},KG={class:"room-name me-2 font-italic"},GG={class:"game-mode"},zG={class:"team-header"},YG=["onClick"],XG=ma(()=>le("i",{class:"bi bi-box-arrow-in-down-right float-end"},null,-1)),QG=["onClick"],JG={key:0,class:"bi bi-star-fill me-1"},ZG={class:"ps-3 pt-2 pb-2"},e4=ma(()=>le("div",{class:"top-fade"},null,-1)),t4=ma(()=>le("div",{class:"offcanvas-title"},"Playing As",-1)),n4=ma(()=>le("i",{class:"bi bi-box-arrow-right"},null,-1)),i4=[n4],r4=ma(()=>le("i",{class:"bi bi-pin-map-fill"},null,-1)),s4=[r4];function o4(t,e,n,i,r,o){var l,u;return we(),Ue("div",BG,[le("div",WG,[le("button",{class:"d-inline open-button",type:"button",onClick:e[0]||(e[0]=h=>o.openOffCanvas())},VG)]),le("div",jG,[le("div",qG,[le("span",KG,xr((l=r.rooms[r.roomId])==null?void 0:l.roomName),1),le("span",GG,xr((u=r.rooms[r.roomId])==null?void 0:u.gameMode),1)]),(we(!0),Ue(Tt,null,Ja(o.orderedTeams,h=>(we(),Ue("div",{class:"team",key:h.id},[le("h2",zG,xr(h.teamName),1),(we(!0),Ue(Tt,null,Ja(h.squadIds,d=>(we(),Ue("div",{class:"squad ms-4 mb-2",id:"squad-{{squad.id}}",key:d},[le("div",{class:"squad-header",onClick:p=>o.joinSquad(h.id,d)},[Uo(xr(r.squads[d].squadName)+" ",1),XG],8,YG),(we(!0),Ue(Tt,null,Ja(o.sortByJoinTime(r.squads[d].userIds),p=>(we(),Ue("div",{class:"squad-member ms-4 mt-2 mb-2",key:p.userId},[r.users!=null&&r.users[p.userId]!=null?(we(),Ue("div",{key:0,class:Mo(o.usernameColor(p.userId,d,h.id)),onClick:g=>o.GoToUser(p.userId)},[r.users[p.userId].isSquadLeader?(we(),Ue("i",JG)):mt("",!0),Uo(" "+xr(r.users[p.userId].username),1)],10,QG)):mt("",!0)]))),128))]))),128))]))),128))]),le("footer",ZG,[e4,t4,le("div",null,[le("h5",{class:"d-inline align-middle",onClick:e[1]||(e[1]=(...h)=>o.openModal&&o.openModal(...h)),id:"username-display"},xr(r.users&&r.users[t.$store.getters.sessionId]?r.users[t.$store.getters.sessionId].username:"unde"),1),le("button",{class:"btn btn-sm btn-outline-primary d-inline float-end me-2",id:"disconnect-button",dista:"",type:"button",onClick:e[2]||(e[2]=h=>o.Disconnect())},i4),le("button",{class:Mo(["btn btn-sm btn-outline-primary d-inline float-end me-2",{disabled:t.$store.getters.useGPS}]),id:"disconnect-button",dista:"",type:"button",onClick:e[3]||(e[3]=h=>o.SetLocation())},s4,2)])])])}const a4=Vi(UG,[["render",o4],["__scopeId","data-v-2d401c67"]]);let Op,Kw;const l4={data(){return{username:"",useGPS:!1,error:!1,onCloseCallback:void 0}},methods:{Save(t){t.stopPropagation(),this.error=!1,!this.username||this.username.length==0?this.error=!0:(Kw(this.username,this.useGPS==null?!1:this.useGPS),Op.hide())}},mounted(){this.$refs.modalRef&&(Op=new js(this.$refs.modalRef)),ze.on("open-settings-modal",t=>{Kw=t,this.username=te.getters.username,this.useGPS=te.getters.useGPS,Op.show()})}};const va=t=>(Fl("data-v-61b9fbc8"),t=t(),Ul(),t),c4={class:"modal fade",tabindex:"-1","aria-hidden":"true",ref:"modalRef"},u4={class:"modal-dialog"},h4={class:"modal-content"},f4=va(()=>le("div",{class:"modal-header"},[le("h5",{class:"modal-title",id:"exampleModalLabel"},"Settings"),le("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1)),d4={class:"modal-body"},p4={ref:"form",class:"needs-validation"},_4={class:"mb-4"},g4=va(()=>le("label",{for:"validationDefaultUsername",class:"form-label"},"Username",-1)),m4={class:"input-group"},v4=va(()=>le("div",{class:"invalid-feedback"},"Please choose a username.",-1)),y4={class:"mb-2"},E4=va(()=>le("label",{for:"validationDefaultUsername",class:"form-label"},"GPS Tracking",-1)),b4={class:"form-check form-switch"},w4=va(()=>le("label",{class:"form-check-label",for:"flexSwitchCheckDefault"},"By turning on GPS tracking, you will be able to share your device location with your teammates.",-1)),T4={key:0,class:"form-check-label mt-2",for:"flexSwitchCheckDefault"},C4=va(()=>le("i",{class:"bi bi-pin-map-fill"},null,-1)),I4={class:"modal-footer"};function A4(t,e,n,i,r,o){return we(),Ue("div",c4,[le("div",u4,[le("div",h4,[f4,le("div",d4,[le("form",p4,[le("div",_4,[g4,le("div",m4,[EE(le("input",{type:"text",class:Mo(["form-control",{"is-invalid":r.error}]),id:"validationDefaultUsername","onUpdate:modelValue":e[0]||(e[0]=l=>r.username=l),required:""},null,2),[[iM,r.username]])]),v4]),le("div",y4,[E4,le("div",b4,[EE(le("input",{class:"form-check-input",type:"checkbox",id:"flexSwitchCheckDefault","onUpdate:modelValue":e[1]||(e[1]=l=>r.useGPS=l)},null,512),[[rM,r.useGPS]]),w4,r.useGPS?mt("",!0):(we(),Ue("label",T4,[Uo("Use the "),C4,Uo(" button to set your location manually")]))])])],512)]),le("div",I4,[iP(t.$slots,"footer",{},void 0,!0),le("button",{class:"btn btn-secondary",type:"submit",onClick:e[2]||(e[2]=(...l)=>o.Save&&o.Save(...l))},"Save")])])])],512)}const S4=Vi(l4,[["render",A4],["__scopeId","data-v-61b9fbc8"]]),O4={name:"MarkerTray",components:{},data(){},methods:{},mounted(){}},Xa="/assets/enemy.svg";const N4={class:"marker-tray"},R4=CP('<div class="tray-container btn-group" data-v-341e8803><button class="btn btn-sm btn-outline-primary item" data-v-341e8803><img class="enemy-marker" src="'+Xa+'" data-v-341e8803></button><button class="btn btn-sm btn-outline-primary item" data-v-341e8803><img class="enemy-marker" src="'+Xa+'" data-v-341e8803></button><button class="btn btn-sm btn-outline-primary item" data-v-341e8803><img class="enemy-marker" src="'+Xa+'" data-v-341e8803></button><button class="btn btn-sm btn-outline-primary item" data-v-341e8803><img class="enemy-marker" src="'+Xa+'" data-v-341e8803></button></div>',1),x4=[R4];function D4(t,e,n,i,r,o){return we(),Ue("div",N4,x4)}const L4=Vi(O4,[["render",D4],["__scopeId","data-v-341e8803"]]);const k4="modulepreload",P4=function(t){return"/"+t},Gw={},Di=function(e,n,i){if(!n||n.length===0)return e();const r=document.getElementsByTagName("link");return Promise.all(n.map(o=>{if(o=P4(o),o in Gw)return;Gw[o]=!0;const l=o.endsWith(".css"),u=l?'[rel="stylesheet"]':"";if(!!i)for(let p=r.length-1;p>=0;p--){const g=r[p];if(g.href===o&&(!l||g.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${o}"]${u}`))return;const d=document.createElement("link");if(d.rel=l?"stylesheet":k4,l||(d.as="script",d.crossOrigin=""),d.href=o,document.head.appendChild(d),l)return new Promise((p,g)=>{d.addEventListener("load",p),d.addEventListener("error",()=>g(new Error(`Unable to preload CSS for ${o}`)))})})).then(()=>e())},KA=(t,e)=>{let n;return function(...i){const r=this;n&&clearTimeout(n),n=setTimeout(()=>{t.apply(r,i),n=null},e)}},M4=t=>!t||typeof t.charAt!="function"?t:t.charAt(0).toUpperCase()+t.slice(1),yo=t=>typeof t=="function",ya=(t,e,n)=>{for(const i in n){const r="set"+M4(i);t[r]?Rs(()=>n[i],(o,l)=>{t[r](o,l)}):e[r]&&Rs(()=>n[i],o=>{e[r](o)})}},Ea=t=>{const e={};for(const n in t)if(n.startsWith("on")&&!n.startsWith("onUpdate")&&n!=="onReady"){const i=n.slice(2).toLocaleLowerCase();e[i]=t[n]}return e},$4=async t=>{const e=await Promise.all([Di(()=>import("./marker-icon-2x.js"),[]),Di(()=>import("./marker-icon.js"),[]),Di(()=>import("./marker-shadow.js"),[])]);delete t.Default.prototype._getIconUrl,t.Default.mergeOptions({iconRetinaUrl:e[0].default,iconUrl:e[1].default,shadowUrl:e[2].default})},Eu=t=>{const e=ki(()=>console.warn(`Method ${t} has been invoked without being replaced`)),n=(...i)=>e.value(...i);return n.wrapped=e,Si(t,n),n},bu=(t,e)=>t.wrapped.value=e,Wr=typeof self=="object"&&self.self===self&&self||typeof global=="object"&&global.global===global&&global||void 0,ba="useGlobalLeaflet",bf={options:{type:Object,default:()=>({})}},wf=t=>({options:t.options,methods:{}}),Tf={...bf,pane:{type:String,default:"overlayPane"},attribution:{type:String,default:null},name:{type:String,custom:!0,default:void 0},layerType:{type:String,custom:!0,default:void 0},visible:{type:Boolean,custom:!0,default:!0}},Cf=(t,e,n)=>{const i=At("addLayer"),r=At("removeLayer"),{options:o,methods:l}=wf(t),u={...o,attribution:t.attribution,pane:t.pane},h=()=>i({leafletObject:e.value}),d=()=>r({leafletObject:e.value}),p={...l,setAttribution(g,y){this.$parent.leafletObject.attributionControl.removeAttribution(y).addAttribution(g)},setName(){d(),t.visible&&h()},setLayerType(){d(),t.visible&&h()},setVisible(g){e.value&&(g?h():d())},bindPopup({leafletObject:g}){if(!e.value||!yo(e.value.bindPopup)){console.warn("Attempt to bind popup before bindPopup method available on layer.");return}e.value.bindPopup(g)},bindTooltip({leafletObject:g}){if(!e.value||!yo(e.value.bindTooltip)){console.warn("Attempt to bind tooltip before bindTooltip method available on layer.");return}e.value.bindTooltip(g)},unbindTooltip(){const g=e.value&&yo(e.value.getTooltip)?e.value.getTooltip():null;g&&yo(g.unbindTooltip)&&g.unbindTooltip()},unbindPopup(){const g=e.value&&yo(e.value.getPopup)?e.value.getPopup():null;g&&yo(g.unbindPopup)&&g.unbindPopup()},updateVisibleProp(g){n.emit("update:visible",g)}};return Si("bindPopup",p.bindPopup),Si("bindTooltip",p.bindTooltip),Si("unbindTooltip",p.unbindTooltip),Si("unbindPopup",p.unbindPopup),z_(()=>{p.unbindPopup(),p.unbindTooltip(),d()}),{options:u,methods:p}},xm=(t,e)=>{if(t&&e.default)return J_("div",{style:{display:"none"}},e.default())},F4={...bf,interactive:{type:Boolean,default:!0},bubblingMouseEvents:{type:Boolean,default:!0}},U4=t=>{const{options:e,methods:n}=wf(t);return{options:{...e,interactive:t.interactive,bubblingMouseEvents:t.bubblingMouseEvents},methods:n}},B4={...Tf,...F4,stroke:{type:Boolean,custom:!0,default:!0},color:{type:String,custom:!0,default:"#3388ff"},weight:{type:Number,custom:!0,default:3},opacity:{type:Number,custom:!0,default:1},lineCap:{type:String,custom:!0,default:"round"},lineJoin:{type:String,custom:!0,default:"round"},dashArray:{type:String,custom:!0,default:null},dashOffset:{type:String,custom:!0,default:null},fill:{type:Boolean,custom:!0,default:!1},fillColor:{type:String,custom:!0,default:"#3388ff"},fillOpacity:{type:Number,custom:!0,default:.2},fillRule:{type:String,custom:!0,default:"evenodd"},className:{type:String,custom:!0,default:null}},W4=(t,e,n)=>{const{options:i,methods:r}=Cf(t,e,n),{options:o,methods:l}=U4(t),u=At("removeLayer"),h={...i,...o,stroke:t.stroke,color:t.color,weight:t.weight,opacity:t.opacity,lineCap:t.lineCap,lineJoin:t.lineJoin,dashArray:t.dashArray,dashOffset:t.dashOffset,fill:t.fill,fillColor:t.fillColor,fillOpacity:t.fillOpacity,fillRule:t.fillRule,className:t.className},d={...r,...l,setStroke(p){e.value.setStyle({stroke:p})},setColor(p){e.value.setStyle({color:p})},setWeight(p){e.value.setStyle({weight:p})},setOpacity(p){e.value.setStyle({opacity:p})},setLineCap(p){e.value.setStyle({lineCap:p})},setLineJoin(p){e.value.setStyle({lineJoin:p})},setDashArray(p){e.value.setStyle({dashArray:p})},setDashOffset(p){e.value.setStyle({dashOffset:p})},setFill(p){e.value.setStyle({fill:p})},setFillColor(p){e.value.setStyle({fillColor:p})},setFillOpacity(p){e.value.setStyle({fillOpacity:p})},setFillRule(p){e.value.setStyle({fillRule:p})},setClassName(p){e.value.setStyle({className:p})}};return Dh(()=>{u({leafletObject:e.value})}),{options:h,methods:d}},H4={...Tf,pane:{type:String,default:"tilePane"},opacity:{type:Number,custom:!1,default:1},zIndex:{type:Number,default:1},tileSize:{type:Number,default:256},noWrap:{type:Boolean,default:!1},minZoom:{type:Number,default:0},maxZoom:{type:Number,default:void 0}},V4=(t,e,n)=>{const{options:i,methods:r}=Cf(t,e,n);return{options:{...i,pane:t.pane,opacity:t.opacity,zIndex:t.zIndex,tileSize:t.tileSize,noWrap:t.noWrap,minZoom:t.minZoom,maxZoom:t.maxZoom},methods:{...r}}},j4={iconUrl:{type:String,custom:!0,default:null},iconRetinaUrl:{type:String,custom:!0,default:null},iconSize:{type:[Object,Array],custom:!0,default:null},iconAnchor:{type:[Object,Array],custom:!0,default:null},popupAnchor:{type:[Object,Array],custom:!0,default:()=>[0,0]},tooltipAnchor:{type:[Object,Array],custom:!0,default:()=>[0,0]},shadowUrl:{type:String,custom:!0,default:null},shadowRetinaUrl:{type:String,custom:!0,default:null},shadowSize:{type:[Object,Array],custom:!0,default:null},shadowAnchor:{type:[Object,Array],custom:!0,default:null},bgPos:{type:[Object,Array],custom:!0,default:()=>[0,0]},className:{type:String,custom:!0,default:""},options:{type:Object,custom:!0,default:()=>({})}};var cc={name:"LIcon",props:{...j4,...bf},setup(t,e){const n=ki(null),i=At(ba),r=At("canSetParentHtml"),o=At("setParentHtml"),l=At("setIcon");let u,h,d,p,g;const y=(P,G,oe)=>{const H=P&&P.innerHTML;if(!G){oe&&g&&r()&&o(H);return}const V=Ea(e.attrs);g&&h(g,V);const{options:Q}=wf(t),B={...Q,iconUrl:t.iconUrl,iconRetinaUrl:t.iconRetinaUrl,iconSize:t.iconSize,iconAnchor:t.iconAnchor,popupAnchor:t.popupAnchor,tooltipAnchor:t.tooltipAnchor,shadowUrl:t.shadowUrl,shadowRetinaUrl:t.shadowRetinaUrl,shadowSize:t.shadowSize,shadowAnchor:t.shadowAnchor,bgPos:t.bgPos,className:t.className,html:H||t.html};g=B.html?d(B):p(B),u(g,V),l(g)},b=()=>{Vr(()=>y(n.value,!0,!1))},S=()=>{Vr(()=>y(n.value,!1,!0))},N={setIconUrl:b,setIconRetinaUrl:b,setIconSize:b,setIconAnchor:b,setPopupAnchor:b,setTooltipAnchor:b,setShadowUrl:b,setShadowRetinaUrl:b,setShadowAnchor:b,setBgPos:b,setClassName:b,setHtml:b};return Xr(async()=>{const{DomEvent:P,divIcon:G,icon:oe}=i?Wr.L:await Di(()=>import("./leaflet-src.esm.js"),[]);u=P.on,h=P.off,d=G,p=oe,ya(N,{},t),new MutationObserver(S).observe(n.value,{attributes:!0,childList:!0,characterData:!0,subtree:!0}),b()}),{root:n}},render(){const t=this.$slots.default?this.$slots.default():void 0;return J_("div",{ref:"root"},t)}};cc.__file="src/components/LIcon.vue";const q4={...Tf,url:{type:String,required:!0},bounds:{type:[Array,Object],required:!0},opacity:{type:Number,custom:!0,default:1},alt:{type:String,default:""},interactive:{type:Boolean,default:!1},crossOrigin:{type:Boolean,default:!1},errorOverlayUrl:{type:String,custom:!0,default:""},zIndex:{type:Number,custom:!0,default:1},className:{type:String,default:""}},K4=(t,e,n)=>{const{options:i,methods:r}=Cf(t,e,n),o={...i,...t},l={...r,setOpacity(u){return e.value.setOpacity(u)},setUrl(u){return e.value.setUrl(u)},setBounds(u){return e.value.setBounds(u)},getBounds(){return e.value.getBounds()},getElement(){return e.value.getElement()},bringToFront(){return e.value.bringToFront()},bringToBack(){return e.value.bringToBack()},setZIndex(u){return e.value.setZIndex(u)}};return{options:o,methods:l}};var Dm={name:"LImageOverlay",props:q4,setup(t,e){const n=ki({}),i=ki(!1),r=At(ba),o=At("addLayer"),{options:l,methods:u}=K4(t,n,e);return Xr(async()=>{const{imageOverlay:h,DomEvent:d}=r?Wr.L:await Di(()=>import("./leaflet-src.esm.js"),[]);n.value=h(t.url,t.bounds,l);const p=Ea(e.attrs);d.on(n.value,p),ya(u,n.value,t),o({...t,...u,leafletObject:n.value}),i.value=!0,Vr(()=>e.emit("ready",n.value))}),{ready:i,leafletObject:n}},render(){return xm(this.ready,this.$slots)}};Dm.__file="src/components/LImageOverlay.vue";var GA={emits:["ready","update:zoom","update:center","update:bounds"],props:{...bf,center:{type:[Object,Array],default:()=>[0,0]},bounds:{type:[Array,Object],default:void 0},maxBounds:{type:[Array,Object],default:void 0},zoom:{type:Number,default:0},minZoom:{type:Number,default:void 0},maxZoom:{type:Number,default:void 0},paddingBottomRight:{type:Array,default:void 0},paddingTopLeft:{type:Array,default:void 0},padding:{type:Array,default:void 0},worldCopyJump:{type:Boolean,default:!1},crs:{type:[String,Object],default:"EPSG3857"},maxBoundsViscosity:{type:Number,default:void 0},inertia:{type:Boolean,default:void 0},inertiaDeceleration:{type:Number,default:void 0},inertiaMaxSpeed:{type:Number,default:void 0},easeLinearity:{type:Number,default:void 0},zoomAnimation:{type:Boolean,default:void 0},zoomAnimationThreshold:{type:Number,default:void 0},fadeAnimation:{type:Boolean,default:void 0},markerZoomAnimation:{type:Boolean,default:void 0},noBlockingAnimations:{type:Boolean,default:!1},useGlobalLeaflet:{type:Boolean,default:!0}},setup(t,e){const n=ki(null),i=$l({ready:!1,leafletRef:{},layersToAdd:[],layersInControl:[]}),{options:r}=wf(t),o={...r,minZoom:t.minZoom,maxZoom:t.maxZoom,maxBounds:t.maxBounds,maxBoundsViscosity:t.maxBoundsViscosity,worldCopyJump:t.worldCopyJump,crs:t.crs,center:t.center,zoom:t.zoom,inertia:t.inertia,inertiaDeceleration:t.inertiaDeceleration,inertiaMaxSpeed:t.inertiaMaxSpeed,easeLinearity:t.easeLinearity,zoomAnimation:t.zoomAnimation,zoomAnimationThreshold:t.zoomAnimationThreshold,fadeAnimation:t.fadeAnimation,markerZoomAnimation:t.markerZoomAnimation},l=Eu("addLayer"),u=Eu("removeLayer"),h=Eu("registerControl"),d=Eu("registerLayerControl");Si(ba,t.useGlobalLeaflet);const p={moveEndHandler(){e.emit("update:zoom",i.leafletRef.getZoom()),e.emit("update:center",i.leafletRef.getCenter()),e.emit("update:bounds",i.leafletRef.getBounds())},overlayAddHandler(b){const S=i.layersInControl.find(N=>N.name===b.name);S&&S.updateVisibleProp(!0)},overlayRemoveHandler(b){const S=i.layersInControl.find(N=>N.name===b.name);S&&S.updateVisibleProp(!1)}};Xr(async()=>{t.useGlobalLeaflet&&(Wr.L=Wr.L||await Di(()=>import("./leaflet-src.js").then(B=>B.l),[]));const{map:b,CRS:S,Icon:N,latLngBounds:P,latLng:G,DomEvent:oe}=t.useGlobalLeaflet?Wr.L:await Di(()=>import("./leaflet-src.esm.js"),[]);try{o.beforeMapMount&&await o.beforeMapMount()}catch(B){console.error(`The following error occurred running the provided beforeMapMount hook ${B.message}`)}await $4(N);const H=typeof o.crs=="string"?S[o.crs]:o.crs;o.crs=H||S.EPSG3857;const V={addLayer(B){B.layerType!==void 0&&(i.layerControl===void 0?i.layersToAdd.push(B):i.layersInControl.find(X=>X.leafletObject._leaflet_id===B.leafletObject._leaflet_id)||(i.layerControl.addLayer(B),i.layersInControl.push(B))),B.visible!==!1&&i.leafletRef.addLayer(B.leafletObject)},removeLayer(B){B.layerType!==void 0&&(i.layerControl===void 0?i.layersToAdd=i.layersToAdd.filter(Z=>Z.name!==B.name):(i.layerControl.removeLayer(B.leafletObject),i.layersInControl=i.layersInControl.filter(Z=>Z.leafletObject._leaflet_id!==B.leafletObject._leaflet_id))),i.leafletRef.removeLayer(B.leafletObject)},registerLayerControl(B){i.layerControl=B,i.layersToAdd.forEach(Z=>{i.layerControl.addLayer(Z)}),i.layersToAdd=[],h(B)},registerControl(B){i.leafletRef.addControl(B.leafletObject)},setZoom(B){const Z=i.leafletRef.getZoom();B!==Z&&i.leafletRef.setZoom(B,{animate:t.noBlockingAnimations?!1:null})},setPaddingBottomRight(B){i.paddingBottomRight=B},setPaddingTopLeft(B){i.paddingTopLeft=B},setPadding(B){i.padding=B},setCrs(B){const Z=i.leafletRef.getBounds();i.leafletRef.options.crs=B,i.leafletRef.fitBounds(Z,{animate:!1,padding:[0,0]})},fitBounds(B){i.leafletRef.fitBounds(B,{animate:this.noBlockingAnimations?!1:null})},setBounds(B){if(!B)return;const Z=P(B);if(!Z.isValid())return;!(i.lastSetBounds||i.leafletRef.getBounds()).equals(Z,0)&&(i.lastSetBounds=Z,i.leafletRef.fitBounds(Z,this.fitBoundsOptions))},setCenter(B){if(B==null)return;const Z=G(B),X=i.lastSetCenter||i.leafletRef.getCenter();(X.lat!==Z.lat||X.lng!==Z.lng)&&(i.lastSetCenter=Z,i.leafletRef.panTo(Z,{animate:this.noBlockingAnimations?!1:null}))}};bu(l,V.addLayer),bu(u,V.removeLayer),bu(h,V.registerControl),bu(d,V.registerLayerControl),i.leafletRef=b(n.value,o),ya(V,i.leafletRef,t);const Q=Ea(e.attrs);i.leafletRef.on("moveend",KA(p.moveEndHandler,100)),i.leafletRef.on("overlayadd",p.overlayAddHandler),i.leafletRef.on("overlayremove",p.overlayRemoveHandler),oe.on(i.leafletRef,Q),i.ready=!0,Vr(()=>e.emit("ready",i.leafletRef))}),Dh(()=>{i.leafletRef&&i.leafletRef.remove()});const g=Wp(()=>i.leafletRef),y=Wp(()=>i.ready);return{root:n,ready:y,leafletObject:g}},render(){return J_("div",{style:{width:"100%",height:"100%"},ref:"root"},this.ready?this.$slots.default():{})}};GA.__file="src/components/LMap.vue";const G4={...Tf,pane:{type:String,default:"markerPane"},draggable:{type:Boolean,custom:!0,default:!1},latLng:{type:[Object,Array],custom:!0,default:null},icon:{type:[Object],default:()=>{},custom:!1},zIndexOffset:{type:Number,custom:!1,default:null}},z4=(t,e,n)=>{const{options:i,methods:r}=Cf(t,e,n),o={...i,...t},l={...r,setDraggable(u){e.value.dragging&&(u?e.value.dragging.enable():e.value.dragging.disable())},latLngSync(u){n.emit("update:latLng",u.latlng),n.emit("update:lat-lng",u.latlng)},setLatLng(u){if(u!=null&&e.value){const h=e.value.getLatLng();(!h||!h.equals(u))&&e.value.setLatLng(u)}}};return{options:o,methods:l}};var uc={name:"LMarker",props:G4,setup(t,e){const n=ki({}),i=ki(!1),r=At(ba),o=At("addLayer");Si("canSetParentHtml",()=>!!n.value.getElement()),Si("setParentHtml",h=>n.value.getElement().innerHTML=h),Si("setIcon",h=>n.value.setIcon&&n.value.setIcon(h));const{options:l,methods:u}=z4(t,n,e);return l.icon===void 0&&delete l.icon,Xr(async()=>{const{marker:h,DomEvent:d}=r?Wr.L:await Di(()=>import("./leaflet-src.esm.js"),[]);n.value=h(t.latLng,l);const p=Ea(e.attrs);d.on(n.value,p),n.value.on("move",KA(u.latLngSync,100)),ya(u,n.value,t),o({...t,...u,leafletObject:n.value}),i.value=!0,Vr(()=>e.emit("ready",n.value))}),{ready:i,leafletObject:n}},render(){return xm(this.ready,this.$slots)}};uc.__file="src/components/LMarker.vue";const zA={...B4,latLngs:{type:Array,default:()=>[]},smoothFactor:{type:Number,custom:!0,default:1},noClip:{type:Boolean,custom:!0,default:!1}},Y4=(t,e,n)=>{const{options:i,methods:r}=W4(t,e,n),o={...i,...t},l={...r,setSmoothFactor(u){e.value.setStyle({smoothFactor:u})},setNoClip(u){e.value.setStyle({noClip:u})},addLatLng(u){e.value.addLatLng(u)}};return{options:o,methods:l}};({...zA});var YA={name:"LPolyline",props:zA,setup(t,e){const n=ki({}),i=ki(!1),r=At(ba),o=At("addLayer"),{options:l,methods:u}=Y4(t,n,e);return Xr(async()=>{const{polyline:h,DomEvent:d}=r?Wr.L:await Di(()=>import("./leaflet-src.esm.js"),[]);n.value=h(t.latLngs,l);const p=Ea(e.attrs);d.on(n.value,p),ya(u,n.value,t),o({...t,...u,leafletObject:n.value}),i.value=!0,Vr(()=>e.emit("ready",n.value))}),{ready:i,leafletObject:n}},render(){return xm(this.ready,this.$slots)}};YA.__file="src/components/LPolyline.vue";const XA={...H4,tms:{type:Boolean,default:!1},subdomains:{type:String,default:"abc"},detectRetina:{type:Boolean,default:!1},url:{type:String,default:null}},X4=(t,e,n)=>{const{options:i,methods:r}=V4(t,e,n);return{options:{...i,tms:t.tms,subdomains:t.subdomains,detectRetina:t.detectRetina},methods:{...r}}};var QA={props:XA,setup(t,e){const n=ki({}),i=At(ba),r=At("addLayer"),{options:o,methods:l}=X4(t,n,e);return Xr(async()=>{const{tileLayer:u,DomEvent:h}=i?Wr.L:await Di(()=>import("./leaflet-src.esm.js"),[]);n.value=u(t.url,o);const d=Ea(e.attrs);h.on(n.value,d),ya(l,n.value,t),r({...t,...l,leafletObject:n.value}),Vr(()=>e.emit("ready",n.value))}),{leafletObject:n}},render(){return null}};QA.__file="src/components/LTileLayer.vue";({...XA});const Q4={name:"MapEditor",components:{LMarker:uc,LIcon:cc,LImageOverlay:Dm},data(){return{boundStart:{lat:0,lng:0},boundEnd:{lat:0,lng:0},calibrateMap:!1}},methods:{startMove(t){this.boundStart=t.target.getLatLng()},endMove(t){this.boundEnd=t.target.getLatLng()}},mounted(){ze.on("editor-calibrate-map",t=>{this.calibrateMap=t;let e=te.getters.rooms[Xt.roomId].map.bounds;this.boundStart={lat:e[0][0],lng:e[0][1]},this.boundEnd={lat:e[1][0],lng:e[1][1]}}),ze.on("editor-save-map",async()=>{this.calibrateMap=!1,await fr(Et(PI,`${Xt.roomId}/map/bounds`),{0:[this.boundStart.lat,this.boundStart.lng],1:[this.boundEnd.lat,this.boundEnd.lng]})})}};function J4(t,e,n,i,r,o){const l=Ut("l-image-overlay"),u=Ut("l-marker");return we(),Ue(Tt,null,[r.calibrateMap?(we(),sr(l,{key:0,class:"overlay",className:"calibrate",url:"./cement-factory.png",bounds:[[r.boundStart.lat,r.boundStart.lng],[r.boundEnd.lat,r.boundEnd.lng]]},null,8,["bounds"])):mt("",!0),r.calibrateMap?(we(),sr(u,{key:1,ref:"start",draggable:!0,onDrag:o.startMove,"lat-lng":[r.boundStart.lat,r.boundStart.lng]},null,8,["onDrag","lat-lng"])):mt("",!0),r.calibrateMap?(we(),sr(u,{key:2,ref:"end",draggable:!0,onDrag:o.endMove,"lat-lng":[r.boundEnd.lat,r.boundEnd.lng]},null,8,["onDrag","lat-lng"])):mt("",!0)],64)}const Z4=Vi(Q4,[["render",J4],["__scopeId","data-v-4f1a0806"]]),ez={name:"MapOverlay",props:["map"],data(){return{distanceToCenter:"",center:{}}},methods:{onCenterUpdate(){if(te.getters.user){let t=te.getters.user.location;if(t&&this.map){let e=this.map.getCenter();this.distanceToCenter=et.formatDistance(et.CoordDistance(e.lat,e.lng,t.lat,t.long)*3.28084).toString()}}setTimeout(()=>this.onCenterUpdate(),5)}},mounted(){this.onCenterUpdate()}},tz="/assets/crosshair.svg";const JA=t=>(Fl("data-v-050f2f12"),t=t(),Ul(),t),nz={class:"crosshair-container"},iz={class:"crosshair"},rz=JA(()=>le("img",{src:tz},null,-1)),sz={class:"distance"},oz=JA(()=>le("span",{class:"ft"},"ft",-1));function az(t,e,n,i,r,o){return we(),Ue("div",nz,[le("div",iz,[rz,le("div",sz,[Uo(xr(r.distanceToCenter),1),oz])])])}const lz=Vi(ez,[["render",az],["__scopeId","data-v-050f2f12"]]),cz={name:"PlayerMarkers",components:{LMarker:uc,LIcon:cc},props:["teamMarkers"]},uz="/assets/me.svg",hz="/assets/me-squad-leader.svg",fz="/assets/squad-leader.svg",dz="/assets/squadmate-squad-leader.svg",pz="/assets/squad-member.svg",ZA="/assets/team-member.svg";const _z={class:"icon"},gz={key:0,class:"pulse",src:uz},mz={key:1,class:"pulse",src:hz},vz={key:2,src:fz},yz={key:3,src:dz},Ez={key:4,src:pz},bz={key:5,src:ZA},wz={key:6,src:ZA},Tz={key:7,class:"squadNumber"};function Cz(t,e,n,i,r,o){const l=Ut("l-icon"),u=Ut("l-marker");return we(!0),Ue(Tt,null,Ja(n.teamMarkers,h=>(we(),sr(u,{"lat-lng":[h.lat,h.long],key:h.id},{default:Fo(()=>[nt(l,null,{default:Fo(()=>[le("div",_z,[h.markerType=="me"?(we(),Ue("img",gz)):mt("",!0),h.markerType=="me-squad-leader"?(we(),Ue("img",mz)):mt("",!0),h.markerType=="squad-leader"?(we(),Ue("img",vz)):mt("",!0),h.markerType=="squadmate-squad-leader"?(we(),Ue("img",yz)):mt("",!0),h.markerType=="squad-member"?(we(),Ue("img",Ez)):mt("",!0),h.markerType=="team-member"?(we(),Ue("img",bz)):mt("",!0),h.markerType=="team-squad-leader"?(we(),Ue("img",wz)):mt("",!0),h.markerType.includes("leader")?(we(),Ue("span",Tz,xr(h.squadNumber),1)):mt("",!0)])]),_:2},1024)]),_:2},1032,["lat-lng"]))),128)}const Iz=Vi(cz,[["render",Cz],["__scopeId","data-v-4dc172d6"]]),Az={name:"SpotMarkers",components:{LMarker:uc,LIcon:cc},props:["spotMarkers"]};const Sz=t=>(Fl("data-v-3a565600"),t=t(),Ul(),t),Oz=Sz(()=>le("img",{class:"enemy-marker",src:Xa},null,-1));function Nz(t,e,n,i,r,o){const l=Ut("l-icon"),u=Ut("l-marker");return we(!0),Ue(Tt,null,Ja(n.spotMarkers,h=>(we(),sr(u,{"lat-lng":[h.lat,h.long],key:h.id},{default:Fo(()=>[nt(l,null,{default:Fo(()=>[Oz]),_:1})]),_:2},1032,["lat-lng"]))),128)}const Rz=Vi(Az,[["render",Nz],["__scopeId","data-v-3a565600"]]),xz={components:{LMap:GA,LTileLayer:QA,LMarker:uc,LIcon:cc,LPolyline:YA,LImageOverlay:Dm,PlayerMarkers:Iz,SpotMarkers:Rz,MapEditor:Z4,MapOverlay:lz},data(){return{map:null,mapCenter:[0,0],bounds:[[0,0],[0,0]],calibrateMap:!1,enableMap:!1}},methods:{async addSpotMarker(t){if(t.latlng&&te.getters.currentSquad){let e={lat:t.latlng.lat,long:t.latlng.lng},n=await L_.createSpotMarker(e,"spottedEnemy");setTimeout(async()=>{await L_.removeSpotMarker(n)},te.getters.spotDurationMS)}}},async mounted(){ze.on("data-ready",()=>{this.map=this.$refs.map.leafletObject}),ze.on("set-location",()=>{let t=this.map.getCenter(),e={lat:t.lat,long:t.lng};fr(Et(Ps,`${te.getters.sessionId}/location`),e)}),ze.on("go-to-user",t=>{let e=te.getters.users,n=t;if(!e||!te.getters.users[n]||!te.getters.users[n].location)return;let i=te.getters.users[n].location;this.map&&this.map.flyTo([i.lat,i.long],18)}),ze.on("calibrate-map",t=>{this.calibrateMap=t,ze.emit("editor-calibrate-map",t)}),ze.on("save-map",async()=>{this.calibrateMap=!1,ze.emit("editor-save-map"),ze.emit("map-saved")}),ze.on("data-updated",()=>{let t=te.getters.rooms[Xt.roomId].map,e=t.location;this.mapCenter=[e.lat,e.long],this.bounds=[[t.bounds[0][0],t.bounds[0][1]],[t.bounds[1][0],t.bounds[1][1]]]}),ze.on("toggle-map",()=>{this.enableMap=!this.enableMap})},computed:{}};function Dz(t,e,n,i,r,o){const l=Ut("MapOverlay"),u=Ut("l-tile-layer"),h=Ut("l-image-overlay"),d=Ut("MapEditor"),p=Ut("PlayerMarkers"),g=Ut("SpotMarkers"),y=Ut("l-map");return we(),Ue("div",null,[nt(l,{map:r.map},null,8,["map"]),nt(y,{id:"map",ref:"map",zoom:18,onClick:o.addSpotMarker,center:r.mapCenter,minZoom:3,maxZoom:40,zoomSnap:0,zoomDelta:.001,useGlobalLeaflet:!1,options:{attributionControl:!1,zoomControl:!1,zoomSnap:.01}},{default:Fo(()=>[r.enableMap?(we(),sr(u,{key:0,url:"https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}","layer-type":"base",name:"OpenStreetMap"})):mt("",!0),r.calibrateMap?mt("",!0):(we(),sr(h,{key:1,class:"overlay",url:"./cement-factory.png",bounds:r.bounds},null,8,["bounds"])),nt(d),nt(p,{teamMarkers:t.$store.getters.getTeamMarkers},null,8,["teamMarkers"]),nt(g,{spotMarkers:t.$store.getters.getSpotMarkers},null,8,["spotMarkers"])]),_:1},8,["onClick","center","zoomDelta","options"])])}const Lz=Vi(xz,[["render",Dz]]),kz={methods:{DataCheck(){}},async mounted(){ul.Init(),L_.Init(),console.log("init-data"),Lr.Subscribe("rooms",async n=>{te.commit("saveRooms",n),et.DataCheck()}),Lr.Subscribe("teams",async n=>{te.commit("saveTeams",n),et.DataCheck()}),Lr.Subscribe("squads",async n=>{te.commit("saveSquads",n),et.DataCheck()}),Lr.Subscribe("markers",async n=>{te.commit("saveMarkers",n),et.DataCheck()}),Lr.Subscribe("users",async n=>{te.commit("saveUsers",n),et.DataCheck()}),Lr.Subscribe("markers",async n=>{te.commit("saveMarkers",n),et.DataCheck()}),new URLSearchParams(window.location.search).get("isAdmin")=="true"&&te.commit("saveAdminState",!0)}};function Pz(t,e,n,i,r,o){const l=Ut("NavBar"),u=Ut("SideBar"),h=Ut("Map"),d=Ut("SettingsModal");return we(),Ue(Tt,null,[nt(l),nt(u),nt(h),nt(d)],64)}const Mz=Vi(kz,[["render",Pz]]);const ns=lM(Mz);ns.component("NavBar",kV);ns.component("SideBar",a4);ns.component("Map",Lz);ns.component("SettingsModal",S4);ns.component("MarkerTray",L4);ns.use(te);ns.use(q2,{firebaseApp:kI,modules:[]});ns.mount("#app");export{Ha as c};
